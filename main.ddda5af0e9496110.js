(self.webpackChunkx6_angular_shape=self.webpackChunkx6_angular_shape||[]).push([[179],{2757:(Qt,V)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.default=void 0,V.default=function(j,k){var F=j.nodes,I=j.edges,x=[],E={};if(!F)throw new Error("invalid nodes data!");return F&&F.forEach(function(b,w){E[b.id]=w,x.push([])}),I&&I.forEach(function(b){var A=E[b.source],M=E[b.target];!A&&0!==A||!M&&0!==M||(x[A][M]=1,k||(x[M][A]=1))}),x}},4610:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),Object.defineProperty(V,"GADDIAsync",{enumerable:!0,get:function(){return B.GADDIAsync}}),Object.defineProperty(V,"connectedComponentAsync",{enumerable:!0,get:function(){return B.connectedComponentAsync}}),V.default=void 0,Object.defineProperty(V,"detectAllCyclesAsync",{enumerable:!0,get:function(){return B.detectAllCyclesAsync}}),Object.defineProperty(V,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return B.detectAllDirectedCycleAsync}}),Object.defineProperty(V,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return B.detectAllUndirectedCycleAsync}}),Object.defineProperty(V,"detectCycleAsync",{enumerable:!0,get:function(){return B.detectCycleAsync}}),V.detectDirectedCycleAsync=void 0,Object.defineProperty(V,"dijkstraAsync",{enumerable:!0,get:function(){return B.dijkstraAsync}}),Object.defineProperty(V,"findAllPathAsync",{enumerable:!0,get:function(){return B.findAllPathAsync}}),Object.defineProperty(V,"findShortestPathAsync",{enumerable:!0,get:function(){return B.findShortestPathAsync}}),Object.defineProperty(V,"floydWarshallAsync",{enumerable:!0,get:function(){return B.floydWarshallAsync}}),Object.defineProperty(V,"getAdjMatrixAsync",{enumerable:!0,get:function(){return B.getAdjMatrixAsync}}),Object.defineProperty(V,"getDegreeAsync",{enumerable:!0,get:function(){return B.getDegreeAsync}}),Object.defineProperty(V,"getInDegreeAsync",{enumerable:!0,get:function(){return B.getInDegreeAsync}}),Object.defineProperty(V,"getNeighborsAsync",{enumerable:!0,get:function(){return B.getNeighborsAsync}}),Object.defineProperty(V,"getOutDegreeAsync",{enumerable:!0,get:function(){return B.getOutDegreeAsync}}),Object.defineProperty(V,"labelPropagationAsync",{enumerable:!0,get:function(){return B.labelPropagationAsync}}),Object.defineProperty(V,"louvainAsync",{enumerable:!0,get:function(){return B.louvainAsync}}),Object.defineProperty(V,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return B.minimumSpanningTreeAsync}}),Object.defineProperty(V,"pageRankAsync",{enumerable:!0,get:function(){return B.pageRankAsync}});var B=G(6481),Q=B.detectCycleAsync;V.detectDirectedCycleAsync=Q,V.default={getAdjMatrixAsync:B.getAdjMatrixAsync,connectedComponentAsync:B.connectedComponentAsync,getDegreeAsync:B.getDegreeAsync,getInDegreeAsync:B.getInDegreeAsync,getOutDegreeAsync:B.getOutDegreeAsync,detectCycleAsync:B.detectCycleAsync,detectDirectedCycleAsync:Q,detectAllCyclesAsync:B.detectAllCyclesAsync,detectAllDirectedCycleAsync:B.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:B.detectAllUndirectedCycleAsync,dijkstraAsync:B.dijkstraAsync,findAllPathAsync:B.findAllPathAsync,findShortestPathAsync:B.findShortestPathAsync,floydWarshallAsync:B.floydWarshallAsync,labelPropagationAsync:B.labelPropagationAsync,louvainAsync:B.louvainAsync,minimumSpanningTreeAsync:B.minimumSpanningTreeAsync,pageRankAsync:B.pageRankAsync,getNeighborsAsync:B.getNeighborsAsync,GADDIAsync:B.GADDIAsync}},9499:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.default=void 0;var B=function j(x){return x&&x.__esModule?x:{default:x}}(G(6904)),Q=G(5271);V.default=function(E,b,w,y){void 0===y&&(y=!0);var A=function k(x){void 0===x&&(x={});var y,E=x,b=function(){},w=(y={},function(A){var M=A.next;return!y[M]&&(y[M]=!0,!0)});return E.allowTraversal=x.allowTraversal||w,E.enter=x.enter||b,E.leave=x.leave||b,E}(w),M=new B.default,S=E.edges,P=void 0===S?[]:S;M.enqueue(b);for(var U="",z=function(){var ne=M.dequeue();A.enter({current:ne,previous:U}),(0,Q.getNeighbors)(ne,P,y?"target":void 0).forEach(function(q){A.allowTraversal({previous:U,current:ne,next:q})&&M.enqueue(q)}),A.leave({current:ne,previous:U}),U=ne};!M.isEmpty();)z()}},9276:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.default=function k(F,I){return I?j(F):Q(F)},V.detectStrongConnectComponents=V.detectConnectedComponents=void 0;var B=G(5271),Q=function(I){for(var x=I.nodes,E=void 0===x?[]:x,b=I.edges,w=void 0===b?[]:b,y=[],A={},M=[],S=function ie(ne){M.push(ne),A[ne.id]=!0;for(var q=(0,B.getNeighbors)(ne.id,w),K=function(ae){var re=q[ae];if(!A[re]){var oe=E.filter(function(ve){return ve.id===re});oe.length>0&&ie(oe[0])}},ee=0;ee<q.length;++ee)K(ee)},P=0;P<E.length;P++){var U=E[P];if(!A[U.id]){S(U);for(var z=[];M.length>0;)z.push(M.pop());y.push(z)}}return y};V.detectConnectedComponents=Q;var j=function(I){for(var x=I.nodes,E=void 0===x?[]:x,b=I.edges,w=void 0===b?[]:b,y=[],A={},M={},S={},P=[],U=0,z=function K(ee){M[ee.id]=U,S[ee.id]=U,U+=1,y.push(ee),A[ee.id]=!0;for(var X=(0,B.getNeighbors)(ee.id,w,"target").filter(function(we){return E.map(function(_e){return _e.id}).indexOf(we)>-1}),ae=function(_e){var me=X[_e];if(M[me]||0===M[me])A[me]&&(S[ee.id]=Math.min(S[ee.id],M[me]));else{var Ce=E.filter(function(fe){return fe.id===me});Ce.length>0&&K(Ce[0]),S[ee.id]=Math.min(S[ee.id],S[me])}},re=0;re<X.length;re++)ae(re);if(S[ee.id]===M[ee.id]){for(var oe=[];y.length>0;){var ve=y.pop();if(A[ve.id]=!1,oe.push(ve),ve===ee)break}oe.length>0&&P.push(oe)}},ie=0,ne=E;ie<ne.length;ie++){var q=ne[ie];!M[q.id]&&0!==M[q.id]&&z(q)}return P};V.detectStrongConnectComponents=j},384:(Qt,V)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.secondReg=V.dateReg=void 0,V.secondReg=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/,V.dateReg=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/},6149:(Qt,V)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.getOutDegree=V.getInDegree=V.default=void 0;var G=function(F){var I={},x=F.nodes,b=F.edges,w=void 0===b?[]:b;return(void 0===x?[]:x).forEach(function(y){I[y.id]={degree:0,inDegree:0,outDegree:0}}),w.forEach(function(y){I[y.source].degree++,I[y.source].outDegree++,I[y.target].degree++,I[y.target].inDegree++}),I};V.default=G,V.getInDegree=function(F,I){return G(F)[I]?G(F)[I].inDegree:0},V.getOutDegree=function(F,I){return G(F)[I]?G(F)[I].outDegree:0}},1674:(Qt,V,G)=>{"use strict";function B(M){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(M)}Object.defineProperty(V,"__esModule",{value:!0}),V.detectAllUndirectedCycle=V.detectAllDirectedCycle=V.detectAllCycles=V.default=void 0;var Q=function x(M){return M&&M.__esModule?M:{default:M}}(G(811)),j=function I(M,S){if(!S&&M&&M.__esModule)return M;if(null===M||"object"!==B(M)&&"function"!=typeof M)return{default:M};var P=F(S);if(P&&P.has(M))return P.get(M);var U={},z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ie in M)if("default"!==ie&&Object.prototype.hasOwnProperty.call(M,ie)){var ne=z?Object.getOwnPropertyDescriptor(M,ie):null;ne&&(ne.get||ne.set)?Object.defineProperty(U,ie,ne):U[ie]=M[ie]}return U.default=M,P&&P.set(M,U),U}(G(9276)),k=G(5271);function F(M){if("function"!=typeof WeakMap)return null;var S=new WeakMap,P=new WeakMap;return(F=function(z){return z?P:S})(M)}var b=function(S,P,U){var z,ie;void 0===U&&(U=!0);for(var ne=[],K=0,ee=(0,j.default)(S,!1);K<ee.length;K++){var X=ee[K];if(X.length)for(var ae=X[0],re=ae.id,oe=[ae],ve=((z={})[re]=ae,z),we=((ie={})[re]=new Set,ie);oe.length>0;)for(var _e=oe.pop(),me=_e.id,Ce=(0,k.getNeighbors)(me,S.edges),fe=function(de){var ke,Ze=Ce[de],We=S.nodes.find(function(Ct){return Ct.id===Ze});if(Ze===me)ne.push(((ke={})[Ze]=_e,ke));else if(Ze in we){if(!we[me].has(We)){for(var bt=!0,Ft=[We,_e],Pt=ve[me];we[Ze].size&&!we[Ze].has(Pt)&&(Ft.push(Pt),Pt!==ve[Pt.id]);)Pt=ve[Pt.id];if(Ft.push(Pt),P&&U?(bt=!1,Ft.findIndex(function(Ct){return P.indexOf(Ct.id)>-1})>-1&&(bt=!0)):P&&!U&&Ft.findIndex(function(Ct){return P.indexOf(Ct.id)>-1})>-1&&(bt=!1),bt){for(var Xe={},yt=1;yt<Ft.length;yt+=1)Xe[Ft[yt-1].id]=Ft[yt];Ft.length&&(Xe[Ft[Ft.length-1].id]=Ft[0]),ne.push(Xe)}we[Ze].add(_e)}}else ve[Ze]=_e,oe.push(We),we[Ze]=new Set([_e])},be=0;be<Ce.length;be+=1)fe(be)}return ne};V.detectAllUndirectedCycle=b;var w=function(S,P,U){void 0===U&&(U=!0);for(var z=[],ie=new Set,ne=[],q=[],K={},ee={},ae=function Ft(Pt,Xe,yt){var Ct=!1;if(P&&!1===U&&P.indexOf(Pt.id)>-1)return Ct;z.push(Pt),ie.add(Pt);for(var pt=yt[Pt.id],xt=0;xt<pt.length;xt+=1)if((Fe=K[pt[xt]])===Xe){for(var ut={},Ut=1;Ut<z.length;Ut+=1)ut[z[Ut-1].id]=z[Ut];z.length&&(ut[z[z.length-1].id]=z[0]),q.push(ut),Ct=!0}else ie.has(Fe)||Ft(Fe,Xe,yt)&&(Ct=!0);if(Ct)!function(Pt){for(var Xe=[Pt];Xe.length>0;){var yt=Xe.pop();ie.has(yt)&&(ie.delete(yt),ne[yt.id].forEach(function(Ct){Xe.push(Ct)}),ne[yt.id].clear())}}(Pt);else for(xt=0;xt<pt.length;xt+=1){var Fe;ne[(Fe=K[pt[xt]]).id].has(Pt)||ne[Fe.id].add(Pt)}return z.pop(),Ct},re=S.nodes,oe=void 0===re?[]:re,ve=0;ve<oe.length;ve+=1){var we=oe[ve];ee[we.id]=ve,K[ve]=we}if(P&&U){var me=function(Pt){var Xe=P[Pt];ee[oe[Pt].id]=ee[Xe],ee[Xe]=0,K[0]=oe.find(function(yt){return yt.id===Xe}),K[ee[oe[Pt].id]]=oe[Pt]};for(ve=0;ve<P.length;ve++)me(ve)}for(var Ce=function(Pt){for(var Xe,yt,Ct=1/0,pt=0;pt<Pt.length;pt+=1)for(var xt=Pt[pt],Fe=0;Fe<xt.length;Fe++){var ut=ee[xt[Fe].id];ut<Ct&&(Ct=ut,yt=pt)}var Ut=Pt[yt],$e=[];for(pt=0;pt<Ut.length;pt+=1){var Te=Ut[pt];$e[Te.id]=[];for(var tt=0,Mt=(0,k.getNeighbors)(Te.id,S.edges,"target").filter(function(Le){return Ut.map(function(zt){return zt.id}).indexOf(Le)>-1});tt<Mt.length;tt++){var Wt=Mt[tt];Wt!==Te.id||!1===U&&P.indexOf(Te.id)>-1?$e[Te.id].push(ee[Wt]):q.push(((Xe={})[Te.id]=Te,Xe))}}return{component:Ut,adjList:$e,minIdx:Ct}},fe=0;fe<oe.length;){var be=oe.filter(function(Ft){return ee[Ft.id]>=fe}),te=(0,j.detectStrongConnectComponents)({nodes:be,edges:S.edges}).filter(function(Ft){return Ft.length>1});if(0===te.length)break;var de=Ce(te),ke=de.minIdx,Ze=de.adjList,We=de.component;if(!(We.length>1))break;We.forEach(function(Ft){ne[Ft.id]=new Set});var bt=K[ke];if(P&&U&&-1===P.indexOf(bt.id))return q;ae(bt,bt,Ze),fe=ke+1}return q};V.detectAllDirectedCycle=w,V.detectAllCycles=function(S,P,U,z){return void 0===z&&(z=!0),P?w(S,U,z):b(S,U,z)},V.default=function(S){var P=null,U=S.nodes,ie={},ne={},q={},K={};(void 0===U?[]:U).forEach(function(ae){ne[ae.id]=ae});for(var ee={enter:function(re){var oe=re.current,ve=re.previous;if(q[oe]){P={};for(var we=oe,_e=ve;_e!==oe;)P[we]=_e,we=_e,_e=ie[_e];P[we]=_e}else q[oe]=oe,delete ne[oe],ie[oe]=ve},leave:function(re){var oe=re.current;K[oe]=oe,delete q[oe]},allowTraversal:function(re){return!P&&!K[re.next]}};Object.keys(ne).length;){var X=Object.keys(ne)[0];(0,Q.default)(S,X,ee)}return P}},811:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.default=function k(F,I,x){j(F,I,"",function Q(F){void 0===F&&(F={});var b,I=F,x=function(){},E=(b={},function(w){var y=w.next;return!b[y]&&(b[y]=!0,!0)});return I.allowTraversal=F.allowTraversal||E,I.enter=F.enter||x,I.leave=F.leave||x,I}(x))};var B=G(5271);function j(F,I,x,E){E.enter({current:I,previous:x});var b=F.edges;(0,B.getNeighbors)(I,void 0===b?[]:b,"target").forEach(function(y){E.allowTraversal({previous:x,current:I,next:y})&&j(F,y,I,E)}),E.leave({current:I,previous:x})}},4894:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.default=void 0;var B=G(655),Q=G(1035),j=G(5271);function x(E,b,w,y){if(E===b)return[E];if(y[b])return y[b];for(var A=[],M=0,S=w[b];M<S.length;M++){var U=x(E,S[M],w,y);if(!U)return;for(var z=0,ie=U;z<ie.length;z++){var ne=ie[z];(0,Q.isArray)(ne)?A.push((0,B.__spreadArray)((0,B.__spreadArray)([],ne,!0),[b],!1)):A.push([ne,b])}}return y[b]=A,y[b]}V.default=function(b,w,y,A){var M=b.nodes,S=void 0===M?[]:M,P=b.edges,U=void 0===P?[]:P,z=[],ie={},ne={},q={};S.forEach(function(ve,we){var _e=ve.id;z.push(_e),ne[_e]=1/0,_e===w&&(ne[_e]=0)});for(var K=S.length,ee=function(we){var _e=function(b,w,y){for(var M,A=1/0,S=0;S<w.length;S++){var P=w[S].id;!y[P]&&b[P]<=A&&(A=b[P],M=w[S])}return M}(ne,S,ie),me=_e.id;if(ie[me]=!0,ne[me]===1/0)return"continue";(y?(0,j.getOutEdgesNodeId)(me,U):(0,j.getEdgesByNodeId)(me,U)).forEach(function(fe){var be=fe.target,de=be===me?fe.source:be,ke=A&&fe[A]?fe[A]:1;ne[de]>ne[_e.id]+ke?(ne[de]=ne[_e.id]+ke,q[de]=[_e.id]):ne[de]===ne[_e.id]+ke&&q[de].push(_e.id)})},X=0;X<K;X++)ee();q[w]=[w];var ae={};for(var re in ne)ne[re]!==1/0&&x(w,re,q,ae);var oe={};for(var re in ae)oe[re]=ae[re][0];return{length:ne,path:oe,allPath:ae}}},6147:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.findShortestPath=V.findAllPath=void 0;var B=function j(I){return I&&I.__esModule?I:{default:I}}(G(4894)),Q=G(5271);V.findShortestPath=function(x,E,b,w,y){var A=(0,B.default)(x,E,w,y);return{length:A.length[b],path:A.path[b],allPath:A.allPath[b]}},V.findAllPath=function(x,E,b,w){var y;if(E===b)return[[E]];var A=x.edges,M=void 0===A?[]:A,S=[E],P=((y={})[E]=!0,y),U=[],z=[],ie=w?(0,Q.getNeighbors)(E,M,"target"):(0,Q.getNeighbors)(E,M);for(U.push(ie);S.length>0&&U.length>0;){var ne=U[U.length-1];if(ne.length){var q=ne.shift();if(q&&(S.push(q),P[q]=!0,ie=w?(0,Q.getNeighbors)(q,M,"target"):(0,Q.getNeighbors)(q,M),U.push(ie.filter(function(X){return!P[X]}))),S[S.length-1]===b){var ee=S.map(function(ae){return ae});z.push(ee),K=S.pop(),P[K]=!1,U.pop()}}else{var K=S.pop();P[K]=!1,U.pop()}}return z}},5100:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.default=void 0;var B=function Q(F){return F&&F.__esModule?F:{default:F}}(G(2757));V.default=function(I,x){for(var E=(0,B.default)(I,x),b=[],w=E.length,y=0;y<w;y+=1){b[y]=[];for(var A=0;A<w;A+=1)b[y][A]=y===A?0:0!==E[y][A]&&E[y][A]?E[y][A]:1/0}for(var M=0;M<w;M+=1)for(y=0;y<w;y+=1)for(A=0;A<w;A+=1)b[y][A]>b[y][M]+b[M][A]&&(b[y][A]=b[y][M]+b[M][A]);return b}},7757:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.default=void 0;var B=G(1035),Q=G(1678),j=function(){function A(M,S,P,U,z){this.fromNode=M,this.toNode=S,this.nodeEdgeNodeLabel={nodeLabel1:P||Q.VACANT_NODE_LABEL,edgeLabel:U||Q.VACANT_EDGE_LABEL,nodeLabel2:z||Q.VACANT_NODE_LABEL}}return A.prototype.equalTo=function(M){return this.fromNode===M.formNode&&this.toNode===M.toNode&&this.nodeEdgeNodeLabel===M.nodeEdgeNodeLabel},A.prototype.notEqualTo=function(M){return!this.equalTo(M)},A}(),k=function(){function A(){this.rmpath=[],this.dfsEdgeList=[]}return A.prototype.equalTo=function(M){var S=this.dfsEdgeList.length;if(S!==M.length)return!1;for(var U=0;U<S;U++)if(this.dfsEdgeList[U]!==M[U])return!1;return!0},A.prototype.notEqualTo=function(M){return!this.equalTo(M)},A.prototype.pushBack=function(M,S,P,U,z){return this.dfsEdgeList.push(new j(M,S,P,U,z)),this.dfsEdgeList},A.prototype.toGraph=function(M,S){void 0===M&&(M=Q.VACANT_GRAPH_ID),void 0===S&&(S=!1);var P=new Q.Graph(M,!0,S);return this.dfsEdgeList.forEach(function(U){var z=U.fromNode,ie=U.toNode,ne=U.nodeEdgeNodeLabel,q=ne.nodeLabel1,K=ne.edgeLabel,ee=ne.nodeLabel2;q!==Q.VACANT_NODE_LABEL&&P.addNode(z,q),ee!==Q.VACANT_NODE_LABEL&&P.addNode(ie,ee),q!==Q.VACANT_NODE_LABEL&&ee!==q&&P.addEdge(void 0,z,ie,K)}),P},A.prototype.buildRmpath=function(){this.rmpath=[];for(var M=void 0,P=this.dfsEdgeList.length-1;P>=0;P--){var U=this.dfsEdgeList[P],z=U.fromNode,ie=U.toNode;z<ie&&(void 0===M||ie===M)&&(this.rmpath.push(P),M=z)}return this.rmpath},A.prototype.getNodeNum=function(){var M={};return this.dfsEdgeList.forEach(function(S){M[S.fromNode]||(M[S.fromNode]=!0),M[S.toNode]||(M[S.toNode]=!0)}),Object.keys(M).length},A}(),F=function(){function A(M){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],M){for(;M;){var S=M.edge;this.edges.push(S),this.nodesUsed[S.from]=1,this.nodesUsed[S.to]=1,this.edgesUsed[S.id]=1,M=M.preNode}this.edges=this.edges.reverse()}}return A.prototype.hasNode=function(M){return 1===this.nodesUsed[M.id]},A.prototype.hasEdge=function(M){return 1===this.edgesUsed[M.id]},A}(),I=function(){function A(M){var P=M.minSupport,U=void 0===P?2:P,z=M.minNodeNum,ie=void 0===z?1:z,ne=M.maxNodeNum,q=void 0===ne?4:ne,K=M.top,ee=void 0===K?10:K,X=M.directed,ae=void 0!==X&&X,re=M.verbose,oe=void 0!==re&&re;this.graphs=M.graphs,this.dfsCode=new k,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=U,this.top=ee,this.directed=ae,this.counter=0,this.maxNodeNum=q,this.minNodeNum=ie,this.verbose=oe,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return A.prototype.findForwardRootEdges=function(M,S){var P=this,U=[],z=M.nodeMap;return S.edges.forEach(function(ie){(P.directed||S.label<=z[ie.to].label)&&U.push(ie)}),U},A.prototype.findBackwardEdge=function(M,S,P,U){if(!this.directed&&S===P)return null;for(var z=M.nodeMap,ne=z[P.to].edges,q=ne.length,K=0;K<q;K++){var ee=ne[K];if(!U.hasEdge(ee)&&ee.to===S.from)if(this.directed){if(z[S.from].label<z[P.to].label||z[S.from].label===z[P.to].label&&S.label<=ee.label)return ee}else if(S.label<ee.label||S.label===ee.label&&z[S.to].label<=z[P.to].label)return ee}return null},A.prototype.findForwardPureEdges=function(M,S,P,U){for(var z=[],ne=M.nodeMap[S.to].edges,q=ne.length,K=0;K<q;K++){var ee=ne[K],X=M.nodeMap[ee.to];P<=X.label&&!U.hasNode(X)&&z.push(ee)}return z},A.prototype.findForwardRmpathEdges=function(M,S,P,U){for(var z=[],ie=M.nodeMap,ne=ie[S.to].label,K=ie[S.from].edges,ee=K.length,X=0;X<ee;X++){var ae=K[X],re=ie[ae.to].label;S.to===ae.to||P>re||U.hasNode(ie[ae.to])||(S.label<ae.label||S.label===ae.label&&ne<=re)&&z.push(ae)}return z},A.prototype.getSupport=function(M){var S={};return M.forEach(function(P){S[P.graphId]||(S[P.graphId]=!0)}),Object.keys(S).length},A.prototype.findMinLabel=function(M){var S=void 0;return Object.keys(M).forEach(function(P){var U=M[P],z=U.nodeLabel1,ie=U.edgeLabel,ne=U.nodeLabel2;S?(z<S.nodeLabel1||z===S.nodeLabel1&&ie<S.edgeLabel||z===S.nodeLabel1&&ie===S.edgeLabel&&ne<S.nodeLabel2)&&(S={nodeLabel1:z,edgeLabel:ie,nodeLabel2:ne}):S={nodeLabel1:z,edgeLabel:ie,nodeLabel2:ne}}),S},A.prototype.isMin=function(){var M=this,S=this.dfsCode;if(this.verbose&&console.log("isMin checking",S),1===S.dfsEdgeList.length)return!0;var P=this.directed,U=S.toGraph(Q.VACANT_GRAPH_ID,P),z=U.nodeMap,ie=new k,ne={};U.nodes.forEach(function(X){M.findForwardRootEdges(U,X).forEach(function(re){var oe=z[re.to],ve="".concat(X.label,"-").concat(re.label,"-").concat(oe.label);ne[ve]||(ne[ve]={projected:[],nodeLabel1:X.label,edgeLabel:re.label,nodeLabel2:oe.label}),ne[ve].projected.push({graphId:U.id,edge:re,preNode:null})})});var q=this.findMinLabel(ne);if(q){ie.dfsEdgeList.push(new j(0,1,q.nodeLabel1,q.edgeLabel,q.nodeLabel2));var ee="".concat(q.nodeLabel1,"-").concat(q.edgeLabel,"-").concat(q.nodeLabel2);return function X(ae){for(var re=ie.buildRmpath(),oe=ie.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,ve=ie.dfsEdgeList[re[0]].toNode,we={},_e=!1,me=0,Ce=P?-1:0,fe=function(pt){if(_e)return"break";ae.forEach(function(xt){var Fe=new F(xt),ut=M.findBackwardEdge(U,Fe.edges[re[pt]],Fe.edges[re[0]],Fe);ut&&(we[ut.label]||(we[ut.label]={projected:[],edgeLabel:ut.label}),we[ut.label].projected.push({graphId:U.id,edge:we,preNode:xt}),me=ie.dfsEdgeList[re[pt]].fromNode,_e=!0)})},be=re.length-1;be>Ce&&"break"!==fe(be);be--);if(_e){var de=M.findMinLabel(we);ie.dfsEdgeList.push(new j(ve,me,Q.VACANT_NODE_LABEL,de.edgeLabel,Q.VACANT_NODE_LABEL));var ke=ie.dfsEdgeList.length-1;return M.dfsCode.dfsEdgeList[ke]===ie.dfsEdgeList[ke]&&X(we[de.edgeLabel].projected)}var Ze={};_e=!1;var We=0;ae.forEach(function(Ct){var pt=new F(Ct),xt=M.findForwardPureEdges(U,pt.edges[re[0]],oe,pt);xt.length>0&&(_e=!0,We=ve,xt.forEach(function(Fe){var ut="".concat(Fe.label,"-").concat(z[Fe.to].label);Ze[ut]||(Ze[ut]={projected:[],edgeLabel:Fe.label,nodeLabel2:z[Fe.to].label}),Ze[ut].projected.push({graphId:U.id,edge:Fe,preNode:Ct})}))});var bt=re.length,Ft=function(pt){if(_e)return"break";var xt=re[pt];ae.forEach(function(Fe){var ut=new F(Fe),Ut=M.findForwardRmpathEdges(U,ut.edges[xt],oe,ut);Ut.length>0&&(_e=!0,We=ie.dfsEdgeList[xt].fromNode,Ut.forEach(function($e){var Te="".concat($e.label,"-").concat(z[$e.to].label);Ze[Te]||(Ze[Te]={projected:[],edgeLabel:$e.label,nodeLabel2:z[$e.to].label}),Ze[Te].projected.push({graphId:U.id,edge:$e,preNode:Fe})}))})};for(be=0;be<bt&&"break"!==Ft(be);be++);if(!_e)return!0;var Xe=M.findMinLabel(Ze);ie.dfsEdgeList.push(new j(We,ve+1,Q.VACANT_NODE_LABEL,Xe.edgeLabel,Xe.nodeLabel2));var yt=ie.dfsEdgeList.length-1;return S.dfsEdgeList[yt]===ie.dfsEdgeList[yt]&&X(Ze["".concat(Xe.edgeLabel,"-").concat(Xe.nodeLabel2)].projected)}(ne[ee].projected)}},A.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var M=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,B.clone)(M))}},A.prototype.subGraphMining=function(M){var S=this;if(!(this.getSupport(M)<this.minSupport)&&this.isMin()){this.report();var U=this.dfsCode.getNodeNum(),z=this.dfsCode.buildRmpath(),ie=this.dfsCode.dfsEdgeList[z[0]].toNode,ne=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,q={},K={};M.forEach(function(ee){for(var X=S.graphs[ee.graphId],ae=X.nodeMap,re=new F(ee),oe=z.length-1;oe>=0;oe--){var ve=S.findBackwardEdge(X,re.edges[z[oe]],re.edges[z[0]],re);if(ve){var we="".concat(S.dfsCode.dfsEdgeList[z[oe]].fromNode,"-").concat(ve.label);K[we]||(K[we]={projected:[],toNodeId:S.dfsCode.dfsEdgeList[z[oe]].fromNode,edgeLabel:ve.label}),K[we].projected.push({graphId:ee.graphId,edge:ve,preNode:ee})}}if(!(U>=S.maxNodeNum)){S.findForwardPureEdges(X,re.edges[z[0]],ne,re).forEach(function(Ce){var fe="".concat(ie,"-").concat(Ce.label,"-").concat(ae[Ce.to].label);q[fe]||(q[fe]={projected:[],fromNodeId:ie,edgeLabel:Ce.label,nodeLabel2:ae[Ce.to].label}),q[fe].projected.push({graphId:ee.graphId,edge:Ce,preNode:ee})});var me=function(fe){S.findForwardRmpathEdges(X,re.edges[z[fe]],ne,re).forEach(function(te){var de="".concat(S.dfsCode.dfsEdgeList[z[fe]].fromNode,"-").concat(te.label,"-").concat(ae[te.to].label);q[de]||(q[de]={projected:[],fromNodeId:S.dfsCode.dfsEdgeList[z[fe]].fromNode,edgeLabel:te.label,nodeLabel2:ae[te.to].label}),q[de].projected.push({graphId:ee.graphId,edge:te,preNode:ee})})};for(oe=0;oe<z.length;oe++)me(oe)}}),Object.keys(K).forEach(function(ee){var X=K[ee];S.dfsCode.dfsEdgeList.push(new j(ie,X.toNodeId,"-1",X.edgeLabel,"-1")),S.subGraphMining(K[ee].projected),S.dfsCode.dfsEdgeList.pop()}),Object.keys(q).forEach(function(ee){var X=q[ee];S.dfsCode.dfsEdgeList.push(new j(X.fromNodeId,ie+1,Q.VACANT_NODE_LABEL,X.edgeLabel,X.nodeLabel2)),S.subGraphMining(q[ee].projected),S.dfsCode.dfsEdgeList.pop()})}},A.prototype.generate1EdgeFrequentSubGraphs=function(){var M=this.graphs,S=this.directed,P=this.minSupport,U=this.frequentSize1Subgraphs,z={},ie={},ne={},q={};return Object.keys(M).forEach(function(K){var ee=M[K],X=ee.nodeMap;ee.nodes.forEach(function(ae,re){var oe=ae.label,ve="".concat(K,"-").concat(oe);if(!ne[ve]){var we=z[oe]||0;we++,z[oe]=we}ne[ve]={graphKey:K,label:oe},ae.edges.forEach(function(_e){var me=oe,Ce=X[_e.to].label;if(!S&&me>Ce){var fe=Ce;Ce=me,me=fe}var be=_e.label,te="".concat(K,"-").concat(me,"-").concat(be,"-").concat(Ce),de="".concat(me,"-").concat(be,"-").concat(Ce);if(!ie[de]){var ke=ie[de]||0;ke++,ie[de]=ke}q[te]={graphId:K,nodeLabel1:me,edgeLabel:be,nodeLabel2:Ce}})})}),Object.keys(z).forEach(function(K){if(!(z[K]<P)){var X={nodes:[],edges:[]};X.nodes.push({id:"0",label:K}),U.push(X)}}),U},A.prototype.run=function(){var M=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var S=this.graphs,U={};Object.keys(S).forEach(function(z){var ie=S[z],ne=ie.nodeMap;ie.nodes.forEach(function(q){M.findForwardRootEdges(ie,q).forEach(function(ee){var X=ne[ee.to],ae="".concat(q.label,"-").concat(ee.label,"-").concat(X.label);U[ae]||(U[ae]={projected:[],nodeLabel1:q.label,edgeLabel:ee.label,nodeLabel2:X.label}),U[ae].projected.push({graphId:z,edge:ee,preNode:null})})})}),Object.keys(U).forEach(function(z){var ie=U[z],ne=ie.projected;M.dfsCode.dfsEdgeList.push(new j(0,1,ie.nodeLabel1,ie.edgeLabel,ie.nodeLabel2)),M.subGraphMining(ne),M.dfsCode.dfsEdgeList.pop()})}},A}(),b="cluster";V.default=function(M){var P=M.directed,U=void 0!==P&&P,z=M.nodeLabelProp,ie=void 0===z?b:z,ne=M.edgeLabelProp,q=void 0===ne?b:ne,K=function(M,S,P,U){var z={};return Object.keys(M).forEach(function(ie,ne){var q=M[ie],K=new Q.Graph(ne,!0,S),ee={};q.nodes.forEach(function(X,ae){K.addNode(ae,X[P]),ee[X.id]=ae}),q.edges.forEach(function(X,ae){K.addEdge(-1,ee[X.source],ee[X.target],X[U])}),K&&K.getNodeNum()&&(z[K.id]=K)}),z}(M.graphs,U,ie,q),we=new I({graphs:K,minSupport:M.minSupport,maxNodeNum:M.maxNodeNum,minNodeNum:M.minNodeNum,top:M.top,verbose:M.verbose,directed:U});we.run();var _e=function(M,S,P){var U=[];return M.forEach(function(z){var ie={nodes:[],edges:[]};z.nodes.forEach(function(ne){var q;ie.nodes.push(((q={id:"".concat(ne.id)})[S]=ne.label,q))}),z.edges.forEach(function(ne){var q;ie.edges.push(((q={source:"".concat(ne.from),target:"".concat(ne.to)})[P]=ne.label,q))}),U.push(ie)}),U}(we.frequentSubgraphs,ie,q);return _e}},1678:(Qt,V)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.VACANT_NODE_LABEL=V.VACANT_NODE_ID=V.VACANT_GRAPH_ID=V.VACANT_EDGE_LABEL=V.VACANT_EDGE_ID=V.Node=V.Graph=V.Edge=V.AUTO_EDGE_ID=void 0,V.VACANT_EDGE_ID=-1,V.VACANT_NODE_ID=-1,V.VACANT_EDGE_LABEL="-1",V.VACANT_NODE_LABEL="-1",V.VACANT_GRAPH_ID=-1,V.AUTO_EDGE_ID="-1";var I=function b(w,y,A,M){void 0===w&&(w=-1),void 0===y&&(y=-1),void 0===A&&(A=-1),void 0===M&&(M="-1"),this.id=w,this.from=y,this.to=A,this.label=M};V.Edge=I;var x=function(){function b(w,y){void 0===w&&(w=-1),void 0===y&&(y="-1"),this.id=w,this.label=y,this.edges=[],this.edgeMap={}}return b.prototype.addEdge=function(w){this.edges.push(w),this.edgeMap[w.id]=w},b}();V.Node=x;var E=function(){function b(w,y,A){void 0===w&&(w=-1),void 0===y&&(y=!0),void 0===A&&(A=!1),this.id=w,this.edgeIdAutoIncrease=y,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=A}return b.prototype.getNodeNum=function(){return this.nodes.length},b.prototype.addNode=function(w,y){if(!this.nodeMap[w]){var A=new x(w,y);this.nodes.push(A),this.nodeMap[w]=A,this.nodeLabelMap[y]||(this.nodeLabelMap[y]=[]),this.nodeLabelMap[y].push(w)}},b.prototype.addEdge=function(w,y,A,M){if((this.edgeIdAutoIncrease||void 0===w)&&(w=this.counter++),!(this.nodeMap[y]&&this.nodeMap[A]&&this.nodeMap[A].edgeMap[w])){var S=new I(w,y,A,M);if(this.edges.push(S),this.edgeMap[w]=S,this.nodeMap[y].addEdge(S),this.edgeLabelMap[M]||(this.edgeLabelMap[M]=[]),this.edgeLabelMap[M].push(S),!this.directed){var P=new I(w,A,y,M);this.nodeMap[A].addEdge(P),this.edgeLabelMap[M].push(P)}}},b}();V.Graph=E},1349:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.default=void 0;var B=G(655),Q=I(G(5100)),j=I(G(7757)),k=I(G(4894)),F=G(5271);function I(q){return q&&q.__esModule?q:{default:q}}var x=function(K,ee,X,ae){void 0===X&&(X="cluster"),void 0===ae&&(ae=2);var re=[],oe=K.nodes;return ee.forEach(function(ve,we){re.push(E(oe,ve,we,X,ae))}),re},E=function(K,ee,X,ae,re){var oe=[X],ve=[],we={};return ee.forEach(function(_e,me){if(_e<=re&&X!==me){oe.push(me),ve.push(K[me]);var Ce=K[me][ae];we[Ce]?(we[Ce].count++,we[Ce].dists.push(_e)):we[Ce]={count:1,dists:[_e]}}}),Object.keys(we).forEach(function(_e){we[_e].dists=we[_e].dists.sort(function(me,Ce){return me-Ce})}),{nodeIdx:X,nodeId:K[X].id,nodeIdxs:oe,neighbors:ve,neighborNum:oe.length-1,nodeLabelCountMap:we}},w=function(K,ee,X,ae){var re=X.nodes;return ae||(ae={}),Object.keys(K).forEach(function(oe){var ve,we;if(!ae||!ae[oe]){ae[oe]={nodes:[],edges:[]};var _e=K[oe],me=null===(ve=ee[_e.start])||void 0===ve?void 0:ve.nodeIdxs,Ce=null===(we=ee[_e.end])||void 0===we?void 0:we.nodeIdxs;if(me&&Ce){var fe=new Set(Ce),be=me.filter(function(We){return fe.has(We)});if(be&&be.length){for(var te={},de=be.length,ke=0;ke<de;ke++){var Ze=re[be[ke]];ae[oe].nodes.push(Ze),te[Ze.id]=!0}X.edges.forEach(function(We){te[We.source]&&te[We.target]&&ae[oe].edges.push(We)})}}}}),ae},y=function(K,ee,X,ae){var re,oe,ve={};K.nodes.forEach(function(_e){ve[_e.id]=_e});var we=0;return null===(re=ee?.edges)||void 0===re||!re.length||(null===(oe=ee?.nodes)||void 0===oe?void 0:oe.length)<2?0:(K.edges.forEach(function(_e){var me=ve[_e.source][X],Ce=ve[_e.target][X],fe=ee?.nodes[0][X],be=ee?.nodes[1][X],te=ee?.edges[0][ae];_e[ae]===te&&(me===fe&&Ce===be||me===be&&Ce===fe)&&we++}),we)},M=function(K,ee){var X={},ae={};return K.forEach(function(re,oe){X[re.id]={idx:oe,node:re,degree:0,inDegree:0,outDegree:0};var ve=re[ee];ae[ve]||(ae[ve]=[]),ae[ve].push(re)}),{nodeMap:X,nodeLabelMap:ae}},S=function(K,ee,X){var ae={},re={};return K.forEach(function(oe,ve){ae["".concat(F.uniqueId)]={idx:ve,edge:oe};var we=oe[ee];re[we]||(re[we]=[]),re[we].push(oe);var _e=X[oe.source];_e&&(_e.degree++,_e.outDegree++);var me=X[oe.target];me&&(me.degree++,me.inDegree++)}),{edgeMap:ae,edgeLabelMap:re}},P=function(K,ee,X){var ae=ee.length,re={};return ee.forEach(function(oe,ve){for(var _e=K[ve].id,me=X?0:ve+1;me<ae;me++)if(ve!==me){var Ce=K[me].id,fe=oe[me];re["".concat(_e,"-").concat(Ce)]=fe,X||(re["".concat(Ce,"-").concat(_e)]=fe)}}),re},U=function(K,ee,X,ae,re,oe,ve,we,_e,me,Ce){var fe,be="".concat(ee.id,"-").concat(X.id);if(me&&me[be])return me[be];var te=Ce?Ce[be]:void 0;if(!te){var de=((fe={})[be]={start:ae[ee.id].idx,end:ae[X.id].idx,distance:re},fe);te=(Ce=w(de,oe,K,Ce))[be]}return y(te,ve,we,_e)},z=function(K,ee,X,ae){var re,oe,ve,we=null===(re=K[ee])||void 0===re?void 0:re.degree,_e=null===(oe=K[ee])||void 0===oe?void 0:oe.inDegree,me=null===(ve=K[ee])||void 0===ve?void 0:ve.outDegree;return void 0===K[ee]&&(we=1/0,_e=1/0,me=1/0,ae[ee].forEach(function(Ce){var fe=X[Ce.id].degree;we>fe&&(we=fe);var be=X[Ce.id].inDegree;_e>be&&(_e=be);var te=X[Ce.id].outDegree;me>te&&(me=te)}),K[ee]={degree:we,inDegree:_e,outDegree:me}),{minPatternNodeLabelDegree:we,minPatternNodeLabelInDegree:_e,minPatternNodeLabelOutDegree:me}};V.default=function(K,ee,X,ae,re,oe,ve){var we;if(void 0===X&&(X=!1),void 0===oe&&(oe="cluster"),void 0===ve&&(ve="cluster"),K&&K.nodes){var _e=K.nodes.length;if(_e){var me=(0,Q.default)(K,X),Ce=(0,Q.default)(ee,X),fe=P(K.nodes,me,X),be=P(ee.nodes,Ce,X),te=M(K.nodes,oe),de=te.nodeMap,ke=te.nodeLabelMap,Ze=M(ee.nodes,oe),We=Ze.nodeMap,bt=Ze.nodeLabelMap;S(K.edges,ve,de);var Ft=S(ee.edges,ve,We).edgeLabelMap,Pt=[];Ce?.forEach(function(mr){Pt=Pt.concat(mr)}),re||(re=Math.max.apply(Math,(0,B.__spreadArray)((0,B.__spreadArray)([],Pt,!1),[2],!1))),ae||(ae=re);var Xe=x(K,me,oe,ae),yt=x(ee,Ce,oe,ae),pt=function(K,ee,X,ae,re){var oe=Math.ceil(X/ee),ve={},we=0;return ae.forEach(function(_e,me){for(var Ce=0,fe=0,be=_e.nodeIdxs,te=_e.neighborNum-1;Ce<oe;){for(var de=be[1+Math.floor(Math.random()*te)],ke=0;(ve["".concat(me,"-").concat(de)]||ve["".concat(de,"-").concat(me)])&&(de=Math.floor(Math.random()*ee),!(++ke>2*ee)););if(ke<2*ee&&(ve["".concat(me,"-").concat(de)]={start:me,end:de,distance:re[me][de]},Ce++,++we>=X))return ve;if(++fe>2*ee)break}Ce<oe&&(oe=(oe+(oe-Ce))/(ee-me-1))}),ve}(0,_e,Math.min(100,_e*(_e-1)/2),Xe,me),xt=w(pt,Xe,K),tt=(0,j.default)({graphs:xt,nodeLabelProp:oe,edgeLabelProp:ve,minSupport:1,minNodeNum:1,maxNodeNum:4,directed:X}).slice(0,10),Mt=tt.length,Wt=[];tt.forEach(function(mr,Wr){Wt[Wr]={},Object.keys(xt).forEach(function(Vr){var Y=y(xt[Vr],mr,oe,ve);Wt[Wr][Vr]=Y})});var un=function(K,ee,X){for(var ae=1/0,re=0,oe=function(_e){var me=K[_e],Ce=Object.keys(me).sort(function(We,bt){return me[We]-me[bt]}),be=[];Ce.forEach(function(We,bt){be[bt%10]||(be[bt%10]={graphs:[],totalCount:0,aveCount:0}),be[bt%10].graphs.push(We),be[bt%10].totalCount+=me[We]});var te=0,de=[];be.forEach(function(We){var bt=We.totalCount/We.graphs.length;We.aveCount=bt,de.push(bt);var Ft=0,Pt=We.length;We.graphs.forEach(function(Xe,yt){var Ct=me[Xe];We.graphs.forEach(function(pt,xt){yt!==xt&&(Ft+=Math.abs(Ct-me[pt]))})}),te+=Ft/=Pt*(Pt-1)/2}),te/=be.length;var ke=0;de.forEach(function(We,bt){de.forEach(function(Ft,Pt){bt!==Pt&&(ke+=Math.abs(We-Ft))}),ke/=de.length*(de.length-1)/2});var Ze=ke-te;ae<Ze&&(ae=Ze,re=_e)},ve=0;ve<ee;ve++)oe(ve);return{structure:X[re],structureCountMap:K[re]}}(Wt,Mt,tt),Le=un.structure,zt=un.structureCountMap,Xt=ee.nodes[0],Tn=[],gn=null===(we=ee.nodes[0])||void 0===we?void 0:we[oe],kn=-1/0;ee.nodes.forEach(function(mr){var Wr=mr[oe],Vr=ke[Wr];Vr?.length>kn&&(kn=Vr.length,Tn=Vr,gn=Wr,Xt=mr)});var ir={},cr={},Bn={},xr={},jn={},Rn={};Object.keys(bt).forEach(function(mr,Wr){jn[mr]=[],X&&(Rn[mr]=[]);var Vr=-1/0,Y={};bt[mr].forEach(function(je){var Ge=be["".concat(Xt.id,"-").concat(je.id)];if(Ge&&jn[mr].push(Ge),Vr<Ge&&(Vr=Ge),Y["".concat(Xt.id,"-").concat(je.id)]={start:0,end:We[je.id].idx,distance:Ge},X){var rt=be["".concat(je.id,"-").concat(Xt.id)];rt&&Rn[mr].push(rt)}}),jn[mr]=jn[mr].sort(function(je,Ge){return je-Ge}),X&&(Rn[mr]=Rn[mr].sort(function(je,Ge){return je-Ge})),cr=w(Y,yt,ee,cr);var W=[];if(Object.keys(Y).forEach(function(je){Bn[je]||(Bn[je]=y(cr[je],Le,oe,ve)),W.push(Bn[je])}),W=W.sort(function(je,Ge){return Ge-je}),xr["".concat(Xt.id,"-").concat(mr)]=W,mr!==gn)for(var $=function(Ge){var rt=Tn[Ge],it=Xe[de[rt.id].idx],$t=it.nodeLabelCountMap[mr],R=bt[mr].length;if(!$t||$t.count<R)return Tn.splice(Ge,1),"continue";for(var He=!1,ze=0;ze<R;ze++)if($t.dists[ze]>jn[mr][ze]){He=!0;break}if(He)return Tn.splice(Ge,1),"continue";var Je={};it.neighbors.forEach(function(Ke){var qt=fe["".concat(rt.id,"-").concat(Ke.id)];Je["".concat(rt.id,"-").concat(Ke.id)]={start:de[rt.id].idx,end:de[Ke.id].idx,distance:qt}}),xt=w(Je,Xe,K,xt);var gt=[];Object.keys(Je).forEach(function(Ke){zt[Ke]||(zt[Ke]=y(xt[Ke],Le,oe,ve)),gt.push(zt[Ke])}),gt=gt.sort(function(Ke,qt){return qt-Ke});var an=!1;for(ze=0;ze<R;ze++)if(gt[ze]<W[ze]){an=!0;break}return an?(Tn.splice(Ge,1),"continue"):void 0},ce=(Tn?.length||0)-1;ce>=0;ce--)$(ce)});var er=[];Tn?.forEach(function(mr){for(var Wr=de[mr.id].idx,Ae=E(K.nodes,me[Wr],Wr,oe,re).neighbors,W=!1,T=Ae.length-1;T>=0;T--){if(Ae.length+1<ee.nodes.length)return void(W=!0);var $=Ae[T],ce=$[oe];if(bt[ce]&&bt[ce].length)if(jn[ce]&&jn[ce].length){var je="".concat(mr.id,"-").concat($.id),Ge=fe[je],rt=jn[ce].length-1;if(Ge>jn[ce][rt])Ae.splice(T,1);else{if(X){var $t="".concat($.id,"-").concat(mr.id);if(fe[$t]>Rn[ce][rt=Rn[ce].length-1]){Ae.splice(T,1);continue}}var ze=zt[je]?zt[je]:U(K,mr,$,de,Ge,Xe,Le,oe,ve,zt,xt),Je="".concat(Xt.id,"-").concat(ce);if(ze<xr[Je][xr[Je].length-1])Ae.splice(T,1);else{var an=z(ir,ce,We,bt);de[$.id].degree<an.minPatternNodeLabelDegree&&Ae.splice(T,1)}}}else Ae.splice(T,1);else Ae.splice(T,1)}W||er.push({nodes:[mr].concat(Ae)})});var Mr=(0,k.default)(ee,Xt.id,!1).length,yr={};X?(Object.keys(Mr).forEach(function(mr){var Wr=We[mr].node[oe];yr[Wr]?yr[Wr].push(Mr[mr]):yr[Wr]=[Mr[mr]]}),Object.keys(yr).forEach(function(mr){yr[mr].sort(function(Wr,Vr){return Wr-Vr})})):yr=jn;for(var Oi=function(Wr){var Vr=er[Wr],Ae=Vr.nodes[0],Y={},W={};Vr.nodes.forEach(function(br,Et){W[br.id]={idx:Et,node:br,degree:0,inDegree:0,outDegree:0};var Oe=br[oe];Y[Oe]?Y[Oe]++:Y[Oe]=1});var T=[],$={};K.edges.forEach(function(br){W[br.source]&&W[br.target]&&(T.push(br),$[br[ve]]?$[br[ve]]++:$[br[ve]]=1,W[br.source].degree++,W[br.target].degree++,W[br.source].outDegree++,W[br.target].inDegree++)});for(var ce=Object.keys(Ft).length,je=!1,Ge=0;Ge<ce;Ge++){var rt=Object.keys(Ft)[Ge];if(!$[rt]||$[rt]<Ft[rt].length){je=!0;break}}if(je)return er.splice(Wr,1),"continue";var it=T.length;if(it<ee.edges.length)return er.splice(Wr,1),"break";var $t=!1,R=function(Et){var Oe=T[Et],st=Oe[ve],Ot=Ft[st];if(!Ot||!Ot.length)return $[st]--,Ot&&$[st]<Ot.length?($t=!0,"break"):(T.splice(Et,1),W[Oe.source].degree--,W[Oe.target].degree--,W[Oe.source].outDegree--,W[Oe.target].inDegree--,"continue");var At=W[Oe.source].node[oe],It=W[Oe.target].node[oe],cn=!1;return Ot.forEach(function(fn){var Fn=We[fn.source].node,Or=We[fn.target].node;Fn[oe]===At&&Or[oe]===It&&(cn=!0),!X&&Fn[oe]===It&&Or[oe]===At&&(cn=!0)}),cn?void 0:($[st]--,Ot&&$[st]<Ot.length?($t=!0,"break"):(T.splice(Et,1),W[Oe.source].degree--,W[Oe.target].degree--,W[Oe.source].outDegree--,W[Oe.target].inDegree--,"continue"))};for(Ge=it-1;Ge>=0&&"break"!==R(Ge);Ge--);if($t)return er.splice(Wr,1),"continue";Vr.edges=T;var ze=(0,k.default)(Vr,Vr.nodes[0].id,!1).length;if(Object.keys(ze).reverse().forEach(function(br){if(br!==Vr.nodes[0].id&&!$t){if(ze[br]===1/0){if(Y[Et=W[br].node[oe]]--,Y[Et]<bt[Et].length)return void($t=!0);var Oe=Vr.nodes.indexOf(W[br].node);return Vr.nodes.splice(Oe,1),void(W[br]=void 0)}var st=de[br].node[oe];if(!yr[st]||!yr[st].length||ze[br]>yr[st][yr[st].length-1]){var Et;if(Y[Et=W[br].node[oe]]--,Y[Et]<bt[Et].length)return void($t=!0);Oe=Vr.nodes.indexOf(W[br].node),Vr.nodes.splice(Oe,1),W[br]=void 0}}}),$t)return er.splice(Wr,1),"continue";for(var Je=!0,gt=0;Je&&!$t;){if(Je=!1,X?W[Ae.id].degree<We[Xt.id].degree||W[Ae.id].inDegree<We[Xt.id].inDegree||W[Ae.id].outDegree<We[Xt.id].outDegree:W[Ae.id].degree<We[Xt.id].degree){$t=!0;break}if(Y[Ae[oe]]<bt[Ae[oe]].length){$t=!0;break}for(var qt=Vr.nodes.length-1;qt>=0;qt--){var Sn=Vr.nodes[qt],zn=W[Sn.id].degree,Wn=W[Sn.id].inDegree,kr=W[Sn.id].outDegree,Er=z(ir,Sn[oe],We,bt),Xr=Er.minPatternNodeLabelDegree;if(X?zn<Xr||Wn<Er.minPatternNodeLabelInDegree||kr<Er.minPatternNodeLabelOutDegree:zn<Xr){if(Y[Sn[oe]]--,Y[Sn[oe]]<bt[Sn[oe]].length){$t=!0;break}Vr.nodes.splice(qt,1),W[Sn.id]=void 0,Je=!0}}if($t||!Je&&0!==gt)break;for(var hr=(it=T.length)-1;hr>=0;hr--){var Un=T[hr];if(!W[Un.source]||!W[Un.target]){T.splice(hr,1);var Gr=Un[ve];if($[Gr]--,W[Un.source]&&(W[Un.source].degree--,W[Un.source].outDegree--),W[Un.target]&&(W[Un.target].degree--,W[Un.target].inDegree--),Ft[Gr]&&$[Gr]<Ft[Gr].length){$t=!0;break}Je=!0}}gt++}return $t||$t||Vr.nodes.length<ee.nodes.length||T.length<ee.edges.length?(er.splice(Wr,1),"continue"):void 0},Ir=er.length-1;Ir>=0&&"break"!==Oi(Ir);Ir--);var wi=er.length,xo=function(Wr){var Ae={};er[Wr].edges.forEach(function(T){var $="".concat(T.source,"-").concat(T.target,"-").concat(T.label);Ae[$]?Ae[$]++:Ae[$]=1});for(var Y=function($){var je={};er[$].edges.forEach(function(rt){var it="".concat(rt.source,"-").concat(rt.target,"-").concat(rt.label);je[it]?je[it]++:je[it]=1});var Ge=!0;Object.keys(je).length!==Object.keys(Ae).length?Ge=!1:Object.keys(Ae).forEach(function(rt){je[rt]!==Ae[rt]&&(Ge=!1)}),Ge&&er.splice($,1)},W=wi-1;W>Wr;W--)Y(W);wi=er.length};for(Ir=0;Ir<=wi-1;Ir++)xo(Ir);return er}}}},3754:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.default=void 0;var B=function j(I){return I&&I.__esModule?I:{default:I}}(G(2757)),Q=G(5271);V.default=function(x,E,b,w){void 0===E&&(E=!1),void 0===b&&(b="weight"),void 0===w&&(w=1e3);var y=x.nodes,A=void 0===y?[]:y,M=x.edges,S=void 0===M?[]:M,P={},U={};A.forEach(function(oe,ve){var we=(0,Q.uniqueId)();oe.clusterId=we,P[we]={id:we,nodes:[oe]},U[oe.id]={node:oe,idx:ve}});var z=(0,B.default)(x,E),ie=[],ne={};z.forEach(function(oe,ve){var we=0,_e=A[ve].id;ne[_e]={},oe.forEach(function(me,Ce){me&&(we+=me,ne[_e][A[Ce].id]=me)}),ie.push(we)});for(var q=0,K=function(){var ve=!1;if(A.forEach(function(we){var _e={};Object.keys(ne[we.id]).forEach(function(Ze){var We=ne[we.id][Ze],Ft=U[Ze].node.clusterId;_e[Ft]||(_e[Ft]=0),_e[Ft]+=We});var me=-1/0,Ce=[];if(Object.keys(_e).forEach(function(Ze){me<_e[Ze]?(me=_e[Ze],Ce=[Ze]):me===_e[Ze]&&Ce.push(Ze)}),1!==Ce.length||Ce[0]!==we.clusterId){var fe=Ce.indexOf(we.clusterId);if(fe>=0&&Ce.splice(fe,1),Ce&&Ce.length){ve=!0;var be=P[we.clusterId],te=be.nodes.indexOf(we);be.nodes.splice(te,1);var de=Math.floor(Math.random()*Ce.length),ke=P[Ce[de]];ke.nodes.push(we),we.clusterId=ke.id}}}),!ve)return"break";q++};q<w&&"break"!==K(););Object.keys(P).forEach(function(oe){var ve=P[oe];(!ve.nodes||!ve.nodes.length)&&delete P[oe]});var X=[],ae={};S.forEach(function(oe){var _e=oe[b]||1,me=U[oe.source].node.clusterId,Ce=U[oe.target].node.clusterId,fe="".concat(me,"---").concat(Ce);if(ae[fe])ae[fe].weight+=_e,ae[fe].count++;else{var be={source:me,target:Ce,weight:_e,count:1};ae[fe]=be,X.push(be)}});var re=[];return Object.keys(P).forEach(function(oe){re.push(P[oe])}),{clusters:re,clusterEdges:X}}},7306:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.default=void 0;var B=G(1035),Q=I(G(2757)),j=I(G(2979)),k=G(7506),F=G(4575);function I(y){return y&&y.__esModule?y:{default:y}}var x=function(A,M,S,P){for(var U=M.length,z=2*P,ie=0,ne=0;ne<U;ne++)for(var q=A[ne].clusterId,K=0;K<U;K++)q===A[K].clusterId&&(ie+=(M[ne][K]||0)-(S[ne]||0)*(S[K]||0)/z);return ie*(1/z)},E=function(A,M){void 0===A&&(A=[]);for(var S=A.length,P=new j.default([]),U=0;U<S;U++)P=P.add(new j.default(M[U]));var z=P.avg(S);z.normalize();var ie=0;for(U=0;U<S;U++)ie+=(ne=new j.default(M[U])).squareEuclideanDistance(z);var K=[];for(A.forEach(function(){K.push([])}),U=0;U<S;U++){var ne=new j.default(M[U]);A[U].clusterInertial=0;for(var ee=0;ee<S;ee++)if(U!==ee){var X=new j.default(M[ee]);K[U][ee]=ne.squareEuclideanDistance(X),A[U].clusterInertial+=K[U][ee]}else K[U][ee]=0}var ae=0,re=2*S*ie;for(U=0;U<S;U++){var oe=A[U].clusterId;for(ee=0;ee<S;ee++)U!==ee&&oe===A[ee].clusterId&&(ae+=A[U].clusterInertial*A[ee].clusterInertial/Math.pow(re,2)-K[U][ee]/re)}return Number(ae.toFixed(4))};V.default=function(A,M,S,P,U,z,ie,ne,q){void 0===M&&(M=!1),void 0===S&&(S="weight"),void 0===P&&(P=1e-4),void 0===U&&(U=!1),void 0===z&&(z=void 0),void 0===ie&&(ie=[]),void 0===ne&&(ne=["id"]),void 0===q&&(q=1);var K=A.nodes,ee=void 0===K?[]:K,X=A.edges,ae=void 0===X?[]:X,re=[];if(U){ee.forEach(function(xt,Fe){xt.properties=xt.properties||{},xt.originIndex=Fe});var oe=[];ee.every(function(xt){return xt.hasOwnProperty("nodeType")})&&(oe=Array.from(new Set(ee.map(function(xt){return xt.nodeType}))),ee.forEach(function(xt){xt.properties.nodeType=oe.findIndex(function(Fe){return Fe===xt.nodeType})}));var ve=(0,k.getAllProperties)(ee,z);re=(0,F.oneHot)(ve,ie,ne)}var we=1,_e={},me={};ee.forEach(function(xt,Fe){var ut=String(we++);xt.clusterId=ut,_e[ut]={id:ut,nodes:[xt]},me[xt.id]={node:xt,idx:Fe}});var Ce=(0,Q.default)(A,M),fe=[],be={},te=0;Ce.forEach(function(xt,Fe){var ut=0,Ut=ee[Fe].id;be[Ut]={},xt.forEach(function($e,Te){$e&&(ut+=$e,be[Ut][ee[Te].id]=$e,te+=$e)}),fe.push(ut)}),te/=2;for(var de=1/0,ke=1/0,Ze=0,We=[],bt={};;){de=U&&ee.every(function(xt){return xt.hasOwnProperty("properties")})?x(ee,Ce,fe,te)+E(ee,re)*q:x(ee,Ce,fe,te),0===Ze&&(ke=de,We=ee,bt=_e);var Ft=de>0&&de>ke&&de-ke<P;if(de>ke&&(We=ee.map(function(xt){return{node:xt,clusterId:xt.clusterId}}),bt=(0,B.clone)(_e),ke=de),Ft||Ze>100)break;Ze++,Object.keys(_e).forEach(function(xt){var Fe=0;ae.forEach(function(ut){var Te=me[ut.source].node.clusterId,tt=me[ut.target].node.clusterId;(Te===xt&&tt!==xt||tt===xt&&Te!==xt)&&(Fe+=ut[S]||1)}),_e[xt].sumTot=Fe}),ee.forEach(function(xt,Fe){var $e,ut=_e[xt.clusterId],Ut=0,Te=fe[Fe]/(2*te),tt=0,Mt=ut.nodes;Mt.forEach(function(cr){tt+=Ce[Fe][me[cr.id].idx]||0});var Wt=tt-ut.sumTot*Te,un=Mt.filter(function(cr){return cr.id!==xt.id}),Le=[];un.forEach(function(cr,Bn){Le[Bn]=re[cr.originIndex]});var zt=E(un,re)*q;if(Object.keys(be[xt.id]).forEach(function(cr){var xr=me[cr].node.clusterId;if(xr!==xt.clusterId){var jn=_e[xr],Rn=jn.nodes;if(Rn&&Rn.length){var er=0;Rn.forEach(function(De){er+=Ce[Fe][me[De.id].idx]||0});var Mr=er-jn.sumTot*Te,yr=Rn.concat([xt]),gr=[];yr.forEach(function(De,wi){gr[wi]=re[De.originIndex]});var Oi=E(yr,re)*q,Ir=Mr-Wt;U&&(Ir=Mr+Oi-(Wt+zt)),Ir>Ut&&(Ut=Ir,$e=jn)}}}),Ut>0){$e.nodes.push(xt);var Tn=xt.clusterId;xt.clusterId=$e.id;var gn=ut.nodes.indexOf(xt);ut.nodes.splice(gn,1);var kn=0,ir=0;ae.forEach(function(cr){var jn=me[cr.source].node.clusterId,Rn=me[cr.target].node.clusterId;(jn===$e.id&&Rn!==$e.id||Rn===$e.id&&jn!==$e.id)&&(kn+=cr[S]||1),(jn===Tn&&Rn!==Tn||Rn===Tn&&jn!==Tn)&&(ir+=cr[S]||1)}),$e.sumTot=kn,ut.sumTot=ir}})}var Pt={},Xe=0;Object.keys(bt).forEach(function(xt){var Fe=bt[xt];if(Fe.nodes&&Fe.nodes.length){var ut=String(Xe+1);ut!==xt&&(Fe.id=ut,Fe.nodes=Fe.nodes.map(function(Ut){return{id:Ut.id,clusterId:ut}}),bt[ut]=Fe,Pt[xt]=ut,delete bt[xt],Xe++)}else delete bt[xt]}),We.forEach(function(xt){var Fe=xt.node;!Fe||(Fe.clusterId=xt.clusterId,Fe.clusterId&&Pt[Fe.clusterId]&&(Fe.clusterId=Pt[Fe.clusterId]))});var yt=[],Ct={};ae.forEach(function(xt){var Ut=xt[S]||1,$e=me[xt.source].node.clusterId,Te=me[xt.target].node.clusterId;if($e&&Te){var tt="".concat($e,"---").concat(Te);if(Ct[tt])Ct[tt].weight+=Ut,Ct[tt].count++;else{var Mt={source:$e,target:Te,weight:Ut,count:1};Ct[tt]=Mt,yt.push(Mt)}}});var pt=[];return Object.keys(bt).forEach(function(xt){pt.push(bt[xt])}),{clusters:pt,clusterEdges:yt}}},5687:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.default=void 0;var B=k(G(3688)),Q=k(G(9679)),j=G(5271);function k(b){return b&&b.__esModule?b:{default:b}}var F=function(w,y){var A=[],M=w.nodes,S=void 0===M?[]:M,P=w.edges,U=void 0===P?[]:P;if(0===S.length)return A;var z=S[0],ie=new Set;ie.add(z);var q=new Q.default(function(re,oe){return y?re.weight-oe.weight:0});for((0,j.getEdgesByNodeId)(z.id,U).forEach(function(ae){q.insert(ae)});!q.isEmpty();){var K=q.delMin(),ee=K.source,X=K.target;ie.has(ee)&&ie.has(X)||(A.push(K),ie.has(ee)||(ie.add(ee),(0,j.getEdgesByNodeId)(ee,U).forEach(function(ae){q.insert(ae)})),ie.has(X)||(ie.add(X),(0,j.getEdgesByNodeId)(X,U).forEach(function(ae){q.insert(ae)})))}return A},I=function(w,y){var A=[],M=w.nodes,S=void 0===M?[]:M,P=w.edges;if(0===S.length)return A;var z=(void 0===P?[]:P).map(function(ee){return ee});y&&z.sort(function(ee,X){return ee.weight-X.weight});for(var ie=new B.default(S.map(function(ee){return ee.id}));z.length>0;){var ne=z.shift(),q=ne.source,K=ne.target;ie.connected(q,K)||(A.push(ne),ie.union(q,K))}return A};V.default=function(w,y,A){return A?{prim:F,kruskal:I}[A](w,y):I(w,y)}},2684:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.default=void 0;var B=function j(I){return I&&I.__esModule?I:{default:I}}(G(6149)),Q=G(5271);V.default=function(x,E,b){"number"!=typeof E&&(E=1e-6),"number"!=typeof b&&(b=.85);for(var ie,w=1,y=0,A=1e3,M=x.nodes,S=void 0===M?[]:M,P=x.edges,U=void 0===P?[]:P,z=S.length,ne={},q={},K=0;K<z;++K)ne[X=(ee=S[K]).id]=1/z,q[X]=1/z;for(var ae=(0,B.default)(x);A>0&&w>E;){for(y=0,K=0;K<z;++K){var X=(ee=S[K]).id;if(ie=0,0===ae[ee.id].inDegree)ne[X]=0;else{for(var re=(0,Q.getNeighbors)(X,U,"source"),oe=0;oe<re.length;++oe){var ve=re[oe],we=ae[ve].outDegree;we>0&&(ie+=q[ve]/we)}ne[X]=b*ie,y+=ne[X]}}for(y=(1-y)/z,w=0,K=0;K<z;++K){var ee;ie=ne[X=(ee=S[K]).id]+y,w+=Math.abs(ie-q[X]),q[X]=ie}A-=1}return q}},9679:(Qt,V)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.default=void 0;var G=function(k,F){return k-F},B=function(){function j(k){void 0===k&&(k=G),this.compareFn=k,this.list=[]}return j.prototype.getLeft=function(k){return 2*k+1},j.prototype.getRight=function(k){return 2*k+2},j.prototype.getParent=function(k){return 0===k?null:Math.floor((k-1)/2)},j.prototype.isEmpty=function(){return this.list.length<=0},j.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},j.prototype.delMin=function(){var k=this.top(),F=this.list.pop();return this.list.length>0&&(this.list[0]=F,this.moveDown(0)),k},j.prototype.insert=function(k){return null!==k&&(this.list.push(k),this.moveUp(this.list.length-1),!0)},j.prototype.moveUp=function(k){for(var F=this.getParent(k);k&&k>0&&this.compareFn(this.list[F],this.list[k])>0;){var I=this.list[F];this.list[F]=this.list[k],this.list[k]=I,F=this.getParent(k=F)}},j.prototype.moveDown=function(k){var F,I=k,x=this.getLeft(k),E=this.getRight(k),b=this.list.length;null!==x&&x<b&&this.compareFn(this.list[I],this.list[x])>0?I=x:null!==E&&E<b&&this.compareFn(this.list[I],this.list[E])>0&&(I=E),k!==I&&(this.list[k]=(F=[this.list[I],this.list[k]])[0],this.list[I]=F[1],this.moveDown(I))},j}();V.default=B},7217:(Qt,V)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.default=V.LinkedListNode=void 0;var G=function(F,I){return F===I},B=function(){function k(F,I){void 0===I&&(I=null),this.value=F,this.next=I}return k.prototype.toString=function(F){return F?F(this.value):"".concat(this.value)},k}();V.LinkedListNode=B;var Q=function(){function k(F){void 0===F&&(F=G),this.head=null,this.tail=null,this.compare=F}return k.prototype.prepend=function(F){var I=new B(F,this.head);return this.head=I,this.tail||(this.tail=I),this},k.prototype.append=function(F){var I=new B(F);return this.head?(this.tail.next=I,this.tail=I,this):(this.head=I,this.tail=I,this)},k.prototype.delete=function(F){if(!this.head)return null;for(var I=null;this.head&&this.compare(this.head.value,F);)I=this.head,this.head=this.head.next;var x=this.head;if(null!==x)for(;x.next;)this.compare(x.next.value,F)?(I=x.next,x.next=x.next.next):x=x.next;return this.compare(this.tail.value,F)&&(this.tail=x),I},k.prototype.find=function(F){var I=F.value,x=void 0===I?void 0:I,E=F.callback,b=void 0===E?void 0:E;if(!this.head)return null;for(var w=this.head;w;){if(b&&b(w.value)||void 0!==x&&this.compare(w.value,x))return w;w=w.next}return null},k.prototype.deleteTail=function(){var F=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,F;for(var I=this.head;I.next;)I.next.next?I=I.next:I.next=null;return this.tail=I,F},k.prototype.deleteHead=function(){if(!this.head)return null;var F=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),F},k.prototype.fromArray=function(F){var I=this;return F.forEach(function(x){return I.append(x)}),this},k.prototype.toArray=function(){for(var F=[],I=this.head;I;)F.push(I),I=I.next;return F},k.prototype.reverse=function(){for(var F=this.head,I=null,x=null;F;)x=F.next,F.next=I,I=F,F=x;this.tail=this.head,this.head=I},k.prototype.toString=function(F){return void 0===F&&(F=void 0),this.toArray().map(function(I){return I.toString(F)}).toString()},k}();V.default=Q},6904:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.default=void 0;var B=function Q(F){return F&&F.__esModule?F:{default:F}}(G(7217)),j=function(){function F(){this.linkedList=new B.default}return F.prototype.isEmpty=function(){return!this.linkedList.head},F.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},F.prototype.enqueue=function(I){this.linkedList.append(I)},F.prototype.dequeue=function(){var I=this.linkedList.deleteHead();return I?I.value:null},F.prototype.toString=function(I){return this.linkedList.toString(I)},F}();V.default=j},3688:(Qt,V)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.default=void 0;var G=function(){function Q(j){this.count=j.length,this.parent={};for(var k=0,F=j;k<F.length;k++){var I=F[k];this.parent[I]=I}}return Q.prototype.find=function(j){for(;this.parent[j]!==j;)j=this.parent[j];return j},Q.prototype.union=function(j,k){var F=this.find(j),I=this.find(k);F!==I&&(F<I?(this.parent[k]!==k&&this.union(this.parent[k],j),this.parent[k]=this.parent[j]):(this.parent[j]!==j&&this.union(this.parent[j],k),this.parent[j]=this.parent[k]))},Q.prototype.connected=function(j,k){return this.find(j)===this.find(k)},Q}();V.default=G},74:(Qt,V)=>{"use strict";var G;Object.defineProperty(V,"__esModule",{value:!0}),V.DistanceType=void 0,V.DistanceType=G,(G||(V.DistanceType=G={})).EuclideanDistance="euclideanDistance"},5271:(Qt,V)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.uniqueId=V.getOutEdgesNodeId=V.getNeighbors=V.getEdgesByNodeId=void 0,V.getNeighbors=function(F,I,x){void 0===I&&(I=[]);var E=I.filter(function(A){return A.source===F||A.target===F});return"target"===x?E.filter(function(M){return M.source===F}).map(function(A){return A.target}):"source"===x?E.filter(function(M){return M.target===F}).map(function(A){return A.source}):E.map(function(M){return M.source===F?M.target:M.source})},V.getOutEdgesNodeId=function(F,I){return I.filter(function(x){return x.source===F})},V.getEdgesByNodeId=function(F,I){return I.filter(function(x){return x.source===F||x.target===F})},V.uniqueId=function(F){void 0===F&&(F=0);var I="".concat(Math.random()).split(".")[1].substr(0,5),x="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(F,"-").concat(I).concat(x)}},4575:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.oneHot=V.getDistance=V.getAllKeyValueMap=V.default=void 0;var B=G(1035),Q=G(74),j=function k(b){return b&&b.__esModule?b:{default:b}}(G(2979)),F=function(w,y,A){var M=[];y?.length?M=y:(w.forEach(function(P){M=M.concat(Object.keys(P))}),M=(0,B.uniq)(M));var S={};return M.forEach(function(P){var U=[];w.forEach(function(z){void 0!==z[P]&&""!==z[P]&&U.push(z[P])}),U.length&&!A?.includes(P)&&(S[P]=(0,B.uniq)(U))}),S};V.getAllKeyValueMap=F;var I=function(w,y,A){var M=F(w,y,A),S=[];if(!Object.keys(M).length)return S;var U=Object.values(M).every(function(z){return z.every(function(ie){return"number"==typeof ie})});return w.forEach(function(z,ie){var ne=[];Object.keys(M).forEach(function(q){var K=z[q],ee=M[q],X=ee.findIndex(function(oe){return K===oe}),ae=[];if(U)ae.push(K);else for(var re=0;re<ee.length;re++)ae.push(re===X?1:0);ne=ne.concat(ae)}),S[ie]=ne}),S};V.oneHot=I;var x=function(w,y,A,M){void 0===A&&(A=Q.DistanceType.EuclideanDistance);var S=0;return A===Q.DistanceType.EuclideanDistance&&(S=new j.default(w).euclideanDistance(new j.default(y))),S};V.getDistance=x,V.default={getAllKeyValueMap:F,oneHot:I,getDistance:x}},7506:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.getPropertyWeight=V.getAllSortProperties=V.getAllProperties=V.default=void 0;var B=G(384),Q=function(E,b){void 0===E&&(E=[]),void 0===b&&(b=100);var w={};E.forEach(function(A){!A.properties||Object.keys(A.properties).forEach(function(M){"id"===M||!"".concat(A.properties[M]).match(B.secondReg)&&!"".concat(A.properties[M]).match(B.dateReg)&&isNaN(Number(A.properties[M]))?w.hasOwnProperty(M)&&delete w[M]:w.hasOwnProperty(M)?w[M]+=1:w[M]=1})});var y=Object.keys(w).sort(function(A,M){return w[M]-w[A]});return y.length<b?y:y.slice(0,b)};V.getAllSortProperties=Q;var j=function(E,b){return b.map(function(w){return E.hasOwnProperty(w)?E[w]:0})},k=function(E){for(var b=Q(E),w=[],y=0;y<E.length;y++)w[y]=j(E[y].properties,b);return w};V.getPropertyWeight=k;var F=function(E,b){void 0===b&&(b=void 0);var w=[];return E.forEach(function(y){void 0===b&&w.push(y),void 0!==y[b]&&w.push(y[b])}),w};V.getAllProperties=F,V.default={getAllSortProperties:Q,getPropertyWeight:k,getAllProperties:F}},2979:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.default=void 0;var B=G(1035),Q=function(){function k(F){this.arr=F}return k.prototype.getArr=function(){return this.arr||[]},k.prototype.add=function(F){var I,x=F.arr;if(null===(I=this.arr)||void 0===I||!I.length)return new k(x);if(!x?.length)return new k(this.arr);if(this.arr.length===x.length){var E=[];for(var b in this.arr)E[b]=this.arr[b]+x[b];return new k(E)}},k.prototype.subtract=function(F){var I,x=F.arr;if(null===(I=this.arr)||void 0===I||!I.length)return new k(x);if(!x?.length)return new k(this.arr);if(this.arr.length===x.length){var E=[];for(var b in this.arr)E[b]=this.arr[b]-x[b];return new k(E)}},k.prototype.avg=function(F){var I=[];if(0!==F)for(var x in this.arr)I[x]=this.arr[x]/F;return new k(I)},k.prototype.negate=function(){var F=[];for(var I in this.arr)F[I]=-this.arr[I];return new k(F)},k.prototype.squareEuclideanDistance=function(F){var I,x=F.arr;if(null===(I=this.arr)||void 0===I||!I.length||!x?.length)return 0;if(this.arr.length===x.length){var E=0;for(var b in this.arr)E+=Math.pow(this.arr[b]-F.arr[b],2);return E}},k.prototype.euclideanDistance=function(F){var I,x=F.arr;if(null===(I=this.arr)||void 0===I||!I.length||!x?.length)return 0;if(this.arr.length===x.length){var E=0;for(var b in this.arr)E+=Math.pow(this.arr[b]-F.arr[b],2);return Math.sqrt(E)}console.error("The two vectors are unequal in length.")},k.prototype.normalize=function(){var F=[],I=(0,B.clone)(this.arr);I.sort(function(w,y){return w-y});var x=I[I.length-1],E=I[0];for(var b in this.arr)F[b]=(this.arr[b]-E)/(x-E);return new k(F)},k.prototype.norm2=function(){var F;if(null===(F=this.arr)||void 0===F||!F.length)return 0;var I=0;for(var x in this.arr)I+=Math.pow(this.arr[x],2);return Math.sqrt(I)},k.prototype.dot=function(F){var I,x=F.arr;if(null===(I=this.arr)||void 0===I||!I.length||!x?.length)return 0;if(this.arr.length===x.length){var E=0;for(var b in this.arr)E+=this.arr[b]*F.arr[b];return E}console.error("The two vectors are unequal in length.")},k.prototype.equal=function(F){var I,x=F.arr;if((null===(I=this.arr)||void 0===I?void 0:I.length)!==x?.length)return!1;for(var E in this.arr)if(this.arr[E]!==x[E])return!1;return!0},k}();V.default=Q},4737:(Qt,V,G)=>{"use strict";function B(q){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(K){return typeof K}:function(K){return K&&"function"==typeof Symbol&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K})(q)}Object.defineProperty(V,"__esModule",{value:!0}),Object.defineProperty(V,"GADDI",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(V,"breadthFirstSearch",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(V,"connectedComponent",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(V,"depthFirstSearch",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(V,"detectCycle",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(V,"dijkstra",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(V,"findAllPath",{enumerable:!0,get:function(){return b.findAllPath}}),Object.defineProperty(V,"findShortestPath",{enumerable:!0,get:function(){return b.findShortestPath}}),Object.defineProperty(V,"floydWarshall",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(V,"getAdjMatrix",{enumerable:!0,get:function(){return Q.default}}),Object.defineProperty(V,"getDegree",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(V,"getInDegree",{enumerable:!0,get:function(){return F.getInDegree}}),Object.defineProperty(V,"getNeighbors",{enumerable:!0,get:function(){return U.getNeighbors}}),Object.defineProperty(V,"getOutDegree",{enumerable:!0,get:function(){return F.getOutDegree}}),Object.defineProperty(V,"labelPropagation",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(V,"louvain",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(V,"minimumSpanningTree",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(V,"pageRank",{enumerable:!0,get:function(){return S.default}});var Q=ne(G(2757)),j=ne(G(9499)),k=ne(G(9276)),F=function ie(q,K){if(!K&&q&&q.__esModule)return q;if(null===q||"object"!==B(q)&&"function"!=typeof q)return{default:q};var ee=z(K);if(ee&&ee.has(q))return ee.get(q);var X={},ae=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var re in q)if("default"!==re&&Object.prototype.hasOwnProperty.call(q,re)){var oe=ae?Object.getOwnPropertyDescriptor(q,re):null;oe&&(oe.get||oe.set)?Object.defineProperty(X,re,oe):X[re]=q[re]}return X.default=q,ee&&ee.set(q,X),X}(G(6149)),I=ne(G(1674)),x=ne(G(811)),E=ne(G(4894)),b=G(6147),w=ne(G(5100)),y=ne(G(3754)),A=ne(G(7306)),M=ne(G(5687)),S=ne(G(2684)),P=ne(G(1349)),U=G(5271);function z(q){if("function"!=typeof WeakMap)return null;var K=new WeakMap,ee=new WeakMap;return(z=function(ae){return ae?ee:K})(q)}function ne(q){return q&&q.__esModule?q:{default:q}}},8982:(Qt,V)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.MESSAGE=V.ALGORITHM=void 0,V.ALGORITHM={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"},V.MESSAGE={SUCCESS:"SUCCESS",FAILURE:"FAILURE"}},3922:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.default=void 0;var B=G(8982),Q=function j(I){return I&&I.__esModule?I:{default:I}}(G(2914));V.default=function(x){return function(){for(var E=[],b=0;b<arguments.length;b++)E[b]=arguments[b];return new Promise(function(w,y){var A=new Q.default;A.postMessage({_algorithmType:x,data:E}),A.onmessage=function(M){var S=M.data;B.MESSAGE.SUCCESS===S._algorithmType?w(S.data):y(),A.terminate()}})}}},6481:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.pageRankAsync=V.minimumSpanningTreeAsync=V.louvainAsync=V.labelPropagationAsync=V.getOutDegreeAsync=V.getNeighborsAsync=V.getInDegreeAsync=V.getDegreeAsync=V.getAdjMatrixAsync=V.floydWarshallAsync=V.findShortestPathAsync=V.findAllPathAsync=V.dijkstraAsync=V.detectCycleAsync=V.detectAllUndirectedCycleAsync=V.detectAllDirectedCycleAsync=V.detectAllCyclesAsync=V.connectedComponentAsync=V.GADDIAsync=void 0;var B=function j(X){return X&&X.__esModule?X:{default:X}}(G(3922)),Q=G(8982);V.getAdjMatrixAsync=function(ae,re){return(0,B.default)(Q.ALGORITHM.getAdjMatrix).apply(void 0,[ae,re])},V.connectedComponentAsync=function(ae,re){return(0,B.default)(Q.ALGORITHM.connectedComponent).apply(void 0,[ae,re])},V.getDegreeAsync=function(ae){return(0,B.default)(Q.ALGORITHM.getDegree)(ae)},V.getInDegreeAsync=function(ae,re){return(0,B.default)(Q.ALGORITHM.getInDegree)(ae,re)},V.getOutDegreeAsync=function(ae,re){return(0,B.default)(Q.ALGORITHM.getOutDegree)(ae,re)},V.detectCycleAsync=function(ae){return(0,B.default)(Q.ALGORITHM.detectCycle)(ae)},V.detectAllCyclesAsync=function(ae){return(0,B.default)(Q.ALGORITHM.detectAllCycles)(ae)},V.detectAllDirectedCycleAsync=function(ae){return(0,B.default)(Q.ALGORITHM.detectAllDirectedCycle)(ae)},V.detectAllUndirectedCycleAsync=function(ae){return(0,B.default)(Q.ALGORITHM.detectAllUndirectedCycle)(ae)},V.dijkstraAsync=function(ae,re,oe,ve){return(0,B.default)(Q.ALGORITHM.dijkstra).apply(void 0,[ae,re,oe,ve])},V.findAllPathAsync=function(ae,re,oe,ve){return(0,B.default)(Q.ALGORITHM.findAllPath).apply(void 0,[ae,re,oe,ve])},V.findShortestPathAsync=function(ae,re,oe,ve,we){return(0,B.default)(Q.ALGORITHM.findShortestPath).apply(void 0,[ae,re,oe,ve,we])},V.floydWarshallAsync=function(ae,re){return(0,B.default)(Q.ALGORITHM.floydWarshall).apply(void 0,[ae,re])},V.labelPropagationAsync=function(ae,re,oe,ve){return void 0===ve&&(ve=1e3),(0,B.default)(Q.ALGORITHM.labelPropagation)(ae,re,oe,ve)},V.louvainAsync=function(ae,re,oe,ve){return(0,B.default)(Q.ALGORITHM.louvain)(ae,re,oe,ve)},V.minimumSpanningTreeAsync=function(ae,re,oe){return(0,B.default)(Q.ALGORITHM.minimumSpanningTree).apply(void 0,[ae,re,oe])},V.pageRankAsync=function(ae,re,oe){return(0,B.default)(Q.ALGORITHM.pageRank).apply(void 0,[ae,re,oe])},V.getNeighborsAsync=function(ae,re,oe){return(0,B.default)(Q.ALGORITHM.getNeighbors).apply(void 0,[ae,re,oe])},V.GADDIAsync=function(ae,re,oe,ve,we,_e,me){return void 0===oe&&(oe=!1),void 0===_e&&(_e="cluster"),void 0===me&&(me="cluster"),(0,B.default)(Q.ALGORITHM.GADDI).apply(void 0,[ae,re,oe,ve,we,_e,me])}},2914:(Qt,V,G)=>{"use strict";function B(E){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(E)}Object.defineProperty(V,"__esModule",{value:!0}),V.default=void 0;var Q=function F(E,b){if(!b&&E&&E.__esModule)return E;if(null===E||"object"!==B(E)&&"function"!=typeof E)return{default:E};var w=k(b);if(w&&w.has(E))return w.get(E);var y={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var M in E)if("default"!==M&&Object.prototype.hasOwnProperty.call(E,M)){var S=A?Object.getOwnPropertyDescriptor(E,M):null;S&&(S.get||S.set)?Object.defineProperty(y,M,S):y[M]=E[M]}return y.default=E,w&&w.set(E,y),y}(G(4737)),j=G(8982);function k(E){if("function"!=typeof WeakMap)return null;var b=new WeakMap,w=new WeakMap;return(k=function(A){return A?w:b})(E)}var I=typeof self<"u"?self:{};I.onmessage=function(E){var b=E.data,w=b._algorithmType;if(w){if("function"==typeof Q[w]){var A=Q[w].apply(Q,b.data);return void I.postMessage({_algorithmType:j.MESSAGE.SUCCESS,data:A})}I.postMessage({_algorithmType:j.MESSAGE.FAILURE})}},V.default=null},3305:(Qt,V,G)=>{"use strict";function B(R,He,ze,Je,gt,an,Ke){try{var qt=R[an](Ke),Sn=qt.value}catch(zn){return void ze(zn)}qt.done?He(Sn):Promise.resolve(Sn).then(Je,gt)}function Q(R){return function(){var He=this,ze=arguments;return new Promise(function(Je,gt){var an=R.apply(He,ze);function Ke(Sn){B(an,Je,gt,Ke,qt,"next",Sn)}function qt(Sn){B(an,Je,gt,Ke,qt,"throw",Sn)}Ke(void 0)})}}function j(R){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(He){return typeof He}:function(He){return He&&"function"==typeof Symbol&&He.constructor===Symbol&&He!==Symbol.prototype?"symbol":typeof He})(R)}function F(R){var He=function k(R,He){if("object"!==j(R)||null===R)return R;var ze=R[Symbol.toPrimitive];if(void 0!==ze){var Je=ze.call(R,He||"default");if("object"!==j(Je))return Je;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===He?String:Number)(R)}(R,"string");return"symbol"===j(He)?He:String(He)}function I(R,He,ze){return(He=F(He))in R?Object.defineProperty(R,He,{value:ze,enumerable:!0,configurable:!0,writable:!0}):R[He]=ze,R}function x(R,He){if(!(R instanceof He))throw new TypeError("Cannot call a class as a function")}function E(R,He){for(var ze=0;ze<He.length;ze++){var Je=He[ze];Je.enumerable=Je.enumerable||!1,Je.configurable=!0,"value"in Je&&(Je.writable=!0),Object.defineProperty(R,F(Je.key),Je)}}function b(R,He,ze){return He&&E(R.prototype,He),ze&&E(R,ze),Object.defineProperty(R,"prototype",{writable:!1}),R}G.r(V),G.d(V,{Kernel:()=>te,World:()=>$t});var w=G(8159),y=G.n(w),A=G(9138),M=G.n(A),S=G(1503),P=G.n(S),U=G(4687),z=G.n(U),ne=1;function q(){return ne++}var X=(()=>{return(R=X||(X={}))[R.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",R[R.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",R[R.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",R[R.POINTS=0]="POINTS",R[R.LINES=1]="LINES",R[R.LINE_LOOP=2]="LINE_LOOP",R[R.LINE_STRIP=3]="LINE_STRIP",R[R.TRIANGLES=4]="TRIANGLES",R[R.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",R[R.TRIANGLE_FAN=6]="TRIANGLE_FAN",R[R.ZERO=0]="ZERO",R[R.ONE=1]="ONE",R[R.SRC_COLOR=768]="SRC_COLOR",R[R.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",R[R.SRC_ALPHA=770]="SRC_ALPHA",R[R.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",R[R.DST_ALPHA=772]="DST_ALPHA",R[R.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",R[R.DST_COLOR=774]="DST_COLOR",R[R.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",R[R.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",R[R.FUNC_ADD=32774]="FUNC_ADD",R[R.BLEND_EQUATION=32777]="BLEND_EQUATION",R[R.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",R[R.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",R[R.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",R[R.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",R[R.MAX_EXT=32776]="MAX_EXT",R[R.MIN_EXT=32775]="MIN_EXT",R[R.BLEND_DST_RGB=32968]="BLEND_DST_RGB",R[R.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",R[R.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",R[R.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",R[R.CONSTANT_COLOR=32769]="CONSTANT_COLOR",R[R.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",R[R.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",R[R.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",R[R.BLEND_COLOR=32773]="BLEND_COLOR",R[R.ARRAY_BUFFER=34962]="ARRAY_BUFFER",R[R.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",R[R.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",R[R.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",R[R.STREAM_DRAW=35040]="STREAM_DRAW",R[R.STATIC_DRAW=35044]="STATIC_DRAW",R[R.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",R[R.BUFFER_SIZE=34660]="BUFFER_SIZE",R[R.BUFFER_USAGE=34661]="BUFFER_USAGE",R[R.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",R[R.FRONT=1028]="FRONT",R[R.BACK=1029]="BACK",R[R.FRONT_AND_BACK=1032]="FRONT_AND_BACK",R[R.CULL_FACE=2884]="CULL_FACE",R[R.BLEND=3042]="BLEND",R[R.DITHER=3024]="DITHER",R[R.STENCIL_TEST=2960]="STENCIL_TEST",R[R.DEPTH_TEST=2929]="DEPTH_TEST",R[R.SCISSOR_TEST=3089]="SCISSOR_TEST",R[R.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",R[R.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",R[R.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",R[R.NO_ERROR=0]="NO_ERROR",R[R.INVALID_ENUM=1280]="INVALID_ENUM",R[R.INVALID_VALUE=1281]="INVALID_VALUE",R[R.INVALID_OPERATION=1282]="INVALID_OPERATION",R[R.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",R[R.CW=2304]="CW",R[R.CCW=2305]="CCW",R[R.LINE_WIDTH=2849]="LINE_WIDTH",R[R.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",R[R.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",R[R.CULL_FACE_MODE=2885]="CULL_FACE_MODE",R[R.FRONT_FACE=2886]="FRONT_FACE",R[R.DEPTH_RANGE=2928]="DEPTH_RANGE",R[R.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",R[R.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",R[R.DEPTH_FUNC=2932]="DEPTH_FUNC",R[R.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",R[R.STENCIL_FUNC=2962]="STENCIL_FUNC",R[R.STENCIL_FAIL=2964]="STENCIL_FAIL",R[R.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",R[R.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",R[R.STENCIL_REF=2967]="STENCIL_REF",R[R.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",R[R.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",R[R.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",R[R.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",R[R.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",R[R.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",R[R.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",R[R.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",R[R.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",R[R.VIEWPORT=2978]="VIEWPORT",R[R.SCISSOR_BOX=3088]="SCISSOR_BOX",R[R.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",R[R.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",R[R.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",R[R.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",R[R.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",R[R.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",R[R.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",R[R.RED_BITS=3410]="RED_BITS",R[R.GREEN_BITS=3411]="GREEN_BITS",R[R.BLUE_BITS=3412]="BLUE_BITS",R[R.ALPHA_BITS=3413]="ALPHA_BITS",R[R.DEPTH_BITS=3414]="DEPTH_BITS",R[R.STENCIL_BITS=3415]="STENCIL_BITS",R[R.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",R[R.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",R[R.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",R[R.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",R[R.SAMPLES=32937]="SAMPLES",R[R.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",R[R.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",R[R.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",R[R.DONT_CARE=4352]="DONT_CARE",R[R.FASTEST=4353]="FASTEST",R[R.NICEST=4354]="NICEST",R[R.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",R[R.BYTE=5120]="BYTE",R[R.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",R[R.SHORT=5122]="SHORT",R[R.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",R[R.INT=5124]="INT",R[R.UNSIGNED_INT=5125]="UNSIGNED_INT",R[R.FLOAT=5126]="FLOAT",R[R.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",R[R.ALPHA=6406]="ALPHA",R[R.RGB=6407]="RGB",R[R.RGBA=6408]="RGBA",R[R.LUMINANCE=6409]="LUMINANCE",R[R.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",R[R.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",R[R.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",R[R.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",R[R.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",R[R.VERTEX_SHADER=35633]="VERTEX_SHADER",R[R.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",R[R.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",R[R.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",R[R.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",R[R.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",R[R.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",R[R.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",R[R.SHADER_TYPE=35663]="SHADER_TYPE",R[R.DELETE_STATUS=35712]="DELETE_STATUS",R[R.LINK_STATUS=35714]="LINK_STATUS",R[R.VALIDATE_STATUS=35715]="VALIDATE_STATUS",R[R.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",R[R.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",R[R.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",R[R.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",R[R.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",R[R.NEVER=512]="NEVER",R[R.LESS=513]="LESS",R[R.EQUAL=514]="EQUAL",R[R.LEQUAL=515]="LEQUAL",R[R.GREATER=516]="GREATER",R[R.NOTEQUAL=517]="NOTEQUAL",R[R.GEQUAL=518]="GEQUAL",R[R.ALWAYS=519]="ALWAYS",R[R.KEEP=7680]="KEEP",R[R.REPLACE=7681]="REPLACE",R[R.INCR=7682]="INCR",R[R.DECR=7683]="DECR",R[R.INVERT=5386]="INVERT",R[R.INCR_WRAP=34055]="INCR_WRAP",R[R.DECR_WRAP=34056]="DECR_WRAP",R[R.VENDOR=7936]="VENDOR",R[R.RENDERER=7937]="RENDERER",R[R.VERSION=7938]="VERSION",R[R.NEAREST=9728]="NEAREST",R[R.LINEAR=9729]="LINEAR",R[R.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",R[R.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",R[R.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",R[R.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",R[R.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",R[R.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",R[R.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",R[R.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",R[R.TEXTURE_2D=3553]="TEXTURE_2D",R[R.TEXTURE=5890]="TEXTURE",R[R.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",R[R.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",R[R.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",R[R.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",R[R.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",R[R.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",R[R.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",R[R.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",R[R.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",R[R.TEXTURE0=33984]="TEXTURE0",R[R.TEXTURE1=33985]="TEXTURE1",R[R.TEXTURE2=33986]="TEXTURE2",R[R.TEXTURE3=33987]="TEXTURE3",R[R.TEXTURE4=33988]="TEXTURE4",R[R.TEXTURE5=33989]="TEXTURE5",R[R.TEXTURE6=33990]="TEXTURE6",R[R.TEXTURE7=33991]="TEXTURE7",R[R.TEXTURE8=33992]="TEXTURE8",R[R.TEXTURE9=33993]="TEXTURE9",R[R.TEXTURE10=33994]="TEXTURE10",R[R.TEXTURE11=33995]="TEXTURE11",R[R.TEXTURE12=33996]="TEXTURE12",R[R.TEXTURE13=33997]="TEXTURE13",R[R.TEXTURE14=33998]="TEXTURE14",R[R.TEXTURE15=33999]="TEXTURE15",R[R.TEXTURE16=34e3]="TEXTURE16",R[R.TEXTURE17=34001]="TEXTURE17",R[R.TEXTURE18=34002]="TEXTURE18",R[R.TEXTURE19=34003]="TEXTURE19",R[R.TEXTURE20=34004]="TEXTURE20",R[R.TEXTURE21=34005]="TEXTURE21",R[R.TEXTURE22=34006]="TEXTURE22",R[R.TEXTURE23=34007]="TEXTURE23",R[R.TEXTURE24=34008]="TEXTURE24",R[R.TEXTURE25=34009]="TEXTURE25",R[R.TEXTURE26=34010]="TEXTURE26",R[R.TEXTURE27=34011]="TEXTURE27",R[R.TEXTURE28=34012]="TEXTURE28",R[R.TEXTURE29=34013]="TEXTURE29",R[R.TEXTURE30=34014]="TEXTURE30",R[R.TEXTURE31=34015]="TEXTURE31",R[R.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",R[R.REPEAT=10497]="REPEAT",R[R.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",R[R.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",R[R.FLOAT_VEC2=35664]="FLOAT_VEC2",R[R.FLOAT_VEC3=35665]="FLOAT_VEC3",R[R.FLOAT_VEC4=35666]="FLOAT_VEC4",R[R.INT_VEC2=35667]="INT_VEC2",R[R.INT_VEC3=35668]="INT_VEC3",R[R.INT_VEC4=35669]="INT_VEC4",R[R.BOOL=35670]="BOOL",R[R.BOOL_VEC2=35671]="BOOL_VEC2",R[R.BOOL_VEC3=35672]="BOOL_VEC3",R[R.BOOL_VEC4=35673]="BOOL_VEC4",R[R.FLOAT_MAT2=35674]="FLOAT_MAT2",R[R.FLOAT_MAT3=35675]="FLOAT_MAT3",R[R.FLOAT_MAT4=35676]="FLOAT_MAT4",R[R.SAMPLER_2D=35678]="SAMPLER_2D",R[R.SAMPLER_CUBE=35680]="SAMPLER_CUBE",R[R.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",R[R.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",R[R.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",R[R.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",R[R.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",R[R.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",R[R.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",R[R.COMPILE_STATUS=35713]="COMPILE_STATUS",R[R.LOW_FLOAT=36336]="LOW_FLOAT",R[R.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",R[R.HIGH_FLOAT=36338]="HIGH_FLOAT",R[R.LOW_INT=36339]="LOW_INT",R[R.MEDIUM_INT=36340]="MEDIUM_INT",R[R.HIGH_INT=36341]="HIGH_INT",R[R.FRAMEBUFFER=36160]="FRAMEBUFFER",R[R.RENDERBUFFER=36161]="RENDERBUFFER",R[R.RGBA4=32854]="RGBA4",R[R.RGB5_A1=32855]="RGB5_A1",R[R.RGB565=36194]="RGB565",R[R.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",R[R.STENCIL_INDEX=6401]="STENCIL_INDEX",R[R.STENCIL_INDEX8=36168]="STENCIL_INDEX8",R[R.DEPTH_STENCIL=34041]="DEPTH_STENCIL",R[R.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",R[R.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",R[R.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",R[R.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",R[R.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",R[R.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",R[R.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",R[R.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",R[R.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",R[R.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",R[R.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",R[R.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",R[R.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",R[R.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",R[R.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",R[R.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",R[R.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",R[R.NONE=0]="NONE",R[R.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",R[R.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",R[R.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",R[R.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",R[R.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",R[R.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",R[R.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",R[R.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",R[R.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",R[R.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",R[R.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",R[R.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",R[R.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",R[R.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",R[R.COPY_SRC=1]="COPY_SRC",R[R.COPY_DST=2]="COPY_DST",R[R.SAMPLED=4]="SAMPLED",R[R.STORAGE=8]="STORAGE",R[R.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT",X;var R})(),ae=function(){function R(){x(this,R),this.config=void 0}return b(R,[{key:"get",value:function(){return this.config}},{key:"set",value:function(ze){this.config=ze}}]),R}(),oe=(typeof navigator<"u"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),(()=>{return(R=oe||(oe={})).Void="Void",R.Boolean="Boolean",R.Float="Float",R.Uint32="Uint32",R.Int32="Int32",R.Vector="Vector",R.Vector2Float="vec2<f32>",R.Vector3Float="vec3<f32>",R.Vector4Float="vec4<f32>",R.Vector2Boolean="vec2<bool>",R.Vector3Boolean="vec3<bool>",R.Vector4Boolean="vec4<bool>",R.Vector2Uint="vec2<u32>",R.Vector3Uint="vec3<u32>",R.Vector4Uint="vec4<u32>",R.Vector2Int="vec2<i32>",R.Vector3Int="vec3<i32>",R.Vector4Int="vec4<i32>",R.Matrix="Matrix",R.Matrix3x3Float="mat3x3<f32>",R.Matrix4x4Float="mat4x4<i32>",R.Struct="Struct",R.FloatArray="Float[]",R.Vector4FloatArray="vec4<f32>[]",oe;var R})()),we=(()=>{return(R=we||(we={})).Input="Input",R.Output="Output",R.Uniform="Uniform",R.Workgroup="Workgroup",R.UniformConstant="UniformConstant",R.Image="Image",R.StorageBuffer="StorageBuffer",R.Private="Private",R.Function="Function",we;var R})(),_e=(()=>{return(R=_e||(_e={})).GLSL100="GLSL100",R.GLSL450="GLSL450",R.WGSL="WGSL",_e;var R})();function Ce(){if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function fe(R,He){var ze=Object.keys(R);if(Object.getOwnPropertySymbols){var Je=Object.getOwnPropertySymbols(R);He&&(Je=Je.filter(function(gt){return Object.getOwnPropertyDescriptor(R,gt).enumerable})),ze.push.apply(ze,Je)}return ze}function be(R){for(var He=1;He<arguments.length;He++){var ze=null!=arguments[He]?arguments[He]:{};He%2?fe(Object(ze),!0).forEach(function(Je){I(R,Je,ze[Je])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(ze)):fe(Object(ze)).forEach(function(Je){Object.defineProperty(R,Je,Object.getOwnPropertyDescriptor(ze,Je))})}return R}var We,bt,Ft,Pt,Xe,yt,Ct,pt,xt,Fe,ut,Ut,$e,Te,te=function(){function R(He,ze){x(this,R),this.engine=He,this.configService=ze,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return b(R,[{key:"init",value:function(){var ze=this.configService.get(),gt=ze.engineOptions;this.initPromise=this.engine.init(be({canvas:ze.canvas||Ce(),antialiasing:!1},gt))}},{key:"setBundle",value:function(ze){this.compiledBundle=JSON.parse(JSON.stringify(ze))}},{key:"setDispatch",value:function(ze){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=ze),this}},{key:"setMaxIteration",value:function(ze){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=ze),this}},{key:"setBinding",value:function(ze,Je){var gt=this;if("string"==typeof ze){var an=M()(Je)||y()(Je)||P()(Je);if(this.compiledBundle&&this.compiledBundle.context){var Ke=this.compiledBundle.context.defines.find(function(Sn){return Sn.name===ze});if(Ke)return Ke.value=Je,this;var qt=this.compiledBundle.context.uniforms.find(function(Sn){return Sn.name===ze});qt&&(an?(qt.data=Je,qt.isReferer=!1,qt.storageClass===we.Uniform?this.model&&this.model.updateUniform(ze,Je):this.model&&this.model.updateBuffer(ze,Je)):(qt.isReferer=!0,qt.data=Je))}}else Object.keys(ze).forEach(function(Sn){gt.setBinding(Sn,ze[Sn])});return this}},{key:"execute",value:(He=Q(z().mark(function Je(){var an,Ke,gt=this,qt=arguments;return z().wrap(function(zn){for(;;)switch(zn.prev=zn.next){case 0:if(an=qt.length>0&&void 0!==qt[0]?qt[0]:1,!this.dirty){zn.next=6;break}return this.compiledBundle.context&&(an>1?this.compiledBundle.context.maxIteration=an:this.compiledBundle.context.maxIteration++),zn.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(Wn){return Wn.isReferer}).forEach(function(Wn){gt.model.confirmInput(Wn.data.model,Wn.name)}),Ke=0;Ke<an;Ke++)this.model.run();return this.engine.endFrame(),zn.abrupt("return",this);case 12:case"end":return zn.stop()}},Je,this)})),function ze(){return He.apply(this,arguments)})},{key:"getOutput",value:function(){var He=Q(z().mark(function Je(){return z().wrap(function(an){for(;;)switch(an.prev=an.next){case 0:return an.abrupt("return",this.model.readData());case 1:case"end":return an.stop()}},Je,this)}));return function ze(){return He.apply(this,arguments)}}()},{key:"compile",value:function(){var He=Q(z().mark(function Je(){var gt,Ke;return z().wrap(function(Sn){for(;;)switch(Sn.prev=Sn.next){case 0:return Sn.next=2,this.initPromise;case 2:return gt=be({},this.compiledBundle.context),Ke=this.compiledBundle.shaders[this.engine.supportWebGPU?this.engine.useWGSL?_e.WGSL:_e.GLSL450:_e.GLSL100],gt.defines.filter(function(zn){return zn.runtime}).forEach(function(zn){var Wn="".concat("__DefineValuePlaceholder__").concat(zn.name);Ke=Ke.replace(Wn,"".concat(zn.value))}),gt.shader=Ke,gt.uniforms.forEach(function(zn){if(!zn.data&&zn.storageClass===we.StorageBuffer){var Wn=1;zn.type===oe.FloatArray?Wn=1:zn.type===oe.Vector4FloatArray&&(Wn=4),zn.data=new Float32Array(gt.output.length*Wn).fill(0)}}),this.compiledBundle.context=gt,Sn.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=Sn.sent;case 12:case"end":return Sn.stop()}},Je,this)}));return function ze(){return He.apply(this,arguments)}}()}]),R;var He}(),de=G(2366),ke=G.n(de),Ze=function(){function R(He,ze){x(this,R),this.attribute=void 0,this.buffer=void 0;var Je=ze.buffer,gt=ze.offset,an=ze.stride,Ke=ze.normalized,qt=ze.size,Sn=ze.divisor;this.buffer=Je,this.attribute={buffer:Je.get(),offset:gt||0,stride:an||0,normalized:Ke||!1,divisor:Sn||0},qt&&(this.attribute.size=qt)}return b(R,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(ze){this.buffer.subData(ze)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),R}(),tt=(I(We={},X.POINTS,"points"),I(We,X.LINES,"lines"),I(We,X.LINE_LOOP,"line loop"),I(We,X.LINE_STRIP,"line strip"),I(We,X.TRIANGLES,"triangles"),I(We,X.TRIANGLE_FAN,"triangle fan"),I(We,X.TRIANGLE_STRIP,"triangle strip"),We),Mt=(I(bt={},X.STATIC_DRAW,"static"),I(bt,X.DYNAMIC_DRAW,"dynamic"),I(bt,X.STREAM_DRAW,"stream"),bt),Wt=(I(Ft={},X.BYTE,"int8"),I(Ft,X.UNSIGNED_INT,"int16"),I(Ft,X.INT,"int32"),I(Ft,X.UNSIGNED_BYTE,"uint8"),I(Ft,X.UNSIGNED_SHORT,"uint16"),I(Ft,X.UNSIGNED_INT,"uint32"),I(Ft,X.FLOAT,"float"),Ft),un=(I(Pt={},X.ALPHA,"alpha"),I(Pt,X.LUMINANCE,"luminance"),I(Pt,X.LUMINANCE_ALPHA,"luminance alpha"),I(Pt,X.RGB,"rgb"),I(Pt,X.RGBA,"rgba"),I(Pt,X.RGBA4,"rgba4"),I(Pt,X.RGB5_A1,"rgb5 a1"),I(Pt,X.RGB565,"rgb565"),I(Pt,X.DEPTH_COMPONENT,"depth"),I(Pt,X.DEPTH_STENCIL,"depth stencil"),Pt),Le=(I(Xe={},X.DONT_CARE,"dont care"),I(Xe,X.NICEST,"nice"),I(Xe,X.FASTEST,"fast"),Xe),zt=(I(yt={},X.NEAREST,"nearest"),I(yt,X.LINEAR,"linear"),I(yt,X.LINEAR_MIPMAP_LINEAR,"mipmap"),I(yt,X.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),I(yt,X.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),I(yt,X.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),yt),Xt=(I(Ct={},X.REPEAT,"repeat"),I(Ct,X.CLAMP_TO_EDGE,"clamp"),I(Ct,X.MIRRORED_REPEAT,"mirror"),Ct),Tn=(I(pt={},X.NONE,"none"),I(pt,X.BROWSER_DEFAULT_WEBGL,"browser"),pt),gn=(I(xt={},X.NEVER,"never"),I(xt,X.ALWAYS,"always"),I(xt,X.LESS,"less"),I(xt,X.LEQUAL,"lequal"),I(xt,X.GREATER,"greater"),I(xt,X.GEQUAL,"gequal"),I(xt,X.EQUAL,"equal"),I(xt,X.NOTEQUAL,"notequal"),xt),kn=(I(Fe={},X.FUNC_ADD,"add"),I(Fe,X.MIN_EXT,"min"),I(Fe,X.MAX_EXT,"max"),I(Fe,X.FUNC_SUBTRACT,"subtract"),I(Fe,X.FUNC_REVERSE_SUBTRACT,"reverse subtract"),Fe),ir=(I(ut={},X.ZERO,"zero"),I(ut,X.ONE,"one"),I(ut,X.SRC_COLOR,"src color"),I(ut,X.ONE_MINUS_SRC_COLOR,"one minus src color"),I(ut,X.SRC_ALPHA,"src alpha"),I(ut,X.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),I(ut,X.DST_COLOR,"dst color"),I(ut,X.ONE_MINUS_DST_COLOR,"one minus dst color"),I(ut,X.DST_ALPHA,"dst alpha"),I(ut,X.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),I(ut,X.CONSTANT_COLOR,"constant color"),I(ut,X.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),I(ut,X.CONSTANT_ALPHA,"constant alpha"),I(ut,X.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),I(ut,X.SRC_ALPHA_SATURATE,"src alpha saturate"),ut),cr=(I(Ut={},X.NEVER,"never"),I(Ut,X.ALWAYS,"always"),I(Ut,X.LESS,"less"),I(Ut,X.LEQUAL,"lequal"),I(Ut,X.GREATER,"greater"),I(Ut,X.GEQUAL,"gequal"),I(Ut,X.EQUAL,"equal"),I(Ut,X.NOTEQUAL,"notequal"),Ut),Bn=(I($e={},X.ZERO,"zero"),I($e,X.KEEP,"keep"),I($e,X.REPLACE,"replace"),I($e,X.INVERT,"invert"),I($e,X.INCR,"increment"),I($e,X.DECR,"decrement"),I($e,X.INCR_WRAP,"increment wrap"),I($e,X.DECR_WRAP,"decrement wrap"),$e),xr=(I(Te={},X.FRONT,"front"),I(Te,X.BACK,"back"),Te),jn=function(){function R(He,ze){x(this,R),this.buffer=void 0,this.buffer=He.buffer({data:ze.data,usage:Mt[ze.usage||X.STATIC_DRAW],type:Wt[ze.type||X.UNSIGNED_BYTE]})}return b(R,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(ze){this.buffer.subdata(ze.data,ze.offset)}}]),R}();function Rn(R,He){(null==He||He>R.length)&&(He=R.length);for(var ze=0,Je=new Array(He);ze<He;ze++)Je[ze]=R[ze];return Je}function Ir(R,He){var ze=Object.keys(R);if(Object.getOwnPropertySymbols){var Je=Object.getOwnPropertySymbols(R);He&&(Je=Je.filter(function(gt){return Object.getOwnPropertyDescriptor(R,gt).enumerable})),ze.push.apply(ze,Je)}return ze}function De(R){for(var He=1;He<arguments.length;He++){var ze=null!=arguments[He]?arguments[He]:{};He%2?Ir(Object(ze),!0).forEach(function(Je){I(R,Je,ze[Je])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(ze)):Ir(Object(ze)).forEach(function(Je){Object.defineProperty(R,Je,Object.getOwnPropertyDescriptor(ze,Je))})}return R}var xo=0,Wr=function(){function R(He,ze){var Je=this;x(this,R),this.reGl=He,this.context=ze,this.entity=q(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var gt={};this.context.uniforms.forEach(function(zn){var Wn=zn.name,kr=zn.type,$n=zn.data,Xr=zn.storageClass;if(Xr===we.StorageBuffer){if(zn.isReferer)Je.textureCache[Wn]={data:void 0},gt["".concat(Wn,"Size")]=function(){return $n.compiledBundle.context.output.textureSize};else{Je.textureCache[Wn]=Je.calcDataTexture(Wn,kr,$n);var Di=Je.textureCache[Wn],Kt=Di.textureWidth,Gn=Di.isOutput;gt["".concat(Wn,"Size")]=[Kt,Kt],Gn&&(Je.outputTextureName=Wn,Je.context.needPingpong&&(Je.outputTextureName="".concat(Wn,"Output"),Je.textureCache[Je.outputTextureName]=Je.calcDataTexture(Wn,kr,$n)))}gt[Wn]=function(){return Je.textureCache[Wn].texture}}else if(Xr===we.Uniform){if($n&&(Array.isArray($n)||y()($n))&&$n.length>16)throw new Error("invalid data type ".concat(kr));gt[Wn]=function(){return zn.data}}});var an=this.getOuputDataTexture(),Ke=an.textureWidth,qt=an.texelCount;gt.u_OutputTextureSize=[Ke,Ke],gt.u_OutputTexelCount=qt,this.context.output.textureSize=[Ke,Ke];var Sn={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n".concat(this.context.shader),uniforms:gt,vert:"attribute vec3 a_Position;\nattribute vec2 a_TexCoord;\n\nvarying vec2 v_TexCoord;\n\nvoid main() {\n  gl_Position = vec4(a_Position, 1.0);\n  v_TexCoord = a_TexCoord;\n}",primitive:"triangle strip",count:4};this.computeCommand=this.reGl(Sn)}return b(R,[{key:"run",value:function(){var ze=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){ze.computeCommand()})}},{key:"readData",value:(He=Q(z().mark(function Je(){var an,Ke,qt,Sn,zn,Wn,kr,$n,gt=this;return z().wrap(function(Xr){for(;;)switch(Xr.prev=Xr.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){an=gt.reGl.read()}),!an){Xr.next=6;break}if(Ke=this.getOuputDataTexture(),qt=Ke.originalDataLength,Sn=Ke.elementsPerTexel,Wn=void 0===(zn=Ke.typedArrayConstructor)?Float32Array:zn,kr=[],4!==Sn)for($n=0;$n<an.length;$n+=4)1===Sn?kr.push(an[$n]):2===Sn?kr.push(an[$n],an[$n+1]):kr.push(an[$n],an[$n+1],an[$n+2]);else kr=an;return Xr.abrupt("return",new Wn(kr.slice(0,qt)));case 6:return Xr.abrupt("return",new Float32Array);case 7:case"end":return Xr.stop()}},Je,this)})),function ze(){return He.apply(this,arguments)})},{key:"confirmInput",value:function(ze,Je){var gt;this.entity===ze.entity?(this.dynamicPingpong=!0,gt=this):gt=ze,this.textureCache[Je].id=gt.getOuputDataTexture().id,this.textureCache[Je].texture=gt.getOuputDataTexture().texture}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(ze,Je){var an=this.context.uniforms.find(function(zn){return zn.name===ze});if(an){var Ke=this.calcDataTexture(ze,an.type,Je),qt=Ke.texture;this.textureCache[ze].data=Ke.data,this.textureCache[ze].texture=qt}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var ze=this.context.output.name;this.textureCache[ze].id=this.getOuputDataTexture().id,this.textureCache[ze].texture=this.getOuputDataTexture().texture}var Je=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=Je}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var ze=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=ze}},{key:"cloneDataTexture",value:function(ze){var Je=ze.data,gt=ze.textureWidth;return De(De({},ze),{},{id:xo++,texture:this.reGl.texture({width:gt,height:gt,data:Je,type:"float"})})}},{key:"calcDataTexture",value:function(ze,Je,gt){var an=1;Je===oe.Vector4FloatArray&&(an=4);for(var Ke=[],qt=0;qt<gt.length;qt+=an)1===an?Ke.push(gt[qt],0,0,0):2===an?Ke.push(gt[qt],gt[qt+1],0,0):3===an?Ke.push(gt[qt],gt[qt+1],gt[qt+2],0):4===an&&Ke.push(gt[qt],gt[qt+1],gt[qt+2],gt[qt+3]);var Sn=gt.length,zn=Math.ceil(Sn/an),Wn=Math.ceil(Math.sqrt(zn)),kr=Wn*Wn;zn<kr&&Ke.push.apply(Ke,function Oi(R){return function er(R){if(Array.isArray(R))return Rn(R)}(R)||function Mr(R){if(typeof Symbol<"u"&&null!=R[Symbol.iterator]||null!=R["@@iterator"])return Array.from(R)}(R)||function yr(R,He){if(R){if("string"==typeof R)return Rn(R,He);var ze=Object.prototype.toString.call(R).slice(8,-1);if("Object"===ze&&R.constructor&&(ze=R.constructor.name),"Map"===ze||"Set"===ze)return Array.from(R);if("Arguments"===ze||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ze))return Rn(R,He)}}(R)||function gr(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(new Array(4*(kr-zn)).fill(0)));var $n=this.reGl.texture({width:Wn,height:Wn,data:Ke,type:"float"});return{id:xo++,data:Ke,originalDataLength:Sn,typedArrayConstructor:y()(gt)?gt.constructor:void 0,textureWidth:Wn,texture:$n,texelCount:zn,elementsPerTexel:an,isOutput:ze===this.context.output.name}}}]),R;var He}(),Vr=function(){function R(He,ze){x(this,R),this.elements=void 0,this.elements=He.elements({data:ze.data,usage:Mt[ze.usage||X.STATIC_DRAW],type:Wt[ze.type||X.UNSIGNED_BYTE],count:ze.count})}return b(R,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(ze){this.elements.subdata(ze.data)}},{key:"destroy",value:function(){this.elements.destroy()}}]),R}(),Ae=function(){function R(He,ze){x(this,R),this.framebuffer=void 0;var an=ze.color,Ke=ze.colors,zn={width:ze.width,height:ze.height};Array.isArray(Ke)&&(zn.colors=Ke.map(function(Wn){return Wn.get()})),an&&"boolean"!=typeof an&&(zn.color=an.get()),this.framebuffer=He.framebuffer(zn)}return b(R,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(ze){this.framebuffer.resize(ze.width,ze.height)}}]),R}(),Y=G(7614),W=G.n(Y);function T(R){var He={};return Object.keys(R).forEach(function(ze){$(ze,R[ze],He,"")}),He}function $(R,He,ze,Je){null===He||"number"==typeof He||"boolean"==typeof He||Array.isArray(He)&&"number"==typeof He[0]||y()(He)||""===He||void 0!==He.resize?ze["".concat(Je&&Je+".").concat(R)]=He:(W()(He)&&Object.keys(He).forEach(function(gt){$(gt,He[gt],ze,"".concat(Je&&Je+".").concat(R))}),Array.isArray(He)&&He.forEach(function(gt,an){Object.keys(gt).forEach(function(Ke){$(Ke,gt[Ke],ze,"".concat(Je&&Je+".").concat(R,"[").concat(an,"]"))})}))}function ce(R,He){var ze=Object.keys(R);if(Object.getOwnPropertySymbols){var Je=Object.getOwnPropertySymbols(R);He&&(Je=Je.filter(function(gt){return Object.getOwnPropertyDescriptor(R,gt).enumerable})),ze.push.apply(ze,Je)}return ze}function je(R){for(var He=1;He<arguments.length;He++){var ze=null!=arguments[He]?arguments[He]:{};He%2?ce(Object(ze),!0).forEach(function(Je){I(R,Je,ze[Je])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(ze)):ce(Object(ze)).forEach(function(Je){Object.defineProperty(R,Je,Object.getOwnPropertyDescriptor(ze,Je))})}return R}var Ge=function(){function R(He,ze){x(this,R),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=He;var Je=ze.vs,gt=ze.fs,an=ze.defines,Ke=ze.attributes,qt=ze.uniforms,Sn=ze.primitive,zn=ze.count,Wn=ze.elements,kr=ze.depth,$n=ze.blend,Er=ze.stencil,Xr=ze.cull,Di=ze.instances,Kt=ze.scissor,Gn=ze.viewport,hr={};qt&&(this.uniforms=T(qt),Object.keys(qt).forEach(function(Et){hr[Et]=He.prop(Et)}));var Un={};Object.keys(Ke).forEach(function(Et){Un[Et]=Ke[Et].get()});var Gr=an&&this.generateDefines(an)||"",br={attributes:Un,frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n".concat(Gr,"\n").concat(gt),uniforms:hr,vert:"\n".concat(Gr,"\n").concat(Je),primitive:tt[void 0===Sn?X.TRIANGLES:Sn]};Di&&(br.instances=Di),zn&&(br.count=zn),Wn&&(br.elements=Wn.get()),Kt&&(br.scissor=Kt),Gn&&(br.viewport=Gn),this.initDepthDrawParams({depth:kr},br),this.initBlendDrawParams({blend:$n},br),this.initStencilDrawParams({stencil:Er},br),this.initCullDrawParams({cull:Xr},br),this.drawCommand=He(br)}return b(R,[{key:"addUniforms",value:function(ze){this.uniforms=je(je({},this.uniforms),T(ze))}},{key:"draw",value:function(ze){var Je=je(je({},this.uniforms),T(ze.uniforms||{})),gt={};Object.keys(Je).forEach(function(an){var Ke=j(Je[an]);"boolean"===Ke||"number"===Ke||Array.isArray(Je[an])||Je[an].BYTES_PER_ELEMENT?gt[an]=Je[an]:"string"===Ke||(gt[an]=Je[an].get())}),this.drawCommand(gt)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(ze,Je){var gt=ze.depth;gt&&(Je.depth={enable:void 0===gt.enable||!!gt.enable,mask:void 0===gt.mask||!!gt.mask,func:gn[gt.func||X.LESS],range:gt.range||[0,1]})}},{key:"initBlendDrawParams",value:function(ze,Je){var gt=ze.blend;if(gt){var Ke=gt.func,qt=gt.equation,Sn=gt.color;Je.blend={enable:!!gt.enable,func:{srcRGB:ir[Ke&&Ke.srcRGB||X.SRC_ALPHA],srcAlpha:ir[Ke&&Ke.srcAlpha||X.SRC_ALPHA],dstRGB:ir[Ke&&Ke.dstRGB||X.ONE_MINUS_SRC_ALPHA],dstAlpha:ir[Ke&&Ke.dstAlpha||X.ONE_MINUS_SRC_ALPHA]},equation:{rgb:kn[qt&&qt.rgb||X.FUNC_ADD],alpha:kn[qt&&qt.alpha||X.FUNC_ADD]},color:void 0===Sn?[0,0,0,0]:Sn}}}},{key:"initStencilDrawParams",value:function(ze,Je){var gt=ze.stencil;if(gt){var Ke=gt.mask,Sn=gt.func,zn=void 0===Sn?{cmp:X.ALWAYS,ref:0,mask:-1}:Sn,Wn=gt.opFront,kr=void 0===Wn?{fail:X.KEEP,zfail:X.KEEP,zpass:X.KEEP}:Wn,$n=gt.opBack,Er=void 0===$n?{fail:X.KEEP,zfail:X.KEEP,zpass:X.KEEP}:$n;Je.stencil={enable:!!gt.enable,mask:void 0===Ke?-1:Ke,func:je(je({},zn),{},{cmp:cr[zn.cmp]}),opFront:{fail:Bn[kr.fail],zfail:Bn[kr.zfail],zpass:Bn[kr.zpass]},opBack:{fail:Bn[Er.fail],zfail:Bn[Er.zfail],zpass:Bn[Er.zpass]}}}}},{key:"initCullDrawParams",value:function(ze,Je){var gt=ze.cull;if(gt){var Ke=gt.face;Je.cull={enable:!!gt.enable,face:xr[void 0===Ke?X.BACK:Ke]}}}},{key:"generateDefines",value:function(ze){return Object.keys(ze).map(function(Je){return"#define ".concat(Je," ").concat(Number(ze[Je]))}).join("\n")}}]),R}(),rt=function(){function R(He,ze){x(this,R),this.texture=void 0,this.width=void 0,this.height=void 0;var Je=ze.data,gt=ze.type,an=void 0===gt?X.UNSIGNED_BYTE:gt,Ke=ze.width,qt=ze.height,Sn=ze.flipY,zn=void 0!==Sn&&Sn,Wn=ze.format,kr=void 0===Wn?X.RGBA:Wn,$n=ze.mipmap,Er=void 0!==$n&&$n,Xr=ze.wrapS,Di=void 0===Xr?X.CLAMP_TO_EDGE:Xr,Kt=ze.wrapT,Gn=void 0===Kt?X.CLAMP_TO_EDGE:Kt,hr=ze.aniso,Un=void 0===hr?0:hr,Gr=ze.alignment,br=void 0===Gr?1:Gr,Et=ze.premultiplyAlpha,Oe=void 0!==Et&&Et,st=ze.mag,Ot=void 0===st?X.NEAREST:st,At=ze.min,It=void 0===At?X.NEAREST:At,cn=ze.colorSpace,fn=void 0===cn?X.BROWSER_DEFAULT_WEBGL:cn;this.width=Ke,this.height=qt;var Fn={width:Ke,height:qt,type:Wt[an],format:un[kr],wrapS:Xt[Di],wrapT:Xt[Gn],mag:zt[Ot],min:zt[It],alignment:br,flipY:zn,colorSpace:Tn[fn],premultiplyAlpha:Oe,aniso:Un};Je&&(Fn.data=Je),"number"==typeof Er?Fn.mipmap=Le[Er]:"boolean"==typeof Er&&(Fn.mipmap=Er),this.texture=He.texture(Fn)}return b(R,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(ze){var Je=ze.width,gt=ze.height;this.texture.resize(Je,gt),this.width=Je,this.height=gt}},{key:"destroy",value:function(){this.texture.destroy()}}]),R}(),it=function(){function R(){var He=this;x(this,R),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var ze=Q(z().mark(function Je(gt){return z().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:if(!gt.uniforms){Ke.next=3;break}return Ke.next=3,Promise.all(Object.keys(gt.uniforms).map(function(){var qt=Q(z().mark(function Sn(zn){return z().wrap(function($n){for(;;)switch($n.prev=$n.next){case 0:if(!gt.uniforms[zn]||void 0===gt.uniforms[zn].load){$n.next=5;break}return $n.next=3,gt.uniforms[zn].load();case 3:gt.uniforms[zn]=$n.sent;case 5:case"end":return $n.stop()}},Sn)}));return function(Sn){return qt.apply(this,arguments)}}()));case 3:return Ke.abrupt("return",new Ge(He.gl,gt));case 4:case"end":return Ke.stop()}},Je)}));return function(Je){return ze.apply(this,arguments)}}(),this.createAttribute=function(ze){return new Ze(He.gl,ze)},this.createBuffer=function(ze){return new jn(He.gl,ze)},this.createElements=function(ze){return new Vr(He.gl,ze)},this.createTexture2D=function(ze){return new rt(He.gl,ze)},this.createFramebuffer=function(ze){return new Ae(He.gl,ze)},this.useFramebuffer=function(ze,Je){He.gl({framebuffer:ze?ze.get():null})(Je)},this.createComputeModel=function(){var ze=Q(z().mark(function Je(gt){return z().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return Ke.abrupt("return",new Wr(He.gl,gt));case 1:case"end":return Ke.stop()}},Je)}));return function(Je){return ze.apply(this,arguments)}}(),this.clear=function(ze){var Ke=ze.framebuffer,qt=void 0===Ke?null:Ke,Sn={color:ze.color,depth:ze.depth,stencil:ze.stencil};Sn.framebuffer=null===qt?qt:qt.get(),He.gl.clear(Sn)},this.setScissor=function(ze){He.gl&&He.gl._gl&&(ze.enable&&ze.box?(He.gl._gl.enable(X.SCISSOR_TEST),He.gl._gl.scissor(ze.box.x,ze.box.y,ze.box.width,ze.box.height)):He.gl._gl.disable(X.SCISSOR_TEST),He.gl._refresh())},this.viewport=function(ze){He.gl&&He.gl._gl&&(He.gl._gl.viewport(ze.x,ze.y,ze.width,ze.height),He.gl._refresh())},this.readPixels=function(ze){var Je=ze.framebuffer,Sn={x:ze.x,y:ze.y,width:ze.width,height:ze.height};return Je&&(Sn.framebuffer=Je.get()),He.gl.read(Sn)},this.getCanvas=function(){return He.$canvas},this.getGLContext=function(){return He.gl._gl},this.destroy=function(){He.gl&&(He.gl.destroy(),He.inited=!1)}}return b(R,[{key:"init",value:(He=Q(z().mark(function Je(gt){return z().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:if(!this.inited){Ke.next=2;break}return Ke.abrupt("return");case 2:return this.$canvas=gt.canvas,Ke.next=5,new Promise(function(qt,Sn){ke()({canvas:gt.canvas,attributes:{alpha:!0,antialias:gt.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(Wn,kr){(Wn||!kr)&&Sn(Wn),qt(kr)}})});case 5:this.gl=Ke.sent,this.inited=!0;case 7:case"end":return Ke.stop()}},Je,this)})),function ze(Je){return He.apply(this,arguments)})},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),R;var He}(),$t=function(){function R(){x(this,R),this.engine=void 0,this.configService=new ae}return b(R,[{key:"setConfig",value:function(ze){this.configService.set(ze)}},{key:"setEngine",value:function(ze){this.engine=ze}},{key:"createEntity",value:function(){return q()}},{key:"createKernel",value:function(ze){var Je=new te(this.engine,this.configService);return Je.setBundle("string"==typeof ze?JSON.parse(ze):ze),Je.init(),Je}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var ze=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Je=new R;return Je.setConfig(ze),Je.setEngine(new it),Je}}]),R}()},7782:(Qt,V,G)=>{"use strict";G.r(V),G.d(V,{Graph:()=>X,GraphWithEvent:()=>Ze,algorithm:()=>B,comparision:()=>j,essence:()=>Q,generate:()=>k});var B={};G.r(B),G.d(B,{components:()=>pt,dfs:()=>ut,dijkstra:()=>Xt,dijkstraAll:()=>gn,findCycles:()=>Bn,floydWarshall:()=>R,isAcyclic:()=>T,postorder:()=>ce,preorder:()=>Ge,prim:()=>yt,tarjan:()=>ir,topsort:()=>Y});var Q={};G.r(Q),G.d(Q,{hasSelfLoop:()=>Un,isGraph:()=>Kt,isNullGraph:()=>hr,isSimpleGraph:()=>Gn});var j={};G.r(j),G.d(j,{containAllSameEdges:()=>qt,containAllSameNodes:()=>Ke,containSameEdges:()=>ze,containSameNodes:()=>He,getSameEdges:()=>gt,getSameNodes:()=>Je,isGraphComplement:()=>Gr,isGraphContainsAnother:()=>zn,isGraphOptionSame:()=>an,isGraphSame:()=>Sn});var k={};G.r(k),G.d(k,{getGraphComplement:()=>br});var F=(()=>{return(Et=F||(F={})).DEFAULT_EDGE_NAME="\0",Et.GRAPH_NODE="\0",Et.EDGE_KEY_DELIM="\x01",F;var Et})();function I(Et,Oe){var st=Et.get(Oe)||0;Et.set(Oe,st+1)}function x(Et,Oe){var st=Et.get(Oe);void 0!==st&&((st-=1)>0?Et.set(Oe,st):Et.delete(Oe))}function E(Et,Oe,st,Ot){var At=String(Oe),It=String(st);if(!Et&&At>It){var cn=At;At=It,It=cn}return At+F.EDGE_KEY_DELIM+It+F.EDGE_KEY_DELIM+(void 0===Ot?F.DEFAULT_EDGE_NAME:Ot)}function b(Et,Oe,st,Ot){var At=String(Oe),It=String(st),cn={v:Oe,w:st};if(!Et&&At>It){var fn=cn.v;cn.v=cn.w,cn.w=fn}return void 0!==Ot&&(cn.name=Ot),cn}function w(Et,Oe){return E(Et,Oe.v,Oe.w,Oe.name)}function y(Et){return"function"==typeof Et}var A=function(Oe){return Oe.nodes().map(function(st){var It={id:st,value:Oe.node(st),parent:Oe.parent(st)};return void 0===It.value&&delete It.value,void 0===It.parent&&delete It.parent,It})},M=function(Oe){return Oe.edges().map(function(st){var Ot=Oe.edge(st),At={v:st.v,w:st.w,value:Ot,name:st.name};return void 0===At.name&&delete At.name,void 0===At.value&&delete At.value,At})},S=function(Oe){var st={options:{directed:Oe.isDirected(),multigraph:Oe.isMultigraph(),compound:Oe.isCompound()},nodes:A(Oe),edges:M(Oe),value:Oe.graph()};return void 0===st.value&&delete st.value,st};function U(Et,Oe){var st=Object.keys(Et);if(Object.getOwnPropertySymbols){var Ot=Object.getOwnPropertySymbols(Et);Oe&&(Ot=Ot.filter(function(At){return Object.getOwnPropertyDescriptor(Et,At).enumerable})),st.push.apply(st,Ot)}return st}function z(Et){for(var Oe=1;Oe<arguments.length;Oe++){var st=null!=arguments[Oe]?arguments[Oe]:{};Oe%2?U(Object(st),!0).forEach(function(Ot){ie(Et,Ot,st[Ot])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Et,Object.getOwnPropertyDescriptors(st)):U(Object(st)).forEach(function(Ot){Object.defineProperty(Et,Ot,Object.getOwnPropertyDescriptor(st,Ot))})}return Et}function ie(Et,Oe,st){return Oe in Et?Object.defineProperty(Et,Oe,{value:st,enumerable:!0,configurable:!0,writable:!0}):Et[Oe]=st,Et}function ne(Et,Oe){if(!(Et instanceof Oe))throw new TypeError("Cannot call a class as a function")}function q(Et,Oe){for(var st=0;st<Oe.length;st++){var Ot=Oe[st];Ot.enumerable=Ot.enumerable||!1,Ot.configurable=!0,"value"in Ot&&(Ot.writable=!0),Object.defineProperty(Et,Ot.key,Ot)}}var ee={compound:!1,multigraph:!1,directed:!0},X=function(){function Et(){var Oe=this,st=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ne(this,Et),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=F.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return Oe.directed},this.isMultigraph=function(){return Oe.multigraph},this.isCompound=function(){return Oe.compound},this.setGraph=function(At){return Oe.label=At,Oe},this.graph=function(){return Oe.label},this.setDefaultNodeLabel=function(At){return Oe.defaultNodeLabelFn=y(At)?At:function(){return At},Oe},this.nodeCount=function(){return Oe.nodeCountNum},this.node=function(At){return Oe.nodesLabelMap.get(At)},this.nodes=function(){return Array.from(Oe.nodesLabelMap.keys())},this.sources=function(){return Oe.nodes().filter(function(At){var It;return!(null!==(It=Oe.inEdgesMap.get(At))&&void 0!==It&&It.size)})},this.sinks=function(){return Oe.nodes().filter(function(At){var It;return!(null!==(It=Oe.outEdgesMap.get(At))&&void 0!==It&&It.size)})},this.setNodes=function(At,It){return At.map(function(cn){return Oe.setNode(cn,It)}),Oe},this.hasNode=function(At){return Oe.nodesLabelMap.has(At)},this.checkCompound=function(){if(!Oe.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(At){if(Oe.isCompound()){var It,cn=null===(It=Oe.parentMap)||void 0===It?void 0:It.get(At);if(cn!==Oe.GRAPH_NODE)return cn}},this.removeFromParentsChildList=function(At){var It=Oe.parentMap.get(At);Oe.childrenMap.get(It).delete(At)},this.setParent=function(At,It){var cn,fn;Oe.checkCompound();for(var Fn=void 0===It?Oe.GRAPH_NODE:It,Or=Oe.parent(Fn);Or;){if(At===Or)throw new Error("Setting "+It+" as parent of "+At+" would create a cycle");Or=Oe.parent(Or)}It&&Oe.setNode(It),Oe.setNode(At),Oe.removeFromParentsChildList(At),null===(cn=Oe.parentMap)||void 0===cn||cn.set(At,Fn);var Dr=Oe.childrenMap.get(Fn);return Dr.set(At,!0),null===(fn=Oe.childrenMap)||void 0===fn||fn.set(Fn,Dr),Oe},this.children=function(At){var It=void 0===At?Oe.GRAPH_NODE:At;if(Oe.isCompound()){var cn,fn=null===(cn=Oe.childrenMap)||void 0===cn?void 0:cn.get(It);return fn?Array.from(fn.keys()):void 0}return It===Oe.GRAPH_NODE?Oe.nodes():At&&Oe.hasNode(At)?[]:void 0},this.predecessors=function(At){var It=Oe.predecessorsMap.get(At);return It?Array.from(It.keys()):void 0},this.successors=function(At){var It=Oe.successorsMap.get(At);return It?Array.from(It.keys()):void 0},this.neighbors=function(At){var It;if(Oe.hasNode(At))return Array.from(new Set(null===(It=Oe.predecessors(At))||void 0===It?void 0:It.concat(Oe.successors(At))))},this.isLeaf=function(At){var It,cn;return Oe.isDirected()?!(null!==(cn=Oe.successors(At))&&void 0!==cn&&cn.length):!(null!==(It=Oe.neighbors(At))&&void 0!==It&&It.length)},this.filterNodes=function(At){var fn=Oe.compound,Fn=new Et({directed:Oe.directed,multigraph:Oe.multigraph,compound:fn});return Fn.setGraph(Oe.graph()),Oe.nodes().forEach(function(Dr){At(Dr)&&Fn.setNode(Dr,Oe.node(Dr))}),Oe.edges().forEach(function(Dr){Fn.hasNode(Dr.v)&&Fn.hasNode(Dr.w)&&Fn.setEdgeObj(Dr,Oe.edge(Dr))}),fn&&Fn.nodes().forEach(function(Dr){Fn.setParent(Dr,function(Qn){for(var xi=Oe.parent(Qn);void 0!==xi&&!Fn.hasNode(xi);)xi=Oe.parent(xi);return xi}(Dr))}),Fn},this.setDefaultEdgeLabel=function(At){return Oe.defaultEdgeLabelFn=y(At)?At:function(){return At},Oe},this.edgeCount=function(){return Oe.edgeCountNum},this.setEdgeObj=function(At,It){return Oe.setEdge(At.v,At.w,It,At.name)},this.setPath=function(At,It){return At.reduce(function(cn,fn){return Oe.setEdge(cn,fn,It),fn}),Oe},this.edgeFromArgs=function(At,It,cn){return Oe.edge({v:At,w:It,name:cn})},this.edge=function(At){return Oe.edgesLabelsMap.get(w(Oe.isDirected(),At))},this.hasEdge=function(At,It,cn){return Oe.edgesLabelsMap.has(w(Oe.isDirected(),{v:At,w:It,name:cn}))},this.removeEdgeObj=function(At){return Oe.removeEdge(At.v,At.w,At.name)},this.edges=function(){return Array.from(Oe.edgesMap.values())},this.inEdges=function(At,It){var cn=Oe.inEdgesMap.get(At);if(cn)return Array.from(cn.values()).filter(function(fn){return!It||fn.v===It})},this.outEdges=function(At,It){var cn=Oe.outEdgesMap.get(At);if(cn)return Array.from(cn.values()).filter(function(fn){return!It||fn.w===It})},this.nodeEdges=function(At,It){var cn;if(Oe.hasNode(At))return null===(cn=Oe.inEdges(At,It))||void 0===cn?void 0:cn.concat(Oe.outEdges(At,It))},this.toJSON=function(){return S(Oe)},this.nodeInDegree=function(At){var It=Oe.inEdgesMap.get(At);return It?It.size:0},this.nodeOutDegree=function(At){var It=Oe.outEdgesMap.get(At);return It?It.size:0},this.nodeDegree=function(At){return Oe.nodeInDegree(At)+Oe.nodeOutDegree(At)},this.source=function(At){return At.v},this.target=function(At){return At.w};var Ot=z(z({},ee),st);this.compound=Ot.compound,this.directed=Ot.directed,this.multigraph=Ot.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return function K(Et,Oe,st){Oe&&q(Et.prototype,Oe),st&&q(Et,st),Object.defineProperty(Et,"prototype",{writable:!1})}(Et,[{key:"setNode",value:function(st,Ot){var eo,At=this.nodesLabelMap,It=this.defaultNodeLabelFn,cn=this.isCompound,fn=this.parentMap,Fn=this.childrenMap,Or=this.inEdgesMap,Dr=this.outEdgesMap,Qn=this.predecessorsMap,xi=this.successorsMap;return At.has(st)?(void 0!==Ot&&At.set(st,Ot),this):(At.set(st,Ot||It(st)),cn()&&(fn?.set(st,this.GRAPH_NODE),Fn?.set(st,new Map),Fn?.has(this.GRAPH_NODE)||Fn?.set(this.GRAPH_NODE,new Map),null==Fn||null===(eo=Fn.get(this.GRAPH_NODE))||void 0===eo||eo.set(st,!0)),[Or,Dr,Qn,xi].forEach(function(dr){return dr.set(st,new Map)}),this.nodeCountNum+=1,this)}},{key:"removeNode",value:function(st){var Ot=this;if(this.hasNode(st)){var Dr,Qn,xi,At=function(Br){Ot.removeEdge(Br.v,Br.w,Br.name)},It=this.inEdgesMap,cn=this.outEdgesMap,fn=this.predecessorsMap,Fn=this.successorsMap,Or=this.nodesLabelMap;this.isCompound()&&(this.removeFromParentsChildList(st),null===(Dr=this.parentMap)||void 0===Dr||Dr.delete(st),null===(Qn=this.children(st))||void 0===Qn||Qn.forEach(function(Eo){return Ot.setParent(Eo)}),null===(xi=this.childrenMap)||void 0===xi||xi.delete(st));var eo=It.get(st),dr=cn.get(st);Array.from(eo.values()).forEach(function(Eo){return At(Eo)}),Array.from(dr.values()).forEach(function(Eo){return At(Eo)}),Or.delete(st),It.delete(st),cn.delete(st),fn.delete(st),Fn.delete(st),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(st,Ot,At,It){var cn,fn,Fn=b(this.isDirected(),st,Ot,It),Or=w(this.isDirected(),Fn),Dr=Fn.v,Qn=Fn.w;if(this.edgesLabelsMap.has(Or))return this.edgesLabelsMap.set(Or,At),this;if(void 0!==It&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(Dr),this.setNode(Qn),this.edgesLabelsMap.set(Or,At||this.defaultEdgeLabelFn(Dr,Qn,It)),Object.freeze(Fn),this.edgesMap.set(Or,Fn);var xi=this.predecessorsMap.get(Qn),eo=this.successorsMap.get(Dr);return I(xi,Dr),I(eo,Qn),null===(cn=this.inEdgesMap.get(Qn))||void 0===cn||cn.set(Or,Fn),null===(fn=this.outEdgesMap.get(Dr))||void 0===fn||fn.set(Or,Fn),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(st,Ot,At){var It=E(this.isDirected(),st,Ot,At);if(this.edgesMap.get(It)){var fn=b(this.isDirected(),st,Ot,At),Fn=fn.v,Or=fn.w;this.edgesLabelsMap.delete(It),this.edgesMap.delete(It);var Dr=this.predecessorsMap.get(Or),Qn=this.successorsMap.get(Fn);x(Dr,Fn),x(Qn,Or),this.inEdgesMap.get(Or).delete(It),this.outEdgesMap.get(Fn).delete(It),this.edgeCountNum-=1}return this}}]),Et}();function ae(Et){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Oe){return typeof Oe}:function(Oe){return Oe&&"function"==typeof Symbol&&Oe.constructor===Symbol&&Oe!==Symbol.prototype?"symbol":typeof Oe})(Et)}function re(Et,Oe){if(!(Et instanceof Oe))throw new TypeError("Cannot call a class as a function")}function oe(Et,Oe){for(var st=0;st<Oe.length;st++){var Ot=Oe[st];Ot.enumerable=Ot.enumerable||!1,Ot.configurable=!0,"value"in Ot&&(Ot.writable=!0),Object.defineProperty(Et,Ot.key,Ot)}}function we(){return we=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(Oe,st,Ot){var At=_e(Oe,st);if(At){var It=Object.getOwnPropertyDescriptor(At,st);return It.get?It.get.call(arguments.length<3?Oe:Ot):It.value}},we.apply(this,arguments)}function _e(Et,Oe){for(;!Object.prototype.hasOwnProperty.call(Et,Oe)&&null!==(Et=ke(Et)););return Et}function Ce(Et,Oe){return(Ce=Object.setPrototypeOf||function(Ot,At){return Ot.__proto__=At,Ot})(Et,Oe)}function be(Et,Oe){if(Oe&&("object"===ae(Oe)||"function"==typeof Oe))return Oe;if(void 0!==Oe)throw new TypeError("Derived constructors may only return object or undefined");return function te(Et){if(void 0===Et)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Et}(Et)}function ke(Et){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(st){return st.__proto__||Object.getPrototypeOf(st)})(Et)}X.fromJSON=function(Oe){var st=new X(Oe.options);return void 0!==Oe.value&&st.setGraph(Oe.value),Oe.nodes.forEach(function(Ot){st.setNode(Ot.id,Ot.value),Ot.parent&&st.setParent(Ot.id,Ot.parent)}),Oe.edges.forEach(function(Ot){st.setEdge(Ot.v,Ot.w,Ot.value,Ot.name)}),st};var Ze=function(Et){!function me(Et,Oe){if("function"!=typeof Oe&&null!==Oe)throw new TypeError("Super expression must either be null or a function");Et.prototype=Object.create(Oe&&Oe.prototype,{constructor:{value:Et,writable:!0,configurable:!0}}),Object.defineProperty(Et,"prototype",{writable:!1}),Oe&&Ce(Et,Oe)}(st,Et);var Oe=function fe(Et){var Oe=function de(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var At,Ot=ke(Et);if(Oe){var It=ke(this).constructor;At=Reflect.construct(Ot,arguments,It)}else At=Ot.apply(this,arguments);return be(this,At)}}(st);function st(){var Ot;re(this,st);for(var At=arguments.length,It=new Array(At),cn=0;cn<At;cn++)It[cn]=arguments[cn];return(Ot=Oe.call.apply(Oe,[this].concat(It))).eventPool={},Ot}return function ve(Et,Oe,st){Oe&&oe(Et.prototype,Oe),st&&oe(Et,st),Object.defineProperty(Et,"prototype",{writable:!1})}(st,[{key:"appendEvent",value:function(At,It){this.eventPool[At]||(this.eventPool[At]=[]),this.eventPool[At].push(It)}},{key:"removeEvent",value:function(At,It){if(this.eventPool[At]){var cn=this.eventPool[At].indexOf(It);cn>-1&&this.eventPool[At].splice(cn,1)}}},{key:"emitEvent",value:function(At){for(var It=arguments.length,cn=new Array(It>1?It-1:0),fn=1;fn<It;fn++)cn[fn-1]=arguments[fn];!this.eventPool[At]||this.eventPool[At].forEach(function(Fn){Fn.apply(void 0,cn)})}},{key:"setNode",value:function(At,It){return we(ke(st.prototype),"setNode",this).call(this,At,It),this.emitEvent("nodeAdd",At,It),this}},{key:"removeNode",value:function(At){return we(ke(st.prototype),"removeNode",this).call(this,At),this.emitEvent("nodeRemove",At),this}},{key:"setEdge",value:function(At,It,cn,fn){return we(ke(st.prototype),"setEdge",this).call(this,At,It,cn,fn),this.emitEvent("edgeAdd",At,It,cn,fn),this}},{key:"removeEdge",value:function(At,It,cn){return we(ke(st.prototype),"removeEdge",this).call(this,At,It,cn),this.emitEvent("edgeRemove",At,It,cn),this}}]),st}(X);function We(Et,Oe){for(var st=0;st<Oe.length;st++){var Ot=Oe[st];Ot.enumerable=Ot.enumerable||!1,Ot.configurable=!0,"value"in Ot&&(Ot.writable=!0),Object.defineProperty(Et,Ot.key,Ot)}}function bt(Et,Oe,st){return Oe&&We(Et.prototype,Oe),st&&We(Et,st),Object.defineProperty(Et,"prototype",{writable:!1}),Et}var Pt=bt(function Et(){var Oe=this;(function Ft(Et,Oe){if(!(Et instanceof Oe))throw new TypeError("Cannot call a class as a function")})(this,Et),this.arr=[],this.keyIndice=new Map,this.size=function(){return Oe.arr.length},this.keys=function(){return Oe.arr.map(function(st){return st.key})},this.has=function(st){return Oe.keyIndice.has(st)},this.priority=function(st){var Ot=Oe.keyIndice.get(st);if(void 0!==Ot)return Oe.arr[Ot].priority},this.swap=function(st,Ot){var At=Oe.arr,It=Oe.keyIndice,cn=[At[st],At[Ot]],fn=cn[0],Fn=cn[1];At[st]=Fn,At[Ot]=fn,It.set(fn.key,Ot),It.set(Fn.key,st)},this.innerDecrease=function(st){for(var It,Ot=Oe.arr,At=Ot[st].priority,cn=st;0!==cn;){var fn;if((null===(fn=Ot[It=cn>>1])||void 0===fn?void 0:fn.priority)<At)break;Oe.swap(cn,It),cn=It}},this.heapify=function(st){var Ot=Oe.arr,At=st<<1,It=At+1,cn=st;At<Ot.length&&(cn=Ot[At].priority<Ot[cn].priority?At:cn,It<Ot.length&&(cn=Ot[It].priority<Ot[cn].priority?It:cn),cn!==st&&(Oe.swap(st,cn),Oe.heapify(cn)))},this.min=function(){if(0===Oe.size())throw new Error("Queue underflow");return Oe.arr[0].key},this.add=function(st,Ot){var At=Oe.keyIndice,It=Oe.arr;if(!At.has(st)){var cn=It.length;return At.set(st,cn),It.push({key:st,priority:Ot}),Oe.innerDecrease(cn),!0}return!1},this.removeMin=function(){Oe.swap(0,Oe.arr.length-1);var st=Oe.arr.pop();return Oe.keyIndice.delete(st.key),Oe.heapify(0),st.key},this.decrease=function(st,Ot){if(!Oe.has(st))throw new Error("There's no key named ".concat(st));var At=Oe.keyIndice.get(st);if(Ot>Oe.arr[At].priority)throw new Error("New priority is greater than current priority.Key: ".concat(st," Old: + ").concat(Oe.arr[At].priority," New: ").concat(Ot));Oe.arr[At].priority=Ot,Oe.innerDecrease(At)}});const yt=function(Oe,st){var cn,Ot=new X,At=new Map,It=new Pt;function fn(Dr){var Qn=Dr.v===cn?Dr.w:Dr.v,xi=It.priority(Qn);if(void 0!==xi){var eo=st(Dr);eo<xi&&(At.set(Qn,cn),It.decrease(Qn,eo))}}if(0===Oe.nodeCount())return Ot;Oe.nodes().forEach(function(Dr){It.add(Dr,Number.POSITIVE_INFINITY),Ot.setNode(Dr)}),It.decrease(Oe.nodes()[0],0);for(var Fn=!1;It.size()>0;){var Or;if(cn=It.removeMin(),At.has(cn))Ot.setEdge(cn,At.get(cn));else{if(Fn)throw new Error("Input graph is not connected: "+Oe.graph());Fn=!0}null===(Or=Oe.nodeEdges(cn))||void 0===Or||Or.forEach(fn)}return Ot},pt=function(Oe){var st=new Set,Ot=[];return Oe.nodes().forEach(function(It){for(var cn=[],fn=[It];fn.length>0;){var Or,Dr,Fn=fn.pop();st.has(Fn)||(st.add(Fn),cn.push(Fn),null===(Or=Oe.successors(Fn))||void 0===Or||Or.forEach(function(Qn){return fn.push(Qn)}),null===(Dr=Oe.predecessors(Fn))||void 0===Dr||Dr.forEach(function(Qn){return fn.push(Qn)}))}cn.length&&Ot.push(cn)}),Ot};var xt=function Et(Oe,st,Ot,At,It,cn){At.includes(st)||(At.push(st),Ot||cn.push(st),It(st).forEach(function(fn){return Et(Oe,fn,Ot,At,It,cn)}),Ot&&cn.push(st))};const ut=function(Oe,st,Ot){var At=Array.isArray(st)?st:[st],It=function(Or){return Oe.isDirected()?Oe.successors(Or):Oe.neighbors(Or)},cn=[],fn=[];return At.forEach(function(Fn){if(!Oe.hasNode(Fn))throw new Error("Graph does not have node: "+Fn);xt(Oe,Fn,"post"===Ot,fn,It,cn)}),cn};function tt(Et,Oe){(null==Oe||Oe>Et.length)&&(Oe=Et.length);for(var st=0,Ot=new Array(Oe);st<Oe;st++)Ot[st]=Et[st];return Ot}var un=function(){return 1},zt=function(Oe,st,Ot,At){var fn,Fn,It=new Map,cn=new Pt,Or=function(xi){var eo=xi.v!==fn?xi.v:xi.w,dr=It.get(eo),Eo=Ot(xi),Br=Fn.distance+Eo;if(Eo<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+xi+" Weight: "+Eo);Br<dr.distance&&(dr.distance=Br,dr.predecessor=fn,cn.decrease(eo,Br))};for(Oe.nodes().forEach(function(Qn){var xi=Qn===st?0:Number.POSITIVE_INFINITY;It.set(Qn,{distance:xi}),cn.add(Qn,xi)});cn.size()>0&&(fn=cn.removeMin(),!(Fn=It.get(fn))||Fn.distance!==Number.POSITIVE_INFINITY);)At(fn).forEach(Or);var Dr={};return Array.from(It.entries()).forEach(function(Qn){var xi=function Ut(Et,Oe){return function Wt(Et){if(Array.isArray(Et))return Et}(Et)||function Mt(Et,Oe){var st=null==Et?null:typeof Symbol<"u"&&Et[Symbol.iterator]||Et["@@iterator"];if(null!=st){var cn,fn,Ot=[],At=!0,It=!1;try{for(st=st.call(Et);!(At=(cn=st.next()).done)&&(Ot.push(cn.value),!Oe||Ot.length!==Oe);At=!0);}catch(Fn){It=!0,fn=Fn}finally{try{!At&&null!=st.return&&st.return()}finally{if(It)throw fn}}return Ot}}(Et,Oe)||function Te(Et,Oe){if(Et){if("string"==typeof Et)return tt(Et,Oe);var st=Object.prototype.toString.call(Et).slice(8,-1);if("Object"===st&&Et.constructor&&(st=Et.constructor.name),"Map"===st||"Set"===st)return Array.from(Et);if("Arguments"===st||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(st))return tt(Et,Oe)}}(Et,Oe)||function $e(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Qn,2),dr=xi[1];return Dr[String(xi[0])]=dr,Dr}),Dr};const Xt=function(Oe,st,Ot,At){return zt(Oe,st,Ot||un,At||function(It){return Oe.outEdges(It)})},gn=function(Oe,st,Ot){var At={};return Oe.nodes().forEach(function(It){return At[String(It)]=Xt(Oe,It,st,Ot),At}),At},ir=function(Oe){var st=0,Ot=[],At=new Map,It=[];function cn(fn){var Fn,Or={onStack:!0,lowlink:st,index:st};if(At.set(fn,Or),st+=1,Ot.push(fn),null===(Fn=Oe.successors(fn))||void 0===Fn||Fn.forEach(function(eo){var dr;if(At.has(eo)){if(null!==(dr=At.get(eo))&&void 0!==dr&&dr.onStack){var Br=At.get(eo);Or.lowlink=Math.min(Or.lowlink,Br.index)}}else{cn(eo);var Eo=At.get(eo);Or.lowlink=Math.min(Or.lowlink,Eo.lowlink)}}),Or.lowlink===Or.index){var Qn,Dr=[];do{Qn=Ot.pop(),At.get(Qn).onStack=!1,Dr.push(Qn)}while(fn!==Qn);It.push(Dr)}}return Oe.nodes().forEach(function(fn){At.has(fn)||cn(fn)}),It},Bn=function(Oe){return ir(Oe).filter(function(st){return st.length>1||1===st.length&&Oe.hasEdge(st[0],st[0])})};function xr(Et){return(xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Oe){return typeof Oe}:function(Oe){return Oe&&"function"==typeof Symbol&&Oe.constructor===Symbol&&Oe!==Symbol.prototype?"symbol":typeof Oe})(Et)}function jn(Et,Oe){for(var st=0;st<Oe.length;st++){var Ot=Oe[st];Ot.enumerable=Ot.enumerable||!1,Ot.configurable=!0,"value"in Ot&&(Ot.writable=!0),Object.defineProperty(Et,Ot.key,Ot)}}function er(Et,Oe){if(!(Et instanceof Oe))throw new TypeError("Cannot call a class as a function")}function gr(Et,Oe){if(Oe&&("object"===xr(Oe)||"function"==typeof Oe))return Oe;if(void 0!==Oe)throw new TypeError("Derived constructors may only return object or undefined");return function Oi(Et){if(void 0===Et)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Et}(Et)}function Ir(Et){var Oe="function"==typeof Map?new Map:void 0;return Ir=function(Ot){if(null===Ot||!function xo(Et){return-1!==Function.toString.call(Et).indexOf("[native code]")}(Ot))return Ot;if("function"!=typeof Ot)throw new TypeError("Super expression must either be null or a function");if(typeof Oe<"u"){if(Oe.has(Ot))return Oe.get(Ot);Oe.set(Ot,At)}function At(){return De(Ot,arguments,Wr(this).constructor)}return At.prototype=Object.create(Ot.prototype,{constructor:{value:At,enumerable:!1,writable:!0,configurable:!0}}),mr(At,Ot)},Ir(Et)}function De(Et,Oe,st){return(De=wi()?Reflect.construct:function(At,It,cn){var fn=[null];fn.push.apply(fn,It);var Or=new(Function.bind.apply(At,fn));return cn&&mr(Or,cn.prototype),Or}).apply(null,arguments)}function wi(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function mr(Et,Oe){return(mr=Object.setPrototypeOf||function(Ot,At){return Ot.__proto__=At,Ot})(Et,Oe)}function Wr(Et){return(Wr=Object.setPrototypeOf?Object.getPrototypeOf:function(st){return st.__proto__||Object.getPrototypeOf(st)})(Et)}var Vr=function(Et){!function Mr(Et,Oe){if("function"!=typeof Oe&&null!==Oe)throw new TypeError("Super expression must either be null or a function");Et.prototype=Object.create(Oe&&Oe.prototype,{constructor:{value:Et,writable:!0,configurable:!0}}),Object.defineProperty(Et,"prototype",{writable:!1}),Oe&&mr(Et,Oe)}(st,Et);var Oe=function yr(Et){var Oe=wi();return function(){var At,Ot=Wr(Et);if(Oe){var It=Wr(this).constructor;At=Reflect.construct(Ot,arguments,It)}else At=Ot.apply(this,arguments);return gr(this,At)}}(st);function st(){return er(this,st),Oe.apply(this,arguments)}return function Rn(Et,Oe,st){return Oe&&jn(Et.prototype,Oe),st&&jn(Et,st),Object.defineProperty(Et,"prototype",{writable:!1}),Et}(st)}(Ir(Error));const Y=function Ae(Et){var Oe=new Set,st=new Set,Ot=[];if(Et.sinks().forEach(function At(It){if(st.has(It))throw new Vr;var cn;Oe.has(It)||(st.add(It),Oe.add(It),null===(cn=Et.predecessors(It))||void 0===cn||cn.forEach(At),st.delete(It),Ot.push(It))}),Oe.size!==Et.nodeCount())throw new Vr;return Ot},T=function(Oe){try{Y(Oe)}catch(st){if(st instanceof Vr)return!1;throw st}return!0},ce=function(Oe,st){return ut(Oe,st,"post")},Ge=function(Oe,st){return ut(Oe,st,"pre")};var rt=function(){return 1};const R=function it(Et,Oe,st){return function $t(Et,Oe,st){var Ot={},At=Et.nodes();return At.forEach(function(It){var cn=String(It);Ot[cn]={},Ot[cn][cn]={distance:0},At.forEach(function(fn){It!==fn&&(Ot[cn][String(fn)]={distance:Number.POSITIVE_INFINITY})}),st(It).forEach(function(fn){var Fn=fn.v===It?fn.w:fn.v,Or=Oe(fn);Ot[cn][String(Fn)]={distance:Or,predecessor:It}})}),At.forEach(function(It){var cn=String(It),fn=Ot[cn];At.forEach(function(Fn){var Or=String(Fn),Dr=Ot[Or];At.forEach(function(Qn){var xi=String(Qn),dr=fn[xi],Eo=Dr[xi],Br=Dr[cn].distance+dr.distance;Br<Eo.distance&&(Eo.distance=Br,Eo.predecessor=dr.predecessor)})})}),Ot}(Et,Oe||rt,st||function(Ot){return Et.outEdges(Ot)})};var He=function(Oe,st){for(var Ot=Oe.nodes(),At=0;At<Ot.length;At++)if(st.hasNode(Ot[At]))return!0;return!1},ze=function(Oe,st){for(var Ot=Oe.edges(),At=0;At<Ot.length;At++){var It=Ot[At];if(st.hasEdge(It.v,It.w,It.name))return!0}return!1},Je=function(Oe,st){return Oe.nodes().filter(function(It){return st.hasNode(It)})},gt=function(Oe,st){return Oe.edges().filter(function(It){return st.hasEdge(It.v,It.w,It.name)})},an=function(Oe,st){return Oe.isCompound()===st.isCompound()&&Oe.isDirected()===st.isDirected()&&Oe.isMultigraph()===st.isMultigraph()},Ke=function(Oe,st){return Je(Oe,st).length===Oe.nodes().length},qt=function(Oe,st){return gt(Oe,st).length===Oe.edges().length},Sn=function(Oe,st){return an(Oe,st)&&Oe.nodeCount()===st.nodeCount()&&Ke(Oe,st)&&Oe.edgeCount()===st.edgeCount()&&qt(Oe,st)},zn=function(Oe,st){return Ke(Oe,st)&&qt(Oe,st)};function Wn(Et,Oe){return function Di(Et){if(Array.isArray(Et))return Et}(Et)||function Xr(Et,Oe){var st=null==Et?null:typeof Symbol<"u"&&Et[Symbol.iterator]||Et["@@iterator"];if(null!=st){var cn,fn,Ot=[],At=!0,It=!1;try{for(st=st.call(Et);!(At=(cn=st.next()).done)&&(Ot.push(cn.value),!Oe||Ot.length!==Oe);At=!0);}catch(Fn){It=!0,fn=Fn}finally{try{!At&&null!=st.return&&st.return()}finally{if(It)throw fn}}return Ot}}(Et,Oe)||function $n(Et,Oe){if(Et){if("string"==typeof Et)return Er(Et,Oe);var st=Object.prototype.toString.call(Et).slice(8,-1);if("Object"===st&&Et.constructor&&(st=Et.constructor.name),"Map"===st||"Set"===st)return Array.from(Et);if("Arguments"===st||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(st))return Er(Et,Oe)}}(Et,Oe)||function kr(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Er(Et,Oe){(null==Oe||Oe>Et.length)&&(Oe=Et.length);for(var st=0,Ot=new Array(Oe);st<Oe;st++)Ot[st]=Et[st];return Ot}function Kt(Et){return Et instanceof X}function Gn(Et){if(Et.isMultigraph())return!1;for(var Oe=Et.edges(),st=new Map,Ot=0;Ot<Oe.length;Ot++){var At=Oe[Ot];if(At.v===At.w)return!1;var cn=Wn([At.v,At.w].sort(),2),Fn=cn[1],Or="".concat(cn[0],"-").concat(Fn);if(st.has(Or))return!1;st.set(Or,!0)}return!0}function hr(Et){return 0===Et.nodes().length}function Un(Et){for(var Oe=Et.edges(),st=0;st<Oe.length;st++){var Ot=Oe[st];if(Ot.v===Ot.w)return!0}return!1}var Gr=function(Oe,st){if(!Gn(Oe)||!Gn(st)||!Ke(Oe,st)||ze(Oe,st))return!1;var Ot=Oe.nodeCount();return Oe.edgeCount()+st.edgeCount()===Ot*(Ot-1)/2},br=function(Oe){if(!Gn(Oe))return null;for(var st=Oe.nodeCount(),Ot=new X({compound:Oe.isCompound(),directed:Oe.isDirected(),multigraph:Oe.isMultigraph()}),At=Oe.nodes(),It=0;It<st;It++){var cn=At[It];Ot.setNode(cn,Oe.node(cn));for(var fn=It+1;fn<st;fn++){var Fn=At[fn];Oe.hasEdge(cn,Fn)||Ot.setEdge(cn,Fn)}}return Ot}},1983:function(Qt){typeof self<"u"&&self,Qt.exports=function(V){var G={};function B(Q){if(G[Q])return G[Q].exports;var j=G[Q]={i:Q,l:!1,exports:{}};return V[Q].call(j.exports,j,j.exports,B),j.l=!0,j.exports}return B.m=V,B.c=G,B.d=function(Q,j,k){B.o(Q,j)||Object.defineProperty(Q,j,{configurable:!1,enumerable:!0,get:k})},B.n=function(Q){var j=Q&&Q.__esModule?function(){return Q.default}:function(){return Q};return B.d(j,"a",j),j},B.o=function(Q,j){return Object.prototype.hasOwnProperty.call(Q,j)},B.p="",B(B.s=36)}([function(V,G,B){"use strict";var Q=B(3);G.a=function(j){return Array.isArray?Array.isArray(j):Object(Q.a)(j,"Array")}},function(V,G,B){"use strict";G.a=function(j){return null!==j&&"function"!=typeof j&&isFinite(j.length)}},function(V,G,B){"use strict";var Q=B(3);G.a=function(j){return Object(Q.a)(j,"Function")}},function(V,G,B){"use strict";var Q={}.toString;G.a=function(k,F){return Q.call(k)==="[object "+F+"]"}},function(V,G,B){"use strict";var Q=B(3);G.a=function(j){return Object(Q.a)(j,"String")}},function(V,G,B){"use strict";var Q=B(3);G.a=function(k){return Object(Q.a)(k,"Number")}},function(V,G,B){var Q=B(38);V.exports={assign:Q.mix,getHeight:function k(F,I,x,E){return void 0===E&&(E="height"),"center"===x?(F[E]+I[E])/2:F.height}}},function(V,G,B){"use strict";G.a=function(j){return null==j}},function(V,G,B){"use strict";var Q=B(0),j=B(12);G.a=function k(F,I){if(F)if(Object(Q.a)(F))for(var E=0,b=F.length;E<b&&!1!==I(F[E],E);E++);else if(Object(j.a)(F))for(var w in F)if(F.hasOwnProperty(w)&&!1===I(F[w],w))break}},function(V,G,B){"use strict";var Q=B(7);G.a=function(j){return Object(Q.a)(j)?"":j.toString()}},function(V,G,B){"use strict";var Q=B(14),j=B(3);G.a=function(F){if(!Object(Q.a)(F)||!Object(j.a)(F,"Object"))return!1;if(null===Object.getPrototypeOf(F))return!0;for(var I=F;null!==Object.getPrototypeOf(I);)I=Object.getPrototypeOf(I);return Object.getPrototypeOf(F)===I}},function(V,G,B){var Q=B(18);V.exports=function(){function k(I,x){void 0===x&&(x={});this.options=x,this.rootNode=Q(I,x)}return k.prototype.execute=function(){throw new Error("please override this method")},k}()},function(V,G,B){"use strict";G.a=function(Q){var j=typeof Q;return null!==Q&&"object"===j||"function"===j}},function(V,G,B){"use strict";var Q=B(1);G.a=function(k,F){return!!Object(Q.a)(k)&&k.indexOf(F)>-1}},function(V,G,B){"use strict";G.a=function(j){return"object"==typeof j&&null!==j}},function(V,G,B){"use strict";var Q=B(8),j=B(2);G.a=Object.values?function(F){return Object.values(F)}:function(F){var I=[];return Object(Q.a)(F,function(x,E){Object(j.a)(F)&&"prototype"===E||I.push(x)}),I}},function(V,G,B){"use strict";function Q(k,F){for(var I in F)F.hasOwnProperty(I)&&"constructor"!==I&&void 0!==F[I]&&(k[I]=F[I])}G.a=function j(k,F,I,x){return F&&Q(k,F),I&&Q(k,I),x&&Q(k,x),k}},function(V,G,B){var Q=B(35),j=["LR","RL","TB","BT","H","V"],k=["LR","RL","H"],I=j[0];V.exports=function(x,E,b){var w=E.direction||I;if(E.isHorizontal=function(E){return k.indexOf(E)>-1}(w),w&&-1===j.indexOf(w))throw new TypeError("Invalid direction: "+w);if(w===j[0])b(x,E);else if(w===j[1])b(x,E),x.right2left();else if(w===j[2])b(x,E);else if(w===j[3])b(x,E),x.bottom2top();else if(w===j[4]||w===j[5]){var y=Q(x,E),A=y.left,M=y.right;b(A,E),b(M,E),E.isHorizontal?A.right2left():A.bottom2top(),M.translate(A.x-M.x,A.y-M.y),x.x=A.x,x.y=M.y;var S=x.getBoundingBox();E.isHorizontal?S.top<0&&x.translate(0,-S.top):S.left<0&&x.translate(-S.left,0)}var P=E.fixedRoot;return void 0===P&&(P=!0),P&&x.translate(-(x.x+x.width/2+x.hgap),-(x.y+x.height/2+x.vgap)),x}},function(V,G,B){var Q=B(6),I={getId:function(w){return w.id||w.name},getPreH:function(w){return w.preH||0},getPreV:function(w){return w.preV||0},getHGap:function(w){return w.hgap||18},getVGap:function(w){return w.vgap||18},getChildren:function(w){return w.children},getHeight:function(w){return w.height||36},getWidth:function(w){return w.width||18*(w.label||" ").split("").length}};function x(b,w){var y=this;if(y.vgap=y.hgap=0,b instanceof x)return b;y.data=b;var A=w.getHGap(b),M=w.getVGap(b);return y.preH=w.getPreH(b),y.preV=w.getPreV(b),y.width=w.getWidth(b),y.height=w.getHeight(b),y.width+=y.preH,y.height+=y.preV,y.id=w.getId(b),y.x=y.y=0,y.depth=0,y.children||(y.children=[]),y.addGap(A,M),y}Q.assign(x.prototype,{isRoot:function(){return 0===this.depth},isLeaf:function(){return 0===this.children.length},addGap:function(w,y){var A=this;A.hgap+=w,A.vgap+=y,A.width+=2*w,A.height+=2*y},eachNode:function(w){for(var M,A=[this];M=A.shift();)w(M),A=M.children.concat(A)},DFTraverse:function(w){this.eachNode(w)},BFTraverse:function(w){for(var M,A=[this];M=A.shift();)w(M),A=A.concat(M.children)},getBoundingBox:function(){var w={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(y){w.left=Math.min(w.left,y.x),w.top=Math.min(w.top,y.y),w.width=Math.max(w.width,y.x+y.width),w.height=Math.max(w.height,y.y+y.height)}),w},translate:function(w,y){void 0===w&&(w=0),void 0===y&&(y=0),this.eachNode(function(A){A.x+=w,A.y+=y,A.x+=A.preH,A.y+=A.preV})},right2left:function(){var w=this,y=w.getBoundingBox();w.eachNode(function(A){A.x=A.x-2*(A.x-y.left)-A.width}),w.translate(y.width,0)},bottom2top:function(){var w=this,y=w.getBoundingBox();w.eachNode(function(A){A.y=A.y-2*(A.y-y.top)-A.height}),w.translate(0,y.height)}}),V.exports=function E(b,w,y){void 0===w&&(w={});var S,A=new x(b,w=Q.assign({},I,w)),M=[A];if(!y&&!b.collapsed)for(;S=M.shift();)if(!S.data.collapsed){var P=w.getChildren(S.data),U=P?P.length:0;if(S.children=new Array(U),P&&U)for(var z=0;z<U;z++){var ie=new x(P[z],w);S.children[z]=ie,M.push(ie),ie.parent=S,ie.depth=S.depth+1}}return A}},function(V,G,B){"use strict";var Q=B(1);G.a=function(k,F){if(!Object(Q.a)(k))return k;for(var I=[],x=0;x<k.length;x++){var E=k[x];F(E,x)&&I.push(E)}return I}},function(V,G,B){"use strict";var Q=B(7),j=B(21);G.a=function k(F,I){var x=Object(j.a)(I),E=x.length;if(Object(Q.a)(F))return!E;for(var b=0;b<E;b+=1){var w=x[b];if(I[w]!==F[w]||!(w in F))return!1}return!0}},function(V,G,B){"use strict";var Q=B(8),j=B(2);G.a=Object.keys?function(F){return Object.keys(F)}:function(F){var I=[];return Object(Q.a)(F,function(x,E){Object(j.a)(F)&&"prototype"===E||I.push(E)}),I}},function(V,G,B){"use strict";var Q=B(0);G.a=function(j){if(Object(Q.a)(j))return j.reduce(function(k,F){return Math.max(k,F)},j[0])}},function(V,G,B){"use strict";var Q=B(0);G.a=function(j){if(Object(Q.a)(j))return j.reduce(function(k,F){return Math.min(k,F)},j[0])}},function(V,G,B){"use strict";var Q=B(1),j=Array.prototype.splice;G.a=function(I,x){if(!Object(Q.a)(I))return[];for(var E=I?x.length:0,b=E-1;E--;){var w=void 0,y=x[E];(E===b||y!==w)&&(w=y,j.call(I,y,1))}return I}},function(V,G,B){"use strict";var Q=B(8),j=B(0),k=B(10);G.a=function(I,x,E){if(!Object(j.a)(I)&&!Object(k.a)(I))return I;var b=E;return Object(Q.a)(I,function(w,y){b=x(b,w,y)}),b}},function(V,G,B){"use strict";G.a=function Q(j,k){void 0===k&&(k=new Map);var F=[];if(Array.isArray(j))for(var I=0,x=j.length;I<x;I++){var E=j[I];k.has(E)||(F.push(E),k.set(E,!0))}return F}},function(V,G,B){"use strict";G.a=function F(I,x){if(!x)return{0:I};if(!Object(j.a)(x)){var E=Object(Q.a)(x)?x:x.replace(/\s+/g,"").split("*");x=function(b){for(var w="_",y=0,A=E.length;y<A;y++)w+=b[E[y]]&&b[E[y]].toString();return w}}return Object(k.a)(I,x)};var Q=B(0),j=B(2),k=B(28)},function(V,G,B){"use strict";var Q=B(0),j=B(2),k=Object.prototype.hasOwnProperty;G.a=function F(I,x){if(!x||!Object(Q.a)(I))return{};for(var w,E={},b=Object(j.a)(x)?x:function(M){return M[x]},y=0;y<I.length;y++){var A=I[y];w=b(A),k.call(E,w)?E[w].push(A):E[w]=[A]}return E}},function(V,G,B){"use strict";G.a=function(Q,j){return Q.hasOwnProperty(j)}},function(V,G,B){"use strict";var Q={}.toString;G.a=function(k){return Q.call(k).replace(/^\[object /,"").replace(/]$/,"")}},function(V,G,B){"use strict";var Q=Object.prototype;G.a=function(k){var F=k&&k.constructor;return k===("function"==typeof F&&F.prototype||Q)}},function(V,G,B){"use strict";var Q=B(2);G.a=function(j,k){if(!Object(Q.a)(j))throw new TypeError("Expected a function");var F=function(){for(var I=[],x=0;x<arguments.length;x++)I[x]=arguments[x];var E=k?k.apply(this,I):I[0],b=F.cache;if(b.has(E))return b.get(E);var w=j.apply(this,I);return b.set(E,w),w};return F.cache=new Map,F}},function(V,G,B){"use strict";var Q=B(14),j=B(1),k=B(4),F=function(I,x){if(I===x)return!0;if(!I||!x||Object(k.a)(I)||Object(k.a)(x))return!1;if(Object(j.a)(I)||Object(j.a)(x)){if(I.length!==x.length)return!1;for(var E=!0,b=0;b<I.length&&(E=F(I[b],x[b]));b++);return E}if(Object(Q.a)(I)||Object(Q.a)(x)){var w=Object.keys(I),y=Object.keys(x);if(w.length!==y.length)return!1;for(E=!0,b=0;b<w.length&&(E=F(I[w[b]],x[w[b]]));b++);return E}return!1};G.a=F},function(V,G,B){"use strict";var I,Q=B(116),j=B(15),k=B(32),F=B(4);G.a=Object(k.a)(function(x,E){void 0===E&&(E={});var b=E.fontSize,w=E.fontFamily,y=E.fontWeight,A=E.fontStyle,M=E.fontVariant;return I||(I=document.createElement("canvas").getContext("2d")),I.font=[A,M,y,b+"px",w].join(" "),I.measureText(Object(F.a)(x)?x:"").width},function(x,E){return void 0===E&&(E={}),Object(Q.a)([x],Object(j.a)(E)).join("")})},function(V,G,B){var Q=B(18);V.exports=function(j,k){for(var F=Q(j.data,k,!0),I=Q(j.data,k,!0),x=j.children.length,E=Math.round(x/2),b=k.getSide||function(M,S){return S<E?"right":"left"},w=0;w<x;w++){var y=j.children[w];"right"===b(y,w)?I.children.push(y):F.children.push(y)}return F.eachNode(function(M){M.isRoot()||(M.side="left")}),I.eachNode(function(M){M.isRoot()||(M.side="right")}),{left:F,right:I}}},function(V,G,B){var Q={compactBox:B(37),dendrogram:B(120),indented:B(122),mindmap:B(124)};V.exports=Q},function(V,G,B){function Q(y,A){y.prototype=Object.create(A.prototype),y.prototype.constructor=y,j(y,A)}function j(y,A){return(j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(S,P){return S.__proto__=P,S})(y,A)}var k=B(11),F=B(119),I=B(17),x=B(6),E=function(y){function A(){return y.apply(this,arguments)||this}return Q(A,y),A.prototype.execute=function(){return I(this.rootNode,this.options,F)},A}(k),b={};V.exports=function w(y,A){return A=x.assign({},b,A),new E(y,A).execute()}},function(V,G,B){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var Q=B(13);B.d(G,"contains",function(){return Q.a}),B.d(G,"includes",function(){return Q.a});var j=B(39);B.d(G,"difference",function(){return j.a});var k=B(40);B.d(G,"find",function(){return k.a});var F=B(41);B.d(G,"findIndex",function(){return F.a});var I=B(42);B.d(G,"firstValue",function(){return I.a});var x=B(43);B.d(G,"flatten",function(){return x.a});var E=B(44);B.d(G,"flattenDeep",function(){return E.a});var b=B(45);B.d(G,"getRange",function(){return b.a});var w=B(46);B.d(G,"pull",function(){return w.a});var y=B(24);B.d(G,"pullAt",function(){return y.a});var A=B(25);B.d(G,"reduce",function(){return A.a});var M=B(47);B.d(G,"remove",function(){return M.a});var S=B(48);B.d(G,"sortBy",function(){return S.a});var P=B(49);B.d(G,"union",function(){return P.a});var U=B(26);B.d(G,"uniq",function(){return U.a});var z=B(50);B.d(G,"valuesOfKey",function(){return z.a});var ie=B(51);B.d(G,"head",function(){return ie.a});var ne=B(52);B.d(G,"last",function(){return ne.a});var q=B(53);B.d(G,"startsWith",function(){return q.a});var K=B(54);B.d(G,"endsWith",function(){return K.a});var ee=B(19);B.d(G,"filter",function(){return ee.a});var X=B(55);B.d(G,"every",function(){return X.a});var ae=B(56);B.d(G,"some",function(){return ae.a});var re=B(57);B.d(G,"group",function(){return re.a});var oe=B(28);B.d(G,"groupBy",function(){return oe.a});var ve=B(27);B.d(G,"groupToMap",function(){return ve.a});var we=B(58);B.d(G,"getWrapBehavior",function(){return we.a});var _e=B(59);B.d(G,"wrapBehavior",function(){return _e.a});var me=B(60);B.d(G,"number2color",function(){return me.a});var Ce=B(61);B.d(G,"parseRadius",function(){return Ce.a});var fe=B(62);B.d(G,"clamp",function(){return fe.a});var be=B(63);B.d(G,"fixedBase",function(){return be.a});var te=B(64);B.d(G,"isDecimal",function(){return te.a});var de=B(65);B.d(G,"isEven",function(){return de.a});var ke=B(66);B.d(G,"isInteger",function(){return ke.a});var Ze=B(67);B.d(G,"isNegative",function(){return Ze.a});var We=B(68);B.d(G,"isNumberEqual",function(){return We.a});var bt=B(69);B.d(G,"isOdd",function(){return bt.a});var Ft=B(70);B.d(G,"isPositive",function(){return Ft.a});var Pt=B(22);B.d(G,"max",function(){return Pt.a});var Xe=B(71);B.d(G,"maxBy",function(){return Xe.a});var yt=B(23);B.d(G,"min",function(){return yt.a});var Ct=B(72);B.d(G,"minBy",function(){return Ct.a});var pt=B(73);B.d(G,"mod",function(){return pt.a});var xt=B(74);B.d(G,"toDegree",function(){return xt.a});var Fe=B(75);B.d(G,"toInteger",function(){return Fe.a});var ut=B(76);B.d(G,"toRadian",function(){return ut.a});var Ut=B(77);B.d(G,"forIn",function(){return Ut.a});var $e=B(29);B.d(G,"has",function(){return $e.a});var Te=B(78);B.d(G,"hasKey",function(){return Te.a});var tt=B(79);B.d(G,"hasValue",function(){return tt.a});var Mt=B(21);B.d(G,"keys",function(){return Mt.a});var Wt=B(20);B.d(G,"isMatch",function(){return Wt.a});var un=B(15);B.d(G,"values",function(){return un.a});var Le=B(80);B.d(G,"lowerCase",function(){return Le.a});var zt=B(81);B.d(G,"lowerFirst",function(){return zt.a});var Xt=B(82);B.d(G,"substitute",function(){return Xt.a});var Tn=B(83);B.d(G,"upperCase",function(){return Tn.a});var gn=B(84);B.d(G,"upperFirst",function(){return gn.a});var kn=B(30);B.d(G,"getType",function(){return kn.a});var ir=B(85);B.d(G,"isArguments",function(){return ir.a});var cr=B(0);B.d(G,"isArray",function(){return cr.a});var Bn=B(1);B.d(G,"isArrayLike",function(){return Bn.a});var xr=B(86);B.d(G,"isBoolean",function(){return xr.a});var jn=B(87);B.d(G,"isDate",function(){return jn.a});var Rn=B(88);B.d(G,"isError",function(){return Rn.a});var er=B(2);B.d(G,"isFunction",function(){return er.a});var Mr=B(89);B.d(G,"isFinite",function(){return Mr.a});var yr=B(7);B.d(G,"isNil",function(){return yr.a});var gr=B(90);B.d(G,"isNull",function(){return gr.a});var Oi=B(5);B.d(G,"isNumber",function(){return Oi.a});var Ir=B(12);B.d(G,"isObject",function(){return Ir.a});var De=B(14);B.d(G,"isObjectLike",function(){return De.a});var wi=B(10);B.d(G,"isPlainObject",function(){return wi.a});var xo=B(31);B.d(G,"isPrototype",function(){return xo.a});var mr=B(91);B.d(G,"isRegExp",function(){return mr.a});var Wr=B(4);B.d(G,"isString",function(){return Wr.a});var Vr=B(3);B.d(G,"isType",function(){return Vr.a});var Ae=B(92);B.d(G,"isUndefined",function(){return Ae.a});var Y=B(93);B.d(G,"isElement",function(){return Y.a});var W=B(94);B.d(G,"requestAnimationFrame",function(){return W.a});var T=B(95);B.d(G,"clearAnimationFrame",function(){return T.a});var $=B(96);B.d(G,"augment",function(){return $.a});var ce=B(97);B.d(G,"clone",function(){return ce.a});var je=B(98);B.d(G,"debounce",function(){return je.a});var Ge=B(32);B.d(G,"memoize",function(){return Ge.a});var rt=B(99);B.d(G,"deepMix",function(){return rt.a});var it=B(8);B.d(G,"each",function(){return it.a});var $t=B(100);B.d(G,"extend",function(){return $t.a});var R=B(101);B.d(G,"indexOf",function(){return R.a});var He=B(102);B.d(G,"isEmpty",function(){return He.a});var ze=B(33);B.d(G,"isEqual",function(){return ze.a});var Je=B(103);B.d(G,"isEqualWith",function(){return Je.a});var gt=B(104);B.d(G,"map",function(){return gt.a});var an=B(105);B.d(G,"mapValues",function(){return an.a});var Ke=B(16);B.d(G,"mix",function(){return Ke.a}),B.d(G,"assign",function(){return Ke.a});var qt=B(106);B.d(G,"get",function(){return qt.a});var Sn=B(107);B.d(G,"set",function(){return Sn.a});var zn=B(108);B.d(G,"pick",function(){return zn.a});var Wn=B(109);B.d(G,"omit",function(){return Wn.a});var kr=B(110);B.d(G,"throttle",function(){return kr.a});var $n=B(111);B.d(G,"toArray",function(){return $n.a});var Er=B(9);B.d(G,"toString",function(){return Er.a});var Xr=B(112);B.d(G,"uniqueId",function(){return Xr.a});var Di=B(113);B.d(G,"noop",function(){return Di.a});var Kt=B(114);B.d(G,"identity",function(){return Kt.a});var Gn=B(115);B.d(G,"size",function(){return Gn.a});var hr=B(34);B.d(G,"measureTextWidth",function(){return hr.a});var Un=B(117);B.d(G,"getEllipsisText",function(){return Un.a});var Gr=B(118);B.d(G,"Cache",function(){return Gr.a})},function(V,G,B){"use strict";var Q=B(19),j=B(13);G.a=function(F,I){return void 0===I&&(I=[]),Object(Q.a)(F,function(x){return!Object(j.a)(I,x)})}},function(V,G,B){"use strict";var Q=B(2),j=B(20),k=B(0),F=B(10);G.a=function I(x,E){if(!Object(k.a)(x))return null;var b;if(Object(Q.a)(E)&&(b=E),Object(F.a)(E)&&(b=function(y){return Object(j.a)(y,E)}),b)for(var w=0;w<x.length;w+=1)if(b(x[w]))return x[w];return null}},function(V,G,B){"use strict";G.a=function Q(j,k,F){void 0===F&&(F=0);for(var I=F;I<j.length;I++)if(k(j[I],I))return I;return-1}},function(V,G,B){"use strict";var Q=B(7),j=B(0);G.a=function(F,I){for(var x=null,E=0;E<F.length;E++){var w=F[E][I];if(!Object(Q.a)(w)){x=Object(j.a)(w)?w[0]:w;break}}return x}},function(V,G,B){"use strict";var Q=B(0);G.a=function(k){if(!Object(Q.a)(k))return[];for(var F=[],I=0;I<k.length;I++)F=F.concat(k[I]);return F}},function(V,G,B){"use strict";var Q=B(0),j=function(k,F){if(void 0===F&&(F=[]),Object(Q.a)(k))for(var I=0;I<k.length;I+=1)j(k[I],F);else F.push(k);return F};G.a=j},function(V,G,B){"use strict";var Q=B(0),j=B(22),k=B(23);G.a=function(I){var x=I.filter(function(A){return!isNaN(A)});if(!x.length)return{min:0,max:0};if(Object(Q.a)(I[0])){for(var E=[],b=0;b<I.length;b++)E=E.concat(I[b]);x=E}var w=Object(j.a)(x);return{min:Object(k.a)(x),max:w}}},function(V,G,B){"use strict";var Q=Array.prototype,j=Q.splice,k=Q.indexOf;G.a=function(I){for(var x=[],E=1;E<arguments.length;E++)x[E-1]=arguments[E];for(var b=0;b<x.length;b++)for(var w=x[b],y=-1;(y=k.call(I,w))>-1;)j.call(I,y,1);return I}},function(V,G,B){"use strict";var Q=B(1),j=B(24);G.a=function(F,I){var x=[];if(!Object(Q.a)(F))return x;for(var E=-1,b=[],w=F.length;++E<w;){var y=F[E];I(y,E,F)&&(x.push(y),b.push(E))}return Object(j.a)(F,b),x}},function(V,G,B){"use strict";var Q=B(0),j=B(4),k=B(2);G.a=function F(I,x){var E;if(Object(k.a)(x))E=function(w,y){return x(w)-x(y)};else{var b=[];Object(j.a)(x)?b.push(x):Object(Q.a)(x)&&(b=x),E=function(w,y){for(var A=0;A<b.length;A+=1){var M=b[A];if(w[M]>y[M])return 1;if(w[M]<y[M])return-1}return 0}}return I.sort(E),I}},function(V,G,B){"use strict";var Q=B(26);G.a=function(){for(var k=[],F=0;F<arguments.length;F++)k[F]=arguments[F];return Object(Q.a)([].concat.apply([],k))}},function(V,G,B){"use strict";var Q=B(0),j=B(7);G.a=function(k,F){for(var I=[],x={},E=0;E<k.length;E++){var w=k[E][F];if(!Object(j.a)(w)){Object(Q.a)(w)||(w=[w]);for(var y=0;y<w.length;y++){var A=w[y];x[A]||(I.push(A),x[A]=!0)}}}return I}},function(V,G,B){"use strict";G.a=function j(k){if(Object(Q.a)(k))return k[0]};var Q=B(1)},function(V,G,B){"use strict";G.a=function j(k){if(Object(Q.a)(k))return k[k.length-1]};var Q=B(1)},function(V,G,B){"use strict";var Q=B(0),j=B(4);G.a=function k(F,I){return!(!Object(Q.a)(F)&&!Object(j.a)(F))&&F[0]===I}},function(V,G,B){"use strict";var Q=B(0),j=B(4);G.a=function k(F,I){return!(!Object(Q.a)(F)&&!Object(j.a)(F))&&F[F.length-1]===I}},function(V,G,B){"use strict";G.a=function(j,k){for(var F=0;F<j.length;F++)if(!k(j[F],F))return!1;return!0}},function(V,G,B){"use strict";G.a=function(j,k){for(var F=0;F<j.length;F++)if(k(j[F],F))return!0;return!1}},function(V,G,B){"use strict";var Q=B(27);G.a=function(j,k){if(!k)return[j];var F=Object(Q.a)(j,k),I=[];for(var x in F)I.push(F[x]);return I}},function(V,G,B){"use strict";G.a=function Q(j,k){return j["_wrap_"+k]}},function(V,G,B){"use strict";G.a=function Q(j,k){if(j["_wrap_"+k])return j["_wrap_"+k];var F=function(I){j[k](I)};return j["_wrap_"+k]=F,F}},function(V,G,B){"use strict";var Q={};G.a=function j(k){var F=Q[k];if(!F){for(var I=k.toString(16),x=I.length;x<6;x++)I="0"+I;Q[k]=F="#"+I}return F}},function(V,G,B){"use strict";var Q=B(0);G.a=function j(k){var F=0,I=0,x=0,E=0;return Object(Q.a)(k)?1===k.length?F=I=x=E=k[0]:2===k.length?(F=x=k[0],I=E=k[1]):3===k.length?(F=k[0],I=E=k[1],x=k[2]):(F=k[0],I=k[1],x=k[2],E=k[3]):F=I=x=E=k,{r1:F,r2:I,r3:x,r4:E}}},function(V,G,B){"use strict";G.a=function(j,k,F){return j<k?k:j>F?F:j}},function(V,G,B){"use strict";G.a=function(j,k){var F=k.toString(),I=F.indexOf(".");if(-1===I)return Math.round(j);var x=F.substr(I+1).length;return x>20&&(x=20),parseFloat(j.toFixed(x))}},function(V,G,B){"use strict";var Q=B(5);G.a=function(k){return Object(Q.a)(k)&&k%1!=0}},function(V,G,B){"use strict";var Q=B(5);G.a=function(k){return Object(Q.a)(k)&&k%2==0}},function(V,G,B){"use strict";var Q=B(5);G.a=Number.isInteger?Number.isInteger:function(k){return Object(Q.a)(k)&&k%1==0}},function(V,G,B){"use strict";var Q=B(5);G.a=function(k){return Object(Q.a)(k)&&k<0}},function(V,G,B){"use strict";G.a=function j(k,F,I){return void 0===I&&(I=1e-5),Math.abs(k-F)<I}},function(V,G,B){"use strict";var Q=B(5);G.a=function(k){return Object(Q.a)(k)&&k%2!=0}},function(V,G,B){"use strict";var Q=B(5);G.a=function(k){return Object(Q.a)(k)&&k>0}},function(V,G,B){"use strict";var Q=B(0),j=B(2);G.a=function(k,F){if(Object(Q.a)(k)){for(var I,x=-1/0,E=0;E<k.length;E++){var b=k[E],w=Object(j.a)(F)?F(b):b[F];w>x&&(I=b,x=w)}return I}}},function(V,G,B){"use strict";var Q=B(0),j=B(2);G.a=function(k,F){if(Object(Q.a)(k)){for(var I,x=1/0,E=0;E<k.length;E++){var b=k[E],w=Object(j.a)(F)?F(b):b[F];w<x&&(I=b,x=w)}return I}}},function(V,G,B){"use strict";G.a=function(j,k){return(j%k+k)%k}},function(V,G,B){"use strict";var Q=180/Math.PI;G.a=function(k){return Q*k}},function(V,G,B){"use strict";G.a=parseInt},function(V,G,B){"use strict";var Q=Math.PI/180;G.a=function(k){return Q*k}},function(V,G,B){"use strict";var Q=B(8);G.a=Q.a},function(V,G,B){"use strict";var Q=B(29);G.a=Q.a},function(V,G,B){"use strict";var Q=B(13),j=B(15);G.a=function(k,F){return Object(Q.a)(Object(j.a)(k),F)}},function(V,G,B){"use strict";var Q=B(9);G.a=function(k){return Object(Q.a)(k).toLowerCase()}},function(V,G,B){"use strict";var Q=B(9);G.a=function(k){var F=Object(Q.a)(k);return F.charAt(0).toLowerCase()+F.substring(1)}},function(V,G,B){"use strict";G.a=function Q(j,k){return j&&k?j.replace(/\\?\{([^{}]+)\}/g,function(F,I){return"\\"===F.charAt(0)?F.slice(1):void 0===k[I]?"":k[I]}):j}},function(V,G,B){"use strict";var Q=B(9);G.a=function(k){return Object(Q.a)(k).toUpperCase()}},function(V,G,B){"use strict";var Q=B(9);G.a=function(k){var F=Object(Q.a)(k);return F.charAt(0).toUpperCase()+F.substring(1)}},function(V,G,B){"use strict";var Q=B(3);G.a=function(k){return Object(Q.a)(k,"Arguments")}},function(V,G,B){"use strict";var Q=B(3);G.a=function(k){return Object(Q.a)(k,"Boolean")}},function(V,G,B){"use strict";var Q=B(3);G.a=function(k){return Object(Q.a)(k,"Date")}},function(V,G,B){"use strict";var Q=B(3);G.a=function(k){return Object(Q.a)(k,"Error")}},function(V,G,B){"use strict";var Q=B(5);G.a=function(j){return Object(Q.a)(j)&&isFinite(j)}},function(V,G,B){"use strict";G.a=function(j){return null===j}},function(V,G,B){"use strict";var Q=B(3);G.a=function(k){return Object(Q.a)(k,"RegExp")}},function(V,G,B){"use strict";G.a=function(j){return void 0===j}},function(V,G,B){"use strict";G.a=function(j){return j instanceof Element||j instanceof HTMLDocument}},function(V,G,B){"use strict";G.a=function Q(j){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(F){return setTimeout(F,16)})(j)}},function(V,G,B){"use strict";G.a=function Q(j){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(j)}},function(V,G,B){"use strict";var Q=B(16),j=B(2);G.a=function(){for(var F=[],I=0;I<arguments.length;I++)F[I]=arguments[I];for(var x=F[0],E=1;E<F.length;E++){var b=F[E];Object(j.a)(b)&&(b=b.prototype),Object(Q.a)(x.prototype,b)}}},function(V,G,B){"use strict";var Q=B(0),j=function(k){if("object"!=typeof k||null===k)return k;var F;if(Object(Q.a)(k)){F=[];for(var I=0,x=k.length;I<x;I++)F[I]="object"==typeof k[I]&&null!=k[I]?j(k[I]):k[I]}else for(var E in F={},k)F[E]="object"==typeof k[E]&&null!=k[E]?j(k[E]):k[E];return F};G.a=j},function(V,G,B){"use strict";G.a=function Q(j,k,F){var I;return function(){var x=this,E=arguments,b=function(){I=null,F||j.apply(x,E)},w=F&&!I;clearTimeout(I),I=setTimeout(b,k),w&&j.apply(x,E)}}},function(V,G,B){"use strict";var Q=B(0),j=B(10);function F(x,E,b,w){for(var y in b=b||0,w=w||5,E)if(E.hasOwnProperty(y)){var A=E[y];null!==A&&Object(j.a)(A)?(Object(j.a)(x[y])||(x[y]={}),b<w?F(x[y],A,b+1,w):x[y]=E[y]):Object(Q.a)(A)?(x[y]=[],x[y]=x[y].concat(A)):void 0!==A&&(x[y]=A)}}G.a=function(x){for(var E=[],b=1;b<arguments.length;b++)E[b-1]=arguments[b];for(var w=0;w<E.length;w+=1)F(x,E[w]);return x}},function(V,G,B){"use strict";var Q=B(16),j=B(2);G.a=function(F,I,x,E){Object(j.a)(I)||(x=I,I=F,F=function(){});var b=Object.create?function(y,A){return Object.create(y,{constructor:{value:A}})}:function(y,A){function M(){}M.prototype=y;var S=new M;return S.constructor=A,S},w=b(I.prototype,F);return F.prototype=Object(Q.a)(w,F.prototype),F.superclass=b(I.prototype,I),Object(Q.a)(w,x),Object(Q.a)(F,E),F}},function(V,G,B){"use strict";var Q=B(1);G.a=function(k,F){if(!Object(Q.a)(k))return-1;var I=Array.prototype.indexOf;if(I)return I.call(k,F);for(var x=-1,E=0;E<k.length;E++)if(k[E]===F){x=E;break}return x}},function(V,G,B){"use strict";var Q=B(7),j=B(1),k=B(30),F=B(31),I=Object.prototype.hasOwnProperty;G.a=function x(E){if(Object(Q.a)(E))return!0;if(Object(j.a)(E))return!E.length;var b=Object(k.a)(E);if("Map"===b||"Set"===b)return!E.size;if(Object(F.a)(E))return!Object.keys(E).length;for(var w in E)if(I.call(E,w))return!1;return!0}},function(V,G,B){"use strict";var Q=B(2),j=B(33);G.a=function(k,F,I){return Object(Q.a)(I)?!!I(k,F):Object(j.a)(k,F)}},function(V,G,B){"use strict";var Q=B(1);G.a=function(k,F){if(!Object(Q.a)(k))return k;for(var I=[],x=0;x<k.length;x++)I.push(F(k[x],x));return I}},function(V,G,B){"use strict";var Q=B(7),j=B(12),k=function(F){return F};G.a=function(F,I){void 0===I&&(I=k);var x={};return Object(j.a)(F)&&!Object(Q.a)(F)&&Object.keys(F).forEach(function(E){x[E]=I(F[E],E)}),x}},function(V,G,B){"use strict";var Q=B(4);G.a=function(j,k,F){for(var I=0,x=Object(Q.a)(k)?k.split("."):k;j&&I<x.length;)j=j[x[I++]];return void 0===j||I<x.length?F:j}},function(V,G,B){"use strict";var Q=B(12),j=B(4),k=B(5);G.a=function(F,I,x){var E=F,b=Object(j.a)(I)?I.split("."):I;return b.forEach(function(w,y){y<b.length-1?(Object(Q.a)(E[w])||(E[w]=Object(k.a)(b[y+1])?[]:{}),E=E[w]):E[w]=x}),F}},function(V,G,B){"use strict";var Q=B(8),j=B(10),k=Object.prototype.hasOwnProperty;G.a=function(F,I){if(null===F||!Object(j.a)(F))return{};var x={};return Object(Q.a)(I,function(E){k.call(F,E)&&(x[E]=F[E])}),x}},function(V,G,B){"use strict";var Q=B(25);G.a=function(j,k){return Object(Q.a)(j,function(F,I,x){return k.includes(x)||(F[x]=I),F},{})}},function(V,G,B){"use strict";G.a=function(Q,j,k){var F,I,x,E,b=0;k||(k={});var w=function(){b=!1===k.leading?0:Date.now(),F=null,E=Q.apply(I,x),F||(I=x=null)},y=function(){var A=Date.now();!b&&!1===k.leading&&(b=A);var M=j-(A-b);return I=this,x=arguments,M<=0||M>j?(F&&(clearTimeout(F),F=null),b=A,E=Q.apply(I,x),F||(I=x=null)):!F&&!1!==k.trailing&&(F=setTimeout(w,M)),E};return y.cancel=function(){clearTimeout(F),b=0,F=I=x=null},y}},function(V,G,B){"use strict";var Q=B(1);G.a=function(j){return Object(Q.a)(j)?Array.prototype.slice.call(j):[]}},function(V,G,B){"use strict";var Q={};G.a=function(j){return Q[j=j||"g"]?Q[j]+=1:Q[j]=1,j+Q[j]}},function(V,G,B){"use strict";G.a=function(){}},function(V,G,B){"use strict";G.a=function(Q){return Q}},function(V,G,B){"use strict";G.a=function k(F){return Object(Q.a)(F)?0:Object(j.a)(F)?F.length:Object.keys(F).length};var Q=B(7),j=B(1)},function(V,G,B){"use strict";G.a=function U(){for(var _e=0,me=0,Ce=arguments.length;me<Ce;me++)_e+=arguments[me].length;var fe=Array(_e),be=0;for(me=0;me<Ce;me++)for(var te=arguments[me],de=0,ke=te.length;de<ke;de++,be++)fe[be]=te[de];return fe}},function(V,G,B){"use strict";var Q=B(4),j=B(9),k=B(34);G.a=function(F,I,x,E){void 0===E&&(E="...");var S,P,w=Object(k.a)(E,x),y=Object(Q.a)(F)?F:Object(j.a)(F),A=I,M=[];if(Object(k.a)(F,x)<=I)return F;for(;S=y.substr(0,16),!((P=Object(k.a)(S,x))+w>A&&P>A);)if(M.push(S),A-=P,!(y=y.substr(16)))return M.join("");for(;S=y.substr(0,1),!((P=Object(k.a)(S,x))+w>A);)if(M.push(S),A-=P,!(y=y.substr(1)))return M.join("");return""+M.join("")+E}},function(V,G,B){"use strict";var Q=function(){function j(){this.map={}}return j.prototype.has=function(k){return void 0!==this.map[k]},j.prototype.get=function(k,F){var I=this.map[k];return void 0===I?F:I},j.prototype.set=function(k,F){this.map[k]=F},j.prototype.clear=function(){this.map={}},j.prototype.delete=function(k){delete this.map[k]},j.prototype.size=function(){return Object.keys(this.map).length},j}();G.a=Q},function(V,G){function B(x,E,b,w){void 0===w&&(w=[]);var y=this;y.w=x||0,y.h=E||0,y.y=b||0,y.x=0,y.c=w||[],y.cs=w.length,y.prelim=0,y.mod=0,y.shift=0,y.change=0,y.tl=null,y.tr=null,y.el=null,y.er=null,y.msel=0,y.mser=0}function Q(x,E,b){b?x.y+=E:x.x+=E,x.children.forEach(function(w){Q(w,E,b)})}function j(x,E){var b=E?x.y:x.x;return x.children.forEach(function(w){b=Math.min(j(w,E),b)}),b}function k(x,E){Q(x,-j(x,E),E)}function F(x,E,b){b?E.y=x.x:E.x=x.x,x.c.forEach(function(w,y){F(w,E.children[y],b)})}function I(x,E,b){void 0===b&&(b=0),E?(x.x=b,b+=x.width):(x.y=b,b+=x.height),x.children.forEach(function(w){I(w,E,b)})}B.fromNode=function(x,E){if(!x)return null;var b=[];return x.children.forEach(function(w){b.push(B.fromNode(w,E))}),E?new B(x.height,x.width,x.x,b):new B(x.width,x.height,x.y,b)},V.exports=function(x,E){void 0===E&&(E={});var b=E.isHorizontal;function y(re){0===re.cs?(re.el=re,re.er=re,re.msel=re.mser=0):(re.el=re.c[0].el,re.msel=re.c[0].msel,re.er=re.c[re.cs-1].er,re.mser=re.c[re.cs-1].mser)}function A(re,oe,ve){for(var we=re.c[oe-1],_e=we.mod,me=re.c[oe],Ce=me.mod;null!==we&&null!==me;){U(we)>ve.low&&(ve=ve.nxt);var fe=_e+we.prelim+we.w-(Ce+me.prelim);fe>0&&(Ce+=fe,M(re,oe,ve.index,fe));var be=U(we),te=U(me);be<=te&&null!==(we=P(we))&&(_e+=we.mod),be>=te&&null!==(me=S(me))&&(Ce+=me.mod)}!we&&me?function z(re,oe,ve,we){var _e=re.c[0].el;_e.tl=ve;var me=we-ve.mod-re.c[0].msel;_e.mod+=me,_e.prelim-=me,re.c[0].el=re.c[oe].el,re.c[0].msel=re.c[oe].msel}(re,oe,me,Ce):we&&!me&&function ie(re,oe,ve,we){var _e=re.c[oe].er;_e.tr=ve;var me=we-ve.mod-re.c[oe].mser;_e.mod+=me,_e.prelim-=me,re.c[oe].er=re.c[oe-1].er,re.c[oe].mser=re.c[oe-1].mser}(re,oe,we,_e)}function M(re,oe,ve,we){re.c[oe].mod+=we,re.c[oe].msel+=we,re.c[oe].mser+=we,function K(re,oe,ve,we){if(ve!==oe-1){var _e=oe-ve;re.c[ve+1].shift+=we/_e,re.c[oe].shift-=we/_e,re.c[oe].change-=we-we/_e}}(re,oe,ve,we)}function S(re){return 0===re.cs?re.tl:re.c[0]}function P(re){return 0===re.cs?re.tr:re.c[re.cs-1]}function U(re){return re.y+re.h}function X(re,oe,ve){for(;null!==ve&&re>=ve.low;)ve=ve.nxt;return{low:re,index:oe,nxt:ve}}I(x,b);var ae=B.fromNode(x,b);return function w(re){if(0!==re.cs){w(re.c[0]);for(var oe=X(U(re.c[0].el),0,null),ve=1;ve<re.cs;++ve){w(re.c[ve]);var we=U(re.c[ve].er);A(re,ve,oe),oe=X(we,ve,oe)}(function ne(re){re.prelim=(re.c[0].prelim+re.c[0].mod+re.c[re.cs-1].mod+re.c[re.cs-1].prelim+re.c[re.cs-1].w)/2-re.w/2})(re),y(re)}else y(re)}(ae),function q(re,oe){re.x=re.prelim+(oe+=re.mod),function ee(re){for(var oe=0,ve=0,we=0;we<re.cs;we++)re.c[we].mod+=ve+=(oe+=re.c[we].shift)+re.c[we].change}(re);for(var ve=0;ve<re.cs;ve++)q(re.c[ve],oe)}(ae,0),F(ae,x,b),k(x,b),x}},function(V,G,B){function Q(y,A){y.prototype=Object.create(A.prototype),y.prototype.constructor=y,j(y,A)}function j(y,A){return(j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(S,P){return S.__proto__=P,S})(y,A)}var k=B(11),F=B(121),I=B(17),x=B(6),E=function(y){function A(){return y.apply(this,arguments)||this}return Q(A,y),A.prototype.execute=function(){var P=this;return P.rootNode.width=0,I(P.rootNode,P.options,F)},A}(k),b={};V.exports=function w(y,A){return A=x.assign({},b,A),new E(y,A).execute()}},function(V,G,B){var Q=B(6);function j(I,x){void 0===I&&(I=0),void 0===x&&(x=[]);var E=this;E.x=E.y=0,E.leftChild=E.rightChild=null,E.height=0,E.children=x}var k={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function F(I,x,E){E?(x.x=I.x,x.y=I.y):(x.x=I.y,x.y=I.x),I.children.forEach(function(b,w){F(b,x.children[w],E)})}V.exports=function(I,x){void 0===x&&(x={}),x=Q.assign({},k,x);var y,E=0;var M=function b(S){if(!S)return null;S.width=0,S.depth&&S.depth>E&&(E=S.depth);var P=S.children,U=P.length,z=new j(S.height,[]);return P.forEach(function(ie,ne){var q=b(ie);z.children.push(q),0===ne&&(z.leftChild=q),ne===U-1&&(z.rightChild=q)}),z.originNode=S,z.isLeaf=S.isLeaf(),z}(I);return function w(S){if(S.isLeaf||0===S.children.length)S.drawingDepth=E;else{var P=S.children.map(function(z){return w(z)}),U=Math.min.apply(null,P);S.drawingDepth=U-1}return S.drawingDepth}(M),function A(S){S.x=S.drawingDepth*x.rankSep,S.isLeaf?(S.y=0,y&&(S.y=y.y+y.height+x.nodeSep,S.originNode.parent!==y.originNode.parent&&(S.y+=x.subTreeSep)),y=S):(S.children.forEach(function(P){A(P)}),S.y=(S.leftChild.y+S.rightChild.y)/2)}(M),F(M,I,x.isHorizontal),I}},function(V,G,B){function Q(M,S){M.prototype=Object.create(S.prototype),M.prototype.constructor=M,j(M,S)}function j(M,S){return(j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(U,z){return U.__proto__=z,U})(M,S)}var k=B(11),F=B(123),I=B(35),x=B(6),E=["LR","RL","H"],b=E[0],w=function(M){function S(){return M.apply(this,arguments)||this}return Q(S,M),S.prototype.execute=function(){var ie=this.options,ne=this.rootNode;ie.isHorizontal=!0;var q=ie.indent,K=void 0===q?20:q,ee=ie.dropCap,X=void 0===ee||ee,ae=ie.direction,re=void 0===ae?b:ae,oe=ie.align;if(re&&-1===E.indexOf(re))throw new TypeError("Invalid direction: "+re);if(re===E[0])F(ne,K,X,oe);else if(re===E[1])F(ne,K,X,oe),ne.right2left();else if(re===E[2]){var ve=I(ne,ie),we=ve.left,_e=ve.right;F(we,K,X,oe),we.right2left(),F(_e,K,X,oe);var me=we.getBoundingBox();_e.translate(me.width,0),ne.x=_e.x-ne.width/2}return ne},S}(k),y={};V.exports=function A(M,S){return S=x.assign({},y,S),new w(M,S).execute()}},function(V,G,B){var Q=B(6);V.exports=function(k,F,I,x){var E=null;k.eachNode(function(b){(function j(k,F,I,x,E){var w,b="function"==typeof I?I(k):I*k.depth;if(!x)try{if(k.id===k.parent.children[0].id)return k.x+=b,void(k.y=F?F.y:0)}catch{}if(k.x+=b,F){if(k.y=F.y+Q.getHeight(F,k,E),k.parent.id!==(null==(w=F.parent)?void 0:w.id)){var y=k.parent.children.findIndex(function(S){return S.id===k.id}),A=k.parent.children[y-1];if(A){var M=A.y+Q.getHeight(A,k,E);k.y=M>k.y?M:k.y}}}else k.y=0})(b,E,F,I,x),E=b})}},function(V,G,B){function Q(y,A){y.prototype=Object.create(A.prototype),y.prototype.constructor=y,j(y,A)}function j(y,A){return(j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(S,P){return S.__proto__=P,S})(y,A)}var k=B(11),F=B(125),I=B(17),x=B(6),E=function(y){function A(){return y.apply(this,arguments)||this}return Q(A,y),A.prototype.execute=function(){return I(this.rootNode,this.options,F)},A}(k),b={};V.exports=function w(y,A){return A=x.assign({},b,A),new E(y,A).execute()}},function(V,G,B){var Q=B(6);function j(I,x){var E=0;return I.children.length?I.children.forEach(function(b){E+=j(b,x)}):E=I.height,I._subTreeSep=x.getSubTreeSep(I.data),I.totalHeight=Math.max(I.height,E)+2*I._subTreeSep,I.totalHeight}function k(I){var x=I.children,E=x.length;if(E){x.forEach(function(S){k(S)});var b=x[0],w=x[E-1],y=w.y-b.y+w.height,A=0;if(x.forEach(function(S){A+=S.totalHeight}),y>I.height)I.y=b.y+y/2-I.height/2;else if(1!==x.length||I.height>A){var M=I.y+(I.height-y)/2-b.y;x.forEach(function(S){S.translate(0,M)})}else I.y=(b.y+b.height/2+w.y+w.height/2)/2-I.height/2}}var F={getSubTreeSep:function(){return 0}};V.exports=function(I,x){void 0===x&&(x={}),x=Q.assign({},F,x),I.parent={x:0,width:0,height:0,y:0},I.BFTraverse(function(E){E.x=E.parent.x+E.parent.width}),I.parent=null,j(I,x),I.startY=0,I.y=I.totalHeight/2-I.height/2,I.eachNode(function(E){var b=E.children,w=b.length;if(w){var y=b[0];if(y.startY=E.startY+E._subTreeSep,1===w)y.y=E.y+E.height/2-y.height/2;else{y.y=y.startY+y.totalHeight/2-y.height/2;for(var A=1;A<w;A++){var M=b[A];M.startY=b[A-1].startY+b[A-1].totalHeight,M.y=M.startY+M.totalHeight/2-M.height/2}}}}),k(I)}}])},66:function(Qt,V,G){"use strict";var B=this&&this.__createBinding||(Object.create?function(k,F,I,x){void 0===x&&(x=I);var E=Object.getOwnPropertyDescriptor(F,I);(!E||("get"in E?!F.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return F[I]}}),Object.defineProperty(k,x,E)}:function(k,F,I,x){void 0===x&&(x=I),k[x]=F[I]}),Q=this&&this.__exportStar||function(k,F){for(var I in k)"default"!==I&&!Object.prototype.hasOwnProperty.call(F,I)&&B(F,k,I)};Object.defineProperty(V,"__esModule",{value:!0}),V.getLayoutByName=V.unRegisterLayout=V.registerLayout=void 0;var j=G(1647);Object.defineProperty(V,"registerLayout",{enumerable:!0,get:function(){return j.registerLayout}}),Object.defineProperty(V,"unRegisterLayout",{enumerable:!0,get:function(){return j.unRegisterLayout}}),Object.defineProperty(V,"getLayoutByName",{enumerable:!0,get:function(){return j.getLayoutByName}}),Q(G(4670),V)},8792:(Qt,V)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.Base=void 0;var G=function(){function B(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return B.prototype.layout=function(Q){return this.init(Q),this.execute(!0)},B.prototype.init=function(Q){this.nodes=Q.nodes||[],this.edges=Q.edges||[],this.combos=Q.combos||[],this.comboEdges=Q.comboEdges||[],this.hiddenNodes=Q.hiddenNodes||[],this.hiddenEdges=Q.hiddenEdges||[],this.hiddenCombos=Q.hiddenCombos||[],this.vedges=Q.vedges||[]},B.prototype.execute=function(Q){},B.prototype.executeWithWorker=function(){},B.prototype.getDefaultCfg=function(){return{}},B.prototype.updateCfg=function(Q){Q&&Object.assign(this,Q)},B.prototype.getType=function(){return"base"},B.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},B}();V.Base=G},3414:function(Qt,V,G){"use strict";var E,B=this&&this.__extends||(E=function(b,w){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,A){y.__proto__=A}||function(y,A){for(var M in A)Object.prototype.hasOwnProperty.call(A,M)&&(y[M]=A[M])})(b,w)},function(b,w){if("function"!=typeof w&&null!==w)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function y(){this.constructor=b}E(b,w),b.prototype=null===w?Object.create(w):(y.prototype=w.prototype,new y)});Object.defineProperty(V,"__esModule",{value:!0}),V.CircularLayout=void 0;var Q=G(8792),j=G(7602);function I(E,b){var w=E.degree,y=b.degree;return w<y?-1:w>y?1:0}var x=function(E){function b(w){var y=E.call(this)||this;return y.radius=null,y.nodeSize=void 0,y.startRadius=null,y.endRadius=null,y.startAngle=0,y.endAngle=2*Math.PI,y.clockwise=!0,y.divisions=1,y.ordering=null,y.angleRatio=1,y.nodes=[],y.edges=[],y.nodeMap={},y.degrees=[],y.width=300,y.height=300,y.updateCfg(w),y}return B(b,E),b.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},b.prototype.execute=function(){var w,y=this,A=y.nodes,M=y.edges,S=A.length;if(0!==S){!y.width&&typeof window<"u"&&(y.width=window.innerWidth),!y.height&&typeof window<"u"&&(y.height=window.innerHeight),y.center||(y.center=[y.width/2,y.height/2]);var P=y.center;if(1===S)return A[0].x=P[0],A[0].y=P[1],void(y.onLayoutEnd&&y.onLayoutEnd());var U=y.radius,z=y.startRadius,ie=y.endRadius,ne=y.divisions,q=y.startAngle,K=y.endAngle,ee=y.angleRatio,X=y.ordering,ae=y.clockwise,re=y.nodeSpacing,oe=y.nodeSize,ve=(K-q)/S,we={};A.forEach(function(Ft,Pt){we[Ft.id]=Pt}),y.nodeMap=we;var _e=(0,j.getDegree)(A.length,we,M);if(y.degrees=_e,re){var me=(0,j.getFuncByUnknownType)(10,re),Ce=(0,j.getFuncByUnknownType)(10,oe),fe=-1/0;A.forEach(function(Ft){var Pt=Ce(Ft);fe<Pt&&(fe=Pt)});var be=0;A.forEach(function(Ft,Pt){be+=0===Pt?fe||10:(me(Ft)||0)+(fe||10)}),U=be/(2*Math.PI)}else U||z||ie?!z&&ie?z=ie:z&&!ie&&(ie=z):U=y.height>y.width?y.width/2:y.height/2;var te=ve*ee,de=[];de="topology"===X?y.topologyOrdering():"topology-directed"===X?y.topologyOrdering(!0):"degree"===X?y.degreeOrdering():A;for(var ke=Math.ceil(S/ne),Ze=0;Ze<S;++Ze){var We=U;!We&&null!==z&&null!==ie&&(We=z+Ze*(ie-z)/(S-1)),We||(We=10+100*Ze/(S-1));var bt=q+Ze%ke*te+2*Math.PI/ne*Math.floor(Ze/ke);ae||(bt=K-Ze%ke*te-2*Math.PI/ne*Math.floor(Ze/ke)),de[Ze].x=P[0]+Math.cos(bt)*We,de[Ze].y=P[1]+Math.sin(bt)*We,de[Ze].weight=_e[Ze].all}return null===(w=y.onLayoutEnd)||void 0===w||w.call(y),{nodes:de,edges:this.edges}}y.onLayoutEnd&&y.onLayoutEnd()},b.prototype.topologyOrdering=function(w){void 0===w&&(w=!1);var y=this,A=y.degrees,M=y.edges,S=y.nodes,P=(0,j.clone)(S),U=y.nodeMap,z=[P[0]],ie=[S[0]],ne=[],q=S.length;ne[0]=!0,function k(E,b,w,y){E.forEach(function(A,M){E[M].children=[],E[M].parent=[]}),b.forEach(y?function(A){var M=(0,j.getEdgeTerminal)(A,"source"),S=(0,j.getEdgeTerminal)(A,"target"),P=0;M&&(P=w[M]);var U=0;S&&(U=w[S]);var ie=E[U].parent;E[P].children.push(E[U].id),ie.push(E[P].id)}:function(A){var M=(0,j.getEdgeTerminal)(A,"source"),S=(0,j.getEdgeTerminal)(A,"target"),P=0;M&&(P=w[M]);var U=0;S&&(U=w[S]);var ie=E[U].children;E[P].children.push(E[U].id),ie.push(E[P].id)})}(P,M,U,w);var K=0;return P.forEach(function(ee,X){if(0!==X)if(X!==q-1&&A[X].all===A[X+1].all&&!function F(E,b,w){for(var y=w.length,A=0;A<y;A++){var M=(0,j.getEdgeTerminal)(w[A],"source"),S=(0,j.getEdgeTerminal)(w[A],"target");if(E.id===M&&b.id===S||b.id===M&&E.id===S)return!0}return!1}(z[K],ee,M)||ne[X]){for(var ae=z[K].children,re=!1,oe=0;oe<ae.length;oe++){var ve=U[ae[oe]];if(A[ve].all===A[X].all&&!ne[ve]){z.push(P[ve]),ie.push(S[U[P[ve].id]]),ne[ve]=!0,re=!0;break}}for(var we=0;!re&&(ne[we]||(z.push(P[we]),ie.push(S[U[P[we].id]]),ne[we]=!0,re=!0),++we!==q););}else z.push(ee),ie.push(S[U[ee.id]]),ne[X]=!0,K++}),ie},b.prototype.degreeOrdering=function(){var A=[],M=this.degrees;return this.nodes.forEach(function(S,P){S.degree=M[P].all,A.push(S)}),A.sort(I),A},b.prototype.getType=function(){return"circular"},b}(Q.Base);V.CircularLayout=x},9602:function(Qt,V,G){"use strict";var E,B=this&&this.__extends||(E=function(b,w){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,A){y.__proto__=A}||function(y,A){for(var M in A)Object.prototype.hasOwnProperty.call(A,M)&&(y[M]=A[M])})(b,w)},function(b,w){if("function"!=typeof w&&null!==w)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function y(){this.constructor=b}E(b,w),b.prototype=null===w?Object.create(w):(y.prototype=w.prototype,new y)}),Q=this&&this.__assign||function(){return Q=Object.assign||function(E){for(var b,w=1,y=arguments.length;w<y;w++)for(var A in b=arguments[w])Object.prototype.hasOwnProperty.call(b,A)&&(E[A]=b[A]);return E},Q.apply(this,arguments)};Object.defineProperty(V,"__esModule",{value:!0}),V.ComboCombinedLayout=void 0;var j=G(981),k=G(8792),F=G(7602),I=G(4670),x=function(E){function b(w){var y=E.call(this)||this;return y.center=[0,0],y.nodes=[],y.edges=[],y.combos=[],y.comboEdges=[],y.comboPadding=10,y.comboTrees=[],y.updateCfg(w),y}return B(b,E),b.prototype.getDefaultCfg=function(){return{}},b.prototype.execute=function(){var w=this,y=w.nodes,A=w.center;if(y&&0!==y.length)return 1===y.length?(y[0].x=A[0],y[0].y=A[1],void(w.onLayoutEnd&&w.onLayoutEnd())):(w.initVals(),w.run(),void(w.onLayoutEnd&&w.onLayoutEnd()));w.onLayoutEnd&&w.onLayoutEnd()},b.prototype.run=function(){var w,y=this,A=y.nodes,M=y.edges,S=y.combos,P=y.comboEdges,U=y.center,z={};A.forEach(function(fe){z[fe.id]=fe});var ie={};S.forEach(function(fe){ie[fe.id]=fe});var ne=y.getInnerGraphs(z),q=[],K=[],ee={},X=!0;this.comboTrees.forEach(function(fe){var be=ne[fe.id],te=Q(Q({},fe),{x:be.x||ie[fe.id].x,y:be.y||ie[fe.id].y,fx:be.fx||ie[fe.id].fx,fy:be.fy||ie[fe.id].fy,mass:be.mass||ie[fe.id].mass,size:be.size});K.push(te),isNaN(te.x)||0===te.x||isNaN(te.y)||0===te.y?(te.x=100*Math.random(),te.y=100*Math.random()):X=!1,q.push(fe.id),(0,F.traverseTreeUp)(fe,function(de){return de.id!==fe.id&&(ee[de.id]=fe.id),!0})}),A.forEach(function(fe){if(!fe.comboId||!ie[fe.comboId]){var be=Q({},fe);K.push(be),isNaN(be.x)||0===be.x||isNaN(be.y)||0===be.y?(be.x=100*Math.random(),be.y=100*Math.random()):X=!1,q.push(fe.id)}});var ae=[];if(M.concat(P).forEach(function(fe){var be=ee[fe.source]||fe.source,te=ee[fe.target]||fe.target;be!==te&&q.includes(be)&&q.includes(te)&&ae.push({source:be,target:te})}),K?.length){if(1===K.length)K[0].x=U[0],K[0].y=U[1];else{var re={nodes:K,edges:ae},oe=this.outerLayout||new I.GForceLayout({gravity:1,factor:4,linkDistance:function(fe,be,te){var de,ke,Ze=(((null===(de=be.size)||void 0===de?void 0:de[0])||30)+((null===(ke=te.size)||void 0===ke?void 0:ke[0])||30))/2;return Math.min(1.5*Ze,700)}}),ve=null===(w=oe.getType)||void 0===w?void 0:w.call(oe);oe.updateCfg({center:U,kg:5,preventOverlap:!0,animate:!1}),X&&j.FORCE_LAYOUT_TYPE_MAP[ve]&&(K.length<100?new I.MDSLayout:new I.GridLayout).layout(re),oe.layout(re)}K.forEach(function(fe){var be=ne[fe.id];if(be)be.visited=!0,be.x=fe.x,be.y=fe.y,be.nodes.forEach(function(de){de.x+=fe.x,de.y+=fe.y});else{var te=z[fe.id];te&&(te.x=fe.x,te.y=fe.y)}})}for(var _e=Object.keys(ne),me=function(fe){var be=_e[fe],te=ne[be];if(!te)return"continue";te.nodes.forEach(function(de){te.visited||(de.x+=te.x||0,de.y+=te.y||0),z[de.id]&&(z[de.id].x=de.x,z[de.id].y=de.y)}),ie[be]&&(ie[be].x=te.x,ie[be].y=te.y)},Ce=_e.length-1;Ce>=0;Ce--)me(Ce);return{nodes:A,edges:M,combos:S,comboEdges:P}},b.prototype.getInnerGraphs=function(w){var y=this,A=y.comboTrees,M=y.nodeSize,S=y.edges,P=y.comboPadding,U=y.spacing,z={},ie=this.innerLayout||new I.ConcentricLayout({sortBy:"id"});return ie.center=[0,0],ie.preventOverlap=!0,ie.nodeSpacing=U,(A||[]).forEach(function(ne){(0,F.traverseTreeUp)(ne,function(q){var K,ee=P?.(q)||10;if((0,F.isArray)(ee)&&(ee=Math.max.apply(Math,ee)),null!==(K=q.children)&&void 0!==K&&K.length){var ae=q.children.map(function(de){return"combo"===de.itemType?z[de.id]:Q(Q({},w[de.id]||{}),de)}),re=ae.map(function(de){return de.id}),oe={nodes:ae,edges:S.filter(function(de){return re.includes(de.source)&&re.includes(de.target)})},ve=1/0;ae.forEach(function(de){var ke;de.size||(de.size=(null===(ke=z[de.id])||void 0===ke?void 0:ke.size)||M?.(de)||[30,30]),(0,F.isNumber)(de.size)&&(de.size=[de.size,de.size]),ve>de.size[0]&&(ve=de.size[0]),ve>de.size[1]&&(ve=de.size[1])}),ie.layout(oe);var we=(0,F.getLayoutBBox)(ae),_e=we.minX,me=we.minY,Ce=we.maxX,fe=we.maxY,be={x:(Ce+_e)/2,y:(fe+me)/2};oe.nodes.forEach(function(de){de.x-=be.x,de.y-=be.y});var te=Math.max(Ce-_e,fe-me,ve)+2*ee;z[q.id]={id:q.id,nodes:ae,size:[te,te]}}else"combo"===q.itemType&&(z[q.id]={id:q.id,nodes:[],size:ee?[2*ee,2*ee]:[30,30]});return!0})}),z},b.prototype.initVals=function(){var M,S,w=this,y=w.nodeSize,A=w.spacing;if(S=(0,F.isNumber)(A)?function(){return A}:(0,F.isFunction)(A)?A:function(){return 0},this.spacing=S,y)if((0,F.isFunction)(y))M=function(q){var K=y(q),ee=S(q);return(0,F.isArray)(q.size)?((q.size[0]>q.size[1]?q.size[0]:q.size[1])+ee)/2:((K||10)+ee)/2};else if((0,F.isArray)(y)){var U=(y[0]>y[1]?y[0]:y[1])/2;M=function(q){return U+S(q)/2}}else{var z=y/2;M=function(q){return z+S(q)/2}}else M=function(q){var K=S(q);return q.size?(0,F.isArray)(q.size)?((q.size[0]>q.size[1]?q.size[0]:q.size[1])+K)/2:(0,F.isObject)(q.size)?((q.size.width>q.size.height?q.size.width:q.size.height)+K)/2:(q.size+K)/2:10+K/2};this.nodeSize=M;var ne,ie=w.comboPadding;ne=(0,F.isNumber)(ie)?function(){return ie}:(0,F.isArray)(ie)?function(){return Math.max.apply(null,ie)}:(0,F.isFunction)(ie)?ie:function(){return 0},this.comboPadding=ne},b.prototype.getType=function(){return"comboCombined"},b}(k.Base);V.ComboCombinedLayout=x},4430:function(Qt,V,G){"use strict";var F,B=this&&this.__extends||(F=function(I,x){return(F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,b){E.__proto__=b}||function(E,b){for(var w in b)Object.prototype.hasOwnProperty.call(b,w)&&(E[w]=b[w])})(I,x)},function(I,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function E(){this.constructor=I}F(I,x),I.prototype=null===x?Object.create(x):(E.prototype=x.prototype,new E)});Object.defineProperty(V,"__esModule",{value:!0}),V.ComboForceLayout=void 0;var Q=G(8792),j=G(7602),k=function(F){function I(x){var E=F.call(this)||this;return E.center=[0,0],E.maxIteration=100,E.gravity=10,E.comboGravity=10,E.linkDistance=10,E.alpha=1,E.alphaMin=.001,E.alphaDecay=1-Math.pow(E.alphaMin,1/300),E.alphaTarget=0,E.velocityDecay=.6,E.edgeStrength=.6,E.nodeStrength=30,E.preventOverlap=!1,E.preventNodeOverlap=!1,E.preventComboOverlap=!1,E.collideStrength=void 0,E.nodeCollideStrength=.5,E.comboCollideStrength=.5,E.comboSpacing=20,E.comboPadding=10,E.optimizeRangeFactor=1,E.onTick=function(){},E.onLayoutEnd=function(){},E.depthAttractiveForceScale=1,E.depthRepulsiveForceScale=2,E.nodes=[],E.edges=[],E.combos=[],E.comboTrees=[],E.width=300,E.height=300,E.bias=[],E.nodeMap={},E.oriComboMap={},E.indexMap={},E.comboMap={},E.previousLayouted=!1,E.updateCfg(x),E}return B(I,F),I.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},I.prototype.execute=function(){var x=this,E=x.nodes,b=x.center;if(x.comboTree={id:"comboTreeRoot",depth:-1,children:x.comboTrees},E&&0!==E.length)return 1===E.length?(E[0].x=b[0],E[0].y=b[1],void(x.onLayoutEnd&&x.onLayoutEnd())):(x.initVals(),x.run(),void(x.onLayoutEnd&&x.onLayoutEnd()));x.onLayoutEnd&&x.onLayoutEnd()},I.prototype.run=function(){var x=this,E=x.nodes,b=x.previousLayouted?x.maxIteration/5:x.maxIteration;!x.width&&typeof window<"u"&&(x.width=window.innerWidth),!x.height&&typeof window<"u"&&(x.height=window.innerHeight);var w=x.center,y=x.velocityDecay,A=x.comboMap;x.previousLayouted||x.initPos(A);for(var M=function(z){var ie=[];E.forEach(function(ne,q){ie[q]={x:0,y:0}}),x.applyCalculate(ie),x.applyComboCenterForce(ie),E.forEach(function(ne,q){!(0,j.isNumber)(ne.x)||!(0,j.isNumber)(ne.y)||(ne.x+=ie[q].x*y,ne.y+=ie[q].y*y)}),x.alpha+=(x.alphaTarget-x.alpha)*x.alphaDecay,x.onTick()},S=0;S<b;S++)M();var P=[0,0];E.forEach(function(z){!(0,j.isNumber)(z.x)||!(0,j.isNumber)(z.y)||(P[0]+=z.x,P[1]+=z.y)}),P[0]/=E.length,P[1]/=E.length;var U=[w[0]-P[0],w[1]-P[1]];E.forEach(function(z,ie){!(0,j.isNumber)(z.x)||!(0,j.isNumber)(z.y)||(z.x+=U[0],z.y+=U[1])}),x.combos.forEach(function(z){var ie=A[z.id];ie&&ie.empty&&(z.x=ie.cx||z.x,z.y=ie.cy||z.y)}),x.previousLayouted=!0},I.prototype.initVals=function(){var x=this,E=x.edges,w=x.combos,y={},A={},M={};x.nodes.forEach(function(We,bt){A[We.id]=We,M[We.id]=bt}),x.nodeMap=A,x.indexMap=M;var S={};w.forEach(function(We){S[We.id]=We}),x.oriComboMap=S,x.comboMap=x.getComboMap();var P=x.preventOverlap;x.preventComboOverlap=x.preventComboOverlap||P,x.preventNodeOverlap=x.preventNodeOverlap||P;var U=x.collideStrength;U&&(x.comboCollideStrength=U,x.nodeCollideStrength=U),x.comboCollideStrength=x.comboCollideStrength?x.comboCollideStrength:0,x.nodeCollideStrength=x.nodeCollideStrength?x.nodeCollideStrength:0;for(var z=0;z<E.length;++z){var ie=(0,j.getEdgeTerminal)(E[z],"source"),ne=(0,j.getEdgeTerminal)(E[z],"target");y[ie]?y[ie]++:y[ie]=1,y[ne]?y[ne]++:y[ne]=1}var q=[];for(z=0;z<E.length;++z)ie=(0,j.getEdgeTerminal)(E[z],"source"),ne=(0,j.getEdgeTerminal)(E[z],"target"),q[z]=y[ie]/(y[ie]+y[ne]);this.bias=q;var X,ae,K=x.nodeSize,ee=x.nodeSpacing;if(ae=(0,j.isNumber)(ee)?function(){return ee}:(0,j.isFunction)(ee)?ee:function(){return 0},this.nodeSpacing=ae,K)if((0,j.isFunction)(K))X=function(We){return K(We)};else if((0,j.isArray)(K)){var oe=(K[0]>K[1]?K[0]:K[1])/2;X=function(We){return oe}}else{var ve=K/2;X=function(We){return ve}}else X=function(We){return We.size?(0,j.isArray)(We.size)?(We.size[0]>We.size[1]?We.size[0]:We.size[1])/2:(0,j.isObject)(We.size)?(We.size.width>We.size.height?We.size.width:We.size.height)/2:We.size/2:10};this.nodeSize=X;var _e,we=x.comboSpacing;_e=(0,j.isNumber)(we)?function(){return we}:(0,j.isFunction)(we)?we:function(){return 0},this.comboSpacing=_e;var Ce,me=x.comboPadding;Ce=(0,j.isNumber)(me)?function(){return me}:(0,j.isArray)(me)?function(){return Math.max.apply(null,me)}:(0,j.isFunction)(me)?me:function(){return 0},this.comboPadding=Ce;var be,fe=this.linkDistance;fe||(fe=10),be=(0,j.isNumber)(fe)?function(We){return fe}:fe,this.linkDistance=be;var de,te=this.edgeStrength;te||(te=1),de=(0,j.isNumber)(te)?function(We){return te}:te,this.edgeStrength=de;var Ze,ke=this.nodeStrength;ke||(ke=30),Ze=(0,j.isNumber)(ke)?function(We){return ke}:ke,this.nodeStrength=Ze},I.prototype.initPos=function(x){this.nodes.forEach(function(w,y){var A=w.comboId,M=x[A];A&&M?(w.x=M.cx+100/(y+1),w.y=M.cy+100/(y+1)):(w.x=100/(y+1),w.y=100/(y+1))})},I.prototype.getComboMap=function(){var x=this,E=x.nodeMap,w=x.oriComboMap,y={};return(x.comboTrees||[]).forEach(function(A){var M=[];(0,j.traverseTreeUp)(A,function(S){if("node"===S.itemType||!w[S.id])return!0;void 0===y[S.id]&&(y[S.id]={id:S.id,name:S.id,cx:0,cy:0,count:0,depth:x.oriComboMap[S.id].depth||0,children:[]});var U=S.children;U&&U.forEach(function(ne){if(!y[ne.id]&&!E[ne.id])return!0;M.push(ne)});var z=y[S.id];if(z.cx=0,z.cy=0,0===M.length){z.empty=!0;var ie=w[S.id];z.cx=ie.x,z.cy=ie.y}return M.forEach(function(ne){if(z.count++,"node"!==ne.itemType){var q=y[ne.id];return(0,j.isNumber)(q.cx)&&(z.cx+=q.cx),void((0,j.isNumber)(q.cy)&&(z.cy+=q.cy))}var K=E[ne.id];!K||((0,j.isNumber)(K.x)&&(z.cx+=K.x),(0,j.isNumber)(K.y)&&(z.cy+=K.y))}),z.cx/=z.count||1,z.cy/=z.count||1,z.children=M,!0})}),y},I.prototype.applyComboCenterForce=function(x){var E=this,w=E.comboGravity||E.gravity,y=this.alpha,M=E.indexMap,S=E.nodeMap,P=E.comboMap;(E.comboTrees||[]).forEach(function(U){(0,j.traverseTreeUp)(U,function(z){if("node"===z.itemType)return!0;if(!P[z.id])return!0;var ne=P[z.id],q=(ne.depth+1)/10*.5,K=ne.cx,ee=ne.cy;return ne.cx=0,ne.cy=0,ne.children.forEach(function(X){if("node"!==X.itemType){var ae=P[X.id];return ae&&(0,j.isNumber)(ae.cx)&&(ne.cx+=ae.cx),void(ae&&(0,j.isNumber)(ae.cy)&&(ne.cy+=ae.cy))}var re=S[X.id],oe=re.x-K||.005,ve=re.y-ee||.005,we=Math.sqrt(oe*oe+ve*ve),_e=M[re.id],me=w*y/we*q;x[_e].x-=oe*me,x[_e].y-=ve*me,(0,j.isNumber)(re.x)&&(ne.cx+=re.x),(0,j.isNumber)(re.y)&&(ne.cy+=re.y)}),ne.cx/=ne.count||1,ne.cy/=ne.count||1,!0})})},I.prototype.applyCalculate=function(x){var E=this,b=E.comboMap,w=E.nodes,y={};w.forEach(function(M,S){w.forEach(function(P,U){if(!(S<U)){var z=M.x-P.x||.005,ie=M.y-P.y||.005,ne=z*z+ie*ie,q=Math.sqrt(ne);ne<1&&(ne=q),y["".concat(M.id,"-").concat(P.id)]={vx:z,vy:ie,vl2:ne,vl:q},y["".concat(P.id,"-").concat(M.id)]={vl2:ne,vl:q,vx:-z,vy:-ie}}})}),E.updateComboSizes(b),E.calRepulsive(x,y),E.calAttractive(x,y),E.preventComboOverlap&&E.comboNonOverlapping(x,b)},I.prototype.updateComboSizes=function(x){var E=this,w=E.nodeMap,y=E.nodeSize,A=E.comboSpacing,M=E.comboPadding;(E.comboTrees||[]).forEach(function(S){var P=[];(0,j.traverseTreeUp)(S,function(U){if("node"===U.itemType)return!0;var z=x[U.id];if(!z)return!1;var ie=U.children;ie&&ie.forEach(function(K){!x[K.id]&&!w[K.id]||P.push(K)}),z.minX=1/0,z.minY=1/0,z.maxX=-1/0,z.maxY=-1/0,P.forEach(function(K){if("node"!==K.itemType)return!0;var ee=w[K.id];if(!ee)return!0;var X=y(ee),ae=ee.x-X,re=ee.y-X,oe=ee.x+X,ve=ee.y+X;z.minX>ae&&(z.minX=ae),z.minY>re&&(z.minY=re),z.maxX<oe&&(z.maxX=oe),z.maxY<ve&&(z.maxY=ve)});var ne=E.oriComboMap[U.id].size||10;(0,j.isArray)(ne)&&(ne=ne[0]);var q=Math.max(z.maxX-z.minX,z.maxY-z.minY,ne);return z.r=q/2+A(z)/2+M(z),!0})})},I.prototype.comboNonOverlapping=function(x,E){var b=this,y=b.comboCollideStrength,A=b.indexMap,M=b.nodeMap;(0,j.traverseTreeUp)(b.comboTree,function(S){if(!E[S.id]&&!M[S.id]&&"comboTreeRoot"!==S.id)return!1;var P=S.children;return P&&P.length>1&&P.forEach(function(U,z){if("node"===U.itemType)return!1;var ie=E[U.id];!ie||P.forEach(function(ne,q){if(z<=q||"node"===ne.itemType)return!1;var K=E[ne.id];if(!K)return!1;var ee=ie.cx-K.cx||.005,X=ie.cy-K.cy||.005,ae=ee*ee+X*X,re=ie.r||1,oe=K.r||1,ve=re+oe,we=oe*oe,_e=re*re;if(ae<ve*ve){var me=U.children;if(!me||0===me.length)return!1;var Ce=ne.children;if(!Ce||0===Ce.length)return!1;var fe=Math.sqrt(ae),be=(ve-fe)/fe*y,te=ee*be,de=X*be,ke=we/(_e+we),Ze=1-ke;me.forEach(function(We){if("node"!==We.itemType)return!1;if(M[We.id]){var bt=A[We.id];Ce.forEach(function(Ft){if("node"!==Ft.itemType||!M[Ft.id])return!1;var Pt=A[Ft.id];x[bt].x+=te*ke,x[bt].y+=de*ke,x[Pt].x-=te*Ze,x[Pt].y-=de*Ze})}})}})}),!0})},I.prototype.calRepulsive=function(x,E){var b=this,w=b.nodes,y=b.width*b.optimizeRangeFactor,A=b.nodeStrength,M=b.alpha,S=b.nodeCollideStrength,P=b.preventNodeOverlap,U=b.nodeSize,z=b.nodeSpacing,ie=b.depthRepulsiveForceScale,ne=b.center;w.forEach(function(q,K){if(q.x&&q.y){if(ne){var ee=b.gravity,X=q.x-ne[0]||.005,ae=q.y-ne[1]||.005,re=Math.sqrt(X*X+ae*ae);x[K].x-=X*ee*M/re,x[K].y-=ae*ee*M/re}w.forEach(function(oe,ve){if(K!==ve&&oe.x&&oe.y){var we=E["".concat(q.id,"-").concat(oe.id)],_e=we.vl2,me=we.vl;if(!(me>y)){var Ce=E["".concat(q.id,"-").concat(oe.id)],fe=Ce.vx,be=Ce.vy,te=Math.log(Math.abs(oe.depth-q.depth)/10)+1||1;te=te<1?1:te,oe.comboId!==q.comboId&&(te+=1);var de=te?Math.pow(ie,te):1,ke=A(oe)*M/_e*de;if(x[K].x+=fe*ke,x[K].y+=be*ke,K<ve&&P){var Ze=U(q)+z(q)||1,We=U(oe)+z(oe)||1,bt=Ze+We;if(_e<bt*bt){var Ft=(bt-me)/me*S,Pt=We*We,Xe=Pt/(Ze*Ze+Pt),yt=fe*Ft,Ct=be*Ft;x[K].x+=yt*Xe,x[K].y+=Ct*Xe,x[ve].x-=yt*(Xe=1-Xe),x[ve].y-=Ct*Xe}}}}})}})},I.prototype.calAttractive=function(x,E){var b=this,y=b.linkDistance,A=b.alpha,M=b.edgeStrength,S=b.bias,P=b.depthAttractiveForceScale;b.edges.forEach(function(U,z){var ie=(0,j.getEdgeTerminal)(U,"source"),ne=(0,j.getEdgeTerminal)(U,"target");if(ie&&ne&&ie!==ne){var q=b.indexMap[ie],K=b.indexMap[ne],ee=b.nodeMap[ie],X=b.nodeMap[ne];if(ee&&X){var ae=ee.depth===X.depth?0:Math.log(Math.abs(ee.depth-X.depth)/10);ee.comboId===X.comboId&&(ae/=2);var re=ae?Math.pow(P,ae):1;if(ee.comboId!==X.comboId&&1===re?re=P/2:ee.comboId===X.comboId&&(re=2),(0,j.isNumber)(X.x)&&(0,j.isNumber)(ee.x)&&(0,j.isNumber)(X.y)&&(0,j.isNumber)(ee.y)){var oe=E["".concat(ne,"-").concat(ie)],ve=oe.vl,we=oe.vx,_e=oe.vy,me=(ve-y(U))/ve*A*M(U)*re,Ce=we*me,fe=_e*me,be=S[z];x[K].x-=Ce*be,x[K].y-=fe*be,x[q].x+=Ce*(1-be),x[q].y+=fe*(1-be)}}}})},I.prototype.getType=function(){return"comboForce"},I}(Q.Base);V.ComboForceLayout=k},2172:function(Qt,V,G){"use strict";var F,B=this&&this.__extends||(F=function(I,x){return(F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,b){E.__proto__=b}||function(E,b){for(var w in b)Object.prototype.hasOwnProperty.call(b,w)&&(E[w]=b[w])})(I,x)},function(I,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function E(){this.constructor=I}F(I,x),I.prototype=null===x?Object.create(x):(E.prototype=x.prototype,new E)});Object.defineProperty(V,"__esModule",{value:!0}),V.ConcentricLayout=void 0;var Q=G(7602),k=function(F){function I(x){var E=F.call(this)||this;return E.nodeSize=30,E.minNodeSpacing=10,E.nodeSpacing=10,E.preventOverlap=!1,E.equidistant=!1,E.startAngle=1.5*Math.PI,E.clockwise=!0,E.sortBy="degree",E.nodes=[],E.edges=[],E.width=300,E.height=300,E.onLayoutEnd=function(){},E.updateCfg(x),E}return B(I,F),I.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},I.prototype.execute=function(){var x,E,b=this,w=b.nodes,y=b.edges,A=w.length;if(0!==A){!b.width&&typeof window<"u"&&(b.width=window.innerWidth),!b.height&&typeof window<"u"&&(b.height=window.innerHeight),b.center||(b.center=[b.width/2,b.height/2]);var M=b.center;if(1===A)return w[0].x=M[0],w[0].y=M[1],void(null===(E=b.onLayoutEnd)||void 0===E||E.call(b));var z,S=b.nodeSize,P=b.nodeSpacing,U=[],ie=0;z=(0,Q.isArray)(S)?Math.max(S[0],S[1]):S,(0,Q.isArray)(P)?ie=Math.max(P[0],P[1]):(0,Q.isNumber)(P)&&(ie=P),w.forEach(function(te){U.push(te);var de=z;(0,Q.isArray)(te.size)?de=Math.max(te.size[0],te.size[1]):(0,Q.isNumber)(te.size)?de=te.size:(0,Q.isObject)(te.size)&&(de=Math.max(te.size.width,te.size.height)),z=Math.max(z,de),(0,Q.isFunction)(P)&&(ie=Math.max(P(te),ie))}),b.clockwise=void 0!==b.counterclockwise?!b.counterclockwise:b.clockwise;var ne={},q={};if(U.forEach(function(te,de){ne[te.id]=te,q[te.id]=de}),!("degree"!==b.sortBy&&(0,Q.isString)(b.sortBy)&&void 0!==U[0][b.sortBy]||(b.sortBy="degree",(0,Q.isNumber)(w[0].degree)))){var K=(0,Q.getDegree)(w.length,q,y);U.forEach(function(te,de){te.degree=K[de].all})}U.sort(function(te,de){return de[b.sortBy]-te[b.sortBy]}),b.maxValueNode=U[0],b.maxLevelDiff=b.maxLevelDiff||b.maxValueNode[b.sortBy]/4;var ee=[[]],X=ee[0];U.forEach(function(te){if(X.length>0){var de=Math.abs(X[0][b.sortBy]-te[b.sortBy]);b.maxLevelDiff&&de>=b.maxLevelDiff&&ee.push(X=[])}X.push(te)});var ae=z+(ie||b.minNodeSpacing);if(!b.preventOverlap){var re=ee.length>0&&ee[0].length>1,oe=Math.min(b.width,b.height)/2-ae;ae=Math.min(ae,oe/(ee.length+(re?1:0)))}var we=0;if(ee.forEach(function(te){var de=b.sweep;void 0===de&&(de=2*Math.PI-2*Math.PI/te.length);var ke=te.dTheta=de/Math.max(1,te.length-1);if(te.length>1&&b.preventOverlap){var Ze=Math.cos(ke)-Math.cos(0),We=Math.sin(ke)-Math.sin(0),bt=Math.sqrt(ae*ae/(Ze*Ze+We*We));we=Math.max(bt,we)}te.r=we,we+=ae}),b.equidistant){for(var _e=0,me=0,Ce=0;Ce<ee.length;Ce++)_e=Math.max(_e,ee[Ce].r-me);me=0,ee.forEach(function(te,de){0===de&&(me=te.r),te.r=me,me+=_e})}return ee.forEach(function(te){var de=te.dTheta,ke=te.r;te.forEach(function(Ze,We){var bt=b.startAngle+(b.clockwise?1:-1)*de*We;Ze.x=M[0]+ke*Math.cos(bt),Ze.y=M[1]+ke*Math.sin(bt)})}),b.onLayoutEnd&&b.onLayoutEnd(),{nodes:w,edges:y}}null===(x=b.onLayoutEnd)||void 0===x||x.call(b)},I.prototype.getType=function(){return"concentric"},I}(G(8792).Base);V.ConcentricLayout=k},981:(Qt,V)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.FORCE_LAYOUT_TYPE_MAP=V.LAYOUT_MESSAGE=void 0,V.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},V.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0}},8786:function(Qt,V,G){"use strict";var E,B=this&&this.__extends||(E=function(b,w){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,A){y.__proto__=A}||function(y,A){for(var M in A)Object.prototype.hasOwnProperty.call(A,M)&&(y[M]=A[M])})(b,w)},function(b,w){if("function"!=typeof w&&null!==w)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function y(){this.constructor=b}E(b,w),b.prototype=null===w?Object.create(w):(y.prototype=w.prototype,new y)}),Q=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(V,"__esModule",{value:!0}),V.DagreLayout=void 0;var j=Q(G(2977)),k=G(7602),F=G(8792),I=G(8863),x=function(E){function b(w){var y=E.call(this)||this;return y.rankdir="TB",y.nodesep=50,y.ranksep=50,y.controlPoints=!1,y.sortByCombo=!1,y.edgeLabelSpace=!0,y.radial=!1,y.nodes=[],y.edges=[],y.onLayoutEnd=function(){},y.layoutNode=function(A){var P=y.nodes.find(function(z){return z.id===A});return!P||!1!==P.layout},y.updateCfg(w),y}return B(b,E),b.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}},b.prototype.execute=function(){var y,A,M,w=this,S=this,P=S.nodes,U=S.nodeSize,z=S.rankdir,ie=S.combos,ne=S.begin,q=S.radial,K=S.comboEdges,ee=void 0===K?[]:K,X=S.vedges,ae=void 0===X?[]:X;if(P){var re=S.edges||[],oe=new I.Graph({multigraph:!0,compound:!0});S.nodeMap={};var we,ve={};P.forEach(function(zt){S.nodeMap[zt.id]=zt,zt.comboId&&(ve[zt.comboId]=ve[zt.comboId]||[],ve[zt.comboId].push(zt.id))}),we=U?(0,k.isArray)(U)?function(){return U}:function(){return[U,U]}:function(zt){return zt.size?(0,k.isArray)(zt.size)?zt.size:(0,k.isObject)(zt.size)?[zt.size.width||40,zt.size.height||40]:[zt.size,zt.size]:[40,40]};var _e=(0,k.getFunc)(S.ranksep,50,S.ranksepFunc),me=(0,k.getFunc)(S.nodesep,50,S.nodesepFunc),Ce=me,fe=_e;("LR"===z||"RL"===z)&&(Ce=_e,fe=me),oe.setDefaultEdgeLabel(function(){return{}}),oe.setGraph(S);var be={};this.sortByCombo&&ie&&ie.forEach(function(zt){if(be[zt.id]=zt,zt.collapsed){var Xt=we(zt),Tn=fe(zt),gn=Ce(zt);oe.setNode(zt.id,{width:Xt[0]+2*gn,height:Xt[1]+2*Tn})}!zt.parentId||(be[zt.parentId]||oe.setNode(zt.parentId,{}),oe.setParent(zt.id,zt.parentId))}),P.filter(function(zt){return!1!==zt.layout}).forEach(function(zt){var Xt=we(zt),Tn=fe(zt),gn=Ce(zt),kn=Xt[0]+2*gn,ir=Xt[1]+2*Tn,cr=zt.layer;(0,k.isNumber)(cr)?oe.setNode(zt.id,{width:kn,height:ir,layer:cr}):oe.setNode(zt.id,{width:kn,height:ir}),w.sortByCombo&&zt.comboId&&(be[zt.comboId]||(be[zt.comboId]={id:zt.comboId},oe.setNode(zt.comboId,{})),oe.setParent(zt.id,zt.comboId))}),re.forEach(function(zt){var Xt=(0,k.getEdgeTerminal)(zt,"source"),Tn=(0,k.getEdgeTerminal)(zt,"target");w.layoutNode(Xt)&&w.layoutNode(Tn)&&oe.setEdge(Xt,Tn,{weight:zt.weight||1})}),null===(y=ee?.concat(ae||[]))||void 0===y||y.forEach(function(zt){var Xt,Tn,gn=zt.source,kn=zt.target,ir=null!==(Xt=be[gn])&&void 0!==Xt&&Xt.collapsed?[gn]:ve[gn]||[gn],cr=null!==(Tn=be[kn])&&void 0!==Tn&&Tn.collapsed?[kn]:ve[kn]||[kn];ir.forEach(function(Bn){cr.forEach(function(xr){oe.setEdge(Bn,xr,{weight:zt.weight||1})})})});var te=void 0;!(null===(A=S.preset)||void 0===A)&&A.nodes&&(te=new I.Graph({multigraph:!0,compound:!0}),S.preset.nodes.forEach(function(zt){te?.setNode(zt.id,zt)})),j.default.layout(oe,{prevGraph:te,edgeLabelSpace:S.edgeLabelSpace,keepNodeOrder:Boolean(!!S.nodeOrder),nodeOrder:S.nodeOrder});var de=[0,0];if(ne){var ke=1/0,Ze=1/0;oe.nodes().forEach(function(zt){var Xt=oe.node(zt);ke>Xt.x&&(ke=Xt.x),Ze>Xt.y&&(Ze=Xt.y)}),oe.edges().forEach(function(zt){var Xt;null===(Xt=oe.edge(zt).points)||void 0===Xt||Xt.forEach(function(gn){ke>gn.x&&(ke=gn.x),Ze>gn.y&&(Ze=gn.y)})}),de[0]=ne[0]-ke,de[1]=ne[1]-Ze}if(q){var bt=this.focusNode,Ft=this.ranksep,Pt=this.getRadialPos,Xe=(0,k.isString)(bt)?bt:bt?.id,yt=Xe?null===(M=oe.node(Xe))||void 0===M?void 0:M._rank:0,Ct=[],pt="LR"===z||"RL"===z,xt=pt?"y":"x",Fe=pt?"height":"width",ut=1/0,Ut=-1/0;oe.nodes().forEach(function(zt){var Xt=oe.node(zt),Tn=P.findIndex(function(xr){return xr.id===zt});if(P[Tn]){var gn=me(P[Tn]);if(0===yt)Ct[Xt._rank]||(Ct[Xt._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),Ct[Xt._rank].nodes.push(zt),Ct[Xt._rank].totalWidth+=2*gn+Xt[Fe],Ct[Xt._rank].maxSize<Math.max(Xt.width,Xt.height)&&(Ct[Xt._rank].maxSize=Math.max(Xt.width,Xt.height));else{var kn=Xt._rank-yt;if(0===kn)Ct[kn]||(Ct[kn]={nodes:[],totalWidth:0,maxSize:-1/0}),Ct[kn].nodes.push(zt),Ct[kn].totalWidth+=2*gn+Xt[Fe],Ct[kn].maxSize<Math.max(Xt.width,Xt.height)&&(Ct[kn].maxSize=Math.max(Xt.width,Xt.height));else{var ir=Math.abs(kn);Ct[ir]||(Ct[ir]={left:[],right:[],totalWidth:0,maxSize:-1/0}),Ct[ir].totalWidth+=2*gn+Xt[Fe],Ct[ir].maxSize<Math.max(Xt.width,Xt.height)&&(Ct[ir].maxSize=Math.max(Xt.width,Xt.height)),kn<0?Ct[ir].left.push(zt):Ct[ir].right.push(zt)}}var cr=Xt[xt]-Xt[Fe]/2-gn,Bn=Xt[xt]+Xt[Fe]/2+gn;cr<ut&&(ut=cr),Bn>Ut&&(Ut=Bn)}});var $e=Ft||50,Te={},tt=(Ut-ut)/.9,Mt=[.5*(ut+Ut-tt),.5*(ut+Ut+tt)],Wt=function(zt,Xt,Tn,gn){void 0===Tn&&(Tn=-1/0),void 0===gn&&(gn=[0,1]);var kn=Tn;return zt.forEach(function(ir){var cr=oe.node(ir);Te[ir]=Xt;var Bn=Pt(cr[xt],Mt,tt,Xt,gn),xr=Bn.x,jn=Bn.y,Rn=P.findIndex(function(Mr){return Mr.id===ir});if(P[Rn]){P[Rn].x=xr+de[0],P[Rn].y=jn+de[1],P[Rn]._order=cr._order;var er=_e(P[Rn]);kn<er&&(kn=er)}}),kn},un=!0;Ct.forEach(function(zt){var Xt,Tn,gn,kn,ir,cr,Bn;if(null!==(Xt=zt?.nodes)&&void 0!==Xt&&Xt.length||null!==(Tn=zt?.left)&&void 0!==Tn&&Tn.length||null!==(gn=zt?.right)&&void 0!==gn&&gn.length){if(un&&1===zt.nodes.length){var xr=P.findIndex(function(er){return er.id===zt.nodes[0]});if(xr<=-1)return;return P[xr].x=de[0],P[xr].y=de[1],Te[zt.nodes[0]]=0,$e=_e(P[xr]),void(un=!1)}$e=Math.max($e,zt.totalWidth/(2*Math.PI));var jn=-1/0;if(0===yt||(null===(kn=zt.nodes)||void 0===kn?void 0:kn.length))jn=Wt(zt.nodes,$e,jn,[0,1]);else{var Rn=(null===(ir=zt.left)||void 0===ir?void 0:ir.length)/((null===(cr=zt.left)||void 0===cr?void 0:cr.length)+(null===(Bn=zt.right)||void 0===Bn?void 0:Bn.length));jn=Wt(zt.left,$e,jn,[0,Rn]),jn=Wt(zt.right,$e,jn,[Rn+.05,1])}$e+=jn,un=!1}}),oe.edges().forEach(function(zt){var Xt,Tn,gn,kn=oe.edge(zt),ir=re.findIndex(function(yr){var gr=(0,k.getEdgeTerminal)(yr,"source"),Oi=(0,k.getEdgeTerminal)(yr,"target");return gr===zt.v&&Oi===zt.w});if(!(ir<=-1)&&S.edgeLabelSpace&&S.controlPoints&&"loop"!==re[ir].type){var cr="x"===xt?"y":"x",Bn=null===(Xt=kn?.points)||void 0===Xt?void 0:Xt.slice(1,kn.points.length-1),xr=[],jn=null===(Tn=oe.node(zt.v))||void 0===Tn?void 0:Tn[cr],Rn=jn-(null===(gn=oe.node(zt.w))||void 0===gn?void 0:gn[cr]),er=Te[zt.v],Mr=er-Te[zt.w];Bn?.forEach(function(yr){var Oi=Pt(yr[xt],Mt,tt,(yr[cr]-jn)/Rn*Mr+er);xr.push({x:Oi.x+de[0],y:Oi.y+de[1]})}),re[ir].controlPoints=xr}})}else oe.nodes().forEach(function(zt){var Xt=oe.node(zt);if(Xt){var Tn=w.nodeMap[zt];Tn||(Tn=ie?.find(function(gn){return gn.id===zt})),Tn&&(Tn.x=Xt.x+de[0],Tn.y=Xt.y+de[1],Tn._order=Xt._order)}}),oe.edges().forEach(function(zt){var Xt,Tn=oe.edge(zt),gn=re.findIndex(function(kn){var ir=(0,k.getEdgeTerminal)(kn,"source"),cr=(0,k.getEdgeTerminal)(kn,"target");return ir===zt.v&&cr===zt.w});gn<=-1||S.edgeLabelSpace&&S.controlPoints&&"loop"!==re[gn].type&&(re[gn].controlPoints=(null===(Xt=Tn?.points)||void 0===Xt?void 0:Xt.slice(1,Tn.points.length-1))||[],re[gn].controlPoints.forEach(function(kn){kn.x+=de[0],kn.y+=de[1]}))});return S.onLayoutEnd&&S.onLayoutEnd(),{nodes:P,edges:re}}},b.prototype.getRadialPos=function(w,y,A,M,S){void 0===S&&(S=[0,1]);var P=(w-y[0])/A,U=2*(P=P*(S[1]-S[0])+S[0])*Math.PI;return{x:Math.cos(U)*M,y:Math.sin(U)*M}},b.prototype.getType=function(){return"dagre"},b}(F.Base);V.DagreLayout=x},8863:function(Qt,V,G){"use strict";var k,B=this&&this.__extends||(k=function(F,I){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,E){x.__proto__=E}||function(x,E){for(var b in E)Object.prototype.hasOwnProperty.call(E,b)&&(x[b]=E[b])})(F,I)},function(F,I){if("function"!=typeof I&&null!==I)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");function x(){this.constructor=F}k(F,I),F.prototype=null===I?Object.create(I):(x.prototype=I.prototype,new x)});Object.defineProperty(V,"__esModule",{value:!0}),V.Graph=void 0;var j=function(k){function F(){return null!==k&&k.apply(this,arguments)||this}return B(F,k),F}(G(7782).Graph);V.Graph=j},2977:function(Qt,V,G){"use strict";var B=this&&this.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};Object.defineProperty(V,"__esModule",{value:!0});var Q=B(G(2236)),j=G(6668);V.default={layout:Q.default,util:{time:j.time,notime:j.notime}}},915:function(Qt,V,G){"use strict";var B=this&&this.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(V,"__esModule",{value:!0});var Q=B(G(1204));V.default={run:function(I){var b;("greedy"===I.graph().acyclicer?(0,Q.default)(I,(b=I,function(w){var y;return(null===(y=b.edge(w))||void 0===y?void 0:y.weight)||1})):function(I){var x=[],E={},b={},w=function(y){var A;b[y]||(b[y]=!0,E[y]=!0,null===(A=I.outEdges(y))||void 0===A||A.forEach(function(M){E[M.w]?x.push(M):w(M.w)}),delete E[y])};return I.nodes().forEach(w),x}(I))?.forEach(function(b){var w=I.edge(b);I.removeEdgeObj(b),w.forwardName=b.name,w.reversed=!0,I.setEdge(b.w,b.v,w,"rev-".concat(Math.random()))})},undo:function(I){I.edges().forEach(function(x){var E=I.edge(x);if(E.reversed){I.removeEdgeObj(x);var b=E.forwardName;delete E.reversed,delete E.forwardName,I.setEdge(x.w,x.v,E,b)}})}}},4885:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});var B=G(6668),j=function(k,F,I,x,E,b){var y=E[F][b-1],A=(0,B.addDummyNode)(k,"border",{rank:b,borderType:F,width:0,height:0},I);E[F][b]=A,k.setParent(A,x),y&&k.setEdge(y,A,{weight:1})};V.default=function(k){var F,I=function(x){var E=k.children(x),b=k.node(x);if(E?.length&&E.forEach(function(A){return I(A)}),b.hasOwnProperty("minRank")){b.borderLeft=[],b.borderRight=[];for(var w=b.minRank,y=b.maxRank+1;w<y;w+=1)j(k,"borderLeft","_bl",x,b,w),j(k,"borderRight","_br",x,b,w)}};null===(F=k.children())||void 0===F||F.forEach(function(x){return I(x)})}},159:(Qt,V)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});var Q=function(E){E.nodes().forEach(function(b){j(E.node(b))}),E.edges().forEach(function(b){j(E.edge(b))})},j=function(E){var b=E.width;E.width=E.height,E.height=b},F=function(E){E?.y&&(E.y=-E.y)},x=function(E){var b=E.x;E.x=E.y,E.y=b};V.default={adjust:function(E){var b,w=null===(b=E.graph().rankdir)||void 0===b?void 0:b.toLowerCase();("lr"===w||"rl"===w)&&Q(E)},undo:function(E){var b,w=null===(b=E.graph().rankdir)||void 0===b?void 0:b.toLowerCase();("bt"===w||"rl"===w)&&function(E){E.nodes().forEach(function(b){F(E.node(b))}),E.edges().forEach(function(b){var w,y=E.edge(b);null===(w=y.points)||void 0===w||w.forEach(function(A){return F(A)}),y.hasOwnProperty("y")&&F(y)})}(E),("lr"===w||"rl"===w)&&(function(E){E.nodes().forEach(function(b){x(E.node(b))}),E.edges().forEach(function(b){var w,y=E.edge(b);null===(w=y.points)||void 0===w||w.forEach(function(A){return x(A)}),y.hasOwnProperty("x")&&x(y)})}(E),Q(E))}}},65:(Qt,V)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});var G=function(j,k){if("next"!==j&&"prev"!==j)return k},B=function(j){j.prev.next=j.next,j.next.prev=j.prev,delete j.next,delete j.prev},Q=function(){function j(){var k={};k.prev=k,k.next=k.prev,this.shortcut=k}return j.prototype.dequeue=function(){var k=this.shortcut,F=k.prev;if(F&&F!==k)return B(F),F},j.prototype.enqueue=function(k){var F=this.shortcut;k.prev&&k.next&&B(k),k.next=F.next,F.next.prev=k,F.next=k,k.prev=F},j.prototype.toString=function(){for(var k=[],F=this.shortcut,I=F.prev;I!==F;)k.push(JSON.stringify(I,G)),I=I?.prev;return"[".concat(k.join(", "),"]")},j}();V.default=Q},1204:function(Qt,V,G){"use strict";var M,B=this&&this.__extends||(M=function(S,P){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,z){U.__proto__=z}||function(U,z){for(var ie in z)Object.prototype.hasOwnProperty.call(z,ie)&&(U[ie]=z[ie])})(S,P)},function(S,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function U(){this.constructor=S}M(S,P),S.prototype=null===P?Object.create(P):(U.prototype=P.prototype,new U)}),Q=this&&this.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(V,"__esModule",{value:!0});var j=Q(G(65)),k=G(7782),F=function(M){function S(){return null!==M&&M.apply(this,arguments)||this}return B(S,M),S}(j.default),I=function(M){function S(){return null!==M&&M.apply(this,arguments)||this}return B(S,M),S}(k.Graph),x=function(){return 1},w=function(M,S,P,U,z){var ie,ne,q=[];return null===(ie=M.inEdges(U.v))||void 0===ie||ie.forEach(function(K){var ee=M.edge(K),X=M.node(K.v);z&&q.push({v:K.v,w:K.w,in:0,out:0}),void 0===X.out&&(X.out=0),X.out-=ee,A(S,P,X)}),null===(ne=M.outEdges(U.v))||void 0===ne||ne.forEach(function(K){var ee=M.edge(K),ae=M.node(K.w);void 0===ae.in&&(ae.in=0),ae.in-=ee,A(S,P,ae)}),M.removeNode(U.v),z?q:void 0},A=function(M,S,P){P.out?P.in?M[P.out-P.in+S].enqueue(P):M[M.length-1].enqueue(P):M[0].enqueue(P)};V.default=function(M,S){var P;if(M.nodeCount()<=1)return[];var U=function(M,S){var P=new I,U=0,z=0;M.nodes().forEach(function(ee){P.setNode(ee,{v:ee,in:0,out:0})}),M.edges().forEach(function(ee){var X=P.edge(ee)||0,ae=S?.(ee)||1;P.setEdge(ee.v,ee.w,X+ae),z=Math.max(z,P.node(ee.v).out+=ae),U=Math.max(U,P.node(ee.w).in+=ae)});for(var ie=[],ne=z+U+3,q=0;q<ne;q++)ie.push(new F);var K=U+1;return P.nodes().forEach(function(ee){A(ie,K,P.node(ee))}),{buckets:ie,zeroIdx:K,graph:P}}(M,S||x);return null===(P=function(M,S,P){for(var ne,U=[],z=S[S.length-1],ie=S[0];M.nodeCount();){for(;ne=ie.dequeue();)w(M,S,P,ne);for(;ne=z.dequeue();)w(M,S,P,ne);if(M.nodeCount())for(var q=S.length-2;q>0;--q)if(ne=S[q].dequeue()){U=U.concat(w(M,S,P,ne,!0));break}}return U}(U.graph,U.buckets,U.zeroIdx).map(function(ie){return M.outEdges(ie.v,ie.w)}))||void 0===P?void 0:P.flat()}},2236:function(Qt,V,G){"use strict";var B=this&&this.__assign||function(){return B=Object.assign||function(Xe){for(var yt,Ct=1,pt=arguments.length;Ct<pt;Ct++)for(var xt in yt=arguments[Ct])Object.prototype.hasOwnProperty.call(yt,xt)&&(Xe[xt]=yt[xt]);return Xe},B.apply(this,arguments)},Q=this&&this.__importDefault||function(Xe){return Xe&&Xe.__esModule?Xe:{default:Xe}};Object.defineProperty(V,"__esModule",{value:!0});var j=Q(G(915)),k=Q(G(7849)),F=Q(G(5127)),I=G(6668),x=Q(G(8727)),E=Q(G(2005)),b=Q(G(4885)),w=Q(G(159)),y=Q(G(1967)),A=Q(G(7390)),M=Q(G(5884)),S=G(8863),ne=["nodesep","edgesep","ranksep","marginx","marginy"],q={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},K=["acyclicer","ranker","rankdir","align"],ee=["width","height","layer","fixorder"],X={width:0,height:0},ae=["minlen","weight","width","height","labeloffset"],re={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},oe=["labelpos"],_e=function(Xe){Xe.edges().forEach(function(yt){var Ct=Xe.edge(yt);if(Ct.width&&Ct.height){var pt=Xe.node(yt.v),xt=Xe.node(yt.w);(0,I.addDummyNode)(Xe,"edge-proxy",{e:yt,rank:(xt.rank-pt.rank)/2+pt.rank},"_ep")}})},me=function(Xe){var yt=0;Xe.nodes().forEach(function(Ct){var pt,xt,Fe=Xe.node(Ct);Fe.borderTop&&(Fe.minRank=null===(pt=Xe.node(Fe.borderTop))||void 0===pt?void 0:pt.rank,Fe.maxRank=null===(xt=Xe.node(Fe.borderBottom))||void 0===xt?void 0:xt.rank,yt=Math.max(yt,Fe.maxRank||-1/0))}),Xe.graph().maxRank=yt},Ce=function(Xe){Xe.nodes().forEach(function(yt){var Ct=Xe.node(yt);"edge-proxy"===Ct.dummy&&(Xe.edge(Ct.e).labelRank=Ct.rank,Xe.removeNode(yt))})},fe=function(Xe){var yt,pt,Ct=0,xt=0,Fe=Xe.graph(),ut=Fe.marginx||0,Ut=Fe.marginy||0,$e=function(Te){if(Te){var tt=Te.x,Mt=Te.y,Wt=Te.width,un=Te.height;!isNaN(tt)&&!isNaN(Wt)&&(void 0===yt&&(yt=tt-Wt/2),yt=Math.min(yt,tt-Wt/2),Ct=Math.max(Ct,tt+Wt/2)),!isNaN(Mt)&&!isNaN(un)&&(void 0===pt&&(pt=Mt-un/2),pt=Math.min(pt,Mt-un/2),xt=Math.max(xt,Mt+un/2))}};Xe.nodes().forEach(function(Te){$e(Xe.node(Te))}),Xe.edges().forEach(function(Te){var tt=Xe.edge(Te);tt?.hasOwnProperty("x")&&$e(tt)}),yt-=ut,pt-=Ut,Xe.nodes().forEach(function(Te){var tt=Xe.node(Te);tt&&(tt.x-=yt,tt.y-=pt)}),Xe.edges().forEach(function(Te){var tt,Mt=Xe.edge(Te);null===(tt=Mt.points)||void 0===tt||tt.forEach(function(Wt){Wt.x-=yt,Wt.y-=pt}),Mt.hasOwnProperty("x")&&(Mt.x-=yt),Mt.hasOwnProperty("y")&&(Mt.y-=pt)}),Fe.width=Ct-yt+ut,Fe.height=xt-pt+Ut},be=function(Xe){Xe.edges().forEach(function(yt){var Fe,ut,Ct=Xe.edge(yt),pt=Xe.node(yt.v),xt=Xe.node(yt.w);Ct.points?(Fe=Ct.points[0],ut=Ct.points[Ct.points.length-1]):(Ct.points=[],Fe=xt,ut=pt),Ct.points.unshift((0,I.intersectRect)(pt,Fe)),Ct.points.push((0,I.intersectRect)(xt,ut))})},te=function(Xe){Xe.edges().forEach(function(yt){var Ct=Xe.edge(yt);if(Ct?.hasOwnProperty("x"))switch(("l"===Ct.labelpos||"r"===Ct.labelpos)&&(Ct.width-=Ct.labeloffset),Ct.labelpos){case"l":Ct.x-=Ct.width/2+Ct.labeloffset;break;case"r":Ct.x+=Ct.width/2+Ct.labeloffset}})},de=function(Xe){Xe.edges().forEach(function(yt){var Ct,pt=Xe.edge(yt);pt.reversed&&(null===(Ct=pt.points)||void 0===Ct||Ct.reverse())})},ke=function(Xe){Xe.nodes().forEach(function(yt){var Ct,pt,xt;if(null!==(Ct=Xe.children(yt))&&void 0!==Ct&&Ct.length){var Fe=Xe.node(yt),ut=Xe.node(Fe.borderTop),Ut=Xe.node(Fe.borderBottom),$e=Xe.node(Fe.borderLeft[(null===(pt=Fe.borderLeft)||void 0===pt?void 0:pt.length)-1]),Te=Xe.node(Fe.borderRight[(null===(xt=Fe.borderRight)||void 0===xt?void 0:xt.length)-1]);Fe.width=Math.abs(Te?.x-$e?.x)||10,Fe.height=Math.abs(Ut?.y-ut?.y)||10,Fe.x=($e?.x||0)+Fe.width/2,Fe.y=(ut?.y||0)+Fe.height/2}}),Xe.nodes().forEach(function(yt){var Ct;"border"===(null===(Ct=Xe.node(yt))||void 0===Ct?void 0:Ct.dummy)&&Xe.removeNode(yt)})},Ze=function(Xe){Xe.edges().forEach(function(yt){if(yt.v===yt.w){var Ct=Xe.node(yt.v);Ct.selfEdges||(Ct.selfEdges=[]),Ct.selfEdges.push({e:yt,label:Xe.edge(yt)}),Xe.removeEdgeObj(yt)}})},We=function(Xe){(0,I.buildLayerMatrix)(Xe)?.forEach(function(Ct){var pt=0;Ct?.forEach(function(xt,Fe){var ut,Ut=Xe.node(xt);Ut.order=Fe+pt,null===(ut=Ut.selfEdges)||void 0===ut||ut.forEach(function($e){(0,I.addDummyNode)(Xe,"selfedge",{width:$e.label.width,height:$e.label.height,rank:Ut.rank,order:Fe+ ++pt,e:$e.e,label:$e.label},"_se")}),delete Ut.selfEdges})})},bt=function(Xe){Xe.nodes().forEach(function(yt){var Ct=Xe.node(yt);if("selfedge"===Ct.dummy){var pt=Xe.node(Ct.e.v),xt=pt.x+pt.width/2,Fe=pt.y,ut=Ct.x-xt,Ut=pt.height/2;Xe.setEdgeObj(Ct.e,Ct.label),Xe.removeNode(yt),Ct.label.points=[{x:xt+2*ut/3,y:Fe-Ut},{x:xt+5*ut/6,y:Fe-Ut},{y:Fe,x:xt+ut},{x:xt+5*ut/6,y:Fe+Ut},{x:xt+2*ut/3,y:Fe+Ut}],Ct.label.x=Ct.x,Ct.label.y=Ct.y}})},Ft=function(Xe,yt){var Ct={};return yt?.forEach(function(pt){void 0!==Xe[pt]&&(Ct[pt]=+Xe[pt])}),Ct},Pt=function(Xe){void 0===Xe&&(Xe={});var yt={};return Object.keys(Xe).forEach(function(Ct){yt[Ct.toLowerCase()]=Xe[Ct]}),yt};V.default=function(Xe,yt){var Ct=yt&&yt.debugTiming?I.time:I.notime;Ct("layout",function(){yt&&!yt.keepNodeOrder&&yt.prevGraph&&Ct("  inheritOrder",function(){!function(Xe,yt){Xe.nodes().forEach(function(Ct){var pt=Xe.node(Ct),xt=yt.node(Ct);void 0!==xt?(pt.fixorder=xt._order,delete xt._order):delete pt.fixorder})}(Xe,yt.prevGraph)});var pt=Ct("  buildLayoutGraph",function(){return function(Xe){var yt=new S.Graph({multigraph:!0,compound:!0}),Ct=Pt(Xe.graph()),pt={};return K?.forEach(function(xt){void 0!==Ct[xt]&&(pt[xt]=Ct[xt])}),yt.setGraph(Object.assign({},q,Ft(Ct,ne),pt)),Xe.nodes().forEach(function(xt){var Fe=Pt(Xe.node(xt)),ut=B(B({},X),Fe),Ut=Ft(ut,ee);yt.setNode(xt,Ut),yt.setParent(xt,Xe.parent(xt))}),Xe.edges().forEach(function(xt){var Fe=Pt(Xe.edge(xt)),ut={};oe?.forEach(function(Ut){void 0!==Fe[Ut]&&(ut[Ut]=Fe[Ut])}),yt.setEdgeObj(xt,Object.assign({},re,Ft(Fe,ae),ut))}),yt}(Xe)});yt&&!1===yt.edgeLabelSpace||Ct("  makeSpaceForEdgeLabels",function(){!function(Xe){var yt=Xe.graph();yt.ranksep||(yt.ranksep=0),yt.ranksep/=2,Xe.nodes().forEach(function(Ct){var pt=Xe.node(Ct);isNaN(pt.layer)||pt.layer||(pt.layer=0)}),Xe.edges().forEach(function(Ct){var pt,xt=Xe.edge(Ct);xt.minlen*=2,"c"!==(null===(pt=xt.labelpos)||void 0===pt?void 0:pt.toLowerCase())&&("TB"===yt.rankdir||"BT"===yt.rankdir?xt.width+=xt.labeloffset:xt.height+=xt.labeloffset)})}(pt)});try{Ct("  runLayout",function(){!function(Xe,yt,Ct){yt("    removeSelfEdges",function(){Ze(Xe)}),yt("    acyclic",function(){j.default.run(Xe)}),yt("    nestingGraph.run",function(){E.default.run(Xe)}),yt("    rank",function(){(0,F.default)((0,I.asNonCompoundGraph)(Xe))}),yt("    injectEdgeLabelProxies",function(){_e(Xe)}),yt("    removeEmptyRanks",function(){(0,I.removeEmptyRanks)(Xe)}),yt("    nestingGraph.cleanup",function(){E.default.cleanup(Xe)}),yt("    normalizeRanks",function(){(0,I.normalizeRanks)(Xe)}),yt("    assignRankMinMax",function(){me(Xe)}),yt("    removeEdgeLabelProxies",function(){Ce(Xe)}),yt("    normalize.run",function(){k.default.run(Xe)}),yt("    parentDummyChains",function(){(0,x.default)(Xe)}),yt("    addBorderSegments",function(){(0,b.default)(Xe)}),Ct&&Ct.keepNodeOrder&&yt("    initDataOrder",function(){(0,M.default)(Xe,Ct.nodeOrder)}),yt("    order",function(){(0,y.default)(Xe,Ct?.keepNodeOrder)}),yt("    insertSelfEdges",function(){We(Xe)}),yt("    adjustCoordinateSystem",function(){w.default.adjust(Xe)}),yt("    position",function(){(0,A.default)(Xe)}),yt("    positionSelfEdges",function(){bt(Xe)}),yt("    removeBorderNodes",function(){ke(Xe)}),yt("    normalize.undo",function(){k.default.undo(Xe)}),yt("    fixupEdgeLabelCoords",function(){te(Xe)}),yt("    undoCoordinateSystem",function(){w.default.undo(Xe)}),yt("    translateGraph",function(){fe(Xe)}),yt("    assignNodeIntersects",function(){be(Xe)}),yt("    reversePoints",function(){de(Xe)}),yt("    acyclic.undo",function(){j.default.undo(Xe)})}(pt,Ct,yt)})}catch(xt){if("Not possible to find intersection inside of the rectangle"===xt.message)return void console.error("The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:\n",xt);throw xt}Ct("  updateInputGraph",function(){!function(Xe,yt){Xe.nodes().forEach(function(Ct){var pt,xt=Xe.node(Ct);if(xt){var Fe=yt.node(Ct);xt.x=Fe.x,xt.y=Fe.y,xt._order=Fe.order,xt._rank=Fe.rank,null!==(pt=yt.children(Ct))&&void 0!==pt&&pt.length&&(xt.width=Fe.width,xt.height=Fe.height)}}),Xe.edges().forEach(function(Ct){var pt=Xe.edge(Ct),xt=yt.edge(Ct);pt.points=xt?xt.points:[],xt&&xt.hasOwnProperty("x")&&(pt.x=xt.x,pt.y=xt.y)}),Xe.graph().width=yt.graph().width,Xe.graph().height=yt.graph().height}(Xe,pt)})})}},2005:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});var B=G(6668),j=function(x,E,b,w,y,A,M){var S=x.children(M);if(S?.length){var P=(0,B.addBorderNode)(x,"_bt"),U=(0,B.addBorderNode)(x,"_bb"),z=x.node(M);x.setParent(P,M),z.borderTop=P,x.setParent(U,M),z.borderBottom=U,S?.forEach(function(ie){j(x,E,b,w,y,A,ie);var ne=x.node(ie),q=ne.borderTop?ne.borderTop:ie,K=ne.borderBottom?ne.borderBottom:ie,ee=ne.borderTop?w:2*w,X=q!==K?1:y-A[M]+1;x.setEdge(P,q,{minlen:X,weight:ee,nestingEdge:!0}),x.setEdge(K,U,{minlen:X,weight:ee,nestingEdge:!0})}),x.parent(M)||x.setEdge(E,P,{weight:0,minlen:y+A[M]})}else M!==E&&x.setEdge(E,M,{weight:0,minlen:b})};V.default={run:function(x){var E,b=(0,B.addDummyNode)(x,"root",{},"_root"),w=function(x){var E,b={},w=function(y,A){x.children(y)?.forEach(function(S){return w(S,A+1)}),b[y]=A};return null===(E=x.children())||void 0===E||E.forEach(function(y){return w(y,1)}),b}(x),y=Math.max.apply(Math,Object.values(w));Math.abs(y)===1/0&&(y=1);var A=y-1,M=2*A+1;x.graph().nestingRoot=b,x.edges().forEach(function(P){x.edge(P).minlen*=M});var S=function(x){var E=0;return x.edges().forEach(function(b){E+=x.edge(b).weight}),E}(x)+1;null===(E=x.children())||void 0===E||E.forEach(function(P){j(x,b,M,S,A,w,P)}),x.graph().nodeRankFactor=M},cleanup:function(x){var E=x.graph();E.nestingRoot&&x.removeNode(E.nestingRoot),delete E.nestingRoot,x.edges().forEach(function(b){x.edge(b).nestingEdge&&x.removeEdgeObj(b)})}}},7849:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});var B=G(6668);V.default={run:function(F){F.graph().dummyChains=[],F.edges().forEach(function(I){return function(F,I){var x=I.v,E=F.node(x).rank,b=I.w,w=F.node(b).rank,y=I.name,A=F.edge(I),M=A.labelRank;if(w!==E+1){F.removeEdgeObj(I);var P,U,z,S=F.graph();for(z=0,++E;E<w;++z,++E)A.points=[],P=(0,B.addDummyNode)(F,"edge",U={edgeLabel:A,width:0,height:0,edgeObj:I,rank:E},"_d"),E===M&&(U.width=A.width,U.height=A.height,U.dummy="edge-label",U.labelpos=A.labelpos),F.setEdge(x,P,{weight:A.weight},y),0===z&&(S.dummyChains||(S.dummyChains=[]),S.dummyChains.push(P)),x=P;F.setEdge(x,b,{weight:A.weight},y)}}(F,I)})},undo:function(F){var I;null===(I=F.graph().dummyChains)||void 0===I||I.forEach(function(x){var w,E=F.node(x),b=E.edgeLabel;E.edgeObj&&F.setEdgeObj(E.edgeObj,b);for(var y=x;E.dummy;)w=F.successors(y)[0],F.removeNode(y),b.points.push({x:E.x,y:E.y}),"edge-label"===E.dummy&&(b.x=E.x,b.y=E.y,b.width=E.width,b.height=E.height),E=F.node(y=w)})}}},7088:(Qt,V)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.default=function(B,Q,j){var F,k={};j?.forEach(function(I){for(var E,b,x=B.parent(I);x;){if((E=B.parent(x))?(b=k[E],k[E]=x):(b=F,F=x),b&&b!==x)return void Q.setEdge(b,x);x=E}})}},6924:(Qt,V)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.default=function(B,Q){return Q.map(function(j){var k=B.inEdges(j);if(!k?.length)return{v:j};var F={sum:0,weight:0};return k?.forEach(function(I){var x=B.edge(I),E=B.node(I.v);F.sum+=x.weight*E.order,F.weight+=x.weight}),{v:j,barycenter:F.sum/F.weight,weight:F.weight}})}},2285:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});var B=G(8863);V.default=function(k,F,I){var x=function(k){for(var F;k.hasNode(F="_root".concat(Math.random())););return F}(k),E=new B.Graph({compound:!0}).setGraph({root:x}).setDefaultNodeLabel(function(b){return k.node(b)});return k.nodes().forEach(function(b){var w,y=k.node(b),A=k.parent(b);(y.rank===F||y.minRank<=F&&F<=y.maxRank)&&(E.setNode(b),E.setParent(b,A||x),null===(w=k[I](b))||void 0===w||w.forEach(function(M){var S=M.v===b?M.w:M.v,P=E.edgeFromArgs(S,b),U=void 0!==P?P.weight:0;E.setEdge(S,b,{weight:k.edge(M).weight+U})}),y.hasOwnProperty("minRank")&&E.setNode(b,{borderLeft:y.borderLeft[F],borderRight:y.borderRight[F]}))}),E}},887:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});var B=G(6668),Q=function(k,F,I){for(var x=(0,B.zipObject)(I,I.map(function(S,P){return P})),b=F.map(function(S){var P;return(null===(P=k.outEdges(S))||void 0===P?void 0:P.map(function(z){return{pos:x[z.w]||0,weight:k.edge(z).weight}}))?.sort(function(z,ie){return z.pos-ie.pos})}).flat().filter(function(S){return void 0!==S}),w=1;w<I.length;)w<<=1;var y=2*w-1;w-=1;var A=Array(y).fill(0,0,y),M=0;return b?.forEach(function(S){if(S){var P=S.pos+w;A[P]+=S.weight;for(var U=0;P>0;)P%2&&(U+=A[P+1]),A[P=P-1>>1]+=S.weight;M+=S.weight*U}}),M};V.default=function(k,F){for(var I=0,x=1;x<F?.length;x+=1)I+=Q(k,F[x-1],F[x]);return I}},1967:function(Qt,V,G){"use strict";var B=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(V,"__esModule",{value:!0});var Q=B(G(4473)),j=B(G(887)),k=B(G(2285)),F=B(G(7088)),I=B(G(6178)),x=G(7602),E=G(8863),b=G(6668),y=function(S,P,U){return P.map(function(z){return(0,k.default)(S,z,U)})},A=function(S,P,U,z){var ie=new E.Graph;S?.forEach(function(ne){for(var q,K=ne.graph().root,ee=(0,I.default)(ne,K,ie,P,U,z),X=0;X<(null===(q=ee.vs)||void 0===q?void 0:q.length);X++){var ae=ne.node(ee.vs[X]);ae&&(ae.order=X)}(0,F.default)(ne,ie,ee.vs)})},M=function(S,P){P?.forEach(function(U){U?.forEach(function(z,ie){S.node(z).order=ie})})};V.default=function(S,P){for(var U=(0,b.maxRank)(S),z=[],ie=[],ne=1;ne<U+1;ne++)z.push(ne);for(ne=U-1;ne>-1;ne--)ie.push(ne);var q=y(S,z,"inEdges"),K=y(S,ie,"outEdges"),ee=(0,Q.default)(S);M(S,ee);for(var ae,X=Number.POSITIVE_INFINITY,re=(ne=0,0);re<4;++ne,++re)A(ne%2?q:K,ne%4>=2,!1,P),ee=(0,b.buildLayerMatrix)(S),(oe=(0,j.default)(S,ee))<X&&(re=0,ae=(0,x.clone)(ee),X=oe);for(ee=(0,Q.default)(S),M(S,ee),ne=0,re=0;re<4;++ne,++re){var oe;A(ne%2?q:K,ne%4>=2,!0,P),ee=(0,b.buildLayerMatrix)(S),(oe=(0,j.default)(S,ee))<X&&(re=0,ae=(0,x.clone)(ee),X=oe)}M(S,ae)}},5884:(Qt,V)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.default=function(B,Q){for(var k=B.nodes().filter(function(E){var b;return!(null!==(b=B.children(E))&&void 0!==b&&b.length)}).map(function(E){return B.node(E).rank}),F=Math.max.apply(Math,k),I=[],x=0;x<F+1;x++)I[x]=[];Q?.forEach(function(E){var b=B.node(E);!b||b?.dummy||isNaN(b.rank)||(b.fixorder=I[b.rank].length,I[b.rank].push(E))})}},4473:(Qt,V)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.default=function(B){for(var Q={},j=B.nodes().filter(function(A){var M;return!(null!==(M=B.children(A))&&void 0!==M&&M.length)}),k=j.map(function(A){return B.node(A).rank}),F=Math.max.apply(Math,k),I=[],x=0;x<F+1;x++)I.push([]);var E=function(A){var M;if(!Q.hasOwnProperty(A)){Q[A]=!0;var S=B.node(A);isNaN(S.rank)||I[S.rank].push(A),null===(M=B.successors(A))||void 0===M||M.forEach(function(P){return E(P)})}},b=j.sort(function(A,M){return B.node(A).rank-B.node(M).rank});return b.filter(function(A){return void 0!==B.node(A).fixorder}).sort(function(A,M){return B.node(A).fixorder-B.node(M).fixorder})?.forEach(function(A){isNaN(B.node(A).rank)||I[B.node(A).rank].push(A),Q[A]=!0}),b?.forEach(E),I}},3512:(Qt,V)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});var Q=function(j,k){var F,I=0,x=0;j.weight&&(I+=j.barycenter*j.weight,x+=j.weight),k.weight&&(I+=k.barycenter*k.weight,x+=k.weight),j.vs=null===(F=k.vs)||void 0===F?void 0:F.concat(j.vs),j.barycenter=I/x,j.weight=x,j.i=Math.min(k.i,j.i),k.merged=!0};V.default=function(j,k){var F,I,x,E={};return j?.forEach(function(w,y){E[w.v]={i:y,indegree:0,in:[],out:[],vs:[w.v]};var A=E[w.v];void 0!==w.barycenter&&(A.barycenter=w.barycenter,A.weight=w.weight)}),null===(F=k.edges())||void 0===F||F.forEach(function(w){var y=E[w.v],A=E[w.w];void 0!==y&&void 0!==A&&(A.indegree++,y.out.push(E[w.w]))}),function(j){for(var k,F,I=[],b=function(){var A=j.pop();I.push(A),null===(k=A.in.reverse())||void 0===k||k.forEach(function(M){return function(A){return function(M){M.merged||(void 0===M.barycenter||void 0===A.barycenter||M.barycenter>=A.barycenter)&&Q(A,M)}}(A)(M)}),null===(F=A.out)||void 0===F||F.forEach(function(M){return function(A){return function(M){M.in.push(A),0==--M.indegree&&j.push(M)}}(A)(M)})};j?.length;)b();var w=I.filter(function(A){return!A.merged}),y=["vs","i","barycenter","weight"];return w.map(function(A){var M={};return y?.forEach(function(S){void 0!==A[S]&&(M[S]=A[S])}),M})}(null===(x=(I=Object.values(E)).filter)||void 0===x?void 0:x.call(I,function(w){return!w.indegree}))}},6178:function(Qt,V,G){"use strict";var B=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(V,"__esModule",{value:!0});var Q=B(G(6924)),j=B(G(3512)),k=B(G(5933)),F=function(E,b,w,y,A,M){var S,P,U,z,ie=E.children(b),ne=E.node(b),q=ne?ne.borderLeft:void 0,K=ne?ne.borderRight:void 0,ee={};q&&(ie=ie?.filter(function(we){return we!==q&&we!==K}));var X=(0,Q.default)(E,ie||[]);X?.forEach(function(we){var _e;if(null!==(_e=E.children(we.v))&&void 0!==_e&&_e.length){var me=F(E,we.v,w,y,M);ee[we.v]=me,me.hasOwnProperty("barycenter")&&x(we,me)}});var ae=(0,j.default)(X,w);I(ae,ee),null===(S=ae.filter(function(we){return we.vs.length>0}))||void 0===S||S.forEach(function(we){var _e=E.node(we.vs[0]);_e&&(we.fixorder=_e.fixorder,we.order=_e.order)});var re=(0,k.default)(ae,y,A,M);if(q&&(re.vs=[q,re.vs,K].flat(),null!==(P=E.predecessors(q))&&void 0!==P&&P.length)){var oe=E.node((null===(U=E.predecessors(q))||void 0===U?void 0:U[0])||""),ve=E.node((null===(z=E.predecessors(K))||void 0===z?void 0:z[0])||"");re.hasOwnProperty("barycenter")||(re.barycenter=0,re.weight=0),re.barycenter=(re.barycenter*re.weight+oe.order+ve.order)/(re.weight+2),re.weight+=2}return re},I=function(E,b){E?.forEach(function(w){var y,A=null===(y=w.vs)||void 0===y?void 0:y.map(function(M){return b[M]?b[M].vs:M});w.vs=A.flat()})},x=function(E,b){void 0!==E.barycenter?(E.barycenter=(E.barycenter*E.weight+b.barycenter*b.weight)/(E.weight+b.weight),E.weight+=b.weight):(E.barycenter=b.barycenter,E.weight=b.weight)};V.default=F},5933:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});var B=G(6668),j=function(F,I,x){for(var b,E=x;I.length&&(b=I[I.length-1]).i<=E;)I.pop(),F?.push(b.vs),E++;return E};V.default=function(F,I,x,E){var b=(0,B.partition)(F,function(z){var ie=z.hasOwnProperty("fixorder")&&!isNaN(z.fixorder);return E?!ie&&z.hasOwnProperty("barycenter"):ie||z.hasOwnProperty("barycenter")}),w=b.lhs,y=b.rhs.sort(function(z,ie){return-z.i- -ie.i}),A=[],M=0,S=0,P=0;w?.sort(function(F,I){return function(x,E){if(void 0!==x.fixorder&&void 0!==E.fixorder)return x.fixorder-E.fixorder;if(x.barycenter<E.barycenter)return-1;if(x.barycenter>E.barycenter)return 1;if(I&&void 0!==x.order&&void 0!==E.order){if(x.order<E.order)return-1;if(x.order>E.order)return 1}return F?E.i-x.i:x.i-E.i}}(!!I,!!x)),P=j(A,y,P),w?.forEach(function(z){var ie;P+=null===(ie=z.vs)||void 0===ie?void 0:ie.length,A.push(z.vs),M+=z.barycenter*z.weight,S+=z.weight,P=j(A,y,P)});var U={vs:A.flat()};return S&&(U.barycenter=M/S,U.weight=S),U}},8727:(Qt,V)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.default=function(j){var k,F=function(j){var k,F={},I=0,x=function(E){var b,w=I;null===(b=j.children(E))||void 0===b||b.forEach(x),F[E]={low:w,lim:I++}};return null===(k=j.children())||void 0===k||k.forEach(x),F}(j);null===(k=j.graph().dummyChains)||void 0===k||k.forEach(function(I){var x,E,b=I,w=j.node(b),y=w.edgeObj;if(y)for(var A=function(j,k,F,I){var y,A,x=[],E=[],b=Math.min(k[F].low,k[I].low),w=Math.max(k[F].lim,k[I].lim);y=F;do{y=j.parent(y),x.push(y)}while(y&&(k[y].low>b||w>k[y].lim));for(A=y,y=I;y&&y!==A;)E.push(y),y=j.parent(y);return{lca:A,path:x.concat(E.reverse())}}(j,F,y.v,y.w),M=A.path,S=A.lca,P=0,U=M[P],z=!0;b!==y.w;){if(w=j.node(b),z){for(;U!==S&&(null===(x=j.node(U))||void 0===x?void 0:x.maxRank)<w.rank;)U=M[++P];U===S&&(z=!1)}if(!z){for(;P<M.length-1&&(null===(E=j.node(M[P+1]))||void 0===E?void 0:E.minRank)<=w.rank;)P++;U=M[P]}j.setParent(b,U),b=j.successors(b)[0]}})}},2063:function(Qt,V,G){"use strict";var ne,B=this&&this.__extends||(ne=function(q,K){return(ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ee,X){ee.__proto__=X}||function(ee,X){for(var ae in X)Object.prototype.hasOwnProperty.call(X,ae)&&(ee[ae]=X[ae])})(q,K)},function(q,K){if("function"!=typeof K&&null!==K)throw new TypeError("Class extends value "+String(K)+" is not a constructor or null");function ee(){this.constructor=q}ne(q,K),q.prototype=null===K?Object.create(K):(ee.prototype=K.prototype,new ee)});Object.defineProperty(V,"__esModule",{value:!0}),V.width=V.sep=V.positionX=V.balance=V.alignCoordinates=V.findSmallestWidthAlignment=V.buildBlockGraph=V.horizontalCompaction=V.verticalAlignment=V.hasConflict=V.addConflict=V.findOtherInnerSegmentNode=V.findType2Conflicts=V.findType1Conflicts=void 0;var Q=G(7782),j=G(6668),k=function(ne){function q(){return null!==ne&&ne.apply(this,arguments)||this}return B(q,ne),q}(Q.Graph);function S(ne,q){var K=Object.values(q),ee=Math.min.apply(Math,K),X=Math.max.apply(Math,K);["u","d"].forEach(function(ae){["l","r"].forEach(function(re){var we,oe=ae+re,ve=ne[oe];if(ve!==q){var _e=Object.values(ve);(we="l"===re?ee-Math.min.apply(Math,_e):X-Math.max.apply(Math,_e))&&(ne[oe]={},Object.keys(ve).forEach(function(me){ne[oe][me]=ve[me]+we}))}})})}V.findType1Conflicts=function(ne,q){var K={};return q?.length&&q.reduce(function(X,ae){var re=0,oe=0,ve=X.length,we=ae?.[ae?.length-1];return ae?.forEach(function(_e,me){var Ce,fe=(0,V.findOtherInnerSegmentNode)(ne,_e),be=fe?ne.node(fe).order:ve;(fe||_e===we)&&(null===(Ce=ae.slice(oe,me+1))||void 0===Ce||Ce.forEach(function(te){var de;null===(de=ne.predecessors(te))||void 0===de||de.forEach(function(ke){var Ze,We=ne.node(ke),bt=We.order;(bt<re||be<bt)&&(!We.dummy||!(null===(Ze=ne.node(te))||void 0===Ze?void 0:Ze.dummy))&&(0,V.addConflict)(K,ke,te)})}),oe=me+1,re=be)}),ae}),K},V.findType2Conflicts=function(ne,q){var K={},ee=function(ae,re,oe,ve,we){for(var _e,me=[],Ce=re;Ce<oe;Ce++)me.push(Ce);me.forEach(function(fe){var be,te;null!==(be=ne.node(_e=ae[fe]))&&void 0!==be&&be.dummy&&(null===(te=ne.predecessors(_e))||void 0===te||te.forEach(function(de){var ke=ne.node(de);ke.dummy&&(ke.order<ve||ke.order>we)&&(0,V.addConflict)(K,de,_e)}))})};return q?.length&&q.reduce(function(ae,re){var ve,oe=-1,we=0;return re?.forEach(function(_e,me){var Ce;if("border"===(null===(Ce=ne.node(_e))||void 0===Ce?void 0:Ce.dummy)){var fe=ne.predecessors(_e)||[];fe.length&&(ve=ne.node(fe[0]).order,ee(re,we,me,oe,ve),we=me,oe=ve)}ee(re,we,re.length,ve,ae.length)}),re}),K},V.findOtherInnerSegmentNode=function(ne,q){var K,ee;if(null!==(K=ne.node(q))&&void 0!==K&&K.dummy)return null===(ee=ne.predecessors(q))||void 0===ee?void 0:ee.find(function(X){return ne.node(X).dummy})},V.addConflict=function(ne,q,K){var ee=q,X=K;if(ee>X){var ae=ee;ee=X,X=ae}var re=ne[ee];re||(ne[ee]=re={}),re[X]=!0},V.hasConflict=function(ne,q,K){var ee=q;return ee>K&&(ee=K),!!ne[ee]},V.verticalAlignment=function(ne,q,K,ee){var X={},ae={},re={};return q?.forEach(function(oe){oe?.forEach(function(ve,we){X[ve]=ve,ae[ve]=ve,re[ve]=we})}),q?.forEach(function(oe){var ve=-1;oe?.forEach(function(we){var _e=ee(we);if(_e.length)for(var me=((_e=_e.sort(function(te,de){return re[te]-re[de]})).length-1)/2,Ce=Math.floor(me),fe=Math.ceil(me);Ce<=fe;++Ce){var be=_e[Ce];ae[we]===we&&ve<re[be]&&!(0,V.hasConflict)(K,we,be)&&(ae[be]=we,ae[we]=X[we]=X[be],ve=re[be])}})}),{root:X,align:ae}},V.horizontalCompaction=function(ne,q,K,ee,X){var ae,re={},oe=(0,V.buildBlockGraph)(ne,q,K,X),ve=X?"borderLeft":"borderRight",we=function(Ce,fe){for(var be=oe.nodes(),te=be.pop(),de={};te;)de[te]?Ce(te):(de[te]=!0,be.push(te),be=be.concat(fe(te))),te=be.pop()};return we(function(Ce){re[Ce]=(oe.inEdges(Ce)||[]).reduce(function(fe,be){return Math.max(fe,(re[be.v]||0)+oe.edge(be))},0)},oe.predecessors.bind(oe)),we(function(Ce){var fe=(oe.outEdges(Ce)||[]).reduce(function(te,de){return Math.min(te,(re[de.w]||0)-oe.edge(de))},Number.POSITIVE_INFINITY),be=ne.node(Ce);fe!==Number.POSITIVE_INFINITY&&be.borderType!==ve&&(re[Ce]=Math.max(re[Ce],fe))},oe.successors.bind(oe)),null===(ae=Object.values(ee))||void 0===ae||ae.forEach(function(Ce){re[Ce]=re[K[Ce]]}),re},V.buildBlockGraph=function(ne,q,K,ee){var X=new k,ae=ne.graph(),re=(0,V.sep)(ae.nodesep,ae.edgesep,ee);return q?.forEach(function(oe){var ve;oe?.forEach(function(we){var _e=K[we];if(X.setNode(_e),ve){var me=K[ve],Ce=X.edgeFromArgs(me,_e);X.setEdge(me,_e,Math.max(re(ne,we,ve),Ce||0))}ve=we})}),X},V.findSmallestWidthAlignment=function(ne,q){return(0,j.minBy)(Object.values(q),function(K){var ee,X=Number.NEGATIVE_INFINITY,ae=Number.POSITIVE_INFINITY;return null===(ee=Object.keys(K))||void 0===ee||ee.forEach(function(re){var oe=K[re],ve=(0,V.width)(ne,re)/2;X=Math.max(oe+ve,X),ae=Math.min(oe-ve,ae)}),X-ae})},V.alignCoordinates=S,V.balance=function(ne,q){var K={};return Object.keys(ne.ul).forEach(function(ee){if(q)K[ee]=ne[q.toLowerCase()][ee];else{var X=Object.values(ne).map(function(ae){return ae[ee]});K[ee]=(X[0]+X[1])/2}}),K},V.positionX=function(ne){var X,q=(0,j.buildLayerMatrix)(ne),K=Object.assign((0,V.findType1Conflicts)(ne,q),(0,V.findType2Conflicts)(ne,q)),ee={};["u","d"].forEach(function(re){X="u"===re?q:Object.values(q).reverse(),["l","r"].forEach(function(oe){"r"===oe&&(X=X.map(function(me){return Object.values(me).reverse()}));var ve=("u"===re?ne.predecessors:ne.successors).bind(ne),we=(0,V.verticalAlignment)(ne,X,K,ve),_e=(0,V.horizontalCompaction)(ne,X,we.root,we.align,"r"===oe);"r"===oe&&Object.keys(_e).forEach(function(me){_e[me]=-_e[me]}),ee[re+oe]=_e})});var ae=(0,V.findSmallestWidthAlignment)(ne,ee);return S(ee,ae),(0,V.balance)(ee,ne.graph().align)},V.sep=function(ne,q,K){return function(ee,X,ae){var we,re=ee.node(X),oe=ee.node(ae),ve=0;if(ve+=re.width/2,re.hasOwnProperty("labelpos"))switch((re.labelpos||"").toLowerCase()){case"l":we=-re.width/2;break;case"r":we=re.width/2}if(we&&(ve+=K?we:-we),we=0,ve+=(re.dummy?q:ne)/2,ve+=(oe.dummy?q:ne)/2,ve+=oe.width/2,oe.labelpos)switch((oe.labelpos||"").toLowerCase()){case"l":we=oe.width/2;break;case"r":we=-oe.width/2}return we&&(ve+=K?we:-we),we=0,ve}},V.width=function(ne,q){return ne.node(q).width||0}},7390:function(Qt,V,G){"use strict";var B=this&&this.__spreadArray||function(x,E,b){if(b||2===arguments.length)for(var A,w=0,y=E.length;w<y;w++)(A||!(w in E))&&(A||(A=Array.prototype.slice.call(E,0,w)),A[w]=E[w]);return x.concat(A||Array.prototype.slice.call(E))};Object.defineProperty(V,"__esModule",{value:!0});var Q=G(6668),j=G(2063);V.default=function(x){var E,b=(0,Q.asNonCompoundGraph)(x);!function(x){var E=(0,Q.buildLayerMatrix)(x),b=x.graph().ranksep,w=0;E?.forEach(function(y){var A=y.map(function(S){return x.node(S).height}),M=Math.max.apply(Math,B(B([],A,!1),[0],!1));y?.forEach(function(S){x.node(S).y=w+M/2}),w+=M+b})}(b);var w=function(x){var E=(0,Q.buildLayerMatrix)(x),b=Object.assign((0,j.findType1Conflicts)(x,E),(0,j.findType2Conflicts)(x,E)),w={},y=[];["u","d"].forEach(function(M){y="u"===M?E:Object.values(E).reverse(),["l","r"].forEach(function(S){"r"===S&&(y=y.map(function(ie){return Object.values(ie).reverse()}));var P=("u"===M?x.predecessors:x.successors).bind(x),U=(0,j.verticalAlignment)(x,y,b,P),z=(0,j.horizontalCompaction)(x,y,U.root,U.align,"r"===S);"r"===S&&Object.keys(z).forEach(function(ie){return z[ie]=-z[ie]}),w[M+S]=z})});var A=(0,j.findSmallestWidthAlignment)(x,w);return A&&(0,j.alignCoordinates)(w,A),(0,j.balance)(w,x.graph().align)}(b);null===(E=Object.keys(w))||void 0===E||E.forEach(function(y){b.node(y).x=w[y]})}},8044:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.feasibleTreeWithLayer=V.feasibleTree=void 0;var B=G(2831),Q=G(6668),j=G(8863),k=function(w){var S,P,y=new j.Graph({directed:!1}),A=w.nodes()[0],M=w.nodeCount();for(y.setNode(A,{});F(y,w)<M;)S=E(y,w),P=y.hasNode(S.v)?(0,B.slack)(w,S):-(0,B.slack)(w,S),b(y,w,P);return y};V.feasibleTree=k;var F=function(w,y){var A=function(M){y.nodeEdges(M).forEach(function(S){var P=S.v,U=M===P?S.w:P;!w.hasNode(U)&&!(0,B.slack)(y,S)&&(w.setNode(U,{}),w.setEdge(M,U,{}),A(U))})};return w.nodes().forEach(A),w.nodeCount()},I=function(w){var S,P,y=new j.Graph({directed:!1}),A=w.nodes()[0],M=w.nodes().filter(function(U){return!!w.node(U)}).length;for(y.setNode(A,{});x(y,w)<M;)S=E(y,w),P=y.hasNode(S.v)?(0,B.slack)(w,S):-(0,B.slack)(w,S),b(y,w,P);return y};V.feasibleTreeWithLayer=I;var x=function(w,y){var A=function(M){var S;null===(S=y.nodeEdges(M))||void 0===S||S.forEach(function(P){var U=P.v,z=M===U?P.w:U;!w.hasNode(z)&&(void 0!==y.node(z).layer||!(0,B.slack)(y,P))&&(w.setNode(z,{}),w.setEdge(M,z,{}),A(z))})};return w.nodes().forEach(A),w.nodeCount()},E=function(w,y){return(0,Q.minBy)(y.edges(),function(A){return w.hasNode(A.v)!==w.hasNode(A.w)?(0,B.slack)(y,A):1/0})},b=function(w,y,A){w.nodes().forEach(function(M){y.node(M).rank||(y.node(M).rank=0),y.node(M).rank+=A})};V.default={feasibleTree:k,feasibleTreeWithLayer:I}},5127:function(Qt,V,G){"use strict";var B=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(V,"__esModule",{value:!0});var Q=G(2831),j=G(8044),k=B(G(795)),I=Q.longestPath;V.default=function(b){switch(b.graph().ranker){case"network-simplex":!function(b){(0,k.default)(b)}(b);break;case"tight-tree":default:!function(b){(0,Q.longestPathWithLayer)(b),(0,j.feasibleTreeWithLayer)(b)}(b);break;case"longest-path":I(b)}}},795:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.exchangeEdges=V.enterEdge=V.leaveEdge=V.initLowLimValues=V.calcCutValue=V.initCutValues=void 0;var B=G(8044),Q=G(2831),j=G(6668),k=G(7782),F=k.algorithm.preorder,I=k.algorithm.postorder;V.initCutValues=function(ne,q){var K=I(ne,ne.nodes());K=K?.slice(0,K?.length-1),K?.forEach(function(ee){b(ne,q,ee)})};var b=function(ne,q,K){var ee=ne.node(K);ne.edgeFromArgs(K,ee.parent).cutvalue=(0,V.calcCutValue)(ne,q,K)};V.calcCutValue=function(ne,q,K){var ee,ae=ne.node(K).parent,re=!0,oe=q.edgeFromArgs(K,ae),ve=0;return oe||(re=!1,oe=q.edgeFromArgs(ae,K)),ve=oe.weight,null===(ee=q.nodeEdges(K))||void 0===ee||ee.forEach(function(we){var _e=we.v===K,me=_e?we.w:we.v;if(me!==ae){var Ce=_e===re,fe=q.edge(we).weight;if(ve+=Ce?fe:-fe,z(ne,K,me)){var be=ne.edgeFromArgs(K,me).cutvalue;ve+=Ce?-be:be}}}),ve},V.initLowLimValues=function(ne,q){void 0===q&&(q=ne.nodes()[0]),A(ne,{},1,q)};var A=function(ne,q,K,ee,X){var ae,re=K,oe=K,ve=ne.node(ee);return q[ee]=!0,null===(ae=ne.neighbors(ee))||void 0===ae||ae.forEach(function(we){q[we]||(oe=A(ne,q,oe,we,ee))}),ve.low=re,ve.lim=oe++,X?ve.parent=X:delete ve.parent,oe};V.leaveEdge=function(ne){return ne.edges().find(function(q){return ne.edge(q).cutvalue<0})},V.enterEdge=function(ne,q,K){var ee=K.v,X=K.w;q.hasEdge(ee,X)||(ee=K.w,X=K.v);var ae=ne.node(ee),re=ne.node(X),oe=ae,ve=!1;ae.lim>re.lim&&(oe=re,ve=!0);var we=q.edges().filter(function(_e){return ve===ie(ne,ne.node(_e.v),oe)&&ve!==ie(ne,ne.node(_e.w),oe)});return(0,j.minBy)(we,function(_e){return(0,Q.slack)(q,_e)})},V.exchangeEdges=function(ne,q,K,ee){ne.removeEdge(K.v,K.w),ne.setEdge(ee.v,ee.w,{}),(0,V.initLowLimValues)(ne),(0,V.initCutValues)(ne,q),U(ne,q)};var U=function(ne,q){var K=ne.nodes().find(function(X){var ae;return!(null!==(ae=q.node(X))&&void 0!==ae&&ae.parent)}),ee=F(ne,K);ee=ee?.slice(1),ee?.forEach(function(X){var ae=ne.node(X).parent,re=q.edgeFromArgs(X,ae),oe=!1;re||(re=q.edgeFromArgs(ae,X),oe=!0),q.node(X).rank=q.node(ae).rank+(oe?re.minlen:-re.minlen)})},z=function(ne,q,K){return ne.hasEdge(q,K)},ie=function(ne,q,K){return K.low<=q.lim&&q.lim<=K.lim};V.default=function(ne){var q=(0,j.simplify)(ne);(0,Q.longestPath)(q);var ee,X,K=(0,B.feasibleTree)(q);for((0,V.initLowLimValues)(K),(0,V.initCutValues)(K,q);ee=(0,V.leaveEdge)(K);)X=(0,V.enterEdge)(K,q,ee),(0,V.exchangeEdges)(K,q,ee,X)}},2831:(Qt,V)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.slack=V.longestPathWithLayer=V.longestPath=void 0;var G=function(j){var k,F={},I=function(x){var E,w,b=j.node(x);return b?F[x]?b.rank:(F[x]=!0,null===(E=j.outEdges(x))||void 0===E||E.forEach(function(y){var S=I(y.w)-j.edge(y).minlen;S&&(void 0===w||S<w)&&(w=S)}),w||(w=0),b.rank=w,w):0};null===(k=j.sources())||void 0===k||k.forEach(function(x){return I(x)})};V.longestPath=G;var B=function(j){var k,I,F={},x=function(w){var y,M,A=j.node(w);return A?F[w]?A.rank:(F[w]=!0,null===(y=j.outEdges(w))||void 0===y||y.forEach(function(S){var z=x(S.w)-j.edge(S).minlen;z&&(void 0===M||z<M)&&(M=z)}),M||(M=0),(void 0===I||M<I)&&(I=M),A.rank=M,M):0};null===(k=j.sources())||void 0===k||k.forEach(function(w){j.node(w)&&x(w)}),void 0===I&&(I=0);var E={},b=function(w,y){var A,M=j.node(w),S=isNaN(M.layer)?y:M.layer;(void 0===M.rank||M.rank<S)&&(M.rank=S),!E[w]&&(E[w]=!0,null===(A=j.outEdges(w))||void 0===A||A.map(function(P){b(P.w,S+j.edge(P).minlen)}))};j.nodes().forEach(function(w){var y=j.node(w);!y||(isNaN(y.layer)?y.rank-=I:b(w,y.layer))})};V.longestPathWithLayer=B;var Q=function(j,k){return j.node(k.w).rank-j.node(k.v).rank-j.edge(k).minlen};V.slack=Q,V.default={longestPath:G,longestPathWithLayer:B,slack:Q}},6668:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.minBy=V.notime=V.time=V.partition=V.maxRank=V.addBorderNode=V.removeEmptyRanks=V.normalizeRanks=V.buildLayerMatrix=V.intersectRect=V.predecessorWeights=V.successorWeights=V.zipObject=V.asNonCompoundGraph=V.simplify=V.addDummyNode=void 0;var B=G(7602),Q=G(8863),j=function(q,K){return Number(q)-Number(K)};V.addDummyNode=function(q,K,ee,X){var ae;do{ae="".concat(X).concat(Math.random())}while(q.hasNode(ae));return ee.dummy=K,q.setNode(ae,ee),ae},V.simplify=function(q){var K=(new Q.Graph).setGraph(q.graph());return q.nodes().forEach(function(ee){K.setNode(ee,q.node(ee))}),q.edges().forEach(function(ee){var X=K.edgeFromArgs(ee.v,ee.w)||{weight:0,minlen:1},ae=q.edge(ee);K.setEdge(ee.v,ee.w,{weight:X.weight+ae.weight,minlen:Math.max(X.minlen,ae.minlen)})}),K},V.asNonCompoundGraph=function(q){var K=new Q.Graph({multigraph:q.isMultigraph()}).setGraph(q.graph());return q.nodes().forEach(function(ee){var X;null!==(X=q.children(ee))&&void 0!==X&&X.length||K.setNode(ee,q.node(ee))}),q.edges().forEach(function(ee){K.setEdgeObj(ee,q.edge(ee))}),K},V.zipObject=function(q,K){return q?.reduce(function(ee,X,ae){return ee[X]=K[ae],ee},{})},V.successorWeights=function(q){var K={};return q.nodes().forEach(function(ee){var X,ae={};null===(X=q.outEdges(ee))||void 0===X||X.forEach(function(re){var oe;ae[re.w]=(ae[re.w]||0)+((null===(oe=q.edge(re))||void 0===oe?void 0:oe.weight)||0)}),K[ee]=ae}),K},V.predecessorWeights=function(q){var K=q.nodes(),ee=K.map(function(X){var ae,re={};return null===(ae=q.inEdges(X))||void 0===ae||ae.forEach(function(oe){re[oe.v]=(re[oe.v]||0)+q.edge(oe).weight}),re});return(0,V.zipObject)(K,ee)},V.intersectRect=function(q,K){var we,_e,ee=Number(q.x),X=Number(q.y),ae=Number(K.x)-ee,re=Number(K.y)-X,oe=Number(q.width)/2,ve=Number(q.height)/2;return ae||re?(Math.abs(re)*oe>Math.abs(ae)*ve?(re<0&&(ve=-ve),we=ve*ae/re,_e=ve):(ae<0&&(oe=-oe),we=oe,_e=oe*re/ae),{x:ee+we,y:X+_e}):{x:0,y:0}},V.buildLayerMatrix=function(q){for(var K=[],ee=(0,V.maxRank)(q)+1,X=0;X<ee;X++)K.push([]);for(q.nodes().forEach(function(ae){var re=q.node(ae);if(re){var oe=re.rank;void 0!==oe&&K[oe]&&K[oe].push(ae)}}),X=0;X<ee;X++)K[X]=K[X].sort(function(re,oe){var ve,we;return j(null===(ve=q.node(re))||void 0===ve?void 0:ve.order,null===(we=q.node(oe))||void 0===we?void 0:we.order)});return K},V.normalizeRanks=function(q){var K=q.nodes().filter(function(X){var ae;return void 0!==(null===(ae=q.node(X))||void 0===ae?void 0:ae.rank)}).map(function(X){return q.node(X).rank}),ee=Math.min.apply(Math,K);q.nodes().forEach(function(X){var ae=q.node(X);ae.hasOwnProperty("rank")&&ee!==1/0&&(ae.rank-=ee)})},V.removeEmptyRanks=function(q){var K=q.nodes(),ee=K.filter(function(_e){var me;return void 0!==(null===(me=q.node(_e))||void 0===me?void 0:me.rank)}).map(function(_e){return q.node(_e).rank}),X=Math.min.apply(Math,ee),ae=[];K.forEach(function(_e){var me,Ce=((null===(me=q.node(_e))||void 0===me?void 0:me.rank)||0)-X;ae[Ce]||(ae[Ce]=[]),ae[Ce].push(_e)});for(var re=0,oe=q.graph().nodeRankFactor||0,ve=0;ve<ae.length;ve++){var we=ae[ve];void 0===we?ve%oe!=0&&(re-=1):re&&we?.forEach(function(_e){var me=q.node(_e);me&&(me.rank=me.rank||0,me.rank+=re)})}},V.addBorderNode=function(q,K,ee,X){var ae={width:0,height:0};return(0,B.isNumber)(ee)&&(0,B.isNumber)(X)&&(ae.rank=ee,ae.order=X),(0,V.addDummyNode)(q,"border",ae,K)},V.maxRank=function(q){var K;return q.nodes().forEach(function(ee){var X,ae=null===(X=q.node(ee))||void 0===X?void 0:X.rank;void 0!==ae&&(void 0===K||ae>K)&&(K=ae)}),K||(K=0),K},V.partition=function(q,K){var ee={lhs:[],rhs:[]};return q?.forEach(function(X){K(X)?ee.lhs.push(X):ee.rhs.push(X)}),ee},V.time=function(q,K){var ee=Date.now();try{return K()}finally{console.log("".concat(q," time: ").concat(Date.now()-ee,"ms"))}},V.notime=function(q,K){return K()},V.minBy=function(q,K){return q.reduce(function(ee,X){return K(ee)>K(X)?X:ee})}},4632:function(Qt,V,G){"use strict";var E,B=this&&this.__extends||(E=function(b,w){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,A){y.__proto__=A}||function(y,A){for(var M in A)Object.prototype.hasOwnProperty.call(A,M)&&(y[M]=A[M])})(b,w)},function(b,w){if("function"!=typeof w&&null!==w)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function y(){this.constructor=b}E(b,w),b.prototype=null===w?Object.create(w):(y.prototype=w.prototype,new y)}),Q=this&&this.__assign||function(){return Q=Object.assign||function(E){for(var b,w=1,y=arguments.length;w<y;w++)for(var A in b=arguments[w])Object.prototype.hasOwnProperty.call(b,A)&&(E[A]=b[A]);return E},Q.apply(this,arguments)},j=this&&this.__spreadArray||function(E,b,w){if(w||2===arguments.length)for(var M,y=0,A=b.length;y<A;y++)(M||!(y in b))&&(M||(M=Array.prototype.slice.call(b,0,y)),M[y]=b[y]);return E.concat(M||Array.prototype.slice.call(b))};Object.defineProperty(V,"__esModule",{value:!0}),V.DagreCompoundLayout=void 0;var k=G(8792),F=G(7645),I=G(7602),x=function(E){function b(w){var y=E.call(this)||this;return y.rankdir="TB",y.nodesep=50,y.edgesep=5,y.ranksep=50,y.controlPoints=!0,y.anchorPoint=!0,y.nodes=[],y.edges=[],y.combos=[],y.onLayoutEnd=function(){},y.updateCfg(w),y}return B(b,E),b.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}},b.prototype.init=function(w){var A=w.hiddenEdges||[],M=w.hiddenCombos||[];this.nodes=this.getDataByOrder((w.nodes||[]).concat(w.hiddenNodes||[])),this.edges=this.getDataByOrder((w.edges||[]).concat(A)),this.combos=(w.combos||[]).concat(M.map(function(S){return Q(Q({},S),{collapsed:!0})}))},b.prototype.execute=function(){var w=this,y=w.nodes,A=w.edges;if(y){var M=w.getLayoutConfig(),z=(0,F.buildGraph)(M.graphDef,M.graphOption,M.graphSettings),ie=(0,F.flatGraph)(z,!0);return this.updatePosition(ie),w.onLayoutEnd&&w.onLayoutEnd(),{nodes:y,edges:A}}},b.prototype.getNodePath=function(w){var M=this.combos,S=this.nodes.find(function(U){return U.id===w}),P=function(U,z){void 0===z&&(z=[]);var ie=M.find(function(ne){return ne.id===U});return ie?(z.unshift(U),ie.parentId?P(ie.parentId,z):z):z};return S&&S.comboId?P(S.comboId,[w]):[w]},b.prototype.getLayoutConfig=function(){var w,y,A,re,M=this,S=M.nodes,P=M.edges,U=M.combos,z=M.nodeSize,ie=M.rankdir,ne=M.align,q=M.edgesep,K=M.nodesep,ee=M.ranksep,X=M.settings,ae=(U||[]).reduce(function(Ft,Pt){var Xe=S.filter(function(Ct){return Ct.comboId===Pt.id}).map(function(Ct){return Ct.id}),yt=(U||[]).filter(function(Ct){return Ct.parentId===Pt.id}).map(function(Ct){return Ct.id});return(Xe.length||yt.length)&&(Ft[Pt.id]=j(j([],Xe,!0),yt,!0)),Ft},{});re=z?(0,I.isArray)(z)?function(){return z}:function(){return[z,z]}:function(Ft){return Ft&&Ft.size?(0,I.isArray)(Ft.size)?Ft.size:(0,I.isObject)(Ft.size)?[Ft.size.width||40,Ft.size.height||40]:[Ft.size,Ft.size]:[40,40]};var Ft,ve=(Ft=U?.[0],Ft&&Ft.size?(0,I.isArray)(Ft.size)?Ft.size:[Ft.size,Ft.size]:[80,40]),we=ve[0],_e=ve[1],me=null===(y=null===(w=M.graphSettings)||void 0===w?void 0:w.subScene)||void 0===y?void 0:y.meta,Ce=(null===(A=U.find(function(Ft){return!Ft.collapsed}))||void 0===A?void 0:A.padding)||[20,20,20,20],fe=Ce[0],be=Ce[1],te=Ce[2],de=Ce[3],ke={compound:ae,nodes:j([],(S||[]).map(function(Ft){var Pt=re(Ft),Xe=Pt[0],yt=Pt[1];return Q(Q({},Ft),{width:Xe,height:yt})}),!0),edges:j([],(P||[]).map(function(Ft){return Q(Q({},Ft),{v:Ft.source,w:Ft.target})}),!0)},Ze={expanded:(U||[]).filter(function(Ft){return!Ft.collapsed}).map(function(Ft){return Ft.id})},bt=(0,F.mergeConfig)(X,Q({},(0,F.mergeConfig)({graph:{meta:{align:ne,rankDir:ie,nodeSep:K,edgeSep:q,rankSep:ee}},subScene:{meta:{paddingTop:fe||me?.paddingTop||20,paddingRight:be||me?.paddingRight||20,paddingBottom:te||me?.paddingBottom||20,paddingLeft:de||me?.paddingLeft||20,labelHeight:0}},nodeSize:{meta:{width:we,height:_e}}},F.LAYOUT_CONFIG)));return M.graphSettings=bt,{graphDef:ke,graphOption:Ze,graphSettings:bt}},b.prototype.updatePosition=function(w){var y=w.nodes,A=w.edges;this.updateNodePosition(y,A),this.updateEdgePosition(y,A)},b.prototype.getBegin=function(w,y){var M=this.begin,S=[0,0];if(M){var P=1/0,U=1/0;w.forEach(function(z){P>z.x&&(P=z.x),U>z.y&&(U=z.y)}),y.forEach(function(z){z.points.forEach(function(ie){P>ie.x&&(P=ie.x),U>ie.y&&(U=ie.y)})}),S[0]=M[0]-P,S[1]=M[1]-U}return S},b.prototype.updateNodePosition=function(w,y){var A=this,M=A.combos,S=A.nodes,P=A.edges,U=A.anchorPoint,z=A.graphSettings,ie=this.getBegin(w,y);w.forEach(function(ne){var q,K=ne.x,ee=ne.y,X=ne.id,ae=ne.type,re=ne.coreBox;if(ae===F.HierarchyNodeType.META&&X!==F.ROOT_NAME){var oe=M.findIndex(function(Ce){return Ce.id===X}),ve=null===(q=z?.subScene)||void 0===q?void 0:q.meta;M[oe].offsetX=K+ie[0],M[oe].offsetY=ee+ie[1],M[oe].fixSize=[re.width,re.height],M[oe].fixCollapseSize=[re.width,re.height],M[oe].padding=ne.expanded?[ve?.paddingTop,ve?.paddingRight,ve?.paddingBottom,ve?.paddingLeft]:[0,0,0,0]}else if(ae===F.HierarchyNodeType.OP&&(oe=S.findIndex(function(fe){return fe.id===X}),S[oe].x=K+ie[0],S[oe].y=ee+ie[1],U)){var we=[],_e=y.filter(function(fe){return fe.v===X}),me=y.filter(function(fe){return fe.w===X});_e.length>0&&_e.forEach(function(fe){var be=fe.points[0];we.push([(be.x-K)/ne.width+.5,(be.y-ee)/ne.height+.5]),fe.baseEdgeList.forEach(function(ke){var Ze=P.find(function(We){return We.source===ke.v&&We.target===ke.w});Ze&&(Ze.sourceAnchor=we.length-1)})}),me.length>0&&me.forEach(function(fe){var be=fe.points[fe.points.length-1];we.push([(be.x-K)/ne.width+.5,(be.y-ee)/ne.height+.5]),fe.baseEdgeList.forEach(function(ke){var Ze=P.find(function(We){return We.source===ke.v&&We.target===ke.w});Ze&&(Ze.targetAnchor=we.length-1)})}),S[oe].anchorPoints=we.length>0?we:S[oe].anchorPoints||[]}})},b.prototype.updateEdgePosition=function(w,y){var A=this,M=A.combos,S=A.edges,P=A.controlPoints,U=this.getBegin(w,y);P&&(M.forEach(function(z){z.inEdges=[],z.outEdges=[]}),S.forEach(function(z){var ie,ne,q,K,ee=w.find(function(Ce){return Ce.id===z.source}),X=w.find(function(Ce){return Ce.id===z.target}),ae=[],re=[];if(ee&&X)re=(0,F.getEdges)(ee?.id,X?.id,w);else if(!ee||!X){var oe=A.getNodePath(z.source),ve=A.getNodePath(z.target),we=oe.reverse().slice(ee?0:1).find(function(Ce){return w.find(function(fe){return fe.id===Ce})}),_e=ve.reverse().slice(X?0:1).find(function(Ce){return w.find(function(fe){return fe.id===Ce})});ee=w.find(function(Ce){return Ce.id===we}),X=w.find(function(Ce){return Ce.id===_e}),re=(0,F.getEdges)(ee?.id,X?.id,w,{v:z.source,w:z.target})}if(ae=(ae=re.reduce(function(Ce,fe){return j(j([],Ce,!0),fe.points.map(function(be){return Q(Q({},be),{x:be.x+U[0],y:be.y+U[1]})}),!0)},[])).slice(1,-1),z.controlPoints=ae,X?.type===F.NodeType.META){var me=M.findIndex(function(Ce){return Ce.id===X?.id});if(!M[me]||(null===(ie=M[me].inEdges)||void 0===ie?void 0:ie.some(function(Ce){return Ce.source===ee.id&&Ce.target===X.id})))return;null===(ne=M[me].inEdges)||void 0===ne||ne.push({source:ee.id,target:X.id,controlPoints:ae})}if(ee?.type===F.NodeType.META){if(me=M.findIndex(function(fe){return fe.id===ee?.id}),!M[me]||(null===(q=M[me].outEdges)||void 0===q?void 0:q.some(function(fe){return fe.source===ee.id&&fe.target===X.id})))return;null===(K=M[me].outEdges)||void 0===K||K.push({source:ee.id,target:X.id,controlPoints:ae})}}))},b.prototype.getType=function(){return"dagreCompound"},b.prototype.getDataByOrder=function(w){return w.every(function(y){return void 0!==y.layoutOrder})||w.forEach(function(y,A){y.layoutOrder=A}),w.sort(function(y,A){return y.layoutOrder-A.layoutOrder})},b}(k.Base);V.DagreCompoundLayout=x},8458:function(Qt,V,G){"use strict";var B=this&&this.__assign||function(){return B=Object.assign||function(y){for(var A,M=1,S=arguments.length;M<S;M++)for(var P in A=arguments[M])Object.prototype.hasOwnProperty.call(A,P)&&(y[P]=A[P]);return y},B.apply(this,arguments)},Q=this&&this.__createBinding||(Object.create?function(y,A,M,S){void 0===S&&(S=M);var P=Object.getOwnPropertyDescriptor(A,M);(!P||("get"in P?!A.__esModule:P.writable||P.configurable))&&(P={enumerable:!0,get:function(){return A[M]}}),Object.defineProperty(y,S,P)}:function(y,A,M,S){void 0===S&&(S=M),y[S]=A[M]}),j=this&&this.__setModuleDefault||(Object.create?function(y,A){Object.defineProperty(y,"default",{enumerable:!0,value:A})}:function(y,A){y.default=A}),k=this&&this.__importStar||function(y){if(y&&y.__esModule)return y;var A={};if(null!=y)for(var M in y)"default"!==M&&Object.prototype.hasOwnProperty.call(y,M)&&Q(A,y,M);return j(A,y),A},F=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(V,"__esModule",{value:!0});var I=k(G(4188)),x=F(G(6079)),E=F(G(3170)),b=G(8786);V.default=function w(y,A){var M=y.nodes,S=y.edges,P=A.width,U=A.height;if(!M?.length)return Promise.resolve();var z=[];M.forEach(function(re){if(S.filter(function(we){return we.source===re.id||we.target===re.id}).length>1){var ve=B({},re);delete ve.size,z.push(ve)}});var ie=[];S.forEach(function(re){var oe=z.find(function(we){return we.id===re.source}),ve=z.find(function(we){return we.id===re.target});oe&&ve&&ie.push(re)});var q=new b.DagreLayout({type:"dagre",ranksep:A.nodeMinGap,nodesep:A.nodeMinGap}).layout({nodes:z,edges:ie}).nodes;M.forEach(function(re){var oe=(q||[]).find(function(ve){return ve.id===re.id});re.x=oe?.x||P/2,re.y=oe?.y||U/2});var K=JSON.parse(JSON.stringify(M)),ee=JSON.parse(JSON.stringify(S)),X=I.forceSimulation().nodes(K).force("link",I.forceLink(ee).id(function(re){return re.id}).distance(function(re){return ie.find(function(ve){return ve.source===re.source&&ve.target===re.target})?30:20})).force("charge",I.forceManyBody()).force("center",I.forceCenter(P/2,U/2)).force("x",I.forceX(P/2)).force("y",I.forceY(U/2)).alpha(.3).alphaDecay(.08).alphaMin(.001);return new Promise(function(re){X.on("end",function(){M.forEach(function(fe){var be=K.find(function(te){return te.id===fe.id});be&&(fe.x=be.x,fe.y=be.y)});var oe=Math.min.apply(Math,M.map(function(fe){return fe.x})),ve=Math.max.apply(Math,M.map(function(fe){return fe.x})),we=Math.min.apply(Math,M.map(function(fe){return fe.y})),_e=Math.max.apply(Math,M.map(function(fe){return fe.y})),me=P/(ve-oe),Ce=U/(_e-we);M.forEach(function(fe){void 0!==fe.x&&me<1&&(fe.x=(fe.x-oe)*me),void 0!==fe.y&&Ce<1&&(fe.y=(fe.y-we)*Ce)}),M.forEach(function(fe){fe.sizeTemp=fe.size,fe.size=[10,10]}),(0,E.default)(M,S),M.forEach(function(fe){fe.size=fe.sizeTemp||[],delete fe.sizeTemp}),(0,x.default)({nodes:M,edges:S},A),re()})})}},6079:function(Qt,V,G){"use strict";var B=this&&this.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};Object.defineProperty(V,"__esModule",{value:!0});var Q=B(G(3634));V.default=function j(k,F){if(!k.nodes||0===k.nodes.length)return k;var I=F.width,x=F.height,E=F.nodeMinGap,b=1e4,w=1e4;k.nodes.forEach(function(ee){var ae=ee.size[1]||50;b=Math.min(ee.size[0]||50,b),w=Math.min(ae,w)});var y=new Q.default;y.init(I,x,{CELL_H:w,CELL_W:b}),k.nodes.forEach(function(ee){var X=y.occupyNearest(ee);X&&(X.node={id:ee.id,size:ee.size},ee.x=X.x,ee.y=X.y,ee.dx=X.dx,ee.dy=X.dy)});for(var A=0;A<k.nodes.length;A++){var M=k.nodes[A],S=y.findGridByNodeId(M.id);if(!S)throw new Error("can not find node cell");var P=S.column,U=S.row;if(M.size[0]+E>b){for(var ie=z=Math.ceil((M.size[0]+E)/b)-1,ne=0;ne<z&&(y.additionColumn.indexOf(P+ne+1)>-1&&!y.cells[P+ne+1][U].node);ne++)ie--;y.insertColumn(P,ie)}if(M.size[1]+E>w){var z;for(ie=z=Math.ceil((M.size[1]+E)/w)-1,ne=0;ne<z&&(y.additionRow.indexOf(U+ne+1)>-1&&!y.cells[P][U+ne+1].node);ne++)ie--;y.insertRow(U,ie)}}for(A=0;A<y.columnNum;A++){var K=function(X){var ae=y.cells[A][X];if(ae.node){var re=k.nodes.find(function(oe){var ve;return oe.id===(null===(ve=ae?.node)||void 0===ve?void 0:ve.id)});re&&(re.x=ae.x+re.size[0]/2,re.y=ae.y+re.size[1]/2)}};for(ne=0;ne<y.rowNum;ne++)K(ne)}}},3634:function(Qt,V){"use strict";var G=this&&this.__assign||function(){return G=Object.assign||function(Q){for(var j,k=1,F=arguments.length;k<F;k++)for(var I in j=arguments[k])Object.prototype.hasOwnProperty.call(j,I)&&(Q[I]=j[I]);return Q},G.apply(this,arguments)};Object.defineProperty(V,"__esModule",{value:!0});var B=function(){function Q(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}return Q.prototype.init=function(j,k,F){this.cells=[],this.CELL_W=F.CELL_W||Q.DEFAULT_CELL_W,this.CELL_H=F.CELL_H||Q.DEFAULT_CELL_H,this.columnNum=Math.ceil(j/this.CELL_W),this.rowNum=Math.ceil(k/this.CELL_H),Q.MIN_DIST=Math.pow(j,2)+Math.pow(k,2);for(var I=0;I<this.columnNum;I++){for(var x=[],E=0;E<this.rowNum;E++)x.push({dx:I,dy:E,x:I*this.CELL_W,y:E*this.CELL_H,occupied:!1});this.cells.push(x)}},Q.prototype.findGridByNodeId=function(j){for(var k,F,I=0;I<this.columnNum;I++)for(var x=0;x<this.rowNum;x++)if(this.cells[I][x].node&&(null===(F=null===(k=this.cells[I][x])||void 0===k?void 0:k.node)||void 0===F?void 0:F.id)===j)return{column:I,row:x};return null},Q.prototype.sqdist=function(j,k){return Math.pow(j.x-k.x,2)+Math.pow(j.y-k.y,2)},Q.prototype.occupyNearest=function(j){for(var F,k=Q.MIN_DIST,I=null,x=0;x<this.columnNum;x++)for(var E=0;E<this.rowNum;E++)!this.cells[x][E].occupied&&(F=this.sqdist(j,this.cells[x][E]))<k&&(k=F,I=this.cells[x][E]);return I&&(I.occupied=!0),I},Q.prototype.insertColumn=function(j,k){if(!(k<=0)){for(var F=0;F<k;F++){this.cells[F+this.columnNum]=[];for(var I=0;I<this.rowNum;I++)this.cells[F+this.columnNum][I]={dx:F,dy:I,x:F*this.CELL_W,y:I*this.CELL_H,occupied:!1,node:null}}for(F=this.columnNum-1;F>j;F--)for(I=0;I<this.rowNum;I++)this.cells[F+k][I]=G(G({},this.cells[F][I]),{x:(F+k)*this.CELL_W,y:I*this.CELL_H}),this.cells[F][I]={x:F*this.CELL_W,y:I*this.CELL_H,occupied:!0,node:null};for(I=0;I<this.additionColumn.length;I++)this.additionColumn[I]>=j&&(this.additionColumn[I]+=k);for(F=0;F<k;F++)this.additionColumn.push(j+F+1);this.columnNum+=k}},Q.prototype.insertRow=function(j,k){if(!(k<=0)){for(var F=0;F<k;F++)for(var I=0;I<this.columnNum;I++)this.cells[I][F+this.rowNum]={dx:I,dy:F,x:I*this.CELL_W,y:F*this.CELL_H,occupied:!1,node:null};for(I=0;I<this.columnNum;I++)for(F=this.rowNum-1;F>j;F--)this.cells[I][F+k]=G(G({},this.cells[I][F]),{dx:I,dy:F+k,x:I*this.CELL_W,y:(F+k)*this.CELL_H}),this.cells[I][F]={dx:I,dy:F,x:I*this.CELL_W,y:F*this.CELL_H,occupied:!1,node:null};for(F=0;F<this.additionRow.length;F++)this.additionRow[F]>=j&&(this.additionRow[F]+=k);for(I=0;I<k;I++)this.additionRow.push(j+I+1);this.rowNum+=k}},Q.prototype.getNodes=function(){for(var j=[],k=0;k<this.columnNum;k++)for(var F=0;F<this.rowNum;F++)this.cells[k][F].node&&j.push(this.cells[k][F]);return j},Q.MIN_DIST=50,Q.DEFAULT_CELL_W=80,Q.DEFAULT_CELL_H=80,Q}();V.default=B},433:function(Qt,V,G){"use strict";var I,B=this&&this.__extends||(I=function(x,E){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,w){b.__proto__=w}||function(b,w){for(var y in w)Object.prototype.hasOwnProperty.call(w,y)&&(b[y]=w[y])})(x,E)},function(x,E){if("function"!=typeof E&&null!==E)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function b(){this.constructor=x}I(x,E),x.prototype=null===E?Object.create(E):(b.prototype=E.prototype,new b)}),Q=this&&this.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(V,"__esModule",{value:!0}),V.ERLayout=void 0;var j=G(8792),k=Q(G(8458)),F=function(I){function x(E){var b=I.call(this)||this;return b.width=300,b.height=300,b.nodeMinGap=50,b.onLayoutEnd=function(){},E&&b.updateCfg(E),b}return B(x,I),x.prototype.getDefaultCfg=function(){return{width:300,height:300,nodeMinGap:50}},x.prototype.execute=function(){var E=this,b=E.nodes,w=E.edges;return b?.forEach(function(y){y.size||(y.size=[50,50])}),(0,k.default)({nodes:b,edges:w},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(function(){E.onLayoutEnd&&E.onLayoutEnd()})},x.prototype.getType=function(){return"er"},x}(j.Base);V.ERLayout=F},3170:(Qt,V)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});var Q=1e7,F=1.5707963267948966,E=new Map,y=.8;function P(K,ee){var ae=(E.get(K.id)||[]).find(function(Mt){return Mt.source===ee.id||Mt.target===ee.id}),re=K.size[0]*K.size[1],oe=ee.size[0]*ee.size[1],ve=re>oe?ee:K,we=re>oe?K:ee,_e=ve.x-ve.size[0]/2,me=ve.y-ve.size[1]/2,Ce=ve.x+ve.size[0]/2,fe=ve.y+ve.size[1]/2,be=we.x-we.size[0]/2,te=we.y-we.size[1]/2,de=we.x+we.size[0]/2,ke=we.y+we.size[1]/2,We=ve.y,Ft=we.y,Xe=0,yt=0;if(Ce>=be&&de>=_e&&fe>=te&&ke>=me)0===(yt=Math.sqrt(Math.pow(we.x-ve.x,2)+Math.pow(Ft-We,2)))&&(yt=1e-7),Xe=10/yt*100+((Ce<de?Ce:de)-(_e>be?_e:be))*((fe<ke?fe:ke)-(me>te?me:te)),Xe*=Q;else{var Te=!1,tt=function S(K,ee,X){var ae=K.x-K.size[0]/2,re=K.y-K.size[1]/2,oe=K.x+K.size[0]/2,ve=K.y+K.size[1]/2,we=ee.x-ee.size[0]/2,_e=ee.y-ee.size[1]/2,me=ee.x+ee.size[0]/2,Ce=ee.y+ee.size[1]/2,ke=ee.x-K.x,Ze=Math.atan2(ke,ee.y-K.y),We=0,bt=0,Ft=0,Pt=0;Ze>F?(bt=re-Ce,We=we-oe,Ft=parseFloat(bt?(bt/Math.cos(Ze)).toFixed(2):We.toFixed(2)),Pt=parseFloat(We?(We/Math.sin(Ze)).toFixed(2):bt.toFixed(2))):Ft=Pt=0<Ze&&Ze<=F?(bt=_e-ve)>(We=we-oe)?parseFloat(bt?(bt/Math.cos(Ze)).toFixed(2):We.toFixed(2)):parseFloat(We?(We/Math.sin(Ze)).toFixed(2):bt.toFixed(2)):Ze<-F?(bt=re-Ce)>(We=-(me-ae))?parseFloat(bt?(bt/Math.cos(Ze)).toFixed(2):We.toFixed(2)):parseFloat(We?(We/Math.sin(Ze)).toFixed(2):bt.toFixed(2)):(bt=_e-ve)>(We=Math.abs(ke)>(oe-ae)/2?ae-me:ke)?parseFloat(bt?(bt/Math.cos(Ze)).toFixed(2):We.toFixed(2)):parseFloat(We&&0!==Ze?(We/Math.sin(Ze)).toFixed(2):bt.toFixed(2));var Xe=parseFloat(Ze.toFixed(2)),yt=X;return X&&(yt=1.1780972450961724<Xe&&Xe<1.9634954084936207),{distance:Math.abs(Ft<Pt?Ft:Pt),isHoriz:yt}}(ve,we,Te);Te=tt.isHoriz,(yt=tt.distance)<=10?Xe+=0!==yt?ae?10+1*Q/yt:10+10*Q/yt:Q:(Xe+=yt,ae&&(Xe+=yt*yt))}return Xe}function U(K){for(var ee=0,X=0;X<K.length;X++){var ae=K[X];(ae.x<0||ae.y<0||ae.x>1200||ae.y>800)&&(ee+=1e12);for(var re=X+1;re<K.length;re++)ee+=P(ae,K[re])}return ee}function z(K,ee,X,ae){var re=new Map;X.forEach(function(Ze,We){re.set(Ze.id,Ze)});var oe=ae.filter(function(Ze){return Ze.source===K.id||Ze.target===K.id})||[],ve=[];oe.forEach(function(Ze){var bt=re.get(Ze.source===K.id?Ze.target:Ze.source);bt&&ve.push(bt)});for(var we=!0,_e=0;_e<ve.length;_e++){var me=ve[_e],Ce=180*Math.atan((K.y-me.y)/(me.x-K.y)),fe=180*Math.atan((ee.y-me.y)/(me.x-ee.y)),de=Ce>70&&Ce<110,ke=fe>70&&fe<110;if((Ce<30||Ce>150)&&!(fe<30||fe>150)||Ce*fe<0){we=!1;break}if(de&&!ke||Ce*fe<0){we=!1;break}if((me.x-K.x)*(me.x-ee.x)<0){we=!1;break}if((me.y-K.y)*(me.y-ee.y)<0){we=!1;break}}return we}function ie(K,ee){for(var X=!1,ve=[10,-10,0,0],we=[0,0,10,-10],_e=0;_e<K.length;++_e)for(var me=K[_e],Ce=ne(me,K),fe=0;fe<ve.length;fe++)if(z(me,{x:me.x+ve[fe],y:me.y+we[fe]},K,ee)){me.x+=ve[fe],me.y+=we[fe];var te=ne(me,K),de=Math.random();te<Ce||de<y&&de>.1?(Ce=te,X=!0):(me.x-=ve[fe],me.y-=we[fe])}return y>.1&&(y*=.5),X?U(K):0}function ne(K,ee){var X=0;(K.x<0||K.y<0||K.x+K.size[0]+20>1200||K.y+K.size[1]+20>800)&&(X+=1e12);for(var ae=0;ae<ee.length;++ae)K.id!==ee[ae].id&&(X+=P(K,ee[ae]));return X}V.default=function q(K,ee){if(0===K.length)return{nodes:K,edges:ee};K.forEach(function(me){var Ce=ee.filter(function(fe){return fe.source===me.id||fe.target===me.id});E.set(me,Ce)}),K.sort(function(me,Ce){var fe,be;return(null===(fe=E.get(me.id))||void 0===fe?void 0:fe.length)-(null===(be=E.get(Ce.id))||void 0===be?void 0:be.length)});for(var X=U(K),ae=20,re=1,oe=0,we=0;ae>0&&!(++we>=50);){var _e=ie(K,ee);0!==_e&&(oe=_e),re=oe-X,X=oe,0===re?--ae:ae=20}return K.forEach(function(me){me.x=me.x-me.size[0]/2,me.y=me.y-me.size[1]/2}),{nodes:K,edges:ee}}},8602:function(Qt,V,G){"use strict";var B=this&&this.__createBinding||(Object.create?function(x,E,b,w){void 0===w&&(w=b);var y=Object.getOwnPropertyDescriptor(E,b);(!y||("get"in y?!E.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return E[b]}}),Object.defineProperty(x,w,y)}:function(x,E,b,w){void 0===w&&(w=b),x[w]=E[b]}),Q=this&&this.__setModuleDefault||(Object.create?function(x,E){Object.defineProperty(x,"default",{enumerable:!0,value:E})}:function(x,E){x.default=E}),j=this&&this.__importStar||function(x){if(x&&x.__esModule)return x;var E={};if(null!=x)for(var b in x)"default"!==b&&Object.prototype.hasOwnProperty.call(x,b)&&B(E,x,b);return Q(E,x),E};Object.defineProperty(V,"__esModule",{value:!0});var k=j(G(4188)),F=G(7602);V.default=function I(){function x(Fe){return function(){return Fe}}var K,E=function(Fe){return Fe.cluster},b=x(1),w=x(-1),y=x(100),A=x(.1),M=[0,0],S=[],P={},U=[],z=100,ie=100,ne={none:{x:0,y:0}},q=[],ee="force",X=!0,ae=.1;function re(Fe){if(!X)return re;K.tick(),Ce();for(var ut=0,Ut=S.length,$e=void 0,Te=Fe*ae;ut<Ut;++ut)($e=S[ut]).vx+=(ne[E($e)].x-$e.x)*Te,$e.vy+=(ne[E($e)].y-$e.y)*Te}function oe(){!S||function ve(){if(S&&S.length){if(void 0===E(S[0]))throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var Fe=function we(){var Te,Fe=[],ut=[],Ut={},tt=[];return Te=function _e(Fe){var ut={};return Fe.forEach(function(Ut){var $e=E(Ut);ut[$e]||(ut[$e]={count:0,sumforceNodeSize:0})}),Fe.forEach(function(Ut){var $e=E(Ut),Te=b(Ut),tt=ut[$e];tt.count=tt.count+1,tt.sumforceNodeSize=tt.sumforceNodeSize+Math.PI*(Te*Te)*1.3,ut[$e]=tt}),ut}(S),tt=function me(Fe){var ut={},Ut=[];return Fe.forEach(function(Te){var tt=function fe(Fe){var ut=(0,F.getEdgeTerminal)(Fe,"source"),Ut=(0,F.getEdgeTerminal)(Fe,"target"),$e=E(P[ut]),Te=E(P[Ut]);return $e<=Te?"".concat($e,"~").concat(Te):"".concat(Te,"~").concat($e)}(Te),Mt=0;void 0!==ut[tt]&&(Mt=ut[tt]),ut[tt]=Mt+=1}),Object.entries(ut).forEach(function(Te){var tt=Te[0],Mt=Te[1],Wt=tt.split("~")[0],un=tt.split("~")[1];void 0!==Wt&&void 0!==un&&Ut.push({source:Wt,target:un,count:Mt})}),Ut}(U),Object.keys(Te).forEach(function(Mt,Wt){var un=Te[Mt];Fe.push({id:Mt,size:un.count,r:Math.sqrt(un.sumforceNodeSize/Math.PI)}),Ut[Mt]=Wt}),tt.forEach(function(Mt){var Wt=(0,F.getEdgeTerminal)(Mt,"source"),un=(0,F.getEdgeTerminal)(Mt,"target"),Le=Ut[Wt],zt=Ut[un];void 0!==Le&&void 0!==zt&&ut.push({source:Le,target:zt,count:Mt.count})}),{nodes:Fe,links:ut}}();K=k.forceSimulation(Fe.nodes).force("x",k.forceX(z).strength(.1)).force("y",k.forceY(ie).strength(.1)).force("collide",k.forceCollide(function(ut){return ut.r}).iterations(4)).force("charge",k.forceManyBody().strength(w)).force("links",k.forceLink(Fe.nodes.length?Fe.links:[]).distance(y).strength(A)),q=K.nodes(),Ce()}}()}function Ce(){return ne={none:{x:0,y:0}},q.forEach(function(Fe){ne[Fe.id]={x:Fe.x-M[0],y:Fe.y-M[1]}}),ne}function be(Fe){P={},Fe.forEach(function(ut){P[ut.id]=ut})}return re.initialize=function(Fe){S=Fe,oe()},re.template=function te(Fe){return arguments.length?(ee=Fe,oe(),re):ee},re.groupBy=function de(Fe){return arguments.length?"string"==typeof Fe?(E=function(ut){return ut[Fe]},re):(E=Fe,re):E},re.enableGrouping=function ke(Fe){return arguments.length?(X=Fe,re):X},re.strength=function Ze(Fe){return arguments.length?(ae=Fe,re):ae},re.centerX=function We(Fe){return arguments.length?(z=Fe,re):z},re.centerY=function bt(Fe){return arguments.length?(ie=Fe,re):ie},re.nodes=function Ft(Fe){return arguments.length?(be(Fe||[]),S=Fe||[],re):S},re.links=function Pt(Fe){return arguments.length?(U=Fe||[],oe(),re):U},re.nodeSize=re.forceNodeSize=function Xe(Fe){return arguments.length?(b="function"==typeof Fe?Fe:x(+Fe),oe(),re):b},re.forceCharge=function yt(Fe){return arguments.length?(w="function"==typeof Fe?Fe:x(+Fe),oe(),re):w},re.forceLinkDistance=function Ct(Fe){return arguments.length?(y="function"==typeof Fe?Fe:x(+Fe),oe(),re):y},re.forceLinkStrength=function pt(Fe){return arguments.length?(A="function"==typeof Fe?Fe:x(+Fe),oe(),re):A},re.offset=function xt(Fe){return arguments.length?(M=Fe,re):M},re.getFocis=Ce,re}},6852:function(Qt,V,G){"use strict";var S,B=this&&this.__extends||(S=function(P,U){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(z,ie){z.__proto__=ie}||function(z,ie){for(var ne in ie)Object.prototype.hasOwnProperty.call(ie,ne)&&(z[ne]=ie[ne])})(P,U)},function(P,U){if("function"!=typeof U&&null!==U)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");function z(){this.constructor=P}S(P,U),P.prototype=null===U?Object.create(U):(z.prototype=U.prototype,new z)}),Q=this&&this.__createBinding||(Object.create?function(S,P,U,z){void 0===z&&(z=U);var ie=Object.getOwnPropertyDescriptor(P,U);(!ie||("get"in ie?!P.__esModule:ie.writable||ie.configurable))&&(ie={enumerable:!0,get:function(){return P[U]}}),Object.defineProperty(S,z,ie)}:function(S,P,U,z){void 0===z&&(z=U),S[z]=P[U]}),j=this&&this.__setModuleDefault||(Object.create?function(S,P){Object.defineProperty(S,"default",{enumerable:!0,value:P})}:function(S,P){S.default=P}),k=this&&this.__importStar||function(S){if(S&&S.__esModule)return S;var P={};if(null!=S)for(var U in S)"default"!==U&&Object.prototype.hasOwnProperty.call(S,U)&&Q(P,S,U);return j(P,S),P},F=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(V,"__esModule",{value:!0}),V.ForceLayout=void 0;var I=k(G(4188)),x=F(G(8602)),E=G(7602),b=G(8792),w=G(981),y=function(S){function P(U){var z=S.call(this)||this;return z.center=[0,0],z.nodeStrength=null,z.edgeStrength=null,z.preventOverlap=!1,z.clusterNodeStrength=null,z.clusterEdgeStrength=null,z.clusterEdgeDistance=null,z.clusterNodeSize=null,z.clusterFociStrength=null,z.linkDistance=50,z.alphaDecay=.028,z.alphaMin=.001,z.alpha=.3,z.collideStrength=1,z.workerEnabled=!1,z.tick=function(){},z.onLayoutEnd=function(){},z.ticking=void 0,U&&z.updateCfg(U),z}return B(P,S),P.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}},P.prototype.init=function(U){var z=this;z.nodes=U.nodes||[],z.edges=(U.edges||[]).map(function(ne){var q={},K=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(ne).forEach(function(ee){K.indexOf(ee)>-1||(q[ee]=ne[ee])}),q}),z.ticking=!1},P.prototype.execute=function(U){var z=this,ie=z.nodes,ne=z.edges;if(!z.ticking){var q=z.forceSimulation,K=z.alphaMin,ee=z.alphaDecay,X=z.alpha;if(q){if(U)if(z.clustering&&z.clusterForce&&(z.clusterForce.nodes(ie),z.clusterForce.links(ne)),q.nodes(ie),ne&&z.edgeForce)z.edgeForce.links(ne);else if(ne&&!z.edgeForce){var oe=I.forceLink().id(function(me){return me.id}).links(ne);z.edgeStrength&&oe.strength(z.edgeStrength),z.linkDistance&&oe.distance(z.linkDistance),z.edgeForce=oe,q.force("link",oe)}z.preventOverlap&&z.overlapProcess(q),q.alpha(X).restart(),this.ticking=!0}else try{var ae=I.forceManyBody();if(z.nodeStrength&&ae.strength(z.nodeStrength),q=I.forceSimulation().nodes(ie),z.clustering){var re=(0,x.default)();re.centerX(z.center[0]).centerY(z.center[1]).template("force").strength(z.clusterFociStrength),ne&&re.links(ne),ie&&re.nodes(ie),re.forceLinkDistance(z.clusterEdgeDistance).forceLinkStrength(z.clusterEdgeStrength).forceCharge(z.clusterNodeStrength).forceNodeSize(z.clusterNodeSize),z.clusterForce=re,q.force("group",re)}if(q.force("center",I.forceCenter(z.center[0],z.center[1])).force("charge",ae).alpha(X).alphaDecay(ee).alphaMin(K),z.preventOverlap&&z.overlapProcess(q),ne&&(oe=I.forceLink().id(function(_e){return _e.id}).links(ne),z.edgeStrength&&oe.strength(z.edgeStrength),z.linkDistance&&oe.distance(z.linkDistance),z.edgeForce=oe,q.force("link",oe)),z.workerEnabled&&!function M(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}()&&(z.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),z.workerEnabled){q.stop();for(var ve=function A(S){var P=S.alphaMin(),U=S.alphaTarget(),z=S.alpha(),ie=Math.log((P-U)/(z-U))/Math.log(1-S.alphaDecay());return Math.ceil(ie)}(q),we=1;we<=ve;we++)q.tick(),postMessage({nodes:ie,currentTick:we,totalTicks:ve,type:w.LAYOUT_MESSAGE.TICK},void 0);z.ticking=!1}else q.on("tick",function(){z.tick()}).on("end",function(){z.ticking=!1,z.onLayoutEnd&&z.onLayoutEnd()}),z.ticking=!0;z.forceSimulation=q,z.ticking=!0}catch(_e){z.ticking=!1,console.warn(_e)}}},P.prototype.overlapProcess=function(U){var q,K,z=this,ie=z.nodeSize,ne=z.nodeSpacing,ee=z.collideStrength;if(K=(0,E.isNumber)(ne)?function(){return ne}:(0,E.isFunction)(ne)?ne:function(){return 0},ie)if((0,E.isFunction)(ie))q=function(oe){return ie(oe)+K(oe)};else if((0,E.isArray)(ie)){var ae=(ie[0]>ie[1]?ie[0]:ie[1])/2;q=function(oe){return ae+K(oe)}}else if((0,E.isNumber)(ie)){var re=ie/2;q=function(oe){return re+K(oe)}}else q=function(){return 10};else q=function(oe){return oe.size?(0,E.isArray)(oe.size)?(oe.size[0]>oe.size[1]?oe.size[0]:oe.size[1])/2+K(oe):(0,E.isObject)(oe.size)?(oe.size.width>oe.size.height?oe.size.width:oe.size.height)/2+K(oe):oe.size/2+K(oe):10+K(oe)};U.force("collisionForce",I.forceCollide(q).strength(ee))},P.prototype.updateCfg=function(U){var z=this;z.ticking&&(z.forceSimulation.stop(),z.ticking=!1),z.forceSimulation=null,Object.assign(z,U)},P.prototype.destroy=function(){var U=this;U.ticking&&(U.forceSimulation.stop(),U.ticking=!1),U.nodes=null,U.edges=null,U.destroyed=!0},P}(b.Base);V.ForceLayout=y},4943:function(Qt,V,G){"use strict";var B=this&&this.__createBinding||(Object.create?function(j,k,F,I){void 0===I&&(I=F);var x=Object.getOwnPropertyDescriptor(k,F);(!x||("get"in x?!k.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return k[F]}}),Object.defineProperty(j,I,x)}:function(j,k,F,I){void 0===I&&(I=F),j[I]=k[F]}),Q=this&&this.__exportStar||function(j,k){for(var F in j)"default"!==F&&!Object.prototype.hasOwnProperty.call(k,F)&&B(k,j,F)};Object.defineProperty(V,"__esModule",{value:!0}),Q(G(6852),V)},3933:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.forceNBody=void 0;var B=G(3248);function F(E){var b=0,w=0,y=0;if(E.length){for(var A=0;A<4;A++)(M=E[A])&&M.weight&&(b+=M.weight,w+=M.x*M.weight,y+=M.y*M.weight);E.x=w/b,E.y=y/b,E.weight=b}else{var M;E.x=(M=E).data.x,E.y=M.data.y,E.weight=M.data.weight}}V.forceNBody=function k(E,b,w,y,A){var M=w/y,S=E.map(function(U,z){var ie=b[U.id];return{x:ie.x,y:ie.y,size:ie.size,index:z,vx:0,vy:0,weight:M*ie.data.layout.force.nodeStrength}}),P=(0,B.quadtree)(S,function(U){return U.x},function(U){return U.y}).visitAfter(F);return S.forEach(function(U){!function x(E,b){b.visit(function(w,y,A,M,S){return function(E,b,w,y,A,M){var ne,S=M.x-E.x||.1,P=M.y-E.y||.1,U=y-b,z=S*S+P*P,ie=Math.sqrt(z)*z;if(U*U*.81<z)return M.vx+=S*(ne=E.weight/ie),M.vy+=P*ne,!0;if(E.length)return!1;E.data!==M&&(M.vx+=S*(ne=E.data.weight/ie),M.vy+=P*ne)}(w,y,0,M,0,E)})}(U,P)}),S.map(function(U,z){var ne=b[E[z].id].data.layout.force.mass,q=void 0===ne?1:ne;A[2*z]=U.vx/q,A[2*z+1]=U.vy/q}),A}},1444:function(Qt,V,G){"use strict";var E,B=this&&this.__extends||(E=function(b,w){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,A){y.__proto__=A}||function(y,A){for(var M in A)Object.prototype.hasOwnProperty.call(A,M)&&(y[M]=A[M])})(b,w)},function(b,w){if("function"!=typeof w&&null!==w)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function y(){this.constructor=b}E(b,w),b.prototype=null===w?Object.create(w):(y.prototype=w.prototype,new y)}),Q=this&&this.__assign||function(){return Q=Object.assign||function(E){for(var b,w=1,y=arguments.length;w<y;w++)for(var A in b=arguments[w])Object.prototype.hasOwnProperty.call(b,A)&&(E[A]=b[A]);return E},Q.apply(this,arguments)};Object.defineProperty(V,"__esModule",{value:!0}),V.Force2Layout=void 0;var j=G(8792),k=G(7602),F=G(3933),I=function(E,b){return E?(0,k.isNumber)(E)?function(y){return E}:E:function(y){return b||1}},x=function(E){function b(w){var y=E.call(this)||this;return y.maxIteration=1e3,y.workerEnabled=!1,y.edgeStrength=200,y.nodeStrength=1e3,y.coulombDisScale=.005,y.damping=.9,y.maxSpeed=500,y.minMovement=.4,y.interval=.02,y.factor=1,y.linkDistance=200,y.gravity=0,y.clusterNodeStrength=20,y.preventOverlap=!0,y.distanceThresholdMode="mean",y.tick=function(){},y.nodes=[],y.edges=[],y.width=300,y.height=300,y.nodeMap={},y.nodeIdxMap={},y.judgingDistance=0,y.centripetalOptions={leaf:2,single:2,others:1,center:function(M){return{x:y.width/2,y:y.height/2}}},y.propsGetMass=w.getMass,y.updateCfg(w),y}return B(b,E),b.prototype.getCentripetalOptions=function(){var ne,w=this,A=w.clustering,M=w.nodeClusterBy,S=w.nodes,P=w.nodeMap,U=w.clusterNodeStrength,z=function(ve){return"function"==typeof U?U(ve):U},ie={};if(w.leafCluster){ne=this.getSameTypeLeafMap()||{};var q=Array.from(new Set(S?.map(function(ve){return ve[M]})))||[];ie={single:100,leaf:function(ve,we,_e){var me=ne[ve.id]||{};return me.sameTypeLeafNodes?.length===me.relativeLeafNodes?.length||1===q?.length?1:z(ve)},others:1,center:function(ve,we,_e){var me,fe,Ce=((null===(me=ve.data)||void 0===me?void 0:me.layout)||{}).degree;if(!Ce)return{x:100,y:100};if(1===Ce){var be=(ne[ve.id]||{}).sameTypeLeafNodes,te=void 0===be?[]:be;1===te.length?fe=void 0:te.length>1&&(fe=(0,k.getAvgNodePosition)(te))}else fe=void 0;return{x:fe?.x,y:fe?.y}}}}if(A){ne||(ne=this.getSameTypeLeafMap());var K=Array.from(new Set(S.map(function(ve,we){return ve[M]}))).filter(function(ve){return void 0!==ve}),ee={};K.forEach(function(ve){var we=S.filter(function(_e){return _e[M]===ve}).map(function(_e){return P[_e.id]});ee[ve]=(0,k.getAvgNodePosition)(we)}),ie={single:function(ve){return z(ve)},leaf:function(ve){return z(ve)},others:function(ve){return z(ve)},center:function(ve,we,_e){var me=ee[ve[M]];return{x:me?.x,y:me?.y}}}}this.centripetalOptions=Q(Q({},this.centripetalOptions),ie);var X=this.centripetalOptions,ae=X.leaf,re=X.single,oe=X.others;ae&&"function"!=typeof ae&&(this.centripetalOptions.leaf=function(){return ae}),re&&"function"!=typeof re&&(this.centripetalOptions.single=function(){return re}),oe&&"function"!=typeof oe&&(this.centripetalOptions.others=function(){return oe})},b.prototype.updateCfg=function(w){w&&Object.assign(this,w)},b.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},b.prototype.execute=function(){var w=this;w.stop();var y=w.nodes,A=w.edges,M=w.defSpringLen;if(w.judgingDistance=0,y&&0!==y.length){!w.width&&typeof window<"u"&&(w.width=window.innerWidth),!w.height&&typeof window<"u"&&(w.height=window.innerHeight),w.center||(w.center=[w.width/2,w.height/2]);var S=w.center;if(1===y.length)return y[0].x=S[0],y[0].y=S[1],void w.onLayoutEnd([Q({},y[0])]);w.degreesMap=(0,k.getDegreeMap)(y,A),w.getMass=w.propsGetMass?w.propsGetMass:function(K){var ee=1;(0,k.isNumber)(K.mass)&&(ee=K.mass);var X=w.degreesMap[K.id].all;return!X||X<5?ee:5*X*ee};var U,P=w.nodeSize;if(w.preventOverlap){var ie,z=w.nodeSpacing;ie=(0,k.isNumber)(z)?function(){return z}:(0,k.isFunction)(z)?z:function(){return 0},U=P?(0,k.isArray)(P)?function(K){return Math.max(P[0],P[1])+ie(K)}:function(K){return P+ie(K)}:function(K){return K.size?(0,k.isArray)(K.size)?Math.max(K.size[0],K.size[1])+ie(K):(0,k.isObject)(K.size)?Math.max(K.size.width,K.size.height)+ie(K):K.size+ie(K):10+ie(K)}}w.nodeSize=U,w.linkDistance=I(w.linkDistance,1),w.nodeStrength=I(w.nodeStrength,1),w.edgeStrength=I(w.edgeStrength,1);var ne={},q={};y.forEach(function(K,ee){(0,k.isNumber)(K.x)||(K.x=Math.random()*w.width),(0,k.isNumber)(K.y)||(K.y=Math.random()*w.height);var X=w.degreesMap[K.id];ne[K.id]=Q(Q({},K),{data:Q(Q({},K.data),{size:w.nodeSize(K)||30,layout:{inDegree:X.in,outDegree:X.out,degree:X.all,tDegree:X.in,sDegree:X.out,force:{mass:w.getMass(K),nodeStrength:w.nodeStrength(K)}}})}),q[K.id]=ee}),w.nodeMap=ne,w.nodeIdxMap=q,w.edgeInfos=[],A?.forEach(function(K){var ee=ne[K.source],X=ne[K.target];ee&&X?w.edgeInfos.push({edgeStrength:w.edgeStrength(K),linkDistance:M?M(Q(Q({},K),{source:ee,target:X}),ee,X):w.linkDistance(K,ee,X)||1+(P(ee)+P(ee)||0)/2}):elf.edgeInfos.push({})}),this.getCentripetalOptions(),w.onLayoutEnd=w.onLayoutEnd||function(){},w.run()}else w.onLayoutEnd([])},b.prototype.run=function(){var w=this,y=w.maxIteration,A=w.nodes,M=w.workerEnabled,S=w.minMovement,P=w.animate,U=w.nodeMap;if(A){var z=[];A.forEach(function(X,ae){z[2*ae]=0,z[2*ae+1]=0});var ie=y;if(M||!P){for(var K=0;(w.judgingDistance>S||K<1)&&K<ie;K++)w.runOneStep(K,z);w.onLayoutEnd(Object.values(U))}else{if(typeof window>"u")return;var ee=0;this.timeInterval=window.setInterval(function(){!A||(w.runOneStep(ee,z),(++ee>=ie||w.judgingDistance<S)&&(w.onLayoutEnd(Object.values(U)),window.clearInterval(w.timeInterval)))},0)}}},b.prototype.runOneStep=function(w,y){var A,M=this,S=M.nodes,P=M.edges,z=M.monitor,ie=[];if(S?.length){M.calRepulsive(ie),P&&M.calAttractive(ie),M.calGravity(ie);var ne=M.interval;M.updateVelocity(ie,y,ne),M.updatePosition(y,ne),null===(A=M.tick)||void 0===A||A.call(M),z&&z({energy:this.calTotalEnergy(ie),nodes:S,edges:P,iterations:w})}},b.prototype.calTotalEnergy=function(w){var A=this.nodes,M=this.nodeMap;if(!A?.length)return 0;var S=0;return A.forEach(function(P,U){var z=w[2*U],ie=w[2*U+1],q=M[P.id].data.layout.force.mass;S+=(void 0===q?1:q)*(z*z+ie*ie)*.5}),S},b.prototype.calRepulsive=function(w){var y=this,P=y.coulombDisScale;(0,F.forceNBody)(y.nodes,y.nodeMap,y.factor,P*P,w)},b.prototype.calAttractive=function(w){var y=this,M=y.nodeMap,S=y.nodeIdxMap,P=y.edgeInfos;y.edges.forEach(function(z,ie){var ne=(0,k.getEdgeTerminal)(z,"source"),q=(0,k.getEdgeTerminal)(z,"target"),K=M[ne],ee=M[q];if(K&&ee){var X=ee.x-K.x,ae=ee.y-K.y;!X&&!ae&&(X=.01*Math.random(),ae=.01*Math.random());var re=Math.sqrt(X*X+ae*ae),we=P[ie]||{},_e=we.linkDistance,Ce=we.edgeStrength,te=((void 0===_e?200:_e)-re)*(void 0===Ce?200:Ce),Ze=1/(K.data.layout.force.mass||1),We=1/(ee.data.layout.force.mass||1),bt=X/re*te,Ft=ae/re*te,Pt=2*S[ne],Xe=2*S[q];w[Pt]-=bt*Ze,w[Pt+1]-=Ft*Ze,w[Xe]+=bt*We,w[Xe+1]+=Ft*We}})},b.prototype.calGravity=function(w){var y,A=this,M=A.nodes,S=A.edges,P=void 0===S?[]:S,U=A.nodeMap,z=A.width,ie=A.height,ne=A.center,q=A.gravity,K=A.degreesMap,ee=A.centripetalOptions;if(M)for(var X=M.length,ae=0;ae<X;ae++){var re=2*ae,oe=U[M[ae].id],ve=oe.data.layout.force.mass,we=void 0===ve?1:ve,_e=0,me=0,Ce=q,fe=K[oe.id],be=fe.in,te=fe.out,de=fe.all,ke=null===(y=A.getCenter)||void 0===y?void 0:y.call(A,oe,de);if(ke?(_e=oe.x-ke[0],me=oe.y-ke[1],Ce=ke[2]):(_e=oe.x-ne[0],me=oe.y-ne[1]),Ce&&(w[re]-=Ce*_e/we,w[re+1]-=Ce*me/we),ee){var Ft=ee.leaf,Pt=ee.single,Xe=ee.others,Ct=(0,ee.center)?.(oe,M,P,z,ie)||{x:0,y:0,centerStrength:0},pt=Ct.x,xt=Ct.y,Fe=Ct.centerStrength;if(!(0,k.isNumber)(pt)||!(0,k.isNumber)(xt))continue;var ut=(oe.x-pt)/we,Ut=(oe.y-xt)/we;if(Fe&&(w[re]-=Fe*ut,w[re+1]-=Fe*Ut),0===de){var $e=Pt(oe);if(!$e)continue;w[re]-=$e*ut,w[re+1]-=$e*Ut;continue}if(0===be||0===te){var Te=Ft(oe,M,P);if(!Te)continue;w[re]-=Te*ut,w[re+1]-=Te*Ut;continue}var tt=Xe(oe);if(!tt)continue;w[re]-=tt*ut,w[re+1]-=tt*Ut}}},b.prototype.updateVelocity=function(w,y,A){var M=this,S=M.nodes,P=M.damping,U=M.maxSpeed;!S?.length||S.forEach(function(z,ie){var ne=(y[2*ie]+w[2*ie]*A)*P||.01,q=(y[2*ie+1]+w[2*ie+1]*A)*P||.01,K=Math.sqrt(ne*ne+q*q);if(K>U){var ee=U/K;ne*=ee,q*=ee}y[2*ie]=ne,y[2*ie+1]=q})},b.prototype.updatePosition=function(w,y){var A=this,M=A.nodes,S=A.distanceThresholdMode,P=A.nodeMap;if(M?.length){var U=0;"max"===S?A.judgingDistance=-1/0:"min"===S&&(A.judgingDistance=1/0),M.forEach(function(z,ie){var ne=P[z.id];if((0,k.isNumber)(z.fx)&&(0,k.isNumber)(z.fy))return z.x=z.fx,z.y=z.fy,ne.x=z.x,void(ne.y=z.y);var q=w[2*ie]*y,K=w[2*ie+1]*y;z.x+=q,z.y+=K,ne.x=z.x,ne.y=z.y;var ee=Math.sqrt(q*q+K*K);switch(S){case"max":A.judgingDistance<ee&&(A.judgingDistance=ee);break;case"min":A.judgingDistance>ee&&(A.judgingDistance=ee);break;default:U+=ee}}),(!S||"mean"===S)&&(A.judgingDistance=U/M.length)}else this.judgingDistance=0},b.prototype.stop=function(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval)},b.prototype.destroy=function(){var w=this;w.stop(),w.tick=null,w.nodes=null,w.edges=null,w.destroyed=!0},b.prototype.getType=function(){return"force2"},b.prototype.getSameTypeLeafMap=function(){var w=this,y=w.nodeClusterBy,A=w.nodes,M=w.edges,S=w.nodeMap,P=w.degreesMap;if(A?.length){var U={};return A.forEach(function(z,ie){1===P[z.id].all&&(U[z.id]=(0,k.getCoreNodeAndRelativeLeafNodes)("leaf",z,M,y,P,S))}),U}},b}(j.Base);V.Force2Layout=x},1430:(Qt,V)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});var G=function(){function B(Q){this.id=Q.id||0,this.rx=Q.rx,this.ry=Q.ry,this.fx=0,this.fy=0,this.mass=Q.mass,this.degree=Q.degree,this.g=Q.g||0}return B.prototype.distanceTo=function(Q){return Math.hypot(this.rx-Q.rx,this.ry-Q.ry)},B.prototype.setPos=function(Q,j){this.rx=Q,this.ry=j},B.prototype.resetForce=function(){this.fx=0,this.fy=0},B.prototype.addForce=function(Q){var j=Q.rx-this.rx,k=Q.ry-this.ry,F=Math.hypot(j,k),I=this.g*(this.degree+1)*(Q.degree+1)/(F=F<1e-4?1e-4:F);this.fx+=I*j/F,this.fy+=I*k/F},B.prototype.in=function(Q){return Q.contains(this.rx,this.ry)},B.prototype.add=function(Q){var j=this.mass+Q.mass;return new B({rx:(this.rx*this.mass+Q.rx*Q.mass)/j,ry:(this.ry*this.mass+Q.ry*Q.mass)/j,mass:j,degree:this.degree+Q.degree})},B}();V.default=G},3259:function(Qt,V,G){"use strict";var b,B=this&&this.__extends||(b=function(w,y){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,M){A.__proto__=M}||function(A,M){for(var S in M)Object.prototype.hasOwnProperty.call(M,S)&&(A[S]=M[S])})(w,y)},function(w,y){if("function"!=typeof y&&null!==y)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function A(){this.constructor=w}b(w,y),w.prototype=null===y?Object.create(y):(A.prototype=y.prototype,new A)}),Q=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(V,"__esModule",{value:!0}),V.ForceAtlas2Layout=void 0;var j=G(8792),k=G(7602),F=Q(G(1430)),I=Q(G(600)),x=Q(G(3125)),E=function(b){function w(y){var A=b.call(this)||this;return A.center=[0,0],A.width=300,A.height=300,A.nodes=[],A.edges=[],A.kr=5,A.kg=1,A.mode="normal",A.preventOverlap=!1,A.dissuadeHubs=!1,A.barnesHut=void 0,A.maxIteration=0,A.ks=.1,A.ksmax=10,A.tao=.1,A.onLayoutEnd=function(){},A.prune=void 0,A.updateCfg(y),A}return B(w,b),w.prototype.getDefaultCfg=function(){return{}},w.prototype.execute=function(){var y=this,A=y.nodes,M=y.onLayoutEnd,S=y.prune,P=y.maxIteration;!y.width&&typeof window<"u"&&(y.width=window.innerWidth),!y.height&&typeof window<"u"&&(y.height=window.innerHeight);for(var U=[],z=A.length,ie=0;ie<z;ie+=1){var ne=A[ie],q=10,K=10;(0,k.isNumber)(ne.size)&&(q=ne.size,K=ne.size),(0,k.isArray)(ne.size)?(isNaN(ne.size[0])||(q=ne.size[0]),isNaN(ne.size[1])||(K=ne.size[1])):(0,k.isObject)(ne.size)&&(q=ne.size.width,K=ne.size.height),y.getWidth&&!isNaN(y.getWidth(ne))&&(K=y.getWidth(ne)),y.getHeight&&!isNaN(y.getHeight(ne))&&(q=y.getHeight(ne));var ee=Math.max(q,K);U.push(ee)}void 0===y.barnesHut&&z>250&&(y.barnesHut=!0),void 0===y.prune&&z>100&&(y.prune=!0),0!==this.maxIteration||y.prune?0===this.maxIteration&&S&&(P=100,z<=200&&z>100?P=500:z>200&&(P=950),this.maxIteration=P):(P=250,z<=200&&z>100?P=1e3:z>200&&(P=1200),this.maxIteration=P),y.kr||(y.kr=50,z>100&&z<=500?y.kr=20:z>500&&(y.kr=1)),y.kg||(y.kg=20,z>100&&z<=500?y.kg=10:z>500&&(y.kg=1)),this.nodes=y.updateNodesByForces(U),M()},w.prototype.updateNodesByForces=function(y){for(var A=this,S=A.maxIteration,P=A.nodes,U=A.edges.filter(function(fe){return(0,k.getEdgeTerminal)(fe,"source")!==(0,k.getEdgeTerminal)(fe,"target")}),z=P.length,ie=U.length,ne=[],q={},K={},ee=[],X=0;X<z;X+=1)q[P[X].id]=X,ne[X]=0,(void 0===P[X].x||isNaN(P[X].x))&&(P[X].x=1e3*Math.random()),(void 0===P[X].y||isNaN(P[X].y))&&(P[X].y=1e3*Math.random()),ee.push({x:P[X].x,y:P[X].y});for(X=0;X<ie;X+=1){for(var ae=void 0,re=void 0,oe=0,ve=0,we=0;we<z;we+=1){var _e=(0,k.getEdgeTerminal)(U[X],"source"),me=(0,k.getEdgeTerminal)(U[X],"target");P[we].id===_e?(ae=P[we],oe=we):P[we].id===me&&(re=P[we],ve=we),K[X]={sourceIdx:oe,targetIdx:ve}}ae&&(ne[q[ae.id]]+=1),re&&(ne[q[re.id]]+=1)}var Ce=S;if(P=this.iterate(Ce,q,K,ie,ne,y),A.prune){for(we=0;we<ie;we+=1)ne[K[we].sourceIdx]<=1?(P[K[we].sourceIdx].x=P[K[we].targetIdx].x,P[K[we].sourceIdx].y=P[K[we].targetIdx].y):ne[K[we].targetIdx]<=1&&(P[K[we].targetIdx].x=P[K[we].sourceIdx].x,P[K[we].targetIdx].y=P[K[we].sourceIdx].y);A.prune=!1,A.barnesHut=!1,P=this.iterate(Ce=100,q,K,ie,ne,y)}return P},w.prototype.iterate=function(y,A,M,S,P,U){for(var z=this,ie=z.nodes,ne=z.kr,q=z.preventOverlap,K=z.barnesHut,ee=ie.length,X=0,re=y,ve=[],we=[],_e=[],me=0;me<ee;me+=1)ve[2*me]=0,ve[2*me+1]=0,K&&(_e[me]=new F.default({id:me,rx:ie[me].x,ry:ie[me].y,mass:1,g:ne,degree:P[me]}));for(;re>0;){for(me=0;me<ee;me+=1)we[2*me]=ve[2*me],we[2*me+1]=ve[2*me+1],ve[2*me]=0,ve[2*me+1]=0;ve=this.getAttrForces(re,50,S,A,M,P,U,ve),ve=K&&(q&&re>50||!q)?this.getOptRepGraForces(ve,_e,P):this.getRepGraForces(re,50,ve,100,U,P);var fe=this.updatePos(ve,we,X,P);ie=fe.nodes,X=fe.sg,re--,z.tick&&z.tick()}return ie},w.prototype.getAttrForces=function(y,A,M,S,P,U,z,ie){for(var ne=this,q=ne.nodes,K=ne.preventOverlap,ee=ne.dissuadeHubs,X=ne.mode,ae=ne.prune,re=0;re<M;re+=1){var oe=q[P[re].sourceIdx],ve=P[re].sourceIdx,we=q[P[re].targetIdx],_e=P[re].targetIdx;if(!ae||!(U[ve]<=1||U[_e]<=1)){var me=[we.x-oe.x,we.y-oe.y],Ce=Math.hypot(me[0],me[1]);me[0]=me[0]/(Ce=Ce<1e-4?1e-4:Ce),me[1]=me[1]/Ce,K&&y<A&&(Ce=Ce-z[ve]-z[_e]);var fe=Ce,be=fe;"linlog"===X&&(be=fe=Math.log(1+Ce)),ee&&(fe=Ce/U[ve],be=Ce/U[_e]),K&&y<A&&Ce<=0?(fe=0,be=0):K&&y<A&&Ce>0&&(fe=Ce,be=Ce),ie[2*S[oe.id]]+=fe*me[0],ie[2*S[we.id]]-=be*me[0],ie[2*S[oe.id]+1]+=fe*me[1],ie[2*S[we.id]+1]-=be*me[1]}}return ie},w.prototype.getRepGraForces=function(y,A,M,S,P,U){for(var z=this,ie=z.nodes,ne=z.preventOverlap,q=z.kr,K=z.kg,ee=z.center,X=z.prune,ae=ie.length,re=0;re<ae;re+=1){for(var oe=re+1;oe<ae;oe+=1)if(!X||!(U[re]<=1||U[oe]<=1)){var ve=[ie[oe].x-ie[re].x,ie[oe].y-ie[re].y],we=Math.hypot(ve[0],ve[1]);ve[0]=ve[0]/(we=we<1e-4?1e-4:we),ve[1]=ve[1]/we,ne&&y<A&&(we=we-P[re]-P[oe]);var _e=q*(U[re]+1)*(U[oe]+1)/we;ne&&y<A&&we<0?_e=S*(U[re]+1)*(U[oe]+1):ne&&y<A&&0===we?_e=0:ne&&y<A&&we>0&&(_e=q*(U[re]+1)*(U[oe]+1)/we),M[2*re]-=_e*ve[0],M[2*oe]+=_e*ve[0],M[2*re+1]-=_e*ve[1],M[2*oe+1]+=_e*ve[1]}var me=[ie[re].x-ee[0],ie[re].y-ee[1]],Ce=Math.hypot(me[0],me[1]);me[0]=me[0]/Ce,me[1]=me[1]/Ce;var fe=K*(U[re]+1);M[2*re]-=fe*me[0],M[2*re+1]-=fe*me[1]}return M},w.prototype.getOptRepGraForces=function(y,A,M){for(var S=this,P=S.nodes,U=S.kg,z=S.center,ie=S.prune,ne=P.length,q=9e10,K=-9e10,ee=9e10,X=-9e10,ae=0;ae<ne;ae+=1)ie&&M[ae]<=1||(A[ae].setPos(P[ae].x,P[ae].y),P[ae].x>=K&&(K=P[ae].x),P[ae].x<=q&&(q=P[ae].x),P[ae].y>=X&&(X=P[ae].y),P[ae].y<=ee&&(ee=P[ae].y));var re=Math.max(K-q,X-ee),ve=new I.default({xmid:(K+q)/2,ymid:(X+ee)/2,length:re,massCenter:z,mass:ne}),we=new x.default(ve);for(ae=0;ae<ne;ae+=1)ie&&M[ae]<=1||A[ae].in(ve)&&we.insert(A[ae]);for(ae=0;ae<ne;ae+=1)if(!(ie&&M[ae]<=1)){A[ae].resetForce(),we.updateForce(A[ae]),y[2*ae]-=A[ae].fx,y[2*ae+1]-=A[ae].fy;var _e=[P[ae].x-z[0],P[ae].y-z[1]],me=Math.hypot(_e[0],_e[1]);_e[0]=_e[0]/(me=me<1e-4?1e-4:me),_e[1]=_e[1]/me;var Ce=U*(M[ae]+1);y[2*ae]-=Ce*_e[0],y[2*ae+1]-=Ce*_e[1]}return y},w.prototype.updatePos=function(y,A,M,S){for(var P=this,U=P.nodes,z=P.ks,ie=P.tao,ne=P.prune,q=P.ksmax,K=U.length,ee=[],X=[],ae=0,re=0,oe=0;oe<K;oe+=1)if(!(ne&&S[oe]<=1)){var ve=[y[2*oe]-A[2*oe],y[2*oe+1]-A[2*oe+1]],we=Math.hypot(ve[0],ve[1]),_e=[y[2*oe]+A[2*oe],y[2*oe+1]+A[2*oe+1]],me=Math.hypot(_e[0],_e[1]);ee[oe]=we,X[oe]=me/2,ae+=(S[oe]+1)*ee[oe],re+=(S[oe]+1)*X[oe]}var Ce=M;for(M=ie*re/ae,0!==Ce&&(M=M>1.5*Ce?1.5*Ce:M),oe=0;oe<K;oe+=1)if(!(ne&&S[oe]<=1||(0,k.isNumber)(U[oe].fx)&&(0,k.isNumber)(U[oe].fy))){var fe=z*M/(1+M*Math.sqrt(ee[oe])),be=Math.hypot(y[2*oe],y[2*oe+1]),te=q/(be=be<1e-4?1e-4:be),ke=(fe=fe>te?te:fe)*y[2*oe+1];U[oe].x+=fe*y[2*oe],U[oe].y+=ke}return{nodes:U,sg:M}},w}(j.Base);V.ForceAtlas2Layout=E},600:(Qt,V)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});var G=function(){function B(Q){this.xmid=Q.xmid,this.ymid=Q.ymid,this.length=Q.length,this.massCenter=Q.massCenter||[0,0],this.mass=Q.mass||1}return B.prototype.getLength=function(){return this.length},B.prototype.contains=function(Q,j){var k=this.length/2;return Q<=this.xmid+k&&Q>=this.xmid-k&&j<=this.ymid+k&&j>=this.ymid-k},B.prototype.NW=function(){return new B({xmid:this.xmid-this.length/4,ymid:this.ymid+this.length/4,length:this.length/2})},B.prototype.NE=function(){return new B({xmid:this.xmid+this.length/4,ymid:this.ymid+this.length/4,length:this.length/2})},B.prototype.SW=function(){return new B({xmid:this.xmid-this.length/4,ymid:this.ymid-this.length/4,length:this.length/2})},B.prototype.SE=function(){return new B({xmid:this.xmid+this.length/4,ymid:this.ymid-this.length/4,length:this.length/2})},B}();V.default=G},3125:(Qt,V)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});var G=function(){function B(Q){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,null!=Q&&(this.quad=Q)}return B.prototype.insert=function(Q){null!=this.body?this._isExternal()?(this.quad&&(this.NW=new B(this.quad.NW()),this.NE=new B(this.quad.NE()),this.SW=new B(this.quad.SW()),this.SE=new B(this.quad.SE())),this._putBody(this.body),this._putBody(Q),this.body=this.body.add(Q)):(this.body=this.body.add(Q),this._putBody(Q)):this.body=Q},B.prototype._putBody=function(Q){!this.quad||(Q.in(this.quad.NW())&&this.NW?this.NW.insert(Q):Q.in(this.quad.NE())&&this.NE?this.NE.insert(Q):Q.in(this.quad.SW())&&this.SW?this.SW.insert(Q):Q.in(this.quad.SE())&&this.SE&&this.SE.insert(Q))},B.prototype._isExternal=function(){return null==this.NW&&null==this.NE&&null==this.SW&&null==this.SE},B.prototype.updateForce=function(Q){null!=this.body&&Q!==this.body&&(this._isExternal()||(this.quad?this.quad.getLength():0)/this.body.distanceTo(Q)<this.theta?Q.addForce(this.body):(this.NW&&this.NW.updateForce(Q),this.NE&&this.NE.updateForce(Q),this.SW&&this.SW.updateForce(Q),this.SE&&this.SE.updateForce(Q)))},B}();V.default=G},5703:function(Qt,V,G){"use strict";var I,B=this&&this.__extends||(I=function(x,E){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,w){b.__proto__=w}||function(b,w){for(var y in w)Object.prototype.hasOwnProperty.call(w,y)&&(b[y]=w[y])})(x,E)},function(x,E){if("function"!=typeof E&&null!==E)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function b(){this.constructor=x}I(x,E),x.prototype=null===E?Object.create(E):(b.prototype=E.prototype,new b)});Object.defineProperty(V,"__esModule",{value:!0}),V.FruchtermanLayout=void 0;var Q=G(8792),j=G(7602),F=function(I){function x(E){var b=I.call(this)||this;return b.maxIteration=1e3,b.workerEnabled=!1,b.gravity=10,b.speed=5,b.clustering=!1,b.clusterGravity=10,b.nodes=[],b.edges=[],b.width=300,b.height=300,b.nodeMap={},b.nodeIdxMap={},b.onLayoutEnd=function(){},b.tick=function(){},b.animate=!0,b.updateCfg(E),b}return B(x,I),x.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}},x.prototype.execute=function(){var b,w,E=this,y=this,A=y.nodes;if(void 0!==y.timeInterval&&typeof window<"u"&&window.clearInterval(y.timeInterval),A&&0!==A.length){!y.width&&typeof window<"u"&&(y.width=window.innerWidth),!y.height&&typeof window<"u"&&(y.height=window.innerHeight),y.center||(y.center=[y.width/2,y.height/2]);var M=y.center;if(1===A.length)return A[0].x=M[0],A[0].y=M[1],void(null===(w=y.onLayoutEnd)||void 0===w||w.call(y));var S={},P={};return A.forEach(function(U,z){(0,j.isNumber)(U.x)||(U.x=Math.random()*E.width),(0,j.isNumber)(U.y)||(U.y=Math.random()*E.height),S[U.id]=U,P[U.id]=z}),y.nodeMap=S,y.nodeIdxMap=P,y.run()}null===(b=y.onLayoutEnd)||void 0===b||b.call(y)},x.prototype.run=function(){var E,b=this,w=b.nodes;if(w){var y=b.edges,A=b.maxIteration,M=b.workerEnabled,P=b.animate,U={};if(b.clustering&&w.forEach(function(ne){void 0===U[ne.cluster]&&(U[ne.cluster]={name:ne.cluster,cx:0,cy:0,count:0})}),M||!P){for(var z=0;z<A;z++)b.runOneStep(U);null===(E=b.onLayoutEnd)||void 0===E||E.call(b)}else{if(typeof window>"u")return;var ie=0;this.timeInterval=window.setInterval(function(){var ne;b.runOneStep(U),++ie>=A&&(null===(ne=b.onLayoutEnd)||void 0===ne||ne.call(b),window.clearInterval(b.timeInterval))},0)}return{nodes:w,edges:y}}},x.prototype.runOneStep=function(E){var b,w=this,y=w.nodes;if(y){var A=w.edges,M=w.center,S=w.gravity,P=w.speed,U=w.clustering,z=w.height*w.width,ie=Math.sqrt(z)/10,ne=z/(y.length+1),q=Math.sqrt(ne),K=[];if(y.forEach(function(ae,re){K[re]={x:0,y:0}}),w.applyCalculate(y,A,K,q,ne),U){for(var ee in E)E[ee].cx=0,E[ee].cy=0,E[ee].count=0;for(var ee in y.forEach(function(ae){var re=E[ae.cluster];(0,j.isNumber)(ae.x)&&(re.cx+=ae.x),(0,j.isNumber)(ae.y)&&(re.cy+=ae.y),re.count++}),E)E[ee].cx/=E[ee].count,E[ee].cy/=E[ee].count;var X=w.clusterGravity||S;y.forEach(function(ae,re){if((0,j.isNumber)(ae.x)&&(0,j.isNumber)(ae.y)){var oe=E[ae.cluster],ve=Math.sqrt((ae.x-oe.cx)*(ae.x-oe.cx)+(ae.y-oe.cy)*(ae.y-oe.cy)),we=q*X;K[re].x-=we*(ae.x-oe.cx)/ve,K[re].y-=we*(ae.y-oe.cy)/ve}})}y.forEach(function(ae,re){if((0,j.isNumber)(ae.x)&&(0,j.isNumber)(ae.y)){var oe=.01*q*S;K[re].x-=oe*(ae.x-M[0]),K[re].y-=oe*(ae.y-M[1])}}),y.forEach(function(ae,re){if((0,j.isNumber)(ae.fx)&&(0,j.isNumber)(ae.fy))return ae.x=ae.fx,void(ae.y=ae.fy);if((0,j.isNumber)(ae.x)&&(0,j.isNumber)(ae.y)){var oe=Math.sqrt(K[re].x*K[re].x+K[re].y*K[re].y);if(oe>0){var ve=Math.min(ie*(P/800),oe);ae.x+=K[re].x/oe*ve,ae.y+=K[re].y/oe*ve}}}),null===(b=w.tick)||void 0===b||b.call(w)}},x.prototype.applyCalculate=function(E,b,w,y,A){this.calRepulsive(E,w,A),b&&this.calAttractive(b,w,y)},x.prototype.calRepulsive=function(E,b,w){E.forEach(function(y,A){b[A]={x:0,y:0},E.forEach(function(M,S){if(A!==S&&(0,j.isNumber)(y.x)&&(0,j.isNumber)(M.x)&&(0,j.isNumber)(y.y)&&(0,j.isNumber)(M.y)){var P=y.x-M.x,U=y.y-M.y,z=P*P+U*U;if(0===z){z=1;var ie=A>S?1:-1;P=.01*ie,U=.01*ie}var ne=w/z;b[A].x+=P*ne,b[A].y+=U*ne}})})},x.prototype.calAttractive=function(E,b,w){var y=this;E.forEach(function(A){var M=(0,j.getEdgeTerminal)(A,"source"),S=(0,j.getEdgeTerminal)(A,"target");if(M&&S){var P=y.nodeIdxMap[M],U=y.nodeIdxMap[S];if(P!==U){var z=y.nodeMap[M],ie=y.nodeMap[S];if((0,j.isNumber)(ie.x)&&(0,j.isNumber)(z.x)&&(0,j.isNumber)(ie.y)&&(0,j.isNumber)(z.y)){var ne=ie.x-z.x,q=ie.y-z.y,K=Math.sqrt(ne*ne+q*q),ee=K*K/w;b[U].x-=ne/K*ee,b[U].y-=q/K*ee,b[P].x+=ne/K*ee,b[P].y+=q/K*ee}}}})},x.prototype.stop=function(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval)},x.prototype.destroy=function(){var E=this;E.stop(),E.tick=null,E.nodes=null,E.edges=null,E.destroyed=!0},x.prototype.getType=function(){return"fruchterman"},x}(Q.Base);V.FruchtermanLayout=F},5626:function(Qt,V,G){"use strict";var I,B=this&&this.__extends||(I=function(x,E){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,w){b.__proto__=w}||function(b,w){for(var y in w)Object.prototype.hasOwnProperty.call(w,y)&&(b[y]=w[y])})(x,E)},function(x,E){if("function"!=typeof E&&null!==E)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function b(){this.constructor=x}I(x,E),x.prototype=null===E?Object.create(E):(b.prototype=E.prototype,new b)});Object.defineProperty(V,"__esModule",{value:!0}),V.GForceLayout=void 0;var Q=G(8792),j=G(7602),k=function(I,x){return I?(0,j.isNumber)(I)?function(b){return I}:I:function(b){return x||1}},F=function(I){function x(E){var b=I.call(this)||this;return b.maxIteration=500,b.workerEnabled=!1,b.edgeStrength=200,b.nodeStrength=1e3,b.coulombDisScale=.005,b.damping=.9,b.maxSpeed=1e3,b.minMovement=.5,b.interval=.02,b.factor=1,b.linkDistance=1,b.gravity=10,b.preventOverlap=!0,b.collideStrength=1,b.tick=function(){},b.nodes=[],b.edges=[],b.width=300,b.height=300,b.nodeMap={},b.nodeIdxMap={},b.animate=!0,b.updateCfg(E),b}return B(x,I),x.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},x.prototype.execute=function(){var E,b,w=this,y=w.nodes;if(void 0!==w.timeInterval&&typeof window<"u"&&window.clearInterval(w.timeInterval),y&&0!==y.length){!w.width&&typeof window<"u"&&(w.width=window.innerWidth),!w.height&&typeof window<"u"&&(w.height=window.innerHeight),w.center||(w.center=[w.width/2,w.height/2]);var A=w.center;if(1===y.length)return y[0].x=A[0],y[0].y=A[1],void(null===(b=w.onLayoutEnd)||void 0===b||b.call(w));var M={},S={};y.forEach(function(q,K){(0,j.isNumber)(q.x)||(q.x=Math.random()*w.width),(0,j.isNumber)(q.y)||(q.y=Math.random()*w.height),M[q.id]=q,S[q.id]=K}),w.nodeMap=M,w.nodeIdxMap=S,w.linkDistance=k(w.linkDistance,1),w.nodeStrength=k(w.nodeStrength,1),w.edgeStrength=k(w.edgeStrength,1);var U,P=w.nodeSize;if(w.preventOverlap){var ie,z=w.nodeSpacing;ie=(0,j.isNumber)(z)?function(){return z}:(0,j.isFunction)(z)?z:function(){return 0},U=P?(0,j.isArray)(P)?function(q){return Math.max(P[0],P[1])+ie(q)}:function(q){return P+ie(q)}:function(q){return q.size?(0,j.isArray)(q.size)?Math.max(q.size[0],q.size[1])+ie(q):(0,j.isObject)(q.size)?Math.max(q.size.width,q.size.height)+ie(q):q.size+ie(q):10+ie(q)}}w.nodeSize=U,w.degrees=(0,j.getDegree)(y.length,w.nodeIdxMap,w.edges),w.getMass||(w.getMass=function(q){return q.mass||w.degrees[w.nodeIdxMap[q.id]].all||1}),w.run()}else null===(E=w.onLayoutEnd)||void 0===E||E.call(w)},x.prototype.run=function(){var E,b=this,w=b.maxIteration,y=b.nodes,M=b.minMovement;if(y)if(b.workerEnabled||!b.animate){for(var P=0;P<w;P++){var U=b.runOneStep(P);if(b.reachMoveThreshold(y,U,M))break}null===(E=b.onLayoutEnd)||void 0===E||E.call(b)}else{if(typeof window>"u")return;var z=0;this.timeInterval=window.setInterval(function(){var ie,ne;if(y){var q=b.runOneStep(z)||[];b.reachMoveThreshold(y,q,M)&&(null===(ie=b.onLayoutEnd)||void 0===ie||ie.call(b),window.clearInterval(b.timeInterval)),++z>=w&&(null===(ne=b.onLayoutEnd)||void 0===ne||ne.call(b),window.clearInterval(b.timeInterval))}},0)}},x.prototype.reachMoveThreshold=function(E,b,w){var y=0;return E.forEach(function(A,M){var S=A.x-b[M].x,P=A.y-b[M].y;y+=Math.sqrt(S*S+P*P)}),(y/=E.length)<w},x.prototype.runOneStep=function(E){var b,w=this,y=w.nodes,A=w.edges,M=[],S=[];if(y){y.forEach(function(z,ie){M[2*ie]=0,M[2*ie+1]=0,S[2*ie]=0,S[2*ie+1]=0}),w.calRepulsive(M,y),A&&w.calAttractive(M,A),w.calGravity(M,y);var P=Math.max(.02,w.interval-.002*E);w.updateVelocity(M,S,P,y);var U=[];return y.forEach(function(z){U.push({x:z.x,y:z.y})}),w.updatePosition(S,P,y),null===(b=w.tick)||void 0===b||b.call(w),U}},x.prototype.calRepulsive=function(E,b){var w=this,y=w.getMass,A=w.factor,M=w.coulombDisScale,S=w.preventOverlap,P=w.collideStrength,U=void 0===P?1:P,z=w.nodeStrength,ie=w.nodeSize;b.forEach(function(ne,q){var K=y?y(ne):1;b.forEach(function(ee,X){if(!(q>=X)){var ae=ne.x-ee.x,re=ne.y-ee.y;0===ae&&0===re&&(ae=.01*Math.random(),re=.01*Math.random());var oe=ae*ae+re*re,ve=Math.sqrt(oe),we=(ve+.1)*M,_e=ae/ve,me=re/ve,Ce=.5*(z(ne)+z(ee))*A/(we*we),fe=y?y(ee):1;if(E[2*q]+=_e*Ce,E[2*q+1]+=me*Ce,E[2*X]-=_e*Ce,E[2*X+1]-=me*Ce,S&&(ie(ne)+ie(ee))/2>ve){var be=U*(z(ne)+z(ee))*.5/oe;E[2*q]+=_e*be/K,E[2*q+1]+=me*be/K,E[2*X]-=_e*be/fe,E[2*X+1]-=me*be/fe}}})})},x.prototype.calAttractive=function(E,b){var w=this,y=w.nodeMap,A=w.nodeIdxMap,M=w.linkDistance,S=w.edgeStrength,P=w.nodeSize,U=w.getMass;b.forEach(function(z,ie){var ne=(0,j.getEdgeTerminal)(z,"source"),q=(0,j.getEdgeTerminal)(z,"target"),K=y[ne],ee=y[q],X=ee.x-K.x,ae=ee.y-K.y;0===X&&0===ae&&(X=.01*Math.random(),ae=.01*Math.random());var re=Math.sqrt(X*X+ae*ae),oe=X/re,ve=ae/re,me=((M(z,K,ee)||1+(P(K)+P(ee)||0)/2)-re)*S(z),Ce=A[ne],fe=A[q],be=U?U(K):1,te=U?U(ee):1;E[2*Ce]-=oe*me/be,E[2*Ce+1]-=ve*me/be,E[2*fe]+=oe*me/te,E[2*fe+1]+=ve*me/te})},x.prototype.calGravity=function(E,b){for(var w=this,y=w.center,A=w.gravity,M=w.degrees,S=b.length,P=0;P<S;P++){var U=b[P],z=U.x-y[0],ie=U.y-y[1],ne=A;if(w.getCenter){var q=w.getCenter(U,M[P].all);q&&(0,j.isNumber)(q[0])&&(0,j.isNumber)(q[1])&&(0,j.isNumber)(q[2])&&(z=U.x-q[0],ie=U.y-q[1],ne=q[2])}!ne||(E[2*P]-=ne*z,E[2*P+1]-=ne*ie)}},x.prototype.updateVelocity=function(E,b,w,y){var A=this,M=w*A.damping;y.forEach(function(S,P){var U=E[2*P]*M||.01,z=E[2*P+1]*M||.01,ie=Math.sqrt(U*U+z*z);if(ie>A.maxSpeed){var ne=A.maxSpeed/ie;U*=ne,z*=ne}b[2*P]=U,b[2*P+1]=z})},x.prototype.updatePosition=function(E,b,w){w.forEach(function(y,A){if((0,j.isNumber)(y.fx)&&(0,j.isNumber)(y.fy))return y.x=y.fx,void(y.y=y.fy);var S=E[2*A+1]*b;y.x+=E[2*A]*b,y.y+=S})},x.prototype.stop=function(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval)},x.prototype.destroy=function(){var E=this;E.stop(),E.tick=null,E.nodes=null,E.edges=null,E.destroyed=!0},x.prototype.getType=function(){return"gForce"},x}(Q.Base);V.GForceLayout=F},4989:function(Qt,V,G){"use strict";var y,B=this&&this.__extends||(y=function(A,M){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,P){S.__proto__=P}||function(S,P){for(var U in P)Object.prototype.hasOwnProperty.call(P,U)&&(S[U]=P[U])})(A,M)},function(A,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function S(){this.constructor=A}y(A,M),A.prototype=null===M?Object.create(M):(S.prototype=M.prototype,new S)}),Q=this&&this.__awaiter||function(y,A,M,S){return new(M||(M=Promise))(function(U,z){function ie(K){try{q(S.next(K))}catch(ee){z(ee)}}function ne(K){try{q(S.throw(K))}catch(ee){z(ee)}}function q(K){K.done?U(K.value):function P(U){return U instanceof M?U:new M(function(z){z(U)})}(K.value).then(ie,ne)}q((S=S.apply(y,A||[])).next())})},j=this&&this.__generator||function(y,A){var S,P,U,z,M={label:0,sent:function(){if(1&U[0])throw U[1];return U[1]},trys:[],ops:[]};return z={next:ie(0),throw:ie(1),return:ie(2)},"function"==typeof Symbol&&(z[Symbol.iterator]=function(){return this}),z;function ie(q){return function(K){return function ne(q){if(S)throw new TypeError("Generator is already executing.");for(;z&&(z=0,q[0]&&(M=0)),M;)try{if(S=1,P&&(U=2&q[0]?P.return:q[0]?P.throw||((U=P.return)&&U.call(P),0):P.next)&&!(U=U.call(P,q[1])).done)return U;switch(P=0,U&&(q=[2&q[0],U.value]),q[0]){case 0:case 1:U=q;break;case 4:return M.label++,{value:q[1],done:!1};case 5:M.label++,P=q[1],q=[0];continue;case 7:q=M.ops.pop(),M.trys.pop();continue;default:if(!(U=(U=M.trys).length>0&&U[U.length-1])&&(6===q[0]||2===q[0])){M=0;continue}if(3===q[0]&&(!U||q[1]>U[0]&&q[1]<U[3])){M.label=q[1];break}if(6===q[0]&&M.label<U[1]){M.label=U[1],U=q;break}if(U&&M.label<U[2]){M.label=U[2],M.ops.push(q);break}U[2]&&M.ops.pop(),M.trys.pop();continue}q=A.call(y,M)}catch(K){q=[6,K],P=0}finally{S=U=0}if(5&q[0])throw q[1];return{value:q[0]?q[1]:void 0,done:!0}}([q,K])}}};Object.defineProperty(V,"__esModule",{value:!0}),V.FruchtermanGPULayout=void 0;var k=G(8792),F=G(7602),I=G(3305),x=G(7659),E=G(9085),b=G(981),w=function(y){function A(M){var S=y.call(this)||this;return S.maxIteration=1e3,S.gravity=10,S.speed=1,S.clustering=!1,S.clusterField="cluster",S.clusterGravity=10,S.workerEnabled=!1,S.nodes=[],S.edges=[],S.width=300,S.height=300,S.nodeMap={},S.nodeIdxMap={},S.updateCfg(M),S}return B(A,y),A.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}},A.prototype.execute=function(){return Q(this,void 0,void 0,function(){var M,S,P,U,z,ie=this;return j(this,function(ne){switch(ne.label){case 0:return(S=(M=this).nodes)&&0!==S.length?(!M.width&&typeof window<"u"&&(M.width=window.innerWidth),!M.height&&typeof window<"u"&&(M.height=window.innerHeight),M.center||(M.center=[M.width/2,M.height/2]),P=M.center,1===S.length?(S[0].x=P[0],S[0].y=P[1],M.onLayoutEnd&&M.onLayoutEnd(),[2]):(U={},z={},S.forEach(function(q,K){(0,F.isNumber)(q.x)||(q.x=Math.random()*ie.width),(0,F.isNumber)(q.y)||(q.y=Math.random()*ie.height),U[q.id]=q,z[q.id]=K}),M.nodeMap=U,M.nodeIdxMap=z,[4,M.run()])):(M.onLayoutEnd&&M.onLayoutEnd(),[2]);case 1:return ne.sent(),[2]}})})},A.prototype.executeWithWorker=function(M,S){return Q(this,void 0,void 0,function(){var P,U,z,ie,ne,q=this;return j(this,function(K){switch(K.label){case 0:return z=(P=this).center,(U=P.nodes)&&0!==U.length?1===U.length?(U[0].x=z[0],U[0].y=z[1],[2]):(ie={},ne={},U.forEach(function(ee,X){(0,F.isNumber)(ee.x)||(ee.x=Math.random()*q.width),(0,F.isNumber)(ee.y)||(ee.y=Math.random()*q.height),ie[ee.id]=ee,ne[ee.id]=X}),P.nodeMap=ie,P.nodeIdxMap=ne,[4,P.run(M,S)]):[2];case 1:return K.sent(),[2]}})})},A.prototype.run=function(M,S){return Q(this,void 0,void 0,function(){var P,U,z,ie,ne,q,K,ee,X,ae,re,oe,ve,we,_e,me,Ce,fe,te,de,ke,Ze,We,bt,Pt=this;return j(this,function(Xe){switch(Xe.label){case 0:for(U=(P=this).nodes,z=P.edges,ie=P.maxIteration,ne=P.center,q=P.height*P.width,K=Math.sqrt(q)/10,ee=q/(U.length+1),X=Math.sqrt(ee),ae=P.speed,re=P.clustering,oe=(0,x.attributesToTextureData)([P.clusterField],U),ve=oe.array,we=oe.count,U.forEach(function(yt,Ct){var pt=0,xt=0;(0,F.isNumber)(yt.fx)&&(0,F.isNumber)(yt.fy)&&(pt=yt.fx||.001,xt=yt.fy||.001),ve[4*Ct+1]=pt,ve[4*Ct+2]=xt}),_e=U.length,me=(0,x.buildTextureData)(U,z),Ce=me.maxEdgePerVetex,fe=me.array,te=I.World.create(P.workerEnabled?{canvas:M,engineOptions:{supportCompute:!0}}:{engineOptions:{supportCompute:!0}}),de=P.onLayoutEnd,ke=[],Ze=0;Ze<we;Ze++)ke.push(0,0,0,0);return We=te.createKernel(E.fruchtermanBundle).setDispatch([_e,1,1]).setBinding({u_Data:fe,u_K:X,u_K2:ee,u_Gravity:P.gravity,u_ClusterGravity:P.clusterGravity||P.gravity||1,u_Speed:ae,u_MaxDisplace:K,u_Clustering:re?1:0,u_Center:ne,u_AttributeArray:ve,u_ClusterCenters:ke,MAX_EDGE_PER_VERTEX:Ce,VERTEX_COUNT:_e}),re&&(bt=te.createKernel(E.clusterBundle).setDispatch([we,1,1]).setBinding({u_Data:fe,u_NodeAttributes:ve,u_ClusterCenters:ke,VERTEX_COUNT:_e,CLUSTER_COUNT:we})),[4,Q(Pt,void 0,void 0,function(){var yt,Ct;return j(this,function(pt){switch(pt.label){case 0:yt=0,pt.label=1;case 1:return yt<ie?[4,We.execute()]:[3,6];case 2:return pt.sent(),re?(bt.setBinding({u_Data:We}),[4,bt.execute()]):[3,4];case 3:pt.sent(),We.setBinding({u_ClusterCenters:bt}),pt.label=4;case 4:We.setBinding({u_MaxDisplace:K*=.99}),pt.label=5;case 5:return yt++,[3,1];case 6:return[4,We.getOutput()];case 7:return Ct=pt.sent(),M?S.postMessage({type:b.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:Ct}):U.forEach(function(xt,Fe){var Ut=Ct[4*Fe+1];xt.x=Ct[4*Fe],xt.y=Ut}),de&&de(),[2]}})})];case 1:return Xe.sent(),[2]}})})},A.prototype.getType=function(){return"fruchterman-gpu"},A}(k.Base);V.FruchtermanGPULayout=w},9085:(Qt,V)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.clusterBundle=V.clusterCode=V.fruchtermanBundle=V.fruchtermanCode=void 0,V.fruchtermanCode="\nimport { globalInvocationID } from 'g-webgpu';\nconst MAX_EDGE_PER_VERTEX;\nconst VERTEX_COUNT;\n@numthreads(1, 1, 1)\nclass Fruchterman {\n  @in @out\n  u_Data: vec4[];\n  @in\n  u_K: float;\n  @in\n  u_K2: float;\n  \n  @in\n  u_Center: vec2;\n  @in\n  u_Gravity: float;\n  @in\n  u_ClusterGravity: float;\n  @in\n  u_Speed: float;\n  @in\n  u_MaxDisplace: float;\n  @in\n  u_Clustering: float;\n  @in\n  u_AttributeArray: vec4[];\n  @in\n  u_ClusterCenters: vec4[];\n  calcRepulsive(i: int, currentNode: vec4): vec2 {\n    let dx = 0, dy = 0;\n    for (let j = 0; j < VERTEX_COUNT; j++) {\n      if (i != j) {\n        const nextNode = this.u_Data[j];\n        const xDist = currentNode[0] - nextNode[0];\n        const yDist = currentNode[1] - nextNode[1];\n        const dist = (xDist * xDist + yDist * yDist) + 0.01;\n        let param = this.u_K2 / dist;\n        \n        if (dist > 0.0) {\n          dx += param * xDist;\n          dy += param * yDist;\n          if (xDist == 0 && yDist == 0) {\n            const sign = i < j ? 1 : -1;\n            dx += param * sign;\n            dy += param * sign;\n          }\n        }\n      }\n    }\n    return [dx, dy];\n  }\n  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // \n    let dx = 0, dy = 0;\n    const vx = currentNode[0] - this.u_Center[0];\n    const vy = currentNode[1] - this.u_Center[1];\n    const gf = 0.01 * this.u_K * this.u_Gravity;\n    dx = gf * vx;\n    dy = gf * vy;\n    if (this.u_Clustering == 1) {\n      const clusterIdx = int(nodeAttributes[0]);\n      const center = this.u_ClusterCenters[clusterIdx];\n      const cvx = currentNode[0] - center[0];\n      const cvy = currentNode[1] - center[1];\n      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;\n      const parma = this.u_K * this.u_ClusterGravity / dist;\n      dx += parma * cvx;\n      dy += parma * cvy;\n    }\n    return [dx, dy];\n  }\n  calcAttractive(i: int, currentNode: vec4): vec2 {\n    let dx = 0, dy = 0;\n    const arr_offset = int(floor(currentNode[2] + 0.5));\n    const length = int(floor(currentNode[3] + 0.5));\n    const node_buffer: vec4;\n    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {\n      if (p >= length) break;\n      const arr_idx = arr_offset + p;\n      // when arr_idx % 4 == 0 update currentNodedx_buffer\n      const buf_offset = arr_idx - arr_idx / 4 * 4;\n      if (p == 0 || buf_offset == 0) {\n        node_buffer = this.u_Data[int(arr_idx / 4)];\n      }\n      const float_j = buf_offset == 0 ? node_buffer[0] :\n                      buf_offset == 1 ? node_buffer[1] :\n                      buf_offset == 2 ? node_buffer[2] :\n                                        node_buffer[3];\n      const nextNode = this.u_Data[int(float_j)];\n      const xDist = currentNode[0] - nextNode[0];\n      const yDist = currentNode[1] - nextNode[1];\n      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;\n      let attractiveF = dist / this.u_K;\n    \n      if (dist > 0.0) {\n        dx -= xDist * attractiveF;\n        dy -= yDist * attractiveF;\n        if (xDist == 0 && yDist == 0) {\n          const sign = i < int(float_j) ? 1 : -1;\n          dx -= sign * attractiveF;\n          dy -= sign * attractiveF;\n        }\n      }\n    }\n    return [dx, dy];\n  }\n  @main\n  compute() {\n    const i = globalInvocationID.x;\n    const currentNode = this.u_Data[i];\n    let dx = 0, dy = 0;\n    if (i >= VERTEX_COUNT) {\n      this.u_Data[i] = currentNode;\n      return;\n    }\n\n    // [gravity, fx, fy, 0]\n    const nodeAttributes = this.u_AttributeArray[i];\n\n    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {\n      // the node is fixed\n      this.u_Data[i] = [\n        nodeAttributes[1],\n        nodeAttributes[2],\n        currentNode[2],\n        currentNode[3]\n      ];\n      return;\n    }\n\n    // repulsive\n    const repulsive = this.calcRepulsive(i, currentNode);\n    dx += repulsive[0];\n    dy += repulsive[1];\n    // attractive\n    const attractive = this.calcAttractive(i, currentNode);\n    dx += attractive[0];\n    dy += attractive[1];\n    // gravity\n    const gravity = this.calcGravity(currentNode, nodeAttributes);\n    dx -= gravity[0];\n    dy -= gravity[1];\n    // speed\n    dx *= this.u_Speed;\n    dy *= this.u_Speed;\n\n    // move\n    const distLength = sqrt(dx * dx + dy * dy);\n    if (distLength > 0.0) {\n      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);\n      this.u_Data[i] = [\n        currentNode[0] + dx / distLength * limitedDist,\n        currentNode[1] + dy / distLength * limitedDist,\n        currentNode[2],\n        currentNode[3]\n      ];\n    }\n  }\n}\n",V.fruchtermanBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',V.clusterCode="\nimport { globalInvocationID } from 'g-webgpu';\nconst VERTEX_COUNT;\nconst CLUSTER_COUNT;\n@numthreads(1, 1, 1)\nclass CalcCenter {\n  @in\n  u_Data: vec4[];\n  @in\n  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]\n  @in @out\n  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]\n  @main\n  compute() {\n    const i = globalInvocationID.x;\n    const center = this.u_ClusterCenters[i];\n    let sumx = 0;\n    let sumy = 0;\n    let count = 0;\n    for (let j = 0; j < VERTEX_COUNT; j++) {\n      const attributes = this.u_NodeAttributes[j];\n      const clusterIdx = int(attributes[0]);\n      const vertex = this.u_Data[j];\n      if (clusterIdx == i) {\n        sumx += vertex.x;\n        sumy += vertex.y;\n        count += 1;\n      }\n    }\n    this.u_ClusterCenters[i] = [\n      sumx / count,\n      sumy / count,\n      count,\n      i\n    ];\n  }\n}\n",V.clusterBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}'},2649:function(Qt,V,G){"use strict";var A,B=this&&this.__extends||(A=function(M,S){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,U){P.__proto__=U}||function(P,U){for(var z in U)Object.prototype.hasOwnProperty.call(U,z)&&(P[z]=U[z])})(M,S)},function(M,S){if("function"!=typeof S&&null!==S)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function P(){this.constructor=M}A(M,S),M.prototype=null===S?Object.create(S):(P.prototype=S.prototype,new P)}),Q=this&&this.__awaiter||function(A,M,S,P){return new(S||(S=Promise))(function(z,ie){function ne(ee){try{K(P.next(ee))}catch(X){ie(X)}}function q(ee){try{K(P.throw(ee))}catch(X){ie(X)}}function K(ee){ee.done?z(ee.value):function U(z){return z instanceof S?z:new S(function(ie){ie(z)})}(ee.value).then(ne,q)}K((P=P.apply(A,M||[])).next())})},j=this&&this.__generator||function(A,M){var P,U,z,ie,S={label:0,sent:function(){if(1&z[0])throw z[1];return z[1]},trys:[],ops:[]};return ie={next:ne(0),throw:ne(1),return:ne(2)},"function"==typeof Symbol&&(ie[Symbol.iterator]=function(){return this}),ie;function ne(K){return function(ee){return function q(K){if(P)throw new TypeError("Generator is already executing.");for(;ie&&(ie=0,K[0]&&(S=0)),S;)try{if(P=1,U&&(z=2&K[0]?U.return:K[0]?U.throw||((z=U.return)&&z.call(U),0):U.next)&&!(z=z.call(U,K[1])).done)return z;switch(U=0,z&&(K=[2&K[0],z.value]),K[0]){case 0:case 1:z=K;break;case 4:return S.label++,{value:K[1],done:!1};case 5:S.label++,U=K[1],K=[0];continue;case 7:K=S.ops.pop(),S.trys.pop();continue;default:if(!(z=(z=S.trys).length>0&&z[z.length-1])&&(6===K[0]||2===K[0])){S=0;continue}if(3===K[0]&&(!z||K[1]>z[0]&&K[1]<z[3])){S.label=K[1];break}if(6===K[0]&&S.label<z[1]){S.label=z[1],z=K;break}if(z&&S.label<z[2]){S.label=z[2],S.ops.push(K);break}z[2]&&S.ops.pop(),S.trys.pop();continue}K=M.call(A,S)}catch(ee){K=[6,ee],U=0}finally{P=z=0}if(5&K[0])throw K[1];return{value:K[0]?K[1]:void 0,done:!0}}([K,ee])}}};Object.defineProperty(V,"__esModule",{value:!0}),V.GForceGPULayout=void 0;var k=G(8792),F=G(7602),I=G(3305),x=G(7659),E=G(9337),b=G(7313),w=G(981),y=function(A){function M(S){var P=A.call(this)||this;return P.maxIteration=1e3,P.edgeStrength=200,P.nodeStrength=1e3,P.coulombDisScale=.005,P.damping=.9,P.maxSpeed=1e3,P.minMovement=.5,P.interval=.02,P.factor=1,P.linkDistance=1,P.gravity=10,P.workerEnabled=!1,P.nodes=[],P.edges=[],P.width=300,P.height=300,P.nodeMap={},P.nodeIdxMap={},P.updateCfg(S),P}return B(M,A),M.prototype.getDefaultCfg=function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}},M.prototype.execute=function(){return Q(this,void 0,void 0,function(){var S,P,U,z,ie;return j(this,function(ne){switch(ne.label){case 0:return(P=(S=this).nodes)&&0!==P.length?(!S.width&&typeof window<"u"&&(S.width=window.innerWidth),!S.height&&typeof window<"u"&&(S.height=window.innerHeight),S.center||(S.center=[S.width/2,S.height/2]),U=S.center,1===P.length?(P[0].x=U[0],P[0].y=U[1],S.onLayoutEnd&&S.onLayoutEnd(),[2]):(z={},ie={},P.forEach(function(q,K){(0,F.isNumber)(q.x)||(q.x=Math.random()*S.width),(0,F.isNumber)(q.y)||(q.y=Math.random()*S.height),z[q.id]=q,ie[q.id]=K}),S.nodeMap=z,S.nodeIdxMap=ie,S.nodeStrength=(0,x.proccessToFunc)(S.nodeStrength,1),S.edgeStrength=(0,x.proccessToFunc)(S.edgeStrength,1),[4,S.run()])):(S.onLayoutEnd&&S.onLayoutEnd(),[2]);case 1:return ne.sent(),[2]}})})},M.prototype.executeWithWorker=function(S,P){var U=this,z=U.nodes,ie=U.center;if(z&&0!==z.length){if(1===z.length)return z[0].x=ie[0],void(z[0].y=ie[1]);var ne={},q={};z.forEach(function(K,ee){(0,F.isNumber)(K.x)||(K.x=Math.random()*U.width),(0,F.isNumber)(K.y)||(K.y=Math.random()*U.height),ne[K.id]=K,q[K.id]=ee}),U.nodeMap=ne,U.nodeIdxMap=q,U.nodeStrength=(0,x.proccessToFunc)(U.nodeStrength,1),U.edgeStrength=(0,x.proccessToFunc)(U.edgeStrength,1),U.run(S,P)}},M.prototype.run=function(S,P){return Q(this,void 0,void 0,function(){var U,z,ie,ne,q,K,ee,X,ae,re,oe,ve,we,_e,me,Ce,fe,be,te,ke,Ze,We,bt,Ft,Pt,yt=this;return j(this,function(Ct){switch(Ct.label){case 0:for(z=(U=this).nodes,ie=U.edges,ne=U.maxIteration,!U.width&&typeof window<"u"&&(U.width=window.innerWidth),!U.height&&typeof window<"u"&&(U.height=window.innerHeight),q=z.length,U.linkDistance=(0,x.proccessToFunc)(U.linkDistance),U.edgeStrength=(0,x.proccessToFunc)(U.edgeStrength),K=(0,x.buildTextureDataWithTwoEdgeAttr)(z,ie,U.linkDistance,U.edgeStrength),ee=K.maxEdgePerVetex,X=K.array,U.degrees=(0,E.getDegree)(z.length,U.nodeIdxMap,ie).map(function(pt){return pt.all}),ae=[],re=[],oe=[],ve=[],we=[],_e=[],me=[],U.getMass||(U.getMass=function(pt){return U.degrees[U.nodeIdxMap[pt.id]]||1}),Ce=U.gravity,fe=U.center,z.forEach(function(pt,xt){ae.push(U.getMass(pt)),re.push(U.nodeStrength(pt)),U.degrees[xt]||(U.degrees[xt]=0);var Fe=[fe[0],fe[1],Ce];if(U.getCenter){var ut=U.getCenter(pt,U.degrees[xt]);ut&&(0,F.isNumber)(ut[0])&&(0,F.isNumber)(ut[1])&&(0,F.isNumber)(ut[2])&&(Fe=ut)}oe.push(Fe[0]),ve.push(Fe[1]),we.push(Fe[2]),(0,F.isNumber)(pt.fx)&&(0,F.isNumber)(pt.fy)?(_e.push(pt.fx||.001),me.push(pt.fy||.001)):(_e.push(0),me.push(0))}),be=(0,x.arrayToTextureData)([ae,U.degrees,re,_e]),te=(0,x.arrayToTextureData)([oe,ve,we,me]),ke=I.World.create(U.workerEnabled?{canvas:S,engineOptions:{supportCompute:!0}}:{engineOptions:{supportCompute:!0}}),Ze=U.onLayoutEnd,We=[],X.forEach(function(pt){We.push(pt)}),bt=0;bt<4;bt++)We.push(0);return Ft=ke.createKernel(b.gForceBundle).setDispatch([q,1,1]).setBinding({u_Data:X,u_damping:U.damping,u_maxSpeed:U.maxSpeed,u_minMovement:U.minMovement,u_coulombDisScale:U.coulombDisScale,u_factor:U.factor,u_NodeAttributeArray1:be,u_NodeAttributeArray2:te,MAX_EDGE_PER_VERTEX:ee,VERTEX_COUNT:q,u_AveMovement:We,u_interval:U.interval}),Pt=ke.createKernel(b.aveMovementBundle).setDispatch([1,1,1]).setBinding({u_Data:X,VERTEX_COUNT:q,u_AveMovement:[0,0,0,0]}),[4,Q(yt,void 0,void 0,function(){var pt,xt,Fe;return j(this,function(ut){switch(ut.label){case 0:pt=0,ut.label=1;case 1:return pt<ne?[4,Ft.execute()]:[3,5];case 2:return ut.sent(),Pt.setBinding({u_Data:Ft}),[4,Pt.execute()];case 3:ut.sent(),xt=Math.max(.02,U.interval-.002*pt),Ft.setBinding({u_interval:xt,u_AveMovement:Pt}),ut.label=4;case 4:return pt++,[3,1];case 5:return[4,Ft.getOutput()];case 6:return Fe=ut.sent(),S?P.postMessage({type:w.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:Fe}):z.forEach(function(Ut,$e){var tt=Fe[4*$e+1];Ut.x=Fe[4*$e],Ut.y=tt}),Ze&&Ze(),[2]}})})];case 1:return Ct.sent(),[2]}})})},M.prototype.getType=function(){return"gForce-gpu"},M}(k.Base);V.GForceGPULayout=y},7313:(Qt,V)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.aveMovementBundle=V.aveMovementCode=V.gForceBundle=V.gForceCode=void 0,V.gForceCode="\nimport { globalInvocationID } from 'g-webgpu';\n\nconst MAX_EDGE_PER_VERTEX;\nconst VERTEX_COUNT;\nconst SHIFT_20 = 1048576;\n\n@numthreads(1, 1, 1)\nclass GGForce {\n  @in @out\n  u_Data: vec4[];\n\n  @in\n  u_damping: float;\n  \n  @in\n  u_maxSpeed: float;\n\n  @in\n  u_minMovement: float;\n\n  @in\n  u_AveMovement: vec4[];\n\n  @in\n  u_coulombDisScale: float;\n\n  @in\n  u_factor: float;\n\n  @in\n  u_NodeAttributeArray1: vec4[];\n\n  @in\n  u_NodeAttributeArray2: vec4[];\n\n  @in\n  u_interval: float;\n\n  unpack_float(packedValue: float): ivec2 {\n    const packedIntValue = int(packedValue);\n    const v0 = packedIntValue / SHIFT_20;\n    return [v0, packedIntValue - v0 * SHIFT_20];\n  }\n\n  calcRepulsive(i: int, currentNode: vec4): vec2 {\n    let ax = 0, ay = 0;\n    for (let j: int = 0; j < VERTEX_COUNT; j++) {\n      if (i != j) {\n        const nextNode = this.u_Data[j];\n        const vx = currentNode[0] - nextNode[0];\n        const vy = currentNode[1] - nextNode[1];\n        const dist = sqrt(vx * vx + vy * vy) + 0.01;\n        const n_dist = (dist + 0.1) * this.u_coulombDisScale;\n        const direx = vx / dist;\n        const direy = vy / dist;\n        const attributesi = this.u_NodeAttributeArray1[i];\n        const attributesj = this.u_NodeAttributeArray1[j];\n        const massi = attributesi[0];\n        const nodeStrengthi = attributesi[2];\n        const nodeStrengthj = attributesj[2];\n        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;\n        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);\n        const param = nodeStrength * this.u_factor / (n_dist * n_dist);\n        ax += direx * param;\n        ay += direy * param;\n      }\n    }\n    return [ax, ay];\n  }\n\n  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {\n    // note: attributes2 = [centerX, centerY, gravity, 0]\n\n    const vx = currentNode[0] - attributes2[0];\n    const vy = currentNode[1] - attributes2[1];\n    \n    const ax = vx * attributes2[2];\n    const ay = vy * attributes2[2];\n    \n    return [ax, ay];\n  }\n\n  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {\n    // note: attributes1 = [mass, degree, nodeSterngth, 0]\n\n    const mass = attributes1[0];\n    let ax = 0, ay = 0;\n    // const arr_offset = int(floor(currentNode[2] + 0.5));\n    // const length = int(floor(currentNode[3] + 0.5));\n\n    const compressed = this.unpack_float(currentNode[2]);\n    const length = compressed[0];\n    const arr_offset = compressed[1];\n\n    const node_buffer: vec4;\n    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {\n      if (p >= length) break;\n      const arr_idx = arr_offset + 4 * p; // i \u8282\u70b9\u7684\u7b2c p \u6761\u8fb9\u5f00\u59cb\u7684\u5c0f\u683c\u5b50\u4f4d\u7f6e\n      const buf_offset = arr_idx - arr_idx / 4 * 4;\n      if (p == 0 || buf_offset == 0) {\n        node_buffer = this.u_Data[int(arr_idx / 4)]; // \u5927\u683c\u5b50\uff0c\u5927\u683c\u5b50\u4f4d\u7f6e=\u5c0f\u4e2a\u5b50\u4f4d\u7f6e / 4\uff0c\n      }\n\n      let float_j: float = node_buffer[0];\n\n      const nextNode = this.u_Data[int(float_j)];\n      const vx = nextNode[0] - currentNode[0];\n      const vy = nextNode[1] - currentNode[1];\n      const dist = sqrt(vx * vx + vy * vy) + 0.01;\n      const direx = vx / dist;\n      const direy = vy / dist;\n      const edgeLength = node_buffer[1];\n      const edgeStrength = node_buffer[2];\n      const diff: float = edgeLength - dist;//edgeLength\n      // const param = diff * this.u_stiffness / mass; //\n      const param = diff * edgeStrength / mass; // \n      ax -= direx * param;\n      ay -= direy * param;\n    }\n    return [ax, ay];\n  }\n\n  @main\n  compute() {\n    const i = globalInvocationID.x;\n    const currentNode = this.u_Data[i];\n    const movement = u_AveMovement[0];\n    let ax = 0, ay = 0;\n\n    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {\n      this.u_Data[i] = currentNode;\n      return;\n    }\n\n    // \u6bcf\u4e2a\u8282\u70b9\u5c5e\u6027\u5360\u4e24\u4e2a\u6570\u7ec4\u4e2d\u5404\u4e00\u683c\n    // [mass, degree, nodeStrength, fx]\n    const nodeAttributes1 = this.u_NodeAttributeArray1[i];\n    // [centerX, centerY, centerGravity, fy]\n    const nodeAttributes2 = this.u_NodeAttributeArray2[i];\n\n    // repulsive\n    const repulsive = this.calcRepulsive(i, currentNode);\n    ax += repulsive[0];\n    ay += repulsive[1];\n\n    // attractive\n    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);\n    ax += attractive[0];\n    ay += attractive[1];\n\n    // gravity\n    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);\n    ax -= gravity[0];\n    ay -= gravity[1];\n\n    // speed\n    const param = this.u_interval * this.u_damping;\n    let vx = ax * param;\n    let vy = ay * param;\n    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;\n    if (vlength > this.u_maxSpeed) {\n      const param2 = this.u_maxSpeed / vlength;\n      vx = param2 * vx;\n      vy = param2 * vy;\n    }\n\n    // move\n    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {\n      this.u_Data[i] = [\n        nodeAttributes1[3],\n        nodeAttributes2[3],\n        currentNode[2],\n        0\n      ];\n    } else {\n      const distx = vx * this.u_interval;\n      const disty = vy * this.u_interval;\n      const distLength = sqrt(distx * distx + disty * disty);\n      this.u_Data[i] = [\n        currentNode[0] + distx,\n        currentNode[1] + disty,\n        currentNode[2],\n        distLength\n      ];\n    }\n    \n    // the avarage move distance\n    // need to share memory\n    \n  }\n}\n",V.gForceBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',V.aveMovementCode="\nconst VERTEX_COUNT;\n@numthreads(1, 1, 1)\nclass CalcAveMovement {\n  @in\n  u_Data: vec4[];\n  @in\n  u_iter: float;\n  @in @out\n  u_AveMovement: vec4[];\n  @main\n  compute() {\n    let movement = 0;\n    for (let j: int = 0; j < VERTEX_COUNT; j++) {\n      const vertex = this.u_Data[j];\n      movement += vertex[3];\n    }\n    movement = movement / float(VERTEX_COUNT);\n    this.u_AveMovement[0] = [movement, 0, 0, 0];\n  }\n}\n",V.aveMovementBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}'},1661:function(Qt,V,G){"use strict";var F,B=this&&this.__extends||(F=function(I,x){return(F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,b){E.__proto__=b}||function(E,b){for(var w in b)Object.prototype.hasOwnProperty.call(b,w)&&(E[w]=b[w])})(I,x)},function(I,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function E(){this.constructor=I}F(I,x),I.prototype=null===x?Object.create(x):(E.prototype=x.prototype,new E)});Object.defineProperty(V,"__esModule",{value:!0}),V.GridLayout=void 0;var Q=G(7602),k=function(F){function I(x){var E=F.call(this)||this;return E.begin=[0,0],E.preventOverlap=!0,E.preventOverlapPadding=10,E.condense=!1,E.sortBy="degree",E.nodes=[],E.edges=[],E.width=300,E.height=300,E.row=0,E.col=0,E.cellWidth=0,E.cellHeight=0,E.cellUsed={},E.id2manPos={},E.onLayoutEnd=function(){},E.updateCfg(x),E}return B(I,F),I.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},I.prototype.execute=function(){var x=this,E=x.nodes,b=x.edges,w=x.begin,y=E.length;if(0===y)return x.onLayoutEnd&&x.onLayoutEnd(),{nodes:E,edges:b};if(1===y)return E[0].x=w[0],E[0].y=w[1],x.onLayoutEnd&&x.onLayoutEnd(),{nodes:E,edges:b};var A=x.sortBy,M=x.width,S=x.height,P=x.condense,U=x.preventOverlapPadding,z=x.preventOverlap,ie=x.nodeSpacing,ne=x.nodeSize,q=[];E.forEach(function(be){q.push(be)});var K={};if(q.forEach(function(be,te){K[be.id]=te}),("degree"===A||!(0,Q.isString)(A)||void 0===q[0][A])&&(A="degree",(0,Q.isNaN)(E[0].degree))){var ee=(0,Q.getDegree)(q.length,K,b);q.forEach(function(be,te){be.degree=ee[te].all})}q.sort(function(be,te){return te[A]-be[A]}),!M&&typeof window<"u"&&(M=window.innerWidth),!S&&typeof window<"u"&&(S=window.innerHeight);var X=x.rows,ae=null!=x.cols?x.cols:x.columns;if(x.cells=y,null!=X&&null!=ae?(x.rows=X,x.cols=ae):null!=X&&null==ae?(x.rows=X,x.cols=Math.ceil(x.cells/x.rows)):null==X&&null!=ae?(x.cols=ae,x.rows=Math.ceil(x.cells/x.cols)):(x.splits=Math.sqrt(x.cells*x.height/x.width),x.rows=Math.round(x.splits),x.cols=Math.round(x.width/x.height*x.splits)),x.rows=Math.max(x.rows,1),x.cols=Math.max(x.cols,1),x.cols*x.rows>x.cells)((re=x.small())-1)*(oe=x.large())>=x.cells?x.small(re-1):(oe-1)*re>=x.cells&&x.large(oe-1);else for(;x.cols*x.rows<x.cells;){var oe,re=x.small();((oe=x.large())+1)*re>=x.cells?x.large(oe+1):x.small(re+1)}if(x.cellWidth=M/x.cols,x.cellHeight=S/x.rows,P&&(x.cellWidth=0,x.cellHeight=0),z||ie){var ve=(0,Q.getFuncByUnknownType)(10,ie),we=(0,Q.getFuncByUnknownType)(30,ne,!1);q.forEach(function(be){(!be.x||!be.y)&&(be.x=0,be.y=0);var de,ke,te=we(be)||30;(0,Q.isArray)(te)?(de=te[0],ke=te[1]):(de=te,ke=te);var Ze=void 0!==ve?ve(be):U,bt=ke+Ze;x.cellWidth=Math.max(x.cellWidth,de+Ze),x.cellHeight=Math.max(x.cellHeight,bt)})}x.cellUsed={},x.row=0,x.col=0,x.id2manPos={};for(var _e=0;_e<q.length;_e++){var me=q[_e],Ce=void 0;if(x.position&&(Ce=x.position(me)),Ce&&(void 0!==Ce.row||void 0!==Ce.col)){var fe={row:Ce.row,col:Ce.col};if(void 0===fe.col)for(fe.col=0;x.used(fe.row,fe.col);)fe.col++;else if(void 0===fe.row)for(fe.row=0;x.used(fe.row,fe.col);)fe.row++;x.id2manPos[me.id]=fe,x.use(fe.row,fe.col)}x.getPos(me)}return x.onLayoutEnd&&x.onLayoutEnd(),{edges:b,nodes:q}},I.prototype.small=function(x){var b,E=this,w=E.rows||5,y=E.cols||5;return null==x?b=Math.min(w,y):Math.min(w,y)===E.rows?E.rows=x:E.cols=x,b},I.prototype.large=function(x){var b,E=this,w=E.rows||5,y=E.cols||5;return null==x?b=Math.max(w,y):Math.max(w,y)===E.rows?E.rows=x:E.cols=x,b},I.prototype.used=function(x,E){return this.cellUsed["c-".concat(x,"-").concat(E)]||!1},I.prototype.use=function(x,E){this.cellUsed["c-".concat(x,"-").concat(E)]=!0},I.prototype.moveToNextCell=function(){var x=this,E=x.cols||5;x.col++,x.col>=E&&(x.col=0,x.row++)},I.prototype.getPos=function(x){var A,M,E=this,b=E.begin,w=E.cellWidth,y=E.cellHeight,S=E.id2manPos[x.id];if(S)A=S.col*w+w/2+b[0],M=S.row*y+y/2+b[1];else{for(;E.used(E.row,E.col);)E.moveToNextCell();A=E.col*w+w/2+b[0],M=E.row*y+y/2+b[1],E.use(E.row,E.col),E.moveToNextCell()}x.x=A,x.y=M},I.prototype.getType=function(){return"grid"},I}(G(8792).Base);V.GridLayout=k},4670:function(Qt,V,G){"use strict";var B=this&&this.__createBinding||(Object.create?function(ee,X,ae,re){void 0===re&&(re=ae);var oe=Object.getOwnPropertyDescriptor(X,ae);(!oe||("get"in oe?!X.__esModule:oe.writable||oe.configurable))&&(oe={enumerable:!0,get:function(){return X[ae]}}),Object.defineProperty(ee,re,oe)}:function(ee,X,ae,re){void 0===re&&(re=ae),ee[re]=X[ae]}),Q=this&&this.__exportStar||function(ee,X){for(var ae in ee)"default"!==ae&&!Object.prototype.hasOwnProperty.call(X,ae)&&B(X,ee,ae)};Object.defineProperty(V,"__esModule",{value:!0}),V.ERLayout=V.ForceAtlas2Layout=V.ComboCombinedLayout=V.ComboForceLayout=V.GForceGPULayout=V.FruchtermanGPULayout=V.FruchtermanLayout=V.MDSLayout=V.ConcentricLayout=V.RadialLayout=V.DagreCompoundLayout=V.DagreLayout=V.CircularLayout=V.ForceLayout=V.Force2Layout=V.GForceLayout=V.RandomLayout=V.GridLayout=V.Layouts=V.Layout=void 0;var j=G(1661);Object.defineProperty(V,"GridLayout",{enumerable:!0,get:function(){return j.GridLayout}});var k=G(2386);Object.defineProperty(V,"RandomLayout",{enumerable:!0,get:function(){return k.RandomLayout}});var F=G(5626);Object.defineProperty(V,"GForceLayout",{enumerable:!0,get:function(){return F.GForceLayout}});var I=G(1444);Object.defineProperty(V,"Force2Layout",{enumerable:!0,get:function(){return I.Force2Layout}});var x=G(4943);Object.defineProperty(V,"ForceLayout",{enumerable:!0,get:function(){return x.ForceLayout}});var E=G(3414);Object.defineProperty(V,"CircularLayout",{enumerable:!0,get:function(){return E.CircularLayout}});var b=G(8786);Object.defineProperty(V,"DagreLayout",{enumerable:!0,get:function(){return b.DagreLayout}});var w=G(4632);Object.defineProperty(V,"DagreCompoundLayout",{enumerable:!0,get:function(){return w.DagreCompoundLayout}});var y=G(2061);Object.defineProperty(V,"RadialLayout",{enumerable:!0,get:function(){return y.RadialLayout}});var A=G(2172);Object.defineProperty(V,"ConcentricLayout",{enumerable:!0,get:function(){return A.ConcentricLayout}});var M=G(6302);Object.defineProperty(V,"MDSLayout",{enumerable:!0,get:function(){return M.MDSLayout}});var S=G(5703);Object.defineProperty(V,"FruchtermanLayout",{enumerable:!0,get:function(){return S.FruchtermanLayout}});var P=G(4989);Object.defineProperty(V,"FruchtermanGPULayout",{enumerable:!0,get:function(){return P.FruchtermanGPULayout}});var U=G(2649);Object.defineProperty(V,"GForceGPULayout",{enumerable:!0,get:function(){return U.GForceGPULayout}});var z=G(4430);Object.defineProperty(V,"ComboForceLayout",{enumerable:!0,get:function(){return z.ComboForceLayout}});var ie=G(9602);Object.defineProperty(V,"ComboCombinedLayout",{enumerable:!0,get:function(){return ie.ComboCombinedLayout}});var ne=G(3259);Object.defineProperty(V,"ForceAtlas2Layout",{enumerable:!0,get:function(){return ne.ForceAtlas2Layout}});var q=G(433);Object.defineProperty(V,"ERLayout",{enumerable:!0,get:function(){return q.ERLayout}});var K=G(46);Object.defineProperty(V,"Layout",{enumerable:!0,get:function(){return K.Layout}}),Object.defineProperty(V,"Layouts",{enumerable:!0,get:function(){return K.Layouts}}),Q(G(7845),V)},46:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.Layouts=V.Layout=void 0;var B=G(1647),Q=G(1661),j=G(2386),k=G(1444),F=G(5626),I=G(4943),x=G(3414),E=G(8786),b=G(2061),w=G(2172),y=G(6302),A=G(5703),M=G(4989),S=G(2649),P=G(4430),U=G(9602),z=G(3259),ie=G(433),ne=G(4632),q=G(7602),K=function(){function ee(X){var ae=(0,B.getLayoutByName)(X.type);this.layoutInstance=new ae(X)}return ee.prototype.layout=function(X){return this.layoutInstance.layout(X)},ee.prototype.updateCfg=function(X){this.layoutInstance.updateCfg(X)},ee.prototype.init=function(X){this.correctLayers(X.nodes),this.layoutInstance.init(X)},ee.prototype.correctLayers=function(X){if(X?.length){var ae=1/0,re=[];if(X.forEach(function(ve){(0,q.isString)(ve.layer)&&(ve.layer=parseInt(ve.layer,10)),void 0!==ve.layer&&!isNaN(ve.layer)&&(re.push(ve),ve.layer<ae&&(ae=ve.layer))}),ae<=0){var oe=Math.abs(ae)+1;re.forEach(function(ve){return ve.layer+=oe})}}},ee.prototype.execute=function(){this.layoutInstance.execute()},ee.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},ee.prototype.destroy=function(){return this.layoutInstance.destroy()},ee}();V.Layout=K,V.Layouts={force:I.ForceLayout,fruchterman:A.FruchtermanLayout,forceAtlas2:z.ForceAtlas2Layout,gForce:F.GForceLayout,force2:k.Force2Layout,dagre:E.DagreLayout,dagreCompound:ne.DagreCompoundLayout,circular:x.CircularLayout,radial:b.RadialLayout,concentric:w.ConcentricLayout,grid:Q.GridLayout,mds:y.MDSLayout,comboForce:P.ComboForceLayout,comboCombined:U.ComboCombinedLayout,random:j.RandomLayout,"gForce-gpu":S.GForceGPULayout,"fruchterman-gpu":M.FruchtermanGPULayout,er:ie.ERLayout}},6302:function(Qt,V,G){"use strict";var I,B=this&&this.__extends||(I=function(x,E){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,w){b.__proto__=w}||function(b,w){for(var y in w)Object.prototype.hasOwnProperty.call(w,y)&&(b[y]=w[y])})(x,E)},function(x,E){if("function"!=typeof E&&null!==E)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function b(){this.constructor=x}I(x,E),x.prototype=null===E?Object.create(E):(b.prototype=E.prototype,new b)});Object.defineProperty(V,"__esModule",{value:!0}),V.MDSLayout=void 0;var Q=G(6380),j=G(7602),F=function(I){function x(E){var b=I.call(this)||this;return b.center=[0,0],b.linkDistance=50,b.nodes=[],b.edges=[],b.onLayoutEnd=function(){},b.updateCfg(E),b}return B(x,I),x.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},x.prototype.execute=function(){var E=this,b=E.nodes,w=E.edges,y=void 0===w?[]:w,A=E.center;if(b&&0!==b.length){if(1===b.length)return b[0].x=A[0],b[0].y=A[1],void(E.onLayoutEnd&&E.onLayoutEnd());var M=E.linkDistance,S=(0,j.getAdjMatrix)({nodes:b,edges:y},!1),P=(0,j.floydWarshall)(S);E.handleInfinity(P);var U=(0,j.scaleMatrix)(P,M);E.scaledDistances=U;var z=E.runMDS();return E.positions=z,z.forEach(function(ie,ne){b[ne].x=ie[0]+A[0],b[ne].y=ie[1]+A[1]}),E.onLayoutEnd&&E.onLayoutEnd(),{nodes:b,edges:y}}E.onLayoutEnd&&E.onLayoutEnd()},x.prototype.runMDS=function(){var y=Q.Matrix.mul(Q.Matrix.pow(this.scaledDistances,2),-.5),A=y.mean("row"),M=y.mean("column"),S=y.mean();y.add(S).subRowVector(A).subColumnVector(M);var P=new Q.SingularValueDecomposition(y),U=Q.Matrix.sqrt(P.diagonalMatrix).diagonal();return P.leftSingularVectors.toJSON().map(function(z){return Q.Matrix.mul([z],[U]).toJSON()[0].splice(0,2)})},x.prototype.handleInfinity=function(E){var b=-999999;E.forEach(function(w){w.forEach(function(y){y!==1/0&&b<y&&(b=y)})}),E.forEach(function(w,y){w.forEach(function(A,M){A===1/0&&(E[y][M]=b)})})},x.prototype.getType=function(){return"mds"},x}(G(8792).Base);V.MDSLayout=F},2061:function(Qt,V,G){"use strict";var B=this&&this.__createBinding||(Object.create?function(j,k,F,I){void 0===I&&(I=F);var x=Object.getOwnPropertyDescriptor(k,F);(!x||("get"in x?!k.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return k[F]}}),Object.defineProperty(j,I,x)}:function(j,k,F,I){void 0===I&&(I=F),j[I]=k[F]}),Q=this&&this.__exportStar||function(j,k){for(var F in j)"default"!==F&&!Object.prototype.hasOwnProperty.call(k,F)&&B(k,j,F)};Object.defineProperty(V,"__esModule",{value:!0}),Q(G(6285),V)},5998:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});var B=G(6380),Q=function(){function j(k){this.distances=k.distances,this.dimension=k.dimension||2,this.linkDistance=k.linkDistance}return j.prototype.layout=function(){var k=this,F=k.dimension,I=k.distances,x=k.linkDistance;try{var E=B.Matrix.mul(B.Matrix.pow(I,2),-.5),b=E.mean("row"),w=E.mean("column"),y=E.mean();E.add(y).subRowVector(b).subColumnVector(w);var A=new B.SingularValueDecomposition(E),M=B.Matrix.sqrt(A.diagonalMatrix).diagonal();return A.leftSingularVectors.toJSON().map(function(ie){return B.Matrix.mul([ie],[M]).toJSON()[0].splice(0,F)})}catch{for(var S=[],P=0;P<I.length;P++){var U=Math.random()*x,z=Math.random()*x;S.push([U,z])}return S}},j}();V.default=Q},6285:function(Qt,V,G){"use strict";var y,B=this&&this.__extends||(y=function(A,M){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,P){S.__proto__=P}||function(S,P){for(var U in P)Object.prototype.hasOwnProperty.call(P,U)&&(S[U]=P[U])})(A,M)},function(A,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function S(){this.constructor=A}y(A,M),A.prototype=null===M?Object.create(M):(S.prototype=M.prototype,new S)}),Q=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(V,"__esModule",{value:!0}),V.RadialLayout=void 0;var j=G(7602),k=G(8792),F=Q(G(5998)),I=Q(G(2149));function b(y,A){return Math.sqrt((y[0]-A[0])*(y[0]-A[0])+(y[1]-A[1])*(y[1]-A[1]))}var w=function(y){function A(M){var S=y.call(this)||this;return S.maxIteration=1e3,S.focusNode=null,S.unitRadius=null,S.linkDistance=50,S.preventOverlap=!1,S.strictRadial=!0,S.maxPreventOverlapIteration=200,S.sortStrength=10,S.nodes=[],S.edges=[],S.updateCfg(M),S}return B(A,y),A.prototype.getDefaultCfg=function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},A.prototype.execute=function(){var M=this,S=M.nodes,P=M.edges||[];if(S&&0!==S.length){!M.width&&typeof window<"u"&&(M.width=window.innerWidth),!M.height&&typeof window<"u"&&(M.height=window.innerHeight),M.center||(M.center=[M.width/2,M.height/2]);var U=M.center;if(1===S.length)return S[0].x=U[0],S[0].y=U[1],void(M.onLayoutEnd&&M.onLayoutEnd());var z=M.linkDistance,ie=null;if((0,j.isString)(M.focusNode)){for(var ne=!1,q=0;q<S.length;q++)S[q].id===M.focusNode&&(M.focusNode=ie=S[q],ne=!0,q=S.length);ne||(ie=null)}else ie=M.focusNode;ie||(M.focusNode=ie=S[0]);var K=function E(y,A){var M=-1;return y.forEach(function(S,P){S.id===A&&(M=P)}),M}(S,ie.id);K<0&&(K=0),M.focusIndex=K;var ee=(0,j.getAdjMatrix)({nodes:S,edges:P},!1),X=(0,j.floydWarshall)(ee),ae=M.maxToFocus(X,K);M.handleInfinity(X,K,ae+1),M.distances=X;var re=X[K],oe=M.width||500,ve=M.height||500,we=oe-U[0]>U[0]?U[0]:oe-U[0],_e=ve-U[1]>U[1]?U[1]:ve-U[1];0===we&&(we=oe/2),0===_e&&(_e=ve/2);var me=_e>we?we:_e,Ce=Math.max.apply(Math,re),fe=[];re.forEach(function(pt,xt){M.unitRadius||(M.unitRadius=me/Ce),fe[xt]=pt*M.unitRadius}),M.radii=fe;var be=M.eIdealDisMatrix();M.eIdealDistances=be;var te=function x(y){for(var A=y.length,M=y[0].length,S=[],P=0;P<A;P++){for(var U=[],z=0;z<M;z++)U.push(0!==y[P][z]?1/(y[P][z]*y[P][z]):0);S.push(U)}return S}(be);M.weights=te;var ke=new F.default({linkDistance:z,distances:be}).layout();ke.forEach(function(pt){(0,j.isNaN)(pt[0])&&(pt[0]=Math.random()*z),(0,j.isNaN)(pt[1])&&(pt[1]=Math.random()*z)}),M.positions=ke,ke.forEach(function(pt,xt){S[xt].x=pt[0]+U[0],S[xt].y=pt[1]+U[1]}),ke.forEach(function(pt){pt[0]-=ke[K][0],pt[1]-=ke[K][1]}),M.run();var bt,We=M.nodeSize,Ft=M.strictRadial;if(M.preventOverlap){var Xe,Pt=M.nodeSpacing;Xe=(0,j.isNumber)(Pt)?function(){return Pt}:(0,j.isFunction)(Pt)?Pt:function(){return 0},bt=We?(0,j.isArray)(We)?function(pt){return(We[0]>We[1]?We[0]:We[1])+Xe(pt)}:function(pt){return We+Xe(pt)}:function(pt){return pt.size?(0,j.isArray)(pt.size)?(pt.size[0]>pt.size[1]?pt.size[0]:pt.size[1])+Xe(pt):(0,j.isObject)(pt.size)?(pt.size.width>pt.size.height?pt.size.width:pt.size.height)+Xe(pt):pt.size+Xe(pt):10+Xe(pt)};var Ct=new I.default({nodes:S,nodeSizeFunc:bt,adjMatrix:ee,positions:ke,radii:fe,height:ve,width:oe,strictRadial:Ft,focusID:K,iterations:M.maxPreventOverlapIteration||200,k:ke.length/4.5});ke=Ct.layout()}return ke.forEach(function(pt,xt){S[xt].x=pt[0]+U[0],S[xt].y=pt[1]+U[1]}),M.onLayoutEnd&&M.onLayoutEnd(),{nodes:S,edges:P}}M.onLayoutEnd&&M.onLayoutEnd()},A.prototype.run=function(){for(var M=this,S=M.maxIteration,P=M.positions||[],U=M.weights||[],z=M.eIdealDistances||[],ie=M.radii||[],ne=0;ne<=S;ne++)M.oneIteration(ne/S,P,ie,z,U)},A.prototype.oneIteration=function(M,S,P,U,z){var ne=1-M,q=this.focusIndex;S.forEach(function(K,ee){var X=b(K,[0,0]),ae=0===X?0:1/X;if(ee!==q){var re=0,oe=0,ve=0;S.forEach(function(_e,me){if(ee!==me){var Ce=b(K,_e),fe=0===Ce?0:1/Ce,be=U[me][ee];ve+=z[ee][me],re+=z[ee][me]*(_e[0]+be*(K[0]-_e[0])*fe),oe+=z[ee][me]*(_e[1]+be*(K[1]-_e[1])*fe)}});var we=0===P[ee]?0:1/P[ee];ve*=ne,re*=ne,K[0]=(re+=M*we*K[0]*ae)/(ve+=M*we*we),oe*=ne,K[1]=(oe+=M*we*K[1]*ae)/ve}})},A.prototype.eIdealDisMatrix=function(){var M=this,S=M.nodes;if(!S)return[];var P=M.distances,U=M.linkDistance,z=M.radii||[],ie=M.unitRadius||50,ne=[];return P&&P.forEach(function(q,K){var ee=[];q.forEach(function(X,ae){if(K===ae)ee.push(0);else if(z[K]===z[ae])if("data"===M.sortBy)ee.push(X*(Math.abs(K-ae)*M.sortStrength)/(z[K]/ie));else if(M.sortBy){var re=S[K][M.sortBy]||0,oe=S[ae][M.sortBy]||0;(0,j.isString)(re)&&(re=re.charCodeAt(0)),(0,j.isString)(oe)&&(oe=oe.charCodeAt(0)),ee.push(X*(Math.abs(re-oe)*M.sortStrength)/(z[K]/ie))}else ee.push(X*U/(z[K]/ie));else ee.push(X*((U+ie)/2))}),ne.push(ee)}),ne},A.prototype.handleInfinity=function(M,S,P){for(var U=M.length,z=0;z<U;z++)if(M[S][z]===1/0){M[S][z]=P,M[z][S]=P;for(var ie=0;ie<U;ie++)M[z][ie]!==1/0&&M[S][ie]===1/0&&(M[S][ie]=P+M[z][ie],M[ie][S]=P+M[z][ie])}for(z=0;z<U;z++)if(z!==S)for(ie=0;ie<U;ie++)if(M[z][ie]===1/0){var ne=Math.abs(M[S][z]-M[S][ie]);M[z][ie]=ne=0===ne?1:ne}},A.prototype.maxToFocus=function(M,S){for(var P=0,U=0;U<M[S].length;U++)M[S][U]!==1/0&&(P=M[S][U]>P?M[S][U]:P);return P},A.prototype.getType=function(){return"radial"},A}(k.Base);V.RadialLayout=w},2149:(Qt,V)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});var B=function(){function Q(j){this.disp=[],this.positions=j.positions,this.adjMatrix=j.adjMatrix,this.focusID=j.focusID,this.radii=j.radii,this.iterations=j.iterations||10,this.height=j.height||10,this.width=j.width||10,this.speed=j.speed||100,this.gravity=j.gravity||10,this.nodeSizeFunc=j.nodeSizeFunc,this.k=j.k||5,this.strictRadial=j.strictRadial,this.nodes=j.nodes}return Q.prototype.layout=function(){var j=this,k=j.positions,F=[],I=j.iterations;j.maxDisplace=j.width/10,j.disp=F;for(var E=0;E<I;E++)k.forEach(function(b,w){F[w]={x:0,y:0}}),j.getRepulsion(),j.updatePositions();return k},Q.prototype.getRepulsion=function(){var j=this,k=j.positions,F=j.nodes,I=j.disp,x=j.k,E=j.radii||[];k.forEach(function(b,w){I[w]={x:0,y:0},k.forEach(function(y,A){if(w!==A&&E[w]===E[A]){var M=b[0]-y[0],S=b[1]-y[1],P=Math.sqrt(M*M+S*S);if(0===P){P=1;var U=w>A?1:-1;M=.01*U,S=.01*U}if(P<j.nodeSizeFunc(F[w])/2+j.nodeSizeFunc(F[A])/2){var z=x*x/P;I[w].x+=M/P*z,I[w].y+=S/P*z}}})})},Q.prototype.updatePositions=function(){var j=this,k=j.positions,F=j.disp,I=j.speed,x=j.strictRadial,E=j.focusID,b=j.maxDisplace||j.width/10;x&&F.forEach(function(y,A){var M=k[A][0]-k[E][0],S=k[A][1]-k[E][1],P=Math.sqrt(M*M+S*S),U=S/P,z=-M/P,ie=Math.sqrt(y.x*y.x+y.y*y.y),ne=Math.acos((U*y.x+z*y.y)/ie);ne>Math.PI/2&&(ne-=Math.PI/2,U*=-1,z*=-1);var q=Math.cos(ne)*ie;y.x=U*q,y.y=z*q});var w=j.radii;k.forEach(function(y,A){if(A!==E){var M=Math.sqrt(F[A].x*F[A].x+F[A].y*F[A].y);if(M>0&&A!==E){var S=Math.min(b*(I/800),M);if(y[0]+=F[A].x/M*S,y[1]+=F[A].y/M*S,x){var P=y[0]-k[E][0],U=y[1]-k[E][1],z=Math.sqrt(P*P+U*U);U=U/z*w[A],y[0]=k[E][0]+(P=P/z*w[A]),y[1]=k[E][1]+U}}}})},Q}();V.default=B},2386:function(Qt,V,G){"use strict";var k,B=this&&this.__extends||(k=function(F,I){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,E){x.__proto__=E}||function(x,E){for(var b in E)Object.prototype.hasOwnProperty.call(E,b)&&(x[b]=E[b])})(F,I)},function(F,I){if("function"!=typeof I&&null!==I)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");function x(){this.constructor=F}k(F,I),F.prototype=null===I?Object.create(I):(x.prototype=I.prototype,new x)});Object.defineProperty(V,"__esModule",{value:!0}),V.RandomLayout=void 0;var j=function(k){function F(I){var x=k.call(this)||this;return x.center=[0,0],x.width=300,x.height=300,x.nodes=[],x.edges=[],x.onLayoutEnd=function(){},x.updateCfg(I),x}return B(F,k),F.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},F.prototype.execute=function(){var I=this,x=I.nodes,b=I.center;return!I.width&&typeof window<"u"&&(I.width=window.innerWidth),!I.height&&typeof window<"u"&&(I.height=window.innerHeight),x&&x.forEach(function(w){w.x=.9*(Math.random()-.5)*I.width+b[0],w.y=.9*(Math.random()-.5)*I.height+b[1]}),I.onLayoutEnd&&I.onLayoutEnd(),{nodes:x,edges:this.edges}},F.prototype.getType=function(){return"random"},F}(G(8792).Base);V.RandomLayout=j},7845:(Qt,V)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0})},1647:function(Qt,V,G){"use strict";var E,B=this&&this.__extends||(E=function(b,w){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,A){y.__proto__=A}||function(y,A){for(var M in A)Object.prototype.hasOwnProperty.call(A,M)&&(y[M]=A[M])})(b,w)},function(b,w){if("function"!=typeof w&&null!==w)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function y(){this.constructor=b}E(b,w),b.prototype=null===w?Object.create(w):(y.prototype=w.prototype,new y)});Object.defineProperty(V,"__esModule",{value:!0}),V.getLayoutByName=V.unRegisterLayout=V.registerLayout=void 0;var Q=G(8792),j=G(7602),k=new Map;V.registerLayout=function(E,b){if(k.get(E)&&console.warn("The layout with the name ".concat(E," exists already, it will be overridden")),(0,j.isObject)(b)){var w=function(y){function A(M){var S=y.call(this)||this,P=S,U={},z=P.getDefaultCfg();return Object.assign(U,z,b,M),Object.keys(U).forEach(function(ie){P[ie]=U[ie]}),S}return B(A,y),A}(Q.Base);k.set(E,w)}else k.set(E,b);return k.get(E)},V.unRegisterLayout=function(E){k.has(E)&&k.delete(E)},V.getLayoutByName=function(E){return k.has(E)?k.get(E):null}},4517:(Qt,V)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.isArray=void 0,V.isArray=Array.isArray},7439:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.getFuncByUnknownType=V.getFunc=V.isFunction=void 0;var B=G(7602),Q=G(5772);V.isFunction=function(I){return"function"==typeof I},V.getFunc=function(I,x,E){return E||((0,Q.isNumber)(I)?function(){return I}:function(){return x})},V.getFuncByUnknownType=function(I,x,E){return void 0===E&&(E=!0),x||0===x?(0,V.isFunction)(x)?x:(0,Q.isNumber)(x)?function(){return x}:(0,B.isArray)(x)?function(){if(E){var b=Math.max.apply(Math,x);return isNaN(b)?I:b}return x}:(0,B.isObject)(x)?function(){if(E){var b=Math.max(x.width,x.height);return isNaN(b)?I:b}return[x.width,x.height]}:function(){return I}:function(b){return b.size?(0,B.isArray)(b.size)?b.size[0]>b.size[1]?b.size[0]:b.size[1]:(0,B.isObject)(b.size)?b.size.width>b.size.height?b.size.width:b.size.height:b.size:I}}},7659:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.arrayToTextureData=V.attributesToTextureData=V.buildTextureDataWithTwoEdgeAttr=V.buildTextureData=V.proccessToFunc=void 0;var B=G(7602),Q=G(9337);V.proccessToFunc=function(E,b){return E?(0,B.isNumber)(E)?function(){return E}:E:function(){return b||1}},V.buildTextureData=function(E,b){var w=[],y=[],A={},M=0;for(M=0;M<E.length;M++){var S=E[M];A[S.id]=M,w.push(S.x),w.push(S.y),w.push(0),w.push(0),y.push([])}for(M=0;M<b.length;M++){var P=b[M],U=(0,Q.getEdgeTerminal)(P,"source"),z=(0,Q.getEdgeTerminal)(P,"target");!isNaN(A[U])&&!isNaN(A[z])&&(y[A[U]].push(A[z]),y[A[z]].push(A[U]))}var ie=0;for(M=0;M<E.length;M++){var q=y[M],K=q.length;w[4*M+2]=w.length,w[4*M+3]=K,ie=Math.max(ie,K);for(var ee=0;ee<K;++ee)w.push(+q[ee])}for(;w.length%4!=0;)w.push(0);return{maxEdgePerVetex:ie,array:new Float32Array(w)}},V.buildTextureDataWithTwoEdgeAttr=function(E,b,w,y){var A=[],M=[],S={},P=0;for(P=0;P<E.length;P++){var U=E[P];S[U.id]=P,A.push(U.x),A.push(U.y),A.push(0),A.push(0),M.push([])}for(P=0;P<b.length;P++){var z=b[P],ie=(0,Q.getEdgeTerminal)(z,"source"),ne=(0,Q.getEdgeTerminal)(z,"target");M[S[ie]].push(S[ne]),M[S[ie]].push(w(z)),M[S[ie]].push(y(z)),M[S[ie]].push(0),M[S[ne]].push(S[ie]),M[S[ne]].push(w(z)),M[S[ne]].push(y(z)),M[S[ne]].push(0)}var q=0;for(P=0;P<E.length;P++){var ee=M[P],X=ee.length;A[4*P+2]=A.length+1048576*X/4,A[4*P+3]=0,q=Math.max(q,X/4);for(var ae=0;ae<X;++ae)A.push(+ee[ae])}for(;A.length%4!=0;)A.push(0);return{maxEdgePerVetex:q,array:new Float32Array(A)}},V.attributesToTextureData=function(E,b){var w=[],y=E.length,A={};return b.forEach(function(M){E.forEach(function(S,P){if(void 0===A[M[S]]&&(A[M[S]]=Object.keys(A).length),w.push(A[M[S]]),P===y-1)for(;w.length%4!=0;)w.push(0)})}),{array:new Float32Array(w),count:Object.keys(A).length}},V.arrayToTextureData=function(E){for(var b=[],w=E.length,y=E[0].length,A=function(S){E.forEach(function(P,U){if(b.push(P[S]),U===w-1)for(;b.length%4!=0;)b.push(0)})},M=0;M<y;M++)A(M);return new Float32Array(b)}},7602:function(Qt,V,G){"use strict";var B=this&&this.__createBinding||(Object.create?function(j,k,F,I){void 0===I&&(I=F);var x=Object.getOwnPropertyDescriptor(k,F);(!x||("get"in x?!k.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return k[F]}}),Object.defineProperty(j,I,x)}:function(j,k,F,I){void 0===I&&(I=F),j[I]=k[F]}),Q=this&&this.__exportStar||function(j,k){for(var F in j)"default"!==F&&!Object.prototype.hasOwnProperty.call(k,F)&&B(k,j,F)};Object.defineProperty(V,"__esModule",{value:!0}),Q(G(9599),V),Q(G(4517),V),Q(G(5772),V),Q(G(9337),V),Q(G(5753),V),Q(G(7439),V)},9337:(Qt,V,G)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.getCoreNodeAndRelativeLeafNodes=V.getAvgNodePosition=V.getLayoutBBox=V.traverseTreeUp=V.scaleMatrix=V.getAdjMatrix=V.floydWarshall=V.getDegreeMap=V.getDegree=V.getEdgeTerminal=void 0;var B=G(4517),Q=G(5772),j=G(5753);V.getEdgeTerminal=function(ie,ne){var q=ie[ne];return(0,j.isObject)(q)?q.cell:q},V.getDegree=function(ie,ne,q){for(var K=[],ee=0;ee<ie;ee++)K[ee]={in:0,out:0,all:0};return q&&q.forEach(function(X){var ae=(0,V.getEdgeTerminal)(X,"source"),re=(0,V.getEdgeTerminal)(X,"target");ae&&K[ne[ae]]&&(K[ne[ae]].out+=1,K[ne[ae]].all+=1),re&&K[ne[re]]&&(K[ne[re]].in+=1,K[ne[re]].all+=1)}),K},V.getDegreeMap=function(ie,ne){var q={};return ie.forEach(function(K){q[K.id]={in:0,out:0,all:0}}),ne&&ne.forEach(function(K){var ee=(0,V.getEdgeTerminal)(K,"source"),X=(0,V.getEdgeTerminal)(K,"target");ee&&(q[ee].out+=1,q[ee].all+=1),X&&(q[X].in+=1,q[X].all+=1)}),q},V.floydWarshall=function(ie){for(var ne=[],q=ie.length,K=0;K<q;K+=1){ne[K]=[];for(var ee=0;ee<q;ee+=1)ne[K][ee]=K===ee?0:0!==ie[K][ee]&&ie[K][ee]?ie[K][ee]:1/0}for(var X=0;X<q;X+=1)for(K=0;K<q;K+=1)for(ee=0;ee<q;ee+=1)ne[K][ee]>ne[K][X]+ne[X][ee]&&(ne[K][ee]=ne[K][X]+ne[X][ee]);return ne},V.getAdjMatrix=function(ie,ne){var q=ie.nodes,K=ie.edges,ee=[],X={};if(!q)throw new Error("invalid nodes data!");return q&&q.forEach(function(ae,re){X[ae.id]=re,ee.push([])}),K?.forEach(function(ae){var re=(0,V.getEdgeTerminal)(ae,"source"),oe=(0,V.getEdgeTerminal)(ae,"target"),ve=X[re],we=X[oe];void 0===ve||void 0===we||(ee[ve][we]=1,ne||(ee[we][ve]=1))}),ee},V.scaleMatrix=function(ie,ne){var q=[];return ie.forEach(function(K){var ee=[];K.forEach(function(X){ee.push(X*ne)}),q.push(ee)}),q};var w=function(ie,ne){if(ie&&ie.children)for(var q=ie.children.length-1;q>=0;q--)if(!w(ie.children[q],ne))return;return!!ne(ie)};V.traverseTreeUp=function(ie,ne){"function"==typeof ne&&w(ie,ne)},V.getLayoutBBox=function(ie){var ne=1/0,q=1/0,K=-1/0,ee=-1/0;return ie.forEach(function(X){var ae=X.size;(0,B.isArray)(ae)?1===ae.length&&(ae=[ae[0],ae[0]]):(0,Q.isNumber)(ae)?ae=[ae,ae]:(void 0===ae||isNaN(ae))&&(ae=[30,30]);var re=[ae[0]/2,ae[1]/2],oe=X.x-re[0],ve=X.x+re[0],we=X.y-re[1],_e=X.y+re[1];ne>oe&&(ne=oe),q>we&&(q=we),K<ve&&(K=ve),ee<_e&&(ee=_e)}),{minX:ne,minY:q,maxX:K,maxY:ee}},V.getAvgNodePosition=function(ie){var ne={x:0,y:0};ie.forEach(function(K){ne.x+=K.x||0,ne.y+=K.y||0});var q=ie.length||1;return{x:ne.x/q,y:ne.y/q}};var S=function(ie,ne,q){var K,ee;return"source"===ie?(null===(K=q?.find(function(X){return X.target===ne.id}))||void 0===K?void 0:K.source)||{}:(null===(ee=q?.find(function(X){return X.source===ne.id}))||void 0===ee?void 0:ee.target)||{}},P=function(ie,ne,q){var K=[];switch(ie){case"source":K=q?.filter(function(X){return X.source===ne.id}).map(function(X){return X.target});break;case"target":K=q?.filter(function(X){return X.target===ne.id}).map(function(X){return X.source});break;case"both":K=q?.filter(function(X){return X.source===ne.id}).map(function(X){return X.target}).concat(q?.filter(function(X){return X.target===ne.id}).map(function(X){return X.source}))}var ee=new Set(K);return Array.from(ee)};V.getCoreNodeAndRelativeLeafNodes=function(ie,ne,q,K,ee,X){var ae=ee[ne.id],oe=ae.out,ve=ne,we=[];0===ae.in?(ve=S("source",ne,q),we=P("both",ve,q).map(function(me){return X[me]})):0===oe&&(ve=S("target",ne,q),we=P("both",ve,q).map(function(me){return X[me]}));var _e=function(ie,ne,q,K,ee){var X=q[ne]||"",ae=K?.filter(function(re){return re[ne]===X})||[];return"leaf"===ie&&(ae=ae.filter(function(re){var oe,ve;return 0===(null===(oe=ee[re.id])||void 0===oe?void 0:oe.in)||0===(null===(ve=ee[re.id])||void 0===ve?void 0:ve.out)})),ae}(ie,K,ne,we=we.filter(function(me){return ee[me.id]&&(0===ee[me.id].in||0===ee[me.id].out)}),ee);return{coreNode:ve,relativeLeafNodes:we,sameTypeLeafNodes:_e}}},5772:(Qt,V)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.toNumber=V.isNaN=V.isNumber=void 0,V.isNumber=function(j){return"number"==typeof j},V.isNaN=function(j){return Number.isNaN(Number(j))},V.toNumber=function(j){var k=parseFloat(j);return(0,V.isNaN)(k)?j:k}},5753:function(Qt,V){"use strict";var G=this&&this.__assign||function(){return G=Object.assign||function(j){for(var k,F=1,I=arguments.length;F<I;F++)for(var x in k=arguments[F])Object.prototype.hasOwnProperty.call(k,x)&&(j[x]=k[x]);return j},G.apply(this,arguments)};Object.defineProperty(V,"__esModule",{value:!0}),V.clone=V.isObject=void 0,V.isObject=function(j){return null!==j&&"object"==typeof j},V.clone=function(j){if(null===j)return j;if(j instanceof Date)return new Date(j.getTime());if(j instanceof Array){var k=[];return j.forEach(function(I){k.push(I)}),k.map(function(I){return(0,V.clone)(I)})}if("object"==typeof j&&Object.keys(j).length){var F=G({},j);return Object.keys(F).forEach(function(I){F[I]=(0,V.clone)(F[I])}),F}return j}},9599:(Qt,V)=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.camelize=V.isString=void 0,V.isString=function(j){return"string"==typeof j};var j,k,Q=/-(\w)/g;V.camelize=(j=function(j){return j.replace(Q,function(k,F){return F?F.toUpperCase():""})},k=Object.create(null),function(F){return k[F]||(k[F]=j(F))})},8276:(Qt,V,G)=>{"use strict";var Q=G(8793);function j(y,A,M){var S=[0,0,0,0,0,0,0,0,0];return Q.mat3.fromTranslation(S,M),Q.mat3.multiply(y,S,A)}function k(y,A,M){var S=[0,0,0,0,0,0,0,0,0];return Q.mat3.fromRotation(S,M),Q.mat3.multiply(y,S,A)}function F(y,A,M){var S=[0,0,0,0,0,0,0,0,0];return Q.mat3.fromScaling(S,M),Q.mat3.multiply(y,S,A)}function I(y,A,M){return Q.mat3.multiply(y,M,A)}V.vs=function x(y,A){for(var M=y?[].concat(y):[1,0,0,0,1,0,0,0,1],S=0,P=A.length;S<P;S++){var U=A[S];switch(U[0]){case"t":j(M,M,[U[1],U[2]]);break;case"s":F(M,M,[U[1],U[2]]);break;case"r":k(M,M,U[1]);break;case"m":I(M,M,U[1])}}return M}},1035:(Qt,V,G)=>{"use strict";G.r(V),G.d(V,{Cache:()=>Na,assign:()=>ns,augment:()=>Iu,clamp:()=>ce,clearAnimationFrame:()=>Hu,clone:()=>Pu,contains:()=>k,debounce:()=>Ql,deepMix:()=>Ha,difference:()=>E,each:()=>ie,endsWith:()=>xr,every:()=>Rn,extend:()=>Wc,filter:()=>I,find:()=>we,findIndex:()=>me,firstValue:()=>fe,fixedBase:()=>Ge,flatten:()=>te,flattenDeep:()=>ke,forIn:()=>st,get:()=>pu,getEllipsisText:()=>la,getRange:()=>Ft,getType:()=>Du,getWrapBehavior:()=>xo,group:()=>De,groupBy:()=>Oi,groupToMap:()=>Ir,has:()=>Ot,hasKey:()=>At,hasValue:()=>fn,head:()=>gn,identity:()=>vu,includes:()=>k,indexOf:()=>qo,isArguments:()=>Kl,isArray:()=>P,isArrayLike:()=>Q,isBoolean:()=>Gc,isDate:()=>Uc,isDecimal:()=>R,isElement:()=>Vc,isEmpty:()=>Wa,isEqual:()=>$c,isEqualWith:()=>du,isError:()=>Zh,isEven:()=>ze,isFinite:()=>Kf,isFunction:()=>A,isInteger:()=>gt,isMatch:()=>ee,isNegative:()=>Ke,isNil:()=>S,isNull:()=>Tu,isNumber:()=>it,isNumberEqual:()=>Sn,isObject:()=>U,isObjectLike:()=>ae,isOdd:()=>Wn,isPlainObject:()=>oe,isPositive:()=>$n,isPrototype:()=>ua,isRegExp:()=>Jh,isString:()=>Mt,isType:()=>y,isUndefined:()=>Zl,keys:()=>q,last:()=>kn,lowerCase:()=>Dr,lowerFirst:()=>xi,map:()=>Ui,mapValues:()=>ec,max:()=>Ze,maxBy:()=>Er,measureTextWidth:()=>Li,memoize:()=>Jl,min:()=>We,minBy:()=>Xr,mix:()=>ns,mod:()=>Kt,noop:()=>is,number2color:()=>Y,omit:()=>Co,parseRadius:()=>T,pick:()=>Zs,pull:()=>pt,pullAt:()=>ut,reduce:()=>$e,remove:()=>tt,requestAnimationFrame:()=>ys,set:()=>tc,size:()=>$u,some:()=>Mr,sortBy:()=>un,startsWith:()=>cr,substitute:()=>dr,throttle:()=>_s,toArray:()=>Qf,toDegree:()=>Un,toInteger:()=>Gr,toRadian:()=>Oe,toString:()=>Fn,union:()=>Xt,uniq:()=>Le,uniqueId:()=>vl,upperCase:()=>Br,upperFirst:()=>Ea,values:()=>cn,valuesOfKey:()=>Tn,wrapBehavior:()=>Wr});const Q=function(Ne){return null!==Ne&&"function"!=typeof Ne&&isFinite(Ne.length)},k=function(Ne,vt){return!!Q(Ne)&&Ne.indexOf(vt)>-1},I=function(Ne,vt){if(!Q(Ne))return Ne;for(var mt=[],Gt=0;Gt<Ne.length;Gt++){var bn=Ne[Gt];vt(bn,Gt)&&mt.push(bn)}return mt},E=function(Ne,vt){return void 0===vt&&(vt=[]),I(Ne,function(mt){return!k(vt,mt)})};var b={}.toString;const y=function(Ne,vt){return b.call(Ne)==="[object "+vt+"]"},A=function(Ne){return y(Ne,"Function")},S=function(Ne){return null==Ne},P=function(Ne){return Array.isArray?Array.isArray(Ne):y(Ne,"Array")},U=function(Ne){var vt=typeof Ne;return null!==Ne&&"object"===vt||"function"===vt},ie=function z(Ne,vt){if(Ne)if(P(Ne))for(var Gt=0,bn=Ne.length;Gt<bn&&!1!==vt(Ne[Gt],Gt);Gt++);else if(U(Ne))for(var or in Ne)if(Ne.hasOwnProperty(or)&&!1===vt(Ne[or],or))break},q=Object.keys?function(Ne){return Object.keys(Ne)}:function(Ne){var vt=[];return ie(Ne,function(mt,Gt){A(Ne)&&"prototype"===Gt||vt.push(Gt)}),vt},ee=function K(Ne,vt){var mt=q(vt),Gt=mt.length;if(S(Ne))return!Gt;for(var bn=0;bn<Gt;bn+=1){var or=mt[bn];if(vt[or]!==Ne[or]||!(or in Ne))return!1}return!0},ae=function(Ne){return"object"==typeof Ne&&null!==Ne},oe=function(Ne){if(!ae(Ne)||!y(Ne,"Object"))return!1;if(null===Object.getPrototypeOf(Ne))return!0;for(var vt=Ne;null!==Object.getPrototypeOf(vt);)vt=Object.getPrototypeOf(vt);return Object.getPrototypeOf(Ne)===vt},we=function ve(Ne,vt){if(!P(Ne))return null;var mt;if(A(vt)&&(mt=vt),oe(vt)&&(mt=function(bn){return ee(bn,vt)}),mt)for(var Gt=0;Gt<Ne.length;Gt+=1)if(mt(Ne[Gt]))return Ne[Gt];return null},me=function _e(Ne,vt,mt){void 0===mt&&(mt=0);for(var Gt=mt;Gt<Ne.length;Gt++)if(vt(Ne[Gt],Gt))return Gt;return-1},fe=function(Ne,vt){for(var mt=null,Gt=0;Gt<Ne.length;Gt++){var or=Ne[Gt][vt];if(!S(or)){mt=P(or)?or[0]:or;break}}return mt},te=function(Ne){if(!P(Ne))return[];for(var vt=[],mt=0;mt<Ne.length;mt++)vt=vt.concat(Ne[mt]);return vt};var de=function(Ne,vt){if(void 0===vt&&(vt=[]),P(Ne))for(var mt=0;mt<Ne.length;mt+=1)de(Ne[mt],vt);else vt.push(Ne);return vt};const ke=de,Ze=function(Ne){if(P(Ne))return Ne.reduce(function(vt,mt){return Math.max(vt,mt)},Ne[0])},We=function(Ne){if(P(Ne))return Ne.reduce(function(vt,mt){return Math.min(vt,mt)},Ne[0])},Ft=function(Ne){var vt=Ne.filter(function(Nr){return!isNaN(Nr)});if(!vt.length)return{min:0,max:0};if(P(Ne[0])){for(var mt=[],Gt=0;Gt<Ne.length;Gt++)mt=mt.concat(Ne[Gt]);vt=mt}var bn=Ze(vt);return{min:We(vt),max:bn}};var Pt=Array.prototype,Xe=Pt.splice,yt=Pt.indexOf;const pt=function(Ne){for(var vt=[],mt=1;mt<arguments.length;mt++)vt[mt-1]=arguments[mt];for(var Gt=0;Gt<vt.length;Gt++)for(var bn=vt[Gt],or=-1;(or=yt.call(Ne,bn))>-1;)Xe.call(Ne,or,1);return Ne};var xt=Array.prototype.splice;const ut=function(vt,mt){if(!Q(vt))return[];for(var Gt=vt?mt.length:0,bn=Gt-1;Gt--;){var or=void 0,Nr=mt[Gt];(Gt===bn||Nr!==or)&&(or=Nr,xt.call(vt,Nr,1))}return vt},$e=function(Ne,vt,mt){if(!P(Ne)&&!oe(Ne))return Ne;var Gt=mt;return ie(Ne,function(bn,or){Gt=vt(Gt,bn,or)}),Gt},tt=function(Ne,vt){var mt=[];if(!Q(Ne))return mt;for(var Gt=-1,bn=[],or=Ne.length;++Gt<or;){var Nr=Ne[Gt];vt(Nr,Gt,Ne)&&(mt.push(Nr),bn.push(Gt))}return ut(Ne,bn),mt},Mt=function(Ne){return y(Ne,"String")},un=function Wt(Ne,vt){var mt;if(A(vt))mt=function(bn,or){return vt(bn)-vt(or)};else{var Gt=[];Mt(vt)?Gt.push(vt):P(vt)&&(Gt=vt),mt=function(bn,or){for(var Nr=0;Nr<Gt.length;Nr+=1){var ei=Gt[Nr];if(bn[ei]>or[ei])return 1;if(bn[ei]<or[ei])return-1}return 0}}return Ne.sort(mt),Ne};function Le(Ne,vt){void 0===vt&&(vt=new Map);var mt=[];if(Array.isArray(Ne))for(var Gt=0,bn=Ne.length;Gt<bn;Gt++){var or=Ne[Gt];vt.has(or)||(mt.push(or),vt.set(or,!0))}return mt}const Xt=function(){for(var Ne=[],vt=0;vt<arguments.length;vt++)Ne[vt]=arguments[vt];return Le([].concat.apply([],Ne))},Tn=function(Ne,vt){for(var mt=[],Gt={},bn=0;bn<Ne.length;bn++){var Nr=Ne[bn][vt];if(!S(Nr)){P(Nr)||(Nr=[Nr]);for(var ei=0;ei<Nr.length;ei++){var oo=Nr[ei];Gt[oo]||(mt.push(oo),Gt[oo]=!0)}}}return mt};function gn(Ne){if(Q(Ne))return Ne[0]}function kn(Ne){if(Q(Ne))return Ne[Ne.length-1]}const cr=function ir(Ne,vt){return!(!P(Ne)&&!Mt(Ne))&&Ne[0]===vt},xr=function Bn(Ne,vt){return!(!P(Ne)&&!Mt(Ne))&&Ne[Ne.length-1]===vt},Rn=function(Ne,vt){for(var mt=0;mt<Ne.length;mt++)if(!vt(Ne[mt],mt))return!1;return!0},Mr=function(Ne,vt){for(var mt=0;mt<Ne.length;mt++)if(vt(Ne[mt],mt))return!0;return!1};var yr=Object.prototype.hasOwnProperty;const Oi=function gr(Ne,vt){if(!vt||!P(Ne))return{};for(var bn,mt={},Gt=A(vt)?vt:function(ei){return ei[vt]},or=0;or<Ne.length;or++){var Nr=Ne[or];bn=Gt(Nr),yr.call(mt,bn)?mt[bn].push(Nr):mt[bn]=[Nr]}return mt};function Ir(Ne,vt){if(!vt)return{0:Ne};if(!A(vt)){var mt=P(vt)?vt:vt.replace(/\s+/g,"").split("*");vt=function(Gt){for(var bn="_",or=0,Nr=mt.length;or<Nr;or++)bn+=Gt[mt[or]]&&Gt[mt[or]].toString();return bn}}return Oi(Ne,vt)}const De=function(Ne,vt){if(!vt)return[Ne];var mt=Ir(Ne,vt),Gt=[];for(var bn in mt)Gt.push(mt[bn]);return Gt},xo=function wi(Ne,vt){return Ne["_wrap_"+vt]},Wr=function mr(Ne,vt){if(Ne["_wrap_"+vt])return Ne["_wrap_"+vt];var mt=function(Gt){Ne[vt](Gt)};return Ne["_wrap_"+vt]=mt,mt};var Vr={};const Y=function Ae(Ne){var vt=Vr[Ne];if(!vt){for(var mt=Ne.toString(16),Gt=mt.length;Gt<6;Gt++)mt="0"+mt;Vr[Ne]=vt="#"+mt}return vt},T=function W(Ne){var vt=0,mt=0,Gt=0,bn=0;return P(Ne)?1===Ne.length?vt=mt=Gt=bn=Ne[0]:2===Ne.length?(vt=Gt=Ne[0],mt=bn=Ne[1]):3===Ne.length?(vt=Ne[0],mt=bn=Ne[1],Gt=Ne[2]):(vt=Ne[0],mt=Ne[1],Gt=Ne[2],bn=Ne[3]):vt=mt=Gt=bn=Ne,{r1:vt,r2:mt,r3:Gt,r4:bn}},ce=function(Ne,vt,mt){return Ne<vt?vt:Ne>mt?mt:Ne},Ge=function(Ne,vt){var mt=vt.toString(),Gt=mt.indexOf(".");if(-1===Gt)return Math.round(Ne);var bn=mt.substr(Gt+1).length;return bn>20&&(bn=20),parseFloat(Ne.toFixed(bn))},it=function(Ne){return y(Ne,"Number")},R=function(Ne){return it(Ne)&&Ne%1!=0},ze=function(Ne){return it(Ne)&&Ne%2==0},gt=Number.isInteger?Number.isInteger:function(Ne){return it(Ne)&&Ne%1==0},Ke=function(Ne){return it(Ne)&&Ne<0};function Sn(Ne,vt,mt){return void 0===mt&&(mt=1e-5),Math.abs(Ne-vt)<mt}const Wn=function(Ne){return it(Ne)&&Ne%2!=0},$n=function(Ne){return it(Ne)&&Ne>0},Er=function(Ne,vt){if(P(Ne)){for(var mt,Gt=-1/0,bn=0;bn<Ne.length;bn++){var or=Ne[bn],Nr=A(vt)?vt(or):or[vt];Nr>Gt&&(mt=or,Gt=Nr)}return mt}},Xr=function(Ne,vt){if(P(Ne)){for(var mt,Gt=1/0,bn=0;bn<Ne.length;bn++){var or=Ne[bn],Nr=A(vt)?vt(or):or[vt];Nr<Gt&&(mt=or,Gt=Nr)}return mt}},Kt=function(Ne,vt){return(Ne%vt+vt)%vt};var Gn=180/Math.PI;const Un=function(Ne){return Gn*Ne},Gr=parseInt;var br=Math.PI/180;const Oe=function(Ne){return br*Ne},st=ie,Ot=function(Ne,vt){return Ne.hasOwnProperty(vt)},At=Ot,cn=Object.values?function(Ne){return Object.values(Ne)}:function(Ne){var vt=[];return ie(Ne,function(mt,Gt){A(Ne)&&"prototype"===Gt||vt.push(mt)}),vt},fn=function(Ne,vt){return k(cn(Ne),vt)},Fn=function(Ne){return S(Ne)?"":Ne.toString()},Dr=function(Ne){return Fn(Ne).toLowerCase()},xi=function(Ne){var vt=Fn(Ne);return vt.charAt(0).toLowerCase()+vt.substring(1)},dr=function eo(Ne,vt){return Ne&&vt?Ne.replace(/\\?\{([^{}]+)\}/g,function(mt,Gt){return"\\"===mt.charAt(0)?mt.slice(1):void 0===vt[Gt]?"":vt[Gt]}):Ne},Br=function(Ne){return Fn(Ne).toUpperCase()},Ea=function(Ne){var vt=Fn(Ne);return vt.charAt(0).toUpperCase()+vt.substring(1)};var _a={}.toString;const Du=function(Ne){return _a.call(Ne).replace(/^\[object /,"").replace(/]$/,"")},Kl=function(Ne){return y(Ne,"Arguments")},Gc=function(Ne){return y(Ne,"Boolean")},Uc=function(Ne){return y(Ne,"Date")},Zh=function(Ne){return y(Ne,"Error")};function Kf(Ne){return it(Ne)&&isFinite(Ne)}const Tu=function(Ne){return null===Ne};var Zf=Object.prototype;const ua=function(Ne){var vt=Ne&&Ne.constructor;return Ne===("function"==typeof vt&&vt.prototype||Zf)},Jh=function(Ne){return y(Ne,"RegExp")},Zl=function(Ne){return void 0===Ne},Vc=function(Ne){return Ne instanceof Element||Ne instanceof HTMLDocument};function ys(Ne){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(mt){return setTimeout(mt,16)})(Ne)}function Hu(Ne){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(Ne)}function Wu(Ne,vt){for(var mt in vt)vt.hasOwnProperty(mt)&&"constructor"!==mt&&void 0!==vt[mt]&&(Ne[mt]=vt[mt])}function ns(Ne,vt,mt,Gt){return vt&&Wu(Ne,vt),mt&&Wu(Ne,mt),Gt&&Wu(Ne,Gt),Ne}const Iu=function(){for(var Ne=[],vt=0;vt<arguments.length;vt++)Ne[vt]=arguments[vt];for(var mt=Ne[0],Gt=1;Gt<Ne.length;Gt++){var bn=Ne[Gt];A(bn)&&(bn=bn.prototype),ns(mt.prototype,bn)}};var Ou=function(Ne){if("object"!=typeof Ne||null===Ne)return Ne;var vt;if(P(Ne)){vt=[];for(var mt=0,Gt=Ne.length;mt<Gt;mt++)vt[mt]="object"==typeof Ne[mt]&&null!=Ne[mt]?Ou(Ne[mt]):Ne[mt]}else for(var bn in vt={},Ne)vt[bn]="object"==typeof Ne[bn]&&null!=Ne[bn]?Ou(Ne[bn]):Ne[bn];return vt};const Pu=Ou,Ql=function pl(Ne,vt,mt){var Gt;return function(){var bn=this,or=arguments,Nr=function(){Gt=null,mt||Ne.apply(bn,or)},ei=mt&&!Gt;clearTimeout(Gt),Gt=setTimeout(Nr,vt),ei&&Ne.apply(bn,or)}},Jl=function(Ne,vt){if(!A(Ne))throw new TypeError("Expected a function");var mt=function(){for(var Gt=[],bn=0;bn<arguments.length;bn++)Gt[bn]=arguments[bn];var or=vt?vt.apply(this,Gt):Gt[0],Nr=mt.cache;if(Nr.has(or))return Nr.get(or);var ei=Ne.apply(this,Gt);return Nr.set(or,ei),ei};return mt.cache=new Map,mt};function uo(Ne,vt,mt,Gt){for(var bn in mt=mt||0,Gt=Gt||5,vt)if(vt.hasOwnProperty(bn)){var or=vt[bn];null!==or&&oe(or)?(oe(Ne[bn])||(Ne[bn]={}),mt<Gt?uo(Ne[bn],or,mt+1,Gt):Ne[bn]=vt[bn]):P(or)?(Ne[bn]=[],Ne[bn]=Ne[bn].concat(or)):void 0!==or&&(Ne[bn]=or)}}const Ha=function(Ne){for(var vt=[],mt=1;mt<arguments.length;mt++)vt[mt-1]=arguments[mt];for(var Gt=0;Gt<vt.length;Gt+=1)uo(Ne,vt[Gt]);return Ne},Wc=function(Ne,vt,mt,Gt){A(vt)||(mt=vt,vt=Ne,Ne=function(){});var bn=Object.create?function(Nr,ei){return Object.create(Nr,{constructor:{value:ei}})}:function(Nr,ei){function oo(){}oo.prototype=Nr;var ki=new oo;return ki.constructor=ei,ki},or=bn(vt.prototype,Ne);return Ne.prototype=ns(or,Ne.prototype),Ne.superclass=bn(vt.prototype,vt),ns(or,mt),ns(Ne,Gt),Ne},qo=function(Ne,vt){if(!Q(Ne))return-1;var mt=Array.prototype.indexOf;if(mt)return mt.call(Ne,vt);for(var Gt=-1,bn=0;bn<Ne.length;bn++)if(Ne[bn]===vt){Gt=bn;break}return Gt};var Nu=Object.prototype.hasOwnProperty;const Wa=function Ks(Ne){if(S(Ne))return!0;if(Q(Ne))return!Ne.length;var vt=Du(Ne);if("Map"===vt||"Set"===vt)return!Ne.size;if(ua(Ne))return!Object.keys(Ne).length;for(var mt in Ne)if(Nu.call(Ne,mt))return!1;return!0};var Gi=function(Ne,vt){if(Ne===vt)return!0;if(!Ne||!vt||Mt(Ne)||Mt(vt))return!1;if(Q(Ne)||Q(vt)){if(Ne.length!==vt.length)return!1;for(var mt=!0,Gt=0;Gt<Ne.length&&(mt=Gi(Ne[Gt],vt[Gt]));Gt++);return mt}if(ae(Ne)||ae(vt)){var bn=Object.keys(Ne),or=Object.keys(vt);if(bn.length!==or.length)return!1;for(mt=!0,Gt=0;Gt<bn.length&&(mt=Gi(Ne[bn[Gt]],vt[bn[Gt]]));Gt++);return mt}return!1};const $c=Gi,du=function(Ne,vt,mt){return A(mt)?!!mt(Ne,vt):$c(Ne,vt)},Ui=function(Ne,vt){if(!Q(Ne))return Ne;for(var mt=[],Gt=0;Gt<Ne.length;Gt++)mt.push(vt(Ne[Gt],Gt));return mt};var gu=function(Ne){return Ne};const ec=function(Ne,vt){void 0===vt&&(vt=gu);var mt={};return U(Ne)&&!S(Ne)&&Object.keys(Ne).forEach(function(Gt){mt[Gt]=vt(Ne[Gt],Gt)}),mt},pu=function(Ne,vt,mt){for(var Gt=0,bn=Mt(vt)?vt.split("."):vt;Ne&&Gt<bn.length;)Ne=Ne[bn[Gt++]];return void 0===Ne||Gt<bn.length?mt:Ne},tc=function(Ne,vt,mt){var Gt=Ne,bn=Mt(vt)?vt.split("."):vt;return bn.forEach(function(or,Nr){Nr<bn.length-1?(U(Gt[or])||(Gt[or]=it(bn[Nr+1])?[]:{}),Gt=Gt[or]):Gt[or]=mt}),Ne};var rs=Object.prototype.hasOwnProperty;const Zs=function(Ne,vt){if(null===Ne||!oe(Ne))return{};var mt={};return ie(vt,function(Gt){rs.call(Ne,Gt)&&(mt[Gt]=Ne[Gt])}),mt},Co=function(Ne,vt){return $e(Ne,function(mt,Gt,bn){return vt.includes(bn)||(mt[bn]=Gt),mt},{})},_s=function(Ne,vt,mt){var Gt,bn,or,Nr,ei=0;mt||(mt={});var oo=function(){ei=!1===mt.leading?0:Date.now(),Gt=null,Nr=Ne.apply(bn,or),Gt||(bn=or=null)},ki=function(){var Zo=Date.now();!ei&&!1===mt.leading&&(ei=Zo);var Fs=vt-(Zo-ei);return bn=this,or=arguments,Fs<=0||Fs>vt?(Gt&&(clearTimeout(Gt),Gt=null),ei=Zo,Nr=Ne.apply(bn,or),Gt||(bn=or=null)):!Gt&&!1!==mt.trailing&&(Gt=setTimeout(oo,Fs)),Nr};return ki.cancel=function(){clearTimeout(Gt),ei=0,Gt=bn=or=null},ki},Qf=function(Ne){return Q(Ne)?Array.prototype.slice.call(Ne):[]};var Da={};const vl=function(Ne){return Da[Ne=Ne||"g"]?Da[Ne]+=1:Da[Ne]=1,Ne+Da[Ne]},is=function(){},vu=function(Ne){return Ne};function $u(Ne){return S(Ne)?0:Q(Ne)?Ne.length:Object.keys(Ne).length}var To,Fo=G(655);const Li=Jl(function(Ne,vt){void 0===vt&&(vt={});var mt=vt.fontSize,Gt=vt.fontFamily,bn=vt.fontWeight,or=vt.fontStyle,Nr=vt.fontVariant;return To||(To=document.createElement("canvas").getContext("2d")),To.font=[or,Nr,bn,mt+"px",Gt].join(" "),To.measureText(Mt(Ne)?Ne:"").width},function(Ne,vt){return void 0===vt&&(vt={}),(0,Fo.__spreadArrays)([Ne],cn(vt)).join("")}),la=function(Ne,vt,mt,Gt){void 0===Gt&&(Gt="...");var ki,Zo,or=Li(Gt,mt),Nr=Mt(Ne)?Ne:Fn(Ne),ei=vt,oo=[];if(Li(Ne,mt)<=vt)return Ne;for(;ki=Nr.substr(0,16),!((Zo=Li(ki,mt))+or>ei&&Zo>ei);)if(oo.push(ki),ei-=Zo,!(Nr=Nr.substr(16)))return oo.join("");for(;ki=Nr.substr(0,1),!((Zo=Li(ki,mt))+or>ei);)if(oo.push(ki),ei-=Zo,!(Nr=Nr.substr(1)))return oo.join("");return""+oo.join("")+Gt},Na=function(){function Ne(){this.map={}}return Ne.prototype.has=function(vt){return void 0!==this.map[vt]},Ne.prototype.get=function(vt,mt){var Gt=this.map[vt];return void 0===Gt?mt:Gt},Ne.prototype.set=function(vt,mt){this.map[vt]=mt},Ne.prototype.clear=function(){this.map={}},Ne.prototype.delete=function(vt){delete this.map[vt]},Ne.prototype.size=function(){return Object.keys(this.map).length},Ne}()},5460:()=>{"object"==typeof window&&window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(V=>{Object.prototype.hasOwnProperty.call(V,"append")||Object.defineProperty(V,"append",{configurable:!0,enumerable:!0,writable:!0,value(...G){const B=document.createDocumentFragment();G.forEach(Q=>{const j=Q instanceof Node;B.appendChild(j?Q:document.createTextNode(String(Q)))}),this.appendChild(B)}})})},6855:(Qt,V,G)=>{"use strict";var B={};G.r(B),G.d(B,{GADDI:()=>AL,Stack:()=>jv,breadthFirstSearch:()=>XN,connectedComponent:()=>WS,cosineSimilarity:()=>JS,default:()=>Uq,depthFirstSearch:()=>$S,detectAllCycles:()=>JN,detectAllDirectedCycle:()=>XS,detectAllUndirectedCycle:()=>YS,detectCycle:()=>qS,detectDirectedCycle:()=>DL,dijkstra:()=>$m,findAllPath:()=>nL,findShortestPath:()=>tL,floydWarshall:()=>Ym,getAdjMatrix:()=>$g,getDegree:()=>Wm,getInDegree:()=>KN,getNeighbors:()=>ll,getOutDegree:()=>ZN,iLouvain:()=>sL,kCore:()=>uL,kMeans:()=>cL,labelPropagation:()=>rL,louvain:()=>QS,minimumSpanningTree:()=>dL,nodesCosineSimilarity:()=>fL,pageRank:()=>gL});var Q={};G.r(Q),G.d(Q,{Line:()=>Xg,applyMatrix:()=>zv,compare:()=>Vq,distance:()=>Z1,floydWarshall:()=>Wq,fractionToLine:()=>iM,getAdjMatrix:()=>$q,getBBoxBoundLine:()=>rM,getCircleCenterByPoints:()=>tM,getCircleIntersectByPoint:()=>OL,getDegree:()=>qq,getEllipseIntersectByPoint:()=>PL,getLineIntersect:()=>K1,getPointsCenter:()=>BL,getRectIntersectByPoint:()=>IL,intersectBBox:()=>kL,invertMatrix:()=>NL,isPointInPolygon:()=>Xm,isPointsOverlap:()=>oM,isPolygonsIntersect:()=>RL,itemIntersectByLine:()=>FL,lerp:()=>aM,lerpArray:()=>sM,move:()=>nM,pointLineDistance:()=>Jq,pointLineSquareDist:()=>jL,pointRectSquareDist:()=>zL,rotate:()=>Xq,scale:()=>Yq,scaleMatrix:()=>Hq,squareDist:()=>Q1,translate:()=>LL});var j={};G.r(j),G.d(j,{cloneBesidesImg:()=>rw,getAnimateCfgWithCallback:()=>qm,getBBox:()=>tw,getComboBBox:()=>nw,getLabelPosition:()=>YL,getLetterWidth:()=>XL,getLoopCfgs:()=>$L,getTextSize:()=>qL,plainCombosToTrees:()=>fM,reconstructTree:()=>hM,shouldRefreshEdge:()=>sK,traverseTree:()=>ou,traverseTreeUp:()=>Pf,truncateLabelByLength:()=>KL});var k={};G.r(k),G.d(k,{catmullRomToBezier:()=>dM,fillPath:()=>_K,fillPathByDiff:()=>ak,formatPath:()=>yM,intersection:()=>bK,parsePathArray:()=>ek,parsePathString:()=>Gv,pathToAbsolute:()=>gM,pathToCurve:()=>pM,rectPath:()=>rk});var F={};G.r(F),G.d(F,{easeBack:()=>nR,easeBackIn:()=>XZ,easeBackInOut:()=>nR,easeBackOut:()=>qZ,easeBounce:()=>ay,easeBounceIn:()=>$Z,easeBounceInOut:()=>YZ,easeBounceOut:()=>ay,easeCircle:()=>tR,easeCircleIn:()=>RZ,easeCircleInOut:()=>tR,easeCircleOut:()=>FZ,easeCubic:()=>qk,easeCubicIn:()=>DZ,easeCubicInOut:()=>qk,easeCubicOut:()=>TZ,easeElastic:()=>rR,easeElasticIn:()=>KZ,easeElasticInOut:()=>ZZ,easeElasticOut:()=>rR,easeExp:()=>eR,easeExpIn:()=>LZ,easeExpInOut:()=>eR,easeExpOut:()=>kZ,easeLinear:()=>MZ,easePoly:()=>Kk,easePolyIn:()=>IZ,easePolyInOut:()=>Kk,easePolyOut:()=>OZ,easeQuad:()=>Xk,easeQuadIn:()=>CZ,easeQuadInOut:()=>Xk,easeQuadOut:()=>AZ,easeSin:()=>Jk,easeSinIn:()=>PZ,easeSinInOut:()=>Jk,easeSinOut:()=>NZ});var I={};G.r(I),G.d(I,{calculationItemsBBox:()=>QR,cloneEvent:()=>nJ,formatPadding:()=>YM,isNaN:()=>kf,isViewportChanged:()=>rJ,processParallelEdges:()=>iJ,uniqueId:()=>$M});var x={};G.r(x),G.d(x,{getClosedSpline:()=>nC,getControlPoint:()=>Mw,getSpline:()=>pF,getStarPath:()=>SJ,paddedHull:()=>bF,pathToPoints:()=>tC,pointsToPolygon:()=>_J,roundedHull:()=>rC});var E={};G.r(E),G.d(E,{defaultSubjectColors:()=>WJ});var b={};G.r(b),G.d(b,{isForce:()=>IF});var w={};G.r(w),G.d(w,{Base:()=>Nc,Circle:()=>vee,Ellipse:()=>yee,Image:()=>wee,Line:()=>Eee,Marker:()=>Mee,Path:()=>vC,Polygon:()=>Lee,Polyline:()=>Ree,Rect:()=>zee,Text:()=>Uee});var y={};G.r(y),G.d(y,{Base:()=>Fl,Circle:()=>Kee,Dom:()=>Qee,Ellipse:()=>ete,Image:()=>nte,Line:()=>ite,Marker:()=>ate,Path:()=>ute,Polygon:()=>cte,Polyline:()=>hte,Rect:()=>mte,Text:()=>Ete});var A={};G.r(A),G.d(A,{getColorSetsBySubjectColors:()=>wne,getColorsWithSubjectColor:()=>xC,mixColor:()=>ps});var M={};G.r(M),G.d(M,{arrayToTextureData:()=>Nne,attributesToTextureData:()=>Pne,buildTextureData:()=>Tne,buildTextureDataWithOneEdgeAttr:()=>Ine,buildTextureDataWithTwoEdgeAttr:()=>One,proccessToFunc:()=>Dne,radialLayout:()=>Lne});var S={};G.r(S),G.d(S,{gpuDetector:()=>AB});var P={};G.r(P),G.d(P,{assign:()=>Fd,default:()=>n3,defaultI18n:()=>TC,format:()=>e3,parse:()=>t3,setGlobalDateI18n:()=>$B,setGlobalDateMasks:()=>JB});var U={};G.r(U),G.d(U,{dot:()=>obe,doubleMesh:()=>ube,fixedDot:()=>abe,mesh:()=>sbe});var z={};G.r(z),G.d(z,{flipX:()=>e6,flipXY:()=>n6,flipY:()=>t6,watermark:()=>lbe});var ie={};G.r(ie),G.d(ie,{blur:()=>hbe,brightness:()=>bbe,contrast:()=>wbe,dropShadow:()=>dbe,grayScale:()=>gbe,highlight:()=>fbe,hueRotate:()=>mbe,invert:()=>ybe,outline:()=>cbe,saturate:()=>vbe,sepia:()=>pbe});var ne={};G.r(ne),G.d(ne,{async:()=>f1e,block:()=>n1e,circle:()=>y6,circlePlus:()=>h1e,classic:()=>r1e,cross:()=>l1e,diamond:()=>o1e,ellipse:()=>g1e,path:()=>s1e});var q={};G.r(q),G.d(q,{annotations:()=>Wbe,atConnectionLength:()=>_1e,atConnectionLengthIgnoreGradient:()=>x1e,atConnectionLengthKeepGradient:()=>b6,atConnectionRatio:()=>S1e,atConnectionRatioIgnoreGradient:()=>E1e,atConnectionRatioKeepGradient:()=>w6,connection:()=>w1e,displayEmpty:()=>Ybe,eol:()=>$be,fill:()=>jbe,filter:()=>e1e,html:()=>Jbe,lineHeight:()=>Ube,port:()=>t1e,ref:()=>Ebe,refCx:()=>Dbe,refCy:()=>Tbe,refD:()=>Nbe,refDKeepOffset:()=>Ibe,refDResetOffset:()=>u6,refDx:()=>_be,refDy:()=>Sbe,refHeight:()=>a6,refHeight2:()=>Bbe,refPoints:()=>Lbe,refPointsKeepOffset:()=>Obe,refPointsResetOffset:()=>l6,refR:()=>Pbe,refRCircumscribed:()=>Abe,refRInscribed:()=>s6,refRx:()=>Mbe,refRy:()=>Cbe,refWidth:()=>o6,refWidth2:()=>Fbe,refX:()=>r6,refX2:()=>kbe,refY:()=>i6,refY2:()=>Rbe,resetOffset:()=>Zbe,sourceMarker:()=>v1e,stroke:()=>zbe,style:()=>Qbe,targetMarker:()=>m1e,text:()=>d6,textPath:()=>Hbe,textVerticalAnchor:()=>Vbe,textWrap:()=>Gbe,title:()=>Xbe,vertexMarker:()=>y1e,xAlign:()=>qbe,yAlign:()=>Kbe});var K={};G.r(K),G.d(K,{className:()=>M1e,opacity:()=>C1e,stroke:()=>D1e});var ee={};G.r(ee),G.d(ee,{absolute:()=>T1e,bottom:()=>F1e,ellipse:()=>I1e,ellipseSpread:()=>O1e,left:()=>L1e,line:()=>N1e,right:()=>k1e,top:()=>R1e});var X={};G.r(X),G.d(X,{bottom:()=>V1e,inside:()=>$1e,insideOriented:()=>Y1e,left:()=>z1e,manual:()=>j1e,outside:()=>H1e,outsideOriented:()=>W1e,radial:()=>X1e,radialOriented:()=>q1e,right:()=>G1e,top:()=>U1e});var ae={};G.r(ae),G.d(ae,{noop:()=>Q1e,pinAbsolute:()=>nwe,pinRelative:()=>twe});var re={};G.r(re),G.d(re,{bottom:()=>fwe,bottomLeft:()=>vwe,bottomRight:()=>mwe,center:()=>lwe,left:()=>hwe,midSide:()=>wwe,nodeCenter:()=>bwe,orth:()=>ywe,right:()=>dwe,top:()=>cwe,topLeft:()=>gwe,topRight:()=>pwe});var oe={};G.r(oe),G.d(oe,{closest:()=>_we,length:()=>Ewe,orth:()=>Swe,ratio:()=>xwe});var ve={};G.r(ve),G.d(ve,{anchor:()=>Twe,bbox:()=>F6,boundary:()=>Awe,rect:()=>Cwe});var we={};G.r(we),G.d(we,{er:()=>qwe,loop:()=>Kwe,manhattan:()=>K6,metro:()=>Xwe,normal:()=>Iwe,oneSide:()=>Owe,orth:()=>z6});var _e={};function me(r){return"function"==typeof r}function Ce(r){const t=r(n=>{Error.call(n),n.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}G.r(_e),G.d(_e,{jumpover:()=>oxe,loop:()=>Qwe,normal:()=>Zwe,rounded:()=>Jwe,smooth:()=>exe});const fe=Ce(r=>function(t){r(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((n,i)=>`${i+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function be(r,e){if(r){const t=r.indexOf(e);0<=t&&r.splice(t,1)}}class te{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:n}=this;if(me(n))try{n()}catch(o){e=o instanceof fe?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{Ze(o)}catch(a){e=e??[],a instanceof fe?e=[...e,...a.errors]:e.push(a)}}if(e)throw new fe(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Ze(e);else{if(e instanceof te){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&be(t,e)}remove(e){const{_finalizers:t}=this;t&&be(t,e),e instanceof te&&e._removeParent(this)}}te.EMPTY=(()=>{const r=new te;return r.closed=!0,r})();const de=te.EMPTY;function ke(r){return r instanceof te||r&&"closed"in r&&me(r.remove)&&me(r.add)&&me(r.unsubscribe)}function Ze(r){me(r)?r():r.unsubscribe()}const We={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},bt={setTimeout(r,e,...t){const{delegate:n}=bt;return n?.setTimeout?n.setTimeout(r,e,...t):setTimeout(r,e,...t)},clearTimeout(r){const{delegate:e}=bt;return(e?.clearTimeout||clearTimeout)(r)},delegate:void 0};function Ft(r){bt.setTimeout(()=>{const{onUnhandledError:e}=We;if(!e)throw r;e(r)})}function Pt(){}const Xe=pt("C",void 0,void 0);function pt(r,e,t){return{kind:r,value:e,error:t}}let xt=null;function Fe(r){if(We.useDeprecatedSynchronousErrorHandling){const e=!xt;if(e&&(xt={errorThrown:!1,error:null}),r(),e){const{errorThrown:t,error:n}=xt;if(xt=null,t)throw n}}else r()}class Ut extends te{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ke(e)&&e.add(this)):this.destination=zt}static create(e,t,n){return new Mt(e,t,n)}next(e){this.isStopped?Le(function Ct(r){return pt("N",r,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Le(function yt(r){return pt("E",void 0,r)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Le(Xe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function Te(r,e){return $e.call(r,e)}class tt{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(n){Wt(n)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(n){Wt(n)}else Wt(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Wt(t)}}}class Mt extends Ut{constructor(e,t,n){let i;if(super(),me(e)||!e)i={next:e??void 0,error:t??void 0,complete:n??void 0};else{let o;this&&We.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Te(e.next,o),error:e.error&&Te(e.error,o),complete:e.complete&&Te(e.complete,o)}):i=e}this.destination=new tt(i)}}function Wt(r){We.useDeprecatedSynchronousErrorHandling?function ut(r){We.useDeprecatedSynchronousErrorHandling&&xt&&(xt.errorThrown=!0,xt.error=r)}(r):Ft(r)}function Le(r,e){const{onStoppedNotification:t}=We;t&&bt.setTimeout(()=>t(r,e))}const zt={closed:!0,next:Pt,error:function un(r){throw r},complete:Pt},Xt="function"==typeof Symbol&&Symbol.observable||"@@observable";function Tn(r){return r}function kn(r){return 0===r.length?Tn:1===r.length?r[0]:function(t){return r.reduce((n,i)=>i(n),t)}}let ir=(()=>{class r{constructor(t){t&&(this._subscribe=t)}lift(t){const n=new r;return n.source=this,n.operator=t,n}subscribe(t,n,i){const o=function xr(r){return r&&r instanceof Ut||function Bn(r){return r&&me(r.next)&&me(r.error)&&me(r.complete)}(r)&&ke(r)}(t)?t:new Mt(t,n,i);return Fe(()=>{const{operator:a,source:s}=this;o.add(a?a.call(o,s):s?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(n){t.error(n)}}forEach(t,n){return new(n=cr(n))((i,o)=>{const a=new Mt({next:s=>{try{t(s)}catch(u){o(u),a.unsubscribe()}},error:o,complete:i});this.subscribe(a)})}_subscribe(t){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(t)}[Xt](){return this}pipe(...t){return kn(t)(this)}toPromise(t){return new(t=cr(t))((n,i)=>{let o;this.subscribe(a=>o=a,a=>i(a),()=>n(o))})}}return r.create=e=>new r(e),r})();function cr(r){var e;return null!==(e=r??We.Promise)&&void 0!==e?e:Promise}const jn=Ce(r=>function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Rn=(()=>{class r extends ir{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const n=new er(this,this);return n.operator=t,n}_throwIfClosed(){if(this.closed)throw new jn}next(t){Fe(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const n of this.currentObservers)n.next(t)}})}error(t){Fe(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:n}=this;for(;n.length;)n.shift().error(t)}})}complete(){Fe(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:n,isStopped:i,observers:o}=this;return n||i?de:(this.currentObservers=null,o.push(t),new te(()=>{this.currentObservers=null,be(o,t)}))}_checkFinalizedStatuses(t){const{hasError:n,thrownError:i,isStopped:o}=this;n?t.error(i):o&&t.complete()}asObservable(){const t=new ir;return t.source=this,t}}return r.create=(e,t)=>new er(e,t),r})();class er extends Rn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)}error(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:de}}function Mr(r){return me(r?.lift)}function yr(r){return e=>{if(Mr(e))return e.lift(function(t){try{return r(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function gr(r,e,t,n,i){return new Oi(r,e,t,n,i)}class Oi extends Ut{constructor(e,t,n,i,o,a){super(e),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=t?function(s){try{t(s)}catch(u){e.error(u)}}:super._next,this._error=i?function(s){try{i(s)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(s){e.error(s)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Ir(r,e){return yr((t,n)=>{let i=0;t.subscribe(gr(n,o=>{n.next(r.call(e,o,i++))}))})}var De=G(655);const wi=r=>r&&"number"==typeof r.length&&"function"!=typeof r;function xo(r){return me(r?.then)}function mr(r){return me(r[Xt])}function Wr(r){return Symbol.asyncIterator&&me(r?.[Symbol.asyncIterator])}function Vr(r){return new TypeError(`You provided ${null!==r&&"object"==typeof r?"an invalid object":`'${r}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Y=function Ae(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function W(r){return me(r?.[Y])}function T(r){return(0,De.__asyncGenerator)(this,arguments,function*(){const t=r.getReader();try{for(;;){const{value:n,done:i}=yield(0,De.__await)(t.read());if(i)return yield(0,De.__await)(void 0);yield yield(0,De.__await)(n)}}finally{t.releaseLock()}})}function $(r){return me(r?.getReader)}function ce(r){if(r instanceof ir)return r;if(null!=r){if(mr(r))return function je(r){return new ir(e=>{const t=r[Xt]();if(me(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(r);if(wi(r))return function Ge(r){return new ir(e=>{for(let t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()})}(r);if(xo(r))return function rt(r){return new ir(e=>{r.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ft)})}(r);if(Wr(r))return $t(r);if(W(r))return function it(r){return new ir(e=>{for(const t of r)if(e.next(t),e.closed)return;e.complete()})}(r);if($(r))return function R(r){return $t(T(r))}(r)}throw Vr(r)}function $t(r){return new ir(e=>{(function He(r,e){var t,n,i,o;return(0,De.__awaiter)(this,void 0,void 0,function*(){try{for(t=(0,De.__asyncValues)(r);!(n=yield t.next()).done;)if(e.next(n.value),e.closed)return}catch(a){i={error:a}}finally{try{n&&!n.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})})(r,e).catch(t=>e.error(t))})}function ze(r,e,t,n=0,i=!1){const o=e.schedule(function(){t(),i?r.add(this.schedule(null,n)):this.unsubscribe()},n);if(r.add(o),!i)return o}function gt(r,e,t=1/0){return me(e)?gt((n,i)=>Ir((o,a)=>e(n,o,i,a))(ce(r(n,i))),t):("number"==typeof e&&(t=e),yr((n,i)=>function Je(r,e,t,n,i,o,a,s){const u=[];let l=0,c=0,f=!1;const h=()=>{f&&!u.length&&!l&&e.complete()},d=m=>l<n?g(m):u.push(m),g=m=>{o&&e.next(m),l++;let _=!1;ce(t(m,c++)).subscribe(gr(e,D=>{i?.(D),o?d(D):e.next(D)},()=>{_=!0},void 0,()=>{if(_)try{for(l--;u.length&&l<n;){const D=u.shift();a?ze(e,a,()=>g(D)):g(D)}h()}catch(D){e.error(D)}}))};return r.subscribe(gr(e,d,()=>{f=!0,h()})),()=>{s?.()}}(n,i,r,t)))}function an(r=1/0){return gt(Tn,r)}const Ke=new ir(r=>r.complete());function Wn(r){return r[r.length-1]}function $n(r){return function zn(r){return r&&me(r.schedule)}(Wn(r))?r.pop():void 0}function Xr(r,e=0){return yr((t,n)=>{t.subscribe(gr(n,i=>ze(n,r,()=>n.next(i),e),()=>ze(n,r,()=>n.complete(),e),i=>ze(n,r,()=>n.error(i),e)))})}function Di(r,e=0){return yr((t,n)=>{n.add(r.schedule(()=>t.subscribe(n),e))})}function Gr(r,e){if(!r)throw new Error("Iterable cannot be null");return new ir(t=>{ze(t,e,()=>{const n=r[Symbol.asyncIterator]();ze(t,e,()=>{n.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Oe(r,e){return e?function Et(r,e){if(null!=r){if(mr(r))return function Kt(r,e){return ce(r).pipe(Di(e),Xr(e))}(r,e);if(wi(r))return function hr(r,e){return new ir(t=>{let n=0;return e.schedule(function(){n===r.length?t.complete():(t.next(r[n++]),t.closed||this.schedule())})})}(r,e);if(xo(r))return function Gn(r,e){return ce(r).pipe(Di(e),Xr(e))}(r,e);if(Wr(r))return Gr(r,e);if(W(r))return function Un(r,e){return new ir(t=>{let n;return ze(t,e,()=>{n=r[Y](),ze(t,e,()=>{let i,o;try{({value:i,done:o}=n.next())}catch(a){return void t.error(a)}o?t.complete():t.next(i)},0,!0)}),()=>me(n?.return)&&n.return()})}(r,e);if($(r))return function br(r,e){return Gr(T(r),e)}(r,e)}throw Vr(r)}(r,e):ce(r)}function At(r,e,...t){if(!0===e)return void r();if(!1===e)return;const n=new Mt({next:()=>{n.unsubscribe(),r()}});return e(...t).subscribe(n)}function It(r){for(let e in r)if(r[e]===It)return e;throw Error("Could not find renamed property on target object.")}function fn(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(fn).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const e=r.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Fn(r,e){return null==r||""===r?null===e?"":e:null==e||""===e?r:r+" "+e}const Or=It({__forward_ref__:It});function Dr(r){return r.__forward_ref__=Dr,r.toString=function(){return fn(this())},r}function Qn(r){return function xi(r){return"function"==typeof r&&r.hasOwnProperty(Or)&&r.__forward_ref__===Dr}(r)?r():r}class dr extends Error{constructor(e,t){super(function Eo(r,e){return`NG0${Math.abs(r)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function Br(r){return"string"==typeof r?r:null==r?"":String(r)}function Du(r,e){throw new dr(-201,!1)}function ua(r,e){null==r&&function Ii(r,e,t,n){throw new Error(`ASSERTION ERROR: ${r}`+(null==n?"":` [Expected=> ${t} ${n} ${e} <=Actual]`))}(e,r,null,"!=")}function ci(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function ys(r){return{providers:r.providers||[],imports:r.imports||[]}}function Hu(r){return ns(r,Pu)||ns(r,Ql)}function ns(r,e){return r.hasOwnProperty(e)?r[e]:null}function Ou(r){return r&&(r.hasOwnProperty(pl)||r.hasOwnProperty(Jl))?r[pl]:null}const Pu=It({\u0275prov:It}),pl=It({\u0275inj:It}),Ql=It({ngInjectableDef:It}),Jl=It({ngInjectorDef:It});var Qr=(()=>((Qr=Qr||{})[Qr.Default=0]="Default",Qr[Qr.Host=1]="Host",Qr[Qr.Self=2]="Self",Qr[Qr.SkipSelf=4]="SkipSelf",Qr[Qr.Optional=8]="Optional",Qr))();let uo;function Ha(r){const e=uo;return uo=r,e}function ws(r,e,t){const n=Hu(r);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:t&Qr.Optional?null:void 0!==e?e:void Du(fn(r))}function xs(r){return{toString:r}.toString()}var qo=(()=>((qo=qo||{})[qo.OnPush=0]="OnPush",qo[qo.Default=1]="Default",qo))(),Wa=(()=>{return(r=Wa||(Wa={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",Wa;var r})();const Gi=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Es={},Ui=[],gu=It({\u0275cmp:It}),ec=It({\u0275dir:It}),pu=It({\u0275pipe:It}),tc=It({\u0275mod:It}),rs=It({\u0275fac:It}),Zs=It({__NG_ELEMENT_ID__:It});let Co=0;function _s(r){return xs(()=>{const t=!0===r.standalone,n={},i={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===qo.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&r.dependencies||null,getStandaloneInjector:null,selectors:r.selectors||Ui,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||Wa.Emulated,id:"c"+Co++,styles:r.styles||Ui,_:null,setInput:null,schemas:r.schemas||null,tView:null},o=r.dependencies,a=r.features;return i.inputs=$u(r.inputs,n),i.outputs=$u(r.outputs),a&&a.forEach(s=>s(i)),i.directiveDefs=o?()=>("function"==typeof o?o():o).map(Da).filter(vl):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(Ko).filter(vl):null,i})}function Da(r){return Li(r)||la(r)}function vl(r){return null!==r}function is(r){return xs(()=>({type:r.type,bootstrap:r.bootstrap||Ui,declarations:r.declarations||Ui,imports:r.imports||Ui,exports:r.exports||Ui,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function $u(r,e){if(null==r)return Es;const t={};for(const n in r)if(r.hasOwnProperty(n)){let i=r[n],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),t[i]=n,e&&(e[i]=o)}return t}const Fo=_s;function Li(r){return r[gu]||null}function la(r){return r[ec]||null}function Ko(r){return r[pu]||null}function Ne(r,e){const t=r[tc]||null;if(!t&&!0===e)throw new Error(`Type ${fn(r)} does not have '\u0275mod' property.`);return t}const N=10;function Me(r){return Array.isArray(r)&&"object"==typeof r[1]}function Pe(r){return Array.isArray(r)&&!0===r[1]}function Ye(r){return 0!=(8&r.flags)}function qe(r){return 2==(2&r.flags)}function ct(r){return 1==(1&r.flags)}function dt(r){return null!==r.template}function Nt(r){return 0!=(256&r[2])}function Cs(r,e){return r.hasOwnProperty(rs)?r[rs]:null}class qu{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function ma(){return nc}function nc(r){return r.type.prototype.ngOnChanges&&(r.setInput=B0),_p}function _p(){const r=Mp(this),e=r?.current;if(e){const t=r.previous;if(t===Es)r.previous=e;else for(let n in e)t[n]=e[n];r.current=null,this.ngOnChanges(e)}}function B0(r,e,t,n){const i=Mp(r)||function j0(r,e){return r[Sp]=e}(r,{previous:Es,current:null}),o=i.current||(i.current={}),a=i.previous,s=this.declaredInputs[t],u=a[s];o[s]=new qu(u&&u.currentValue,e,a===Es),r[n]=e}ma.ngInherit=!0;const Sp="__ngSimpleChanges__";function Mp(r){return r[Sp]||null}function ur(r){for(;Array.isArray(r);)r=r[0];return r}function Zc(r,e){return ur(e[r])}function ss(r,e){return ur(e[r.index])}function nd(r,e){return r.data[e]}function us(r,e){const t=e[r];return Me(t)?t:t[0]}function nh(r){return 64==(64&r[2])}function Zu(r,e){return null==e?null:r[e]}function og(r){r[18]=0}function Jo(r,e){r[5]+=e;let t=r,n=r[3];for(;null!==n&&(1===e&&1===t[5]||-1===e&&0===t[5]);)n[5]+=e,t=n,n=n[3]}const hi={lFrame:zp(null),bindingsEnabled:!0};function ug(){return hi.bindingsEnabled}function nr(){return hi.lFrame.lView}function to(){return hi.lFrame.tView}function Ma(){let r=Js();for(;null!==r&&64===r.type;)r=r.parent;return r}function Js(){return hi.lFrame.currentTNode}function ls(r,e){const t=hi.lFrame;t.currentTNode=r,t.isParent=e}function id(){return hi.lFrame.isParent}function ic(){return hi.lFrame.bindingIndex++}function U0(r,e){const t=hi.lFrame;t.bindingIndex=t.bindingRootIndex=r,yl(e)}function yl(r){hi.lFrame.currentDirectiveIndex=r}function Fp(){return hi.lFrame.currentQueryIndex}function ef(r){hi.lFrame.currentQueryIndex=r}function hg(r){const e=r[1];return 2===e.type?e.declTNode:1===e.type?r[6]:null}function Bp(r,e,t){if(t&Qr.SkipSelf){let i=e,o=r;for(;!(i=i.parent,null!==i||t&Qr.Host||(i=hg(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;e=i,r=o}const n=hi.lFrame=jp();return n.currentTNode=e,n.lView=r,!0}function tf(r){const e=jp(),t=r[1];hi.lFrame=e,e.currentTNode=t.firstChild,e.lView=r,e.tView=t,e.contextLView=r,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function jp(){const r=hi.lFrame,e=null===r?null:r.child;return null===e?zp(r):e}function zp(r){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=e),e}function dg(){const r=hi.lFrame;return hi.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const Gp=dg;function gg(){const r=dg();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function Ta(){return hi.lFrame.selectedIndex}function bl(r){hi.lFrame.selectedIndex=r}function sf(r,e){for(let t=e.directiveStart,n=e.directiveEnd;t<n;t++){const o=r.data[t].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:s,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:c}=o;a&&(r.contentHooks||(r.contentHooks=[])).push(-t,a),s&&((r.contentHooks||(r.contentHooks=[])).push(t,s),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(t,s)),u&&(r.viewHooks||(r.viewHooks=[])).push(-t,u),l&&((r.viewHooks||(r.viewHooks=[])).push(t,l),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(t,l)),null!=c&&(r.destroyHooks||(r.destroyHooks=[])).push(t,c)}}function uf(r,e,t){ah(r,e,3,t)}function lf(r,e,t,n){(3&r[2])===t&&ah(r,e,t,n)}function oh(r,e){let t=r[2];(3&t)===e&&(t&=2047,t+=1,r[2]=t)}function ah(r,e,t,n){const o=n??-1,a=e.length-1;let s=0;for(let u=void 0!==n?65535&r[18]:0;u<a;u++)if("number"==typeof e[u+1]){if(s=e[u],null!=n&&s>=n)break}else e[u]<0&&(r[18]+=65536),(s<o||-1==o)&&(Hp(r,t,e,u),r[18]=(4294901760&r[18])+u+2),u++}function Hp(r,e,t,n){const i=t[n]<0,o=t[n+1],s=r[i?-t[n]:t[n]];if(i){if(r[2]>>11<r[18]>>16&&(3&r[2])===e){r[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}class cf{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function ff(r,e,t){let n=0;for(;n<t.length;){const i=t[n];if("number"==typeof i){if(0!==i)break;n++;const o=t[n++],a=t[n++],s=t[n++];r.setAttribute(e,a,s,o)}else{const o=i,a=t[++n];mg(o)?r.setProperty(e,o,a):r.setAttribute(e,o,a),n++}}return n}function Rt(r){return 3===r||4===r||6===r}function mg(r){return 64===r.charCodeAt(0)}function el(r,e){if(null!==e&&0!==e.length)if(null===r||0===r.length)r=e.slice();else{let t=-1;for(let n=0;n<e.length;n++){const i=e[n];"number"==typeof i?t=i:0===t||uh(r,t,i,null,-1===t||2===t?e[++n]:null)}}return r}function uh(r,e,t,n,i){let o=0,a=r.length;if(-1===e)a=-1;else for(;o<r.length;){const s=r[o++];if("number"==typeof s){if(s===e){a=-1;break}if(s>e){a=o-1;break}}}for(;o<r.length;){const s=r[o];if("number"==typeof s)break;if(s===t){if(null===n)return void(null!==i&&(r[o+1]=i));if(n===r[o+1])return void(r[o+2]=i)}o++,null!==n&&o++,null!==i&&o++}-1!==a&&(r.splice(a,0,e),o=a+1),r.splice(o++,0,t),null!==n&&r.splice(o++,0,n),null!==i&&r.splice(o++,0,i)}function yg(r){return-1!==r}function wl(r){return 32767&r}function ac(r,e){let t=function qp(r){return r>>16}(r),n=e;for(;t>0;)n=n[15],t--;return n}let sc=!0;function uc(r){const e=sc;return sc=r,e}let hf=0;const tu={};function As(r,e){const t=tl(r,e);if(-1!==t)return t;const n=e[1];n.firstCreatePass&&(r.injectorIndex=e.length,xl(n.data,r),xl(e,null),xl(n.blueprint,null));const i=yu(r,e),o=r.injectorIndex;if(yg(i)){const a=wl(i),s=ac(i,e),u=s[1].data;for(let l=0;l<8;l++)e[o+l]=s[a+l]|u[a+l]}return e[o+8]=i,o}function xl(r,e){r.push(0,0,0,0,0,0,0,0,e)}function tl(r,e){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===e[r.injectorIndex+8]?-1:r.injectorIndex}function yu(r,e){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let t=0,n=null,i=e;for(;null!==i;){if(n=Sl(i),null===n)return-1;if(t++,i=i[15],-1!==n.injectorIndex)return n.injectorIndex|t<<16}return-1}function nl(r,e,t){!function ch(r,e,t){let n;"string"==typeof t?n=t.charCodeAt(0)||0:t.hasOwnProperty(Zs)&&(n=t[Zs]),null==n&&(n=t[Zs]=hf++);const i=255&n;e.data[r+(i>>5)]|=1<<i}(r,e,t)}function El(r,e,t){if(t&Qr.Optional||void 0!==r)return r;Du()}function _l(r,e,t,n){if(t&Qr.Optional&&void 0===n&&(n=null),0==(t&(Qr.Self|Qr.Host))){const i=r[9],o=Ha(void 0);try{return i?i.get(e,n,t&Qr.Optional):ws(e,n,t&Qr.Optional)}finally{Ha(o)}}return El(n,0,t)}function fh(r,e,t,n=Qr.Default,i){if(null!==r){if(1024&e[2]){const a=function Zp(r,e,t,n,i){let o=r,a=e;for(;null!==o&&null!==a&&1024&a[2]&&!(256&a[2]);){const s=hh(o,a,t,n|Qr.Self,tu);if(s!==tu)return s;let u=o.parent;if(!u){const l=a[21];if(l){const c=l.get(t,tu,n);if(c!==tu)return c}u=Sl(a),a=a[15]}o=u}return i}(r,e,t,n,tu);if(a!==tu)return a}const o=hh(r,e,t,n,tu);if(o!==tu)return o}return _l(e,t,n,i)}function hh(r,e,t,n,i){const o=function gf(r){if("string"==typeof r)return r.charCodeAt(0)||0;const e=r.hasOwnProperty(Zs)?r[Zs]:void 0;return"number"==typeof e?e>=0?255&e:ud:e}(t);if("function"==typeof o){if(!Bp(e,r,n))return n&Qr.Host?El(i,0,n):_l(e,t,n,i);try{const a=o(n);if(null!=a||n&Qr.Optional)return a;Du()}finally{Gp()}}else if("number"==typeof o){let a=null,s=tl(r,e),u=-1,l=n&Qr.Host?e[16][6]:null;for((-1===s||n&Qr.SkipSelf)&&(u=-1===s?yu(r,e):e[s+8],-1!==u&&sd(n,!1)?(a=e[1],s=wl(u),e=ac(u,e)):s=-1);-1!==s;){const c=e[1];if(Bs(o,s,c.data)){const f=dh(s,e,t,a,n,l);if(f!==tu)return f}u=e[s+8],-1!==u&&sd(n,e[1].data[s+8]===l)&&Bs(o,s,e)?(a=c,s=wl(u),e=ac(u,e)):s=-1}}return i}function dh(r,e,t,n,i,o){const a=e[1],s=a.data[r+8],c=df(s,a,t,null==n?qe(s)&&sc:n!=a&&0!=(3&s.type),i&Qr.Host&&o===s);return null!==c?cc(e,a,c,s):tu}function df(r,e,t,n,i){const o=r.providerIndexes,a=e.data,s=1048575&o,u=r.directiveStart,c=o>>20,h=i?s+c:r.directiveEnd;for(let d=n?s:s+c;d<h;d++){const g=a[d];if(d<u&&t===g||d>=u&&g.type===t)return d}if(i){const d=a[u];if(d&&dt(d)&&d.type===t)return u}return null}function cc(r,e,t,n){let i=r[t];const o=e.data;if(function Wp(r){return r instanceof cf}(i)){const a=i;a.resolving&&function Ea(r,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${r}`:"";throw new dr(-200,`Circular dependency in DI detected for ${r}${t}`)}(function Ni(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():Br(r)}(o[t]));const s=uc(a.canSeeViewProviders);a.resolving=!0;const u=a.injectImpl?Ha(a.injectImpl):null;Bp(r,n,Qr.Default);try{i=r[t]=a.factory(void 0,o,r,n),e.firstCreatePass&&t>=n.directiveStart&&function vg(r,e,t){const{ngOnChanges:n,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(n){const a=nc(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(r,a),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(r,a)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-r,i),o&&((t.preOrderHooks||(t.preOrderHooks=[])).push(r,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(r,o))}(t,o[t],e)}finally{null!==u&&Ha(u),uc(s),a.resolving=!1,Gp()}}return i}function Bs(r,e,t){return!!(t[e+(r>>5)]&1<<r)}function sd(r,e){return!(r&Qr.Self||r&Qr.Host&&e)}class fc{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,n){return fh(this._tNode,this._lView,e,n,t)}}function ud(){return new fc(Ma(),nr())}function Sl(r){const e=r[1],t=e.type;return 2===t?e.declTNode:1===t?r[6]:null}function pf(r){return function lc(r,e){if("class"===e)return r.classes;if("style"===e)return r.styles;const t=r.attrs;if(t){const n=t.length;let i=0;for(;i<n;){const o=t[i];if(Rt(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<n&&"string"==typeof t[i];)i++;else{if(o===e)return t[i+1];i+=2}}}return null}(Ma(),r)}const vf="__parameters__";function gc(r,e,t){return xs(()=>{const n=function xg(r){return function(...t){if(r){const n=r(...t);for(const i in n)this[i]=n[i]}}}(e);function i(...o){if(this instanceof i)return n.apply(this,o),this;const a=new i(...o);return s.annotation=a,s;function s(u,l,c){const f=u.hasOwnProperty(vf)?u[vf]:Object.defineProperty(u,vf,{value:[]})[vf];for(;f.length<=c;)f.push(null);return(f[c]=f[c]||[]).push(a),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=r,i.annotationCls=i,i})}class bi{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=ci({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function $a(r,e){void 0===e&&(e=r);for(let t=0;t<r.length;t++){let n=r[t];Array.isArray(n)?(e===r&&(e=r.slice(0,t)),$a(n,e)):e!==r&&e.push(n)}return e}function js(r,e){r.forEach(t=>Array.isArray(t)?js(t,e):e(t))}function mf(r,e,t){e>=r.length?r.push(t):r.splice(e,0,t)}function rl(r,e){return e>=r.length-1?r.pop():r.splice(e,1)[0]}function zs(r,e,t){let n=bf(r,e);return n>=0?r[1|n]=t:(n=~n,function ph(r,e,t,n){let i=r.length;if(i==e)r.push(t,n);else if(1===i)r.push(n,r[0]),r[0]=t;else{for(i--,r.push(r[i-1],r[i]);i>e;)r[i]=r[i-2],i--;r[e]=t,r[e+1]=n}}(r,n,e,t)),n}function Cg(r,e){const t=bf(r,e);if(t>=0)return r[1|t]}function bf(r,e){return function Ag(r,e,t){let n=0,i=r.length>>t;for(;i!==n;){const o=n+(i-n>>1),a=r[o<<t];if(e===a)return o<<t;a>e?i=o:n=o+1}return~(i<<t)}(r,e,1)}const wf={},mh="__NG_DI_FLAG__",wc="ngTempTokenPath",fs=/\n/gm,Ho="__source";let ya;function al(r){const e=ya;return ya=r,e}function Q0(r,e=Qr.Default){if(void 0===ya)throw new dr(-203,!1);return null===ya?ws(r,void 0,e):ya.get(r,e&Qr.Optional?null:void 0,e)}function si(r,e=Qr.Default){return(function Hc(){return uo}()||Q0)(Qn(r),e)}function fa(r,e=Qr.Default){return"number"!=typeof e&&(e=0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)),si(r,e)}function hd(r){const e=[];for(let t=0;t<r.length;t++){const n=Qn(r[t]);if(Array.isArray(n)){if(0===n.length)throw new dr(900,!1);let i,o=Qr.Default;for(let a=0;a<n.length;a++){const s=n[a],u=J0(s);"number"==typeof u?-1===u?i=s.token:o|=u:i=s}e.push(si(i,o))}else e.push(si(n))}return e}function yh(r,e){return r[mh]=e,r.prototype[mh]=e,r}function J0(r){return r[mh]}const xc=yh(gc("Optional"),8),xf=yh(gc("SkipSelf"),4);var Lr=(()=>((Lr=Lr||{})[Lr.Important=1]="Important",Lr[Lr.DashCase=2]="DashCase",Lr))();const Mi=new Map;let Lo=0;const _i="__ngContext__";function ri(r,e){Me(e)?(r[_i]=e[20],function ba(r){Mi.set(r[20],r)}(e)):r[_i]=e}function sn(r,e){return undefined(r,e)}function ft(r){const e=r[3];return Pe(e)?e[3]:e}function en(r){return In(r[13])}function ln(r){return In(r[4])}function In(r){for(;null!==r&&!Pe(r);)r=r[4];return r}function _n(r,e,t,n,i){if(null!=n){let o,a=!1;Pe(n)?o=n:Me(n)&&(a=!0,n=n[0]);const s=ur(n);0===r&&null!==t?null==i?fD(e,t,s):Tg(e,t,s,i||null,!0):1===r&&null!==t?Tg(e,t,s,i||null,!0):2===r?function rE(r,e,t){const n=pb(r,e);n&&function xz(r,e,t,n){r.removeChild(e,t,n)}(r,n,e,t)}(e,s,a):3===r&&e.destroyNode(s),null!=o&&function Sz(r,e,t,n,i){const o=t[7];o!==ur(t)&&_n(e,r,n,o,i);for(let s=N;s<t.length;s++){const u=t[s];im(u[1],u,r,e,n,o)}}(e,r,o,t,i)}}function Ar(r,e,t){return r.createElement(e,t)}function bu(r,e){const t=r[9],n=t.indexOf(e),i=e[3];512&e[2]&&(e[2]&=-513,Jo(i,-1)),t.splice(n,1)}function av(r,e){if(r.length<=N)return;const t=N+e,n=r[t];if(n){const i=n[17];null!==i&&i!==r&&bu(i,n),e>0&&(r[t-1][4]=n[4]);const o=rl(r,N+e);!function $r(r,e){im(r,e,e[11],2,null,null),e[0]=null,e[6]=null}(n[1],n);const a=o[19];null!==a&&a.detachView(o[1]),n[3]=null,n[4]=null,n[2]&=-65}return n}function Bu(r,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&im(r,e,t,3,null,null),function ta(r){let e=r[13];if(!e)return sv(r[1],r);for(;e;){let t=null;if(Me(e))t=e[13];else{const n=e[N];n&&(t=n)}if(!t){for(;e&&!e[4]&&e!==r;)Me(e)&&sv(e[1],e),e=e[3];null===e&&(e=r),Me(e)&&sv(e[1],e),t=e&&e[4]}e=t}}(e)}}function sv(r,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function wz(r,e){let t;if(null!=r&&null!=(t=r.destroyHooks))for(let n=0;n<t.length;n+=2){const i=e[t[n]];if(!(i instanceof cf)){const o=t[n+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){const s=i[o[a]],u=o[a+1];try{u.call(s)}finally{}}else try{o.call(i)}finally{}}}}(r,e),function bz(r,e){const t=r.cleanup,n=e[7];let i=-1;if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const a=t[o+1],s="function"==typeof a?a(e):ur(e[a]),u=n[i=t[o+2]],l=t[o+3];"boolean"==typeof l?s.removeEventListener(t[o],u,l):l>=0?n[i=l]():n[i=-l].unsubscribe(),o+=2}else{const a=n[i=t[o+1]];t[o].call(a)}if(null!==n){for(let o=i+1;o<n.length;o++)(0,n[o])();e[7]=null}}(r,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&Pe(e[3])){t!==e[3]&&bu(t,e);const n=e[19];null!==n&&n.detachView(r)}!function ha(r){Mi.delete(r[20])}(e)}}function lD(r,e,t){return function cD(r,e,t){let n=e;for(;null!==n&&40&n.type;)n=(e=n).parent;if(null===n)return t[0];if(2&n.flags){const i=r.data[n.directiveStart].encapsulation;if(i===Wa.None||i===Wa.Emulated)return null}return ss(n,t)}(r,e.parent,t)}function Tg(r,e,t,n,i){r.insertBefore(e,t,n,i)}function fD(r,e,t){r.appendChild(e,t)}function hD(r,e,t,n,i){null!==n?Tg(r,e,t,n,i):fD(r,e,t)}function pb(r,e){return r.parentNode(e)}let sE,pD=function gD(r,e,t){return 40&r.type?ss(r,t):null};function vb(r,e,t,n){const i=lD(r,n,e),o=e[11],s=function dD(r,e,t){return pD(r,e,t)}(n.parent||e[6],n,e);if(null!=i)if(Array.isArray(t))for(let u=0;u<t.length;u++)hD(o,i,t[u],s,!1);else hD(o,i,t,s,!1)}function mb(r,e){if(null!==e){const t=e.type;if(3&t)return ss(e,r);if(4&t)return nE(-1,r[e.index]);if(8&t){const n=e.child;if(null!==n)return mb(r,n);{const i=r[e.index];return Pe(i)?nE(-1,i):ur(i)}}if(32&t)return sn(e,r)()||ur(r[e.index]);{const n=mD(r,e);return null!==n?Array.isArray(n)?n[0]:mb(ft(r[16]),n):mb(r,e.next)}}return null}function mD(r,e){return null!==e?r[16][6].projection[e.projection]:null}function nE(r,e){const t=N+r+1;if(t<e.length){const n=e[t],i=n[1].firstChild;if(null!==i)return mb(n,i)}return e[7]}function iE(r,e,t,n,i,o,a){for(;null!=t;){const s=n[t.index],u=t.type;if(a&&0===e&&(s&&ri(ur(s),n),t.flags|=4),64!=(64&t.flags))if(8&u)iE(r,e,t.child,n,i,o,!1),_n(e,r,i,s,o);else if(32&u){const l=sn(t,n);let c;for(;c=l();)_n(e,r,i,c,o);_n(e,r,i,s,o)}else 16&u?yD(r,e,n,t,i,o):_n(e,r,i,s,o);t=a?t.projectionNext:t.next}}function im(r,e,t,n,i,o){iE(t,n,r.firstChild,e,i,o,!1)}function yD(r,e,t,n,i,o){const a=t[16],u=a[6].projection[n.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++)_n(e,r,i,u[l],o);else iE(r,e,u,a[3],i,o,!0)}function bD(r,e,t){r.setAttribute(e,"style",t)}function oE(r,e,t){""===t?r.removeAttribute(e,"class"):r.setAttribute(e,"class",t)}class SD{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function gd(r){return r instanceof SD?r.changingThisBreaksApplicationSecurity:r}const jz=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Ya=(()=>((Ya=Ya||{})[Ya.NONE=0]="NONE",Ya[Ya.HTML=1]="HTML",Ya[Ya.STYLE=2]="STYLE",Ya[Ya.SCRIPT=3]="SCRIPT",Ya[Ya.URL=4]="URL",Ya[Ya.RESOURCE_URL=5]="RESOURCE_URL",Ya))();function dE(r){const e=function sm(){const r=nr();return r&&r[12]}();return e?e.sanitize(Ya.URL,r)||"":function om(r,e){const t=function kz(r){return r instanceof SD&&r.getTypeName()||null}(r);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}(r,"URL")?gd(r):function lE(r){return(r=String(r)).match(jz)?r:"unsafe:"+r}(Br(r))}const gE=new bi("ENVIRONMENT_INITIALIZER"),PD=new bi("INJECTOR",-1),ND=new bi("INJECTOR_DEF_TYPES");class LD{get(e,t=wf){if(t===wf){const n=new Error(`NullInjectorError: No provider for ${fn(e)}!`);throw n.name="NullInjectorError",n}return t}}function Jz(...r){return{\u0275providers:kD(0,r)}}function kD(r,...e){const t=[],n=new Set;let i;return js(e,o=>{const a=o;pE(a,t,[],n)&&(i||(i=[]),i.push(a))}),void 0!==i&&RD(i,t),t}function RD(r,e){for(let t=0;t<r.length;t++){const{providers:i}=r[t];js(i,o=>{e.push(o)})}}function pE(r,e,t,n){if(!(r=Qn(r)))return!1;let i=null,o=Ou(r);const a=!o&&Li(r);if(o||a){if(a&&!a.standalone)return!1;i=r}else{const u=r.ngModule;if(o=Ou(u),!o)return!1;i=u}const s=n.has(i);if(a){if(s)return!1;if(n.add(i),a.dependencies){const u="function"==typeof a.dependencies?a.dependencies():a.dependencies;for(const l of u)pE(l,e,t,n)}}else{if(!o)return!1;{if(null!=o.imports&&!s){let l;n.add(i);try{js(o.imports,c=>{pE(c,e,t,n)&&(l||(l=[]),l.push(c))})}finally{}void 0!==l&&RD(l,e)}if(!s){const l=Cs(i)||(()=>new i);e.push({provide:i,useFactory:l,deps:Ui},{provide:ND,useValue:i,multi:!0},{provide:gE,useValue:()=>si(i),multi:!0})}const u=o.providers;null==u||s||js(u,c=>{e.push(c)})}}return i!==r&&void 0!==r.providers}const eG=It({provide:String,useValue:It});function vE(r){return null!==r&&"object"==typeof r&&eG in r}function Og(r){return"function"==typeof r}const mE=new bi("Set Injector scope."),xb={},nG={};let yE;function Eb(){return void 0===yE&&(yE=new LD),yE}class pd{}class jD extends pd{constructor(e,t,n,i){super(),this.parent=t,this.source=n,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,wE(e,a=>this.processProvider(a)),this.records.set(PD,uv(void 0,this)),i.has("environment")&&this.records.set(pd,uv(void 0,this));const o=this.records.get(mE);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(ND.multi,Ui,Qr.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=al(this),n=Ha(void 0);try{return e()}finally{al(t),Ha(n)}}get(e,t=wf,n=Qr.Default){this.assertNotDestroyed();const i=al(this),o=Ha(void 0);try{if(!(n&Qr.SkipSelf)){let s=this.records.get(e);if(void 0===s){const u=function sG(r){return"function"==typeof r||"object"==typeof r&&r instanceof bi}(e)&&Hu(e);s=u&&this.injectableDefInScope(u)?uv(bE(e),xb):null,this.records.set(e,s)}if(null!=s)return this.hydrate(e,s)}return(n&Qr.Self?Eb():this.parent).get(e,t=n&Qr.Optional&&t===wf?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[wc]=a[wc]||[]).unshift(fn(e)),i)throw a;return function em(r,e,t,n){const i=r[wc];throw e[Ho]&&i.unshift(e[Ho]),r.message=function tm(r,e,t,n=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.slice(2):r;let i=fn(e);if(Array.isArray(e))i=e.map(fn).join(" -> ");else if("object"==typeof e){let o=[];for(let a in e)if(e.hasOwnProperty(a)){let s=e[a];o.push(a+":"+("string"==typeof s?JSON.stringify(s):fn(s)))}i=`{${o.join(", ")}}`}return`${t}${n?"("+n+")":""}[${i}]: ${r.replace(fs,"\n  ")}`}("\n"+r.message,i,t,n),r.ngTokenPath=i,r[wc]=null,r}(a,e,"R3InjectorError",this.source)}throw a}finally{Ha(o),al(i)}}resolveInjectorInitializers(){const e=al(this),t=Ha(void 0);try{const n=this.get(gE.multi,Ui,Qr.Self);for(const i of n)i()}finally{al(e),Ha(t)}}toString(){const e=[],t=this.records;for(const n of t.keys())e.push(fn(n));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new dr(205,!1)}processProvider(e){let t=Og(e=Qn(e))?e:Qn(e&&e.provide);const n=function iG(r){return vE(r)?uv(void 0,r.useValue):uv(function zD(r,e,t){let n;if(Og(r)){const i=Qn(r);return Cs(i)||bE(i)}if(vE(r))n=()=>Qn(r.useValue);else if(function BD(r){return!(!r||!r.useFactory)}(r))n=()=>r.useFactory(...hd(r.deps||[]));else if(function FD(r){return!(!r||!r.useExisting)}(r))n=()=>si(Qn(r.useExisting));else{const i=Qn(r&&(r.useClass||r.provide));if(!function oG(r){return!!r.deps}(r))return Cs(i)||bE(i);n=()=>new i(...hd(r.deps))}return n}(r),xb)}(e);if(Og(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=uv(void 0,xb,!0),i.factory=()=>hd(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,n)}hydrate(e,t){return t.value===xb&&(t.value=nG,t.value=t.factory()),"object"==typeof t.value&&t.value&&function aG(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Qn(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function bE(r){const e=Hu(r),t=null!==e?e.factory:Cs(r);if(null!==t)return t;if(r instanceof bi)throw new dr(204,!1);if(r instanceof Function)return function rG(r){const e=r.length;if(e>0)throw function il(r,e){const t=[];for(let n=0;n<r;n++)t.push(e);return t}(e,"?"),new dr(204,!1);const t=function bs(r){const e=r&&(r[Pu]||r[Ql]);if(e){const t=function Iu(r){if(r.hasOwnProperty("name"))return r.name;const e=(""+r).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(r);return null!==t?()=>t.factory(r):()=>new r}(r);throw new dr(204,!1)}function uv(r,e,t=!1){return{factory:r,value:e,multi:t?[]:void 0}}function uG(r){return!!r.\u0275providers}function wE(r,e){for(const t of r)Array.isArray(t)?wE(t,e):uG(t)?wE(t.\u0275providers,e):e(t)}class GD{}class fG{resolveComponentFactory(e){throw function cG(r){const e=Error(`No component factory found for ${fn(r)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=r,e}(e)}}let um=(()=>{class r{}return r.NULL=new fG,r})();function hG(){return lv(Ma(),nr())}function lv(r,e){return new vd(ss(r,e))}let vd=(()=>{class r{constructor(t){this.nativeElement=t}}return r.__NG_ELEMENT_ID__=hG,r})();function dG(r){return r instanceof vd?r.nativeElement:r}class VD{}let _b=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>function gG(){const r=nr(),t=us(Ma().index,r);return(Me(t)?t:r)[11]}(),r})(),pG=(()=>{class r{}return r.\u0275prov=ci({token:r,providedIn:"root",factory:()=>null}),r})();class Sb{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const vG=new Sb("14.2.12"),xE={};function _E(r){return r.ngOriginalError}class cv{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&_E(e);for(;t&&_E(t);)t=_E(t);return t||null}}function Eh(r){return r instanceof Function?r():r}function WD(r,e,t){let n=r.length;for(;;){const i=r.indexOf(e,t);if(-1===i)return i;if(0===i||r.charCodeAt(i-1)<=32){const o=e.length;if(i+o===n||r.charCodeAt(i+o)<=32)return i}t=i+1}}const $D="ng-template";function AG(r,e,t){let n=0;for(;n<r.length;){let i=r[n++];if(t&&"class"===i){if(i=r[n],-1!==WD(i.toLowerCase(),e,0))return!0}else if(1===i){for(;n<r.length&&"string"==typeof(i=r[n++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function YD(r){return 4===r.type&&r.value!==$D}function DG(r,e,t){return e===(4!==r.type||t?r.value:$D)}function TG(r,e,t){let n=4;const i=r.attrs||[],o=function PG(r){for(let e=0;e<r.length;e++)if(Rt(r[e]))return e;return r.length}(i);let a=!1;for(let s=0;s<e.length;s++){const u=e[s];if("number"!=typeof u){if(!a)if(4&n){if(n=2|1&n,""!==u&&!DG(r,u,t)||""===u&&1===e.length){if(_c(n))return!1;a=!0}}else{const l=8&n?u:e[++s];if(8&n&&null!==r.attrs){if(!AG(r.attrs,l,t)){if(_c(n))return!1;a=!0}continue}const f=IG(8&n?"class":u,i,YD(r),t);if(-1===f){if(_c(n))return!1;a=!0;continue}if(""!==l){let h;h=f>o?"":i[f+1].toLowerCase();const d=8&n?h:null;if(d&&-1!==WD(d,l,0)||2&n&&l!==h){if(_c(n))return!1;a=!0}}}}else{if(!a&&!_c(n)&&!_c(u))return!1;if(a&&_c(u))continue;a=!1,n=u|1&n}}return _c(n)||a}function _c(r){return 0==(1&r)}function IG(r,e,t,n){if(null===e)return-1;let i=0;if(n||!t){let o=!1;for(;i<e.length;){const a=e[i];if(a===r)return i;if(3===a||6===a)o=!0;else{if(1===a||2===a){let s=e[++i];for(;"string"==typeof s;)s=e[++i];continue}if(4===a)break;if(0===a){i+=4;continue}}i+=o?1:2}return-1}return function NG(r,e){let t=r.indexOf(4);if(t>-1)for(t++;t<r.length;){const n=r[t];if("number"==typeof n)return-1;if(n===e)return t;t++}return-1}(e,r)}function XD(r,e,t=!1){for(let n=0;n<e.length;n++)if(TG(r,e[n],t))return!0;return!1}function qD(r,e){return r?":not("+e.trim()+")":e}function kG(r){let e=r[0],t=1,n=2,i="",o=!1;for(;t<r.length;){let a=r[t];if("string"==typeof a)if(2&n){const s=r[++t];i+="["+a+(s.length>0?'="'+s+'"':"")+"]"}else 8&n?i+="."+a:4&n&&(i+=" "+a);else""!==i&&!_c(a)&&(e+=qD(o,i),i=""),n=a,o=o||!_c(n);t++}return""!==i&&(e+=qD(o,i)),e}const Ri={};function Pg(r){KD(to(),nr(),Ta()+r,!1)}function KD(r,e,t,n){if(!n)if(3==(3&e[2])){const o=r.preOrderCheckHooks;null!==o&&uf(e,o,t)}else{const o=r.preOrderHooks;null!==o&&lf(e,o,0,t)}bl(t)}function e2(r,e=null,t=null,n){const i=t2(r,e,t,n);return i.resolveInjectorInitializers(),i}function t2(r,e=null,t=null,n,i=new Set){const o=[t||Ui,Jz(r)];return n=n||("object"==typeof r?void 0:fn(r)),new jD(o,e||Eb(),n||null,i)}let Al=(()=>{class r{static create(t,n){if(Array.isArray(t))return e2({name:""},n,t,"");{const i=t.name??"";return e2({name:i},t.parent,t.providers,i)}}}return r.THROW_IF_NOT_FOUND=wf,r.NULL=new LD,r.\u0275prov=ci({token:r,providedIn:"any",factory:()=>si(PD)}),r.__NG_ELEMENT_ID__=-1,r})();function ii(r,e=Qr.Default){const t=nr();return null===t?si(r,e):fh(Ma(),t,Qn(r),e)}function DE(){throw new Error("invalid")}function Cb(r,e){return r<<17|e<<2}function Sc(r){return r>>17&32767}function TE(r){return 2|r}function _h(r){return(131068&r)>>2}function IE(r,e){return-131069&r|e<<2}function OE(r){return 1|r}function y2(r,e){const t=r.contentQueries;if(null!==t)for(let n=0;n<t.length;n+=2){const i=t[n],o=t[n+1];if(-1!==o){const a=r.data[o];ef(i),a.contentQueries(2,e[o],o)}}}function Tb(r,e,t,n,i,o,a,s,u,l,c){const f=e.blueprint.slice();return f[0]=i,f[2]=76|n,(null!==c||r&&1024&r[2])&&(f[2]|=1024),og(f),f[3]=f[15]=r,f[8]=t,f[10]=a||r&&r[10],f[11]=s||r&&r[11],f[12]=u||r&&r[12]||null,f[9]=l||r&&r[9]||null,f[6]=o,f[20]=function Go(){return Lo++}(),f[21]=c,f[16]=2==e.type?r[16]:f,f}function dv(r,e,t,n,i){let o=r.data[e];if(null===o)o=function jE(r,e,t,n,i){const o=Js(),a=id(),u=r.data[e]=function mU(r,e,t,n,i,o){return{type:t,index:n,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?o:o&&o.parent,t,e,n,i);return null===r.firstChild&&(r.firstChild=u),null!==o&&(a?null==o.child&&null!==u.parent&&(o.child=u):null===o.next&&(o.next=u)),u}(r,e,t,n,i),function G0(){return hi.lFrame.inI18n}()&&(o.flags|=64);else if(64&o.type){o.type=t,o.value=n,o.attrs=i;const a=function Jc(){const r=hi.lFrame,e=r.currentTNode;return r.isParent?e:e.parent}();o.injectorIndex=null===a?-1:a.injectorIndex}return ls(o,!0),o}function gv(r,e,t,n){if(0===t)return-1;const i=e.length;for(let o=0;o<t;o++)e.push(n),r.blueprint.push(n),r.data.push(null);return i}function zE(r,e,t){tf(e);try{const n=r.viewQuery;null!==n&&XE(1,n,t);const i=r.template;null!==i&&b2(r,e,i,1,t),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&y2(r,e),r.staticViewQueries&&XE(2,r.viewQuery,t);const o=r.components;null!==o&&function gU(r,e){for(let t=0;t<e.length;t++)NU(r,e[t])}(e,o)}catch(n){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),n}finally{e[2]&=-5,gg()}}function Ib(r,e,t,n){const i=e[2];if(128!=(128&i)){tf(e);try{og(e),function Lp(r){return hi.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==t&&b2(r,e,t,2,n);const a=3==(3&i);if(a){const l=r.preOrderCheckHooks;null!==l&&uf(e,l,null)}else{const l=r.preOrderHooks;null!==l&&lf(e,l,0,null),oh(e,0)}if(function OU(r){for(let e=en(r);null!==e;e=ln(e)){if(!e[2])continue;const t=e[9];for(let n=0;n<t.length;n++){const i=t[n],o=i[3];0==(512&i[2])&&Jo(o,1),i[2]|=512}}}(e),function IU(r){for(let e=en(r);null!==e;e=ln(e))for(let t=N;t<e.length;t++){const n=e[t],i=n[1];nh(n)&&Ib(i,n,i.template,n[8])}}(e),null!==r.contentQueries&&y2(r,e),a){const l=r.contentCheckHooks;null!==l&&uf(e,l)}else{const l=r.contentHooks;null!==l&&lf(e,l,1),oh(e,1)}!function hU(r,e){const t=r.hostBindingOpCodes;if(null!==t)try{for(let n=0;n<t.length;n++){const i=t[n];if(i<0)bl(~i);else{const o=i,a=t[++n],s=t[++n];U0(a,o),s(2,e[o])}}}finally{bl(-1)}}(r,e);const s=r.components;null!==s&&function dU(r,e){for(let t=0;t<e.length;t++)PU(r,e[t])}(e,s);const u=r.viewQuery;if(null!==u&&XE(2,u,n),a){const l=r.viewCheckHooks;null!==l&&uf(e,l)}else{const l=r.viewHooks;null!==l&&lf(e,l,2),oh(e,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,Jo(e[3],-1))}finally{gg()}}}function b2(r,e,t,n,i){const o=Ta(),a=2&n;try{bl(-1),a&&e.length>22&&KD(r,e,22,!1),t(n,i)}finally{bl(o)}}function GE(r,e,t){!ug()||(function EU(r,e,t,n){const i=t.directiveStart,o=t.directiveEnd;r.firstCreatePass||As(t,e),ri(n,e);const a=t.initialInputs;for(let s=i;s<o;s++){const u=r.data[s],l=dt(u);l&&AU(e,t,u);const c=cc(e,r,s,t);ri(c,e),null!==a&&DU(0,s-i,c,u,0,a),l&&(us(t.index,e)[8]=c)}}(r,e,t,ss(t,e)),128==(128&t.flags)&&function _U(r,e,t){const n=t.directiveStart,i=t.directiveEnd,o=t.index,a=function Rp(){return hi.lFrame.currentDirectiveIndex}();try{bl(o);for(let s=n;s<i;s++){const u=r.data[s],l=e[s];yl(s),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&A2(u,l)}}finally{bl(-1),yl(a)}}(r,e,t))}function UE(r,e,t=ss){const n=e.localNames;if(null!==n){let i=e.index+1;for(let o=0;o<n.length;o+=2){const a=n[o+1],s=-1===a?t(e,r):r[a];r[i++]=s}}}function x2(r){const e=r.tView;return null===e||e.incompleteFirstPass?r.tView=VE(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):e}function VE(r,e,t,n,i,o,a,s,u,l){const c=22+n,f=c+i,h=function pU(r,e){const t=[];for(let n=0;n<e;n++)t.push(n<r?null:Ri);return t}(c,f),d="function"==typeof l?l():l;return h[1]={type:r,blueprint:h,template:t,queries:null,viewQuery:s,declTNode:e,data:h.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function E2(r,e,t,n){const i=P2(e);null===t?i.push(n):(i.push(t),r.firstCreatePass&&N2(r).push(n,i.length-1))}function _2(r,e,t){for(let n in r)if(r.hasOwnProperty(n)){const i=r[n];(t=null===t?{}:t).hasOwnProperty(n)?t[n].push(e,i):t[n]=[e,i]}return t}function S2(r,e){const n=e.directiveEnd,i=r.data,o=e.attrs,a=[];let s=null,u=null;for(let l=e.directiveStart;l<n;l++){const c=i[l],f=c.inputs,h=null===o||YD(e)?null:TU(f,o);a.push(h),s=_2(f,l,s),u=_2(c.outputs,l,u)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=a,e.inputs=s,e.outputs=u}function HE(r,e,t,n){let i=!1;if(ug()){const o=function SU(r,e,t){const n=r.directiveRegistry;let i=null;if(n)for(let o=0;o<n.length;o++){const a=n[o];XD(t,a.selectors,!1)&&(i||(i=[]),nl(As(t,e),r,a.type),dt(a)?(D2(r,t),i.unshift(a)):i.push(a))}return i}(r,e,t),a=null===n?null:{"":-1};if(null!==o){i=!0,T2(t,r.data.length,o.length);for(let c=0;c<o.length;c++){const f=o[c];f.providersResolver&&f.providersResolver(f)}let s=!1,u=!1,l=gv(r,e,o.length,null);for(let c=0;c<o.length;c++){const f=o[c];t.mergedAttrs=el(t.mergedAttrs,f.hostAttrs),I2(r,t,e,l,f),CU(l,f,a),null!==f.contentQueries&&(t.flags|=8),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(t.flags|=128);const h=f.type.prototype;!s&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(t.index),s=!0),!u&&(h.ngOnChanges||h.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(t.index),u=!0),l++}S2(r,t)}a&&function MU(r,e,t){if(e){const n=r.localNames=[];for(let i=0;i<e.length;i+=2){const o=t[e[i+1]];if(null==o)throw new dr(-301,!1);n.push(e[i],o)}}}(t,n,a)}return t.mergedAttrs=el(t.mergedAttrs,t.attrs),i}function C2(r,e,t,n,i,o){const a=o.hostBindings;if(a){let s=r.hostBindingOpCodes;null===s&&(s=r.hostBindingOpCodes=[]);const u=~e.index;(function xU(r){let e=r.length;for(;e>0;){const t=r[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=u&&s.push(u),s.push(n,i,a)}}function A2(r,e){null!==r.hostBindings&&r.hostBindings(1,e)}function D2(r,e){e.flags|=2,(r.components||(r.components=[])).push(e.index)}function CU(r,e,t){if(t){if(e.exportAs)for(let n=0;n<e.exportAs.length;n++)t[e.exportAs[n]]=r;dt(e)&&(t[""]=r)}}function T2(r,e,t){r.flags|=1,r.directiveStart=e,r.directiveEnd=e+t,r.providerIndexes=e}function I2(r,e,t,n,i){r.data[n]=i;const o=i.factory||(i.factory=Cs(i.type)),a=new cf(o,dt(i),ii);r.blueprint[n]=a,t[n]=a,C2(r,e,0,n,gv(r,t,i.hostVars,Ri),i)}function AU(r,e,t){const n=ss(e,r),i=x2(t),o=r[10],a=Ob(r,Tb(r,i,null,t.onPush?32:16,n,e,o,o.createRenderer(n,t),null,null,null));r[e.index]=a}function _f(r,e,t,n,i,o){const a=ss(r,e);!function WE(r,e,t,n,i,o,a){if(null==o)r.removeAttribute(e,i,t);else{const s=null==a?Br(o):a(o,n||"",i);r.setAttribute(e,i,s,t)}}(e[11],a,o,r.value,t,n,i)}function DU(r,e,t,n,i,o){const a=o[e];if(null!==a){const s=n.setInput;for(let u=0;u<a.length;){const l=a[u++],c=a[u++],f=a[u++];null!==s?n.setInput(t,f,l,c):t[c]=f}}}function TU(r,e){let t=null,n=0;for(;n<e.length;){const i=e[n];if(0!==i)if(5!==i){if("number"==typeof i)break;r.hasOwnProperty(i)&&(null===t&&(t=[]),t.push(i,r[i],e[n+1])),n+=2}else n+=2;else n+=4}return t}function O2(r,e,t,n){return new Array(r,!0,!1,e,null,0,n,t,null,null)}function PU(r,e){const t=us(e,r);if(nh(t)){const n=t[1];48&t[2]?Ib(n,t,n.template,t[8]):t[5]>0&&$E(t)}}function $E(r){for(let n=en(r);null!==n;n=ln(n))for(let i=N;i<n.length;i++){const o=n[i];if(nh(o))if(512&o[2]){const a=o[1];Ib(a,o,a.template,o[8])}else o[5]>0&&$E(o)}const t=r[1].components;if(null!==t)for(let n=0;n<t.length;n++){const i=us(t[n],r);nh(i)&&i[5]>0&&$E(i)}}function NU(r,e){const t=us(e,r),n=t[1];(function LU(r,e){for(let t=e.length;t<r.blueprint.length;t++)e.push(r.blueprint[t])})(n,t),zE(n,t,t[8])}function Ob(r,e){return r[13]?r[14][4]=e:r[13]=e,r[14]=e,e}function YE(r){for(;r;){r[2]|=32;const e=ft(r);if(Nt(r)&&!e)return r;r=e}return null}function Pb(r,e,t,n=!0){const i=e[10];i.begin&&i.begin();try{Ib(r,e,r.template,t)}catch(a){throw n&&k2(e,a),a}finally{i.end&&i.end()}}function XE(r,e,t){ef(0),e(r,t)}function P2(r){return r[7]||(r[7]=[])}function N2(r){return r.cleanup||(r.cleanup=[])}function k2(r,e){const t=r[9],n=t?t.get(cv,null):null;n&&n.handleError(e)}function qE(r,e,t,n,i){for(let o=0;o<t.length;){const a=t[o++],s=t[o++],u=e[a],l=r.data[a];null!==l.setInput?l.setInput(u,i,n,s):u[s]=i}}function Nb(r,e,t){let n=t?r.styles:null,i=t?r.classes:null,o=0;if(null!==e)for(let a=0;a<e.length;a++){const s=e[a];"number"==typeof s?o=s:1==o?i=Fn(i,s):2==o&&(n=Fn(n,s+": "+e[++a]+";"))}t?r.styles=n:r.stylesWithoutHost=n,t?r.classes=i:r.classesWithoutHost=i}function Lb(r,e,t,n,i=!1){for(;null!==t;){const o=e[t.index];if(null!==o&&n.push(ur(o)),Pe(o))for(let s=N;s<o.length;s++){const u=o[s],l=u[1].firstChild;null!==l&&Lb(u[1],u,l,n)}const a=t.type;if(8&a)Lb(r,e,t.child,n);else if(32&a){const s=sn(t,e);let u;for(;u=s();)n.push(u)}else if(16&a){const s=mD(e,t);if(Array.isArray(s))n.push(...s);else{const u=ft(e[16]);Lb(u[1],u,s,n,!0)}}t=i?t.projectionNext:t.next}return n}class lm{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Lb(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Pe(e)){const t=e[8],n=t?t.indexOf(this):-1;n>-1&&(av(e,n),rl(t,n))}this._attachedToViewContainer=!1}Bu(this._lView[1],this._lView)}onDestroy(e){E2(this._lView[1],this._lView,null,e)}markForCheck(){YE(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Pb(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new dr(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Zi(r,e){im(r,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new dr(902,!1);this._appRef=e}}class kU extends lm{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Pb(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class KE extends um{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Li(e);return new cm(t,this.ngModule)}}function R2(r){const e=[];for(let t in r)r.hasOwnProperty(t)&&e.push({propName:r[t],templateName:t});return e}class FU{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,n){const i=this.injector.get(e,xE,n);return i!==xE||t===xE?i:this.parentInjector.get(e,t,n)}}class cm extends GD{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function RG(r){return r.map(kG).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return R2(this.componentDef.inputs)}get outputs(){return R2(this.componentDef.outputs)}create(e,t,n,i){let o=(i=i||this.ngModule)instanceof pd?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new FU(e,o):e,s=a.get(VD,null);if(null===s)throw new dr(407,!1);const u=a.get(pG,null),l=s.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",f=n?function vU(r,e,t){return r.selectRootElement(e,t===Wa.ShadowDom)}(l,n,this.componentDef.encapsulation):Ar(l,c,function RU(r){const e=r.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(c)),h=this.componentDef.onPush?288:272,d=VE(0,null,null,1,0,null,null,null,null,null),g=Tb(null,d,null,h,null,null,s,l,u,a,null);let m,_;tf(g);try{const D=function zU(r,e,t,n,i,o){const a=t[1];t[22]=r;const u=dv(a,22,2,"#host",null),l=u.mergedAttrs=e.hostAttrs;null!==l&&(Nb(u,l,!0),null!==r&&(ff(i,r,l),null!==u.classes&&oE(i,r,u.classes),null!==u.styles&&bD(i,r,u.styles)));const c=n.createRenderer(r,e),f=Tb(t,x2(e),null,e.onPush?32:16,t[22],u,n,c,o||null,null,null);return a.firstCreatePass&&(nl(As(u,t),a,e.type),D2(a,u),T2(u,t.length,1)),Ob(t,f),t[22]=f}(f,this.componentDef,g,s,l);if(f)if(n)ff(l,f,["ng-version",vG.full]);else{const{attrs:L,classes:O}=function FG(r){const e=[],t=[];let n=1,i=2;for(;n<r.length;){let o=r[n];if("string"==typeof o)2===i?""!==o&&e.push(o,r[++n]):8===i&&t.push(o);else{if(!_c(i))break;i=o}n++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);L&&ff(l,f,L),O&&O.length>0&&oE(l,f,O.join(" "))}if(_=nd(d,22),void 0!==t){const L=_.projection=[];for(let O=0;O<this.ngContentSelectors.length;O++){const Z=t[O];L.push(null!=Z?Array.from(Z):null)}}m=function GU(r,e,t,n){const i=t[1],o=function wU(r,e,t){const n=Ma();r.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),I2(r,n,e,gv(r,e,1,null),t),S2(r,n));const i=cc(e,r,n.directiveStart,n);ri(i,e);const o=ss(n,e);return o&&ri(o,e),i}(i,t,e);if(r[8]=t[8]=o,null!==n)for(const s of n)s(o,e);if(e.contentQueries){const s=Ma();e.contentQueries(1,o,s.directiveStart)}const a=Ma();return!i.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(bl(a.index),C2(t[1],a,0,a.directiveStart,a.directiveEnd,e),A2(e,o)),o}(D,this.componentDef,g,[UU]),zE(d,g,null)}finally{gg()}return new jU(this.componentType,m,lv(_,g),g,_)}}class jU extends class lG{}{constructor(e,t,n,i,o){super(),this.location=n,this._rootLView=i,this._tNode=o,this.instance=t,this.hostView=this.changeDetectorRef=new kU(i),this.componentType=e}setInput(e,t){const n=this._tNode.inputs;let i;if(null!==n&&(i=n[e])){const o=this._rootLView;qE(o[1],o,i,e,t),function M2(r,e){const t=us(e,r);16&t[2]||(t[2]|=32)}(o,this._tNode.index)}}get injector(){return new fc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function UU(){const r=Ma();sf(nr()[1],r)}let kb=null;function Ng(){if(!kb){const r=Gi.Symbol;if(r&&r.iterator)kb=r.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(kb=n)}}}return kb}function nu(r,e,t){return!Object.is(r[e],t)&&(r[e]=t,!0)}function JE(r,e,t,n){const i=nr();return nu(i,ic(),e)&&(to(),_f(function Ao(){const r=hi.lFrame;return nd(r.tView,r.selectedIndex)}(),i,r,e,t,n)),JE}function e_(r){return function Ku(r,e){return r[e]}(function od(){return hi.lFrame.contextLView}(),22+r)}function t_(r,e,t,n,i){const a=i?"class":"style";qE(r,t,e.inputs[a],a,n)}function Qi(r,e,t,n){const i=nr(),o=to(),a=22+r,s=i[11],u=i[a]=Ar(s,e,function af(){return hi.lFrame.currentNamespace}()),l=o.firstCreatePass?function n8(r,e,t,n,i,o,a){const s=e.consts,l=dv(e,r,2,i,Zu(s,o));return HE(e,t,l,Zu(s,a)),null!==l.attrs&&Nb(l,l.attrs,!1),null!==l.mergedAttrs&&Nb(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(a,o,i,0,e,t,n):o.data[a];ls(l,!0);const c=l.mergedAttrs;null!==c&&ff(s,u,c);const f=l.classes;null!==f&&oE(s,u,f);const h=l.styles;return null!==h&&bD(s,u,h),64!=(64&l.flags)&&vb(o,i,u,l),0===function sg(){return hi.lFrame.elementDepthCount}()&&ri(u,i),function Tp(){hi.lFrame.elementDepthCount++}(),ct(l)&&(GE(o,i,l),function w2(r,e,t){if(Ye(e)){const i=e.directiveEnd;for(let o=e.directiveStart;o<i;o++){const a=r.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}}(o,l,i)),null!==n&&UE(i,l),Qi}function co(){let r=Ma();id()?function cg(){hi.lFrame.isParent=!1}():(r=r.parent,ls(r,!1));const e=r;!function Ip(){hi.lFrame.elementDepthCount--}();const t=to();return t.firstCreatePass&&(sf(t,r),Ye(r)&&t.queries.elementEnd(r)),null!=e.classesWithoutHost&&function Yp(r){return 0!=(16&r.flags)}(e)&&t_(t,e,nr(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Xp(r){return 0!=(32&r.flags)}(e)&&t_(t,e,nr(),e.stylesWithoutHost,!1),co}function kg(r,e,t,n){return Qi(r,e,t,n),co(),kg}function Fb(r){return!!r&&"function"==typeof r.then}const J2=function Q2(r){return!!r&&"function"==typeof r.subscribe};function Us(r,e,t,n){const i=nr(),o=to(),a=Ma();return function tT(r,e,t,n,i,o,a,s){const u=ct(n),c=r.firstCreatePass&&N2(r),f=e[8],h=P2(e);let d=!0;if(3&n.type||s){const _=ss(n,e),D=s?s(_):_,L=h.length,O=s?le=>s(ur(le[n.index])):n.index;let Z=null;if(!s&&u&&(Z=function i8(r,e,t,n){const i=r.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const a=i[o];if(a===t&&i[o+1]===n){const s=e[7],u=i[o+2];return s.length>u?s[u]:null}"string"==typeof a&&(o+=2)}return null}(r,e,i,n.index)),null!==Z)(Z.__ngLastListenerFn__||Z).__ngNextListenerFn__=o,Z.__ngLastListenerFn__=o,d=!1;else{o=rT(n,e,f,o,!1);const le=t.listen(D,i,o);h.push(o,le),c&&c.push(i,O,L,L+1)}}else o=rT(n,e,f,o,!1);const g=n.outputs;let m;if(d&&null!==g&&(m=g[i])){const _=m.length;if(_)for(let D=0;D<_;D+=2){const pe=e[m[D]][m[D+1]].subscribe(o),Ee=h.length;h.push(o,pe),c&&c.push(i,n.index,Ee,-(Ee+1))}}}(o,i,i[11],a,r,e,0,n),Us}function nT(r,e,t,n){try{return!1!==t(n)}catch(i){return k2(r,i),!1}}function rT(r,e,t,n,i){return function o(a){if(a===Function)return n;YE(2&r.flags?us(r.index,e):e);let u=nT(e,0,n,a),l=o.__ngNextListenerFn__;for(;l;)u=nT(e,0,l,a)&&u,l=l.__ngNextListenerFn__;return i&&!1===u&&(a.preventDefault(),a.returnValue=!1),u}}function dT(r,e,t,n,i){const o=r[t+1],a=null===e;let s=n?Sc(o):_h(o),u=!1;for(;0!==s&&(!1===u||a);){const c=r[s+1];f8(r[s],e)&&(u=!0,r[s+1]=n?OE(c):TE(c)),s=n?Sc(c):_h(c)}u&&(r[t+1]=n?TE(o):OE(o))}function f8(r,e){return null===r||null==e||(Array.isArray(r)?r[1]:r)===e||!(!Array.isArray(r)||"string"!=typeof e)&&bf(r,e)>=0}function o_(r,e){return function Mc(r,e,t,n){const i=nr(),o=to(),a=function eu(r){const e=hi.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+r,t}(2);o.firstUpdatePass&&function ET(r,e,t,n){const i=r.data;if(null===i[t+1]){const o=i[Ta()],a=function xT(r,e){return e>=r.expandoStartIndex}(r,t);(function CT(r,e){return 0!=(r.flags&(e?16:32))})(o,n)&&null===e&&!a&&(e=!1),e=function w8(r,e,t,n){const i=function fg(r){const e=hi.lFrame.currentDirectiveIndex;return-1===e?null:r[e]}(r);let o=n?e.residualClasses:e.residualStyles;if(null===i)0===(n?e.classBindings:e.styleBindings)&&(t=dm(t=a_(null,r,e,t,n),e.attrs,n),o=null);else{const a=e.directiveStylingLast;if(-1===a||r[a]!==i)if(t=a_(i,r,e,t,n),null===o){let u=function x8(r,e,t){const n=t?e.classBindings:e.styleBindings;if(0!==_h(n))return r[Sc(n)]}(r,e,n);void 0!==u&&Array.isArray(u)&&(u=a_(null,r,e,u[1],n),u=dm(u,e.attrs,n),function E8(r,e,t,n){r[Sc(t?e.classBindings:e.styleBindings)]=n}(r,e,n,u))}else o=function _8(r,e,t){let n;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)n=dm(n,r[o].hostAttrs,t);return dm(n,e.attrs,t)}(r,e,n)}return void 0!==o&&(n?e.residualClasses=o:e.residualStyles=o),t}(i,o,e,n),function l8(r,e,t,n,i,o){let a=o?e.classBindings:e.styleBindings,s=Sc(a),u=_h(a);r[n]=t;let c,l=!1;if(Array.isArray(t)){const f=t;c=f[1],(null===c||bf(f,c)>0)&&(l=!0)}else c=t;if(i)if(0!==u){const h=Sc(r[s+1]);r[n+1]=Cb(h,s),0!==h&&(r[h+1]=IE(r[h+1],n)),r[s+1]=function nU(r,e){return 131071&r|e<<17}(r[s+1],n)}else r[n+1]=Cb(s,0),0!==s&&(r[s+1]=IE(r[s+1],n)),s=n;else r[n+1]=Cb(u,0),0===s?s=n:r[u+1]=IE(r[u+1],n),u=n;l&&(r[n+1]=TE(r[n+1])),dT(r,c,n,!0),dT(r,c,n,!1),function c8(r,e,t,n,i){const o=i?r.residualClasses:r.residualStyles;null!=o&&"string"==typeof e&&bf(o,e)>=0&&(t[n+1]=OE(t[n+1]))}(e,c,r,n,o),a=Cb(s,u),o?e.classBindings=a:e.styleBindings=a}(i,o,e,t,a,n)}}(o,r,a,n),e!==Ri&&nu(i,a,e)&&function ST(r,e,t,n,i,o,a,s){if(!(3&e.type))return;const u=r.data,l=u[s+1];Bb(function c2(r){return 1==(1&r)}(l)?MT(u,e,t,i,_h(l),a):void 0)||(Bb(o)||function l2(r){return 2==(2&r)}(l)&&(o=MT(u,null,t,i,s,a)),function Mz(r,e,t,n,i){if(e)i?r.addClass(t,n):r.removeClass(t,n);else{let o=-1===n.indexOf("-")?void 0:Lr.DashCase;null==i?r.removeStyle(t,n,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Lr.Important),r.setStyle(t,n,i,o))}}(n,a,Zc(Ta(),t),i,o))}(o,o.data[Ta()],i,i[11],r,i[a+1]=function C8(r,e){return null==r||("string"==typeof e?r+=e:"object"==typeof r&&(r=fn(gd(r)))),r}(e,t),n,a)}(r,e,null,!0),o_}function a_(r,e,t,n,i){let o=null;const a=t.directiveEnd;let s=t.directiveStylingLast;for(-1===s?s=t.directiveStart:s++;s<a&&(o=e[s],n=dm(n,o.hostAttrs,i),o!==r);)s++;return null!==r&&(t.directiveStylingLast=s),n}function dm(r,e,t){const n=t?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?i=a:i===n&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),zs(r,a,!!t||e[++o]))}return void 0===r?null:r}function MT(r,e,t,n,i,o){const a=null===e;let s;for(;i>0;){const u=r[i],l=Array.isArray(u),c=l?u[1]:u,f=null===c;let h=t[i+1];h===Ri&&(h=f?Ui:void 0);let d=f?Cg(h,n):c===n?h:void 0;if(l&&!Bb(d)&&(d=Cg(u,n)),Bb(d)&&(s=d,a))return s;const g=r[i+1];i=a?Sc(g):_h(g)}if(null!==e){let u=o?e.residualClasses:e.residualStyles;null!=u&&(s=Cg(u,n))}return s}function Bb(r){return void 0!==r}function yo(r,e=""){const t=nr(),n=to(),i=r+22,o=n.firstCreatePass?dv(n,i,1,e,null):n.data[i],a=t[i]=function Zn(r,e){return r.createText(e)}(t[11],e);vb(n,t,a,o),ls(o,!1)}function jb(r){return Rg("",r,""),jb}function Rg(r,e,t){const n=nr(),i=function vv(r,e,t,n){return nu(r,ic(),t)?e+Br(t)+n:Ri}(n,r,e,t);return i!==Ri&&function Sh(r,e,t){const n=Zc(e,r);!function Rr(r,e,t){r.setValue(e,t)}(r[11],n,t)}(n,Ta(),i),Rg}const Cv="en-US";let XT=Cv;class Bg{}class wI{}class xI extends Bg{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new KE(this);const n=Ne(e);this._bootstrapComponents=Eh(n.bootstrap),this._r3Injector=t2(e,t,[{provide:Bg,useValue:this},{provide:um,useValue:this.componentFactoryResolver}],fn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class d_ extends wI{constructor(e){super(),this.moduleType=e}create(e){return new xI(this.moduleType,e)}}class YV extends Bg{constructor(e,t,n){super(),this.componentFactoryResolver=new KE(this),this.instance=null;const i=new jD([...e,{provide:Bg,useValue:this},{provide:um,useValue:this.componentFactoryResolver}],t||Eb(),n,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Hb(r,e,t=null){return new YV(r,e,t).injector}let XV=(()=>{class r{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const n=kD(0,t.type),i=n.length>0?Hb([n],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,i)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return r.\u0275prov=ci({token:r,providedIn:"environment",factory:()=>new r(si(pd))}),r})();function EI(r){r.getStandaloneInjector=e=>e.get(XV).getOrCreateStandaloneInjector(r)}function p_(r){return e=>{setTimeout(r,void 0,e)}}const xu=class w9 extends Rn{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){let i=e,o=t||(()=>null),a=n;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),o=u.error?.bind(u),a=u.complete?.bind(u)}this.__isAsync&&(o=p_(o),i&&(i=p_(i)),a&&(a=p_(a)));const s=super.subscribe({next:i,error:o,complete:a});return e instanceof te&&e.add(s),s}};function x9(){return this._results[Ng()]()}class v_{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Ng(),n=v_.prototype;n[t]||(n[t]=x9)}get changes(){return this._changes||(this._changes=new xu)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const n=this;n.dirty=!1;const i=$a(e);(this._changesDetected=!function cd(r,e,t){if(r.length!==e.length)return!1;for(let n=0;n<r.length;n++){let i=r[n],o=e[n];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}(n._results,i,t))&&(n._results=i,n.length=i.length,n.last=i[this.length-1],n.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ac=(()=>{class r{}return r.__NG_ELEMENT_ID__=S9,r})();const E9=Ac,_9=class extends E9{constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e,t){const n=this._declarationTContainer.tViews,i=Tb(this._declarationLView,n,e,16,null,n.declTNode,null,null,null,null,t||null);i[17]=this._declarationLView[this._declarationTContainer.index];const a=this._declarationLView[19];return null!==a&&(i[19]=a.createEmbeddedView(n)),zE(n,i,e),new lm(i)}};function S9(){return Wb(Ma(),nr())}function Wb(r,e){return 4&r.type?new _9(e,r,lv(r,e)):null}let Tl=(()=>{class r{}return r.__NG_ELEMENT_ID__=M9,r})();function M9(){return RI(Ma(),nr())}const C9=Tl,LI=class extends C9{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return lv(this._hostTNode,this._hostLView)}get injector(){return new fc(this._hostTNode,this._hostLView)}get parentInjector(){const e=yu(this._hostTNode,this._hostLView);if(yg(e)){const t=ac(e,this._hostLView),n=wl(e);return new fc(t[1].data[n+8],t)}return new fc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=kI(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-N}createEmbeddedView(e,t,n){let i,o;"number"==typeof n?i=n:null!=n&&(i=n.index,o=n.injector);const a=e.createEmbeddedView(t||{},o);return this.insert(a,i),a}createComponent(e,t,n,i,o){const a=e&&!function vc(r){return"function"==typeof r}(e);let s;if(a)s=t;else{const f=t||{};s=f.index,n=f.injector,i=f.projectableNodes,o=f.environmentInjector||f.ngModuleRef}const u=a?e:new cm(Li(e)),l=n||this.parentInjector;if(!o&&null==u.ngModule){const h=(a?l:this.parentInjector).get(pd,null);h&&(o=h)}const c=u.create(l,i,void 0,o);return this.insert(c.hostView,s),c}insert(e,t){const n=e._lView,i=n[1];if(function mu(r){return Pe(r[3])}(n)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const f=n[3],h=new LI(f,f[6],f[3]);h.detach(h.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;!function Gs(r,e,t,n){const i=N+n,o=t.length;n>0&&(t[i-1][4]=e),n<o-N?(e[4]=t[i],mf(t,N+n,e)):(t.push(e),e[4]=null),e[3]=t;const a=e[17];null!==a&&t!==a&&function rm(r,e){const t=r[9];e[16]!==e[3][3][16]&&(r[2]=!0),null===t?r[9]=[e]:t.push(e)}(a,e);const s=e[19];null!==s&&s.insertView(r),e[2]|=64}(i,n,a,o);const s=nE(o,a),u=n[11],l=pb(u,a[7]);return null!==l&&function li(r,e,t,n,i,o){n[0]=i,n[6]=e,im(r,n,t,1,i,o)}(i,a[6],u,n,l,s),e.attachToViewContainerRef(),mf(m_(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=kI(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),n=av(this._lContainer,t);n&&(rl(m_(this._lContainer),t),Bu(n[1],n))}detach(e){const t=this._adjustIndex(e,-1),n=av(this._lContainer,t);return n&&null!=rl(m_(this._lContainer),t)?new lm(n):null}_adjustIndex(e,t=0){return e??this.length+t}};function kI(r){return r[8]}function m_(r){return r[8]||(r[8]=[])}function RI(r,e){let t;const n=e[r.index];if(Pe(n))t=n;else{let i;if(8&r.type)i=ur(n);else{const o=e[11];i=o.createComment("");const a=ss(r,e);Tg(o,pb(o,a),i,function Ez(r,e){return r.nextSibling(e)}(o,a),!1)}e[r.index]=t=O2(n,e,i,r),Ob(e,t)}return new LI(t,r,e)}class y_{constructor(e){this.queryList=e,this.matches=null}clone(){return new y_(this.queryList)}setDirty(){this.queryList.setDirty()}}class b_{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let o=0;o<n;o++){const a=t.getByIndex(o);i.push(this.queries[a.indexInDeclarationView].clone())}return new b_(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==GI(e,t).matches&&this.queries[t].setDirty()}}class FI{constructor(e,t,n=null){this.predicate=e,this.flags=t,this.read=n}}class w_{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const i=null!==t?t.length:0,o=this.getByIndex(n).embeddedTView(e,i);o&&(o.indexInDeclarationView=n,null!==t?t.push(o):t=[o])}return null!==t?new w_(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class x_{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new x_(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const n=this.metadata.predicate;if(Array.isArray(n))for(let i=0;i<n.length;i++){const o=n[i];this.matchTNodeWithReadOption(e,t,T9(t,o)),this.matchTNodeWithReadOption(e,t,df(t,e,o,!1,!1))}else n===Ac?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,df(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(null!==n){const i=this.metadata.read;if(null!==i)if(i===vd||i===Tl||i===Ac&&4&t.type)this.addMatch(t.index,-2);else{const o=df(t,e,i,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function T9(r,e){const t=r.localNames;if(null!==t)for(let n=0;n<t.length;n+=2)if(t[n]===e)return t[n+1];return null}function O9(r,e,t,n){return-1===t?function I9(r,e){return 11&r.type?lv(r,e):4&r.type?Wb(r,e):null}(e,r):-2===t?function P9(r,e,t){return t===vd?lv(e,r):t===Ac?Wb(e,r):t===Tl?RI(e,r):void 0}(r,e,n):cc(r,r[1],t,e)}function BI(r,e,t,n){const i=e[19].queries[n];if(null===i.matches){const o=r.data,a=t.matches,s=[];for(let u=0;u<a.length;u+=2){const l=a[u];s.push(l<0?null:O9(e,o[l],a[u+1],t.metadata.read))}i.matches=s}return i.matches}function E_(r,e,t,n){const i=r.queries.getByIndex(t),o=i.matches;if(null!==o){const a=BI(r,e,i,t);for(let s=0;s<o.length;s+=2){const u=o[s];if(u>0)n.push(a[s/2]);else{const l=o[s+1],c=e[-u];for(let f=N;f<c.length;f++){const h=c[f];h[17]===h[3]&&E_(h[1],h,l,n)}if(null!==c[9]){const f=c[9];for(let h=0;h<f.length;h++){const d=f[h];E_(d[1],d,l,n)}}}}}return n}function Av(r){const e=nr(),t=to(),n=Fp();ef(n+1);const i=GI(t,n);if(r.dirty&&function Dp(r){return 4==(4&r[2])}(e)===(2==(2&i.metadata.flags))){if(null===i.matches)r.reset([]);else{const o=i.crossesNgTemplate?E_(t,e,n,[]):BI(t,e,i,n);r.reset(o,dG),r.notifyOnChanges()}return!0}return!1}function $b(r,e,t){const n=to();n.firstCreatePass&&(zI(n,new FI(r,e,t),-1),2==(2&e)&&(n.staticViewQueries=!0)),jI(n,nr(),e)}function __(r,e,t,n){const i=to();if(i.firstCreatePass){const o=Ma();zI(i,new FI(e,t,n),o.index),function L9(r,e){const t=r.contentQueries||(r.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(r.queries.length-1,e)}(i,r),2==(2&t)&&(i.staticContentQueries=!0)}jI(i,nr(),t)}function Dv(){return function N9(r,e){return r[19].queries[e].queryList}(nr(),Fp())}function jI(r,e,t){const n=new v_(4==(4&t));E2(r,e,n,n.destroy),null===e[19]&&(e[19]=new b_),e[19].queries.push(new y_(n))}function zI(r,e,t){null===r.queries&&(r.queries=new w_),r.queries.track(new x_(e,t))}function GI(r,e){return r.queries.getByIndex(e)}function UI(r,e){return Wb(r,e)}function Xb(...r){}const qb=new bi("Application Initializer");let Kb=(()=>{class r{constructor(t){this.appInits=t,this.resolve=Xb,this.reject=Xb,this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,i)=>{this.resolve=n,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(Fb(o))t.push(o);else if(J2(o)){const a=new Promise((s,u)=>{o.subscribe({complete:s,error:u})});t.push(a)}}Promise.all(t).then(()=>{n()}).catch(i=>{this.reject(i)}),0===t.length&&n(),this.initialized=!0}}return r.\u0275fac=function(t){return new(t||r)(si(qb,8))},r.\u0275prov=ci({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Em=new bi("AppId",{providedIn:"root",factory:function sO(){return`${D_()}${D_()}${D_()}`}});function D_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const uO=new bi("Platform Initializer"),lO=new bi("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),cO=new bi("appBootstrapListener");let e7=(()=>{class r{log(t){console.log(t)}warn(t){console.warn(t)}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=ci({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();const Mh=new bi("LocaleId",{providedIn:"root",factory:()=>fa(Mh,Qr.Optional|Qr.SkipSelf)||function t7(){return typeof $localize<"u"&&$localize.locale||Cv}()});class r7{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let T_=(()=>{class r{compileModuleSync(t){return new d_(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const n=this.compileModuleSync(t),o=Eh(Ne(t).declarations).reduce((a,s)=>{const u=Li(s);return u&&a.push(new cm(u)),a},[]);return new r7(n,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=ci({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const a7=(()=>Promise.resolve(0))();function I_(r){typeof Zone>"u"?a7.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class ds{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new xu(!1),this.onMicrotaskEmpty=new xu(!1),this.onStable=new xu(!1),this.onError=new xu(!1),typeof Zone>"u")throw new dr(908,!1);Zone.assertZonePatched();const i=this;if(i._nesting=0,i._outer=i._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const o=Zone.AsyncStackTaggingZoneSpec;i._inner=i._inner.fork(new o("Angular"))}Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!n&&t,i.shouldCoalesceRunChangeDetection=n,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function s7(){let r=Gi.requestAnimationFrame,e=Gi.cancelAnimationFrame;if(typeof Zone<"u"&&r&&e){const t=r[Zone.__symbol__("OriginalDelegate")];t&&(r=t);const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function c7(r){const e=()=>{!function l7(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(Gi,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,P_(r),r.isCheckStableRunning=!0,O_(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),P_(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,n,i,o,a,s)=>{try{return dO(r),t.invokeTask(i,o,a,s)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||r.shouldCoalesceRunChangeDetection)&&e(),gO(r)}},onInvoke:(t,n,i,o,a,s,u)=>{try{return dO(r),t.invoke(i,o,a,s,u)}finally{r.shouldCoalesceRunChangeDetection&&e(),gO(r)}},onHasTask:(t,n,i,o)=>{t.hasTask(i,o),n===i&&("microTask"==o.change?(r._hasPendingMicrotasks=o.microTask,P_(r),O_(r)):"macroTask"==o.change&&(r.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,n,i,o)=>(t.handleError(i,o),r.runOutsideAngular(()=>r.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ds.isInAngularZone())throw new dr(909,!1)}static assertNotInAngularZone(){if(ds.isInAngularZone())throw new dr(909,!1)}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,i){const o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+i,e,u7,Xb,Xb);try{return o.runTask(a,t,n)}finally{o.cancelTask(a)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const u7={};function O_(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function P_(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function dO(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function gO(r){r._nesting--,O_(r)}class f7{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new xu,this.onMicrotaskEmpty=new xu,this.onStable=new xu,this.onError=new xu}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,i){return e.apply(t,n)}}const pO=new bi(""),Zb=new bi("");let k_,N_=(()=>{class r{constructor(t,n,i){this._ngZone=t,this.registry=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,k_||(function h7(r){k_=r}(i),i.addToWindow(n)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ds.assertNotInAngularZone(),I_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())I_(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(t)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,n,i){let o=-1;n&&n>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),t(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,n,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,n,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,n,i){return[]}}return r.\u0275fac=function(t){return new(t||r)(si(ds),si(L_),si(Zb))},r.\u0275prov=ci({token:r,factory:r.\u0275fac}),r})(),L_=(()=>{class r{constructor(){this._applications=new Map}registerApplication(t,n){this._applications.set(t,n)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,n=!0){return k_?.findTestabilityInTree(this,t,n)??null}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=ci({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})(),bd=null;const vO=new bi("AllowMultipleToken"),R_=new bi("PlatformDestroyListeners");class mO{constructor(e,t){this.name=e,this.token=t}}function bO(r,e,t=[]){const n=`Platform: ${e}`,i=new bi(n);return(o=[])=>{let a=F_();if(!a||a.injector.get(vO,!1)){const s=[...t,...o,{provide:i,useValue:!0}];r?r(s):function p7(r){if(bd&&!bd.get(vO,!1))throw new dr(400,!1);bd=r;const e=r.get(xO);(function yO(r){const e=r.get(uO,null);e&&e.forEach(t=>t())})(r)}(function wO(r=[],e){return Al.create({name:e,providers:[{provide:mE,useValue:"platform"},{provide:R_,useValue:new Set([()=>bd=null])},...r]})}(s,n))}return function m7(r){const e=F_();if(!e)throw new dr(401,!1);return e}()}}function F_(){return bd?.get(xO)??null}let xO=(()=>{class r{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,n){const i=function _O(r,e){let t;return t="noop"===r?new f7:("zone.js"===r?void 0:r)||new ds(e),t}(n?.ngZone,function EO(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!r||!r.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!r||!r.ngZoneRunCoalescing)||!1}}(n)),o=[{provide:ds,useValue:i}];return i.run(()=>{const a=Al.create({providers:o,parent:this.injector,name:t.moduleType.name}),s=t.create(a),u=s.injector.get(cv,null);if(!u)throw new dr(402,!1);return i.runOutsideAngular(()=>{const l=i.onError.subscribe({next:c=>{u.handleError(c)}});s.onDestroy(()=>{Jb(this._modules,s),l.unsubscribe()})}),function SO(r,e,t){try{const n=t();return Fb(n)?n.catch(i=>{throw e.runOutsideAngular(()=>r.handleError(i)),i}):n}catch(n){throw e.runOutsideAngular(()=>r.handleError(n)),n}}(u,i,()=>{const l=s.injector.get(Kb);return l.runInitializers(),l.donePromise.then(()=>(function qT(r){ua(r,"Expected localeId to be defined"),"string"==typeof r&&(XT=r.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Mh,Cv)||Cv),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,n=[]){const i=MO({},n);return function d7(r,e,t){const n=new d_(t);return Promise.resolve(n)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(t){const n=t.injector.get(Qb);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>n.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new dr(403,!1);t.instance.ngDoBootstrap(n)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new dr(404,!1);this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n());const t=this._injector.get(R_,null);t&&(t.forEach(n=>n()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(t){return new(t||r)(si(Al))},r.\u0275prov=ci({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();function MO(r,e){return Array.isArray(e)?e.reduce(MO,r):{...r,...e}}let Qb=(()=>{class r{constructor(t,n,i){this._zone=t,this._injector=n,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new ir(s=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{s.next(this._stable),s.complete()})}),a=new ir(s=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{ds.assertNotInAngularZone(),I_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,s.next(!0))})})});const l=this._zone.onUnstable.subscribe(()=>{ds.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{s.next(!1)}))});return()=>{u.unsubscribe(),l.unsubscribe()}});this.isStable=function st(...r){const e=$n(r),t=function Er(r,e){return"number"==typeof Wn(r)?r.pop():e}(r,1/0),n=r;return n.length?1===n.length?ce(n[0]):an(t)(Oe(n,e)):Ke}(o,a.pipe(function Ot(r={}){const{connector:e=(()=>new Rn),resetOnError:t=!0,resetOnComplete:n=!0,resetOnRefCountZero:i=!0}=r;return o=>{let a,s,u,l=0,c=!1,f=!1;const h=()=>{s?.unsubscribe(),s=void 0},d=()=>{h(),a=u=void 0,c=f=!1},g=()=>{const m=a;d(),m?.unsubscribe()};return yr((m,_)=>{l++,!f&&!c&&h();const D=u=u??e();_.add(()=>{l--,0===l&&!f&&!c&&(s=At(g,i))}),D.subscribe(_),!a&&l>0&&(a=new Mt({next:L=>D.next(L),error:L=>{f=!0,h(),s=At(d,t,L),D.error(L)},complete:()=>{c=!0,h(),s=At(d,n),D.complete()}}),ce(m).subscribe(a))})(o)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,n){const i=t instanceof GD;if(!this._injector.get(Kb).done)throw!i&&function Na(r){const e=Li(r)||la(r)||Ko(r);return null!==e&&e.standalone}(t),new dr(405,false);let a;a=i?t:this._injector.get(um).resolveComponentFactory(t),this.componentTypes.push(a.componentType);const s=function g7(r){return r.isBoundToModule}(a)?void 0:this._injector.get(Bg),l=a.create(Al.NULL,[],n||a.selector,s),c=l.location.nativeElement,f=l.injector.get(pO,null);return f?.registerApplication(c),l.onDestroy(()=>{this.detachView(l.hostView),Jb(this.components,l),f?.unregisterApplication(c)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new dr(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const n=t;this._views.push(n),n.attachToAppRef(this)}detachView(t){const n=t;Jb(this._views,n),n.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(cO,[]).concat(this._bootstrapListeners).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Jb(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new dr(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return r.\u0275fac=function(t){return new(t||r)(si(ds),si(pd),si(cv))},r.\u0275prov=ci({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function Jb(r,e){const t=r.indexOf(e);t>-1&&r.splice(t,1)}let AO=!0,e1=(()=>{class r{}return r.__NG_ELEMENT_ID__=w7,r})();function w7(r){return function x7(r,e,t){if(qe(r)&&!t){const n=us(r.index,e);return new lm(n,n)}return 47&r.type?new lm(e[16],e):null}(Ma(),nr(),16==(16&r))}const L7=bO(null,"core",[]);let k7=(()=>{class r{constructor(t){}}return r.\u0275fac=function(t){return new(t||r)(si(Qb))},r.\u0275mod=is({type:r}),r.\u0275inj=ys({}),r})();function Ov(r){return"boolean"==typeof r?r:null!=r&&"false"!==r}let i1=null;function wd(){return i1}const ju=new bi("DocumentToken");let U_=(()=>{class r{historyGo(t){throw new Error("Not implemented")}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=ci({token:r,factory:function(){return function j7(){return si(BO)}()},providedIn:"platform"}),r})();const z7=new bi("Location Initialized");let BO=(()=>{class r extends U_{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return wd().getBaseHref(this._doc)}onPopState(t){const n=wd().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",t,!1),()=>n.removeEventListener("popstate",t)}onHashChange(t){const n=wd().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",t,!1),()=>n.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,n,i){jO()?this._history.pushState(t,n,i):this.location.hash=i}replaceState(t,n,i){jO()?this._history.replaceState(t,n,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return r.\u0275fac=function(t){return new(t||r)(si(ju))},r.\u0275prov=ci({token:r,factory:function(){return function G7(){return new BO(si(ju))}()},providedIn:"platform"}),r})();function jO(){return!!window.history.pushState}function V_(r,e){if(0==r.length)return e;if(0==e.length)return r;let t=0;return r.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?r+e.substring(1):1==t?r+e:r+"/"+e}function zO(r){const e=r.match(/#|\?|$/),t=e&&e.index||r.length;return r.slice(0,t-("/"===r[t-1]?1:0))+r.slice(t)}function Ah(r){return r&&"?"!==r[0]?"?"+r:r}let xd=(()=>{class r{historyGo(t){throw new Error("Not implemented")}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=ci({token:r,factory:function(){return fa(UO)},providedIn:"root"}),r})();const GO=new bi("appBaseHref");let UO=(()=>{class r extends xd{constructor(t,n){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??fa(ju).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return V_(this._baseHref,t)}path(t=!1){const n=this._platformLocation.pathname+Ah(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${n}${i}`:n}pushState(t,n,i,o){const a=this.prepareExternalUrl(i+Ah(o));this._platformLocation.pushState(t,n,a)}replaceState(t,n,i,o){const a=this.prepareExternalUrl(i+Ah(o));this._platformLocation.replaceState(t,n,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return r.\u0275fac=function(t){return new(t||r)(si(U_),si(GO,8))},r.\u0275prov=ci({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),VO=(()=>{class r extends xd{constructor(t,n){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(t){const n=V_(this._baseHref,t);return n.length>0?"#"+n:n}pushState(t,n,i,o){let a=this.prepareExternalUrl(i+Ah(o));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(t,n,a)}replaceState(t,n,i,o){let a=this.prepareExternalUrl(i+Ah(o));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(t,n,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return r.\u0275fac=function(t){return new(t||r)(si(U_),si(GO,8))},r.\u0275prov=ci({token:r,factory:r.\u0275fac}),r})(),H_=(()=>{class r{constructor(t){this._subject=new xu,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const n=this._locationStrategy.getBaseHref();this._baseHref=zO(HO(n)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,n=""){return this.path()==this.normalize(t+Ah(n))}normalize(t){return r.stripTrailingSlash(function V7(r,e){return r&&e.startsWith(r)?e.substring(r.length):e}(this._baseHref,HO(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,n="",i=null){this._locationStrategy.pushState(i,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ah(n)),i)}replaceState(t,n="",i=null){this._locationStrategy.replaceState(i,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ah(n)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)})),()=>{const n=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(n,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",n){this._urlChangeListeners.forEach(i=>i(t,n))}subscribe(t,n,i){return this._subject.subscribe({next:t,error:n,complete:i})}}return r.normalizeQueryParams=Ah,r.joinWithSlash=V_,r.stripTrailingSlash=zO,r.\u0275fac=function(t){return new(t||r)(si(xd))},r.\u0275prov=ci({token:r,factory:function(){return function U7(){return new H_(si(xd))}()},providedIn:"root"}),r})();function HO(r){return r.replace(/\/index.html$/,"")}let aW=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=is({type:r}),r.\u0275inj=ys({}),r})();let cW=(()=>{class r{}return r.\u0275prov=ci({token:r,providedIn:"root",factory:()=>new fW(si(ju),window)}),r})();class fW{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function hW(r,e){const t=r.getElementById(e)||r.getElementsByName(e)[0];if(t)return t;if("function"==typeof r.createTreeWalker&&r.body&&(r.body.createShadowRoot||r.body.attachShadow)){const n=r.createTreeWalker(r.body,NodeFilter.SHOW_ELEMENT);let i=n.currentNode;for(;i;){const o=i.shadowRoot;if(o){const a=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(a)return a}i=n.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(n-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=aP(this.window.history)||aP(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function aP(r){return Object.getOwnPropertyDescriptor(r,"scrollRestoration")}class aS extends class OW extends class B7{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function F7(r){i1||(i1=r)}(new aS)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function PW(){return Am=Am||document.querySelector("base"),Am?Am.getAttribute("href"):null}();return null==t?null:function NW(r){p1=p1||document.createElement("a"),p1.setAttribute("href",r);const e=p1.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Am=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function CH(r,e){e=encodeURIComponent(e);for(const t of r.split(";")){const n=t.indexOf("="),[i,o]=-1==n?[t,""]:[t.slice(0,n),t.slice(n+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let p1,Am=null;const cP=new bi("TRANSITION_ID"),kW=[{provide:qb,useFactory:function LW(r,e,t){return()=>{t.get(Kb).donePromise.then(()=>{const n=wd(),i=e.querySelectorAll(`style[ng-transition="${r}"]`);for(let o=0;o<i.length;o++)n.remove(i[o])})}},deps:[cP,ju,Al],multi:!0}];let FW=(()=>{class r{build(){return new XMLHttpRequest}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=ci({token:r,factory:r.\u0275fac}),r})();const v1=new bi("EventManagerPlugins");let m1=(()=>{class r{constructor(t,n){this._zone=n,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,n,i){return this._findPluginFor(n).addEventListener(t,n,i)}addGlobalEventListener(t,n,i){return this._findPluginFor(n).addGlobalEventListener(t,n,i)}getZone(){return this._zone}_findPluginFor(t){const n=this._eventNameToPlugin.get(t);if(n)return n;const i=this._plugins;for(let o=0;o<i.length;o++){const a=i[o];if(a.supports(t))return this._eventNameToPlugin.set(t,a),a}throw new Error(`No event manager plugin found for event ${t}`)}}return r.\u0275fac=function(t){return new(t||r)(si(v1),si(ds))},r.\u0275prov=ci({token:r,factory:r.\u0275fac}),r})();class fP{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const i=wd().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,n)}}let hP=(()=>{class r{constructor(){this._stylesSet=new Set}addStyles(t){const n=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),n.add(i))}),this.onStylesAdded(n)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=ci({token:r,factory:r.\u0275fac}),r})(),Dm=(()=>{class r extends hP{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,n,i){t.forEach(o=>{const a=this._doc.createElement("style");a.textContent=o,i.push(n.appendChild(a))})}addHost(t){const n=[];this._addStylesToHost(this._stylesSet,t,n),this._hostNodes.set(t,n)}removeHost(t){const n=this._hostNodes.get(t);n&&n.forEach(dP),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((n,i)=>{this._addStylesToHost(t,i,n)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(dP))}}return r.\u0275fac=function(t){return new(t||r)(si(ju))},r.\u0275prov=ci({token:r,factory:r.\u0275fac}),r})();function dP(r){wd().remove(r)}const sS={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},uS=/%COMP%/g;function y1(r,e,t){for(let n=0;n<e.length;n++){let i=e[n];Array.isArray(i)?y1(r,i,t):(i=i.replace(uS,r),t.push(i))}return t}function vP(r){return e=>{if("__ngUnwrap__"===e)return r;!1===r(e)&&(e.preventDefault(),e.returnValue=!1)}}let lS=(()=>{class r{constructor(t,n,i){this.eventManager=t,this.sharedStylesHost=n,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new cS(t)}createRenderer(t,n){if(!t||!n)return this.defaultRenderer;switch(n.encapsulation){case Wa.Emulated:{let i=this.rendererByCompId.get(n.id);return i||(i=new VW(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,i)),i.applyToHost(t),i}case 1:case Wa.ShadowDom:return new HW(this.eventManager,this.sharedStylesHost,t,n);default:if(!this.rendererByCompId.has(n.id)){const i=y1(n.id,n.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return r.\u0275fac=function(t){return new(t||r)(si(m1),si(Dm),si(Em))},r.\u0275prov=ci({token:r,factory:r.\u0275fac}),r})();class cS{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(sS[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(yP(e)?e.content:e).appendChild(t)}insertBefore(e,t,n){e&&(yP(e)?e.content:e).insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,i){if(i){t=i+":"+t;const o=sS[i];o?e.setAttributeNS(o,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const i=sS[n];i?e.removeAttributeNS(i,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,i){i&(Lr.DashCase|Lr.Important)?e.style.setProperty(t,n,i&Lr.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&Lr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,vP(n)):this.eventManager.addEventListener(e,t,vP(n))}}function yP(r){return"TEMPLATE"===r.tagName&&void 0!==r.content}class VW extends cS{constructor(e,t,n,i){super(e),this.component=n;const o=y1(i+"-"+n.id,n.styles,[]);t.addStyles(o),this.contentAttr=function zW(r){return"_ngcontent-%COMP%".replace(uS,r)}(i+"-"+n.id),this.hostAttr=function GW(r){return"_nghost-%COMP%".replace(uS,r)}(i+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class HW extends cS{constructor(e,t,n,i){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=y1(i.id,i.styles,[]);for(let a=0;a<o.length;a++){const s=document.createElement("style");s.textContent=o[a],this.shadowRoot.appendChild(s)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let WW=(()=>{class r extends fP{constructor(t){super(t)}supports(t){return!0}addEventListener(t,n,i){return t.addEventListener(n,i,!1),()=>this.removeEventListener(t,n,i)}removeEventListener(t,n,i){return t.removeEventListener(n,i)}}return r.\u0275fac=function(t){return new(t||r)(si(ju))},r.\u0275prov=ci({token:r,factory:r.\u0275fac}),r})();const bP=["alt","control","meta","shift"],$W={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},YW={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey};let XW=(()=>{class r extends fP{constructor(t){super(t)}supports(t){return null!=r.parseEventName(t)}addEventListener(t,n,i){const o=r.parseEventName(n),a=r.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>wd().onAndCancel(t,o.domEventName,a))}static parseEventName(t){const n=t.toLowerCase().split("."),i=n.shift();if(0===n.length||"keydown"!==i&&"keyup"!==i)return null;const o=r._normalizeKey(n.pop());let a="",s=n.indexOf("code");if(s>-1&&(n.splice(s,1),a="code."),bP.forEach(l=>{const c=n.indexOf(l);c>-1&&(n.splice(c,1),a+=l+".")}),a+=o,0!=n.length||0===o.length)return null;const u={};return u.domEventName=i,u.fullKey=a,u}static matchEventFullKeyCode(t,n){let i=$W[t.key]||t.key,o="";return n.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),bP.forEach(a=>{a!==i&&(0,YW[a])(t)&&(o+=a+".")}),o+=i,o===n)}static eventCallback(t,n,i){return o=>{r.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>n(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return r.\u0275fac=function(t){return new(t||r)(si(ju))},r.\u0275prov=ci({token:r,factory:r.\u0275fac}),r})();const xP=[{provide:lO,useValue:"browser"},{provide:uO,useValue:function qW(){aS.makeCurrent()},multi:!0},{provide:ju,useFactory:function ZW(){return function Tz(r){sE=r}(document),document},deps:[]}],QW=bO(L7,"browser",xP),EP=new bi(""),_P=[{provide:Zb,useClass:class RW{addToWindow(e){Gi.getAngularTestability=(n,i=!0)=>{const o=e.findTestabilityInTree(n,i);if(null==o)throw new Error("Could not find testability for element.");return o},Gi.getAllAngularTestabilities=()=>e.getAllTestabilities(),Gi.getAllAngularRootElements=()=>e.getAllRootElements(),Gi.frameworkStabilizers||(Gi.frameworkStabilizers=[]),Gi.frameworkStabilizers.push(n=>{const i=Gi.getAllAngularTestabilities();let o=i.length,a=!1;const s=function(u){a=a||u,o--,0==o&&n(a)};i.forEach(function(u){u.whenStable(s)})})}findTestabilityInTree(e,t,n){return null==t?null:e.getTestability(t)??(n?wd().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:pO,useClass:N_,deps:[ds,L_,Zb]},{provide:N_,useClass:N_,deps:[ds,L_,Zb]}],SP=[{provide:mE,useValue:"root"},{provide:cv,useFactory:function KW(){return new cv},deps:[]},{provide:v1,useClass:WW,multi:!0,deps:[ju,ds,lO]},{provide:v1,useClass:XW,multi:!0,deps:[ju]},{provide:lS,useClass:lS,deps:[m1,Dm,Em]},{provide:VD,useExisting:lS},{provide:hP,useExisting:Dm},{provide:Dm,useClass:Dm,deps:[ju]},{provide:m1,useClass:m1,deps:[v1,ds]},{provide:class dW{},useClass:FW,deps:[]},[]];let JW=(()=>{class r{constructor(t){}static withServerTransition(t){return{ngModule:r,providers:[{provide:Em,useValue:t.appId},{provide:cP,useExisting:Em},kW]}}}return r.\u0275fac=function(t){return new(t||r)(si(EP,12))},r.\u0275mod=is({type:r}),r.\u0275inj=ys({providers:[...SP,..._P],imports:[aW,k7]}),r})(),MP=(()=>{class r{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return r.\u0275fac=function(t){return new(t||r)(si(ju))},r.\u0275prov=ci({token:r,factory:function(t){let n=null;return n=t?new t:function t$(){return new MP(si(ju))}(),n},providedIn:"root"}),r})();function pi(...r){return Oe(r,$n(r))}typeof window<"u"&&window;class Oc extends Rn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:n}=this;if(e)throw t;return this._throwIfClosed(),n}next(e){super.next(this._value=e)}}const b1=Ce(r=>function(){r(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:l$}=Array,{getPrototypeOf:c$,prototype:f$,keys:h$}=Object;const{isArray:p$}=Array;function DP(...r){const e=$n(r),t=function kr(r){return me(Wn(r))?r.pop():void 0}(r),{args:n,keys:i}=function d$(r){if(1===r.length){const e=r[0];if(l$(e))return{args:e,keys:null};if(function g$(r){return r&&"object"==typeof r&&c$(r)===f$}(e)){const t=h$(e);return{args:t.map(n=>e[n]),keys:t}}}return{args:r,keys:null}}(r);if(0===n.length)return Oe([],e);const o=new ir(function b$(r,e,t=Tn){return n=>{TP(e,()=>{const{length:i}=r,o=new Array(i);let a=i,s=i;for(let u=0;u<i;u++)TP(e,()=>{const l=Oe(r[u],e);let c=!1;l.subscribe(gr(n,f=>{o[u]=f,c||(c=!0,s--),s||n.next(t(o.slice()))},()=>{--a||n.complete()}))},n)},n)}}(n,e,i?a=>function y$(r,e){return r.reduce((t,n,i)=>(t[n]=e[i],t),{})}(i,a):Tn));return t?o.pipe(function m$(r){return Ir(e=>function v$(r,e){return p$(e)?r(...e):r(e)}(r,e))}(t)):o}function TP(r,e,t){r?ze(t,r,e):e()}function dS(...r){return function w$(){return an(1)}()(Oe(r,$n(r)))}function IP(r){return new ir(e=>{ce(r()).subscribe(e)})}function Tm(r,e){const t=me(r)?r:()=>r,n=i=>i.error(t());return new ir(e?i=>e.schedule(n,0,i):n)}function gS(){return yr((r,e)=>{let t=null;r._refCount++;const n=gr(e,void 0,void 0,void 0,()=>{if(!r||r._refCount<=0||0<--r._refCount)return void(t=null);const i=r._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});r.subscribe(n),n.closed||(t=r.connect())})}class OP extends ir{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Mr(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new te;const t=this.getSubject();e.add(this.source.subscribe(gr(t,void 0,()=>{this._teardown(),t.complete()},n=>{this._teardown(),t.error(n)},()=>this._teardown()))),e.closed&&(this._connection=null,e=te.EMPTY)}return e}refCount(){return gS()(this)}}function Af(r,e){return yr((t,n)=>{let i=null,o=0,a=!1;const s=()=>a&&!i&&n.complete();t.subscribe(gr(n,u=>{i?.unsubscribe();let l=0;const c=o++;ce(r(u,c)).subscribe(i=gr(n,f=>n.next(e?e(u,f,c,l++):f),()=>{i=null,s()}))},()=>{a=!0,s()}))})}function Im(r){return r<=0?()=>Ke:yr((e,t)=>{let n=0;e.subscribe(gr(t,i=>{++n<=r&&(t.next(i),r<=n&&t.complete())}))})}function _d(r,e){return yr((t,n)=>{let i=0;t.subscribe(gr(n,o=>r.call(e,o,i++)&&n.next(o)))})}function w1(r){return yr((e,t)=>{let n=!1;e.subscribe(gr(t,i=>{n=!0,t.next(i)},()=>{n||t.next(r),t.complete()}))})}function PP(r=E$){return yr((e,t)=>{let n=!1;e.subscribe(gr(t,i=>{n=!0,t.next(i)},()=>n?t.complete():t.error(r())))})}function E$(){return new b1}function Sd(r,e){const t=arguments.length>=2;return n=>n.pipe(r?_d((i,o)=>r(i,o,n)):Tn,Im(1),t?w1(e):PP(()=>new b1))}function zg(r,e){return me(e)?gt(r,e,1):gt(r,1)}function iu(r,e,t){const n=me(r)||e||t?{next:r,error:e,complete:t}:r;return n?yr((i,o)=>{var a;null===(a=n.subscribe)||void 0===a||a.call(n);let s=!0;i.subscribe(gr(o,u=>{var l;null===(l=n.next)||void 0===l||l.call(n,u),o.next(u)},()=>{var u;s=!1,null===(u=n.complete)||void 0===u||u.call(n),o.complete()},u=>{var l;s=!1,null===(l=n.error)||void 0===l||l.call(n,u),o.error(u)},()=>{var u,l;s&&(null===(u=n.unsubscribe)||void 0===u||u.call(n)),null===(l=n.finalize)||void 0===l||l.call(n)}))}):Tn}function Md(r){return yr((e,t)=>{let o,n=null,i=!1;n=e.subscribe(gr(t,void 0,void 0,a=>{o=ce(r(a,Md(r)(e))),n?(n.unsubscribe(),n=null,o.subscribe(t)):i=!0})),i&&(n.unsubscribe(),n=null,o.subscribe(t))})}function _$(r,e,t,n,i){return(o,a)=>{let s=t,u=e,l=0;o.subscribe(gr(a,c=>{const f=l++;u=s?r(u,c,f):(s=!0,c),n&&a.next(u)},i&&(()=>{s&&a.next(u),a.complete()})))}}function NP(r,e){return yr(_$(r,e,arguments.length>=2,!0))}function pS(r){return r<=0?()=>Ke:yr((e,t)=>{let n=[];e.subscribe(gr(t,i=>{n.push(i),r<n.length&&n.shift()},()=>{for(const i of n)t.next(i);t.complete()},void 0,()=>{n=null}))})}function LP(r,e){const t=arguments.length>=2;return n=>n.pipe(r?_d((i,o)=>r(i,o,n)):Tn,pS(1),t?w1(e):PP(()=>new b1))}function vS(r){return yr((e,t)=>{try{e.subscribe(t)}finally{t.add(r)}})}const no="primary",Om=Symbol("RouteTitle");class C${constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Pv(r){return new C$(r)}function A$(r,e,t){const n=t.path.split("/");if(n.length>r.length||"full"===t.pathMatch&&(e.hasChildren()||n.length<r.length))return null;const i={};for(let o=0;o<n.length;o++){const a=n[o],s=r[o];if(a.startsWith(":"))i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:r.slice(0,n.length),posParams:i}}function Df(r,e){const t=r?Object.keys(r):void 0,n=e?Object.keys(e):void 0;if(!t||!n||t.length!=n.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!kP(r[i],e[i]))return!1;return!0}function kP(r,e){if(Array.isArray(r)&&Array.isArray(e)){if(r.length!==e.length)return!1;const t=[...r].sort(),n=[...e].sort();return t.every((i,o)=>n[o]===i)}return r===e}function RP(r){return Array.prototype.concat.apply([],r)}function FP(r){return r.length>0?r[r.length-1]:null}function Vs(r,e){for(const t in r)r.hasOwnProperty(t)&&e(r[t],t)}function Cd(r){return J2(r)?r:Fb(r)?Oe(Promise.resolve(r)):pi(r)}const I$={exact:function zP(r,e,t){if(!Ug(r.segments,e.segments)||!x1(r.segments,e.segments,t)||r.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children)if(!r.children[n]||!zP(r.children[n],e.children[n],t))return!1;return!0},subset:GP},BP={exact:function O$(r,e){return Df(r,e)},subset:function P$(r,e){return Object.keys(e).length<=Object.keys(r).length&&Object.keys(e).every(t=>kP(r[t],e[t]))},ignored:()=>!0};function jP(r,e,t){return I$[t.paths](r.root,e.root,t.matrixParams)&&BP[t.queryParams](r.queryParams,e.queryParams)&&!("exact"===t.fragment&&r.fragment!==e.fragment)}function GP(r,e,t){return UP(r,e,e.segments,t)}function UP(r,e,t,n){if(r.segments.length>t.length){const i=r.segments.slice(0,t.length);return!(!Ug(i,t)||e.hasChildren()||!x1(i,t,n))}if(r.segments.length===t.length){if(!Ug(r.segments,t)||!x1(r.segments,t,n))return!1;for(const i in e.children)if(!r.children[i]||!GP(r.children[i],e.children[i],n))return!1;return!0}{const i=t.slice(0,r.segments.length),o=t.slice(r.segments.length);return!!(Ug(r.segments,i)&&x1(r.segments,i,n)&&r.children[no])&&UP(r.children[no],e,o,n)}}function x1(r,e,t){return e.every((n,i)=>BP[t](r[i].parameters,n.parameters))}class Gg{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Pv(this.queryParams)),this._queryParamMap}toString(){return k$.serialize(this)}}class ao{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Vs(t,(n,i)=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return E1(this)}}class Pm{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Pv(this.parameters)),this._parameterMap}toString(){return $P(this)}}function Ug(r,e){return r.length===e.length&&r.every((t,n)=>t.path===e[n].path)}let VP=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=ci({token:r,factory:function(){return new yS},providedIn:"root"}),r})();class yS{parse(e){const t=new H$(e);return new Gg(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Nm(e.root,!0)}`,n=function B$(r){const e=Object.keys(r).map(t=>{const n=r[t];return Array.isArray(n)?n.map(i=>`${_1(t)}=${_1(i)}`).join("&"):`${_1(t)}=${_1(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${n}${"string"==typeof e.fragment?`#${function R$(r){return encodeURI(r)}(e.fragment)}`:""}`}}const k$=new yS;function E1(r){return r.segments.map(e=>$P(e)).join("/")}function Nm(r,e){if(!r.hasChildren())return E1(r);if(e){const t=r.children[no]?Nm(r.children[no],!1):"",n=[];return Vs(r.children,(i,o)=>{o!==no&&n.push(`${o}:${Nm(i,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}{const t=function L$(r,e){let t=[];return Vs(r.children,(n,i)=>{i===no&&(t=t.concat(e(n,i)))}),Vs(r.children,(n,i)=>{i!==no&&(t=t.concat(e(n,i)))}),t}(r,(n,i)=>i===no?[Nm(r.children[no],!1)]:[`${i}:${Nm(n,!1)}`]);return 1===Object.keys(r.children).length&&null!=r.children[no]?`${E1(r)}/${t[0]}`:`${E1(r)}/(${t.join("//")})`}}function HP(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function _1(r){return HP(r).replace(/%3B/gi,";")}function bS(r){return HP(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function S1(r){return decodeURIComponent(r)}function WP(r){return S1(r.replace(/\+/g,"%20"))}function $P(r){return`${bS(r.path)}${function F$(r){return Object.keys(r).map(e=>`;${bS(e)}=${bS(r[e])}`).join("")}(r.parameters)}`}const j$=/^[^\/()?;=#]+/;function M1(r){const e=r.match(j$);return e?e[0]:""}const z$=/^[^=?&#]+/,U$=/^[^&#]+/;class H${constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ao([],{}):new ao([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[no]=new ao(e,t)),n}parseSegment(){const e=M1(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new dr(4009,!1);return this.capture(e),new Pm(S1(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=M1(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const i=M1(this.remaining);i&&(n=i,this.capture(n))}e[S1(t)]=S1(n)}parseQueryParam(e){const t=function G$(r){const e=r.match(z$);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const a=function V$(r){const e=r.match(U$);return e?e[0]:""}(this.remaining);a&&(n=a,this.capture(n))}const i=WP(t),o=WP(n);if(e.hasOwnProperty(i)){let a=e[i];Array.isArray(a)||(a=[a],e[i]=a),a.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=M1(this.remaining),i=this.remaining[n.length];if("/"!==i&&")"!==i&&";"!==i)throw new dr(4010,!1);let o;n.indexOf(":")>-1?(o=n.slice(0,n.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=no);const a=this.parseChildren();t[o]=1===Object.keys(a).length?a[no]:new ao([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new dr(4011,!1)}}function wS(r){return r.segments.length>0?new ao([],{[no]:r}):r}function C1(r){const e={};for(const n of Object.keys(r.children)){const o=C1(r.children[n]);(o.segments.length>0||o.hasChildren())&&(e[n]=o)}return function W$(r){if(1===r.numberOfChildren&&r.children[no]){const e=r.children[no];return new ao(r.segments.concat(e.segments),e.children)}return r}(new ao(r.segments,e))}function Vg(r){return r instanceof Gg}function X$(r,e,t,n,i){if(0===t.length)return Nv(e.root,e.root,e.root,n,i);const o=function qP(r){if("string"==typeof r[0]&&1===r.length&&"/"===r[0])return new XP(!0,0,r);let e=0,t=!1;const n=r.reduce((i,o,a)=>{if("object"==typeof o&&null!=o){if(o.outlets){const s={};return Vs(o.outlets,(u,l)=>{s[l]="string"==typeof u?u.split("/"):u}),[...i,{outlets:s}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===a?(o.split("/").forEach((s,u)=>{0==u&&"."===s||(0==u&&""===s?t=!0:".."===s?e++:""!=s&&i.push(s))}),i):[...i,o]},[]);return new XP(t,e,n)}(t);return o.toRoot()?Nv(e.root,e.root,new ao([],{}),n,i):function a(u){const l=function K$(r,e,t,n){if(r.isAbsolute)return new Lv(e.root,!0,0);if(-1===n)return new Lv(t,t===e.root,0);return function KP(r,e,t){let n=r,i=e,o=t;for(;o>i;){if(o-=i,n=n.parent,!n)throw new dr(4005,!1);i=n.segments.length}return new Lv(n,!1,i-o)}(t,n+(Lm(r.commands[0])?0:1),r.numberOfDoubleDots)}(o,e,r.snapshot?._urlSegment,u),c=l.processChildren?Rm(l.segmentGroup,l.index,o.commands):ES(l.segmentGroup,l.index,o.commands);return Nv(e.root,l.segmentGroup,c,n,i)}(r.snapshot?._lastPathIndex)}function Lm(r){return"object"==typeof r&&null!=r&&!r.outlets&&!r.segmentPath}function km(r){return"object"==typeof r&&null!=r&&r.outlets}function Nv(r,e,t,n,i){let a,o={};n&&Vs(n,(u,l)=>{o[l]=Array.isArray(u)?u.map(c=>`${c}`):`${u}`}),a=r===e?t:YP(r,e,t);const s=wS(C1(a));return new Gg(s,o,i)}function YP(r,e,t){const n={};return Vs(r.children,(i,o)=>{n[o]=i===e?t:YP(i,e,t)}),new ao(r.segments,n)}class XP{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&Lm(n[0]))throw new dr(4003,!1);const i=n.find(km);if(i&&i!==FP(n))throw new dr(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Lv{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function ES(r,e,t){if(r||(r=new ao([],{})),0===r.segments.length&&r.hasChildren())return Rm(r,e,t);const n=function Q$(r,e,t){let n=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<r.segments.length;){if(n>=t.length)return o;const a=r.segments[i],s=t[n];if(km(s))break;const u=`${s}`,l=n<t.length-1?t[n+1]:null;if(i>0&&void 0===u)break;if(u&&l&&"object"==typeof l&&void 0===l.outlets){if(!QP(u,l,a))return o;n+=2}else{if(!QP(u,{},a))return o;n++}i++}return{match:!0,pathIndex:i,commandIndex:n}}(r,e,t),i=t.slice(n.commandIndex);if(n.match&&n.pathIndex<r.segments.length){const o=new ao(r.segments.slice(0,n.pathIndex),{});return o.children[no]=new ao(r.segments.slice(n.pathIndex),r.children),Rm(o,0,i)}return n.match&&0===i.length?new ao(r.segments,{}):n.match&&!r.hasChildren()?_S(r,e,t):n.match?Rm(r,0,i):_S(r,e,t)}function Rm(r,e,t){if(0===t.length)return new ao(r.segments,{});{const n=function Z$(r){return km(r[0])?r[0].outlets:{[no]:r}}(t),i={};return Vs(n,(o,a)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[a]=ES(r.children[a],e,o))}),Vs(r.children,(o,a)=>{void 0===n[a]&&(i[a]=o)}),new ao(r.segments,i)}}function _S(r,e,t){const n=r.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(km(o)){const u=J$(o.outlets);return new ao(n,u)}if(0===i&&Lm(t[0])){n.push(new Pm(r.segments[e].path,ZP(t[0]))),i++;continue}const a=km(o)?o.outlets[no]:`${o}`,s=i<t.length-1?t[i+1]:null;a&&s&&Lm(s)?(n.push(new Pm(a,ZP(s))),i+=2):(n.push(new Pm(a,{})),i++)}return new ao(n,{})}function J$(r){const e={};return Vs(r,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=_S(new ao([],{}),0,t))}),e}function ZP(r){const e={};return Vs(r,(t,n)=>e[n]=`${t}`),e}function QP(r,e,t){return r==t.path&&Df(e,t.parameters)}class Th{constructor(e,t){this.id=e,this.url=t}}class SS extends Th{constructor(e,t,n="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=n,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Hg extends Th{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class A1 extends Th{constructor(e,t,n,i){super(e,t),this.reason=n,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class JP extends Th{constructor(e,t,n,i){super(e,t),this.error=n,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class eY extends Th{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tY extends Th{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nY extends Th{constructor(e,t,n,i,o){super(e,t),this.urlAfterRedirects=n,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class rY extends Th{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class iY extends Th{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class oY{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class aY{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class sY{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uY{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lY{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cY{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class eN{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class tN{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=MS(e,this._root);return t?t.children.map(n=>n.value):[]}firstChild(e){const t=MS(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=CS(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return CS(e,this._root).map(t=>t.value)}}function MS(r,e){if(r===e.value)return e;for(const t of e.children){const n=MS(r,t);if(n)return n}return null}function CS(r,e){if(r===e.value)return[e];for(const t of e.children){const n=CS(r,t);if(n.length)return n.unshift(e),n}return[]}class Ih{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function kv(r){const e={};return r&&r.children.forEach(t=>e[t.value.outlet]=t),e}class nN extends tN{constructor(e,t){super(e),this.snapshot=t,AS(this,e)}toString(){return this.snapshot.toString()}}function rN(r,e){const t=function hY(r,e){const a=new D1([],{},{},"",{},no,e,null,r.root,-1,{});return new oN("",new Ih(a,[]))}(r,e),n=new Oc([new Pm("",{})]),i=new Oc({}),o=new Oc({}),a=new Oc({}),s=new Oc(""),u=new Wg(n,i,a,s,o,no,e,t.root);return u.snapshot=t.root,new nN(new Ih(u,[]),t)}class Wg{constructor(e,t,n,i,o,a,s,u){this.url=e,this.params=t,this.queryParams=n,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this.title=this.data?.pipe(Ir(l=>l[Om]))??pi(void 0),this._futureSnapshot=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ir(e=>Pv(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ir(e=>Pv(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function iN(r,e="emptyOnly"){const t=r.pathFromRoot;let n=0;if("always"!==e)for(n=t.length-1;n>=1;){const i=t[n],o=t[n-1];if(i.routeConfig&&""===i.routeConfig.path)n--;else{if(o.component)break;n--}}return function dY(r){return r.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(n))}class D1{constructor(e,t,n,i,o,a,s,u,l,c,f,h){this.url=e,this.params=t,this.queryParams=n,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this.title=this.data?.[Om],this.routeConfig=u,this._urlSegment=l,this._lastPathIndex=c,this._correctedLastPathIndex=h??c,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Pv(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Pv(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class oN extends tN{constructor(e,t){super(t),this.url=e,AS(this,t)}toString(){return aN(this._root)}}function AS(r,e){e.value._routerState=r,e.children.forEach(t=>AS(r,t))}function aN(r){const e=r.children.length>0?` { ${r.children.map(aN).join(", ")} } `:"";return`${r.value}${e}`}function DS(r){if(r.snapshot){const e=r.snapshot,t=r._futureSnapshot;r.snapshot=t,Df(e.queryParams,t.queryParams)||r.queryParams.next(t.queryParams),e.fragment!==t.fragment&&r.fragment.next(t.fragment),Df(e.params,t.params)||r.params.next(t.params),function D$(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;++t)if(!Df(r[t],e[t]))return!1;return!0}(e.url,t.url)||r.url.next(t.url),Df(e.data,t.data)||r.data.next(t.data)}else r.snapshot=r._futureSnapshot,r.data.next(r._futureSnapshot.data)}function TS(r,e){const t=Df(r.params,e.params)&&function N$(r,e){return Ug(r,e)&&r.every((t,n)=>Df(t.parameters,e[n].parameters))}(r.url,e.url);return t&&!(!r.parent!=!e.parent)&&(!r.parent||TS(r.parent,e.parent))}function Fm(r,e,t){if(t&&r.shouldReuseRoute(e.value,t.value.snapshot)){const n=t.value;n._futureSnapshot=e.value;const i=function pY(r,e,t){return e.children.map(n=>{for(const i of t.children)if(r.shouldReuseRoute(n.value,i.value.snapshot))return Fm(r,n,i);return Fm(r,n)})}(r,e,t);return new Ih(n,i)}{if(r.shouldAttach(e.value)){const o=r.retrieve(e.value);if(null!==o){const a=o.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(s=>Fm(r,s)),a}}const n=function vY(r){return new Wg(new Oc(r.url),new Oc(r.params),new Oc(r.queryParams),new Oc(r.fragment),new Oc(r.data),r.outlet,r.component,r)}(e.value),i=e.children.map(o=>Fm(r,o));return new Ih(n,i)}}const IS="ngNavigationCancelingError";function sN(r,e){const{redirectTo:t,navigationBehaviorOptions:n}=Vg(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=uN(!1,0,e);return i.url=t,i.navigationBehaviorOptions=n,i}function uN(r,e,t){const n=new Error("NavigationCancelingError: "+(r||""));return n[IS]=!0,n.cancellationCode=e,t&&(n.url=t),n}function lN(r){return cN(r)&&Vg(r.url)}function cN(r){return r&&r[IS]}class mY{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Bm,this.attachRef=null}}let Bm=(()=>{class r{constructor(){this.contexts=new Map}onChildOutletCreated(t,n){const i=this.getOrCreateContext(t);i.outlet=n,this.contexts.set(t,i)}onChildOutletDestroyed(t){const n=this.getContext(t);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let n=this.getContext(t);return n||(n=new mY,this.contexts.set(t,n)),n}getContext(t){return this.contexts.get(t)||null}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=ci({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const T1=!1;let OS=(()=>{class r{constructor(t,n,i,o,a){this.parentContexts=t,this.location=n,this.changeDetector=o,this.environmentInjector=a,this.activated=null,this._activatedRoute=null,this.activateEvents=new xu,this.deactivateEvents=new xu,this.attachEvents=new xu,this.detachEvents=new xu,this.name=i||no,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new dr(4012,T1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new dr(4012,T1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new dr(4012,T1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,n){this.activated=t,this._activatedRoute=n,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,n){if(this.isActivated)throw new dr(4013,T1);this._activatedRoute=t;const i=this.location,a=t._futureSnapshot.component,s=this.parentContexts.getOrCreateContext(this.name).children,u=new yY(t,s,i.injector);if(n&&function bY(r){return!!r.resolveComponentFactory}(n)){const l=n.resolveComponentFactory(a);this.activated=i.createComponent(l,i.length,u)}else this.activated=i.createComponent(a,{index:i.length,injector:u,environmentInjector:n??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return r.\u0275fac=function(t){return new(t||r)(ii(Bm),ii(Tl),pf("name"),ii(e1),ii(pd))},r.\u0275dir=Fo({type:r,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),r})();class yY{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===Wg?this.route:e===Bm?this.childContexts:this.parent.get(e,t)}}let PS=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=_s({type:r,selectors:[["ng-component"]],standalone:!0,features:[EI],decls:1,vars:0,template:function(t,n){1&t&&kg(0,"router-outlet")},dependencies:[OS],encapsulation:2}),r})();function fN(r,e){return r.providers&&!r._injector&&(r._injector=Hb(r.providers,e,`Route: ${r.path}`)),r._injector??e}function LS(r){const e=r.children&&r.children.map(LS),t=e?{...r,children:e}:{...r};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==no&&(t.component=PS),t}function Pl(r){return r.outlet||no}function hN(r,e){const t=r.filter(n=>Pl(n)===e);return t.push(...r.filter(n=>Pl(n)!==e)),t}function jm(r){if(!r)return null;if(r.routeConfig?._injector)return r.routeConfig._injector;for(let e=r.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class SY{constructor(e,t,n,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=i}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),DS(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const i=kv(t);e.children.forEach(o=>{const a=o.value.outlet;this.deactivateRoutes(o,i[a],n),delete i[a]}),Vs(i,(o,a)=>{this.deactivateRouteAndItsChildren(o,n)})}deactivateRoutes(e,t,n){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const a=n.getContext(i.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,n);else o&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet),i=n&&e.value.component?n.children:t,o=kv(e);for(const a of Object.keys(o))this.deactivateRouteAndItsChildren(o[a],i);if(n&&n.outlet){const a=n.outlet.detach(),s=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:s})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet),i=n&&e.value.component?n.children:t,o=kv(e);for(const a of Object.keys(o))this.deactivateRouteAndItsChildren(o[a],i);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(e,t,n){const i=kv(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],n),this.forwardEvent(new cY(o.value.snapshot))}),e.children.length&&this.forwardEvent(new uY(e.value.snapshot))}activateRoutes(e,t,n){const i=e.value,o=t?t.value:null;if(DS(i),i===o)if(i.component){const a=n.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,n);else if(i.component){const a=n.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const s=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),DS(s.route.value),this.activateChildRoutes(e,null,a.children)}else{const s=jm(i.snapshot),u=s?.get(um)??null;a.attachRef=null,a.route=i,a.resolver=u,a.injector=s,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(e,null,a.children)}}else this.activateChildRoutes(e,null,n)}}class dN{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class I1{constructor(e,t){this.component=e,this.route=t}}function MY(r,e,t){const n=r._root;return zm(n,e?e._root:null,t,[n.value])}function Rv(r,e){const t=Symbol(),n=e.get(r,t);return n===t?"function"!=typeof r||function Wu(r){return null!==Hu(r)}(r)?e.get(r):r:n}function zm(r,e,t,n,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=kv(e);return r.children.forEach(a=>{(function AY(r,e,t,n,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=r.value,a=e?e.value:null,s=t?t.getContext(r.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){const u=function DY(r,e,t){if("function"==typeof t)return t(r,e);switch(t){case"pathParamsChange":return!Ug(r.url,e.url);case"pathParamsOrQueryParamsChange":return!Ug(r.url,e.url)||!Df(r.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!TS(r,e)||!Df(r.queryParams,e.queryParams);default:return!TS(r,e)}}(a,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new dN(n)):(o.data=a.data,o._resolvedData=a._resolvedData),zm(r,e,o.component?s?s.children:null:t,n,i),u&&s&&s.outlet&&s.outlet.isActivated&&i.canDeactivateChecks.push(new I1(s.outlet.component,a))}else a&&Gm(e,s,i),i.canActivateChecks.push(new dN(n)),zm(r,null,o.component?s?s.children:null:t,n,i)})(a,o[a.value.outlet],t,n.concat([a.value]),i),delete o[a.value.outlet]}),Vs(o,(a,s)=>Gm(a,t.getContext(s),i)),i}function Gm(r,e,t){const n=kv(r),i=r.value;Vs(n,(o,a)=>{Gm(o,i.component?e?e.children.getContext(a):null:e,t)}),t.canDeactivateChecks.push(new I1(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Um(r){return"function"==typeof r}function kS(r){return r instanceof b1||"EmptyError"===r?.name}const O1=Symbol("INITIAL_VALUE");function Fv(){return Af(r=>DP(r.map(e=>e.pipe(Im(1),function x$(...r){const e=$n(r);return yr((t,n)=>{(e?dS(r,t,e):dS(r,t)).subscribe(n)})}(O1)))).pipe(Ir(e=>{for(const t of e)if(!0!==t){if(t===O1)return O1;if(!1===t||t instanceof Gg)return t}return!0}),_d(e=>e!==O1),Im(1)))}function gN(r){return function gn(...r){return kn(r)}(iu(e=>{if(Vg(e))throw sN(0,e)}),Ir(e=>!0===e))}const RS={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function pN(r,e,t,n,i){const o=FS(r,e,t);return o.matched?function WY(r,e,t,n){const i=e.canMatch;return i&&0!==i.length?pi(i.map(a=>{const s=Rv(a,r);return Cd(function LY(r){return r&&Um(r.canMatch)}(s)?s.canMatch(e,t):r.runInContext(()=>s(e,t)))})).pipe(Fv(),gN()):pi(!0)}(n=fN(e,n),e,t).pipe(Ir(a=>!0===a?o:{...RS})):pi(o)}function FS(r,e,t){if(""===e.path)return"full"===e.pathMatch&&(r.hasChildren()||t.length>0)?{...RS}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||A$)(t,r,e);if(!i)return{...RS};const o={};Vs(i.posParams,(s,u)=>{o[u]=s.path});const a=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function P1(r,e,t,n,i="corrected"){if(t.length>0&&function XY(r,e,t){return t.some(n=>N1(r,e,n)&&Pl(n)!==no)}(r,t,n)){const a=new ao(e,function YY(r,e,t,n){const i={};i[no]=n,n._sourceSegment=r,n._segmentIndexShift=e.length;for(const o of t)if(""===o.path&&Pl(o)!==no){const a=new ao([],{});a._sourceSegment=r,a._segmentIndexShift=e.length,i[Pl(o)]=a}return i}(r,e,n,new ao(t,r.children)));return a._sourceSegment=r,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:[]}}if(0===t.length&&function qY(r,e,t){return t.some(n=>N1(r,e,n))}(r,t,n)){const a=new ao(r.segments,function $Y(r,e,t,n,i,o){const a={};for(const s of n)if(N1(r,t,s)&&!i[Pl(s)]){const u=new ao([],{});u._sourceSegment=r,u._segmentIndexShift="legacy"===o?r.segments.length:e.length,a[Pl(s)]=u}return{...i,...a}}(r,e,t,n,r.children,i));return a._sourceSegment=r,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}const o=new ao(r.segments,r.children);return o._sourceSegment=r,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}function N1(r,e,t){return(!(r.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function vN(r,e,t,n){return!!(Pl(r)===n||n!==no&&N1(e,t,r))&&("**"===r.path||FS(e,r,t).matched)}function mN(r,e,t){return 0===e.length&&!r.children[t]}const L1=!1;class k1{constructor(e){this.segmentGroup=e||null}}class yN{constructor(e){this.urlTree=e}}function Vm(r){return Tm(new k1(r))}function bN(r){return Tm(new yN(r))}class JY{constructor(e,t,n,i,o){this.injector=e,this.configLoader=t,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const e=P1(this.urlTree.root,[],[],this.config).segmentGroup,t=new ao(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,no).pipe(Ir(o=>this.createUrlTree(C1(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Md(o=>{if(o instanceof yN)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof k1?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,no).pipe(Ir(i=>this.createUrlTree(C1(i),e.queryParams,e.fragment))).pipe(Md(i=>{throw i instanceof k1?this.noMatchError(i):i}))}noMatchError(e){return new dr(4002,L1)}createUrlTree(e,t,n){const i=wS(e);return new Gg(i,t,n)}expandSegmentGroup(e,t,n,i){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(Ir(o=>new ao([],o))):this.expandSegment(e,n,t,n.segments,i,!0)}expandChildren(e,t,n){const i=[];for(const o of Object.keys(n.children))"primary"===o?i.unshift(o):i.push(o);return Oe(i).pipe(zg(o=>{const a=n.children[o],s=hN(t,o);return this.expandSegmentGroup(e,s,a,o).pipe(Ir(u=>({segment:u,outlet:o})))}),NP((o,a)=>(o[a.outlet]=a.segment,o),{}),LP())}expandSegment(e,t,n,i,o,a){return Oe(n).pipe(zg(s=>this.expandSegmentAgainstRoute(e,t,n,s,i,o,a).pipe(Md(l=>{if(l instanceof k1)return pi(null);throw l}))),Sd(s=>!!s),Md((s,u)=>{if(kS(s))return mN(t,i,o)?pi(new ao([],{})):Vm(t);throw s}))}expandSegmentAgainstRoute(e,t,n,i,o,a,s){return vN(i,t,o,a)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,o,a):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,i,o,a):Vm(t):Vm(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,i,o,a){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,i,a):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,i,o,a)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,i){const o=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?bN(o):this.lineralizeSegments(n,o).pipe(gt(a=>{const s=new ao(a,{});return this.expandSegment(e,s,t,a,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,i,o,a){const{matched:s,consumedSegments:u,remainingSegments:l,positionalParamSegments:c}=FS(t,i,o);if(!s)return Vm(t);const f=this.applyRedirectCommands(u,i.redirectTo,c);return i.redirectTo.startsWith("/")?bN(f):this.lineralizeSegments(i,f).pipe(gt(h=>this.expandSegment(e,t,n,h.concat(l),a,!1)))}matchSegmentAgainstRoute(e,t,n,i,o){return"**"===n.path?(e=fN(n,e),n.loadChildren?(n._loadedRoutes?pi({routes:n._loadedRoutes,injector:n._loadedInjector}):this.configLoader.loadChildren(e,n)).pipe(Ir(s=>(n._loadedRoutes=s.routes,n._loadedInjector=s.injector,new ao(i,{})))):pi(new ao(i,{}))):pN(t,n,i,e).pipe(Af(({matched:a,consumedSegments:s,remainingSegments:u})=>a?this.getChildConfig(e=n._injector??e,n,i).pipe(gt(c=>{const f=c.injector??e,h=c.routes,{segmentGroup:d,slicedSegments:g}=P1(t,s,u,h),m=new ao(d.segments,d.children);if(0===g.length&&m.hasChildren())return this.expandChildren(f,h,m).pipe(Ir(O=>new ao(s,O)));if(0===h.length&&0===g.length)return pi(new ao(s,{}));const _=Pl(n)===o;return this.expandSegment(f,m,h,g,_?no:o,!0).pipe(Ir(L=>new ao(s.concat(L.segments),L.children)))})):Vm(t)))}getChildConfig(e,t,n){return t.children?pi({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?pi({routes:t._loadedRoutes,injector:t._loadedInjector}):function HY(r,e,t,n){const i=e.canLoad;return void 0===i||0===i.length?pi(!0):pi(i.map(a=>{const s=Rv(a,r);return Cd(function IY(r){return r&&Um(r.canLoad)}(s)?s.canLoad(e,t):r.runInContext(()=>s(e,t)))})).pipe(Fv(),gN())}(e,t,n).pipe(gt(i=>i?this.configLoader.loadChildren(e,t).pipe(iu(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function ZY(r){return Tm(uN(L1,3))}())):pi({routes:[],injector:e})}lineralizeSegments(e,t){let n=[],i=t.root;for(;;){if(n=n.concat(i.segments),0===i.numberOfChildren)return pi(n);if(i.numberOfChildren>1||!i.children[no])return Tm(new dr(4e3,L1));i=i.children[no]}}applyRedirectCommands(e,t,n){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreateUrlTree(e,t,n,i){const o=this.createSegmentGroup(e,t.root,n,i);return new Gg(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return Vs(e,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const s=i.substring(1);n[o]=t[s]}else n[o]=i}),n}createSegmentGroup(e,t,n,i){const o=this.createSegments(e,t.segments,n,i);let a={};return Vs(t.children,(s,u)=>{a[u]=this.createSegmentGroup(e,s,n,i)}),new ao(o,a)}createSegments(e,t,n,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,n))}findPosParam(e,t,n){const i=n[t.path.substring(1)];if(!i)throw new dr(4001,L1);return i}findOrReturn(e,t){let n=0;for(const i of t){if(i.path===e.path)return t.splice(n),i;n++}return e}}class tX{}class iX{constructor(e,t,n,i,o,a,s,u){this.injector=e,this.rootComponentType=t,this.config=n,this.urlTree=i,this.url=o,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=s,this.urlSerializer=u}recognize(){const e=P1(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,no).pipe(Ir(t=>{if(null===t)return null;const n=new D1([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},no,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ih(n,t),o=new oN(this.url,i);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(e){const t=e.value,n=iN(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,n,i){return 0===n.segments.length&&n.hasChildren()?this.processChildren(e,t,n):this.processSegment(e,t,n,n.segments,i)}processChildren(e,t,n){return Oe(Object.keys(n.children)).pipe(zg(i=>{const o=n.children[i],a=hN(t,i);return this.processSegmentGroup(e,a,o,i)}),NP((i,o)=>i&&o?(i.push(...o),i):null),function S$(r,e=!1){return yr((t,n)=>{let i=0;t.subscribe(gr(n,o=>{const a=r(o,i++);(a||e)&&n.next(o),!a&&n.complete()}))})}(i=>null!==i),w1(null),LP(),Ir(i=>{if(null===i)return null;const o=wN(i);return function oX(r){r.sort((e,t)=>e.value.outlet===no?-1:t.value.outlet===no?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}))}processSegment(e,t,n,i,o){return Oe(t).pipe(zg(a=>this.processSegmentAgainstRoute(a._injector??e,a,n,i,o)),Sd(a=>!!a),Md(a=>{if(kS(a))return mN(n,i,o)?pi([]):pi(null);throw a}))}processSegmentAgainstRoute(e,t,n,i,o){if(t.redirectTo||!vN(t,n,i,o))return pi(null);let a;if("**"===t.path){const s=i.length>0?FP(i).parameters:{},u=EN(n)+i.length;a=pi({snapshot:new D1(i,s,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,SN(t),Pl(t),t.component??t._loadedComponent??null,t,xN(n),u,MN(t),u),consumedSegments:[],remainingSegments:[]})}else a=pN(n,t,i,e).pipe(Ir(({matched:s,consumedSegments:u,remainingSegments:l,parameters:c})=>{if(!s)return null;const f=EN(n)+u.length;return{snapshot:new D1(u,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,SN(t),Pl(t),t.component??t._loadedComponent??null,t,xN(n),f,MN(t),f),consumedSegments:u,remainingSegments:l}}));return a.pipe(Af(s=>{if(null===s)return pi(null);const{snapshot:u,consumedSegments:l,remainingSegments:c}=s;e=t._injector??e;const f=t._loadedInjector??e,h=function aX(r){return r.children?r.children:r.loadChildren?r._loadedRoutes:[]}(t),{segmentGroup:d,slicedSegments:g}=P1(n,l,c,h.filter(_=>void 0===_.redirectTo),this.relativeLinkResolution);if(0===g.length&&d.hasChildren())return this.processChildren(f,h,d).pipe(Ir(_=>null===_?null:[new Ih(u,_)]));if(0===h.length&&0===g.length)return pi([new Ih(u,[])]);const m=Pl(t)===o;return this.processSegment(f,h,d,g,m?no:o).pipe(Ir(_=>null===_?null:[new Ih(u,_)]))}))}}function sX(r){const e=r.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function wN(r){const e=[],t=new Set;for(const n of r){if(!sX(n)){e.push(n);continue}const i=e.find(o=>n.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...n.children),t.add(i)):e.push(n)}for(const n of t){const i=wN(n.children);e.push(new Ih(n.value,i))}return e.filter(n=>!t.has(n))}function xN(r){let e=r;for(;e._sourceSegment;)e=e._sourceSegment;return e}function EN(r){let e=r,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function SN(r){return r.data||{}}function MN(r){return r.resolve||{}}function CN(r){return"string"==typeof r.title||null===r.title}function BS(r){return Af(e=>{const t=r(e);return t?Oe(t).pipe(Ir(()=>e)):pi(e)})}let AN=(()=>{class r{buildTitle(t){let n,i=t.root;for(;void 0!==i;)n=this.getResolvedTitleForRoute(i)??n,i=i.children.find(o=>o.outlet===no);return n}getResolvedTitleForRoute(t){return t.data[Om]}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=ci({token:r,factory:function(){return fa(DN)},providedIn:"root"}),r})(),DN=(()=>{class r extends AN{constructor(t){super(),this.title=t}updateTitle(t){const n=this.buildTitle(t);void 0!==n&&this.title.setTitle(n)}}return r.\u0275fac=function(t){return new(t||r)(si(MP))},r.\u0275prov=ci({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class pX{}class mX extends class vX{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const F1=new bi("",{providedIn:"root",factory:()=>({})}),jS=new bi("ROUTES");let zS=(()=>{class r{constructor(t,n){this.injector=t,this.compiler=n,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return pi(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const n=Cd(t.loadComponent()).pipe(iu(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),vS(()=>{this.componentLoaders.delete(t)})),i=new OP(n,()=>new Rn).pipe(gS());return this.componentLoaders.set(t,i),i}loadChildren(t,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return pi({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);const o=this.loadModuleFactoryOrRoutes(n.loadChildren).pipe(Ir(s=>{this.onLoadEndListener&&this.onLoadEndListener(n);let u,l,c=!1;Array.isArray(s)?l=s:(u=s.create(t).injector,l=RP(u.get(jS,[],Qr.Self|Qr.Optional)));return{routes:l.map(LS),injector:u}}),vS(()=>{this.childrenLoaders.delete(n)})),a=new OP(o,()=>new Rn).pipe(gS());return this.childrenLoaders.set(n,a),a}loadModuleFactoryOrRoutes(t){return Cd(t()).pipe(gt(n=>n instanceof wI||Array.isArray(n)?pi(n):Oe(this.compiler.compileModuleAsync(n))))}}return r.\u0275fac=function(t){return new(t||r)(si(Al),si(T_))},r.\u0275prov=ci({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class bX{}class wX{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function xX(r){throw r}function EX(r,e,t){return e.parse("/")}const _X={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},SX={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function IN(){const r=fa(VP),e=fa(Bm),t=fa(H_),n=fa(Al),i=fa(T_),o=fa(jS,{optional:!0})??[],a=fa(F1,{optional:!0})??{},s=fa(DN),u=fa(AN,{optional:!0}),l=fa(bX,{optional:!0}),c=fa(pX,{optional:!0}),f=new Hs(null,r,e,t,n,i,RP(o));return l&&(f.urlHandlingStrategy=l),c&&(f.routeReuseStrategy=c),f.titleStrategy=u??s,function MX(r,e){r.errorHandler&&(e.errorHandler=r.errorHandler),r.malformedUriErrorHandler&&(e.malformedUriErrorHandler=r.malformedUriErrorHandler),r.onSameUrlNavigation&&(e.onSameUrlNavigation=r.onSameUrlNavigation),r.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=r.paramsInheritanceStrategy),r.relativeLinkResolution&&(e.relativeLinkResolution=r.relativeLinkResolution),r.urlUpdateStrategy&&(e.urlUpdateStrategy=r.urlUpdateStrategy),r.canceledNavigationResolution&&(e.canceledNavigationResolution=r.canceledNavigationResolution)}(a,f),f}let Hs=(()=>{class r{constructor(t,n,i,o,a,s,u){this.rootComponentType=t,this.urlSerializer=n,this.rootContexts=i,this.location=o,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Rn,this.errorHandler=xX,this.malformedUriErrorHandler=EX,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>pi(void 0),this.urlHandlingStrategy=new wX,this.routeReuseStrategy=new mX,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=a.get(zS),this.configLoader.onLoadEndListener=h=>this.triggerEvent(new aY(h)),this.configLoader.onLoadStartListener=h=>this.triggerEvent(new oY(h)),this.ngModule=a.get(Bg),this.console=a.get(e7);const f=a.get(ds);this.isNgZoneEnabled=f instanceof ds&&ds.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=function T$(){return new Gg(new ao([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=rN(this.currentUrlTree,this.rootComponentType),this.transitions=new Oc({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const n=this.events;return t.pipe(_d(i=>0!==i.id),Ir(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Af(i=>{let o=!1,a=!1;return pi(i).pipe(iu(s=>{this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Af(s=>{const u=this.browserUrlTree.toString(),l=!this.navigated||s.extractedUrl.toString()!==u||u!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||l)&&this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return ON(s.source)&&(this.browserUrlTree=s.extractedUrl),pi(s).pipe(Af(f=>{const h=this.transitions.getValue();return n.next(new SS(f.id,this.serializeUrl(f.extractedUrl),f.source,f.restoredState)),h!==this.transitions.getValue()?Ke:Promise.resolve(f)}),function eX(r,e,t,n){return Af(i=>function QY(r,e,t,n,i){return new JY(r,e,t,n,i).apply()}(r,e,t,i.extractedUrl,n).pipe(Ir(o=>({...i,urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),iu(f=>{this.currentNavigation={...this.currentNavigation,finalUrl:f.urlAfterRedirects},i.urlAfterRedirects=f.urlAfterRedirects}),function lX(r,e,t,n,i,o){return gt(a=>function rX(r,e,t,n,i,o,a="emptyOnly",s="legacy"){return new iX(r,e,t,n,i,a,s,o).recognize().pipe(Af(u=>null===u?function nX(r){return new ir(e=>e.error(r))}(new tX):pi(u)))}(r,e,t,a.urlAfterRedirects,n.serialize(a.urlAfterRedirects),n,i,o).pipe(Ir(s=>({...a,targetSnapshot:s}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),iu(f=>{if(i.targetSnapshot=f.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!f.extras.skipLocationChange){const d=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl);this.setBrowserUrl(d,f)}this.browserUrlTree=f.urlAfterRedirects}const h=new eY(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);n.next(h)}));if(l&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:h,extractedUrl:d,source:g,restoredState:m,extras:_}=s,D=new SS(h,this.serializeUrl(d),g,m);n.next(D);const L=rN(d,this.rootComponentType).snapshot;return pi(i={...s,targetSnapshot:L,urlAfterRedirects:d,extras:{..._,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=s.rawUrl,s.resolve(null),Ke}),iu(s=>{const u=new tY(s.id,this.serializeUrl(s.extractedUrl),this.serializeUrl(s.urlAfterRedirects),s.targetSnapshot);this.triggerEvent(u)}),Ir(s=>i={...s,guards:MY(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),function RY(r,e){return gt(t=>{const{targetSnapshot:n,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:a}}=t;return 0===a.length&&0===o.length?pi({...t,guardsResult:!0}):function FY(r,e,t,n){return Oe(r).pipe(gt(i=>function VY(r,e,t,n,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?pi(o.map(s=>{const u=jm(e)??i,l=Rv(s,u);return Cd(function NY(r){return r&&Um(r.canDeactivate)}(l)?l.canDeactivate(r,e,t,n):u.runInContext(()=>l(r,e,t,n))).pipe(Sd())})).pipe(Fv()):pi(!0)}(i.component,i.route,t,e,n)),Sd(i=>!0!==i,!0))}(a,n,i,r).pipe(gt(s=>s&&function TY(r){return"boolean"==typeof r}(s)?function BY(r,e,t,n){return Oe(e).pipe(zg(i=>dS(function zY(r,e){return null!==r&&e&&e(new sY(r)),pi(!0)}(i.route.parent,n),function jY(r,e){return null!==r&&e&&e(new lY(r)),pi(!0)}(i.route,n),function UY(r,e,t){const n=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(a=>function CY(r){const e=r.routeConfig?r.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:r,guards:e}:null}(a)).filter(a=>null!==a).map(a=>IP(()=>pi(a.guards.map(u=>{const l=jm(a.node)??t,c=Rv(u,l);return Cd(function PY(r){return r&&Um(r.canActivateChild)}(c)?c.canActivateChild(n,r):l.runInContext(()=>c(n,r))).pipe(Sd())})).pipe(Fv())));return pi(o).pipe(Fv())}(r,i.path,t),function GY(r,e,t){const n=e.routeConfig?e.routeConfig.canActivate:null;if(!n||0===n.length)return pi(!0);const i=n.map(o=>IP(()=>{const a=jm(e)??t,s=Rv(o,a);return Cd(function OY(r){return r&&Um(r.canActivate)}(s)?s.canActivate(e,r):a.runInContext(()=>s(e,r))).pipe(Sd())}));return pi(i).pipe(Fv())}(r,i.route,t))),Sd(i=>!0!==i,!0))}(n,o,r,e):pi(s)),Ir(s=>({...t,guardsResult:s})))})}(this.ngModule.injector,s=>this.triggerEvent(s)),iu(s=>{if(i.guardsResult=s.guardsResult,Vg(s.guardsResult))throw sN(0,s.guardsResult);const u=new nY(s.id,this.serializeUrl(s.extractedUrl),this.serializeUrl(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.triggerEvent(u)}),_d(s=>!!s.guardsResult||(this.restoreHistory(s),this.cancelNavigationTransition(s,"",3),!1)),BS(s=>{if(s.guards.canActivateChecks.length)return pi(s).pipe(iu(u=>{const l=new rY(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(l)}),Af(u=>{let l=!1;return pi(u).pipe(function cX(r,e){return gt(t=>{const{targetSnapshot:n,guards:{canActivateChecks:i}}=t;if(!i.length)return pi(t);let o=0;return Oe(i).pipe(zg(a=>function fX(r,e,t,n){const i=r.routeConfig,o=r._resolve;return void 0!==i?.title&&!CN(i)&&(o[Om]=i.title),function hX(r,e,t,n){const i=function dX(r){return[...Object.keys(r),...Object.getOwnPropertySymbols(r)]}(r);if(0===i.length)return pi({});const o={};return Oe(i).pipe(gt(a=>function gX(r,e,t,n){const i=jm(e)??n,o=Rv(r,i);return Cd(o.resolve?o.resolve(e,t):i.runInContext(()=>o(e,t)))}(r[a],e,t,n).pipe(Sd(),iu(s=>{o[a]=s}))),pS(1),function M$(r){return Ir(()=>r)}(o),Md(a=>kS(a)?Ke:Tm(a)))}(o,r,e,n).pipe(Ir(a=>(r._resolvedData=a,r.data=iN(r,t).resolve,i&&CN(i)&&(r.data[Om]=i.title),null)))}(a.route,n,r,e)),iu(()=>o++),pS(1),gt(a=>o===i.length?pi(t):Ke))})}(this.paramsInheritanceStrategy,this.ngModule.injector),iu({next:()=>l=!0,complete:()=>{l||(this.restoreHistory(u),this.cancelNavigationTransition(u,"",2))}}))}),iu(u=>{const l=new iY(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(l)}))}),BS(s=>{const u=l=>{const c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(iu(f=>{l.component=f}),Ir(()=>{})));for(const f of l.children)c.push(...u(f));return c};return DP(u(s.targetSnapshot.root)).pipe(w1(),Im(1))}),BS(()=>this.afterPreactivation()),Ir(s=>{const u=function gY(r,e,t){const n=Fm(r,e._root,t?t._root:void 0);return new nN(n,e)}(this.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return i={...s,targetRouterState:u}}),iu(s=>{this.currentUrlTree=s.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),this.routerState=s.targetRouterState,"deferred"===this.urlUpdateStrategy&&(s.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,s),this.browserUrlTree=s.urlAfterRedirects)}),((r,e,t)=>Ir(n=>(new SY(e,n.targetRouterState,n.currentRouterState,t).activate(r),n)))(this.rootContexts,this.routeReuseStrategy,s=>this.triggerEvent(s)),iu({next(){o=!0},complete(){o=!0}}),vS(()=>{o||a||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Md(s=>{if(a=!0,cN(s)){lN(s)||(this.navigated=!0,this.restoreHistory(i,!0));const u=new A1(i.id,this.serializeUrl(i.extractedUrl),s.message,s.cancellationCode);if(n.next(u),lN(s)){const l=this.urlHandlingStrategy.merge(s.url,this.rawUrlTree),c={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ON(i.source)};this.scheduleNavigation(l,"imperative",null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const u=new JP(i.id,this.serializeUrl(i.extractedUrl),s,i.targetSnapshot??void 0);n.next(u);try{i.resolve(this.errorHandler(s))}catch(l){i.reject(l)}}return Ke}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const n="popstate"===t.type?"popstate":"hashchange";"popstate"===n&&setTimeout(()=>{const i={replaceUrl:!0},o=t.state?.navigationId?t.state:null;if(o){const s={...o};delete s.navigationId,delete s.\u0275routerPageId,0!==Object.keys(s).length&&(i.state=s)}const a=this.parseUrl(t.url);this.scheduleNavigation(a,n,o,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(LS),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,n={}){const{relativeTo:i,queryParams:o,fragment:a,queryParamsHandling:s,preserveFragment:u}=n,l=i||this.routerState.root,c=u?this.currentUrlTree.fragment:a;let f=null;switch(s){case"merge":f={...this.currentUrlTree.queryParams,...o};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}return null!==f&&(f=this.removeEmptyProps(f)),X$(l,this.currentUrlTree,t,f,c??null)}navigateByUrl(t,n={skipLocationChange:!1}){const i=Vg(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,n)}navigate(t,n={skipLocationChange:!1}){return function CX(r){for(let e=0;e<r.length;e++){if(null==r[e])throw new dr(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,n),n)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let n;try{n=this.urlSerializer.parse(t)}catch(i){n=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return n}isActive(t,n){let i;if(i=!0===n?{..._X}:!1===n?{...SX}:n,Vg(t))return jP(this.currentUrlTree,t,i);const o=this.parseUrl(t);return jP(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((n,i)=>{const o=t[i];return null!=o&&(n[i]=o),n},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Hg(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,n,i,o,a){if(this.disposed)return Promise.resolve(!1);let s,u,l;a?(s=a.resolve,u=a.reject,l=a.promise):l=new Promise((h,d)=>{s=h,u=d});const c=++this.navigationId;let f;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),f=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):f=0,this.setTransition({id:c,targetPageId:f,source:n,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:o,resolve:s,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}setBrowserUrl(t,n){const i=this.urlSerializer.serialize(t),o={...n.extras.state,...this.generateNgRouterState(n.id,n.targetPageId)};this.location.isCurrentPathEqualTo(i)||n.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(t,n=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,n,i){const o=new A1(t.id,this.serializeUrl(t.extractedUrl),n,i);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,n){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:n}:{navigationId:t}}}return r.\u0275fac=function(t){DE()},r.\u0275prov=ci({token:r,factory:function(){return IN()},providedIn:"root"}),r})();function ON(r){return"imperative"!==r}let j1=(()=>{class r{constructor(t,n,i,o,a){this.router=t,this.route=n,this.tabIndexAttribute=i,this.renderer=o,this.el=a,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Rn,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=Ov(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=Ov(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=Ov(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const n=this.renderer,i=this.el.nativeElement;null!==t?n.setAttribute(i,"tabindex",t):n.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return r.\u0275fac=function(t){return new(t||r)(ii(Hs),ii(Wg),pf("tabindex"),ii(_b),ii(vd))},r.\u0275dir=Fo({type:r,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,n){1&t&&Us("click",function(){return n.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[ma]}),r})(),GS=(()=>{class r{constructor(t,n,i){this.router=t,this.route=n,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Rn,this.subscription=t.events.subscribe(o=>{o instanceof Hg&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=Ov(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=Ov(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=Ov(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,n,i,o,a){return!!(0!==t||n||i||o||a||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return r.\u0275fac=function(t){return new(t||r)(ii(Hs),ii(Wg),ii(xd))},r.\u0275dir=Fo({type:r,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,n){1&t&&Us("click",function(o){return n.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&t&&JE("target",n.target)("href",n.href,dE)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[ma]}),r})(),PN=(()=>{class r{constructor(t,n,i,o,a,s){this.router=t,this.element=n,this.renderer=i,this.cdr=o,this.link=a,this.linkWithHref=s,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new xu,this.routerEventsSubscription=t.events.subscribe(u=>{u instanceof Hg&&this.update()})}ngAfterContentInit(){pi(this.links.changes,this.linksWithHrefs.changes,pi(null)).pipe(an()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(n=>!!n).map(n=>n.onChanges);this.linkInputChangesSubscription=Oe(t).pipe(an()).subscribe(n=>{this.isActive!==this.isLinkActive(this.router)(n)&&this.update()})}set routerLinkActive(t){const n=Array.isArray(t)?t:t.split(" ");this.classes=n.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(n=>{t?this.renderer.addClass(this.element.nativeElement,n):this.renderer.removeClass(this.element.nativeElement,n)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const n=function AX(r){return!!r.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,n)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return r.\u0275fac=function(t){return new(t||r)(ii(Hs),ii(vd),ii(_b),ii(e1),ii(j1,8),ii(GS,8))},r.\u0275dir=Fo({type:r,selectors:[["","routerLinkActive",""]],contentQueries:function(t,n,i){if(1&t&&(__(i,j1,5),__(i,GS,5)),2&t){let o;Av(o=Dv())&&(n.links=o),Av(o=Dv())&&(n.linksWithHrefs=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[ma]}),r})();class NN{}let DX=(()=>{class r{constructor(t,n,i,o,a){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(_d(t=>t instanceof Hg),zg(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,n){const i=[];for(const o of n){o.providers&&!o._injector&&(o._injector=Hb(o.providers,t,`Route: ${o.path}`));const a=o._injector??t,s=o._loadedInjector??a;o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent?i.push(this.preloadConfig(a,o)):(o.children||o._loadedRoutes)&&i.push(this.processRoutes(s,o.children??o._loadedRoutes))}return Oe(i).pipe(an())}preloadConfig(t,n){return this.preloadingStrategy.preload(n,()=>{let i;i=n.loadChildren&&void 0===n.canLoad?this.loader.loadChildren(t,n):pi(null);const o=i.pipe(gt(a=>null===a?pi(void 0):(n._loadedRoutes=a.routes,n._loadedInjector=a.injector,this.processRoutes(a.injector??t,a.routes))));return n.loadComponent&&!n._loadedComponent?Oe([o,this.loader.loadComponent(n)]).pipe(an()):o})}}return r.\u0275fac=function(t){return new(t||r)(si(Hs),si(T_),si(pd),si(NN),si(zS))},r.\u0275prov=ci({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const US=new bi("");let LN=(()=>{class r{constructor(t,n,i={}){this.router=t,this.viewportScroller=n,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof SS?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Hg&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof eN&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,n){this.router.triggerEvent(new eN(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return r.\u0275fac=function(t){DE()},r.\u0275prov=ci({token:r,factory:r.\u0275fac}),r})();function Bv(r,e){return{\u0275kind:r,\u0275providers:e}}function VS(r){return[{provide:jS,multi:!0,useValue:r}]}function RN(){const r=fa(Al);return e=>{const t=r.get(Qb);if(e!==t.components[0])return;const n=r.get(Hs),i=r.get(FN);1===r.get(HS)&&n.initialNavigation(),r.get(BN,null,Qr.Optional)?.setUpPreloading(),r.get(US,null,Qr.Optional)?.init(),n.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const FN=new bi("",{factory:()=>new Rn}),HS=new bi("",{providedIn:"root",factory:()=>1});const BN=new bi("");function PX(r){return Bv(0,[{provide:BN,useExisting:DX},{provide:NN,useExisting:r}])}const jN=new bi("ROUTER_FORROOT_GUARD"),NX=[H_,{provide:VP,useClass:yS},{provide:Hs,useFactory:IN},Bm,{provide:Wg,useFactory:function kN(r){return r.routerState.root},deps:[Hs]},zS];function LX(){return new mO("Router",Hs)}let zN=(()=>{class r{constructor(t){}static forRoot(t,n){return{ngModule:r,providers:[NX,[],VS(t),{provide:jN,useFactory:BX,deps:[[Hs,new xc,new xf]]},{provide:F1,useValue:n||{}},n?.useHash?{provide:xd,useClass:VO}:{provide:xd,useClass:UO},{provide:US,useFactory:()=>{const r=fa(Hs),e=fa(cW),t=fa(F1);return t.scrollOffset&&e.setOffset(t.scrollOffset),new LN(r,e,t)}},n?.preloadingStrategy?PX(n.preloadingStrategy).\u0275providers:[],{provide:mO,multi:!0,useFactory:LX},n?.initialNavigation?jX(n):[],[{provide:GN,useFactory:RN},{provide:cO,multi:!0,useExisting:GN}]]}}static forChild(t){return{ngModule:r,providers:[VS(t)]}}}return r.\u0275fac=function(t){return new(t||r)(si(jN,8))},r.\u0275mod=is({type:r}),r.\u0275inj=ys({imports:[PS]}),r})();function BX(r){return"guarded"}function jX(r){return["disabled"===r.initialNavigation?Bv(3,[{provide:qb,multi:!0,useFactory:()=>{const e=fa(Hs);return()=>{e.setUpLocationChangeListener()}}},{provide:HS,useValue:2}]).\u0275providers:[],"enabledBlocking"===r.initialNavigation?Bv(2,[{provide:HS,useValue:0},{provide:qb,multi:!0,deps:[Al],useFactory:e=>{const t=e.get(z7,Promise.resolve());let n=!1;return()=>t.then(()=>new Promise(o=>{const a=e.get(Hs),s=e.get(FN);(function i(o){e.get(Hs).events.pipe(_d(s=>s instanceof Hg||s instanceof A1||s instanceof JP),Ir(s=>s instanceof Hg||s instanceof A1&&(0===s.code||1===s.code)&&null),_d(s=>null!==s),Im(1)).subscribe(()=>{o()})})(()=>{o(!0),n=!0}),a.afterPreactivation=()=>(o(!0),n||s.closed?pi(void 0):s),a.initialNavigation()}))}}]).\u0275providers:[]]}const GN=new bi("");var ue=G(1035);const GX={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(e){return Object.assign(this,e),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(e){var t=this,n=this.events;this.graph=e,("drag-canvas"===this.type||"brush-select"===this.type||"lasso-select"===this.type)&&e.get("canvas").set("draggable",!0),(0,ue.each)(n,function(i,o){e.on(o,i)}),document.addEventListener("visibilitychange",function(){t.keydown=!1})},unbind:function(e){var t=this.events,n=e.get("canvas").get("draggable");("drag-canvas"===this.type||"brush-select"===this.type||"lasso-select"===this.type)&&e.get("canvas").set("draggable",!1),(0,ue.each)(t,function(i,o){e.off(o,i)}),e.get("canvas").set("draggable",n)},get:function(e){return this[e]},set:function(e,t){return this[e]=t,this}};var UX=function(){function r(){}return r.registerBehavior=function(e,t){if(!t)throw new Error("please specify handler for this behavior: ".concat(e));var n=(0,ue.clone)(GX);Object.assign(n,t);var i=function(a){var s=this;Object.assign(this,this.getDefaultCfg(),a);var u=this.getEvents();this.events=null;var l={};u&&((0,ue.each)(u,function(c,f){l[f]=(0,ue.wrapBehavior)(s,c)}),this.events=l)};i.prototype=n,r.types[e]=i},r.hasBehavior=function(e){return!!r.types[e]},r.getBehavior=function(e){return r.types[e]},r.types={},r}();const UN=UX,VN=UN;var HX=function(){function r(){this._events={}}return r.prototype.on=function(e,t,n){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!n}),this},r.prototype.once=function(e,t){return this.on(e,t,!0)},r.prototype.emit=function(e){for(var t=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=this._events[e]||[],a=this._events["*"]||[],s=function(u){for(var l=u.length,c=0;c<l;c++)if(u[c]){var f=u[c],h=f.callback;f.once&&(u.splice(c,1),0===u.length&&delete t._events[e],l--,c--),h.apply(t,n)}};s(o),s(a)},r.prototype.off=function(e,t){if(e)if(t){for(var n=this._events[e]||[],i=n.length,o=0;o<i;o++)n[o].callback===t&&(n.splice(o,1),i--,o--);0===n.length&&delete this._events[e]}else delete this._events[e];else this._events={};return this},r.prototype.getEvents=function(){return this._events},r}();const HN=HX;var Tf=G(7543);function WX(r,e,t){var n=[0,0,0,0,0,0,0,0,0];return Tf.fromTranslation(n,t),Tf.multiply(r,n,e)}function $X(r,e,t){var n=[0,0,0,0,0,0,0,0,0];return Tf.fromRotation(n,t),Tf.multiply(r,n,e)}function YX(r,e,t){var n=[0,0,0,0,0,0,0,0,0];return Tf.fromScaling(n,t),Tf.multiply(r,n,e)}function XX(r,e,t){return Tf.multiply(r,t,e)}function Nl(r,e){for(var t=r?[].concat(r):[1,0,0,0,1,0,0,0,1],n=0,i=e.length;n<i;n++){var o=e[n];switch(o[0]){case"t":WX(t,t,[o[1],o[2]]);break;case"s":YX(t,t,[o[1],o[2]]);break;case"r":$X(t,t,o[1]);break;case"m":XX(t,t,o[1])}}return t}const $g=function(e,t){var n=e.nodes,i=e.edges,o=[],a={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(function(s,u){a[s.id]=u,o.push([])}),i&&i.forEach(function(s){var c=a[s.source],f=a[s.target];!c&&0!==c||!f&&0!==f||(o[c][f]=1,t||(o[f][c]=1))}),o};var ZX=function(e,t){return e===t},WN=function(){function r(e,t){void 0===t&&(t=null),this.value=e,this.next=t}return r.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},r}(),QX=function(){function r(e){void 0===e&&(e=ZX),this.head=null,this.tail=null,this.compare=e}return r.prototype.prepend=function(e){var t=new WN(e,this.head);return this.head=t,this.tail||(this.tail=t),this},r.prototype.append=function(e){var t=new WN(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},r.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var n=this.head;if(null!==n)for(;n.next;)this.compare(n.next.value,e)?(t=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,e)&&(this.tail=n),t},r.prototype.find=function(e){var t=e.value,n=void 0===t?void 0:t,i=e.callback,o=void 0===i?void 0:i;if(!this.head)return null;for(var a=this.head;a;){if(o&&o(a.value)||void 0!==n&&this.compare(a.value,n))return a;a=a.next}return null},r.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},r.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},r.prototype.fromArray=function(e){var t=this;return e.forEach(function(n){return t.append(n)}),this},r.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},r.prototype.reverse=function(){for(var e=this.head,t=null,n=null;e;)n=e.next,e.next=t,t=e,e=n;this.tail=this.head,this.head=t},r.prototype.toString=function(e){return void 0===e&&(e=void 0),this.toArray().map(function(t){return t.toString(e)}).toString()},r}();const $N=QX;var JX=function(){function r(){this.linkedList=new $N}return r.prototype.isEmpty=function(){return!this.linkedList.head},r.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},r.prototype.enqueue=function(e){this.linkedList.append(e)},r.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},r.prototype.toString=function(e){return this.linkedList.toString(e)},r}();const eq=JX;var ll=function(e,t,n){void 0===t&&(t=[]);var i=t.filter(function(u){return u.source===e||u.target===e});return"target"===n?i.filter(function(l){return l.source===e}).map(function(u){return u.target}):"source"===n?i.filter(function(l){return l.target===e}).map(function(u){return u.source}):i.map(function(l){return l.source===e?l.target:l.source})},U1=function(e,t){return t.filter(function(n){return n.source===e||n.target===e})},YN=function(e){void 0===e&&(e=0);var t="".concat(Math.random()).split(".")[1].substr(0,5),n="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(t).concat(n)};const XN=function(e,t,n,i){void 0===i&&(i=!0);var o=function nq(r){void 0===r&&(r={});var i,e=r,t=function(){},n=(i={},function(o){var a=o.next;return!i[a]&&(i[a]=!0,!0)});return e.allowTraversal=r.allowTraversal||n,e.enter=r.enter||t,e.leave=r.leave||t,e}(n),a=new eq,s=e.edges,u=void 0===s?[]:s;a.enqueue(t);for(var l="",c=function(){var h=a.dequeue();o.enter({current:h,previous:l}),ll(h,u,i?"target":void 0).forEach(function(d){o.allowTraversal({previous:l,current:h,next:d})&&a.enqueue(d)}),o.leave({current:h,previous:l}),l=h};!a.isEmpty();)c()};var qN=function(e){for(var t=e.nodes,n=void 0===t?[]:t,i=e.edges,o=void 0===i?[]:i,a=[],s={},u={},l={},c=[],f=0,h=function _(D){u[D.id]=f,l[D.id]=f,f+=1,a.push(D),s[D.id]=!0;for(var L=ll(D.id,o,"target").filter(function(Ee){return n.map(function(Re){return Re.id}).indexOf(Ee)>-1}),O=function(Re){var Ve=L[Re];if(u[Ve]||0===u[Ve])s[Ve]&&(l[D.id]=Math.min(l[D.id],u[Ve]));else{var Ue=n.filter(function(at){return at.id===Ve});Ue.length>0&&_(Ue[0]),l[D.id]=Math.min(l[D.id],l[Ve])}},Z=0;Z<L.length;Z++)O(Z);if(l[D.id]===u[D.id]){for(var le=[];a.length>0;){var pe=a.pop();if(s[pe.id]=!1,le.push(pe),pe===D)break}le.length>0&&c.push(le)}},d=0,g=n;d<g.length;d++){var m=g[d];!u[m.id]&&0!==u[m.id]&&h(m)}return c};function WS(r,e){return e?qN(r):function(e){for(var t=e.nodes,n=void 0===t?[]:t,i=e.edges,o=void 0===i?[]:i,a=[],s={},u=[],l=function d(g){u.push(g),s[g.id]=!0;for(var m=ll(g.id,o),_=function(O){var Z=m[O];if(!s[Z]){var le=n.filter(function(pe){return pe.id===Z});le.length>0&&d(le[0])}},D=0;D<m.length;++D)_(D)},c=0;c<n.length;c++){var f=n[c];if(!s[f.id]){l(f);for(var h=[];u.length>0;)h.push(u.pop());a.push(h)}}return a}(r)}var Hm=function(e){var t={},n=e.nodes,o=e.edges,a=void 0===o?[]:o;return(void 0===n?[]:n).forEach(function(s){t[s.id]={degree:0,inDegree:0,outDegree:0}}),a.forEach(function(s){t[s.source].degree++,t[s.source].outDegree++,t[s.target].degree++,t[s.target].inDegree++}),t};const Wm=Hm;var KN=function(e,t){return Hm(e)[t]?Hm(e)[t].inDegree:0},ZN=function(e,t){return Hm(e)[t]?Hm(e)[t].outDegree:0};function QN(r,e,t,n){n.enter({current:e,previous:t});var i=r.edges;ll(e,void 0===i?[]:i,"target").forEach(function(a){n.allowTraversal({previous:t,current:e,next:a})&&QN(r,a,e,n)}),n.leave({current:e,previous:t})}function $S(r,e,t){QN(r,e,"",function oq(r){void 0===r&&(r={});var i,e=r,t=function(){},n=(i={},function(o){var a=o.next;return!i[a]&&(i[a]=!0,!0)});return e.allowTraversal=r.allowTraversal||n,e.enter=r.enter||t,e.leave=r.leave||t,e}(t))}var YS=function(e,t,n){var i,o;void 0===n&&(n=!0);for(var a=[],u=0,l=WS(e,!1);u<l.length;u++){var c=l[u];if(c.length)for(var f=c[0],h=f.id,d=[f],g=((i={})[h]=f,i),m=((o={})[h]=new Set,o);d.length>0;)for(var _=d.pop(),D=_.id,L=ll(D,e.edges),O=function(pe){var Ee,Re=L[pe],Ve=e.nodes.find(function(Tt){return Tt.id===Re});if(Re===D)a.push(((Ee={})[Re]=_,Ee));else if(Re in m){if(!m[D].has(Ve)){for(var Ue=!0,at=[Ve,_],_t=g[D];m[Re].size&&!m[Re].has(_t)&&(at.push(_t),_t!==g[_t.id]);)_t=g[_t.id];if(at.push(_t),t&&n?(Ue=!1,at.findIndex(function(Tt){return t.indexOf(Tt.id)>-1})>-1&&(Ue=!0)):t&&!n&&at.findIndex(function(Tt){return t.indexOf(Tt.id)>-1})>-1&&(Ue=!1),Ue){for(var vn={},Cn=1;Cn<at.length;Cn+=1)vn[at[Cn-1].id]=at[Cn];at.length&&(vn[at[at.length-1].id]=at[0]),a.push(vn)}m[Re].add(_)}}else g[Re]=_,d.push(Ve),m[Re]=new Set([_])},Z=0;Z<L.length;Z+=1)O(Z)}return a},XS=function(e,t,n){void 0===n&&(n=!0);for(var i=[],o=new Set,a=[],s=[],u={},l={},f=function at(_t,vn,Cn){var Tt=!1;if(t&&!1===n&&t.indexOf(_t.id)>-1)return Tt;i.push(_t),o.add(_t);for(var kt=Cn[_t.id],Ln=0;Ln<kt.length;Ln+=1)if((Kn=u[kt[Ln]])===vn){for(var mn={},On=1;On<i.length;On+=1)mn[i[On-1].id]=i[On];i.length&&(mn[i[i.length-1].id]=i[0]),s.push(mn),Tt=!0}else o.has(Kn)||at(Kn,vn,Cn)&&(Tt=!0);if(Tt)!function(_t){for(var vn=[_t];vn.length>0;){var Cn=vn.pop();o.has(Cn)&&(o.delete(Cn),a[Cn.id].forEach(function(Tt){vn.push(Tt)}),a[Cn.id].clear())}}(_t);else for(Ln=0;Ln<kt.length;Ln+=1){var Kn;a[(Kn=u[kt[Ln]]).id].has(_t)||a[Kn.id].add(_t)}return i.pop(),Tt},h=e.nodes,d=void 0===h?[]:h,g=0;g<d.length;g+=1){var m=d[g];l[m.id]=g,u[g]=m}if(t&&n){var D=function(_t){var vn=t[_t];l[d[_t].id]=l[vn],l[vn]=0,u[0]=d.find(function(Cn){return Cn.id===vn}),u[l[d[_t].id]]=d[_t]};for(g=0;g<t.length;g++)D(g)}for(var L=function(_t){for(var vn,Cn,Tt=1/0,kt=0;kt<_t.length;kt+=1)for(var Ln=_t[kt],Kn=0;Kn<Ln.length;Kn++){var mn=l[Ln[Kn].id];mn<Tt&&(Tt=mn,Cn=kt)}var On=_t[Cn],Vn=[];for(kt=0;kt<On.length;kt+=1){var rr=On[kt];Vn[rr.id]=[];for(var vr=0,Sr=ll(rr.id,e.edges,"target").filter(function(ji){return On.map(function(Wi){return Wi.id}).indexOf(ji)>-1});vr<Sr.length;vr++){var Zr=Sr[vr];Zr!==rr.id||!1===n&&t.indexOf(rr.id)>-1?Vn[rr.id].push(l[Zr]):s.push(((vn={})[rr.id]=rr,vn))}}return{component:On,adjList:Vn,minIdx:Tt}},O=0;O<d.length;){var Z=d.filter(function(at){return l[at.id]>=O}),le=qN({nodes:Z,edges:e.edges}).filter(function(at){return at.length>1});if(0===le.length)break;var pe=L(le),Ee=pe.minIdx,Re=pe.adjList,Ve=pe.component;if(!(Ve.length>1))break;Ve.forEach(function(at){a[at.id]=new Set});var Ue=u[Ee];if(t&&n&&-1===t.indexOf(Ue.id))return s;f(Ue,Ue,Re),O=Ee+1}return s},JN=function(e,t,n,i){return void 0===i&&(i=!0),t?XS(e,n,i):YS(e,n,i)};const qS=function(e){var t=null,n=e.nodes,o={},a={},s={},u={};(void 0===n?[]:n).forEach(function(f){a[f.id]=f});for(var l={enter:function(h){var d=h.current,g=h.previous;if(s[d]){t={};for(var m=d,_=g;_!==d;)t[m]=_,m=_,_=o[_];t[m]=_}else s[d]=d,delete a[d],o[d]=g},leave:function(h){var d=h.current;u[d]=d,delete s[d]},allowTraversal:function(h){return!t&&!u[h.next]}};Object.keys(a).length;)$S(e,Object.keys(a)[0],l);return t},$m=function(e,t,n,i){var o=e.nodes,a=void 0===o?[]:o,s=e.edges,u=void 0===s?[]:s,l=[],c={},f={},h={};a.forEach(function(O,Z){var le=O.id;l.push(le),f[le]=1/0,le===t&&(f[le]=0)});for(var d=a.length,g=function(Z){var le=function(e,t,n){for(var o,i=1/0,a=0;a<t.length;a++){var s=t[a].id;!n[s]&&e[s]<=i&&(i=e[s],o=t[a])}return o}(f,a,c),pe=le.id;if(c[pe]=!0,f[pe]===1/0)return"continue";var Ee=[];Ee=n?function(e,t){return t.filter(function(n){return n.source===e})}(pe,u):U1(pe,u),Ee.forEach(function(Re){var Ve=Re.target,at=Ve===pe?Re.source:Ve,_t=i&&Re[i]?Re[i]:1;f[at]>f[le.id]+_t?(f[at]=f[le.id]+_t,h[at]=[le.id]):f[at]===f[le.id]+_t&&h[at].push(le.id)})},m=0;m<d;m++)g();h[t]=[t];var _={};for(var D in f)f[D]!==1/0&&eL(t,D,h,_);var L={};for(var D in _)L[D]=_[D][0];return{length:f,path:L,allPath:_}};function eL(r,e,t,n){if(r===e)return[r];if(n[e])return n[e];for(var i=[],o=0,a=t[e];o<a.length;o++){var u=eL(r,a[o],t,n);if(!u)return;for(var l=0,c=u;l<c.length;l++){var f=c[l];(0,ue.isArray)(f)?i.push((0,De.__spreadArray)((0,De.__spreadArray)([],f,!0),[e],!1)):i.push([f,e])}}return n[e]=i,n[e]}var tL=function(e,t,n,i,o){var a=$m(e,t,i,o);return{length:a.length[n],path:a.path[n],allPath:a.allPath[n]}},nL=function(e,t,n,i){var o;if(t===n)return[[t]];var a=e.edges,s=void 0===a?[]:a,u=[t],l=((o={})[t]=!0,o),c=[],f=[],h=i?ll(t,s,"target"):ll(t,s);for(c.push(h);u.length>0&&c.length>0;){var d=c[c.length-1];if(d.length){var g=d.shift();if(g&&(u.push(g),l[g]=!0,h=i?ll(g,s,"target"):ll(g,s),c.push(h.filter(function(D){return!l[D]}))),u[u.length-1]===n){var _=u.map(function(L){return L});f.push(_),m=u.pop(),l[m]=!1,c.pop()}}else{var m=u.pop();l[m]=!1,c.pop()}}return f};const Ym=function(e,t){for(var n=$g(e,t),i=[],o=n.length,a=0;a<o;a+=1){i[a]=[];for(var s=0;s<o;s+=1)i[a][s]=a===s?0:0!==n[a][s]&&n[a][s]?n[a][s]:1/0}for(var u=0;u<o;u+=1)for(a=0;a<o;a+=1)for(s=0;s<o;s+=1)i[a][s]>i[a][u]+i[u][s]&&(i[a][s]=i[a][u]+i[u][s]);return i},rL=function(e,t,n,i){void 0===t&&(t=!1),void 0===n&&(n="weight"),void 0===i&&(i=1e3);var o=e.nodes,a=void 0===o?[]:o,s=e.edges,u=void 0===s?[]:s,l={},c={};a.forEach(function(Z,le){var pe=YN();Z.clusterId=pe,l[pe]={id:pe,nodes:[Z]},c[Z.id]={node:Z,idx:le}});var f=$g(e,t),h=[],d={};f.forEach(function(Z,le){var pe=0,Ee=a[le].id;d[Ee]={},Z.forEach(function(Re,Ve){Re&&(pe+=Re,d[Ee][a[Ve].id]=Re)}),h.push(pe)});for(var g=0,m=function(){var le=!1;if(a.forEach(function(pe){var Ee={};Object.keys(d[pe.id]).forEach(function(Tt){var kt=d[pe.id][Tt],Kn=c[Tt].node.clusterId;Ee[Kn]||(Ee[Kn]=0),Ee[Kn]+=kt});var Re=-1/0,Ve=[];if(Object.keys(Ee).forEach(function(Tt){Re<Ee[Tt]?(Re=Ee[Tt],Ve=[Tt]):Re===Ee[Tt]&&Ve.push(Tt)}),1!==Ve.length||Ve[0]!==pe.clusterId){var Ue=Ve.indexOf(pe.clusterId);if(Ue>=0&&Ve.splice(Ue,1),Ve&&Ve.length){le=!0;var at=l[pe.clusterId],_t=at.nodes.indexOf(pe);at.nodes.splice(_t,1);var vn=Math.floor(Math.random()*Ve.length),Cn=l[Ve[vn]];Cn.nodes.push(pe),pe.clusterId=Cn.id}}}),!le)return"break";g++};g<i&&"break"!==m(););Object.keys(l).forEach(function(Z){var le=l[Z];(!le.nodes||!le.nodes.length)&&delete l[Z]});var D=[],L={};u.forEach(function(Z){var Ee=Z[n]||1,Re=c[Z.source].node.clusterId,Ve=c[Z.target].node.clusterId,Ue="".concat(Re,"---").concat(Ve);if(L[Ue])L[Ue].weight+=Ee,L[Ue].count++;else{var at={source:Re,target:Ve,weight:Ee,count:1};L[Ue]=at,D.push(at)}});var O=[];return Object.keys(l).forEach(function(Z){O.push(l[Z])}),{clusters:O,clusterEdges:D}};var fq=function(){function r(e){this.arr=e}return r.prototype.getArr=function(){return this.arr||[]},r.prototype.add=function(e){var t,n=e.arr;if(null===(t=this.arr)||void 0===t||!t.length)return new r(n);if(!n?.length)return new r(this.arr);if(this.arr.length===n.length){var i=[];for(var o in this.arr)i[o]=this.arr[o]+n[o];return new r(i)}},r.prototype.subtract=function(e){var t,n=e.arr;if(null===(t=this.arr)||void 0===t||!t.length)return new r(n);if(!n?.length)return new r(this.arr);if(this.arr.length===n.length){var i=[];for(var o in this.arr)i[o]=this.arr[o]-n[o];return new r(i)}},r.prototype.avg=function(e){var t=[];if(0!==e)for(var n in this.arr)t[n]=this.arr[n]/e;return new r(t)},r.prototype.negate=function(){var e=[];for(var t in this.arr)e[t]=-this.arr[t];return new r(e)},r.prototype.squareEuclideanDistance=function(e){var t,n=e.arr;if(null===(t=this.arr)||void 0===t||!t.length||!n?.length)return 0;if(this.arr.length===n.length){var i=0;for(var o in this.arr)i+=Math.pow(this.arr[o]-e.arr[o],2);return i}},r.prototype.euclideanDistance=function(e){var t,n=e.arr;if(null===(t=this.arr)||void 0===t||!t.length||!n?.length)return 0;if(this.arr.length===n.length){var i=0;for(var o in this.arr)i+=Math.pow(this.arr[o]-e.arr[o],2);return Math.sqrt(i)}console.error("The two vectors are unequal in length.")},r.prototype.normalize=function(){var e=[],t=(0,ue.clone)(this.arr);t.sort(function(a,s){return a-s});var n=t[t.length-1],i=t[0];for(var o in this.arr)e[o]=(this.arr[o]-i)/(n-i);return new r(e)},r.prototype.norm2=function(){var e;if(null===(e=this.arr)||void 0===e||!e.length)return 0;var t=0;for(var n in this.arr)t+=Math.pow(this.arr[n],2);return Math.sqrt(t)},r.prototype.dot=function(e){var t,n=e.arr;if(null===(t=this.arr)||void 0===t||!t.length||!n?.length)return 0;if(this.arr.length===n.length){var i=0;for(var o in this.arr)i+=this.arr[o]*e.arr[o];return i}console.error("The two vectors are unequal in length.")},r.prototype.equal=function(e){var t,n=e.arr;if((null===(t=this.arr)||void 0===t?void 0:t.length)!==n?.length)return!1;for(var i in this.arr)if(this.arr[i]!==n[i])return!1;return!0},r}();const Ll=fq;var V1=function(e,t){void 0===t&&(t=void 0);var n=[];return e.forEach(function(i){void 0===t&&n.push(i),void 0!==i[t]&&n.push(i[t])}),n},kl=(()=>((kl||(kl={})).EuclideanDistance="euclideanDistance",kl))(),H1=function(e,t,n){var i=function(e,t,n){var i=[];t?.length?i=t:(e.forEach(function(a){i=i.concat(Object.keys(a))}),i=(0,ue.uniq)(i));var o={};return i.forEach(function(a){var s=[];e.forEach(function(u){void 0!==u[a]&&""!==u[a]&&s.push(u[a])}),s.length&&!n?.includes(a)&&(o[a]=(0,ue.uniq)(s))}),o}(e,t,n),o=[];if(!Object.keys(i).length)return o;var s=Object.values(i).every(function(u){return u.every(function(l){return"number"==typeof l})});return e.forEach(function(u,l){var c=[];Object.keys(i).forEach(function(f){var h=u[f],d=i[f],g=d.findIndex(function(D){return h===D}),m=[];if(s)m.push(h);else for(var _=0;_<d.length;_++)m.push(_===g?1:0);c=c.concat(m)}),o[l]=c}),o},KS=function(e,t,n,i){void 0===n&&(n=kl.EuclideanDistance);var o=0;return n===kl.EuclideanDistance&&(o=new Ll(e).euclideanDistance(new Ll(t))),o},aL=function(e,t,n,i){for(var o=t.length,a=2*i,s=0,u=0;u<o;u++)for(var l=e[u].clusterId,c=0;c<o;c++)l===e[c].clusterId&&(s+=(t[u][c]||0)-(n[u]||0)*(n[c]||0)/a);return s*(1/a)},ZS=function(e,t){void 0===e&&(e=[]);for(var n=e.length,i=new Ll([]),o=0;o<n;o++)i=i.add(new Ll(t[o]));var a=i.avg(n);a.normalize();var s=0;for(o=0;o<n;o++)s+=(u=new Ll(t[o])).squareEuclideanDistance(a);var c=[];for(e.forEach(function(){c.push([])}),o=0;o<n;o++){var u=new Ll(t[o]);e[o].clusterInertial=0;for(var f=0;f<n;f++)if(o!==f){var h=new Ll(t[f]);c[o][f]=u.squareEuclideanDistance(h),e[o].clusterInertial+=c[o][f]}else c[o][f]=0}var d=0,g=2*n*s;for(o=0;o<n;o++){var m=e[o].clusterId;for(f=0;f<n;f++)o!==f&&m===e[f].clusterId&&(d+=e[o].clusterInertial*e[f].clusterInertial/Math.pow(g,2)-c[o][f]/g)}return Number(d.toFixed(4))};const QS=function(e,t,n,i,o,a,s,u,l){void 0===t&&(t=!1),void 0===n&&(n="weight"),void 0===i&&(i=1e-4),void 0===o&&(o=!1),void 0===a&&(a=void 0),void 0===s&&(s=[]),void 0===u&&(u=["id"]),void 0===l&&(l=1);var c=e.nodes,f=void 0===c?[]:c,h=e.edges,d=void 0===h?[]:h,g=[];if(o){f.forEach(function(mn,On){mn.properties=mn.properties||{},mn.originIndex=On});var m=[];f.every(function(mn){return mn.hasOwnProperty("nodeType")})&&(m=Array.from(new Set(f.map(function(mn){return mn.nodeType}))),f.forEach(function(mn){mn.properties.nodeType=m.findIndex(function(On){return On===mn.nodeType})}));var _=V1(f,a);g=H1(_,s,u)}var D=1,L={},O={};f.forEach(function(mn,On){var Vn=String(D++);mn.clusterId=Vn,L[Vn]={id:Vn,nodes:[mn]},O[mn.id]={node:mn,idx:On}});var Z=$g(e,t),le=[],pe={},Ee=0;Z.forEach(function(mn,On){var Vn=0,rr=f[On].id;pe[rr]={},mn.forEach(function(vr,Sr){vr&&(Vn+=vr,pe[rr][f[Sr].id]=vr,Ee+=vr)}),le.push(Vn)}),Ee/=2;for(var Re=1/0,Ve=1/0,Ue=0,at=[],_t={};;){Re=o&&f.every(function(mn){return mn.hasOwnProperty("properties")})?aL(f,Z,le,Ee)+ZS(f,g)*l:aL(f,Z,le,Ee),0===Ue&&(Ve=Re,at=f,_t=L);var vn=Re>0&&Re>Ve&&Re-Ve<i;if(Re>Ve&&(at=f.map(function(mn){return{node:mn,clusterId:mn.clusterId}}),_t=(0,ue.clone)(L),Ve=Re),vn||Ue>100)break;Ue++,Object.keys(L).forEach(function(mn){var On=0;d.forEach(function(Vn){var Sr=O[Vn.source].node.clusterId,Zr=O[Vn.target].node.clusterId;(Sr===mn&&Zr!==mn||Zr===mn&&Sr!==mn)&&(On+=Vn[n]||1)}),L[mn].sumTot=On}),f.forEach(function(mn,On){var vr,Vn=L[mn.clusterId],rr=0,Sr=le[On]/(2*Ee),Zr=0,ni=Vn.nodes;ni.forEach(function(es){Zr+=Z[On][O[es.id].idx]||0});var ji=Zr-Vn.sumTot*Sr,Wi=ni.filter(function(es){return es.id!==mn.id}),po=[];Wi.forEach(function(es,ts){po[ts]=g[es.originIndex]});var io=ZS(Wi,g)*l;if(Object.keys(pe[mn.id]).forEach(function(es){var hl=O[es].node.clusterId;if(hl!==mn.clusterId){var Ys=L[hl],Su=Ys.nodes;if(Su&&Su.length){var zi=0;Su.forEach(function($i){zi+=Z[On][O[$i.id].idx]||0});var bo=zi-Ys.sumTot*Sr,Pi=Su.concat([mn]),wo=[];Pi.forEach(function($i,qi){wo[qi]=g[$i.originIndex]});var Oo=ZS(Pi,g)*l,Yr=bo-ji;o&&(Yr=bo+Oo-(ji+io)),Yr>rr&&(rr=Yr,vr=Ys)}}}),rr>0){vr.nodes.push(mn);var Ro=mn.clusterId;mn.clusterId=vr.id;var Yl=Vn.nodes.indexOf(mn);Vn.nodes.splice(Yl,1);var Ja=0,Xl=0;d.forEach(function(es){var Ys=O[es.source].node.clusterId,Su=O[es.target].node.clusterId;(Ys===vr.id&&Su!==vr.id||Su===vr.id&&Ys!==vr.id)&&(Ja+=es[n]||1),(Ys===Ro&&Su!==Ro||Su===Ro&&Ys!==Ro)&&(Xl+=es[n]||1)}),vr.sumTot=Ja,Vn.sumTot=Xl}})}var Cn={},Tt=0;Object.keys(_t).forEach(function(mn){var On=_t[mn];if(On.nodes&&On.nodes.length){var Vn=String(Tt+1);Vn!==mn&&(On.id=Vn,On.nodes=On.nodes.map(function(rr){return{id:rr.id,clusterId:Vn}}),_t[Vn]=On,Cn[mn]=Vn,delete _t[mn],Tt++)}else delete _t[mn]}),at.forEach(function(mn){var On=mn.node;!On||(On.clusterId=mn.clusterId,On.clusterId&&Cn[On.clusterId]&&(On.clusterId=Cn[On.clusterId]))});var kt=[],Ln={};d.forEach(function(mn){var rr=mn[n]||1,vr=O[mn.source].node.clusterId,Sr=O[mn.target].node.clusterId;if(vr&&Sr){var Zr="".concat(vr,"---").concat(Sr);if(Ln[Zr])Ln[Zr].weight+=rr,Ln[Zr].count++;else{var ni={source:vr,target:Sr,weight:rr,count:1};Ln[Zr]=ni,kt.push(ni)}}});var Kn=[];return Object.keys(_t).forEach(function(mn){Kn.push(_t[mn])}),{clusters:Kn,clusterEdges:kt}},sL=function(e,t,n,i,o,a,s,u){return void 0===t&&(t=!1),void 0===n&&(n="weight"),void 0===i&&(i=1e-4),void 0===o&&(o=void 0),void 0===a&&(a=[]),void 0===s&&(s=["id"]),void 0===u&&(u=1),QS(e,t,n,i,!0,o,a,s,u)},uL=function(e,t){var n;void 0===t&&(t=1);for(var i=(0,ue.clone)(e),o=i.nodes,a=void 0===o?[]:o,s=i.edges,u=void 0===s?[]:s,l=function(){var h=Wm({nodes:a,edges:u}),d=Object.keys(h);d.sort(function(_,D){var L,O;return(null===(L=h[_])||void 0===L?void 0:L.degree)-(null===(O=h[D])||void 0===O?void 0:O.degree)});var g=d[0];if(!a.length||(null===(n=h[g])||void 0===n?void 0:n.degree)>=t)return"break";var m=a.findIndex(function(_){return _.id===g});a.splice(m,1),u=u.filter(function(_){return!(_.source===g||_.target===g)})};"break"!==l(););return{nodes:a,edges:u}};var lL=function(e,t,n){return e===kl.EuclideanDistance?t[n]:[]};const cL=function(e,t,n,i,o,a){void 0===t&&(t=3),void 0===n&&(n=void 0),void 0===i&&(i=[]),void 0===o&&(o=["id"]),void 0===a&&(a=kl.EuclideanDistance);var s=e.nodes,u=void 0===s?[]:s,l=e.edges,c=void 0===l?[]:l,f={clusters:[{id:"0",nodes:u}],clusterEdges:[]};if(a===kl.EuclideanDistance&&!u.every(function(Vn){return Vn.hasOwnProperty(n)}))return f;var h=[],d=[];if(a===kl.EuclideanDistance&&(h=V1(u,n),d=H1(h,i,o)),!d.length)return f;for(var g=(0,ue.uniq)(d.map(function(Vn){return Vn.join("")})),m=Math.min(t,u.length,g.length),_=0;_<u.length;_++)u[_].originIndex=_;var D=[],L=[],O=[];for(_=0;_<m;_++)if(0===_){var Z=Math.floor(Math.random()*u.length);D[_]=a===kl.EuclideanDistance?d[Z]:[],L.push(Z),O[_]=[u[Z]],u[Z].clusterId=String(_)}else{for(var le=-1/0,pe=0,Ee=function(vr){if(!L.includes(vr)){for(var Sr=0,Zr=0;Zr<D.length;Zr++){var ni=0;a===kl.EuclideanDistance&&(ni=KS(d[u[vr].originIndex],D[Zr],a)),Sr+=ni}var ji=Sr/D.length;ji>le&&!D.find(function(Wi){return(0,ue.isEqual)(Wi,lL(a,d,u[vr].originIndex))})&&(le=ji,pe=vr)}},Re=0;Re<u.length;Re++)Ee(Re);D[_]=lL(a,d,pe),L.push(pe),O[_]=[u[pe]],u[pe].clusterId=String(_)}for(var Ve=0;;){for(_=0;_<u.length;_++){var Ue=0,at=1/0;if(0!==Ve||!L.includes(_)){for(var _t=0;_t<D.length;_t++){var vn=0;a===kl.EuclideanDistance&&(vn=KS(d[_],D[_t],a)),vn<at&&(at=vn,Ue=_t)}if(void 0!==u[_].clusterId)for(var Cn=O[Number(u[_].clusterId)].length-1;Cn>=0;Cn--)O[Number(u[_].clusterId)][Cn].id===u[_].id&&O[Number(u[_].clusterId)].splice(Cn,1);u[_].clusterId=String(Ue),O[Ue].push(u[_])}}var Tt=!1;for(_=0;_<O.length;_++){var kt=O[_],Ln=new Ll([]);for(_t=0;_t<kt.length;_t++)Ln=Ln.add(new Ll(d[kt[_t].originIndex]));var Kn=Ln.avg(kt.length);Kn.equal(new Ll(D[_]))||(Tt=!0,D[_]=Kn.getArr())}if(Ve++,u.every(function(Vn){return void 0!==Vn.clusterId})&&Tt||Ve>=1e3)break}var mn=[],On={};return c.forEach(function(Vn){var rr,vr,Sr=Vn.source,Zr=Vn.target,ni=null===(rr=u.find(function(io){return io.id===Sr}))||void 0===rr?void 0:rr.clusterId,ji=null===(vr=u.find(function(io){return io.id===Zr}))||void 0===vr?void 0:vr.clusterId,Wi="".concat(ni,"---").concat(ji);if(On[Wi])On[Wi].count++;else{var po={source:ni,target:ji,count:1};On[Wi]=po,mn.push(po)}}),{clusters:O,clusterEdges:mn}},JS=function(e,t){var n=new Ll(t),i=n.norm2(),o=new Ll(e),a=o.norm2(),s=n.dot(o),u=i*a;return u?s/u:0},fL=function(e,t,n,i,o){void 0===e&&(e=[]),void 0===n&&(n=void 0),void 0===i&&(i=[]),void 0===o&&(o=[]);var a=(0,ue.clone)(e.filter(function(h){return h.id!==t.id})),s=e.findIndex(function(h){return h.id===t.id}),u=V1(e,n),l=H1(u,i,o),c=l[s],f=[];return a.forEach(function(h,d){if(h.id!==t.id){var m=JS(l[d],c);f.push(m),h.cosineSimilarity=m}}),a.sort(function(h,d){return d.cosineSimilarity-h.cosineSimilarity}),{allCosineSimilarity:f,similarNodes:a}};var Eq=function(){function r(e){this.count=e.length,this.parent={};for(var t=0,n=e;t<n.length;t++){var i=n[t];this.parent[i]=i}}return r.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},r.prototype.union=function(e,t){var n=this.find(e),i=this.find(t);n!==i&&(n<i?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},r.prototype.connected=function(e,t){return this.find(e)===this.find(t)},r}();const _q=Eq;var Sq=function(e,t){return e-t},Mq=function(){function r(e){void 0===e&&(e=Sq),this.compareFn=e,this.list=[]}return r.prototype.getLeft=function(e){return 2*e+1},r.prototype.getRight=function(e){return 2*e+2},r.prototype.getParent=function(e){return 0===e?null:Math.floor((e-1)/2)},r.prototype.isEmpty=function(){return this.list.length<=0},r.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},r.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),e},r.prototype.insert=function(e){return null!==e&&(this.list.push(e),this.moveUp(this.list.length-1),!0)},r.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&e>0&&this.compareFn(this.list[t],this.list[e])>0;){var n=this.list[t];this.list[t]=this.list[e],this.list[e]=n,t=this.getParent(e=t)}},r.prototype.moveDown=function(e){var t,n=e,i=this.getLeft(e),o=this.getRight(e),a=this.list.length;null!==i&&i<a&&this.compareFn(this.list[n],this.list[i])>0?n=i:null!==o&&o<a&&this.compareFn(this.list[n],this.list[o])>0&&(n=o),e!==n&&(this.list[e]=(t=[this.list[n],this.list[e]])[0],this.list[n]=t[1],this.moveDown(n))},r}();const Cq=Mq;var Aq=function(e,t){var n=[],i=e.nodes,o=void 0===i?[]:i,a=e.edges,s=void 0===a?[]:a;if(0===o.length)return n;var u=o[0],l=new Set;l.add(u);var f=new Cq(function(_,D){return t?_.weight-D.weight:0});for(U1(u.id,s).forEach(function(m){f.insert(m)});!f.isEmpty();){var h=f.delMin(),d=h.source,g=h.target;l.has(d)&&l.has(g)||(n.push(h),l.has(d)||(l.add(d),U1(d,s).forEach(function(m){f.insert(m)})),l.has(g)||(l.add(g),U1(g,s).forEach(function(m){f.insert(m)})))}return n},hL=function(e,t){var n=[],i=e.nodes,o=void 0===i?[]:i,a=e.edges;if(0===o.length)return n;var u=(void 0===a?[]:a).map(function(d){return d});t&&u.sort(function(d,g){return d.weight-g.weight});for(var l=new _q(o.map(function(d){return d.id}));u.length>0;){var c=u.shift(),f=c.source,h=c.target;l.connected(f,h)||(n.push(c),l.union(f,h))}return n};const dL=function(e,t,n){return n?{prim:Aq,kruskal:hL}[n](e,t):hL(e,t)},gL=function(e,t,n){"number"!=typeof t&&(t=1e-6),"number"!=typeof n&&(n=.85);for(var h,i=1,o=0,a=1e3,s=e.nodes,u=void 0===s?[]:s,l=e.edges,c=void 0===l?[]:l,f=u.length,d={},g={},m=0;m<f;++m)d[D=(_=u[m]).id]=1/f,g[D]=1/f;for(var L=Wm(e);a>0&&i>t;){for(o=0,m=0;m<f;++m){var D=(_=u[m]).id;if(h=0,0===L[_.id].inDegree)d[D]=0;else{for(var O=ll(D,c,"source"),Z=0;Z<O.length;++Z){var le=O[Z],pe=L[le].outDegree;pe>0&&(h+=g[le]/pe)}d[D]=n*h,o+=d[D]}}for(o=(1-o)/f,i=0,m=0;m<f;++m){var _;h=d[D=(_=u[m]).id]+o,i+=Math.abs(h-g[D]),g[D]=h}a-=1}return g};var If="-1",mL=function r(e,t,n,i){void 0===e&&(e=-1),void 0===t&&(t=-1),void 0===n&&(n=-1),void 0===i&&(i="-1"),this.id=e,this.from=t,this.to=n,this.label=i},Oq=function(){function r(e,t){void 0===e&&(e=-1),void 0===t&&(t=If),this.id=e,this.label=t,this.edges=[],this.edgeMap={}}return r.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},r}(),yL=function(){function r(e,t,n){void 0===e&&(e=-1),void 0===t&&(t=!0),void 0===n&&(n=!1),this.id=e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return r.prototype.getNodeNum=function(){return this.nodes.length},r.prototype.addNode=function(e,t){if(!this.nodeMap[e]){var n=new Oq(e,t);this.nodes.push(n),this.nodeMap[e]=n,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e)}},r.prototype.addEdge=function(e,t,n,i){if((this.edgeIdAutoIncrease||void 0===e)&&(e=this.counter++),!(this.nodeMap[t]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[e])){var o=new mL(e,t,n,i);if(this.edges.push(o),this.edgeMap[e]=o,this.nodeMap[t].addEdge(o),this.edgeLabelMap[i]||(this.edgeLabelMap[i]=[]),this.edgeLabelMap[i].push(o),!this.directed){var a=new mL(e,n,t,i);this.nodeMap[n].addEdge(a),this.edgeLabelMap[i].push(a)}}},r}(),Yg=function(){function r(e,t,n,i,o){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:n||If,edgeLabel:i||"-1",nodeLabel2:o||If}}return r.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},r.prototype.notEqualTo=function(e){return!this.equalTo(e)},r}(),bL=function(){function r(){this.rmpath=[],this.dfsEdgeList=[]}return r.prototype.equalTo=function(e){var t=this.dfsEdgeList.length;if(t!==e.length)return!1;for(var i=0;i<t;i++)if(this.dfsEdgeList[i]!==e[i])return!1;return!0},r.prototype.notEqualTo=function(e){return!this.equalTo(e)},r.prototype.pushBack=function(e,t,n,i,o){return this.dfsEdgeList.push(new Yg(e,t,n,i,o)),this.dfsEdgeList},r.prototype.toGraph=function(e,t){void 0===e&&(e=-1),void 0===t&&(t=!1);var n=new yL(e,!0,t);return this.dfsEdgeList.forEach(function(i){var o=i.fromNode,a=i.toNode,s=i.nodeEdgeNodeLabel,u=s.nodeLabel1,l=s.edgeLabel,c=s.nodeLabel2;u!==If&&n.addNode(o,u),c!==If&&n.addNode(a,c),u!==If&&c!==u&&n.addEdge(void 0,o,a,l)}),n},r.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,n=this.dfsEdgeList.length-1;n>=0;n--){var i=this.dfsEdgeList[n],o=i.fromNode,a=i.toNode;o<a&&(void 0===e||a===e)&&(this.rmpath.push(n),e=o)}return this.rmpath},r.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach(function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)}),Object.keys(e).length},r}(),$1=function(){function r(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return r.prototype.hasNode=function(e){return 1===this.nodesUsed[e.id]},r.prototype.hasEdge=function(e){return 1===this.edgesUsed[e.id]},r}(),Pq=function(){function r(e){var n=e.minSupport,i=void 0===n?2:n,o=e.minNodeNum,a=void 0===o?1:o,s=e.maxNodeNum,u=void 0===s?4:s,l=e.top,c=void 0===l?10:l,f=e.directed,h=void 0!==f&&f,d=e.verbose,g=void 0!==d&&d;this.graphs=e.graphs,this.dfsCode=new bL,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=i,this.top=c,this.directed=h,this.counter=0,this.maxNodeNum=u,this.minNodeNum=a,this.verbose=g,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return r.prototype.findForwardRootEdges=function(e,t){var n=this,i=[],o=e.nodeMap;return t.edges.forEach(function(a){(n.directed||t.label<=o[a.to].label)&&i.push(a)}),i},r.prototype.findBackwardEdge=function(e,t,n,i){if(!this.directed&&t===n)return null;for(var o=e.nodeMap,s=o[n.to].edges,u=s.length,l=0;l<u;l++){var c=s[l];if(!i.hasEdge(c)&&c.to===t.from)if(this.directed){if(o[t.from].label<o[n.to].label||o[t.from].label===o[n.to].label&&t.label<=c.label)return c}else if(t.label<c.label||t.label===c.label&&o[t.to].label<=o[n.to].label)return c}return null},r.prototype.findForwardPureEdges=function(e,t,n,i){for(var o=[],s=e.nodeMap[t.to].edges,u=s.length,l=0;l<u;l++){var c=s[l],f=e.nodeMap[c.to];n<=f.label&&!i.hasNode(f)&&o.push(c)}return o},r.prototype.findForwardRmpathEdges=function(e,t,n,i){for(var o=[],a=e.nodeMap,s=a[t.to].label,l=a[t.from].edges,c=l.length,f=0;f<c;f++){var h=l[f],d=a[h.to].label;t.to===h.to||n>d||i.hasNode(a[h.to])||(t.label<h.label||t.label===h.label&&s<=d)&&o.push(h)}return o},r.prototype.getSupport=function(e){var t={};return e.forEach(function(n){t[n.graphId]||(t[n.graphId]=!0)}),Object.keys(t).length},r.prototype.findMinLabel=function(e){var t=void 0;return Object.keys(e).forEach(function(n){var i=e[n],o=i.nodeLabel1,a=i.edgeLabel,s=i.nodeLabel2;t?(o<t.nodeLabel1||o===t.nodeLabel1&&a<t.edgeLabel||o===t.nodeLabel1&&a===t.edgeLabel&&s<t.nodeLabel2)&&(t={nodeLabel1:o,edgeLabel:a,nodeLabel2:s}):t={nodeLabel1:o,edgeLabel:a,nodeLabel2:s}}),t},r.prototype.isMin=function(){var e=this,t=this.dfsCode;if(this.verbose&&console.log("isMin checking",t),1===t.dfsEdgeList.length)return!0;var n=this.directed,i=t.toGraph(-1,n),o=i.nodeMap,a=new bL,s={};i.nodes.forEach(function(f){e.findForwardRootEdges(i,f).forEach(function(d){var g=o[d.to],m="".concat(f.label,"-").concat(d.label,"-").concat(g.label);s[m]||(s[m]={projected:[],nodeLabel1:f.label,edgeLabel:d.label,nodeLabel2:g.label}),s[m].projected.push({graphId:i.id,edge:d,preNode:null})})});var u=this.findMinLabel(s);if(u){a.dfsEdgeList.push(new Yg(0,1,u.nodeLabel1,u.edgeLabel,u.nodeLabel2));var c="".concat(u.nodeLabel1,"-").concat(u.edgeLabel,"-").concat(u.nodeLabel2);return function f(h){for(var d=a.buildRmpath(),g=a.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,m=a.dfsEdgeList[d[0]].toNode,_={},D=!1,L=0,O=n?-1:0,Z=function(Ln){if(D)return"break";h.forEach(function(Kn){var mn=new $1(Kn),On=e.findBackwardEdge(i,mn.edges[d[Ln]],mn.edges[d[0]],mn);On&&(_[On.label]||(_[On.label]={projected:[],edgeLabel:On.label}),_[On.label].projected.push({graphId:i.id,edge:_,preNode:Kn}),L=a.dfsEdgeList[d[Ln]].fromNode,D=!0)})},le=d.length-1;le>O&&"break"!==Z(le);le--);if(D){var Ee=e.findMinLabel(_);a.dfsEdgeList.push(new Yg(m,L,If,Ee.edgeLabel,If));var Re=a.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[Re]===a.dfsEdgeList[Re]&&f(_[Ee.edgeLabel].projected)}var Ve={};D=!1;var Ue=0;h.forEach(function(kt){var Ln=new $1(kt),Kn=e.findForwardPureEdges(i,Ln.edges[d[0]],g,Ln);Kn.length>0&&(D=!0,Ue=m,Kn.forEach(function(mn){var On="".concat(mn.label,"-").concat(o[mn.to].label);Ve[On]||(Ve[On]={projected:[],edgeLabel:mn.label,nodeLabel2:o[mn.to].label}),Ve[On].projected.push({graphId:i.id,edge:mn,preNode:kt})}))});var at=d.length,_t=function(Ln){if(D)return"break";var Kn=d[Ln];h.forEach(function(mn){var On=new $1(mn),Vn=e.findForwardRmpathEdges(i,On.edges[Kn],g,On);Vn.length>0&&(D=!0,Ue=a.dfsEdgeList[Kn].fromNode,Vn.forEach(function(rr){var vr="".concat(rr.label,"-").concat(o[rr.to].label);Ve[vr]||(Ve[vr]={projected:[],edgeLabel:rr.label,nodeLabel2:o[rr.to].label}),Ve[vr].projected.push({graphId:i.id,edge:rr,preNode:mn})}))})};for(le=0;le<at&&"break"!==_t(le);le++);if(!D)return!0;var Cn=e.findMinLabel(Ve);a.dfsEdgeList.push(new Yg(Ue,m+1,If,Cn.edgeLabel,Cn.nodeLabel2));var Tt=a.dfsEdgeList.length-1;return t.dfsEdgeList[Tt]===a.dfsEdgeList[Tt]&&f(Ve["".concat(Cn.edgeLabel,"-").concat(Cn.nodeLabel2)].projected)}(s[c].projected)}},r.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,ue.clone)(e))}},r.prototype.subGraphMining=function(e){var t=this;if(!(this.getSupport(e)<this.minSupport)&&this.isMin()){this.report();var i=this.dfsCode.getNodeNum(),o=this.dfsCode.buildRmpath(),a=this.dfsCode.dfsEdgeList[o[0]].toNode,s=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,u={},l={};e.forEach(function(c){for(var f=t.graphs[c.graphId],h=f.nodeMap,d=new $1(c),g=o.length-1;g>=0;g--){var m=t.findBackwardEdge(f,d.edges[o[g]],d.edges[o[0]],d);if(m){var _="".concat(t.dfsCode.dfsEdgeList[o[g]].fromNode,"-").concat(m.label);l[_]||(l[_]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[o[g]].fromNode,edgeLabel:m.label}),l[_].projected.push({graphId:c.graphId,edge:m,preNode:c})}}if(!(i>=t.maxNodeNum)){t.findForwardPureEdges(f,d.edges[o[0]],s,d).forEach(function(O){var Z="".concat(a,"-").concat(O.label,"-").concat(h[O.to].label);u[Z]||(u[Z]={projected:[],fromNodeId:a,edgeLabel:O.label,nodeLabel2:h[O.to].label}),u[Z].projected.push({graphId:c.graphId,edge:O,preNode:c})});var L=function(Z){t.findForwardRmpathEdges(f,d.edges[o[Z]],s,d).forEach(function(pe){var Ee="".concat(t.dfsCode.dfsEdgeList[o[Z]].fromNode,"-").concat(pe.label,"-").concat(h[pe.to].label);u[Ee]||(u[Ee]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[o[Z]].fromNode,edgeLabel:pe.label,nodeLabel2:h[pe.to].label}),u[Ee].projected.push({graphId:c.graphId,edge:pe,preNode:c})})};for(g=0;g<o.length;g++)L(g)}}),Object.keys(l).forEach(function(c){var f=l[c];t.dfsCode.dfsEdgeList.push(new Yg(a,f.toNodeId,"-1",f.edgeLabel,"-1")),t.subGraphMining(l[c].projected),t.dfsCode.dfsEdgeList.pop()}),Object.keys(u).forEach(function(c){var f=u[c];t.dfsCode.dfsEdgeList.push(new Yg(f.fromNodeId,a+1,If,f.edgeLabel,f.nodeLabel2)),t.subGraphMining(u[c].projected),t.dfsCode.dfsEdgeList.pop()})}},r.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,t=this.directed,n=this.minSupport,i=this.frequentSize1Subgraphs,o={},a={},s={},u={};return Object.keys(e).forEach(function(l){var c=e[l],f=c.nodeMap;c.nodes.forEach(function(h,d){var g=h.label,m="".concat(l,"-").concat(g);if(!s[m]){var _=o[g]||0;_++,o[g]=_}s[m]={graphKey:l,label:g},h.edges.forEach(function(D){var L=g,O=f[D.to].label;if(!t&&L>O){var Z=O;O=L,L=Z}var le=D.label,pe="".concat(l,"-").concat(L,"-").concat(le,"-").concat(O),Ee="".concat(L,"-").concat(le,"-").concat(O);if(!a[Ee]){var Re=a[Ee]||0;Re++,a[Ee]=Re}u[pe]={graphId:l,nodeLabel1:L,edgeLabel:le,nodeLabel2:O}})})}),Object.keys(o).forEach(function(l){if(!(o[l]<n)){var f={nodes:[],edges:[]};f.nodes.push({id:"0",label:l}),i.push(f)}}),i},r.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs,i={};Object.keys(t).forEach(function(o){var a=t[o],s=a.nodeMap;a.nodes.forEach(function(u){e.findForwardRootEdges(a,u).forEach(function(c){var f=s[c.to],h="".concat(u.label,"-").concat(c.label,"-").concat(f.label);i[h]||(i[h]={projected:[],nodeLabel1:u.label,edgeLabel:c.label,nodeLabel2:f.label}),i[h].projected.push({graphId:o,edge:c,preNode:null})})})}),Object.keys(i).forEach(function(o){var a=i[o],s=a.projected;e.dfsCode.dfsEdgeList.push(new Yg(0,1,a.nodeLabel1,a.edgeLabel,a.nodeLabel2)),e.subGraphMining(s),e.dfsCode.dfsEdgeList.pop()})}},r}(),wL="cluster";var xL=function(e,t,n,i){void 0===n&&(n="cluster"),void 0===i&&(i=2);var o=[],a=e.nodes;return t.forEach(function(s,u){o.push(EL(a,s,u,n,i))}),o},EL=function(e,t,n,i,o){var a=[n],s=[],u={};return t.forEach(function(l,c){if(l<=o&&n!==c){a.push(c),s.push(e[c]);var f=e[c][i];u[f]?(u[f].count++,u[f].dists.push(l)):u[f]={count:1,dists:[l]}}}),Object.keys(u).forEach(function(l){u[l].dists=u[l].dists.sort(function(c,f){return c-f})}),{nodeIdx:n,nodeId:e[n].id,nodeIdxs:a,neighbors:s,neighborNum:a.length-1,nodeLabelCountMap:u}},Y1=function(e,t,n,i){var o=n.nodes;return i||(i={}),Object.keys(e).forEach(function(a){var s,u;if(!i||!i[a]){i[a]={nodes:[],edges:[]};var l=e[a],c=null===(s=t[l.start])||void 0===s?void 0:s.nodeIdxs,f=null===(u=t[l.end])||void 0===u?void 0:u.nodeIdxs;if(c&&f){var h=new Set(f),d=c.filter(function(L){return h.has(L)});if(d&&d.length){for(var g={},m=d.length,_=0;_<m;_++){var D=o[d[_]];i[a].nodes.push(D),g[D.id]=!0}n.edges.forEach(function(L){g[L.source]&&g[L.target]&&i[a].edges.push(L)})}}}}),i},X1=function(e,t,n,i){var o,a,s={};e.nodes.forEach(function(l){s[l.id]=l});var u=0;return null===(o=t?.edges)||void 0===o||!o.length||(null===(a=t?.nodes)||void 0===a?void 0:a.length)<2?0:(e.edges.forEach(function(l){var c=s[l.source][n],f=s[l.target][n],h=t?.nodes[0][n],d=t?.nodes[1][n],g=t?.edges[0][i];l[i]===g&&(c===h&&f===d||c===d&&f===h)&&u++}),u)},_L=function(e,t){var n={},i={};return e.forEach(function(o,a){n[o.id]={idx:a,node:o,degree:0,inDegree:0,outDegree:0};var s=o[t];i[s]||(i[s]=[]),i[s].push(o)}),{nodeMap:n,nodeLabelMap:i}},SL=function(e,t,n){var i={},o={};return e.forEach(function(a,s){i["".concat(YN)]={idx:s,edge:a};var u=a[t];o[u]||(o[u]=[]),o[u].push(a);var l=n[a.source];l&&(l.degree++,l.outDegree++);var c=n[a.target];c&&(c.degree++,c.inDegree++)}),{edgeMap:i,edgeLabelMap:o}},ML=function(e,t,n){var i=t.length,o={};return t.forEach(function(a,s){for(var l=e[s].id,c=n?0:s+1;c<i;c++)if(s!==c){var f=e[c].id,h=a[c];o["".concat(l,"-").concat(f)]=h,n||(o["".concat(f,"-").concat(l)]=h)}}),o},jq=function(e,t,n,i,o,a,s,u,l,c,f){var h,d="".concat(t.id,"-").concat(n.id);if(c&&c[d])return c[d];var g=f?f[d]:void 0;if(!g){var m=((h={})[d]={start:i[t.id].idx,end:i[n.id].idx,distance:o},h);g=(f=Y1(m,a,e,f))[d]}return X1(g,s,u,l)},CL=function(e,t,n,i){var o,a,s,u=null===(o=e[t])||void 0===o?void 0:o.degree,l=null===(a=e[t])||void 0===a?void 0:a.inDegree,c=null===(s=e[t])||void 0===s?void 0:s.outDegree;return void 0===e[t]&&(u=1/0,l=1/0,c=1/0,i[t].forEach(function(f){var h=n[f.id].degree;u>h&&(u=h);var d=n[f.id].inDegree;l>d&&(l=d);var g=n[f.id].outDegree;c>g&&(c=g)}),e[t]={degree:u,inDegree:l,outDegree:c}),{minPatternNodeLabelDegree:u,minPatternNodeLabelInDegree:l,minPatternNodeLabelOutDegree:c}};const AL=function(e,t,n,i,o,a,s){var u;if(void 0===n&&(n=!1),void 0===a&&(a="cluster"),void 0===s&&(s="cluster"),e&&e.nodes){var l=e.nodes.length;if(l){var c=Ym(e,n),f=Ym(t,n),h=ML(e.nodes,c,n),d=ML(t.nodes,f,n),g=_L(e.nodes,a),m=g.nodeMap,_=g.nodeLabelMap,D=_L(t.nodes,a),L=D.nodeMap,O=D.nodeLabelMap;SL(e.edges,s,m);var Z=SL(t.edges,s,L).edgeLabelMap,le=[];f?.forEach(function(zi){le=le.concat(zi)}),o||(o=Math.max.apply(Math,(0,De.__spreadArray)((0,De.__spreadArray)([],le,!1),[2],!1))),i||(i=o);var pe=xL(e,c,a,i),Ee=xL(t,f,a,i),Ve=function(e,t,n,i,o){var a=Math.ceil(n/t),s={},u=0;return i.forEach(function(l,c){for(var f=0,h=0,d=l.nodeIdxs,g=l.neighborNum-1;f<a;){for(var m=d[1+Math.floor(Math.random()*g)],_=0;(s["".concat(c,"-").concat(m)]||s["".concat(m,"-").concat(c)])&&(m=Math.floor(Math.random()*t),!(++_>2*t)););if(_<2*t&&(s["".concat(c,"-").concat(m)]={start:c,end:m,distance:o[c][m]},f++,++u>=n))return s;if(++h>2*t)break}f<a&&(a=(a+(a-f))/(t-c-1))}),s}(0,l,Math.min(100,l*(l-1)/2),pe,c),Ue=Y1(Ve,pe,e),kt=function(e){var n=e.directed,i=void 0!==n&&n,o=e.nodeLabelProp,a=void 0===o?wL:o,s=e.edgeLabelProp,u=void 0===s?wL:s,l=function(e,t,n,i){var o={};return Object.keys(e).forEach(function(a,s){var u=e[a],l=new yL(s,!0,t),c={};u.nodes.forEach(function(f,h){l.addNode(h,f[n]),c[f.id]=h}),u.edges.forEach(function(f,h){l.addEdge(-1,c[f.source],c[f.target],f[i])}),l&&l.getNodeNum()&&(o[l.id]=l)}),o}(e.graphs,i,a,u),_=new Pq({graphs:l,minSupport:e.minSupport,maxNodeNum:e.maxNodeNum,minNodeNum:e.minNodeNum,top:e.top,verbose:e.verbose,directed:i});_.run();var D=function(e,t,n){var i=[];return e.forEach(function(o){var a={nodes:[],edges:[]};o.nodes.forEach(function(s){var u;a.nodes.push(((u={id:"".concat(s.id)})[t]=s.label,u))}),o.edges.forEach(function(s){var u;a.edges.push(((u={source:"".concat(s.from),target:"".concat(s.to)})[n]=s.label,u))}),i.push(a)}),i}(_.frequentSubgraphs,a,u);return D}({graphs:Ue,nodeLabelProp:a,edgeLabelProp:s,minSupport:1,minNodeNum:1,maxNodeNum:4,directed:n}).slice(0,10),Ln=kt.length,Kn=[];kt.forEach(function(zi,bo){Kn[bo]={},Object.keys(Ue).forEach(function(Pi){var Oo=X1(Ue[Pi],zi,a,s);Kn[bo][Pi]=Oo})});var mn=function(e,t,n){for(var i=1/0,o=0,a=function(l){var c=e[l],f=Object.keys(c).sort(function(L,O){return c[L]-c[O]}),d=[];f.forEach(function(L,O){d[O%10]||(d[O%10]={graphs:[],totalCount:0,aveCount:0}),d[O%10].graphs.push(L),d[O%10].totalCount+=c[L]});var g=0,m=[];d.forEach(function(L){var O=L.totalCount/L.graphs.length;L.aveCount=O,m.push(O);var Z=0,le=L.length;L.graphs.forEach(function(pe,Ee){var Re=c[pe];L.graphs.forEach(function(Ve,Ue){Ee!==Ue&&(Z+=Math.abs(Re-c[Ve]))})}),g+=Z/=le*(le-1)/2}),g/=d.length;var _=0;m.forEach(function(L,O){m.forEach(function(Z,le){O!==le&&(_+=Math.abs(L-Z))}),_/=m.length*(m.length-1)/2});var D=_-g;i<D&&(i=D,o=l)},s=0;s<t;s++)a(s);return{structure:n[o],structureCountMap:e[o]}}(Kn,Ln,kt),On=mn.structure,Vn=mn.structureCountMap,rr=t.nodes[0],vr=[],Sr=null===(u=t.nodes[0])||void 0===u?void 0:u[a],Zr=-1/0;t.nodes.forEach(function(zi){var bo=zi[a],Pi=_[bo];Pi?.length>Zr&&(Zr=Pi.length,vr=Pi,Sr=bo,rr=zi)});var ni={},ji={},Wi={},po={},io={},Xo={};Object.keys(O).forEach(function(zi,bo){io[zi]=[],n&&(Xo[zi]=[]);var Pi=-1/0,Oo={};O[zi].forEach(function(Ji){var vo=d["".concat(rr.id,"-").concat(Ji.id)];if(vo&&io[zi].push(vo),Pi<vo&&(Pi=vo),Oo["".concat(rr.id,"-").concat(Ji.id)]={start:0,end:L[Ji.id].idx,distance:vo},n){var ga=d["".concat(Ji.id,"-").concat(rr.id)];ga&&Xo[zi].push(ga)}}),io[zi]=io[zi].sort(function(Ji,vo){return Ji-vo}),n&&(Xo[zi]=Xo[zi].sort(function(Ji,vo){return Ji-vo})),ji=Y1(Oo,Ee,t,ji);var Yr=[];if(Object.keys(Oo).forEach(function(Ji){Wi[Ji]||(Wi[Ji]=X1(ji[Ji],On,a,s)),Yr.push(Wi[Ji])}),Yr=Yr.sort(function(Ji,vo){return vo-Ji}),po["".concat(rr.id,"-").concat(zi)]=Yr,zi!==Sr)for(var qi=function(vo){var ga=vr[vo],dl=pe[m[ga.id].idx],Va=dl.nodeLabelCountMap[zi],xp=O[zi].length;if(!Va||Va.count<xp)return vr.splice(vo,1),"continue";for(var F0=!1,Mu=0;Mu<xp;Mu++)if(Va.dists[Mu]>io[zi][Mu]){F0=!0;break}if(F0)return vr.splice(vo,1),"continue";var ql={};dl.neighbors.forEach(function(Cu){var zc=h["".concat(ga.id,"-").concat(Cu.id)];ql["".concat(ga.id,"-").concat(Cu.id)]={start:m[ga.id].idx,end:m[Cu.id].idx,distance:zc}}),Ue=Y1(ql,pe,e,Ue);var Xf=[];Object.keys(ql).forEach(function(Cu){Vn[Cu]||(Vn[Cu]=X1(Ue[Cu],On,a,s)),Xf.push(Vn[Cu])}),Xf=Xf.sort(function(Cu,zc){return zc-Cu});var rg=!1;for(Mu=0;Mu<xp;Mu++)if(Xf[Mu]<Yr[Mu]){rg=!0;break}return rg?(vr.splice(vo,1),"continue"):void 0},Po=(vr?.length||0)-1;Po>=0;Po--)qi(Po)});var Ro=[];vr?.forEach(function(zi){for(var bo=m[zi.id].idx,wo=EL(e.nodes,c[bo],bo,a,o).neighbors,Yr=!1,$i=wo.length-1;$i>=0;$i--){if(wo.length+1<t.nodes.length)return void(Yr=!0);var qi=wo[$i],Po=qi[a];if(O[Po]&&O[Po].length)if(io[Po]&&io[Po].length){var Ji="".concat(zi.id,"-").concat(qi.id),vo=h[Ji],ga=io[Po].length-1;if(vo>io[Po][ga])wo.splice($i,1);else{if(n){var Va="".concat(qi.id,"-").concat(zi.id);if(h[Va]>Xo[Po][ga=Xo[Po].length-1]){wo.splice($i,1);continue}}var Mu=Vn[Ji]?Vn[Ji]:jq(e,zi,qi,m,vo,pe,On,a,s,Vn,Ue),ql="".concat(rr.id,"-").concat(Po);if(Mu<po[ql][po[ql].length-1])wo.splice($i,1);else{var rg=CL(ni,Po,L,O);m[qi.id].degree<rg.minPatternNodeLabelDegree&&wo.splice($i,1)}}}else wo.splice($i,1);else wo.splice($i,1)}Yr||Ro.push({nodes:[zi].concat(wo)})});var Yl=$m(t,rr.id,!1).length,Ja={};n?(Object.keys(Yl).forEach(function(zi){var bo=L[zi].node[a];Ja[bo]?Ja[bo].push(Yl[zi]):Ja[bo]=[Yl[zi]]}),Object.keys(Ja).forEach(function(zi){Ja[zi].sort(function(bo,Pi){return bo-Pi})})):Ja=io;for(var es=function(bo){var Pi=Ro[bo],wo=Pi.nodes[0],Oo={},Yr={};Pi.nodes.forEach(function(sa,gl){Yr[sa.id]={idx:gl,node:sa,degree:0,inDegree:0,outDegree:0};var ms=sa[a];Oo[ms]?Oo[ms]++:Oo[ms]=1});var $i=[],qi={};e.edges.forEach(function(sa){Yr[sa.source]&&Yr[sa.target]&&($i.push(sa),qi[sa[s]]?qi[sa[s]]++:qi[sa[s]]=1,Yr[sa.source].degree++,Yr[sa.target].degree++,Yr[sa.source].outDegree++,Yr[sa.target].inDegree++)});for(var Po=Object.keys(Z).length,Ji=!1,vo=0;vo<Po;vo++){var ga=Object.keys(Z)[vo];if(!qi[ga]||qi[ga]<Z[ga].length){Ji=!0;break}}if(Ji)return Ro.splice(bo,1),"continue";var dl=$i.length;if(dl<t.edges.length)return Ro.splice(bo,1),"break";var Va=!1,xp=function(gl){var ms=$i[gl],qf=ms[s],Ep=Z[qf];if(!Ep||!Ep.length)return qi[qf]--,Ep&&qi[qf]<Ep.length?(Va=!0,"break"):($i.splice(gl,1),Yr[ms.source].degree--,Yr[ms.target].degree--,Yr[ms.source].outDegree--,Yr[ms.target].inDegree--,"continue");var gz=Yr[ms.source].node[a],pz=Yr[ms.target].node[a],uD=!1;return Ep.forEach(function(vz){var mz=L[vz.source].node,yz=L[vz.target].node;mz[a]===gz&&yz[a]===pz&&(uD=!0),!n&&mz[a]===pz&&yz[a]===gz&&(uD=!0)}),uD?void 0:(qi[qf]--,Ep&&qi[qf]<Ep.length?(Va=!0,"break"):($i.splice(gl,1),Yr[ms.source].degree--,Yr[ms.target].degree--,Yr[ms.source].outDegree--,Yr[ms.target].inDegree--,"continue"))};for(vo=dl-1;vo>=0&&"break"!==xp(vo);vo--);if(Va)return Ro.splice(bo,1),"continue";Pi.edges=$i;var Mu=$m(Pi,Pi.nodes[0].id,!1).length;if(Object.keys(Mu).reverse().forEach(function(sa){if(sa!==Pi.nodes[0].id&&!Va){if(Mu[sa]===1/0){if(Oo[gl=Yr[sa].node[a]]--,Oo[gl]<O[gl].length)return void(Va=!0);var ms=Pi.nodes.indexOf(Yr[sa].node);return Pi.nodes.splice(ms,1),void(Yr[sa]=void 0)}var qf=m[sa].node[a];if(!Ja[qf]||!Ja[qf].length||Mu[sa]>Ja[qf][Ja[qf].length-1]){var gl;if(Oo[gl=Yr[sa].node[a]]--,Oo[gl]<O[gl].length)return void(Va=!0);ms=Pi.nodes.indexOf(Yr[sa].node),Pi.nodes.splice(ms,1),Yr[sa]=void 0}}}),Va)return Ro.splice(bo,1),"continue";for(var ql=!0,Xf=0;ql&&!Va;){if(ql=!1,n?Yr[wo.id].degree<L[rr.id].degree||Yr[wo.id].inDegree<L[rr.id].inDegree||Yr[wo.id].outDegree<L[rr.id].outDegree:Yr[wo.id].degree<L[rr.id].degree){Va=!0;break}if(Oo[wo[a]]<O[wo[a]].length){Va=!0;break}for(var zc=Pi.nodes.length-1;zc>=0;zc--){var Xh=Pi.nodes[zc],hz=Yr[Xh.id].degree,Vxe=Yr[Xh.id].inDegree,Hxe=Yr[Xh.id].outDegree,sD=CL(ni,Xh[a],L,O),dz=sD.minPatternNodeLabelDegree;if(n?hz<dz||Vxe<sD.minPatternNodeLabelInDegree||Hxe<sD.minPatternNodeLabelOutDegree:hz<dz){if(Oo[Xh[a]]--,Oo[Xh[a]]<O[Xh[a]].length){Va=!0;break}Pi.nodes.splice(zc,1),Yr[Xh.id]=void 0,ql=!0}}if(Va||!ql&&0!==Xf)break;for(var Jx=(dl=$i.length)-1;Jx>=0;Jx--){var qh=$i[Jx];if(!Yr[qh.source]||!Yr[qh.target]){$i.splice(Jx,1);var eE=qh[s];if(qi[eE]--,Yr[qh.source]&&(Yr[qh.source].degree--,Yr[qh.source].outDegree--),Yr[qh.target]&&(Yr[qh.target].degree--,Yr[qh.target].inDegree--),Z[eE]&&qi[eE]<Z[eE].length){Va=!0;break}ql=!0}}Xf++}return Va||Va||Pi.nodes.length<t.nodes.length||$i.length<t.edges.length?(Ro.splice(bo,1),"continue"):void 0},ts=Ro.length-1;ts>=0&&"break"!==es(ts);ts--);var Ys=Ro.length,Su=function(bo){var wo={};Ro[bo].edges.forEach(function($i){var qi="".concat($i.source,"-").concat($i.target,"-").concat($i.label);wo[qi]?wo[qi]++:wo[qi]=1});for(var Oo=function(qi){var Ji={};Ro[qi].edges.forEach(function(ga){var dl="".concat(ga.source,"-").concat(ga.target,"-").concat(ga.label);Ji[dl]?Ji[dl]++:Ji[dl]=1});var vo=!0;Object.keys(Ji).length!==Object.keys(wo).length?vo=!1:Object.keys(wo).forEach(function(ga){Ji[ga]!==wo[ga]&&(vo=!1)}),vo&&Ro.splice(qi,1)},Yr=Ys-1;Yr>bo;Yr--)Oo(Yr);Ys=Ro.length};for(ts=0;ts<=Ys-1;ts++)Su(ts);return Ro}}};var Gq=function(){function r(e){void 0===e&&(e=10),this.linkedList=new $N,this.maxStep=e}return Object.defineProperty(r.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),r.prototype.isEmpty=function(){return!this.linkedList.head},r.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},r.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},r.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},r.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},r.prototype.toArray=function(){return this.linkedList.toArray().map(function(e){return e.value})},r.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},r}();const jv=Gq;var DL=qS;const Uq={getAdjMatrix:$g,breadthFirstSearch:XN,connectedComponent:WS,getDegree:Wm,getInDegree:KN,getOutDegree:ZN,detectCycle:qS,detectDirectedCycle:DL,detectAllCycles:JN,detectAllDirectedCycle:XS,detectAllUndirectedCycle:YS,depthFirstSearch:$S,dijkstra:$m,findAllPath:nL,findShortestPath:tL,floydWarshall:Ym,labelPropagation:rL,louvain:QS,iLouvain:sL,kCore:uL,kMeans:cL,cosineSimilarity:JS,nodesCosineSimilarity:fL,minimumSpanningTree:dL,pageRank:gL,getNeighbors:ll,Stack:jv,GADDI:AL};var eM=G(3454),Kr=G(8235),q1=Nl,Vq=function(e){return function(t,n){return t[e]-n[e]}},TL=function(e,t,n){return e>=t&&e<=n},K1=function(e,t,n,i){var a_x=n.x-e.x,a_y=n.y-e.y,s_x=t.x-e.x,s_y=t.y-e.y,u_x=i.x-n.x,u_y=i.y-n.y,l=s_x*u_y-s_y*u_x,f=1/l;if(l*l>1e-4*(s_x*s_x+s_y*s_y)*(u_x*u_x+u_y*u_y)){var g=(a_x*u_y-a_y*u_x)*f,m=(a_x*s_y-a_y*s_x)*f;return TL(g,0,1)&&TL(m,0,1)?{x:e.x+g*s_x,y:e.y+g*s_y}:null}return null},IL=function(e,t){var n=e.x,i=e.y,o=e.width,a=e.height,l=[],c={x:n+o/2,y:i+a/2};l.push({x:n,y:i}),l.push({x:n+o,y:i}),l.push({x:n+o,y:i+a}),l.push({x:n,y:i+a}),l.push({x:n,y:i});for(var f=null,h=1;h<l.length&&!(f=K1(l[h-1],l[h],c,t));h++);return f},OL=function(e,t){var n=e.x,i=e.y,o=e.r,u=t.x-n,l=t.y-i;if(u*u+l*l<o*o)return null;var c=Math.atan(l/u);return{x:n+Math.abs(o*Math.cos(c))*Math.sign(u),y:i+Math.abs(o*Math.sin(c))*Math.sign(l)}},PL=function(e,t){var n=e.rx,i=e.ry,o=e.x,a=e.y,l=Math.atan2((t.y-a)/i,(t.x-o)/n);return l<0&&(l+=2*Math.PI),{x:o+n*Math.cos(l),y:a+i*Math.sin(l)}},zv=function(e,t,n){void 0===n&&(n=1);var i=[e.x,e.y,n];return(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]),eM.transformMat3(i,i,t),{x:i[0],y:i[1]}},NL=function(e,t,n){void 0===n&&(n=1),(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]);var i=Tf.invert([1,0,0,0,1,0,0,0,1],t);i||(i=[1,0,0,0,1,0,0,0,1]);var o=[e.x,e.y,n];return eM.transformMat3(o,o,i),{x:o[0],y:o[1]}},tM=function(e,t,n){var i=e.x-t.x,o=e.y-t.y,a=e.x-n.x,s=e.y-n.y,u=(e.x*e.x-t.x*t.x-t.y*t.y+e.y*e.y)/2,l=(e.x*e.x-n.x*n.x-n.y*n.y+e.y*e.y)/2,c=o*a-i*s;return{x:-(s*u-o*l)/c,y:-(i*l-a*u)/c}},Z1=function(e,t){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)},Hq=function(e,t){var n=[];return e.forEach(function(i){var o=[];i.forEach(function(a){o.push(a*t)}),n.push(o)}),n},Wq=function(e){for(var t=[],n=e.length,i=0;i<n;i+=1){t[i]=[];for(var o=0;o<n;o+=1)t[i][o]=i===o?0:0!==e[i][o]&&e[i][o]?e[i][o]:1/0}for(var a=0;a<n;a+=1)for(i=0;i<n;i+=1)for(o=0;o<n;o+=1)t[i][o]>t[i][a]+t[a][o]&&(t[i][o]=t[i][a]+t[a][o]);return t},$q=function(e,t){var n=e.nodes,i=e.edges,o=[],a={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(function(s,u){a[s.id]=u,o.push([])}),i&&i.forEach(function(s){var c=a[s.source],f=a[s.target];o[c][f]=1,t||(o[f][c]=1)}),o},LL=function(e,t){e.translate(t.x,t.y)},nM=function(e,t,n,i){void 0===i&&(i={duration:500});var o=e.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]);var a=e.getCanvasBBox(),s=t.x-a.minX,u=t.y-a.minY;if(n){var l=s*o[0],c=u*o[4],f=0,h=0,d=0,g=0;e.animate(function(_){return o=q1(o,[["t",(d=l*_)-f,(g=c*_)-h]]),f=d,h=g,{matrix:o}},i)}else{var m=q1(o,[["t",s,u]]);e.setMatrix(m)}},Yq=function(e,t){var n=e.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var i=t;(0,ue.isArray)(t)||(i=[t,t]),(0,ue.isArray)(t)&&1===t.length&&(i=[t[0],t[0]]),n=q1(n,[["s",i[0],i[1]]]),e.setMatrix(n)},Xq=function(e,t){var n=e.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]),n=q1(n,[["r",t]]),e.setMatrix(n)},qq=function(e,t,n){for(var i=[],o=0;o<e;o++)i[o]=0;return n.forEach(function(a){a.source&&(i[t[a.source]]+=1),a.target&&(i[t[a.target]]+=1)}),i};function Kq(r,e,t){return(t[0]-r[0])*(e[1]-r[1])==(e[0]-r[0])*(t[1]-r[1])&&Math.min(r[0],e[0])<=t[0]&&t[0]<=Math.max(r[0],e[0])&&Math.min(r[1],e[1])<=t[1]&&t[1]<=Math.max(r[1],e[1])}var Xm=function(e,t,n){var i=!1,o=e.length;function s(f){return Math.abs(f)<1e-6?0:f<0?-1:1}if(o<=2)return!1;for(var u=0;u<o;u++){var l=e[u],c=e[(u+1)%o];if(Kq(l,c,[t,n]))return!0;s(l[1]-n)>0!=s(c[1]-n)>0&&s(t-(n-l[1])*(l[0]-c[0])/(l[1]-c[1])-l[0])<0&&(i=!i)}return i},kL=function(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)},RL=function(e,t){var n=function(h){var d=h.map(function(m){return m[0]}),g=h.map(function(m){return m[1]});return{minX:Math.min.apply(null,d),maxX:Math.max.apply(null,d),minY:Math.min.apply(null,g),maxY:Math.max.apply(null,g)}},i=function(h){for(var d=[],g=h.length,m=0;m<g-1;m++){var _=h[m],D=h[m+1];d.push({from:{x:_[0],y:_[1]},to:{x:D[0],y:D[1]}})}if(d.length>1){var L=h[0],O=h[g-1];d.push({from:{x:O[0],y:O[1]},to:{x:L[0],y:L[1]}})}return d};if(e.length<2||t.length<2)return!1;var o=n(e),a=n(t);if(!kL(o,a))return!1;var s=!1;if((0,ue.each)(t,function(f){if(Xm(e,f[0],f[1]))return s=!0,!1}),s||((0,ue.each)(e,function(f){if(Xm(t,f[0],f[1]))return s=!0,!1}),s))return!0;var u=i(e),l=i(t),c=!1;return(0,ue.each)(l,function(f){if(function(e,t){var n=!1;return(0,ue.each)(e,function(i){if(K1(i.from,i.to,t.from,t.to))return n=!0,!1}),n}(u,f))return c=!0,!1}),c},Xg=function(){function r(e,t,n,i){this.x1=e,this.y1=t,this.x2=n,this.y2=i}return r.prototype.getBBox=function(){var e=Math.min(this.x1,this.x2),t=Math.min(this.y1,this.y2),n=Math.max(this.x1,this.x2),i=Math.max(this.y1,this.y2);return{x:e,y:t,minX:e,minY:t,maxX:n,maxY:i,width:n-e,height:i-t}},r}(),rM=function(e,t){return{top:[e.minX,e.minY,e.maxX,e.minY],left:[e.minX,e.minY,e.minX,e.maxY],bottom:[e.minX,e.maxY,e.maxX,e.maxY],right:[e.maxX,e.minY,e.maxX,e.maxY]}[t]},Qq=function(e,t){var o=(t.y2-t.y1)*(e.x2-e.x1)-(t.x2-t.x1)*(e.y2-e.y1);if(o){var a=((t.x2-t.x1)*(e.y1-t.y1)-(t.y2-t.y1)*(e.x1-t.x1))/o,s=((e.x2-e.x1)*(e.y1-t.y1)-(e.y2-e.y1)*(e.x1-t.x1))/o;if(a>=0&&a<=1&&s>=0&&s<=1)return a}return Number.POSITIVE_INFINITY},FL=function(e,t){for(var n=["top","left","bottom","right"],i=e.getBBox(),o=0,a=[],s=0;s<4;s++){var u=rM(i,n[s]);a[s]=K1({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},{x:u[0],y:u[1]},{x:u[2],y:u[3]}),a[s]&&(o+=1)}return[a,o]},iM=function(e,t){for(var n=["top","left","bottom","right"],i=e.getBBox(),o=Number.POSITIVE_INFINITY,a=0,s=0;s<4;s++){var u=rM(i,n[s]),d=Qq(t,new Xg(u[0],u[1],u[2],u[3]));(d=Math.abs(d-.5))>=0&&d<=1&&(a+=1,o=d<o?d:o)}return 0===a?-1:o},BL=function(e){var t=0,n=0;if(e.length>0){for(var i=0,o=e;i<o.length;i++){var a=o[i];t+=a.x,n+=a.y}t/=e.length,n/=e.length}return{x:t,y:n}},Q1=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)},jL=function(e,t){var c,n=t.x1,i=t.y1,o=t.x2-n,a=t.y2-i,s=e.x-n,u=e.y-i,l=s*o+u*a;c=l<=0||(l=(s=o-s)*o+(u=a-u)*a)<=0?0:l*l/(o*o+a*a);var f=s*s+u*u-c;return f<0&&(f=0),f},oM=function(e,t,n){return void 0===n&&(n=.001),Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(n,2)},zL=function(e,t){var n=e.x<t.x,i=e.x>t.x+t.width,o=e.y>t.y+t.height,a=e.y<t.y;if(!(n||i||o||a))return 0;if(o&&!n&&!i)return Math.pow(t.y+t.height-e.y,2);if(a&&!n&&!i)return Math.pow(e.y-t.y,2);if(n&&!o&&!a)return Math.pow(t.x-e.x,2);if(i&&!o&&!a)return Math.pow(t.x+t.width-e.x,2);var u=Math.min(Math.abs(t.x-e.x),Math.abs(t.x+t.width-e.x)),l=Math.min(Math.abs(t.y-e.y),Math.abs(t.y+t.height-e.y));return u*u+l*l},Jq=function(e,t){var n=e[0],i=e[1],s=t.x,u=t.y,l=[e[2]-n,e[3]-i];if(Kr.exactEquals(l,[0,0]))return NaN;var c=[-l[1],l[0]];return Kr.normalize(c,c),Math.abs(Kr.dot([s-n,u-i],c))},aM=function(e,t,n){return e+(t-e)*n},sM=function(e,t,n){for(var i=Math.min(e.length,t.length),o=new Array(i),a=0;a<i;a++)o[a]=aM(e[a],t[a],n);return o},Ad="rgb(95, 149, 255)",GL="rgb(0, 0, 0)",uM="rgb(247, 250, 255)",J1="rgb(253, 253, 253)",VL="rgb(250, 250, 250)",ew="rgb(224, 224, 224)",HL="rgb(234, 234, 234)",WL="#4572d9";const jr={version:"0.8.6",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Ad,fill:"rgb(239, 244, 255)"},size:20,color:Ad,linkPoints:{size:8,lineWidth:1,fill:uM,stroke:Ad}},nodeStateStyles:{active:{fill:uM,stroke:Ad,lineWidth:2,shadowColor:Ad,shadowBlur:10},selected:{fill:"rgb(255, 255, 255)",stroke:Ad,lineWidth:4,shadowColor:Ad,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:"rgb(223, 234, 255)",stroke:WL,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:uM,stroke:"rgb(191, 213, 255)",lineWidth:1},disable:{fill:VL,stroke:ew,lineWidth:1}},edgeLabel:{style:{fill:GL,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:ew,lineAppendWidth:2},color:ew},edgeStateStyles:{active:{stroke:Ad,lineWidth:1},selected:{stroke:Ad,lineWidth:2,shadowColor:Ad,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Ad,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:HL,lineWidth:1},disable:{stroke:"rgb(245, 245, 245)",lineWidth:1}},comboLabel:{style:{fill:GL,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:J1,lineWidth:1,stroke:ew,r:5,width:20,height:10},size:[20,5],color:ew,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Ad,lineWidth:1,fill:uM},selected:{stroke:Ad,lineWidth:2,fill:J1,shadowColor:Ad,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:WL,lineWidth:2,fill:J1,"text-shape":{fontWeight:500}},inactive:{stroke:ew,fill:J1,lineWidth:1},disable:{stroke:HL,fill:VL,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:typeof window<"u"&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},iK={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875};var Of=Math.PI,lM=Math.sin,cM=Math.cos,Ds=lM(Of/8),Ts=cM(Of/8),tw=function(e,t){var n=e.getBBox(),i={x:n.minX,y:n.minY},o={x:n.maxX,y:n.maxY};if(t){var a=t.getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]),i=zv(i,a),o=zv(o,a)}var s=i.x,u=i.y,l=o.x,c=o.y;return{x:s,y:u,minX:s,minY:u,maxX:l,maxY:c,width:l-s,height:c-u}},$L=function(e){var t=e.sourceNode||e.targetNode,i=t.get("group").getMatrix();i||(i=[1,0,0,0,1,0,0,0,1]);var o=t.getKeyShape(),a=o.getCanvasBBox(),s=e.loopCfg||{},u=s.dist||2*Math.max(a.width,a.height),l=s.position||jr.defaultLoopPosition,c=[(a.minX+a.maxX)/2,(a.minY+a.maxY)/2],f=[e.startPoint.x,e.startPoint.y],h=[e.endPoint.x,e.endPoint.y],d=a.height/2,g=a.width/2,m=d,_=d,D=m*Ds,L=m*Ts,O=_*Ds,Z=_*Ts,le=o.get("type"),pe=Math.min(d/2,g/2),Ee=Math.min(d,g),Re=s?.pointPadding?Math.min(Ee,s?.pointPadding):pe;if(f[0]===h[0]&&f[1]===h[1]){switch(l){case"top":"circle"===le?(f=[c[0]-D,c[1]-L],h=[c[0]+O,c[1]-Z]):(f=[c[0]-Re,c[1]-d],h=[c[0]+Re,c[1]-d]);break;case"top-right":m=d,_=g,"circle"===le?(f=[c[0]+(D=m*Ds),c[1]-(L=m*Ts)],h=[c[0]+(Z=_*Ts),c[1]-(O=_*Ds)]):(f=[c[0]+g-Re,c[1]-d],h=[c[0]+g,c[1]-d+Re]);break;case"right":m=g,_=g,"circle"===le?(f=[c[0]+(L=m*Ts),c[1]-(D=m*Ds)],h=[c[0]+(Z=_*Ts),c[1]+(O=_*Ds)]):(f=[c[0]+g,c[1]-Re],h=[c[0]+g,c[1]+Re]);break;case"bottom-right":m=g,_=d,"circle"===le?(f=[c[0]+(L=m*Ts),c[1]+(D=m*Ds)],h=[c[0]+(O=_*Ds),c[1]+(Z=_*Ts)]):(f=[c[0]+g,c[1]+d-Re],h=[c[0]+g-Re,c[1]+d]);break;case"bottom":m=d,_=d,"circle"===le?(f=[c[0]+(D=m*Ds),c[1]+(L=m*Ts)],h=[c[0]-(O=_*Ds),c[1]+(Z=_*Ts)]):(f=[c[0]-Re,c[1]+d],h=[c[0]+Re,c[1]+d]);break;case"bottom-left":m=d,_=g,"circle"===le?(f=[c[0]-(D=m*Ds),c[1]+(L=m*Ts)],h=[c[0]-(Z=_*Ts),c[1]+(O=_*Ds)]):(f=[c[0]-g,c[1]+d-Re],h=[c[0]-g+Re,c[1]+d]);break;case"left":m=g,_=g,"circle"===le?(f=[c[0]-(L=m*Ts),c[1]+(D=m*Ds)],h=[c[0]-(Z=_*Ts),c[1]-(O=_*Ds)]):(f=[c[0]-g,c[1]-Re],h=[c[0]-g,c[1]+Re]);break;case"top-left":m=g,_=d,"circle"===le?(f=[c[0]-(L=m*Ts),c[1]-(D=m*Ds)],h=[c[0]-(O=_*Ds),c[1]-(Z=_*Ts)]):(f=[c[0]-g+Re,c[1]-d],h=[c[0]-g,c[1]-d+Re]);break;default:f=[c[0]-(D=(m=g)*Ds),c[1]-(L=m*Ts)],h=[c[0]+(O=(_=g)*Ds),c[1]-(Z=_*Ts)]}if(!1===s.clockwise){var Ve=[f[0],f[1]];f=[h[0],h[1]],h=[Ve[0],Ve[1]]}}var at=(m+u)/m,_t=(_+u)/_;!1===s.clockwise&&(at=(_+u)/_,_t=(m+u)/m);var vn=Kr.scale([0,0],[f[0]-c[0],f[1]-c[1]],at),Cn=[c[0]+vn[0],c[1]+vn[1]],kt=Kr.scale([0,0],[h[0]-c[0],h[1]-c[1]],_t),Ln=[c[0]+kt[0],c[1]+kt[1]];return e.startPoint={x:f[0],y:f[1]},e.endPoint={x:h[0],y:h[1]},e.controlPoints=[{x:Cn[0],y:Cn[1]},{x:Ln[0],y:Ln[1]}],e},YL=function(e,t,n,i,o){var a=1e-4,s=[],u=e?.getPoint(t);if(!u)return{x:0,y:0,angle:0};if(t<a)s=e.getStartTangent().reverse();else if(t>1-a)s=e.getEndTangent();else{var l=e?.getPoint(t+a);s.push([u.x,u.y]),s.push([l.x,l.y])}var c=Math.atan2(s[1][1]-s[0][1],s[1][0]-s[0][0]);if(c<0&&(c+=2*Of),n&&(u.x+=cM(c)*n,u.y+=lM(c)*n),i){var f=c-Of/2;c>.5*Of&&c<1.5*Of&&(f-=Of),u.x+=cM(f)*i,u.y+=lM(f)*i}var h={x:u.x,y:u.y,angle:c};return o?(c>.5*Of&&c<1.5*Of&&(c-=Of),(0,De.__assign)({rotate:c},h)):h},oK=function r(e,t,n,i){if(!1===i(e,t,n))return!1;if(e&&e.children)for(var o=e.children.length-1;o>=0;o--)if(!r(e.children[o],e,o,i))return!1;return!0},aK=function r(e,t,n,i){if(e&&e.children)for(var o=e.children.length-1;o>=0;o--)if(!r(e.children[o],e,o,i))return;return!1!==i(e,t,n)},ou=function(e,t){"function"==typeof t&&oK(e,null,-1,t)},Pf=function(e,t){"function"==typeof t&&aK(e,null,-1,t)},XL=function(e,t){return t*(iK[e]||1)},qL=function(e,t){var n=0,i=new RegExp("[\u4e00-\u9fa5]+");return e.split("").forEach(function(o){i.test(o)?n+=t:n+=XL(o,t)}),[n,t]},KL=function(e,t){return"number"!=typeof t||t<=0||t>=e.length?e:e.substring(0,t)+"..."},fM=function(e,t){var n=[],i={},o={};e.forEach(function(u){o[u.id]=u}),e.forEach(function(u,l){var c=(0,ue.clone)(u);c.itemType="combo",c.children=void 0,c.parentId===c.id?(console.warn("The parentId for combo ".concat(c.id," can not be the same as the combo's id")),delete c.parentId):c.parentId&&!o[c.parentId]&&(console.warn("The parent combo for combo ".concat(c.id," does not exist!")),delete c.parentId);var f=i[c.id];if(f){if(c.children=f.children,i[c.id]=c,!(f=c).parentId)return void n.push(f);var h=i[f.parentId];h?h.children?h.children.push(c):h.children=[c]:(i[f.parentId]={id:f.parentId,children:[f]},i[c.id]=c)}else if((0,ue.isString)(u.parentId)){var g=i[u.parentId];if(g)g.children?g.children.push(c):g.children=[c],i[c.id]=c;else{var m={id:u.parentId,children:[c]};i[m.id]=m,i[c.id]=c}}else n.push(c),i[c.id]=c});var a={};(t||[]).forEach(function(u){a[u.id]=u;var l=i[u.comboId];if(l){var c={id:u.id,comboId:u.comboId};l.children?l.children.push(c):l.children=[c],c.itemType="node",i[u.id]=c}});var s=0;return n.forEach(function(u){u.depth=s+10,ou(u,function(l){var f=i[l.id].itemType;l.depth=("node"===f?i[l.comboId]:i[l.parentId])&&"node"===f?s+1:s+10,s<l.depth&&(s=l.depth);var h=a[l.id];return h&&(h.depth=l.depth),!0})}),n},hM=function(e,t,n){var i,a,o=e,s={root:{children:e}},u=!1,l="root";(e||[]).forEach(function(g){if(!u){if(g.id===t)return a=g,"combo"===g.itemType?a.parentId=n:a.comboId=n,void(u=!0);ou(g,function(m){var _;return s[m.id]={children:m?.children||[]},o=null===(_=s[m.parentId||m.comboId||"root"])||void 0===_?void 0:_.children,!m||!m.removed&&t!==m.id||!o||(l=m.parentId||m.comboId||"root",a=m,"combo"===m.itemType?a.parentId=n:a.comboId=n,u=!0,!1)})}});var c=(o=null===(i=s[l])||void 0===i?void 0:i.children)?o.indexOf(a):-1;if(c>-1&&o.splice(c,1),u||(a={id:t,itemType:"node",comboId:n},s[t]={children:void 0}),t){var f=!1;if(n){var h=0;(e||[]).forEach(function(g){f||ou(g,function(m){return n!==m.id||(f=!0,m.children?m.children.push(a):m.children=[a],h=m.depth,a.depth="node"===a.itemType?h+2:h+1,!1)})})}else(!n||!f)&&"node"!==a.itemType&&e.push(a);var d=a.depth;ou(a,function(g){return g.depth=d+="node"===g.itemType?2:1,!0})}return e},nw=function(e,t,n){var i={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};if(!e||0===e.length){var o=n?.getModel(),a=o||{},s=a.x,u=a.y,h=a.collapsed?a.fixCollapseSize:a.fixSize,d=(0,ue.isArray)(h)?h:[h,h],g=d[0],m=d[1],_=[g/2,m/2];return{minX:s-_[0],minY:u-_[1],maxX:s+_[0],maxY:u+_[1],x:s,y:u,width:g,height:m}}return e.forEach(function(D){var L=t.findById(D.id);if(L&&L.isVisible()){L.set("bboxCanvasCache",void 0);var O=L.getCanvasBBox();O.x&&i.minX>O.minX&&(i.minX=O.minX),O.y&&i.minY>O.minY&&(i.minY=O.minY),O.x&&i.maxX<O.maxX&&(i.maxX=O.maxX),O.y&&i.maxY<O.maxY&&(i.maxY=O.maxY)}}),i.x=(i.minX+i.maxX)/2,i.y=(i.minY+i.maxY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY,i.centerX=(i.minX+i.maxX)/2,i.centerY=(i.minY+i.maxY)/2,"circle"===n?.getKeyShape().get("type")&&(i.width=Math.hypot(i.height,i.width),i.height=i.width),Object.keys(i).forEach(function(D){(i[D]===1/0||i[D]===-1/0)&&(i[D]=void 0)}),i},sK=function(e){var t=(0,ue.isNumber)(e.x)||(0,ue.isNumber)(e.y)||e.type||e.anchorPoints||e.size;return e.style&&(t=t||(0,ue.isNumber)(e.style.r)||(0,ue.isNumber)(e.style.width)||(0,ue.isNumber)(e.style.height)||(0,ue.isNumber)(e.style.rx)||(0,ue.isNumber)(e.style.ry)),t},rw=function(e){var t={};return Object.keys(e).forEach(function(n){var i=e[n];if((0,ue.isObject)(i)&&!(0,ue.isArray)(i)){var o={};Object.keys(i).forEach(function(a){var s=i[a];"img"===a&&!(0,ue.isString)(s)||(o[a]=(0,ue.clone)(s))}),t[n]=o}else t[n]=(0,ue.clone)(i)}),t},qm=function(e){var i,t=e.animateCfg,n=e.callback;if(t)if(i=(0,ue.clone)(t),t.callback){var o=t.callback;i.callback=function(){n(),o()}}else i.callback=n;else i={duration:500,callback:n};return i},ZL=function(e){if(!e)return console.error("G6 Error Tips: the data must be defined"),!1;var t=e.nodes,n=e.edges,i=e.combos,o=void 0===i?[]:i;if(!t&&!n){var a=!0;return ou(e,function(h){return!!(0,ue.isString)(h.id)||(a=!1,!1)}),a}var s=(t||[]).find(function(h){return!(0,ue.isString)(h.id)});if(s)return console.warn("G6 Warning Tips: missing 'id' property, or %c".concat(s.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1;var u=(t||[]).map(function(h){return h.id}),l=o?.map(function(h){return h.id}),c=(0,De.__spreadArray)((0,De.__spreadArray)([],u,!0),l,!0),f=(n||[]).find(function(h){return!c.includes(h.source)||!c.includes(h.target)});return!f||(console.warn("G6 Warning Tips: The source %c".concat(f.source,"%c or the target %c").concat(f.target,"%c of the edge do not exist in the nodes or combos."),"font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1)},lK=function(){function r(e){this.graph=e,this.destroyed=!1,this.modes=e.get("modes")||{default:[]},this.formatModes(),this.mode=e.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return r.prototype.formatModes=function(){(0,ue.each)(this.modes,function(t){(0,ue.each)(t,function(n,i){(0,ue.isString)(n)&&(t[i]={type:n})})})},r.prototype.setBehaviors=function(e){var o,t=this.graph,i=[];(0,ue.each)(this.modes[e]||[],function(a){var s=UN.getBehavior(a.type||a);!s||(o=new s(a))&&(o.bind(t),i.push(o))}),this.currentBehaves=i},r.mergeBehaviors=function(e,t){return(0,ue.each)(t,function(n){e.indexOf(n)<0&&((0,ue.isString)(n)&&(n={type:n}),e.push(n))}),e},r.filterBehaviors=function(e,t){var n=[];return e.forEach(function(i){var o;o=(0,ue.isString)(i)?i:i.type,t.indexOf(o)<0&&n.push(i)}),n},r.prototype.setMode=function(e){var i=this.graph,o=e;!this.modes[o]||(i.emit("beforemodechange",{mode:e}),(0,ue.each)(this.currentBehaves,function(s){s.delegate&&s.delegate.remove(),s.unbind(i)}),this.setBehaviors(o),i.emit("aftermodechange",{mode:e}),this.mode=e)},r.prototype.getMode=function(){return this.mode},r.prototype.manipulateBehaviors=function(e,t,n){var o,i=this;if(o=(0,ue.isArray)(e)?e:[e],(0,ue.isArray)(t))return(0,ue.each)(t,function(s){i.modes[s]?i.modes[s]=n?r.mergeBehaviors(i.modes[s]||[],o):r.filterBehaviors(i.modes[s]||[],o):n&&(i.modes[s]=o)}),this;var a=t;return t||(a=this.mode),this.modes[a]||n&&(this.modes[a]=o),this.modes[a]=n?r.mergeBehaviors(this.modes[a]||[],o):r.filterBehaviors(this.modes[a]||[],o),this.formatModes(),this.setMode(this.mode),this},r.prototype.updateBehavior=function(e,t,n){(0,ue.isString)(e)&&(e={type:e});var i=[];if(n&&n!==this.mode&&"default"!==n){if(!(i=this.modes[n])||!i.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;var u=i.length;for(a=0;a<u;a++){if((s=i[a]).type===e.type||s===e.type)return s===e.type&&(s={type:s}),Object.assign(s,t),i[a]=s,this;a===u-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(!(i=this.currentBehaves)||!i.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var o=i.length,a=0;a<o;a++){var s;if((s=i[a]).type===e.type)return s.updateCfg(t),this;a===o-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},r.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},r}();const cK=lK;var Km="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029",fK=new RegExp("([a-z])["+Km+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Km+"]*,?["+Km+"]*)+)","ig"),hK=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Km+"]*,?["+Km+"]*","ig"),Gv=function(r){if(!r)return null;if((0,ue.isArray)(r))return r;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(r).replace(fK,function(n,i,o){var a=[],s=i.toLowerCase();if(o.replace(hK,function(u,l){l&&a.push(+l)}),"m"===s&&a.length>2&&(t.push([i].concat(a.splice(0,2))),s="l",i="m"===i?"l":"L"),"o"===s&&1===a.length&&t.push([i,a[0]]),"r"===s)t.push([i].concat(a));else for(;a.length>=e[s]&&(t.push([i].concat(a.splice(0,e[s]))),e[s]););return r}),t},dM=function(r,e){for(var t=[],n=0,i=r.length;i-2*!e>n;n+=2){var o=[{x:+r[n-2],y:+r[n-1]},{x:+r[n],y:+r[n+1]},{x:+r[n+2],y:+r[n+3]},{x:+r[n+4],y:+r[n+5]}];e?n?i-4===n?o[3]={x:+r[0],y:+r[1]}:i-2===n&&(o[2]={x:+r[0],y:+r[1]},o[3]={x:+r[2],y:+r[3]}):o[0]={x:+r[i-2],y:+r[i-1]}:i-4===n?o[3]=o[2]:n||(o[0]={x:+r[n],y:+r[n+1]}),t.push(["C",(6*o[1].x-o[0].x+o[2].x)/6,(6*o[1].y-o[0].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return t},iw=function(r,e,t,n,i){var o=[];if(null===i&&null===n&&(n=t),r=+r,e=+e,t=+t,n=+n,null!==i){var a=Math.PI/180,s=r+t*Math.cos(-n*a),u=r+t*Math.cos(-i*a);o=[["M",s,e+t*Math.sin(-n*a)],["A",t,t,0,+(i-n>180),0,u,e+t*Math.sin(-i*a)]]}else o=[["M",r,e],["m",0,-n],["a",t,n,0,1,1,0,2*n],["a",t,n,0,1,1,0,-2*n],["z"]];return o},gM=function(r){if(!(r=Gv(r))||!r.length)return[["M",0,0]];var s,u,e=[],t=0,n=0,i=0,o=0,a=0;"M"===r[0][0]&&(i=t=+r[0][1],o=n=+r[0][2],a++,e[0]=["M",t,n]);for(var l=3===r.length&&"M"===r[0][0]&&"R"===r[1][0].toUpperCase()&&"Z"===r[2][0].toUpperCase(),c=void 0,f=void 0,h=a,d=r.length;h<d;h++){if(e.push(c=[]),(s=(f=r[h])[0])!==s.toUpperCase())switch(c[0]=s.toUpperCase(),c[0]){case"A":c[1]=f[1],c[2]=f[2],c[3]=f[3],c[4]=f[4],c[5]=f[5],c[6]=+f[6]+t,c[7]=+f[7]+n;break;case"V":c[1]=+f[1]+n;break;case"H":c[1]=+f[1]+t;break;case"R":for(var g=2,m=(u=[t,n].concat(f.slice(1))).length;g<m;g++)u[g]=+u[g]+t,u[++g]=+u[g]+n;e.pop(),e=e.concat(dM(u,l));break;case"O":e.pop(),(u=iw(t,n,f[1],f[2])).push(u[0]),e=e.concat(u);break;case"U":e.pop(),e=e.concat(iw(t,n,f[1],f[2],f[3])),c=["U"].concat(e[e.length-1].slice(-2));break;case"M":i=+f[1]+t,o=+f[2]+n;break;default:for(g=1,m=f.length;g<m;g++)c[g]=+f[g]+(g%2?t:n)}else if("R"===s)u=[t,n].concat(f.slice(1)),e.pop(),e=e.concat(dM(u,l)),c=["R"].concat(f.slice(-2));else if("O"===s)e.pop(),(u=iw(t,n,f[1],f[2])).push(u[0]),e=e.concat(u);else if("U"===s)e.pop(),e=e.concat(iw(t,n,f[1],f[2],f[3])),c=["U"].concat(e[e.length-1].slice(-2));else for(var _=0,D=f.length;_<D;_++)c[_]=f[_];if("O"!==(s=s.toUpperCase()))switch(c[0]){case"Z":t=+i,n=+o;break;case"H":t=c[1];break;case"V":n=c[1];break;case"M":i=c[c.length-2],o=c[c.length-1];break;default:t=c[c.length-2],n=c[c.length-1]}}return e},ow=function(r,e,t,n){return[r,e,t,n,t,n]},QL=function(r,e,t,n,i,o){var a=.3333333333333333,s=2/3;return[a*r+s*t,a*e+s*n,a*i+s*t,a*o+s*n,i,o]},JL=function(r,e,t,n,i,o,a,s,u,l){t===n&&(t+=1);var d,g,m,_,D,c=120*Math.PI/180,f=Math.PI/180*(+i||0),h=[],L=function(ji,Wi,po){return{x:ji*Math.cos(po)-Wi*Math.sin(po),y:ji*Math.sin(po)+Wi*Math.cos(po)}};if(l)g=l[0],m=l[1],_=l[2],D=l[3];else{r=(d=L(r,e,-f)).x,e=d.y,u=(d=L(s,u,-f)).y,r===(s=d.x)&&e===u&&(s+=1,u+=1);var O=(r-s)/2,Z=(e-u)/2,le=O*O/(t*t)+Z*Z/(n*n);le>1&&(t*=le=Math.sqrt(le),n*=le);var pe=t*t,Ee=n*n,Re=(o===a?-1:1)*Math.sqrt(Math.abs((pe*Ee-pe*Z*Z-Ee*O*O)/(pe*Z*Z+Ee*O*O)));_=Re*t*Z/n+(r+s)/2,D=Re*-n*O/t+(e+u)/2,g=Math.asin(((e-D)/n).toFixed(9)),m=Math.asin(((u-D)/n).toFixed(9)),g=r<_?Math.PI-g:g,m=s<_?Math.PI-m:m,g<0&&(g=2*Math.PI+g),m<0&&(m=2*Math.PI+m),a&&g>m&&(g-=2*Math.PI),!a&&m>g&&(m-=2*Math.PI)}var Ve=m-g;if(Math.abs(Ve)>c){var Ue=m,at=s,_t=u;m=g+c*(a&&m>g?1:-1),s=_+t*Math.cos(m),u=D+n*Math.sin(m),h=JL(s,u,t,n,i,0,a,at,_t,[m,Ue,_,D])}Ve=m-g;var vn=Math.cos(g),Cn=Math.sin(g),Tt=Math.cos(m),kt=Math.sin(m),Ln=Math.tan(Ve/4),Kn=4/3*t*Ln,mn=4/3*n*Ln,On=[r,e],Vn=[r+Kn*Cn,e-mn*vn],rr=[s+Kn*kt,u-mn*Tt],vr=[s,u];if(Vn[0]=2*On[0]-Vn[0],Vn[1]=2*On[1]-Vn[1],l)return[Vn,rr,vr].concat(h);for(var Sr=[],Zr=0,ni=(h=[Vn,rr,vr].concat(h).join().split(",")).length;Zr<ni;Zr++)Sr[Zr]=Zr%2?L(h[Zr-1],h[Zr],f).y:L(h[Zr],h[Zr+1],f).x;return Sr},pM=function(r,e){var c,t=gM(r),n=e&&gM(e),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a=[],s=[],u="",l="",f=function(O,Z,le){var pe,Ee;if(!O)return["C",Z.x,Z.y,Z.x,Z.y,Z.x,Z.y];switch(!(O[0]in{T:1,Q:1})&&(Z.qx=Z.qy=null),O[0]){case"M":Z.X=O[1],Z.Y=O[2];break;case"A":O=["C"].concat(JL.apply(0,[Z.x,Z.y].concat(O.slice(1))));break;case"S":"C"===le||"S"===le?(pe=2*Z.x-Z.bx,Ee=2*Z.y-Z.by):(pe=Z.x,Ee=Z.y),O=["C",pe,Ee].concat(O.slice(1));break;case"T":"Q"===le||"T"===le?(Z.qx=2*Z.x-Z.qx,Z.qy=2*Z.y-Z.qy):(Z.qx=Z.x,Z.qy=Z.y),O=["C"].concat(QL(Z.x,Z.y,Z.qx,Z.qy,O[1],O[2]));break;case"Q":Z.qx=O[1],Z.qy=O[2],O=["C"].concat(QL(Z.x,Z.y,O[1],O[2],O[3],O[4]));break;case"L":O=["C"].concat(ow(Z.x,Z.y,O[1],O[2]));break;case"H":O=["C"].concat(ow(Z.x,Z.y,O[1],Z.y));break;case"V":O=["C"].concat(ow(Z.x,Z.y,Z.x,O[1]));break;case"Z":O=["C"].concat(ow(Z.x,Z.y,Z.X,Z.Y))}return O},h=function(O,Z){if(O[Z].length>7){O[Z].shift();for(var le=O[Z];le.length;)a[Z]="A",n&&(s[Z]="A"),O.splice(Z++,0,["C"].concat(le.splice(0,6)));O.splice(Z,1),c=Math.max(t.length,n&&n.length||0)}},d=function(O,Z,le,pe,Ee){O&&Z&&"M"===O[Ee][0]&&"M"!==Z[Ee][0]&&(Z.splice(Ee,0,["M",pe.x,pe.y]),le.bx=0,le.by=0,le.x=O[Ee][1],le.y=O[Ee][2],c=Math.max(t.length,n&&n.length||0))};c=Math.max(t.length,n&&n.length||0);for(var g=0;g<c;g++){t[g]&&(u=t[g][0]),"C"!==u&&(a[g]=u,g&&(l=a[g-1])),t[g]=f(t[g],i,l),"A"!==a[g]&&"C"===u&&(a[g]="C"),h(t,g),n&&(n[g]&&(u=n[g][0]),"C"!==u&&(s[g]=u,g&&(l=s[g-1])),n[g]=f(n[g],o,l),"A"!==s[g]&&"C"===u&&(s[g]="C"),h(n,g)),d(t,n,i,o,g),d(n,t,o,i,g);var m=t[g],_=n&&n[g],D=m.length,L=n&&_.length;i.x=m[D-2],i.y=m[D-1],i.bx=parseFloat(m[D-4])||i.x,i.by=parseFloat(m[D-3])||i.y,o.bx=n&&(parseFloat(_[L-4])||o.x),o.by=n&&(parseFloat(_[L-3])||o.y),o.x=n&&_[L-2],o.y=n&&_[L-1]}return n?[t,n]:t},dK=/,?([a-z]),?/gi,ek=function(r){return r.join(",").replace(dK,"$1")},tk=function(r,e,t,n,i){return r*(r*(-3*e+9*t-9*n+3*i)+6*e-12*t+6*n)-3*e+3*t},nk=function(r,e,t,n,i,o,a,s,u){null===u&&(u=1);for(var l=(u=u>1?1:u<0?0:u)/2,f=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,g=0;g<12;g++){var m=l*f[g]+l,_=tk(m,r,t,i,a),D=tk(m,e,n,o,s);d+=h[g]*Math.sqrt(_*_+D*D)}return l*d},gK=function(r,e,t,n,i,o,a,s){for(var c,f,h,d,u=[],l=[[],[]],g=0;g<2;++g)if(0===g?(f=6*r-12*t+6*i,c=-3*r+9*t-9*i+3*a,h=3*t-3*r):(f=6*e-12*n+6*o,c=-3*e+9*n-9*o+3*s,h=3*n-3*e),Math.abs(c)<1e-12){if(Math.abs(f)<1e-12)continue;(d=-h/f)>0&&d<1&&u.push(d)}else{var m=f*f-4*h*c,_=Math.sqrt(m);if(!(m<0)){var D=(-f+_)/(2*c);D>0&&D<1&&u.push(D);var L=(-f-_)/(2*c);L>0&&L<1&&u.push(L)}}for(var le,O=u.length,Z=O;O--;)l[0][O]=(le=1-(d=u[O]))*le*le*r+3*le*le*d*t+3*le*d*d*i+d*d*d*a,l[1][O]=le*le*le*e+3*le*le*d*n+3*le*d*d*o+d*d*d*s;return l[0][Z]=r,l[1][Z]=e,l[0][Z+1]=a,l[1][Z+1]=s,l[0].length=l[1].length=Z+2,{min:{x:Math.min.apply(0,l[0]),y:Math.min.apply(0,l[1])},max:{x:Math.max.apply(0,l[0]),y:Math.max.apply(0,l[1])}}},pK=function(r,e,t,n,i,o,a,s){if(!(Math.max(r,t)<Math.min(i,a)||Math.min(r,t)>Math.max(i,a)||Math.max(e,n)<Math.min(o,s)||Math.min(e,n)>Math.max(o,s))){var c=(r-t)*(o-s)-(e-n)*(i-a);if(c){var f=((r*n-e*t)*(i-a)-(r-t)*(i*s-o*a))/c,h=((r*n-e*t)*(o-s)-(e-n)*(i*s-o*a))/c,d=+f.toFixed(2),g=+h.toFixed(2);if(!(d<+Math.min(r,t).toFixed(2)||d>+Math.max(r,t).toFixed(2)||d<+Math.min(i,a).toFixed(2)||d>+Math.max(i,a).toFixed(2)||g<+Math.min(e,n).toFixed(2)||g>+Math.max(e,n).toFixed(2)||g<+Math.min(o,s).toFixed(2)||g>+Math.max(o,s).toFixed(2)))return{x:f,y:h}}}},Dd=function(r,e,t){return e>=r.x&&e<=r.x+r.width&&t>=r.y&&t<=r.y+r.height},rk=function(r,e,t,n,i){if(i)return[["M",+r+ +i,e],["l",t-2*i,0],["a",i,i,0,0,1,i,i],["l",0,n-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-t,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-n],["a",i,i,0,0,1,i,-i],["z"]];var o=[["M",r,e],["l",t,0],["l",0,n],["l",-t,0],["z"]];return o.parsePathArray=ek,o},vM=function(r,e,t,n){return null===r&&(r=e=t=n=0),null===e&&(e=r.y,t=r.width,n=r.height,r=r.x),{x:r,y:e,width:t,w:t,height:n,h:n,x2:r+t,y2:e+n,cx:r+t/2,cy:e+n/2,r1:Math.min(t,n)/2,r2:Math.max(t,n)/2,r0:Math.sqrt(t*t+n*n)/2,path:rk(r,e,t,n),vb:[r,e,t,n].join(" ")}},ik=function(r,e,t,n,i,o,a,s){(0,ue.isArray)(r)||(r=[r,e,t,n,i,o,a,s]);var u=gK.apply(null,r);return vM(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},ok=function(r,e,t,n,i,o,a,s,u){var l=1-u,c=Math.pow(l,3),f=Math.pow(l,2),h=u*u,d=h*u,_=r+2*u*(t-r)+h*(i-2*t+r),D=e+2*u*(n-e)+h*(o-2*n+e),L=t+2*u*(i-t)+h*(a-2*i+t),O=n+2*u*(o-n)+h*(s-2*o+n);return{x:c*r+3*f*u*t+3*l*u*u*i+d*a,y:c*e+3*f*u*n+3*l*u*u*o+d*s,m:{x:_,y:D},n:{x:L,y:O},start:{x:l*r+u*t,y:l*e+u*n},end:{x:l*i+u*a,y:l*o+u*s},alpha:90-180*Math.atan2(_-L,D-O)/Math.PI}},mK=function(r,e,t){if(!function(r,e){return r=vM(r),e=vM(e),Dd(e,r.x,r.y)||Dd(e,r.x2,r.y)||Dd(e,r.x,r.y2)||Dd(e,r.x2,r.y2)||Dd(r,e.x,e.y)||Dd(r,e.x2,e.y)||Dd(r,e.x,e.y2)||Dd(r,e.x2,e.y2)||(r.x<e.x2&&r.x>e.x||e.x<r.x2&&e.x>r.x)&&(r.y<e.y2&&r.y>e.y||e.y<r.y2&&e.y>r.y)}(ik(r),ik(e)))return t?0:[];for(var s=~~(nk.apply(0,r)/8),u=~~(nk.apply(0,e)/8),l=[],c=[],f={},h=t?0:[],d=0;d<s+1;d++){var g=ok.apply(0,r.concat(d/s));l.push({x:g.x,y:g.y,t:d/s})}for(d=0;d<u+1;d++)g=ok.apply(0,e.concat(d/u)),c.push({x:g.x,y:g.y,t:d/u});for(d=0;d<s;d++)for(var m=0;m<u;m++){var _=l[d],D=l[d+1],L=c[m],O=c[m+1],Z=Math.abs(D.x-_.x)<.001?"y":"x",le=Math.abs(O.x-L.x)<.001?"y":"x",pe=pK(_.x,_.y,D.x,D.y,L.x,L.y,O.x,O.y);if(pe){if(f[pe.x.toFixed(4)]===pe.y.toFixed(4))continue;f[pe.x.toFixed(4)]=pe.y.toFixed(4);var Ee=_.t+Math.abs((pe[Z]-_[Z])/(D[Z]-_[Z]))*(D.t-_.t),Re=L.t+Math.abs((pe[le]-L[le])/(O[le]-L[le]))*(O.t-L.t);Ee>=0&&Ee<=1&&Re>=0&&Re<=1&&(t?h+=1:h.push({x:pe.x,y:pe.y,t1:Ee,t2:Re}))}}return h},bK=function(r,e){return function(r,e,t){r=pM(r),e=pM(e);for(var n,i,o,a,s,u,l,c,f,h,d=[],g=0,m=r.length;g<m;g++){var _=r[g];if("M"===_[0])n=s=_[1],i=u=_[2];else{"C"===_[0]?(f=[n,i].concat(_.slice(1)),n=f[6],i=f[7]):(f=[n,i,n,i,s,u,s,u],n=s,i=u);for(var D=0,L=e.length;D<L;D++){var O=e[D];if("M"===O[0])o=l=O[1],a=c=O[2];else{"C"===O[0]?(h=[o,a].concat(O.slice(1)),o=h[6],a=h[7]):(h=[o,a,o,a,l,c,l,c],o=l,a=c);for(var Z=mK(f,h,t),le=0,pe=Z.length;le<pe;le++)Z[le].segment1=g,Z[le].segment2=D,Z[le].bez1=f,Z[le].bez2=h;d=d.concat(Z)}}}}return d}(r,e)};function wK(r,e){var t=[],n=[];return r.length&&function i(o,a){if(1===o.length)t.push(o[0]),n.push(o[0]);else{for(var s=[],u=0;u<o.length-1;u++)0===u&&t.push(o[0]),u===o.length-2&&n.push(o[u+1]),s[u]=[(1-a)*o[u][0]+a*o[u+1][0],(1-a)*o[u][1]+a*o[u+1][1]];i(s,a)}}(r,e),{left:t,right:n.reverse()}}var _K=function(r,e){if(1===r.length)return r;var t=r.length-1,n=e.length-1,i=t/n,o=[];if(1===r.length&&"M"===r[0][0]){for(var a=0;a<n-t;a++)r.push(r[0]);return r}for(a=0;a<n;a++){var s=Math.floor(i*a);o[s]=(o[s]||0)+1}var u=o.reduce(function(l,c,f){return l.concat(f===t?r[t]:function(r,e,t){if(1===t)return[[].concat(r)];var n=[];if("L"===e[0]||"C"===e[0]||"Q"===e[0])n=n.concat(function xK(r,e,t){var n=[[r[1],r[2]]];t=t||2;var i=[];"A"===e[0]?(n.push(e[6]),n.push(e[7])):"C"===e[0]?(n.push([e[1],e[2]]),n.push([e[3],e[4]]),n.push([e[5],e[6]])):"S"===e[0]||"Q"===e[0]?(n.push([e[1],e[2]]),n.push([e[3],e[4]])):n.push([e[1],e[2]]);for(var o=n,a=1/t,s=0;s<t-1;s++){var l=wK(o,a/(1-a*s));i.push(l.left),o=l.right}return i.push(o),i.map(function(f){var h=[];return 4===f.length&&(h.push("C"),h=h.concat(f[2])),f.length>=3&&(3===f.length&&h.push("Q"),h=h.concat(f[1])),2===f.length&&h.push("L"),h.concat(f[f.length-1])})}(r,e,t));else{var i=[].concat(r);"M"===i[0]&&(i[0]="L");for(var o=0;o<=t-1;o++)n.push(i)}return n}(r[f],r[f+1],c))},[]);return u.unshift(r[0]),("Z"===e[n]||"z"===e[n])&&u.push("Z"),u},SK=function(r,e){if(r.length!==e.length)return!1;var t=!0;return(0,ue.each)(r,function(n,i){if(n!==e[i])return t=!1,!1}),t};function MK(r,e,t){var n=null,i=t;return e<i&&(i=e,n="add"),r<i&&(i=r,n="del"),{type:n,min:i}}var ak=function(r,e){var t=function(r,e){var i,t=r.length,n=e.length,a=0;if(0===t||0===n)return null;for(var s=[],u=0;u<=t;u++)s[u]=[],s[u][0]={min:u};for(var l=0;l<=n;l++)s[0][l]={min:l};for(u=1;u<=t;u++)for(i=r[u-1],l=1;l<=n;l++)a=SK(i,e[l-1])?0:1,s[u][l]=MK(s[u-1][l].min+1,s[u][l-1].min+1,s[u-1][l-1].min+a);return s}(r,e),n=r.length,i=e.length,o=[],a=1,s=1;if(t[n][i].min!==n){for(var u=1;u<=n;u++){var l=t[u][u].min;s=u;for(var c=a;c<=i;c++)t[u][c].min<l&&(l=t[u][c].min,s=c);t[u][a=s].type&&o.push({index:u-1,type:t[u][a].type})}for(u=o.length-1;u>=0;u--)a=o[u].index,"add"===o[u].type?r.splice(a,0,[].concat(r[a])):r.splice(a,1)}var f=i-(n=r.length);if(n<i)for(u=0;u<f;u++)"z"===r[n-1][0]||"Z"===r[n-1][0]?r.splice(n-2,0,r[n-2]):r.push(r[n-1]),n+=1;return r};function mM(r,e,t){for(var i,n=[].concat(r),o=1/(t+1),a=sk(e)[0],s=1;s<=t;s++)o*=s,0===(i=Math.floor(r.length*o))?n.unshift([a[0]*o+r[i][0]*(1-o),a[1]*o+r[i][1]*(1-o)]):n.splice(i,0,[a[0]*o+r[i][0]*(1-o),a[1]*o+r[i][1]*(1-o)]);return n}function sk(r){var e=[];switch(r[0]){case"M":case"L":case"T":e.push([r[1],r[2]]);break;case"A":e.push([r[6],r[7]]);break;case"Q":case"S":e.push([r[3],r[4]]),e.push([r[1],r[2]]);break;case"C":e.push([r[5],r[6]]),e.push([r[1],r[2]]),e.push([r[3],r[4]]);break;case"H":case"V":e.push([r[1],r[1]])}return e}var yM=function(r,e){if(r.length<=1)return r;for(var t,n=0;n<e.length;n++)if(r[n][0]!==e[n][0])switch(t=sk(r[n]),e[n][0]){case"M":r[n]=["M"].concat(t[0]);break;case"L":r[n]=["L"].concat(t[0]);break;case"A":r[n]=[].concat(e[n]),r[n][6]=t[0][0],r[n][7]=t[0][1];break;case"Q":if(t.length<2){if(!(n>0)){r[n]=e[n];break}t=mM(t,r[n-1],1)}r[n]=["Q"].concat(t.reduce(function(i,o){return i.concat(o)},[]));break;case"T":r[n]=["T"].concat(t[0]);break;case"C":if(t.length<3){if(!(n>0)){r[n]=e[n];break}t=mM(t,r[n-1],2)}r[n]=["C"].concat(t.reduce(function(i,o){return i.concat(o)},[]));break;case"S":if(t.length<2){if(!(n>0)){r[n]=e[n];break}t=mM(t,r[n-1],1)}r[n]=["S"].concat(t.reduce(function(i,o){return i.concat(o)},[]));break;default:r[n]=e[n]}return r},AK=function(){function r(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return r.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},r.prototype.stopPropagation=function(){this.propagationStopped=!0},r.prototype.toString=function(){return"[Event (type="+this.type+")]"},r.prototype.save=function(){},r.prototype.restore=function(){},r}();const uk=AK;function lk(r,e){var t=r.indexOf(e);-1!==t&&r.splice(t,1)}var ck=typeof window<"u"&&typeof window.document<"u";function fk(r,e){if(r.isCanvas())return!0;for(var t=e.getParent(),n=!1;t;){if(t===r){n=!0;break}t=t.getParent()}return n}function bM(r){return r.cfg.visible&&r.cfg.capture}var DK=function(r){function e(t){var n=r.call(this)||this;n.destroyed=!1;var i=n.getDefaultCfg();return n.cfg=(0,ue.mix)(i,t),n}return(0,De.__extends)(e,r),e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,n){this.cfg[t]=n},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(HN),hk=function(r,e,t){if(t||2===arguments.length)for(var o,n=0,i=e.length;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))},IK=function r(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"},OK=function r(e){this.version=e,this.type="node",this.name="node",this.os=process.platform},PK=function r(e,t,n,i){this.name=e,this.version=t,this.os=n,this.bot=i,this.type="bot-device"},NK=function r(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},LK=function r(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},RK=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,FK=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],gk=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function pk(r){return r?mk(r):typeof document>"u"&&typeof navigator<"u"&&"ReactNative"===navigator.product?new LK:typeof navigator<"u"?mk(navigator.userAgent):function jK(){return typeof process<"u"&&process.version?new OK(process.version.slice(1)):null}()}function mk(r){var e=function vk(r){return""!==r&&FK.reduce(function(e,t){var n=t[0];if(e)return e;var o=t[1].exec(r);return!!o&&[n,o]},!1)}(r);if(!e)return null;var t=e[0],n=e[1];if("searchbot"===t)return new NK;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<3&&(i=hk(hk([],i,!0),function zK(r){for(var e=[],t=0;t<r;t++)e.push("0");return e}(3-i.length),!0)):i=[];var o=i.join("."),a=function BK(r){for(var e=0,t=gk.length;e<t;e++){var n=gk[e],i=n[0];if(n[1].exec(r))return i}return null}(r),s=RK.exec(r);return s&&s[1]?new PK(t,o,a,s[1]):new IK(t,o,a)}function yk(r,e){var t=[],n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],u=r[5],l=r[6],c=r[7],f=r[8],h=e[0],d=e[1],g=e[2],m=e[3],_=e[4],D=e[5],L=e[6],O=e[7],Z=e[8];return t[0]=h*n+d*a+g*l,t[1]=h*i+d*s+g*c,t[2]=h*o+d*u+g*f,t[3]=m*n+_*a+D*l,t[4]=m*i+_*s+D*c,t[5]=m*o+_*u+D*f,t[6]=L*n+O*a+Z*l,t[7]=L*i+O*s+Z*c,t[8]=L*o+O*u+Z*f,t}function qg(r,e){var t=[],n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t}function bk(r){var e=[],t=r[0],n=r[1],i=r[2],o=r[3],a=r[4],s=r[5],u=r[6],l=r[7],c=r[8],f=c*a-s*l,h=-c*o+s*u,d=l*o-a*u,g=t*f+n*h+i*d;return g?(e[0]=f*(g=1/g),e[1]=(-c*n+i*l)*g,e[2]=(s*n-i*a)*g,e[3]=h*g,e[4]=(c*t-i*u)*g,e[5]=(-s*t+i*o)*g,e[6]=d*g,e[7]=(-l*t+n*u)*g,e[8]=(a*t-n*o)*g,e):null}var Zm=Nl,wM="matrix",GK=["zIndex","capture","visible","type"],UK=["repeat"];function $K(r,e){var t={},n=e.attrs;for(var i in r)t[i]=n[i];return t}function YK(r,e){var t={},n=e.attr();return(0,ue.each)(r,function(i,o){-1===UK.indexOf(o)&&!(0,ue.isEqual)(n[o],i)&&(t[o]=i)}),t}function XK(r,e){if(e.onFrame)return r;var t=e.startTime,n=e.delay,i=e.duration,o=Object.prototype.hasOwnProperty;return(0,ue.each)(r,function(a){t+n<a.startTime+a.delay+a.duration&&i>a.delay&&(0,ue.each)(e.toAttrs,function(s,u){o.call(a.toAttrs,u)&&(delete a.toAttrs[u],delete a.fromAttrs[u])})}),r}var qK=function(r){function e(t){var n=r.call(this,t)||this;n.attrs={};var i=n.getDefaultAttrs();return(0,ue.mix)(i,t.attrs),n.attrs=i,n.initAttrs(i),n.initAnimate(),n}return(0,De.__extends)(e,r),e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=n[0],a=n[1];if(!o)return this.attrs;if((0,ue.isObject)(o)){for(var s in o)this.setAttr(s,o[s]);return this.afterAttrsChange(o),this}return 2===n.length?(this.setAttr(o,a),this.afterAttrsChange(((t={})[o]=a,t)),this):this.attrs[o]},e.prototype.isClipped=function(t,n){var i=this.getClip();return i&&!i.isHit(t,n)},e.prototype.setAttr=function(t,n){var i=this.attrs[t];i!==n&&(this.attrs[t]=n,this.onAttrChange(t,n,i))},e.prototype.onAttrChange=function(t,n,i){"matrix"===t&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var n=this.cfg.applyTo;n&&n.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var n=this.getParent();return n&&n.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var n=t.getChildren(),o=(this.get("el"),n.indexOf(this));n.splice(o,1),n.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var n=t.getChildren(),o=(this.get("el"),n.indexOf(this));n.splice(o,1),n.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){void 0===t&&(t=!0);var n=this.getParent();n?(lk(n.getChildren(),this),n.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(wM,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(wM)},e.prototype.setMatrix=function(t){this.attr(wM,t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var n=this.attr("matrix"),i=this.cfg.parentMatrix;t=i&&n?yk(i,n):n||i,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var i,n=this.attr("matrix");i=t&&n?yk(t,n):n||t,this.set("totalMatrix",i),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var n=this.attr("matrix");return n?qg(n,t):t},e.prototype.invertFromMatrix=function(t){var n=this.attr("matrix");if(n){var i=bk(n);if(i)return qg(i,t)}return t},e.prototype.setClip=function(t){var n=this.getCanvas(),i=null;if(t){var s=this.getShapeBase()[(0,ue.upperFirst)(t.type)];s&&(i=new s({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:n}))}return this.set("clipShape",i),this.onCanvasChange("clip"),i},e.prototype.getClip=function(){return this.cfg.clipShape||null},e.prototype.clone=function(){var t=this,n=this.attrs,i={};(0,ue.each)(n,function(s,u){i[u]=(0,ue.isArray)(n[u])?function WK(r){for(var e=[],t=0;t<r.length;t++)(0,ue.isArray)(r[t])?e.push([].concat(r[t])):e.push(r[t]);return e}(n[u]):n[u]});var a=new(0,this.constructor)({attrs:i});return(0,ue.each)(GK,function(s){a.set(s,t.get(s))}),a},e.prototype.destroy=function(){this.destroyed||(this.attrs={},r.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(this.get("timeline")||this.get("canvas")){this.set("animating",!0);var i=this.get("timeline");i||(i=this.get("canvas").get("timeline"),this.set("timeline",i));var o=this.get("animations")||[];i.timer||i.initTimer();var g,m,_,D,L,a=t[0],s=t[1],u=t[2],l=void 0===u?"easeLinear":u,c=t[3],f=void 0===c?ue.noop:c,h=t[4],d=void 0===h?0:h;(0,ue.isFunction)(a)?(g=a,a={}):(0,ue.isObject)(a)&&a.onFrame&&(g=a.onFrame,m=a.repeat),(0,ue.isObject)(s)?(s=(L=s).duration,l=L.easing||"easeLinear",d=L.delay||0,m=L.repeat||m||!1,f=L.callback||ue.noop,_=L.pauseCallback||ue.noop,D=L.resumeCallback||ue.noop):((0,ue.isNumber)(f)&&(d=f,f=null),(0,ue.isFunction)(l)?(f=l,l="easeLinear"):l=l||"easeLinear");var O=YK(a,this),Z={fromAttrs:$K(O,this),toAttrs:O,duration:s,easing:l,repeat:m,callback:f,pauseCallback:_,resumeCallback:D,delay:d,startTime:i.getTime(),id:(0,ue.uniqueId)(),onFrame:g,pathFormatted:!1};o.length>0?o=XK(o,Z):i.addAnimator(this),o.push(Z),this.set("animations",o),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var n=this;void 0===t&&(t=!0);var i=this.get("animations");(0,ue.each)(i,function(o){t&&n.attr(o.onFrame?o.onFrame(1):o.toAttrs),o.callback&&o.callback()}),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),n=this.get("animations"),i=t.getTime();return(0,ue.each)(n,function(o){o._paused=!0,o._pauseTime=i,o.pauseCallback&&o.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:i}),this},e.prototype.resumeAnimate=function(){var n=this.get("timeline").getTime(),i=this.get("animations"),o=this.get("_pause").pauseTime;return(0,ue.each)(i,function(a){a.startTime=a.startTime+(n-o),a._paused=!1,a._pauseTime=null,a.resumeCallback&&a.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",i),this},e.prototype.emitDelegation=function(t,n){var s,i=this,o=n.propagationPath;this.getEvents(),"mouseenter"===t?s=n.fromShape:"mouseleave"===t&&(s=n.toShape);for(var u=function(h){var d=o[h],g=d.get("name");if(g){if((d.isGroup()||d.isCanvas&&d.isCanvas())&&s&&fk(d,s))return"break";(0,ue.isArray)(g)?(0,ue.each)(g,function(m){i.emitDelegateEvent(d,m,n)}):l.emitDelegateEvent(d,g,n)}},l=this,c=0;c<o.length&&"break"!==u(c);c++);},e.prototype.emitDelegateEvent=function(t,n,i){var o=this.getEvents(),a=n+":"+i.type;(o[a]||o["*"])&&(i.name=a,i.currentTarget=t,i.delegateTarget=this,i.delegateObject=t.get("delegateObject"),this.emit(a,i))},e.prototype.translate=function(t,n){void 0===t&&(t=0),void 0===n&&(n=0);var i=this.getMatrix(),o=Zm(i,[["t",t,n]]);return this.setMatrix(o),this},e.prototype.move=function(t,n){var i=this.attr("x")||0,o=this.attr("y")||0;return this.translate(t-i,n-o),this},e.prototype.moveTo=function(t,n){return this.move(t,n)},e.prototype.scale=function(t,n){var i=this.getMatrix(),o=Zm(i,[["s",t,n||t]]);return this.setMatrix(o),this},e.prototype.rotate=function(t){var n=this.getMatrix(),i=Zm(n,[["r",t]]);return this.setMatrix(i),this},e.prototype.rotateAtStart=function(t){var n=this.attr(),i=n.x,o=n.y,a=this.getMatrix(),s=Zm(a,[["t",-i,-o],["r",t],["t",i,o]]);return this.setMatrix(s),this},e.prototype.rotateAtPoint=function(t,n,i){var o=this.getMatrix(),a=Zm(o,[["t",-t,-n],["r",i],["t",t,n]]);return this.setMatrix(a),this},e}(DK);const wk=qK;var xk={},xM="_INDEX";function Ek(r,e){if(r.set("canvas",e),r.isGroup()){var t=r.get("children");t.length&&t.forEach(function(n){Ek(n,e)})}}function _k(r,e){if(r.set("timeline",e),r.isGroup()){var t=r.get("children");t.length&&t.forEach(function(n){_k(n,e)})}}var QK=function(r){function e(){return null!==r&&r.apply(this,arguments)||this}return(0,De.__extends)(e,r),e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=1/0,n=-1/0,i=1/0,o=-1/0,a=[],s=[],u=this.getChildren().filter(function(c){return c.get("visible")&&(!c.isGroup()||c.isGroup()&&c.getChildren().length>0)});return u.length>0?((0,ue.each)(u,function(c){var f=c.getBBox();a.push(f.minX,f.maxX),s.push(f.minY,f.maxY)}),t=(0,ue.min)(a),n=(0,ue.max)(a),i=(0,ue.min)(s),o=(0,ue.max)(s)):(t=0,n=0,i=0,o=0),{x:t,y:i,minX:t,minY:i,maxX:n,maxY:o,width:n-t,height:o-i}},e.prototype.getCanvasBBox=function(){var t=1/0,n=-1/0,i=1/0,o=-1/0,a=[],s=[],u=this.getChildren().filter(function(c){return c.get("visible")&&(!c.isGroup()||c.isGroup()&&c.getChildren().length>0)});return u.length>0?((0,ue.each)(u,function(c){var f=c.getCanvasBBox();a.push(f.minX,f.maxX),s.push(f.minY,f.maxY)}),t=(0,ue.min)(a),n=(0,ue.max)(a),i=(0,ue.min)(s),o=(0,ue.max)(s)):(t=0,n=0,i=0,o=0),{x:t,y:i,minX:t,minY:i,maxX:n,maxY:o,width:n-t,height:o-i}},e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return t.children=[],t},e.prototype.onAttrChange=function(t,n,i){if(r.prototype.onAttrChange.call(this,t,n,i),"matrix"===t){var o=this.getTotalMatrix();this._applyChildrenMarix(o)}},e.prototype.applyMatrix=function(t){var n=this.getTotalMatrix();r.prototype.applyMatrix.call(this,t);var i=this.getTotalMatrix();i!==n&&this._applyChildrenMarix(i)},e.prototype._applyChildrenMarix=function(t){var n=this.getChildren();(0,ue.each)(n,function(i){i.applyMatrix(t)})},e.prototype.addShape=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=t[0],o=t[1];(0,ue.isObject)(i)?o=i:o.type=i;var a=xk[o.type];a||(a=(0,ue.upperFirst)(o.type),xk[o.type]=a);var s=this.getShapeBase(),u=new s[a](o);return this.add(u),u},e.prototype.addGroup=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var a,i=t[0],o=t[1];if((0,ue.isFunction)(i))a=new i(o||{parent:this});else{var s=i||{},u=this.getGroupBase();a=new u(s)}return this.add(a),a},e.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},e.prototype.getShape=function(t,n,i){if(!bM(this))return null;var a,o=this.getChildren();if(this.isCanvas())a=this._findShape(o,t,n,i);else{var s=[t,n,1];s=this.invertFromMatrix(s),this.isClipped(s[0],s[1])||(a=this._findShape(o,s[0],s[1],i))}return a},e.prototype._findShape=function(t,n,i,o){for(var a=null,s=t.length-1;s>=0;s--){var u=t[s];if(bM(u)&&(u.isGroup()?a=u.getShape(n,i,o):u.isHit(n,i)&&(a=u)),a)break}return a},e.prototype.add=function(t){var n=this.getCanvas(),i=this.getChildren(),o=this.get("timeline"),a=t.getParent();a&&function KK(r,e,t){void 0===t&&(t=!0),t?e.destroy():(e.set("parent",null),e.set("canvas",null)),lk(r.getChildren(),e)}(a,t,!1),t.set("parent",this),n&&Ek(t,n),o&&_k(t,o),i.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var n=this.getTotalMatrix();n&&t.applyMatrix(n)},e.prototype.getChildren=function(){return this.get("children")},e.prototype.sort=function(){var t=this.getChildren();(0,ue.each)(t,function(n,i){return n[xM]=i,n}),t.sort(function ZK(r){return function(e,t){var n=r(e,t);return 0===n?e[xM]-t[xM]:n}}(function(n,i){return n.get("zIndex")-i.get("zIndex")})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),n=t.length-1;n>=0;n--)t[n].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),r.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){return this.getChildren()[t]},e.prototype.getCount=function(){return this.getChildren().length},e.prototype.contain=function(t){return this.getChildren().indexOf(t)>-1},e.prototype.removeChild=function(t,n){void 0===n&&(n=!0),this.contain(t)&&t.remove(n)},e.prototype.findAll=function(t){var n=[],i=this.getChildren();return(0,ue.each)(i,function(o){t(o)&&n.push(o),o.isGroup()&&(n=n.concat(o.findAll(t)))}),n},e.prototype.find=function(t){var n=null,i=this.getChildren();return(0,ue.each)(i,function(o){if(t(o)?n=o:o.isGroup()&&(n=o.find(t)),n)return!1}),n},e.prototype.findById=function(t){return this.find(function(n){return n.get("id")===t})},e.prototype.findByClassName=function(t){return this.find(function(n){return n.get("className")===t})},e.prototype.findAllByName=function(t){return this.findAll(function(n){return n.get("name")===t})},e}(wk);const Sk=QK;var aw,ey,Uv=0,Qm=0,Jm=0,sw=0,Kg=0,uw=0,ty="object"==typeof performance&&performance.now?performance:Date,Ck="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function Ak(){return Kg||(Ck(JK),Kg=ty.now()+uw)}function JK(){Kg=0}function EM(){this._call=this._time=this._next=null}function Dk(r,e,t){var n=new EM;return n.restart(r,e,t),n}function Tk(){Kg=(sw=ty.now())+uw,Uv=Qm=0;try{!function eZ(){Ak(),++Uv;for(var e,r=aw;r;)(e=Kg-r._time)>=0&&r._call.call(null,e),r=r._next;--Uv}()}finally{Uv=0,function nZ(){for(var r,t,e=aw,n=1/0;e;)e._call?(n>e._time&&(n=e._time),r=e,e=e._next):(t=e._next,e._next=null,e=r?r._next=t:aw=t);ey=r,_M(n)}(),Kg=0}}function tZ(){var r=ty.now(),e=r-sw;e>1e3&&(uw-=e,sw=r)}function _M(r){Uv||(Qm&&(Qm=clearTimeout(Qm)),r-Kg>24?(r<1/0&&(Qm=setTimeout(Tk,r-ty.now()-uw)),Jm&&(Jm=clearInterval(Jm))):(Jm||(sw=ty.now(),Jm=setInterval(tZ,1e3)),Uv=1,Ck(Tk)))}function SM(r,e,t){r.prototype=e.prototype=t,t.constructor=r}function Ik(r,e){var t=Object.create(r.prototype);for(var n in e)t[n]=e[n];return t}function ny(){}EM.prototype=Dk.prototype={constructor:EM,restart:function(r,e,t){if("function"!=typeof r)throw new TypeError("callback is not a function");t=(null==t?Ak():+t)+(null==e?0:+e),!this._next&&ey!==this&&(ey?ey._next=this:aw=this,ey=this),this._call=r,this._time=t,_M()},stop:function(){this._call&&(this._call=null,this._time=1/0,_M())}};var lw=1/.7,Vv="\\s*([+-]?\\d+)\\s*",iy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Nf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rZ=/^#([0-9a-f]{3,8})$/,iZ=new RegExp(`^rgb\\(${Vv},${Vv},${Vv}\\)$`),oZ=new RegExp(`^rgb\\(${Nf},${Nf},${Nf}\\)$`),aZ=new RegExp(`^rgba\\(${Vv},${Vv},${Vv},${iy}\\)$`),sZ=new RegExp(`^rgba\\(${Nf},${Nf},${Nf},${iy}\\)$`),uZ=new RegExp(`^hsl\\(${iy},${Nf},${Nf}\\)$`),lZ=new RegExp(`^hsla\\(${iy},${Nf},${Nf},${iy}\\)$`),Ok={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Pk(){return this.rgb().formatHex()}function Nk(){return this.rgb().formatRgb()}function oy(r){var e,t;return r=(r+"").trim().toLowerCase(),(e=rZ.exec(r))?(t=e[1].length,e=parseInt(e[1],16),6===t?Lk(e):3===t?new Gu(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===t?cw(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===t?cw(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=iZ.exec(r))?new Gu(e[1],e[2],e[3],1):(e=oZ.exec(r))?new Gu(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=aZ.exec(r))?cw(e[1],e[2],e[3],e[4]):(e=sZ.exec(r))?cw(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=uZ.exec(r))?Fk(e[1],e[2]/100,e[3]/100,1):(e=lZ.exec(r))?Fk(e[1],e[2]/100,e[3]/100,e[4]):Ok.hasOwnProperty(r)?Lk(Ok[r]):"transparent"===r?new Gu(NaN,NaN,NaN,0):null}function Lk(r){return new Gu(r>>16&255,r>>8&255,255&r,1)}function cw(r,e,t,n){return n<=0&&(r=e=t=NaN),new Gu(r,e,t,n)}function hZ(r){return r instanceof ny||(r=oy(r)),r?new Gu((r=r.rgb()).r,r.g,r.b,r.opacity):new Gu}function fw(r,e,t,n){return 1===arguments.length?hZ(r):new Gu(r,e,t,n??1)}function Gu(r,e,t,n){this.r=+r,this.g=+e,this.b=+t,this.opacity=+n}function kk(){return`#${Qg(this.r)}${Qg(this.g)}${Qg(this.b)}`}function Rk(){const r=hw(this.opacity);return`${1===r?"rgb(":"rgba("}${Zg(this.r)}, ${Zg(this.g)}, ${Zg(this.b)}${1===r?")":`, ${r})`}`}function hw(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function Zg(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function Qg(r){return((r=Zg(r))<16?"0":"")+r.toString(16)}function Fk(r,e,t,n){return n<=0?r=e=t=NaN:t<=0||t>=1?r=e=NaN:e<=0&&(r=NaN),new Pc(r,e,t,n)}function Bk(r){if(r instanceof Pc)return new Pc(r.h,r.s,r.l,r.opacity);if(r instanceof ny||(r=oy(r)),!r)return new Pc;if(r instanceof Pc)return r;var e=(r=r.rgb()).r/255,t=r.g/255,n=r.b/255,i=Math.min(e,t,n),o=Math.max(e,t,n),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(t-n)/s+6*(t<n):t===o?(n-e)/s+2:(e-t)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new Pc(a,s,u,r.opacity)}function Pc(r,e,t,n){this.h=+r,this.s=+e,this.l=+t,this.opacity=+n}function jk(r){return(r=(r||0)%360)<0?r+360:r}function dw(r){return Math.max(0,Math.min(1,r||0))}function MM(r,e,t){return 255*(r<60?e+(t-e)*r/60:r<180?t:r<240?e+(t-e)*(240-r)/60:e)}function zk(r,e,t,n,i){var o=r*r,a=o*r;return((1-3*r+3*o-a)*e+(4-6*o+3*a)*t+(1+3*r+3*o-3*a)*n+a*i)/6}SM(ny,oy,{copy(r){return Object.assign(new this.constructor,this,r)},displayable(){return this.rgb().displayable()},hex:Pk,formatHex:Pk,formatHex8:function cZ(){return this.rgb().formatHex8()},formatHsl:function fZ(){return Bk(this).formatHsl()},formatRgb:Nk,toString:Nk}),SM(Gu,fw,Ik(ny,{brighter(r){return r=null==r?lw:Math.pow(lw,r),new Gu(this.r*r,this.g*r,this.b*r,this.opacity)},darker(r){return r=null==r?.7:Math.pow(.7,r),new Gu(this.r*r,this.g*r,this.b*r,this.opacity)},rgb(){return this},clamp(){return new Gu(Zg(this.r),Zg(this.g),Zg(this.b),hw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:kk,formatHex:kk,formatHex8:function dZ(){return`#${Qg(this.r)}${Qg(this.g)}${Qg(this.b)}${Qg(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Rk,toString:Rk})),SM(Pc,function gZ(r,e,t,n){return 1===arguments.length?Bk(r):new Pc(r,e,t,n??1)},Ik(ny,{brighter(r){return r=null==r?lw:Math.pow(lw,r),new Pc(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=null==r?.7:Math.pow(.7,r),new Pc(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=this.h%360+360*(this.h<0),e=isNaN(r)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*e,i=2*t-n;return new Gu(MM(r>=240?r-240:r+120,i,n),MM(r,i,n),MM(r<120?r+240:r-120,i,n),this.opacity)},clamp(){return new Pc(jk(this.h),dw(this.s),dw(this.l),hw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const r=hw(this.opacity);return`${1===r?"hsl(":"hsla("}${jk(this.h)}, ${100*dw(this.s)}%, ${100*dw(this.l)}%${1===r?")":`, ${r})`}`}}));const CM=r=>()=>r;function Uk(r,e){var t=e-r;return t?function Gk(r,e){return function(t){return r+t*e}}(r,t):CM(isNaN(r)?e:r)}const Vk=function r(e){var t=function yZ(r){return 1==(r=+r)?Uk:function(e,t){return t-e?function mZ(r,e,t){return r=Math.pow(r,t),e=Math.pow(e,t)-r,t=1/t,function(n){return Math.pow(r+n*e,t)}}(e,t,r):CM(isNaN(e)?t:e)}}(e);function n(i,o){var a=t((i=fw(i)).r,(o=fw(o)).r),s=t(i.g,o.g),u=t(i.b,o.b),l=Uk(i.opacity,o.opacity);return function(c){return i.r=a(c),i.g=s(c),i.b=u(c),i.opacity=l(c),i+""}}return n.gamma=r,n}(1);function Hk(r){return function(e){var a,s,t=e.length,n=new Array(t),i=new Array(t),o=new Array(t);for(a=0;a<t;++a)s=fw(e[a]),n[a]=s.r||0,i[a]=s.g||0,o[a]=s.b||0;return n=r(n),i=r(i),o=r(o),s.opacity=1,function(u){return s.r=n(u),s.g=i(u),s.b=o(u),s+""}}}function Wk(r,e){e||(e=[]);var i,t=r?Math.min(e.length,r.length):0,n=e.slice();return function(o){for(i=0;i<t;++i)n[i]=r[i]*(1-o)+e[i]*o;return n}}function $k(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function bZ(r,e){return($k(e)?Wk:Yk)(r,e)}function Yk(r,e){var a,t=e?e.length:0,n=r?Math.min(t,r.length):0,i=new Array(n),o=new Array(t);for(a=0;a<n;++a)i[a]=gw(r[a],e[a]);for(;a<t;++a)o[a]=e[a];return function(s){for(a=0;a<n;++a)o[a]=i[a](s);return o}}function wZ(r,e){var t=new Date;return r=+r,e=+e,function(n){return t.setTime(r*(1-n)+e*n),t}}function AM(r,e){return r=+r,e=+e,function(t){return r*(1-t)+e*t}}function xZ(r,e){var i,t={},n={};for(i in(null===r||"object"!=typeof r)&&(r={}),(null===e||"object"!=typeof e)&&(e={}),e)i in r?t[i]=gw(r[i],e[i]):n[i]=e[i];return function(o){for(i in t)n[i]=t[i](o);return n}}Hk(function pZ(r){var e=r.length-1;return function(t){var n=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),i=r[n],o=r[n+1];return zk((t-n/e)*e,n>0?r[n-1]:2*i-o,i,o,n<e-1?r[n+2]:2*o-i)}}),Hk(function vZ(r){var e=r.length;return function(t){var n=Math.floor(((t%=1)<0?++t:t)*e);return zk((t-n/e)*e,r[(n+e-1)%e],r[n%e],r[(n+1)%e],r[(n+2)%e])}});var DM=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,TM=new RegExp(DM.source,"g");function SZ(r,e){var n,i,o,t=DM.lastIndex=TM.lastIndex=0,a=-1,s=[],u=[];for(r+="",e+="";(n=DM.exec(r))&&(i=TM.exec(e));)(o=i.index)>t&&(o=e.slice(t,o),s[a]?s[a]+=o:s[++a]=o),(n=n[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,u.push({i:a,x:AM(n,i)})),t=TM.lastIndex;return t<e.length&&(o=e.slice(t),s[a]?s[a]+=o:s[++a]=o),s.length<2?u[0]?function _Z(r){return function(e){return r(e)+""}}(u[0].x):function EZ(r){return function(){return r}}(e):(e=u.length,function(l){for(var f,c=0;c<e;++c)s[(f=u[c]).i]=f.x(l);return s.join("")})}function gw(r,e){var n,t=typeof e;return null==e||"boolean"===t?CM(e):("number"===t?AM:"string"===t?(n=oy(e))?(e=n,Vk):SZ:e instanceof oy?Vk:e instanceof Date?wZ:$k(e)?Wk:Array.isArray(e)?Yk:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?xZ:AM)(r,e)}function MZ(r){return+r}function CZ(r){return r*r}function AZ(r){return r*(2-r)}function Xk(r){return((r*=2)<=1?r*r:--r*(2-r)+1)/2}function DZ(r){return r*r*r}function TZ(r){return--r*r*r+1}function qk(r){return((r*=2)<=1?r*r*r:(r-=2)*r*r+2)/2}var IZ=function r(e){function t(n){return Math.pow(n,e)}return e=+e,t.exponent=r,t}(3),OZ=function r(e){function t(n){return 1-Math.pow(1-n,e)}return e=+e,t.exponent=r,t}(3),Kk=function r(e){function t(n){return((n*=2)<=1?Math.pow(n,e):2-Math.pow(2-n,e))/2}return e=+e,t.exponent=r,t}(3),Zk=Math.PI,Qk=Zk/2;function PZ(r){return 1==+r?1:1-Math.cos(r*Qk)}function NZ(r){return Math.sin(r*Qk)}function Jk(r){return(1-Math.cos(Zk*r))/2}function Td(r){return 1.0009775171065494*(Math.pow(2,-10*r)-.0009765625)}function LZ(r){return Td(1-+r)}function kZ(r){return 1-Td(r)}function eR(r){return((r*=2)<=1?Td(1-r):2-Td(r-1))/2}function RZ(r){return 1-Math.sqrt(1-r*r)}function FZ(r){return Math.sqrt(1- --r*r)}function tR(r){return((r*=2)<=1?1-Math.sqrt(1-r*r):Math.sqrt(1-(r-=2)*r)+1)/2}var pw=7.5625;function $Z(r){return 1-ay(1-r)}function ay(r){return(r=+r)<.36363636363636365?pw*r*r:r<.7272727272727273?pw*(r-=.5454545454545454)*r+.75:r<.9090909090909091?pw*(r-=.8181818181818182)*r+.9375:pw*(r-=.9545454545454546)*r+.984375}function YZ(r){return((r*=2)<=1?1-ay(1-r):ay(r-1)+1)/2}var PM=1.70158,XZ=function r(e){function t(n){return(n=+n)*n*(e*(n-1)+n)}return e=+e,t.overshoot=r,t}(PM),qZ=function r(e){function t(n){return--n*n*((n+1)*e+n)+1}return e=+e,t.overshoot=r,t}(PM),nR=function r(e){function t(n){return((n*=2)<1?n*n*((e+1)*n-e):(n-=2)*n*((e+1)*n+e)+2)/2}return e=+e,t.overshoot=r,t}(PM),Hv=2*Math.PI,KZ=function r(e,t){var n=Math.asin(1/(e=Math.max(1,e)))*(t/=Hv);function i(o){return e*Td(- --o)*Math.sin((n-o)/t)}return i.amplitude=function(o){return r(o,t*Hv)},i.period=function(o){return r(e,o)},i}(1,.3),rR=function r(e,t){var n=Math.asin(1/(e=Math.max(1,e)))*(t/=Hv);function i(o){return 1-e*Td(o=+o)*Math.sin((o+n)/t)}return i.amplitude=function(o){return r(o,t*Hv)},i.period=function(o){return r(e,o)},i}(1,.3),ZZ=function r(e,t){var n=Math.asin(1/(e=Math.max(1,e)))*(t/=Hv);function i(o){return((o=2*o-1)<0?e*Td(-o)*Math.sin((n-o)/t):2-e*Td(o)*Math.sin((n+o)/t))/2}return i.amplitude=function(o){return r(o,t*Hv)},i.period=function(o){return r(e,o)},i}(1,.3),iR={},JZ=function(r){return["fill","stroke","fillStyle","strokeStyle"].includes(r)},eQ=function(r){return/^[r,R,L,l]{1}[\s]*\(/.test(r)},oR=[1,0,0,0,1,0,0,0,1];function nQ(r,e,t){var n=e.startTime;if(t<n+e.delay||e._paused)return!1;var o,a=e.duration,u=function QZ(r){return iR[r.toLowerCase()]||F[r]}(e.easing);if(t=t-n-e.delay,e.repeat)o=u(o=t%a/a);else{if(!((o=t/a)<1))return r.attr(e.onFrame?e.onFrame(1):e.toAttrs),!0;o=u(o)}if(e.onFrame){var l=e.onFrame(o);r.attr(l)}else!function tQ(r,e,t){var n={},i=e.fromAttrs,o=e.toAttrs;if(!r.destroyed){var a;for(var s in o)if(!(0,ue.isEqual)(i[s],o[s]))if("path"===s){var u=o[s],l=i[s];u.length>l.length?(u=Gv(o[s]),l=Gv(i[s]),l=ak(l,u),l=yM(l,u),e.fromAttrs.path=l,e.toAttrs.path=u):e.pathFormatted||(u=Gv(o[s]),l=Gv(i[s]),l=yM(l,u),e.fromAttrs.path=l,e.toAttrs.path=u,e.pathFormatted=!0),n[s]=[];for(var c=0;c<u.length;c++){for(var f=u[c],h=l[c],d=[],g=0;g<f.length;g++)(0,ue.isNumber)(f[g])&&h&&(0,ue.isNumber)(h[g])?(a=gw(h[g],f[g]),d.push(a(t))):d.push(f[g]);n[s].push(d)}}else if("matrix"===s){var _=bZ(i[s]||oR,o[s]||oR)(t);n[s]=_}else JZ(s)&&eQ(o[s])?n[s]=o[s]:(0,ue.isFunction)(o[s])||(a=gw(i[s],o[s]),n[s]=a(t));r.attr(n)}}(r,e,o);return!1}var rQ=function(){function r(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return r.prototype.initTimer=function(){var n,i,o,e=this;this.timer=Dk(function(a){if(e.current=a,e.animators.length>0){for(var s=e.animators.length-1;s>=0;s--)if((n=e.animators[s]).destroyed)e.removeAnimator(s);else{if(!n.isAnimatePaused())for(var u=(i=n.get("animations")).length-1;u>=0;u--)nQ(n,o=i[u],a)&&(i.splice(u,1),o.callback&&o.callback());0===i.length&&e.removeAnimator(s)}e.canvas.get("autoDraw")||e.canvas.draw()}})},r.prototype.addAnimator=function(e){this.animators.push(e)},r.prototype.removeAnimator=function(e){this.animators.splice(e,1)},r.prototype.isAnimating=function(){return!!this.animators.length},r.prototype.stop=function(){this.timer&&this.timer.stop()},r.prototype.stopAllAnimations=function(e){void 0===e&&(e=!0),this.animators.forEach(function(t){t.stopAnimate(e)}),this.animators=[],this.canvas.draw()},r.prototype.getTime=function(){return this.current},r}();const iQ=rQ;var sR=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function uR(r,e,t){t.name=e,t.target=r,t.currentTarget=r,t.delegateTarget=r,r.emit(e,t)}function sQ(r,e,t){if(t.bubbles){var n=void 0,i=!1;if("mouseenter"===e?(n=t.fromShape,i=!0):"mouseleave"===e&&(i=!0,n=t.toShape),r.isCanvas()&&i)return;if(n&&fk(r,n))return void(t.bubbles=!1);t.name=e,t.currentTarget=r,t.delegateTarget=r,r.emit(e,t)}}var uQ=function(){function r(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(n){t._triggerEvent(n.type,n)},this._onDocumentMove=function(n){if(t.canvas.get("el")!==n.target&&(t.dragging||t.currentShape)){var a=t._getPointInfo(n);t.dragging&&t._emitEvent("drag",n,a,t.draggingShape)}},this._onDocumentMouseUp=function(n){if(t.canvas.get("el")!==n.target&&t.dragging){var a=t._getPointInfo(n);t.draggingShape&&t._emitEvent("drop",n,a,null),t._emitEvent("dragend",n,a,t.draggingShape),t._afterDrag(t.draggingShape,a,n)}},this.canvas=e.canvas}return r.prototype.init=function(){this._bindEvents()},r.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");(0,ue.each)(sR,function(n){t.addEventListener(n,e._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},r.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");(0,ue.each)(sR,function(n){t.removeEventListener(n,e._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},r.prototype._getEventObj=function(e,t,n,i,o,a){var s=new uk(e,t);return s.fromShape=o,s.toShape=a,s.x=n.x,s.y=n.y,s.clientX=n.clientX,s.clientY=n.clientY,s.propagationPath.push(i),s},r.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},r.prototype._getPointInfo=function(e){var t=this.canvas,n=t.getClientByEvent(e),i=t.getPointByEvent(e);return{x:i.x,y:i.y,clientX:n.x,clientY:n.y}},r.prototype._triggerEvent=function(e,t){var n=this._getPointInfo(t),i=this._getShape(n,t),o=this["_on"+e],a=!1;if(o)o.call(this,n,i,t);else{var s=this.currentShape;"mouseenter"===e||"dragenter"===e||"mouseover"===e?(this._emitEvent(e,t,n,null,null,i),i&&this._emitEvent(e,t,n,i,null,i),"mouseenter"===e&&this.draggingShape&&this._emitEvent("dragenter",t,n,null)):"mouseleave"===e||"dragleave"===e||"mouseout"===e?(a=!0,s&&this._emitEvent(e,t,n,s,s,null),this._emitEvent(e,t,n,null,s,null),"mouseleave"===e&&this.draggingShape&&this._emitEvent("dragleave",t,n,null)):this._emitEvent(e,t,n,i,null,null)}if(a||(this.currentShape=i),i&&!i.get("destroyed")){var u=this.canvas;u.get("el").style.cursor=i.attr("cursor")||u.get("cursor")}},r.prototype._onmousedown=function(e,t,n){0===n.button&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,e,t,null,null)},r.prototype._emitMouseoverEvents=function(e,t,n,i){var o=this.canvas.get("el");n!==i&&(n&&(this._emitEvent("mouseout",e,t,n,n,i),this._emitEvent("mouseleave",e,t,n,n,i),(!i||i.get("destroyed"))&&(o.style.cursor=this.canvas.get("cursor"))),i&&(this._emitEvent("mouseover",e,t,i,n,i),this._emitEvent("mouseenter",e,t,i,n,i)))},r.prototype._emitDragoverEvents=function(e,t,n,i,o){i?(i!==n&&(n&&this._emitEvent("dragleave",e,t,n,n,i),this._emitEvent("dragenter",e,t,i,n,i)),o||this._emitEvent("dragover",e,t,i)):n&&this._emitEvent("dragleave",e,t,n,n,i),o&&this._emitEvent("dragover",e,t,i)},r.prototype._afterDrag=function(e,t,n){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var i=this._getShape(t,n);i!==e&&this._emitMouseoverEvents(n,t,e,i),this.currentShape=i},r.prototype._onmouseup=function(e,t,n){if(0===n.button){var i=this.draggingShape;this.dragging?(i&&this._emitEvent("drop",n,e,t),this._emitEvent("dragend",n,e,i),this._afterDrag(i,e,n)):(this._emitEvent("mouseup",n,e,t),t===this.mousedownShape&&this._emitEvent("click",n,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},r.prototype._ondragover=function(e,t,n){n.preventDefault(),this._emitDragoverEvents(n,e,this.currentShape,t,!0)},r.prototype._onmousemove=function(e,t,n){var i=this.canvas,o=this.currentShape,a=this.draggingShape;if(this.dragging)a&&this._emitDragoverEvents(n,e,o,t,!1),this._emitEvent("drag",n,e,a);else{var s=this.mousedownPoint;if(s){var u=this.mousedownShape,f=s.clientX-e.clientX,h=s.clientY-e.clientY;n.timeStamp-this.mousedownTimeStamp>120||f*f+h*h>40?u&&u.get("draggable")?((a=this.mousedownShape).set("capture",!1),this.draggingShape=a,this.dragging=!0,this._emitEvent("dragstart",n,e,a),this.mousedownShape=null,this.mousedownPoint=null):!u&&i.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,e,o,t),this._emitEvent("mousemove",n,e,t)):(this._emitMouseoverEvents(n,e,o,t),this._emitEvent("mousemove",n,e,t))}else this._emitMouseoverEvents(n,e,o,t),this._emitEvent("mousemove",n,e,t)}},r.prototype._emitEvent=function(e,t,n,i,o,a){var s=this._getEventObj(e,t,n,i,o,a);if(i){s.shape=i,uR(i,e,s);for(var u=i.getParent();u;)u.emitDelegation(e,s),s.propagationStopped||sQ(u,e,s),s.propagationPath.push(u),u=u.getParent()}else uR(this.canvas,e,s)},r.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},r}();const lQ=uQ;var cR=pk(),cQ=cR&&"firefox"===cR.name,fQ=function(r){function e(t){var n=r.call(this,t)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return(0,De.__extends)(e,r),e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},e.prototype.initContainer=function(){var t=this.get("container");(0,ue.isString)(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t),this.get("container").appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new lQ({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new iQ(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,n){var i=this.get("el");ck&&(i.style.width=t+"px",i.style.height=n+"px")},e.prototype.changeSize=function(t,n){this.setDOMSize(t,n),this.set("width",t),this.set("height",n),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var n=this.get("el");ck&&n&&(n.style.cursor=t)},e.prototype.getPointByEvent=function(t){if(this.get("supportCSSTransform")){if(cQ&&!(0,ue.isNil)(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!(0,ue.isNil)(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var i=this.getClientByEvent(t);return this.getPointByClient(i.x,i.y)},e.prototype.getClientByEvent=function(t){var n=t;return t.touches&&(n="touchend"===t.type?t.changedTouches[0]:t.touches[0]),{x:n.clientX,y:n.clientY}},e.prototype.getPointByClient=function(t,n){var o=this.get("el").getBoundingClientRect();return{x:t-o.left,y:n-o.top}},e.prototype.getClientByPoint=function(t,n){var o=this.get("el").getBoundingClientRect();return{x:t+o.left,y:n+o.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){this.get("eventController").destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),r.prototype.destroy.call(this))},e}(Sk);const fR=fQ;var hQ=function(r){function e(){return null!==r&&r.apply(this,arguments)||this}return(0,De.__extends)(e,r),e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var t=r.prototype.clone.call(this),n=this.getChildren(),i=0;i<n.length;i++)t.add(n[i].clone());return t},e}(Sk);const hR=hQ;var dQ=function(r){function e(t){return r.call(this,t)||this}return(0,De.__extends)(e,r),e.prototype._isInBBox=function(t,n){var i=this.getBBox();return i.minX<=t&&i.maxX>=t&&i.minY<=n&&i.maxY>=n},e.prototype.afterAttrsChange=function(t){r.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(t){r.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),n=this.getTotalMatrix(),i=t.minX,o=t.minY,a=t.maxX,s=t.maxY;if(n){var u=qg(n,[t.minX,t.minY]),l=qg(n,[t.maxX,t.minY]),c=qg(n,[t.minX,t.maxY]),f=qg(n,[t.maxX,t.maxY]);i=Math.min(u[0],l[0],c[0],f[0]),a=Math.max(u[0],l[0],c[0],f[0]),o=Math.min(u[1],l[1],c[1],f[1]),s=Math.max(u[1],l[1],c[1],f[1])}var h=this.attrs;if(h.shadowColor){var d=h.shadowBlur,g=void 0===d?0:d,m=h.shadowOffsetX,_=void 0===m?0:m,D=h.shadowOffsetY,L=void 0===D?0:D,Z=a+g+_,le=o-g+L,pe=s+g+L;i=Math.min(i,i-g+_),a=Math.max(a,Z),o=Math.min(o,le),s=Math.max(s,pe)}return{x:i,y:o,minX:i,minY:o,maxX:a,maxY:s,width:a-i,height:s-o}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,n){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,n){var i=this.get("startArrowShape"),o=this.get("endArrowShape"),a=[t,n,1],s=(a=this.invertFromMatrix(a))[0],u=a[1],l=this._isInBBox(s,u);return this.isOnlyHitBox()?l:!(!l||this.isClipped(s,u)||!(this.isInShape(s,u)||i&&i.isHit(s,u)||o&&o.isHit(s,u)))},e}(wk);const dR=dQ;var gR=new Map;function Lf(r,e){gR.set(r,e)}function pR(r){return gR.get(r)}function vR(r){var e=r.attr();return{x:e.x,y:e.y,width:e.width,height:e.height}}function mR(r){var e=r.attr(),i=e.r;return{x:e.x-i,y:e.y-i,width:2*i,height:2*i}}function au(r,e,t,n){var i=r-t,o=e-n;return Math.sqrt(i*i+o*o)}function vw(r,e){return Math.abs(r-e)<.001}function Wv(r,e){var t=(0,ue.min)(r),n=(0,ue.min)(e);return{x:t,y:n,width:(0,ue.max)(r)-t,height:(0,ue.max)(e)-n}}function mw(r){return(r+2*Math.PI)%(2*Math.PI)}const Is_length=function(r,e,t,n){return au(r,e,t,n)},Is_pointAt=function(r,e,t,n,i){return{x:(1-i)*r+i*t,y:(1-i)*e+i*n}},Is_pointToLine=function(r,e,t,n,i,o){var a=[t-r,n-e];if(Kr.exactEquals(a,[0,0]))return Math.sqrt((i-r)*(i-r)+(o-e)*(o-e));var s=[-a[1],a[0]];return Kr.normalize(s,s),Math.abs(Kr.dot([i-r,o-e],s))};function yR(r,e,t,n,i,o){var a,s=1/0,u=[t,n],l=20;o&&o>200&&(l=o/10);for(var c=1/l,f=c/10,h=0;h<=l;h++){var d=h*c,g=[i.apply(null,r.concat([d])),i.apply(null,e.concat([d]))];(m=au(u[0],u[1],g[0],g[1]))<s&&(a=d,s=m)}if(0===a)return{x:r[0],y:e[0]};if(1===a){var _=r.length;return{x:r[_-1],y:e[_-1]}}for(s=1/0,h=0;h<32&&!(f<1e-4);h++){var D=a-f,L=a+f,m=(g=[i.apply(null,r.concat([D])),i.apply(null,e.concat([D]))],au(u[0],u[1],g[0],g[1]));if(D>=0&&m<s)a=D,s=m;else{var O=[i.apply(null,r.concat([L])),i.apply(null,e.concat([L]))],Z=au(u[0],u[1],O[0],O[1]);L<=1&&Z<s?(a=L,s=Z):f*=.5}}return{x:i.apply(null,r.concat([a])),y:i.apply(null,e.concat([a]))}}function Id(r,e,t,n){var i=1-n;return i*i*r+2*n*i*e+n*n*t}function bR(r,e,t){var n=r+t-2*e;if(vw(n,0))return[.5];var i=(r-e)/n;return i<=1&&i>=0?[i]:[]}function wR(r,e,t,n){return 2*(1-n)*(e-r)+2*n*(t-e)}function xR(r,e,t,n,i,o,a){var s=Id(r,t,i,a),u=Id(e,n,o,a),l=Is_pointAt(r,e,t,n,a),c=Is_pointAt(t,n,i,o,a);return[[r,e,l.x,l.y,s,u],[s,u,c.x,c.y,i,o]]}function kM(r,e,t,n,i,o,a){if(0===a)return(au(r,e,t,n)+au(t,n,i,o)+au(r,e,i,o))/2;var s=xR(r,e,t,n,i,o,.5),u=s[0],l=s[1];return u.push(a-1),l.push(a-1),kM.apply(null,u)+kM.apply(null,l)}const ER={box:function(r,e,t,n,i,o){var a=bR(r,t,i)[0],s=bR(e,n,o)[0],u=[r,i],l=[e,o];return void 0!==a&&u.push(Id(r,t,i,a)),void 0!==s&&l.push(Id(e,n,o,s)),Wv(u,l)},length:function(r,e,t,n,i,o){return kM(r,e,t,n,i,o,3)},nearestPoint:function(r,e,t,n,i,o,a,s){return yR([r,t,i],[e,n,o],a,s,Id)},pointDistance:function(r,e,t,n,i,o,a,s){var u=this.nearestPoint(r,e,t,n,i,o,a,s);return au(u.x,u.y,a,s)},interpolationAt:Id,pointAt:function(r,e,t,n,i,o,a){return{x:Id(r,t,i,a),y:Id(e,n,o,a)}},divide:function(r,e,t,n,i,o,a){return xR(r,e,t,n,i,o,a)},tangentAngle:function(r,e,t,n,i,o,a){var s=wR(r,t,i,a),u=wR(e,n,o,a);return mw(Math.atan2(u,s))}};function Od(r,e,t,n,i){var o=1-i;return o*o*o*r+3*e*i*o*o+3*t*i*i*o+n*i*i*i}function _R(r,e,t,n,i){var o=1-i;return 3*(o*o*(e-r)+2*o*i*(t-e)+i*i*(n-t))}function RM(r,e,t,n){var u,l,c,i=-3*r+9*e-9*t+3*n,o=6*r-12*e+6*t,a=3*e-3*r,s=[];if(vw(i,0))vw(o,0)||(u=-a/o)>=0&&u<=1&&s.push(u);else{var f=o*o-4*i*a;vw(f,0)?s.push(-o/(2*i)):f>0&&(l=(-o-(c=Math.sqrt(f)))/(2*i),(u=(-o+c)/(2*i))>=0&&u<=1&&s.push(u),l>=0&&l<=1&&s.push(l))}return s}function SR(r,e,t,n,i,o,a,s,u){var l=Od(r,t,i,a,u),c=Od(e,n,o,s,u),f=Is_pointAt(r,e,t,n,u),h=Is_pointAt(t,n,i,o,u),d=Is_pointAt(i,o,a,s,u),g=Is_pointAt(f.x,f.y,h.x,h.y,u),m=Is_pointAt(h.x,h.y,d.x,d.y,u);return[[r,e,f.x,f.y,g.x,g.y,l,c],[l,c,m.x,m.y,d.x,d.y,a,s]]}function FM(r,e,t,n,i,o,a,s,u){if(0===u)return function pQ(r,e){for(var t=0,n=r.length,i=0;i<n;i++)t+=au(r[i],e[i],r[(i+1)%n],e[(i+1)%n]);return t/2}([r,t,i,a],[e,n,o,s]);var l=SR(r,e,t,n,i,o,a,s,.5),c=l[0],f=l[1];return c.push(u-1),f.push(u-1),FM.apply(null,c)+FM.apply(null,f)}const sy={extrema:RM,box:function(r,e,t,n,i,o,a,s){for(var u=[r,a],l=[e,s],c=RM(r,t,i,a),f=RM(e,n,o,s),h=0;h<c.length;h++)u.push(Od(r,t,i,a,c[h]));for(h=0;h<f.length;h++)l.push(Od(e,n,o,s,f[h]));return Wv(u,l)},length:function(r,e,t,n,i,o,a,s){return FM(r,e,t,n,i,o,a,s,3)},nearestPoint:function(r,e,t,n,i,o,a,s,u,l,c){return yR([r,t,i,a],[e,n,o,s],u,l,Od,c)},pointDistance:function(r,e,t,n,i,o,a,s,u,l,c){var f=this.nearestPoint(r,e,t,n,i,o,a,s,u,l,c);return au(f.x,f.y,u,l)},interpolationAt:Od,pointAt:function(r,e,t,n,i,o,a,s,u){return{x:Od(r,t,i,a,u),y:Od(e,n,o,s,u)}},divide:function(r,e,t,n,i,o,a,s,u){return SR(r,e,t,n,i,o,a,s,u)},tangentAngle:function(r,e,t,n,i,o,a,s,u){var l=_R(r,t,i,a,u),c=_R(e,n,o,s,u);return mw(Math.atan2(c,l))}};function CR(r,e,t,n,i,o){return t*Math.cos(i)*Math.cos(o)-n*Math.sin(i)*Math.sin(o)+r}function AR(r,e,t,n,i,o){return t*Math.sin(i)*Math.cos(o)+n*Math.cos(i)*Math.sin(o)+e}const EQ_box=function(r,e,t,n,i,o,a){for(var s=function bQ(r,e,t){return Math.atan(-e/r*Math.tan(t))}(t,n,i),u=1/0,l=-1/0,c=[o,a],f=2*-Math.PI;f<=2*Math.PI;f+=Math.PI){var h=s+f;o<a?o<h&&h<a&&c.push(h):a<h&&h<o&&c.push(h)}for(f=0;f<c.length;f++){var d=CR(r,0,t,n,i,c[f]);d<u&&(u=d),d>l&&(l=d)}var g=function wQ(r,e,t){return Math.atan(e/(r*Math.tan(t)))}(t,n,i),m=1/0,_=-1/0,D=[o,a];for(f=2*-Math.PI;f<=2*Math.PI;f+=Math.PI){var L=g+f;o<a?o<L&&L<a&&D.push(L):a<L&&L<o&&D.push(L)}for(f=0;f<D.length;f++){var O=AR(0,e,t,n,i,D[f]);O<m&&(m=O),O>_&&(_=O)}return{x:u,y:m,width:l-u,height:_-m}};const BM_length=function(r){return function OR(r){if(r.length<2)return 0;for(var e=0,t=0;t<r.length-1;t++){var n=r[t],i=r[t+1];e+=au(n[0],n[1],i[0],i[1])}return e}(r)};function kR(r,e){return r&&e?{minX:Math.min(r.minX,e.minX),minY:Math.min(r.minY,e.minY),maxX:Math.max(r.maxX,e.maxX),maxY:Math.max(r.maxY,e.maxY)}:r||e}function jM(r,e){var t=r.get("startArrowShape"),n=r.get("endArrowShape");return t&&(e=kR(e,t.getCanvasBBox())),n&&(e=kR(e,n.getCanvasBBox())),e}var zM=null;function RR(){if(!zM){var r=document.createElement("canvas");r.width=1,r.height=1,zM=r.getContext("2d")}return zM}function FR(r,e,t){var n=1;if((0,ue.isString)(r)&&(n=r.split("\n").length),n>1){var i=function MQ(r,e){return e?e-r:.14*r}(e,t);return e*n+i*(n-1)}return e}function BR(r){return[r.fontStyle,r.fontVariant,r.fontWeight,r.fontSize+"px",r.fontFamily].join(" ").trim()}var DQ=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,TQ=/[^\s\,]+/gi;const jR=function NQ(r,e,t){void 0===e&&(e=!1),void 0===t&&(t=[[0,0],[1,1]]);for(var n=!!e,i=[],o=0,a=r.length;o<a;o+=2)i.push([r[o],r[o+1]]);var c,f,h,s=function PQ(r,e,t,n){var a,s,u,l,c,f,h,i=[],o=!!n;if(o){u=n[0],l=n[1];for(var d=0,g=r.length;d<g;d+=1)u=Kr.min([0,0],u,m=r[d]),l=Kr.max([0,0],l,m)}d=0;for(var _=r.length;d<_;d+=1){var m=r[d];if(0!==d||t)if(d!==_-1||t){var L=[0,0];L=Kr.sub(L,s=r[t?(d+1)%_:d+1],a=r[[d?d-1:_-1,d-1][t?0:1]]),L=Kr.scale(L,L,e);var O=Kr.distance(m,a),Z=Kr.distance(m,s),le=O+Z;0!==le&&(O/=le,Z/=le);var pe=Kr.scale([0,0],L,-O),Ee=Kr.scale([0,0],L,Z);f=Kr.add([0,0],m,pe),c=Kr.add([0,0],m,Ee),c=Kr.min([0,0],c,Kr.max([0,0],s,m)),c=Kr.max([0,0],c,Kr.min([0,0],s,m)),pe=Kr.sub([0,0],c,m),pe=Kr.scale([0,0],pe,-O/Z),f=Kr.add([0,0],m,pe),f=Kr.min([0,0],f,Kr.max([0,0],a,m)),f=Kr.max([0,0],f,Kr.min([0,0],a,m)),Ee=Kr.sub([0,0],m,f),Ee=Kr.scale([0,0],Ee,Z/O),c=Kr.add([0,0],m,Ee),o&&(f=Kr.max([0,0],f,u),f=Kr.min([0,0],f,l),c=Kr.max([0,0],c,u),c=Kr.min([0,0],c,l)),i.push(h),i.push(f),h=c}else f=m,i.push(h),i.push(f);else h=m}return t&&i.push(i.shift()),i}(i,.4,n,t),u=i.length,l=[];for(o=0;o<u-1;o+=1)l.push(["C",(c=s[2*o])[0],c[1],(f=s[2*o+1])[0],f[1],(h=i[o+1])[0],h[1]]);return n&&l.push(["C",(c=s[u])[0],c[1],(f=s[u+1])[0],f[1],(h=i[0])[0],h[1]]),l};var uy="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029",RQ=new RegExp("([a-z])["+uy+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+uy+"]*,?["+uy+"]*)+)","ig"),FQ=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+uy+"]*,?["+uy+"]*","ig");function GM(r){if(!r)return null;if((0,ue.isArray)(r))return r;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(r).replace(RQ,function(n,i,o){var a=[],s=i.toLowerCase();if(o.replace(FQ,function(u,l){l&&a.push(+l)}),"m"===s&&a.length>2&&(t.push([i].concat(a.splice(0,2))),s="l",i="m"===i?"l":"L"),"o"===s&&1===a.length&&t.push([i,a[0]]),"r"===s)t.push([i].concat(a));else for(;a.length>=e[s]&&(t.push([i].concat(a.splice(0,e[s]))),e[s]););return""}),t}var BQ=/[a-z]/;function zR(r,e){return[e[0]+(e[0]-r[0]),e[1]+(e[1]-r[1])]}function GR(r){var e=GM(r);if(!e||!e.length)return[["M",0,0]];for(var t=!1,n=0;n<e.length;n++)if(BQ.test(i=e[n][0])||["V","H","T","S"].indexOf(i)>=0){t=!0;break}if(!t)return e;var o=[],a=0,s=0,u=0,l=0,c=0,d=e[0];("M"===d[0]||"m"===d[0])&&(u=a=+d[1],l=s=+d[2],c++,o[0]=["M",a,s]),n=c;for(var g=e.length;n<g;n++){var i,m=e[n],_=o[n-1],D=[],L=(i=m[0]).toUpperCase();if(i!==L)switch(D[0]=L,L){case"A":D[1]=m[1],D[2]=m[2],D[3]=m[3],D[4]=m[4],D[5]=m[5],D[6]=+m[6]+a,D[7]=+m[7]+s;break;case"V":D[1]=+m[1]+s;break;case"H":D[1]=+m[1]+a;break;case"M":l=+m[2]+s,D[1]=u=+m[1]+a,D[2]=l;break;default:for(var O=1,Z=m.length;O<Z;O++)D[O]=+m[O]+(O%2?a:s)}else D=e[n];switch(L){case"Z":a=+u,s=+l;break;case"H":D=["L",a=D[1],s];break;case"V":D=["L",a,s=D[1]];break;case"T":a=D[1],s=D[2];var le=zR([_[1],_[2]],[_[3],_[4]]);D=["Q",le[0],le[1],a,s];break;case"S":a=D[D.length-2],s=D[D.length-1];var pe=_.length,Ee=zR([_[pe-4],_[pe-3]],[_[pe-2],_[pe-1]]);D=["C",Ee[0],Ee[1],D[1],D[2],a,s];break;case"M":u=D[D.length-2],l=D[D.length-1];break;default:a=D[D.length-2],s=D[D.length-1]}o.push(D)}return o}function bw(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function HM(r,e){return bw(r)*bw(e)?(r[0]*e[0]+r[1]*e[1])/(bw(r)*bw(e)):1}function YR(r,e){return(r[0]*e[1]<r[1]*e[0]?-1:1)*Math.acos(HM(r,e))}function WM(r,e){return r[0]===e[0]&&r[1]===e[1]}function XQ(r,e){var t=e[1],n=e[2],i=(0,ue.mod)((0,ue.toRadian)(e[3]),2*Math.PI),o=e[4],a=e[5],s=r[0],u=r[1],l=e[6],c=e[7],f=Math.cos(i)*(s-l)/2+Math.sin(i)*(u-c)/2,h=-1*Math.sin(i)*(s-l)/2+Math.cos(i)*(u-c)/2,d=f*f/(t*t)+h*h/(n*n);d>1&&(t*=Math.sqrt(d),n*=Math.sqrt(d));var g=t*t*(h*h)+n*n*(f*f),m=g?Math.sqrt((t*t*(n*n)-g)/g):1;o===a&&(m*=-1),isNaN(m)&&(m=0);var _=n?m*t*h/n:0,D=t?m*-n*f/t:0,L=(s+l)/2+Math.cos(i)*_-Math.sin(i)*D,O=(u+c)/2+Math.sin(i)*_+Math.cos(i)*D,Z=[(f-_)/t,(h-D)/n],le=[(-1*f-_)/t,(-1*h-D)/n],pe=YR([1,0],Z),Ee=YR(Z,le);return HM(Z,le)<=-1&&(Ee=Math.PI),HM(Z,le)>=1&&(Ee=0),0===a&&Ee>0&&(Ee-=2*Math.PI),1===a&&Ee<0&&(Ee+=2*Math.PI),{cx:L,cy:O,rx:WM(r,[l,c])?0:t,ry:WM(r,[l,c])?0:n,startAngle:pe,endAngle:pe+Ee,xRotation:i,arcFlag:o,sweepFlag:a}}function XR(r,e){return[e[0]+(e[0]-r[0]),e[1]+(e[1]-r[1])]}function qR(r){for(var e=[],t=null,n=null,i=null,o=0,a=(r=function IQ(r){var e=r||[];return(0,ue.isArray)(e)?e:(0,ue.isString)(e)?(e=e.match(DQ),(0,ue.each)(e,function(t,n){if((t=t.match(TQ))[0].length>1){var i=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=i}(0,ue.each)(t,function(o,a){isNaN(o)||(t[a]=+o)}),e[n]=t}),e):void 0}(r)).length,s=0;s<a;s++){var u=r[s];n=r[s+1];var l=u[0],c={command:l,prePoint:t,params:u,startTangent:null,endTangent:null};switch(l){case"M":i=[u[1],u[2]],o=s;break;case"A":var f=XQ(t,u);c.arcParams=f}if("Z"===l)t=i,n=r[o+1];else{var h=u.length;t=[u[h-2],u[h-1]]}n&&"Z"===n[0]&&(n=r[o],e[o]&&(e[o].prePoint=t)),c.currentPoint=t,e[o]&&WM(t,e[o].currentPoint)&&(e[o].prePoint=c.prePoint),c.nextPoint=n?[n[n.length-2],n[n.length-1]]:null;var g=c.prePoint;if(["L","H","V"].includes(l))c.startTangent=[g[0]-t[0],g[1]-t[1]],c.endTangent=[t[0]-g[0],t[1]-g[1]];else if("Q"===l)c.startTangent=[g[0]-(m=[u[1],u[2]])[0],g[1]-m[1]],c.endTangent=[t[0]-m[0],t[1]-m[1]];else if("T"===l){var m=XR((_=e[s-1]).currentPoint,g);"Q"===_.command?(c.command="Q",c.startTangent=[g[0]-m[0],g[1]-m[1]],c.endTangent=[t[0]-m[0],t[1]-m[1]]):(c.command="TL",c.startTangent=[g[0]-t[0],g[1]-t[1]],c.endTangent=[t[0]-g[0],t[1]-g[1]])}else if("C"===l){var L=[u[3],u[4]];c.startTangent=[g[0]-(D=[u[1],u[2]])[0],g[1]-D[1]],c.endTangent=[t[0]-L[0],t[1]-L[1]],0===c.startTangent[0]&&0===c.startTangent[1]&&(c.startTangent=[D[0]-L[0],D[1]-L[1]]),0===c.endTangent[0]&&0===c.endTangent[1]&&(c.endTangent=[L[0]-D[0],L[1]-D[1]])}else if("S"===l){var _,D=XR((_=e[s-1]).currentPoint,g);L=[u[1],u[2]],"C"===_.command?(c.command="C",c.startTangent=[g[0]-D[0],g[1]-D[1]],c.endTangent=[t[0]-L[0],t[1]-L[1]]):(c.command="SQ",c.startTangent=[g[0]-L[0],g[1]-L[1]],c.endTangent=[t[0]-L[0],t[1]-L[1]])}else if("A"===l){var O=.001,Z=c.arcParams||{},le=Z.cx,pe=void 0===le?0:le,Ee=Z.cy,Re=void 0===Ee?0:Ee,Ve=Z.rx,Ue=void 0===Ve?0:Ve,at=Z.ry,_t=void 0===at?0:at,vn=Z.sweepFlag,Tt=Z.startAngle,kt=void 0===Tt?0:Tt,Ln=Z.endAngle,Kn=void 0===Ln?0:Ln;0===(void 0===vn?0:vn)&&(O*=-1);var mn=Ue*Math.cos(kt-O)+pe,On=_t*Math.sin(kt-O)+Re;c.startTangent=[mn-i[0],On-i[1]];var Vn=Ue*Math.cos(kt+Kn+O)+pe,rr=_t*Math.sin(kt+Kn-O)+Re;c.endTangent=[g[0]-Vn,g[1]-rr]}e.push(c)}return e}function ww(r,e){var t=r.prePoint,n=r.currentPoint,i=r.nextPoint,o=Math.pow(n[0]-t[0],2)+Math.pow(n[1]-t[1],2),a=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),s=Math.pow(t[0]-i[0],2)+Math.pow(t[1]-i[1],2),u=Math.acos((o+a-s)/(2*Math.sqrt(o)*Math.sqrt(a)));if(!u||0===Math.sin(u)||(0,ue.isNumberEqual)(u,0))return{xExtra:0,yExtra:0};var l=Math.abs(Math.atan2(i[1]-n[1],i[0]-n[0])),c=Math.abs(Math.atan2(i[0]-n[0],i[1]-n[1]));return l=l>Math.PI/2?Math.PI-l:l,c=c>Math.PI/2?Math.PI-c:c,{xExtra:Math.cos(u/2-l)*(e/2*(1/Math.sin(u/2)))-e/2||0,yExtra:Math.cos(c-u/2)*(e/2*(1/Math.sin(u/2)))-e/2||0}}Math,Lf("rect",vR),Lf("image",vR),Lf("circle",mR),Lf("marker",mR),Lf("polyline",function _Q(r){for(var t=r.attr().points,n=[],i=[],o=0;o<t.length;o++){var a=t[o];n.push(a[0]),i.push(a[1])}var s=Wv(n,i),u=s.x,l=s.y,h={minX:u,minY:l,maxX:u+s.width,maxY:l+s.height};return{x:(h=jM(r,h)).minX,y:h.minY,width:h.maxX-h.minX,height:h.maxY-h.minY}}),Lf("polygon",function SQ(r){for(var t=r.attr().points,n=[],i=[],o=0;o<t.length;o++){var a=t[o];n.push(a[0]),i.push(a[1])}return Wv(n,i)}),Lf("text",function AQ(r){var e=r.attr(),t=e.x,n=e.y,i=e.text,o=e.fontSize,a=e.lineHeight,s=e.font;s||(s=BR(e));var l,u=function CQ(r,e){var t=RR(),n=0;if((0,ue.isNil)(r)||""===r)return n;if(t.save(),t.font=e,(0,ue.isString)(r)&&r.includes("\n")){var i=r.split("\n");(0,ue.each)(i,function(o){var a=t.measureText(o).width;n<a&&(n=a)})}else n=t.measureText(r).width;return t.restore(),n}(i,s);if(u){var c=e.textAlign,f=e.textBaseline,h=FR(i,o,a),d={x:t,y:n-h};c&&("end"===c||"right"===c?d.x-=u:"center"===c&&(d.x-=u/2)),f&&("top"===f?d.y+=h:"middle"===f&&(d.y+=h/2)),l={x:d.x,y:d.y,width:u,height:h}}else l={x:t,y:n,width:0,height:0};return l}),Lf("path",function QQ(r){var e=r.attr(),t=e.path,i=e.stroke?e.lineWidth:0,a=function ZQ(r,e){for(var t=[],n=[],i=[],o=0;o<r.length;o++){var s=(a=r[o]).currentPoint,u=a.params,l=a.prePoint,c=void 0;switch(a.command){case"Q":c=ER.box(l[0],l[1],u[1],u[2],u[3],u[4]);break;case"C":c=sy.box(l[0],l[1],u[1],u[2],u[3],u[4],u[5],u[6]);break;case"A":var f=a.arcParams;c=EQ_box(f.cx,f.cy,f.rx,f.ry,f.xRotation,f.startAngle,f.endAngle);break;default:t.push(s[0]),n.push(s[1])}c&&(a.box=c,t.push(c.x,c.x+c.width),n.push(c.y,c.y+c.height)),e&&("L"===a.command||"M"===a.command)&&a.prePoint&&a.nextPoint&&i.push(a)}t=t.filter(function(D){return!Number.isNaN(D)&&D!==1/0&&D!==-1/0}),n=n.filter(function(D){return!Number.isNaN(D)&&D!==1/0&&D!==-1/0});var h=(0,ue.min)(t),d=(0,ue.min)(n),g=(0,ue.max)(t),m=(0,ue.max)(n);if(0===i.length)return{x:h,y:d,width:g-h,height:m-d};for(o=0;o<i.length;o++){var a;(s=(a=i[o]).currentPoint)[0]===h?h-=ww(a,e).xExtra:s[0]===g&&(g+=ww(a,e).xExtra),s[1]===d?d-=ww(a,e).yExtra:s[1]===m&&(m+=ww(a,e).yExtra)}return{x:h,y:d,width:g-h,height:m-d}}(r.get("segments")||qR(t),i),s=a.x,u=a.y,f={minX:s,minY:u,maxX:s+a.width,maxY:u+a.height};return{x:(f=jM(r,f)).minX,y:f.minY,width:f.maxX-f.minX,height:f.maxY-f.minY}}),Lf("line",function JQ(r){var e=r.attr(),t=e.x1,n=e.y1,i=e.x2,o=e.y2,c={minX:Math.min(t,i),maxX:Math.max(t,i),minY:Math.min(n,o),maxY:Math.max(n,o)};return{x:(c=jM(r,c)).minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}}),Lf("ellipse",function eJ(r){var e=r.attr(),i=e.rx,o=e.ry;return{x:e.x-i,y:e.y-o,width:2*i,height:2*o}});var tJ=function(r){function e(t,n){var i=r.call(this,t,n)||this;return i.item=n.item,i.canvasX=n.canvasX,i.canvasY=n.canvasY,i.wheelDelta=n.wheelDelta,i.detail=n.detail,i}return(0,De.__extends)(e,r),e}(uk),$M=function(e){return"".concat(e,"-").concat(Math.random()).concat(Date.now())},YM=function(e){if((0,ue.isArray)(e))switch(e.length){case 4:return e;case 3:return e.push(e[1]),e;case 2:return e.concat(e);case 1:return[e[0],e[0],e[0],e[0]];default:return[0,0,0,0]}if((0,ue.isNumber)(e))return[e,e,e,e];if((0,ue.isString)(e)){var t=parseInt(e,10);return[t,t,t,t]}return[0,0,0,0]},nJ=function(e){var t=new tJ(e.type,e);return t.clientX=e.clientX,t.clientY=e.clientY,t.x=e.x,t.y=e.y,t.target=e.target,t.currentTarget=e.currentTarget,t.bubbles=!0,t.item=e.item,t},rJ=function(e){if(!e)return!1;for(var n=[1,0,0,0,1,0,0,0,1],i=0;i<9;i++)if(e[i]!==n[i])return!0;return!1},kf=function(e){return Number.isNaN(Number(e))},QR=function(e){for(var t=1/0,n=-1/0,i=1/0,o=-1/0,a=0;a<e.length;a++){var u=e[a].getBBox(),l=u.minX,c=u.minY,f=u.maxX,h=u.maxY;l<t&&(t=l),c<i&&(i=c),f>n&&(n=f),h>o&&(o=h)}return{x:Math.floor(t),y:Math.floor(i),width:Math.ceil(n)-Math.floor(t),height:Math.ceil(o)-Math.floor(i),minX:t,minY:i,maxX:n,maxY:o}},iJ=function(e,t,n,i,o){void 0===t&&(t=15),void 0===n&&(n="quadratic"),void 0===i&&(i=void 0),void 0===o&&(o=void 0);for(var a=e.length,s=2*t,u=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],l={},c=[],f={},h=0;h<a;h++){var d=e[h],g=d.source,m=d.target,_="".concat(g,"-").concat(m);if(!c[h]){l[_]||(l[_]=[]),c[h]=!0,l[_].push(d);for(var D=0;D<a;D++)if(h!==D){var L=e[D],O=L.source,Z=L.target;c[D]||(g===Z&&m===O?(l[_].push(L),c[D]=!0,f["".concat(O,"|").concat(Z,"|").concat(l[_].length-1)]=!0):g===O&&m===Z&&(l[_].push(L),c[D]=!0))}}}for(var le in l)for(var pe=l[le],Ee=pe.length,Re=0;Re<Ee;Re++){var Ve=pe[Re];if(Ve.source!==Ve.target)if(1===Ee&&i&&Ve.source!==Ve.target)Ve.type=i;else{Ve.type=n;var Ue=(Re%2==0?1:-1)*(f["".concat(Ve.source,"|").concat(Ve.target,"|").concat(Re)]?-1:1);Ve.curveOffset=Ee%2==1?Ue*Math.ceil(Re/2)*s:Ue*(Math.floor(Re/2)*s+t)}else o&&(Ve.type=o),Ve.loopCfg={position:u[Re%8],dist:20*Math.floor(Re/8)+50}}return e},JR=G(8276),oJ=function(){function r(e){this.destroyed=!1,this.graph=e,this.destroyed=!1}return r.prototype.getViewCenter=function(){var e=this.getFormatPadding(),t=this.graph,n=this.graph.get("width"),i=t.get("height");return{x:(n-e[1]-e[3])/2+e[3],y:(i-e[0]-e[2])/2+e[0]}},r.prototype.fitCenter=function(e,t){var o,n=this.graph,i=n.get("group"),a=n.getNodes();if(a.length>n.get("optimizeThreshold")){var s=1/0,u=1/0,l=-1/0,c=-1/0;a.forEach(function(Z){var le=Z.getModel(),pe=le.x,Ee=le.y;s>pe&&(s=pe),u>Ee&&(u=Ee),l<pe&&(l=pe),c<Ee&&(c=Ee)});var f=i.getMatrix()||[1,0,0,0,1,0,0,0,1],h=zv({x:s,y:u},f),d=h.x,g=h.y,m=zv({x:l,y:c},f),_=m.x,D=m.y;o={minX:d,maxX:_,minY:g,maxY:D,width:_-d,height:D-g,x:d,y:g}}else o=i.getCanvasBBox();if(0!==o.width&&0!==o.height){var L=this.getViewCenter(),O={x:o.x+o.width/2,y:o.y+o.height/2};n.translate(L.x-O.x,L.y-O.y,e,t)}},r.prototype.animatedFitView=function(e,t,n,i,o,a,s,u){var l=this.graph;n=n||{duration:500,easing:"easeCubic"};var f=i.x+o.x-a.x-i.minX,h=i.y+o.y-a.y-i.minY;if(!kf(f)&&!kf(h)){var d=(0,JR.vs)([1,0,0,0,1,0,0,0,1],[["t",f,h]]);if(!u){var g=qm({animateCfg:n,callback:function(){l.emit("viewportchange",{action:"translate",matrix:d})}});return void e.animate(function(Z){return{matrix:sM(t,d,Z)}},g)}var m=l.get("minZoom"),_=l.get("maxZoom"),D=s;m&&s<m?(D=m,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph minzoom has been used instead")):_&&s>_&&(D=_,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph maxzoom has been used instead"));var L=(0,JR.vs)(d,[["t",-o.x,-o.y],["s",D,D],["t",o.x,o.y]]),O=qm({animateCfg:n,callback:function(){e.setMatrix(L),l.emit("viewportchange",{action:"translate",matrix:d}),l.emit("viewportchange",{action:"zoom",matrix:L})}});e.stopAnimate(),e.setMatrix(t),e.animate(function(Z){return{matrix:sM(t,L,Z)}},O)}},r.prototype.fitView=function(e,t){var n=this.graph,i=this.getFormatPadding(),o=n.get("width"),a=n.get("height"),s=n.get("group"),u=s.getMatrix()||[1,0,0,0,1,0,0,0,1];s.resetMatrix();var l,c=n.getNodes();if(c.length>n.get("optimizeThreshold")){var f=1/0,h=1/0,d=-1/0,g=-1/0;c.forEach(function(pe){var Ee=pe.getModel(),Re=Ee.x,Ve=Ee.y;f>Re&&(f=Re),h>Ve&&(h=Ve),d<Re&&(d=Re),g<Ve&&(g=Ve)}),l={minX:f,maxX:d,minY:h,maxY:g,width:d-f,height:g-h,x:f,y:h}}else l=s.getCanvasBBox();if(0!==l.width&&0!==l.height){var m=this.getViewCenter(),_={x:l.x+l.width/2,y:l.y+l.height/2},D=(o-i[1]-i[3])/l.width,L=(a-i[0]-i[2])/l.height,O=D;if(D>L&&(O=L),e)this.animatedFitView(s,u,t,l,m,_,O,!0);else{var Z=m.x-_.x,le=m.y-_.y;if(kf(Z)||kf(le))return;n.translate(Z,le),n.zoom(O,m)||console.warn("zoom failed, ratio out of range, ratio: %f",O)}}},r.prototype.fitViewByRules=function(e,t,n){var i=e.onlyOutOfViewPort,o=void 0!==i&&i,a=e.direction,s=void 0===a?"both":a,u=e.ratioRule,l=void 0===u?"min":u,c=this.graph,f=this.getFormatPadding(),h=c.get("width"),d=c.get("height"),g=c.get("group"),m=g.getMatrix()||[1,0,0,0,1,0,0,0,1];g.resetMatrix();var _,D=c.getNodes();if(D.length>c.get("optimizeThreshold")){var L=1/0,O=1/0,Z=-1/0,le=-1/0;D.forEach(function(Cn){var Tt=Cn.getModel(),kt=Tt.x,Ln=Tt.y;L>kt&&(L=kt),O>Ln&&(O=Ln),Z<kt&&(Z=kt),le<Ln&&(le=Ln)}),_={minX:L,maxX:Z,minY:O,maxY:le,width:Z-L,height:le-O,x:L,y:O}}else _=g.getCanvasBBox();if(0!==_.width&&0!==_.height){var Ue,pe=this.getViewCenter(),Ee={x:_.x+_.width/2,y:_.y+_.height/2},Re=(h-f[1]-f[3])/_.width,Ve=(d-f[0]-f[2])/_.height;if(Ue="x"===s?Re:"y"===s?Ve:"max"===l?Math.max(Re,Ve):Math.min(Re,Ve),o&&(Ue=Ue<1?Ue:1),t)this.animatedFitView(g,m,n,_,pe,Ee,Ue,!0);else{var _t=c.getZoom()*Ue,vn=c.get("minZoom");_t<vn&&(_t=vn,console.warn("fitview failed, ratio out of range, ratio: %f",Ue,"graph minzoom has been used instead")),c.translate(pe.x-Ee.x,pe.y-Ee.y),c.zoomTo(_t,pe)}}},r.prototype.getFormatPadding=function(){var e=this.graph.get("fitViewPadding");return YM(e)},r.prototype.focusPoint=function(e,t,n){var i=this,o=this.getViewCenter(),a=this.getPointByCanvas(o.x,o.y),s=this.graph.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),t){var u=(a.x-e.x)*s[0],l=(a.y-e.y)*s[4],c=0,f=0,h=0,d=0;this.graph.get("canvas").animate(function(g){i.graph.translate((h=u*g)-c,(d=l*g)-f),c=h,f=d},(0,De.__assign)({},n))}else this.graph.translate((a.x-e.x)*s[0],(a.y-e.y)*s[4])},r.prototype.getPointByCanvas=function(e,t){var n=this.graph.get("group").getMatrix();return n||(n=[1,0,0,0,1,0,0,0,1]),NL({x:e,y:t},n)},r.prototype.getPointByClient=function(e,t){var i=this.graph.get("canvas").getPointByClient(e,t);return this.getPointByCanvas(i.x,i.y)},r.prototype.getClientByPoint=function(e,t){var n=this.graph.get("canvas"),i=this.getCanvasByPoint(e,t),o=n.getClientByPoint(i.x,i.y);return{x:o.x,y:o.y}},r.prototype.getCanvasByPoint=function(e,t){var n=this.graph.get("group").getMatrix();return n||(n=[1,0,0,0,1,0,0,0,1]),zv({x:e,y:t},n)},r.prototype.focus=function(e,t,n){if((0,ue.isString)(e)&&(e=this.graph.findById(e)),e){var i=0,o=0;if(e.getType&&"edge"===e.getType()){var a=e.getSource().get("group").getMatrix(),s=e.getTarget().get("group").getMatrix();a&&s?(i=(a[6]+s[6])/2,o=(a[7]+s[7])/2):(a||s)&&(i=a?a[6]:s[6],o=a?a[7]:s[7])}else{var l=e.get("group").getMatrix();l||(l=[1,0,0,0,1,0,0,0,1]),i=l[6],o=l[7]}this.focusPoint({x:i,y:o},t,n)}},r.prototype.focusItems=function(e,t,n,i){if(e.length){var o=this.graph,a=this.getFormatPadding(),s=o.get("width"),u=o.get("height"),l=o.get("group"),c=l.getMatrix()||[1,0,0,0,1,0,0,0,1];l.resetMatrix();for(var f={x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},h=0,d=e;h<d.length;h++){var m=d[h].getBBox();m.minX<f.minX&&(f.minX=m.minX),m.minY<f.minY&&(f.minY=m.minY),m.maxX>f.maxX&&(f.maxX=m.maxX),m.maxY>f.maxY&&(f.maxY=m.maxY)}if(f.x=f.minX,f.y=f.minY,f.width=f.maxX-f.minX,f.height=f.maxY-f.minY,0!==f.width&&0!==f.height){var _=this.getViewCenter(),D={x:f.x+f.width/2,y:f.y+f.height/2},L=(s-a[1]-a[3])/f.width,O=(u-a[0]-a[2])/f.height,Z=L;L>O&&(Z=O),n?this.animatedFitView(l,c,i,f,_,D,Z,t):(o.translate(_.x-D.x,_.y-D.y),t&&!o.zoom(Z,_)&&console.warn("zoom failed, ratio out of range, ratio: %f",Z))}}},r.prototype.changeSize=function(e,t){var n=this.graph;if(!(0,ue.isNumber)(e)||!(0,ue.isNumber)(t))throw Error("invalid canvas width & height, please make sure width & height type is number");n.set({width:e,height:t}),n.get("canvas").changeSize(e,t),n.get("plugins").forEach(function(a){a.get("gridContainer")&&a.positionInit()})},r.prototype.destroy=function(){this.graph=null,this.destroyed=!1},r}();const aJ=oJ;function XM(r){return(XM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}function eF(r){if("string"!=typeof r)return r;var e=function(Ee){if("string"!=typeof Ee)return Ee;try{return JSON.parse(Ee.trim())}catch{return Ee.trim()}},t=e(r);if("string"!=typeof t)return t;for(var n=function(Ee){return Ee[Ee.length-1]},i=r.trim(),o=[],a=[],s=function(){for(var Ee=[],Re=0;Re<arguments.length;Re++)Ee[Re]=arguments[Re];return Ee.some(function(Ve){return n(a)===Ve})},l=null,c=0,f="";c<i.length;){var h=i[c],d=s('"',"'");if(d||h.trim()){var g="\\"===i[c-1],m=s("}"),_=s("]"),D=s(","),L=n(o);if(d)if(n(a)!==h||g)f+=h;else{a.pop();var O=e(f);L.push(O),l=O,f=""}else if(_&&","===h)f&&(L.push(e(f)),f="");else if(m&&":"===h)a.push(","),f&&(L.push(f),f="");else if(D&&","===h)f&&(L.push(e(f)),f=""),a.pop();else if("}"===h&&(m||D)){f&&(L.push(e(f)),f=""),D&&a.pop();for(var Z={},le=1;le<L.length;le+=2)Z[L[le-1]]=L[le];o.pop(),o.length&&n(o).push(Z),a.pop(),l=Z}else"]"===h&&_?(f&&(L.push(e(f)),f=""),o.pop(),o.length&&n(o).push(L),a.pop(),l=L):"{"===h?(o.push([]),a.push("}")):"["===h?(o.push([]),a.push("]")):'"'===h?a.push('"'):"'"===h?a.push("'"):f+=h;c+=1}else c+=1}return l||f}function tF(r,e){var t={},n=r.getAttributeNames&&r.getAttributeNames()||[],i=r.children&&Array.from(r.children).map(function(s){return tF(s,e)}),o={},a=r.tagName?r.tagName.toLowerCase():"group";return"text"===a&&(t.text=r.innerText),o.type=a,"img"===a&&(o.type="image"),Array.from(n).forEach(function(s){var u=function(e){return e.split("-").reduce(function(t,n){return t+n.charAt(0).toUpperCase()+n.slice(1)})}(s),l=r.getAttribute(s);try{if("style"===u||"attrs"===u){var c=eF(l);t=(0,De.__assign)((0,De.__assign)({},t),c)}else o[u]=eF(l)}catch(f){if("style"===u)throw f;o[u]=l}}),o.attrs=t,e&&e.style&&o.name&&"object"===XM(e.style[o.name])&&(o.attrs=(0,De.__assign)((0,De.__assign)({},o.attrs),e.style[o.name])),e&&e.style&&o.keyshape&&(o.attrs=(0,De.__assign)((0,De.__assign)({},o.attrs),e.style)),i.length&&(o.children=i),o}function nF(r,e){var t;void 0===e&&(e={x:0,y:0});var n=(0,De.__assign)({x:0,y:0,width:0,height:0},e);if(null!==(t=r.children)&&void 0!==t&&t.length){var i=r.attrs,o=void 0===i?{}:i,a=o.marginTop,s=(0,De.__assign)({},e);a&&(s.y+=a);for(var u=0;u<r.children.length;u++){r.children[u].attrs.key="".concat(o.key||"root"," -").concat(u," ");var l=nF(r.children[u],s);if(l.bbox){var c=l.bbox;"inline"===l.attrs.next?s.x+=l.bbox.width:s.y+=l.bbox.height,c.width+c.x>n.width&&(n.width=c.width+c.x),c.height+c.y>n.height&&(n.height=c.height+c.y)}}}return r.bbox=function lJ(r,e,t){var a,s,n=r.attrs,i=void 0===n?{}:n,o={x:e.x||0,y:e.y||0,width:t.width||0,height:t.height||0};switch(r.type){case"maker":case"circle":i.r&&(s=2*i.r,a=2*i.r);break;case"text":i.text&&(s=qL(i.text,i.fontSize||12)[0],o.y+=a=16,o.height=a,o.width=s,r.attrs=(0,De.__assign)({fontSize:12,fill:"#000"},i));break;default:i.width&&(s=i.width),i.height&&(a=i.height)}return a>=0&&(o.height=a),s>=0&&(o.width=s),i.marginTop&&(o.y+=i.marginTop),i.marginLeft&&(o.x+=i.marginLeft),o}(r,e,n),r.attrs=(0,De.__assign)((0,De.__assign)({},r.attrs),r.bbox),r}function rF(r,e){var t,n,i,o,a=(r||{}).type,s=(e?.attrs||{}).key;if(s&&r&&(r.attrs.key=s),!r&&e)return{action:"delete",val:e,type:a,key:s};if(r&&!e)return{action:"add",val:r,type:a};if(!r&&!e)return{action:"same",type:a};var u=[];if((null===(t=r.children)||void 0===t?void 0:t.length)>0||(null===(n=e.children)||void 0===n?void 0:n.length)>0)for(var l=Math.max(null===(i=r.children)||void 0===i?void 0:i.length,null===(o=e.children)||void 0===o?void 0:o.length),c=e.children||[],f=r.children||[],h=0;h<l;h+=1)u.push(rF(f[h],c[h]));var d=Object.keys(e.attrs),g=Object.keys(r.attrs);return e.type!==r.type?{action:"restructure",nowTarget:r,formerTarget:e,key:s,children:u}:d.filter(function(m){return"children"!==m}).some(function(m){return r.attrs[m]!==e.attrs[m]||!g.includes(m)})?{action:"change",val:r,children:u,type:a,key:s}:{action:"same",children:u,type:a,key:s}}function iF(r){var e={},t=function(i){var a=function(e){return function(t){for(var n=e.length,i=[],o=0,a="";o<n;)if("{"===e[o]&&"{"===e[o+1])i.push(a),a="",o+=2;else if("}"===e[o]&&"}"===e[o+1]){if(i.length){var s=i.pop();a=(0,ue.get)(t,a,s.endsWith("=")?'"{'.concat(a,'}"'):a),i.push(s+a)}o+=2,a=""}else a+=e[o],o+=1;return i.push(a),i.map(function(u,l){return i[l-1]&&i[l-1].endsWith("=")?'"{'.concat(u,'}"'):u}).join("")}}("function"==typeof r?r(i):r)(i),s=document.createElement("div");s.innerHTML=a;var l=nF(tF(s.children[0],i));return s.remove(),l};return{draw:function(i,o){var a=t(i),s=o;return function l(c){var f=c.attrs,h=void 0===f?{}:f,d=c.bbox,g=c.type,m=c.children,_=(0,De.__rest)(c,["attrs","bbox","type","children"]);if("group"!==c.type){var D=o.addShape(c.type,(0,De.__assign)({attrs:h,origin:{bbox:d,type:g,children:m}},_));c.keyshape&&(s=D)}c.children&&c.children.forEach(function(L){return l(L)})}(a),e[i.id]=[a],s},update:function(i,o){e[i.id]||(e[i.id]=[]);var a=o.getContainer(),s=a.get("children"),u=t(i),c=rF(u,e[i.id].pop()),f=function g(m){var _;"group"!==m.type&&a.addShape(m.type,{attrs:m.attrs}),null!==(_=m.children)&&void 0!==_&&_.length&&m.children.map(function(D){return g(D)})},h=function g(m){var _,D=s.find(function(L){return L.attrs.key===m.attrs.key});D&&a.removeChild(D),null!==(_=m.children)&&void 0!==_&&_.length&&m.children.map(function(L){return g(L)})};(function g(m){var _=m.key;if("group"!==m.type){var D=s.find(function(O){return O.attrs.key===_});switch(m.action){case"change":if(D){var L=m.val.keyshape?o.getOriginStyle():{};D.attr((0,De.__assign)((0,De.__assign)({},L),m.val.attrs))}break;case"add":f(m.val);break;case"delete":h(m.val);break;case"restructure":h(m.formerTarget),f(m.nowTarget)}}m.children&&m.children.forEach(function(O){return g(O)})})(c),e[i.id].push(u)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var qM={};function oF(r){return qM[r]||(qM[r]=(0,ue.upperFirst)(r)),qM[r]}var cJ={defaultShapeType:"defaultType",className:null,getShape:function(e){var t=this;return t[e]||t[t.defaultShapeType]||t["simple-circle"]},draw:function(e,t,n){var i=this.getShape(e);n.shapeMap={};var o=i.draw(t,n);return i.afterDraw&&i.afterDraw(t,n,o),o},baseUpdate:function(e,t,n,i){var o,a,s=this.getShape(e);s.update&&(s.mergeStyle=null===(o=s.getOptions)||void 0===o?void 0:o.call(s,t,i),null===(a=s.update)||void 0===a||a.call(s,t,n,i)),s.afterUpdate&&s.afterUpdate(t,n)},setState:function(e,t,n,i){this.getShape(e).setState(t,n,i)},shouldUpdate:function(e){return!!this.getShape(e).update},getControlPoints:function(e,t){return this.getShape(e).getControlPoints(t)},getAnchorPoints:function(e,t){return this.getShape(e).getAnchorPoints(t)}},KM={options:{},draw:function(e,t){return this.drawShape(e,t)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){return e.anchorPoints||this.options.anchorPoints}},xw=function(){function r(){}return r.registerFactory=function(e,t){var n=oF(e),o=(0,De.__assign)((0,De.__assign)({},cJ),t);return r[n]=o,o.className=n,o},r.getFactory=function(e){return r[oF(e)]},r.registerNode=function(e,t,n){var o,i=r.Node;if("string"==typeof t||"function"==typeof t){var a=iF(t);o=(0,De.__assign)((0,De.__assign)({},i.getShape("single-node")),a)}else if(t.jsx)a=iF(t.jsx),o=(0,De.__assign)((0,De.__assign)((0,De.__assign)({},i.getShape("single-node")),a),t);else{i.getShape(n);var u=n?i.getShape(n):KM;o=(0,De.__assign)((0,De.__assign)({},u),t)}return o.type=e,o.itemType="node",i[e]=o,o},r.registerEdge=function(e,t,n){var i=r.Edge,o=n?i.getShape(n):KM,a=(0,De.__assign)((0,De.__assign)({},o),t);return a.type=e,a.itemType="edge",i[e]=a,a},r.registerCombo=function(e,t,n){var i=r.Combo,o=n?i.getShape(n):KM,a=(0,De.__assign)((0,De.__assign)({},o),t);return a.type=e,a.itemType="combo",i[e]=a,a},r}();const Os=xw;xw.registerFactory("node",{defaultShapeType:"circle"}),xw.registerFactory("edge",{defaultShapeType:"line"}),xw.registerFactory("combo",{defaultShapeType:"circle"});var ZM="bboxCache",QM="bboxCanvasCache",fJ=function(){function r(e){this._cfg={},this.destroyed=!1,this.optimize=!1,this._cfg=Object.assign({id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]},this.getDefaultCfg(),e);var n=this.get("model"),i=n.id,o=this.get("type");typeof i>"u"?i=$M(o):"string"!=typeof i&&(i=String(i)),this.get("model").id=i,this.set("id",i);var a=e.group;a&&(a.set("item",this),a.set("id",i)),this.init(),this.draw();var s=n.shape||n.type||("edge"===o?"line":"circle"),u=this.get("shapeFactory");if(u&&u[s]){var l=u[s].options;if(l&&l.stateStyles){var c=this.get("styles")||n.stateStyles;c=(0,ue.deepMix)({},l.stateStyles,c),this.set("styles",c)}}}return r.prototype.calculateBBox=function(){var e=this.get("keyShape"),t=this.get("group"),n=tw(e,t);return n.x=n.minX,n.y=n.minY,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},r.prototype.calculateCanvasBBox=function(){var e=this.get("keyShape"),t=this.get("group"),n=tw(e,t);return n.x=n.minX,n.y=n.minY,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},r.prototype.drawInner=function(){var e=this,t=e.get("shapeFactory"),n=e.get("group"),i=e.get("model");n.clear();var o=i.visible;if(void 0!==o&&!o&&e.changeVisibility(o),t){e.updatePosition(i);var a=e.getShapeCfg(i),s=a.type,u=t.draw(s,a,n);u&&(e.set("keyShape",u),u.set("isKeyShape",!0),u.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",s),this.restoreStates(t,s)}},r.prototype.setOriginStyle=function(){var e=this.get("group"),t=e.get("children"),n=this.getKeyShape(),i=this,o=n.get("name");if(this.get("originStyle")){var d=this.get("originStyle");o&&!d[o]&&(d[o]={});for(var g=this.getCurrentStatesStyle(),m=function(D){var L=t[D],O=L.get("name"),Z=L.attr();if(O&&O!==o){var le=g[O];d[O]||(d[O]={}),le?Object.keys(Z).forEach(function(Re){var Ve=Z[Re];Ve!==le[Re]&&(d[O][Re]=Ve)}):d[O]="image"!==L.get("type")?(0,ue.clone)(Z):i.getShapeStyleByName(O)}else{var pe=L.attr(),Ee={};Object.keys(g).forEach(function(Re){var Ve=g[Re];(Re===o||!(0,ue.isPlainObject)(Ve))&&(Ee[Re]=Ve)}),Object.keys(pe).forEach(function(Re){var Ve=pe[Re];Ee[Re]!==Ve&&(o?d[o][Re]=Ve:d[Re]=Ve)})}},s=0;s<t.length;s++)m(s);delete d.path,delete d.matrix,delete d.x,delete d.y,d[o]&&(delete d[o].x,delete d[o].y,delete d[o].matrix,delete d[o].path),i.set("originStyle",d)}else{var a={};for(s=0;s<t.length;s++){var u=t[s],l=u.get("type"),c=u.get("name");if(c&&c!==o)a[c]="image"!==l?(0,ue.clone)(u.attr()):i.getShapeStyleByName(c),"text"===l&&a[c]&&(delete a[c].x,delete a[c].y,delete a[c].matrix);else{var f=i.getShapeStyleByName();if(delete f.path,delete f.matrix,o)if(c)a[o]=f;else{var h=$M("shape");u.set("name",h),e.shapeMap[h]=u,a[h]="image"!==l?(0,ue.clone)(u.attr()):i.getShapeStyleByName(c)}else Object.assign(a,f)}}i.set("originStyle",a)}},r.prototype.restoreStates=function(e,t){var n=this,i=n.get("states");(0,ue.each)(i,function(o){e.setState(t,o,!0,n)})},r.prototype.init=function(){var e=Os.getFactory(this.get("type"));this.set("shapeFactory",e)},r.prototype.get=function(e){return this._cfg[e]},r.prototype.set=function(e,t){(0,ue.isPlainObject)(e)?this._cfg=(0,De.__assign)((0,De.__assign)({},this._cfg),e):this._cfg[e]=t},r.prototype.getDefaultCfg=function(){return{}},r.prototype.clearCache=function(){this.set(ZM,null),this.set(QM,null)},r.prototype.beforeDraw=function(){},r.prototype.afterDraw=function(){},r.prototype.afterUpdate=function(){},r.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},r.prototype.getShapeStyleByName=function(e){var n,t=this.get("group");if(n=e?t.shapeMap[e]:this.getKeyShape()){var i={};return(0,ue.each)(n.attr(),function(o,a){("img"!==a||(0,ue.isString)(o))&&(i[a]=o)}),i}return{}},r.prototype.getShapeCfg=function(e,t){var n=this.get("styles");if(n){var i=e;return i.style=(0,De.__assign)((0,De.__assign)({},n),e.style),i}return e},r.prototype.getStateStyle=function(e){var t=this.get("styles");return t&&t[e]},r.prototype.getOriginStyle=function(){return this.get("originStyle")},r.prototype.getCurrentStatesStyle=function(){var e=this,t={},n=e.getStates();return n&&n.length?((0,ue.each)(e.getStates(),function(i){t=Object.assign(t,e.getStateStyle(i))}),t):this.get("originStyle")},r.prototype.setState=function(e,t){var n=this.get("states"),i=this.get("shapeFactory"),o=e,a=e;(0,ue.isString)(t)&&(o="".concat(e,":").concat(t),a="".concat(e,":"));var s=n;if((0,ue.isBoolean)(t)){var u=n.indexOf(a);if(t){if(u>-1)return;n.push(o)}else u>-1&&n.splice(u,1)}else if((0,ue.isString)(t)){var l=n.filter(function(h){return h.includes(a)});l.length>0&&this.clearStates(l),(s=s.filter(function(h){return!h.includes(a)})).push(o),this.set("states",s)}if(i){var c=this.get("model");i.setState(c.type,e,t,this)}},r.prototype.clearStates=function(e){var t=this,n=t.getStates(),i=t.get("shapeFactory"),a=t.get("model").type;e||(e=n),(0,ue.isString)(e)&&(e=[e]);var s=n.filter(function(u){return-1===e.indexOf(u)});t.set("states",s),e.forEach(function(u){i.setState(a,u,!1,t)})},r.prototype.setOptimize=function(e){this.optimize=e},r.prototype.getContainer=function(){return this.get("group")},r.prototype.getKeyShape=function(){return this.get("keyShape")},r.prototype.getModel=function(){return this.get("model")},r.prototype.getType=function(){return this.get("type")},r.prototype.getID=function(){return this.get("id")},r.prototype.isItem=function(){return!0},r.prototype.getStates=function(){return this.get("states")},r.prototype.hasState=function(e){return this.getStates().indexOf(e)>=0},r.prototype.refresh=function(e){var t=this.get("model");this.updatePosition(t),this.updateShape(e),this.afterUpdate(),this.clearCache()},r.prototype.getUpdateType=function(e){},r.prototype.update=function(e,t){void 0===t&&(t=void 0);var n=this.get("model");if("move"===t)this.updatePosition(e);else{var o=e.visible;n.visible!==o&&void 0!==o&&this.changeVisibility(o);var a={x:n.x,y:n.y};e.x=isNaN(+e.x)?n.x:+e.x,e.y=isNaN(+e.y)?n.y:+e.y;var s=this.get("styles");e.stateStyles&&((0,ue.mix)(s,e.stateStyles),delete e.stateStyles),Object.assign(n,e),(a.x!==e.x||a.y!==e.y)&&this.updatePosition(e),this.updateShape(t)}this.afterUpdate(),this.clearCache()},r.prototype.updateShape=function(e){var t=this.get("shapeFactory"),n=this.get("model"),i=n.type;if(t.shouldUpdate(i)&&i===this.get("currentShape")){var o=this.getShapeCfg(n,e);t.baseUpdate(i,o,this,e),"move"!==e&&this.setOriginStyle()}else this.draw();this.restoreStates(t,i)},r.prototype.updatePosition=function(e){var t=this.get("model"),n=isNaN(+e.x)?+t.x:+e.x,i=isNaN(+e.y)?+t.y:+e.y,o=this.get("group");if(isNaN(n)||isNaN(i))return!1;t.x=n,t.y=i;var a=o.getMatrix();return!(a&&a[6]===n&&a[7]===i||(o.resetMatrix(),LL(o,{x:n,y:i}),this.clearCache(),0))},r.prototype.getBBox=function(){var e=this.get(ZM);return e||(e=this.calculateBBox(),this.set(ZM,e)),e},r.prototype.getCanvasBBox=function(){var e=this.get(QM);return e||(e=this.calculateCanvasBBox(),this.set(QM,e)),e},r.prototype.toFront=function(){this.get("group").toFront()},r.prototype.toBack=function(){this.get("group").toBack()},r.prototype.show=function(){this.changeVisibility(!0)},r.prototype.hide=function(){this.changeVisibility(!1)},r.prototype.changeVisibility=function(e){var t=this.get("group");e?t.show():t.hide(),this.set("visible",e)},r.prototype.isVisible=function(){return this.get("visible")},r.prototype.enableCapture=function(e){var t=this.get("group");t&&t.set("capture",e)},r.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),t=this.get("group");e&&t.stopAnimate(),t.shapeMap={},this.clearCache(),t.remove(),this._cfg=null,this.destroyed=!0}},r}();const aF=fJ;var Ew={source:"start",target:"end"},Rf="Node",$v="Point",dJ=function(r){function e(){return null!==r&&r.apply(this,arguments)||this}return(0,De.__extends)(e,r),e.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},e.prototype.setEnd=function(t,n){var i=Ew[t]+$v,o=t+Rf,a=this.get(o);a&&!a.destroyed&&a.removeEdge(this),(0,ue.isPlainObject)(n)?(this.set(i,n),this.set(o,null)):n&&(n.addEdge(this),this.set(o,n),this.set(i,null))},e.prototype.getLinkPoint=function(t,n,i){var a=t+Rf,s=this.get(Ew[t]+$v);if(!s){var u=this.get(a),l=t+"Anchor",c=this.getPrePoint(t,i),f=n[l];(0,ue.isNil)(f)||(s=u.getLinkPointByAnchor(f)),s=s||u.getLinkPoint(c),(0,ue.isNil)(s.index)||this.set("".concat(t,"AnchorIndex"),s.index)}return s},e.prototype.getPrePoint=function(t,n){return n&&n.length?n["source"===t?0:n.length-1]:this.getEndPoint("source"===t?"target":"source")},e.prototype.getEndPoint=function(t){var i=Ew[t]+$v,o=this.get(t+Rf);return o&&!o.destroyed?o.get("model"):this.get(i)},e.prototype.getControlPointsByCenter=function(t){var n=this.getEndPoint("source"),i=this.getEndPoint("target");return this.get("shapeFactory").getControlPoints(t.type,{startPoint:n,endPoint:i})},e.prototype.getEndCenter=function(t){var i=Ew[t]+$v,o=this.get(t+Rf);if(o){var a=o.getBBox();return{x:a.centerX,y:a.centerY}}return this.get(i)},e.prototype.init=function(){r.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},e.prototype.getShapeCfg=function(t,n){var i=this,o=i.get("linkCenter"),a=n?.includes("move")?t:r.prototype.getShapeCfg.call(this,t);if(o)a.startPoint=i.getEndCenter("source"),a.endPoint=i.getEndCenter("target");else{var s=a.controlPoints||i.getControlPointsByCenter(a);a.startPoint=i.getLinkPoint("source",t,s),a.endPoint=i.getLinkPoint("target",t,s)}return a.sourceNode=i.get("sourceNode"),a.targetNode=i.get("targetNode"),a},e.prototype.getModel=function(){var t=this.get("model"),n=this.get("source".concat(Rf)),i=this.get("target".concat(Rf));return n?delete t["source".concat(Rf)]:t.source=this.get("start".concat($v)),i?delete t["target".concat(Rf)]:t.target=this.get("end".concat($v)),!(0,ue.isString)(t.source)&&!(0,ue.isPlainObject)(t.source)&&(t.source=t.source.getID()),!(0,ue.isString)(t.target)&&!(0,ue.isPlainObject)(t.target)&&(t.target=t.target.getID()),t},e.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},e.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},e.prototype.getSource=function(){return this.get("source")},e.prototype.getTarget=function(){return this.get("target")},e.prototype.updatePosition=function(){return!1},e.prototype.update=function(t,n){void 0===n&&(n=void 0);var i=this.get("model"),a=t.visible;i.visible!==a&&void 0!==a&&this.changeVisibility(a);var s=this.get("source"),u=this.get("target");if(s&&!s.destroyed&&u&&!u.destroyed){var l=this.get("styles");t.stateStyles&&((0,ue.mix)(l,t.stateStyles),delete t.stateStyles),Object.assign(i,t),this.updateShape(n),this.afterUpdate(),this.clearCache()}},e.prototype.destroy=function(){var t=this.get("source".concat(Rf)),n=this.get("target".concat(Rf));t&&!t.destroyed&&t.removeEdge(this),n&&!n.destroyed&&n.removeEdge(this),r.prototype.destroy.call(this)},e}(aF);const sF=dJ;var JM="anchorPointsCache",pJ=function(r){function e(){return null!==r&&r.apply(this,arguments)||this}return(0,De.__extends)(e,r),e.prototype.getNearestPoint=function(t,n){for(var i=0,o=t[0],a=Z1(t[0],n),s=0;s<t.length;s++){var u=t[s],l=Z1(u,n);l<a&&(o=u,a=l,i=s)}return o.anchorIndex=i,o},e.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getInEdges=function(){var t=this;return this.get("edges").filter(function(n){return n.get("target")===t})},e.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter(function(n){return n.get("source")===t})},e.prototype.getNeighbors=function(t){var n=this,i=this.get("edges");return"target"===t?i.filter(function(l){return l.getSource()===n}).map(function(u){return u.getTarget()}):"source"===t?i.filter(function(l){return l.getTarget()===n}).map(function(u){return u.getSource()}):i.map(function(l){return l.getSource()===n?l.getTarget():l.getSource()})},e.prototype.getLinkPointByAnchor=function(t){return this.getAnchorPoints()[t]},e.prototype.getLinkPoint=function(t){var a,s,i=this.get("keyShape").get("type"),o=this.get("type"),u=this.getBBox();"combo"===o?(a=u.centerX||(u.maxX+u.minX)/2,s=u.centerY||(u.maxY+u.minY)/2):(a=u.centerX,s=u.centerY);var c,l=this.getAnchorPoints();switch(i){case"circle":c=OL({x:a,y:s,r:u.width/2},t);break;case"ellipse":c=PL({x:a,y:s,rx:u.width/2,ry:u.height/2},t);break;default:c=IL(u,t)}var f=c;return l.length&&(f||(f=t),f=this.getNearestPoint(l,f)),f||(f={x:a,y:s}),f},e.prototype.getAnchorPoints=function(){var t=this.get(JM);if(!t){t=[];var n=this.get("shapeFactory"),i=this.getBBox(),o=this.get("model"),a=this.getShapeCfg(o),u=n.getAnchorPoints(o.type,a)||[];(0,ue.each)(u,function(l,c){t.push({x:i.minX+l[0]*i.width,y:i.minY+l[1]*i.height,anchorIndex:c})}),this.set(JM,t)}return t},e.prototype.addEdge=function(t){this.get("edges").push(t)},e.prototype.lock=function(){this.set("locked",!0)},e.prototype.unlock=function(){this.set("locked",!1)},e.prototype.hasLocked=function(){return this.get("locked")},e.prototype.removeEdge=function(t){var n=this.getEdges(),i=n.indexOf(t);i>-1&&n.splice(i,1)},e.prototype.clearCache=function(){this.set("bboxCache",null),this.set(JM,null)},e.prototype.getUpdateType=function(t){var n,i,o,a,s;if(t){var u=!(0,ue.isNil)(t.x),l=!(0,ue.isNil)(t.y),c=Object.keys(t);return 1===c.length&&(u||l)||2===c.length&&u&&l?"move":(0,ue.isNumber)(t.x)||(0,ue.isNumber)(t.y)||t.type||t.anchorPoints||t.size||t?.style&&((null===(n=t?.style)||void 0===n?void 0:n.r)||(null===(i=t?.style)||void 0===i?void 0:i.width)||(null===(o=t?.style)||void 0===o?void 0:o.height)||(null===(a=t?.style)||void 0===a?void 0:a.rx)||(null===(s=t?.style)||void 0===s?void 0:s.ry))?"bbox|label":c.includes("label")||c.includes("labelCfg")?"style|label":"style"}},e.prototype.setState=function(t,n){var i=this;this.optimize?r.prototype.setState.call(this,t,n):this.runWithBBoxAffected(function(){return r.prototype.setState.call(i,t,n)})},e.prototype.clearStates=function(t){var n=this;this.optimize?r.prototype.clearStates.call(this,t):this.runWithBBoxAffected(function(){return r.prototype.clearStates.call(n,t)})},e.prototype.runWithBBoxAffected=function(t){var n=["r","width","height","rx","ry","lineWidth"],i=this.getKeyShape().attr(),o={};Object.keys(this.getKeyShape().attr()).forEach(function(l){n.includes(l)&&(o[l]=i[l])}),t();for(var a=this.getKeyShape().attr(),s=0;s<n.length;s++){var u=n[s];if(a[u]!==o[u]){this.clearCache(),this.getEdges().forEach(function(l){return l.refresh()});break}}},e}(aF);const eC=pJ;var uF="bboxCache",lF="bboxCanvasCache",cF="sizeCache",fF="anchorPointsCache",vJ=function(r){function e(){return null!==r&&r.apply(this,arguments)||this}return(0,De.__extends)(e,r),e.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},e.prototype.getShapeCfg=function(t){var n=this.get("styles"),i=this.get("bbox");if(n&&i){var o=t,a=(0,ue.isNumber)(t.size)?[t.size,t.size]:t.size,s=(0,ue.isNumber)(t.fixSize)?[t.fixSize,t.fixSize]:t.fixSize,u=a||s||jr.defaultCombo.size,l={r:(Math.max(i.width,i.height)||Math.max(u[0],u[1]))/2,width:i.width||u[0],height:i.height||u[1]};o.style=(0,De.__assign)((0,De.__assign)((0,De.__assign)({},n),t.style),l);var c=t.padding||jr.defaultCombo.padding;return(0,ue.isNumber)(c)?(l.r+=c,l.width+=2*c,l.height+=2*c):(l.r=l.r+Math.max.apply(Math,c),l.width+=c[1]+c[3]||2*c[1],l.height+=c[0]+c[2]||2*c[0]),this.set(cF,l),o}return t},e.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var t=this.get("keyShape"),n=this.get("group"),i=tw(t,n);i.centerX=(i.minX+i.maxX)/2,i.centerY=(i.minY+i.maxY)/2;var o=this.get(uF)||{},a=o.x,s=o.x;return i.width=i.maxX-i.minX,i.height=i.maxY-i.minY,i.centerX=(i.minX+i.maxX)/2,i.centerY=(i.minY+i.maxY)/2,i.x=i.minX,i.y=i.minY,(i.x!==a||i.y!==s)&&this.set(fF,null),i}},e.prototype.getChildren=function(){return{nodes:this.getNodes(),combos:this.getCombos()}},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.addChild=function(t){switch(t.getType()){case"node":this.addNode(t);break;case"combo":this.addCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.addCombo=function(t){return this.get("combos").push(t),!0},e.prototype.addNode=function(t){return this.get("nodes").push(t),!0},e.prototype.removeChild=function(t){switch(t.getType()){case"node":this.removeNode(t);break;case"combo":this.removeCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.removeCombo=function(t){if(t){var n=this.getCombos(),i=n.indexOf(t);return i>-1&&(n.splice(i,1),!0)}},e.prototype.removeNode=function(t){if(t){var n=this.getNodes(),i=n.indexOf(t);return i>-1&&(n.splice(i,1),!0)}},e.prototype.getUpdateType=function(t){},e.prototype.getBBox=function(){return this.set(lF,null),this.calculateCanvasBBox()},e.prototype.clearCache=function(){this.set(uF,null),this.set(lF,null),this.set(fF,null)},e.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),n=this.get("group");t&&n.stopAnimate(),n.shapeMap={},this.clearCache(),this.set(cF,null),this.set("bbox",null),n.remove(),this._cfg=null,this.destroyed=!0}},e}(eC);const hF=vJ;var _w="node",Sw="edge",cy="combo",Oh="stateStyles",yJ=function(){function r(e){var t=this;this.edgeToBeUpdateMap={},this.throttleRefresh=(0,ue.throttle)(function(n){var i=t.graph;if(i&&!i.get("destroyed")){var o=t.edgeToBeUpdateMap;if(o){var a=Object.values(o);!a.length||(a.forEach(function(s){var u=s.edge;if(u&&!u.destroyed){var l=u.getSource(),c=u.getTarget();!l||l.destroyed||!c||c.destroyed||u.refresh(s.updateType)}}),t.edgeToBeUpdateMap={})}}},16,{trailing:!0,leading:!0}),this.graph=e,this.destroyed=!1}return r.prototype.addItem=function(e,t){var n=this.graph,i="vedge"===e?Sw:e,o=n.get("".concat(i,"Group"))||n.get("group"),a=(0,ue.upperFirst)(i),s=null,u=n.get(i+(0,ue.upperFirst)(Oh))||{},l=n.get("default"+a);t[Oh]&&(u=t[Oh]),l&&(0,ue.each)(l,function(pe,Ee){t[Ee]=(0,ue.isObject)(pe)&&!(0,ue.isArray)(pe)?(0,ue.deepMix)({},pe,t[Ee]):(0,ue.isArray)(pe)?t[Ee]||(0,ue.clone)(l[Ee]):t[Ee]||l[Ee]});var c=n.get(i+"Mapper");if(c){var f=c(t);f[Oh]&&(u=f[Oh],delete f[Oh]),(0,ue.each)(f,function(pe,Ee){t[Ee]=(0,ue.isObject)(pe)&&!(0,ue.isArray)(pe)?(0,ue.deepMix)({},t[Ee],pe):f[Ee]||t[Ee]})}if(n.emit("beforeadditem",{type:e,model:t}),e===Sw||"vedge"===e){var h=void 0,d=void 0;if(d=t.target,(h=t.source)&&(0,ue.isString)(h)&&(h=n.findById(h)),d&&(0,ue.isString)(d)&&(d=n.findById(d)),!h||!d)return void console.warn("The source or target node of edge ".concat(t.id," does not exist!"));h.getType&&"combo"===h.getType()&&(t.isComboEdge=!0),d.getType&&"combo"===d.getType()&&(t.isComboEdge=!0),s=new sF({model:t,source:h,target:d,styles:u,linkCenter:n.get("linkCenter"),group:o.addGroup()})}else if(e===_w)s=new eC({model:t,styles:u,group:o.addGroup()});else if(e===cy){var g=t.children,m=nw(g,n),_=void 0,D=void 0;isNaN(m.x)?isNaN(t.x)&&(_=100*Math.random()):_=m.x,isNaN(m.y)?isNaN(t.y)&&(D=100*Math.random()):D=m.y,isNaN(t.x)||isNaN(t.y)?(t.x=_,t.y=D):this.updateComboSucceeds(t.id,t.x-_,t.y-D,g);var Z=o.addGroup();Z.setZIndex(t.depth),s=new hF({model:t,styles:u,animate:n.get("animate"),bbox:t.collapsed?nw([],n):m,group:Z}),!t.collapsed&&"circle"===s.getKeyShape().get("type")&&(m.width=Math.hypot(m.height,m.width),m.height=m.width,s.set("bbox",m),s.refresh());var le=s.getModel();(g||[]).forEach(function(pe){var Ee=n.findById(pe.id);s.addChild(Ee),pe.depth=le.depth+2})}if(s)return s.setOptimize(n.getNodes().length>n.get("optimizeThreshold")),n.get("".concat(e,"s")).push(s),n.get("itemMap")[s.get("id")]=s,n.emit("afteradditem",{item:s,model:t}),s},r.prototype.updateItem=function(e,t){var i,o,n=this,a=this.graph;if((0,ue.isString)(e)&&(e=a.findById(e)),e&&!e.destroyed){var s="";e.getType&&(s=e.getType());var u=a.get(s+"Mapper"),l=e.getModel(),c=l.x,f=l.y,h=e.getUpdateType(t);if(u){var g=u((0,ue.deepMix)({},l,t)),m=(0,ue.deepMix)({},l,g,t);g[Oh]&&(e.set("styles",m[Oh]),delete m[Oh]),(0,ue.each)(m,function(Ue,at){t[at]=Ue})}else(0,ue.each)(t,function(Ue,at){l[at]&&(0,ue.isObject)(Ue)&&!(0,ue.isArray)(Ue)&&(t[at]=(0,De.__assign)((0,De.__assign)({},l[at]),t[at]))});if(a.emit("beforeupdateitem",{item:e,cfg:t}),s===Sw){if(t.source){var _=t.source;(0,ue.isString)(_)&&(_=a.findById(_)),e.setSource(_)}if(t.target){var D=t.target;(0,ue.isString)(D)&&(D=a.findById(D)),e.setTarget(D)}e.update(t)}else if(s===_w){e.update(t,h);var L=e.getEdges();"move"===h?(0,ue.each)(L,function(Ue){n.edgeToBeUpdateMap[Ue.getID()]={edge:Ue,updateType:h},n.throttleRefresh()}):h?.includes("bbox")&&(0,ue.each)(L,function(Ue){Ue.refresh(h)})}else if(s===cy){e.update(t,h),isNaN(t.x)&&isNaN(t.y)||this.updateComboSucceeds(l.id,t.x-c||0,t.y-f||0);var le=e.getEdges();if((h?.includes("bbox")||"move"===h)&&s===cy){var Ee=e.get("shapeFactory");(void 0===l.animate||void 0===t.animate?null===(o=null===(i=Ee[l.type||"circle"])||void 0===i?void 0:i.options)||void 0===o?void 0:o.animate:l.animate||t.animate)?setTimeout(function(){if(e&&!e.destroyed){var Ue=e.getKeyShape();!Ue||Ue.destroyed||(0,ue.each)(le,function(at){at&&!at.destroyed&&at.refresh()})}},201):(0,ue.each)(le,function(Ue){Ue.refresh()})}}e.setOptimize(a.getNodes().length>a.get("optimizeThreshold")),a.emit("afterupdateitem",{item:e,cfg:t})}},r.prototype.updateCombo=function(e,t,n){var o,a,i=this,s=this.graph;if((0,ue.isString)(e)&&(e=s.findById(e)),e&&!e.destroyed){var u=e.getModel(),l=nw(t,s,e),c=l.x,f=l.y;e.set("bbox",l);var h=c,d=f;n?(h=isNaN(u.x)?c:u.x,d=isNaN(u.y)?f:u.y):(h=isNaN(c)?u.x:c,d=isNaN(f)?u.y:f),e.update({x:h,y:d});var g=e.get("shapeFactory");(void 0===u.animate?null===(a=null===(o=g[u.type||"circle"])||void 0===o?void 0:o.options)||void 0===a?void 0:a.animate:u.animate)?setTimeout(function(){if(e&&!e.destroyed){var D=e.getKeyShape();!D||D.destroyed||(e.getShapeCfg(u),i.updateComboEdges(e))}},201):this.updateComboEdges(e)}},r.prototype.updateComboEdges=function(e){for(var t,n,i=e.getEdges()||[],o=0;o<i.length;o++){var a=i[o];!a?.destroyed&&(null===(t=a?.getSource())||void 0===t||!t.destroyed)&&(null===(n=a?.getTarget())||void 0===n||!n.destroyed)&&a.refresh()}},r.prototype.collapseCombo=function(e,t){void 0===t&&(t=!0);var n=this.graph;(0,ue.isString)(e)&&(e=n.findById(e));var i=e.getChildren();i.nodes.forEach(function(o){n.hideItem(o,t)}),i.combos.forEach(function(o){n.hideItem(o,t)})},r.prototype.updateComboSucceeds=function(e,t,n,i){var o=this;void 0===i&&(i=[]);var a=this.graph;if(t||n){var s=i;s?.length||a.get("comboTrees")?.forEach(function(l){ou(l,function(c){return c.id!==e||(s=c.children,!1)})}),s?.forEach(function(l){var c=a.findById(l.id);if(c){var f=c.getModel();o.updateItem(l.id,{x:(f.x||0)+t,y:(f.y||0)+n})}})}},r.prototype.expandCombo=function(e,t){void 0===t&&(t=!0);var n=this.graph;(0,ue.isString)(e)&&(e=n.findById(e));var i=e.getChildren(),o=new Set;i.nodes.forEach(function(a){n.showItem(a,t),a.getEdges().forEach(function(s){return o.add(s)})}),i.combos.forEach(function(a){a.getModel().collapsed?a.show():n.showItem(a,t),a.getEdges().forEach(function(s){return o.add(s)})}),o.forEach(function(a){return a.refresh()})},r.prototype.removeItem=function(e){var t=this,n=this.graph;if((0,ue.isString)(e)&&(e=n.findById(e)),e&&!e.destroyed){var i=(0,ue.clone)(e.getModel()),o="";e.getType&&(o=e.getType()),n.emit("beforeremoveitem",{item:i,type:o});var a=n.get("".concat(o,"s")),s=a.indexOf(e);if(s>-1&&a.splice(s,1),o===Sw){var u=n.get("v".concat(o,"s")),l=u.indexOf(e);l>-1&&u.splice(l,1)}var c=e.get("id");delete n.get("itemMap")[c];var h=n.get("comboTrees"),d=e.get("id");if(o===_w){var g=e.getModel().comboId;if(h&&g){var m=h,_=!1;h.forEach(function(pe){_||ou(pe,function(Ee){if(Ee.id===d&&m){var Re=m.indexOf(Ee);return m.splice(Re,1),_=!0,!1}return m=Ee.children,!0})})}for(var L=(D=e.getEdges()).length-1;L>=0;L--)n.removeItem(D[L],!1);g&&n.updateCombo(g)}else if(o===cy){var Z,D,O=e.getModel().parentId,le=!1;for((h||[]).forEach(function(Ee){le||ou(Ee,function(Re){return Re.id!==d||(Z=Re,le=!0,!1)})}),Z.removed=!0,Z&&Z.children&&Z.children.forEach(function(Ee){t.removeItem(Ee.id)}),L=(D=e.getEdges()).length;L>=0;L--)n.removeItem(D[L],!1);O&&n.updateCombo(O)}e.destroy(),n.emit("afterremoveitem",{item:i,type:o})}},r.prototype.setItemState=function(e,t,n){var i=this.graph,o=t;(0,ue.isString)(n)&&(o="".concat(t,":").concat(n)),!(e.hasState(o)===n&&n||(0,ue.isString)(n)&&e.hasState(o))&&(i.emit("beforeitemstatechange",{item:e,state:o,enabled:n}),e.setState(t,n),i.autoPaint(),i.emit("afteritemstatechange",{item:e,state:o,enabled:n}))},r.prototype.priorityState=function(e,t){var n=this.graph,i=e;(0,ue.isString)(e)&&(i=n.findById(e)),this.setItemState(i,t,!1),this.setItemState(i,t,!0)},r.prototype.clearItemStates=function(e,t){var n=this.graph;(0,ue.isString)(e)&&(e=n.findById(e)),n.emit("beforeitemstatesclear",{item:e,states:t}),e.clearStates(t),n.emit("afteritemstatesclear",{item:e,states:t})},r.prototype.refreshItem=function(e){var t=this.graph;(0,ue.isString)(e)&&(e=t.findById(e)),t.emit("beforeitemrefresh",{item:e}),e.refresh(),t.emit("afteritemrefresh",{item:e})},r.prototype.addCombos=function(e,t){var n=this,i=this.graph;(e||[]).forEach(function(a){Pf(a,function(s){var u;return t.forEach(function(l){l.id===s.id&&(l.children=s.children,l.depth=s.depth,u=l)}),u&&n.addItem("combo",u),!0})});var o=i.get("comboGroup");o&&o.sort()},r.prototype.changeItemVisibility=function(e,t){var n=this,i=this.graph;if((0,ue.isString)(e)&&(e=i.findById(e)),e){if(i.emit("beforeitemvisibilitychange",{item:e,visible:t}),e.changeVisibility(t),e.getType&&e.getType()===_w){var o=e.getEdges();(0,ue.each)(o,function(c){t&&(!c.get("source").isVisible()||!c.get("target").isVisible())||n.changeItemVisibility(c,t)})}else if(e.getType&&e.getType()===cy){var a=i.get("comboTrees"),s=e.get("id"),u=[],l=!1;(a||[]).forEach(function(f){l||!f.children||0===f.children.length||ou(f,function(h){return h.id!==s||(u=h.children,l=!0,!1)})}),u&&(!t||t&&!e.getModel().collapsed)&&u.forEach(function(f){var h=i.findById(f.id);n.changeItemVisibility(h,t)}),o=e.getEdges(),(0,ue.each)(o,function(f){t&&(!f.get("source").isVisible()||!f.get("target").isVisible())||n.changeItemVisibility(f,t)})}return i.emit("afteritemvisibilitychange",{item:e,visible:t}),e}console.warn("The item to be shown or hidden does not exist!")},r.prototype.destroy=function(){this.graph=null,this.destroyed=!0},r}();const bJ=yJ;var wJ=function(){function r(e){this.graph=e,this.destroyed=!1}return r.prototype.updateState=function(e,t,n){var i=this.graph.get("states"),o=t;(0,ue.isString)(n)&&(o="".concat(t,":").concat(n)),i[o]||(i[o]=[]),n?i[o].push(e):i[o]=i[o].filter(function(a){return a!==e}),this.graph.set("states",i),this.graph.emit("graphstatechange",{states:i})},r.prototype.updateStates=function(e,t,n){var i=this.graph.get("states");((0,ue.isString)(t)?[t]:t).forEach(function(a){var s=a;i[s]||(i[s]=[]),(0,ue.isString)(n)&&(s="".concat(a,":").concat(n)),n?i[s].push(e):i[s]=i[s].filter(function(u){return u!==e})}),this.graph.set("states",i),this.graph.emit("graphstatechange",{states:t})},r.prototype.destroy=function(){this.graph=null,this.destroyed=!0},r}();const xJ=wJ;var EJ=function(e,t){return e&&t?e.replace(/\\?\{([^{}]+)\}/g,function(n,i){if("\\"===n.charAt(0))return n.slice(1);var o=t[i];return 0===o&&(o="0"),o||""}):e},pF=function(e){var t=[];if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));for(var n=0,i=e;n<i.length;n++){var o=i[n],s=o.y;t.push(o.x),t.push(s)}var u=jR(t);return u.unshift(["M",e[0].x,e[0].y]),u},Mw=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=0);var o={x:(1-n)*e.x+n*t.x,y:(1-n)*e.y+n*t.y},a=[0,0];Kr.normalize(a,[t.x-e.x,t.y-e.y]),(!a||!a[0]&&!a[1])&&(a=[0,0]);var s=[-a[1]*i,a[0]*i];return o.x+=s[0],o.y+=s[1],o},_J=function(e,t){var n=e.length;if(!n)return"";for(var i="",a=0;a<n;a++)i+=EJ(0===a?"M{x} {y}":"L{x} {y}",e[a]);return t&&(i+="Z"),i},tC=function(e){var t=[];return e.forEach(function(n){if("A"!==n[0])for(var o=1;o<n.length;o+=2)t.push([n[o],n[o+1]]);else{var a=n.length;t.push([n[a-2],n[a-1]])}}),t},nC=function(e){if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));var t=e[0],n=e[1],i=e[e.length-1],o=e[e.length-2];e.unshift(i),e.unshift(o),e.push(t),e.push(n);for(var a=[],s=1;s<e.length-2;s+=1){var c=e[s].x,f=e[s].y,h=e[s+1].x,d=e[s+1].y;a.push(["C",c+(h-e[s-1].x)/6,f+(d-e[s-1].y)/6,h-((s!==e.length-2?e[s+2].x:h)-c)/6,d-((s!==e.length-2?e[s+2].y:d)-f)/6,h,d])}return a.unshift(["M",i.x,i.y]),a},vF=function(e,t){return Kr.scale([0,0],Kr.normalize([0,0],e),t)},mF=function(e,t){var n=[e[1]-t[1],t[0]-e[0]],i=Math.sqrt(n[0]*n[0]+n[1]*n[1]);if(0===i)throw new Error("p0 should not be equal to p1");return[n[0]/i,n[1]/i]},yF=function(e,t){return[t[0]-e[0],t[1]-e[1]]};function rC(r,e){var f,h,d;if(!r||r.length<1)return"";if(1===r.length)return d=[(f=r)[0][0],f[0][1]+e],"M ".concat(h=[f[0][0],f[0][1]-e]," A ").concat(e,",").concat(e,",0,0,0,").concat(d," A ").concat(e,",").concat(e,",0,0,0,").concat(h);if(2===r.length)return function(f){var h=Kr.scale([0,0],mF(f[0],f[1]),e),d=Kr.scale([0,0],h,-1),g=Kr.add([0,0],f[0],h),m=Kr.add([0,0],f[1],h),_=Kr.add([0,0],f[1],d),D=Kr.add([0,0],f[0],d);return"M ".concat(g," L ").concat(m," A ").concat([e,e,"0,0,0",_].join(",")," L ").concat(D," A ").concat([e,e,"0,0,0",g].join(","))}(r);for(var i=new Array(r.length),o=0;o<i.length;++o){var a=0===o?r[r.length-1]:r[o-1],s=r[o],u=Kr.scale([0,0],mF(a,s),e);i[o]=[Kr.add([0,0],a,u),Kr.add([0,0],s,u)]}var l="A ".concat([e,e,"0,0,0,"].join(","));return i=i.map(function(c,f){var h="";return 0===f&&(h="M ".concat(i[i.length-1][1]," ")),h+"".concat(l+c[0]," L ").concat(c[1])}),i.join(" ")}function bF(r,e){var c,f,h,t=r.length;if(!r||t<1)return"";if(1===t)return h=[(c=r)[0][0],c[0][1]+e],"M ".concat(f=[c[0][0],c[0][1]-e]," A ").concat([e,e,"0,0,0",h].join(",")," A ").concat([e,e,"0,0,0",f].join(","));if(2===t)return function(c){var f=yF(c[0],c[1]),h=vF(f,e),d=Kr.add([0,0],c[0],Kr.scale([0,0],h,-1)),g=Kr.add([0,0],c[1],h),m=1.2*e,_=vF(Kr.normalize([0,0],f),m),D=Kr.scale([0,0],_,-1),L=Kr.add([0,0],d,D),O=Kr.add([0,0],g,D),Z=Kr.add([0,0],d,_);return"M ".concat(d," C ").concat([L,O,g].join(",")," S ").concat([Z,d].join(",")," Z")}(r);for(var o=r.map(function(l,c){return{p:l,v:Kr.normalize([0,0],yF(l,r[(c+1)%t]))}}),a=0;a<o.length;++a){var u=Kr.normalize([0,0],Kr.add([0,0],o[a>0?a-1:t-1].v,Kr.scale([0,0],o[a].v,-1)));o[a].p=Kr.add([0,0],o[a].p,Kr.scale([0,0],u,e))}return o.map(function(l){var c=l.p;return{x:c[0],y:c[1]}})}var SJ=function(e,t){for(var n=[],i=0;i<5;i++){var o=Math.cos((18+72*i)/180*Math.PI)*e,a=Math.sin((18+72*i)/180*Math.PI)*e,s=Math.cos((54+72*i)/180*Math.PI)*t,u=Math.sin((54+72*i)/180*Math.PI)*t;n.push(0===i?["M",o,-a]:["L",o,-a]),n.push(["L",s,-u])}return n.push(["Z"]),n},wF=function(e,t,n){return(e.y-n.y)*(t.x-n.x)-(e.x-n.x)*(t.y-n.y)},xF=function(e){var t=e.map(function(f){return{x:f.getModel().x,y:f.getModel().y}});t.sort(function(f,h){return f.x===h.x?f.y-h.y:f.x-h.x});for(var n={},i=t.length-1;i>=0;i--){var o=t[i],a=o.x,s=o.y;n["".concat(a,"-").concat(s)]&&t.splice(i,1),n["".concat(a,"-").concat(s)]=!0}if(1===t.length)return t;var u=[];for(i=0;i<t.length;i++){for(;u.length>=2&&wF(u[u.length-2],u[u.length-1],t[i])<=0;)u.pop();u.push(t[i])}var l=[];for(i=t.length-1;i>=0;i--){for(;l.length>=2&&wF(l[l.length-2],l[l.length-1],t[i])<=0;)l.pop();l.push(t[i])}return l.pop(),u.pop(),u.concat(l)},MJ={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function CJ(r,e,t){var n=!1,i=function(u,l){return e.cells[u+l*e.width]},o=function(u,l){var c=0;return i(u-1,l-1)>=t&&(c+=1),i(u,l-1)>t&&(c+=2),i(u-1,l)>t&&(c+=4),i(u,l)>t&&(c+=8),c},a=function(u,l){for(var h,d,c=u,f=l,g=0;g<e.width*e.height;g++){if(h=c,d=f,r.findIndex(function(_){return _.x===c&&_.y===f})>-1){if(r[0].x===c&&r[0].y===f)return!0}else r.push({x:c,y:f});var m=o(c,f);switch(m){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:c++;break;case 12:case 14:case 4:c--;break;case 6:0===h&&(-1===d?c-=1:c+=1);break;case 1:case 13:case 5:f--;break;case 9:1===h&&(0===d?f-=1:f+=1);break;case 10:case 8:case 11:f++;break;default:return console.warn("Marching squares invalid state: ".concat(m)),!0}}};this.march=function(){for(var s=0;s<e.width&&!n;s+=1)for(var u=0;u<e.height&&!n;u+=1)i(s,u)>t&&15!==o(s,u)&&(n=a(s,u));return n}}var EF=function(e,t){var n=Number.POSITIVE_INFINITY,i=null;return e.forEach(function(o){var a=iM(o,t);a>=0&&a<n&&(i=o,n=a)}),i};var OJ=function(e,t,n){var i=Object.assign(MJ,n),o=BL(e.map(function(L){return{x:L.getModel().x,y:L.getModel().y}}));e=e.sort(function(L,O){return Q1({x:L.getModel().x,y:L.getModel().y},o)-Q1({x:O.getModel().x,y:O.getModel().y},o)});var a=[],s=[];e.forEach(function(L){(function IJ(r,e,t,n,i){var o=function(e,t,n){var i=null,o=Number.POSITIVE_INFINITY;return t.forEach(function(a){var s={x:e.getModel().x,y:e.getModel().y},u={x:a.getModel().x,y:a.getModel().y},l=Q1(s,u),c=new Xg(s.x,s.y,u.x,u.y),f=n.reduce(function(h,d){return iM(d,c)>0?h+1:h},0);l*Math.pow(f+1,2)<o&&(i=a,o=l*Math.pow(f+1,2))}),i}(r,t,e);if(null===o)return[];var u=function(e,t,n,i){var o=[],a=[];a.push(e);for(var s=!0,u=0,l=function(d,g){var m=!1;return g.forEach(function(_){m||(oM(d,{x:_.x1,y:_.y1})||oM(d,{x:_.x2,y:_.y2}))&&(m=!0)}),m},c=function(d,g){for(var m=0,_=g;m<_.length;m++){var L=_[m].getBBox();if(Xm([[L.x,L.y],[L.x+L.width,L.y],[L.x,L.y+L.height],[L.x+L.width,L.y+L.height]],d.x,d.y))return!0}return!1};s&&u<n;){s=!1;for(var f=function(){var d=a.pop(),g=EF(t,d);if(g){var m=FL(g,d),_=m[0];if(2===m[1]){var L=function(Z){for(var le=i,pe=_F(g,le,_,Z),Ee=l(pe,a)||l(pe,o),Re=c(pe,t);!Ee&&Re&&le>=1;)pe=_F(g,le/=1.5,_,Z),Ee=l(pe,a)||l(pe,o),Re=c(pe,t);pe&&!Ee&&(!Z||!Re)&&(a.push(new Xg(d.x1,d.y1,pe.x,pe.y)),a.push(new Xg(pe.x,pe.y,d.x2,d.y2)),s=!0)};L(!0),s||L(!1)}}s||o.push(d),u+=1};!s&&a.length;)f()}for(;a.length;)o.push(a.pop());return o}(new Xg(r.getModel().x,r.getModel().y,o.getModel().x,o.getModel().y),e,n,i);return function(f){for(var h=[];f.length>0;){var d=f.pop();if(0===f.length){h.push(d);break}var g=f.pop(),m=new Xg(d.x1,d.y1,g.x2,g.y2);EF(e,m)?(h.push(d),f.push(g)):f.push(m)}return h}(u)})(L,t,a,i.maxRoutingIterations,i.morphBuffer).forEach(function(Z){s.push(Z)}),a.push(L)});for(var u=function PJ(r,e,t){var n={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},i=[];r.forEach(function(u){i.push(u.getBBox())}),e.forEach(function(u){i.push(u.getBBox())});for(var o=0,a=i;o<a.length;o++){var s=a[o];n.minX=(s.minX<n.minX?s.minX:n.minX)-t,n.minY=(s.minY<n.minY?s.minY:n.minY)-t,n.maxX=(s.maxX>n.maxX?s.maxX:n.maxX)+t,n.maxY=(s.maxY>n.maxY?s.maxY:n.maxY)+t}return n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.x=n.minX,n.y=n.minY,n}(e,s,i.nodeR0),l=function(e,t,n){var i=Math.ceil(e/n),o=Math.ceil(t/n);return{cells:new Float32Array(Math.max(0,i*o)).fill(0),width:i,height:o}}(u.width,u.height,i.pixelGroupSize),c=[],f=[],h=0;h<i.maxMarchingIterations;h++)if(NJ(e,t,s,u,l,i),f=[],new CJ(c=[],l,i.threshold).march()){var d=c.map(function(L){return{x:Math.round(L.x*i.pixelGroupSize+u.minX),y:Math.round(L.y*i.pixelGroupSize+u.minY)}});if(d){var g=d.length;if(i.skip>1)for(g=Math.floor(d.length/i.skip);g<3&&i.skip>1;)i.skip-=1,g=Math.floor(d.length/i.skip);for(var m=0,_=0;_<g;_+=1,m+=i.skip)f.push({x:d[m].x,y:d[m].y})}if(f&&function(){for(var O=0,Z=e;O<Z.length;O++){var le=Z[O],pe=f.map(function(Ee){return[Ee.x,Ee.y]});if(!Xm(pe,le.getBBox().centerX,le.getBBox().centerY))return!1}return!0}())return f;if(i.threshold*=.9,h<=.5*i.maxMarchingIterations)i.memberInfluenceFactor*=1.2,i.edgeInfluenceFactor*=1.2;else{if(!(0!==i.nonMemberInfluenceFactor&&t.length>0))break;i.nonMemberInfluenceFactor*=.8}}return f};function NJ(r,e,t,n,i,o){function a(d,g){var m=Math.floor((d-g)/o.pixelGroupSize);return m<0?0:m}function s(d,g){return d*o.pixelGroupSize+g}var u=(o.nodeR0-o.nodeR1)*(o.nodeR0-o.nodeR1),l=(o.edgeR0-o.edgeR1)*(o.edgeR0-o.edgeR1),c=function(g,m){return[Math.min(a(g.minX,m+n.minX),i.width),Math.min(a(g.minY,m+n.minY),i.height),Math.min(a(g.maxX,-m+n.minX),i.width),Math.min(a(g.maxY,-m+n.minY),i.height)]},f=function(g,m){for(var _=g.getBBox(),D=c(_,o.nodeR1),L=D[0],Z=D[2],le=D[3],pe=D[1];pe<le;pe+=1)for(var Ee=L;Ee<Z;Ee+=1)if(!(m<0&&i[Ee+pe*i.width]<=0)){var Re=s(Ee,n.minX),Ve=s(pe,n.minY),Ue=zL({x:Re,y:Ve},{x:_.minX,y:_.minY,width:_.width,height:_.height});if(Ue<Math.pow(o.nodeR1,2)){var at=Math.sqrt(Ue)-o.nodeR1;i.cells[Ee+pe*i.width]+=m*at*at}}};o.nodeInfluenceFactor&&r.forEach(function(d){f(d,o.nodeInfluenceFactor/u)}),o.edgeInfluenceFactor&&t.forEach(function(d){!function(g,m){for(var _=g.getBBox(),D=c(_,o.edgeR1),L=D[0],Z=D[2],le=D[3],pe=D[1];pe<le;pe+=1)for(var Ee=L;Ee<Z;Ee+=1)if(!(m<0&&i.cells[Ee+pe*i.width]<=0)){var Re=s(Ee,n.minX),Ve=s(pe,n.minY),Ue=jL({x:Re,y:Ve},g);if(Ue<Math.pow(o.edgeR1,2)){var at=Math.sqrt(Ue)-o.edgeR1;i.cells[Ee+pe*i.width]+=m*at*at}}}(d,o.edgeInfluenceFactor/l)}),o.negativeNodeInfluenceFactor&&e.forEach(function(d){f(d,o.negativeNodeInfluenceFactor/u)})}function _F(r,e,t,n){var i=r.getBBox(),o=t[0],a=t[1],s=t[2],u=t[3],l={topLeft:{x:i.minX-e,y:i.minY-e},topRight:{x:i.maxX+e,y:i.minY-e},bottomLeft:{x:i.minX-e,y:i.maxY+e},bottomRight:{x:i.maxX+e,y:i.maxY+e}},c=i.height*i.width;function f(g,m){return i.width*(.5*(g.y-i.minY+(m.y-i.minY)))}if(a)return o?n?l.topLeft:l.bottomRight:s?n?l.bottomLeft:l.topRight:f(a,u)<.5*c?a.y>u.y?n?l.topLeft:l.bottomRight:n?l.topRight:l.bottomLeft:a.y<u.y?n?l.bottomLeft:l.topRight:n?l.bottomRight:l.topLeft;if(u){if(o)return n?l.topRight:l.bottomLeft;if(s)return n?l.bottomRight:l.topLeft}return f(o,s)<.5*c?o.x>s.x?n?l.topLeft:l.bottomRight:n?l.bottomLeft:l.topRight:o.x<s.x?n?l.topRight:l.bottomLeft:n?l.bottomRight:l.topLeft}var LJ=function(){function r(e,t){this.cfg=(0,ue.deepMix)(this.getDefaultCfg(),t),this.graph=e,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(n){return(0,ue.isString)(n)?e.findById(n):n}),this.nonMembers=this.cfg.nonMembers.map(function(n){return(0,ue.isString)(n)?e.findById(n):n}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return r.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},r.prototype.setPadding=function(){var e=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+e:10+e,this.cfg.bubbleCfg={nodeR0:this.padding-e,nodeR1:this.padding-e,morphBuffer:this.padding-e}},r.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),"round-convex"!==this.type&&"smooth-convex"!==this.type&&"bubble"!==this.type&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},r.prototype.calcPath=function(e,t){var n,i,o;switch(this.type){case"round-convex":i=GM(o=rC((n=xF(e)).map(function(a){return[a.x,a.y]}),this.padding));break;case"smooth-convex":2===(n=xF(e)).length?i=GM(o=rC(n.map(function(a){return[a.x,a.y]}),this.padding)):n.length>2&&(o=bF(n.map(function(a){return[a.x,a.y]}),this.padding),i=nC(o));break;case"bubble":i=(n=OJ(e,t,this.cfg.bubbleCfg)).length>=2&&nC(n)}return i},r.prototype.render=function(){this.group.addShape("path",{attrs:(0,De.__assign)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},r.prototype.addMember=function(e){if(e){(0,ue.isString)(e)&&(e=this.graph.findById(e)),this.members.push(e);var t=this.nonMembers.indexOf(e);return t>-1&&this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},r.prototype.addNonMember=function(e){if(e){(0,ue.isString)(e)&&(e=this.graph.findById(e)),this.nonMembers.push(e);var t=this.members.indexOf(e);return t>-1&&this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},r.prototype.removeMember=function(e){if(e){(0,ue.isString)(e)&&(e=this.graph.findById(e));var t=this.members.indexOf(e);return t>-1&&(this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0)}},r.prototype.removeNonMember=function(e){if(e){(0,ue.isString)(e)&&(e=this.graph.findById(e));var t=this.nonMembers.indexOf(e);return t>-1&&(this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0)}},r.prototype.updateData=function(e,t){var n=this;this.group.findById(this.id).remove(),e&&(this.members=e.map(function(i){return(0,ue.isString)(i)?n.graph.findById(i):i})),t&&(this.nonMembers=t.map(function(i){return(0,ue.isString)(i)?n.graph.findById(i):i})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},r.prototype.updateStyle=function(e){this.group.findById(this.id).attr((0,De.__assign)({},e))},r.prototype.updateCfg=function(e){var t=this;this.cfg=(0,ue.deepMix)(this.cfg,e),this.id=this.cfg.id,this.group=this.cfg.group,e.members&&(this.members=this.cfg.members.map(function(n){return(0,ue.isString)(n)?t.graph.findById(n):n})),e.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(n){return(0,ue.isString)(n)?t.graph.findById(n):n})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},r.prototype.contain=function(e){var n,i,t=this,o=(n=(0,ue.isString)(e)?this.graph.findById(e):e).getKeyShape();if("path"===n.get("type"))i=tC(o.attr("path"));else{var a=o.getCanvasBBox();i=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]]}return i=i.map(function(s){var u=t.graph.getPointByCanvas(s[0],s[1]);return[u.x,u.y]}),RL(i,tC(this.path))},r.prototype.destroy=function(){this.group.remove(),this.cfg=null},r}();const SF=LJ;var fy=Nl,RJ=function(r){function e(t){var n=r.call(this)||this;return n.sortCombos=(0,ue.debounce)(function(){var i=n.get("comboSorted");if(n&&!n.destroyed&&!i){n.set("comboSorted",!0);var o=[],a={};(n.get("comboTrees")||[]).forEach(function(l){ou(l,function(c){return o[c.depth]?o[c.depth].push(c.id):o[c.depth]=[c.id],a[c.id]=c.depth,!0})}),(n.getEdges().concat(n.get("vedges"))||[]).forEach(function(l){var c=l.getModel(),d=Math.max(a[c.source]||0,a[c.target]||0);o[d]?o[d].push(c.id):o[d]=[c.id]}),o.forEach(function(l){if(l&&l.length)for(var c=l.length-1;c>=0;c--){var f=n.findById(l[c]);f&&f.toFront()}})}},500,!1),n.cfg=(0,ue.deepMix)(n.getDefaultCfg(),t),n.init(),n.animating=!1,n.destroyed=!1,n.cfg.enabledStack&&(n.undoStack=new jv(n.cfg.maxStep),n.redoStack=new jv(n.cfg.maxStep)),n}return(0,De.__extends)(e,r),e.prototype.init=function(){this.initCanvas();var t=new aJ(this),n=new cK(this),i=new bJ(this),o=new xJ(this);this.set({viewController:t,modeController:n,itemController:i,stateController:o}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},e.prototype.initGroups=function(){var t=this.get("canvas");if(t){var i=(t.get("el")||{}).id,o=void 0===i?"g6":i,a=t.addGroup({id:"".concat(o,"-root"),className:jr.rootContainerClassName});if(this.get("groupByTypes")){var s=a.addGroup({id:"".concat(o,"-edge"),className:jr.edgeContainerClassName}),u=a.addGroup({id:"".concat(o,"-node"),className:jr.nodeContainerClassName}),l=a.addGroup({id:"".concat(o,"-combo"),className:jr.comboContainerClassName});l.toBack(),this.set({nodeGroup:u,edgeGroup:s,comboGroup:l})}var c=a.addGroup({id:"".concat(o,"-delegate"),className:jr.delegateContainerClassName});this.set({delegateGroup:c}),this.set("group",a)}},e.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[],optimizeThreshold:1e3}},e.prototype.set=function(t,n){return(0,ue.isPlainObject)(t)?this.cfg=(0,De.__assign)((0,De.__assign)({},this.cfg),t):this.cfg[t]=n,"enabledStack"===t&&n&&!this.undoStack&&!this.redoStack&&(this.undoStack=new jv(this.cfg.maxStep),this.redoStack=new jv(this.cfg.maxStep)),this},e.prototype.get=function(t){var n;return null===(n=this.cfg)||void 0===n?void 0:n[t]},e.prototype.getGroup=function(){return this.get("group")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.getMinZoom=function(){return this.get("minZoom")},e.prototype.setMinZoom=function(t){return this.set("minZoom",t)},e.prototype.getMaxZoom=function(){return this.get("maxZoom")},e.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},e.prototype.getWidth=function(){return this.get("width")},e.prototype.getHeight=function(){return this.get("height")},e.prototype.clearItemStates=function(t,n){(0,ue.isString)(t)&&(t=this.findById(t));var i=this.get("itemController");n||(n=t.get("states")),i.clearItemStates(t,n),this.get("stateController").updateStates(t,n,!1)},e.prototype.node=function(t){"function"==typeof t&&this.set("nodeMapper",t)},e.prototype.edge=function(t){"function"==typeof t&&this.set("edgeMapper",t)},e.prototype.combo=function(t){"function"==typeof t&&this.set("comboMapper",t)},e.prototype.findById=function(t){return this.get("itemMap")[t]},e.prototype.find=function(t,n){var i,o=this.get("".concat(t,"s"));return(0,ue.each)(o,function(a,s){if(n(a,s))return i=a}),i},e.prototype.findAll=function(t,n){var i=[];return(0,ue.each)(this.get("".concat(t,"s")),function(o,a){n(o,a)&&i.push(o)}),i},e.prototype.findAllByState=function(t,n,i){return this.findAll(t,i?function(o){return o.hasState(n)&&i(o)}:function(o){return o.hasState(n)})},e.prototype.translate=function(t,n,i,o){var a=this,s=this.get("group"),u=(0,ue.clone)(s.getMatrix());if(u||(u=[1,0,0,0,1,0,0,0,1]),i){var l=qm({animateCfg:o,callback:function(){return a.emit("viewportchange",{action:"translate",matrix:s.getMatrix()})}});nM(s,{x:s.getCanvasBBox().x+t,y:s.getCanvasBBox().y+n},i,l||{duration:500,easing:"easeCubic"})}else u=fy(u,[["t",t,n]]),s.setMatrix(u),this.emit("viewportchange",{action:"translate",matrix:u}),this.autoPaint()},e.prototype.moveTo=function(t,n,i,o){var a=this.get("group");nM(a,{x:t,y:n},i,o||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:a.getMatrix()})},e.prototype.fitView=function(t,n,i,o){t&&this.set("fitViewPadding",t);var a=this.get("viewController");n?a.fitViewByRules(n,i,o):a.fitView(i,o),this.autoPaint()},e.prototype.fitCenter=function(t,n){this.get("viewController").fitCenter(t,n),this.autoPaint()},e.prototype.addBehaviors=function(t,n){return this.get("modeController").manipulateBehaviors(t,n,!0),this},e.prototype.removeBehaviors=function(t,n){return this.get("modeController").manipulateBehaviors(t,n,!1),this},e.prototype.updateBehavior=function(t,n,i){return this.get("modeController").updateBehavior(t,n,i),this},e.prototype.zoom=function(t,n,i,o){var a=this,s=this.get("group"),u=(0,ue.clone)(s.getMatrix())||[1,0,0,0,1,0,0,0,1],l=this.get("minZoom"),c=this.get("maxZoom"),f=this.getZoom()||1,h=f*t,d=t,g=!1;if(l&&h<l?(d=l/f,g=!0):c&&h>c&&(d=c/f,g=!0),u=fy(u,n?[["t",-n.x,-n.y],["s",d,d],["t",n.x,n.y]]:[["s",d,d]]),i){var m=(0,ue.clone)(s.getMatrix());m||(m=[1,0,0,0,1,0,0,0,1]);var _=m[0],D=_*d,L=qm({animateCfg:o,callback:function(){return a.emit("viewportchange",{action:"zoom",matrix:s.getMatrix()})}});s.animate(function(O){if(1===O)m=u;else{var Z=aM(_,D,O)/m[0];m=fy(m,n?[["t",-n.x,-n.y],["s",Z,Z],["t",n.x,n.y]]:[["s",Z,Z]])}return{matrix:m}},L)}else s.setMatrix(u),this.emit("viewportchange",{action:"zoom",matrix:u}),this.autoPaint();return!g},e.prototype.zoomTo=function(t,n,i,o){var a=t/this.getZoom();return this.zoom(a,n,i,o)},e.prototype.focusItem=function(t,n,i){var o=this.get("viewController"),a=!1;n?a=!0:void 0===n&&(a=this.get("animate"));var s={};i?s=i:void 0===i&&(s=this.get("animateCfg")),o.focus(t,a,s),this.autoPaint()},e.prototype.focusItems=function(t,n,i,o){this.get("viewController").focusItems(t,n,i,o)},e.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},e.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},e.prototype.getPointByClient=function(t,n){return this.get("viewController").getPointByClient(t,n)},e.prototype.getClientByPoint=function(t,n){return this.get("viewController").getClientByPoint(t,n)},e.prototype.getPointByCanvas=function(t,n){return this.get("viewController").getPointByCanvas(t,n)},e.prototype.getCanvasByPoint=function(t,n){return this.get("viewController").getCanvasByPoint(t,n)},e.prototype.getGraphCenterPoint=function(){var t=this.get("group").getCanvasBBox();return{x:(t.minX+t.maxX)/2,y:(t.minY+t.maxY)/2}},e.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},e.prototype.showItem=function(t,n){void 0===n&&(n=!0);var o=this.get("itemController").changeItemVisibility(t,!0);if(n&&this.get("enabledStack")){var a=o.getID(),u={},l={};switch(o.getType()){case"node":u.nodes=[{id:a,visible:!1}],l.nodes=[{id:a,visible:!0}];break;case"edge":u.nodes=[{id:a,visible:!1}],l.edges=[{id:a,visible:!0}];break;case"combo":u.nodes=[{id:a,visible:!1}],l.combos=[{id:a,visible:!0}]}this.pushStack("visible",{before:u,after:l})}},e.prototype.hideItem=function(t,n){void 0===n&&(n=!0);var o=this.get("itemController").changeItemVisibility(t,!1);if(n&&this.get("enabledStack")){var a=o.getID(),u={},l={};switch(o.getType()){case"node":u.nodes=[{id:a,visible:!0}],l.nodes=[{id:a,visible:!1}];break;case"edge":u.nodes=[{id:a,visible:!0}],l.edges=[{id:a,visible:!1}];break;case"combo":u.nodes=[{id:a,visible:!0}],l.combos=[{id:a,visible:!1}]}this.pushStack("visible",{before:u,after:l})}},e.prototype.refreshItem=function(t){this.get("itemController").refreshItem(t)},e.prototype.setAutoPaint=function(t){this.set("autoPaint",t),this.get("canvas").set("autoDraw",t)},e.prototype.remove=function(t,n){void 0===n&&(n=!0),this.removeItem(t,n)},e.prototype.removeItem=function(t,n){void 0===n&&(n=!0);var i=t;if((0,ue.isString)(t)&&(i=this.findById(t)),!i&&(0,ue.isString)(t))console.warn("The item ".concat(t," to be removed does not exist!"));else if(i){var o="";if(i.getType&&(o=i.getType()),n&&this.get("enabledStack")){var a=(0,De.__assign)((0,De.__assign)({},i.getModel()),{itemType:o}),s={};switch(o){case"node":s.nodes=[a],s.edges=[];for(var u=i.getEdges(),l=u.length-1;l>=0;l--)s.edges.push((0,De.__assign)((0,De.__assign)({},u[l].getModel()),{itemType:"edge"}));break;case"edge":s.edges=[a];break;case"combo":s.combos=[a]}this.pushStack("delete",{before:s,after:{}})}if("node"===o&&i.getModel().comboId&&this.updateComboTree(i,void 0,!1),this.get("itemController").removeItem(i),"combo"===o){var h=hM(this.get("comboTrees"));this.set("comboTrees",h)}}},e.prototype.innerAddItem=function(t,n,i){if(!function(e,t){if("node"===e||"combo"===e){if(t.id&&!(0,ue.isString)(t.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c".concat(t.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1}else if(!("edge"!==e||t.source&&t.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0}(t,n))return!1;if(!n.id||!this.findById(n.id)){var o,a=this.get("comboTrees")||[];if("combo"===t){var s=this.get("itemMap"),u=!1;if(a.forEach(function(g){u||Pf(g,function(m){if(n.parentId===m.id){u=!0;var _=(0,De.__assign)({id:n.id,depth:m.depth+2},n);m.children?m.children.push(_):m.children=[_],n.depth=_.depth,o=i.addItem(t,n)}var D=s[m.id];return u&&D&&D.getType&&"combo"===D.getType()&&i.updateCombo(D,m.children),!0})}),!u){var l=(0,De.__assign)({id:n.id,depth:0},n);n.depth=l.depth,a.push(l),o=i.addItem(t,n)}this.set("comboTrees",a),n.collapsed&&(this.collapseCombo(o,!1),this.updateCombo(o))}else if("node"===t&&(0,ue.isString)(n.comboId)&&a){var c;(c=this.findById(n.comboId))&&c.getType&&"combo"!==c.getType()&&console.warn("'".concat(n.comboId,"' is not a id of a combo in the graph, the node will be added without combo.")),o=i.addItem(t,n);var f=this.get("itemMap"),h=!1,d=!1;a.forEach(function(g){d||h||Pf(g,function(m){if(m.id===n.id)return d=!0,!1;if(n.comboId===m.id&&!d){h=!0;var _=(0,ue.clone)(n);_.itemType="node",m.children?m.children.push(_):m.children=[_],_.depth=m.depth+1}return h&&f[m.id].getType&&"combo"===f[m.id].getType()&&i.updateCombo(f[m.id],m.children),!0})})}else o=i.addItem(t,n);return("node"===t&&n.comboId||"combo"===t&&n.parentId)&&(c=this.findById(n.comboId||n.parentId))&&c.getType&&"combo"===c.getType()&&c.addChild(o),o}console.warn("This item exists already. Be sure the id %c".concat(n.id,"%c is unique."),"font-size: 20px; color: red;","")},e.prototype.addItem=function(t,n,i,o){void 0===i&&(i=!0),void 0===o&&(o=!0);var a=this.get("comboSorted");this.set("comboSorted",a&&!o);var s=this.get("itemController"),u=this.innerAddItem(t,n,s);if(!1===u||!0===u)return u;var l=this.get("combos");if(l&&l.length>0&&this.sortCombos(),this.autoPaint(),i&&this.get("enabledStack")){var c=(0,De.__assign)((0,De.__assign)({},u.getModel()),{itemType:t}),f={};switch(t){case"node":f.nodes=[c];break;case"edge":f.edges=[c];break;case"combo":f.combos=[c]}this.pushStack("add",{before:{},after:f})}return u},e.prototype.addItems=function(t,n,i){void 0===t&&(t=[]),void 0===n&&(n=!0),void 0===i&&(i=!0);var o=this.get("comboSorted");this.set("comboSorted",o&&!i);for(var a=this.get("itemController"),s=[],u=0;u<t.length;u++)s.push("edge"!==(l=t[u]).type&&"vedge"!==l.type?this.innerAddItem(l.type,l.model,a):void 0);for(u=0;u<t.length;u++){var l;("edge"===(l=t[u]).type||"vedge"===l.type)&&(s[u]=this.innerAddItem(l.type,l.model,a))}if(i){var c=this.get("combos");c&&c.length>0&&this.sortCombos()}if(this.autoPaint(),n&&this.get("enabledStack")){var f={nodes:[],edges:[],combos:[]};for(u=0;u<t.length;u++){var h=t[u].type,d=s[u];if(d&&!0!==d){var g=(0,De.__assign)((0,De.__assign)({},d.getModel()),{itemType:h});switch(h){case"node":f.nodes.push(g);break;case"edge":f.edges.push(g);break;case"combo":f.combos.push(g)}}}this.pushStack("addItems",{before:{},after:f})}return s},e.prototype.add=function(t,n,i,o){return void 0===i&&(i=!0),void 0===o&&(o=!0),this.addItem(t,n,i,o)},e.prototype.updateItem=function(t,n,i){var o=this;void 0===i&&(i=!0);var s,a=this.get("itemController");s=(0,ue.isString)(t)?this.findById(t):t;var l,u=i&&this.get("enabledStack");u&&(l=(0,ue.clone)(s.getModel()));var c="";s.getType&&(c=s.getType());var f=(0,De.__spreadArray)([],s.getStates(),!0);if("combo"===c&&(0,ue.each)(f,function(m){return o.setItemState(s,m,!1)}),a.updateItem(s,n),"combo"===c&&(0,ue.each)(f,function(m){return o.setItemState(s,m,!0)}),u){var h={nodes:[],edges:[],combos:[]},d={nodes:[],edges:[],combos:[]},g=(0,De.__assign)({id:l.id},n);switch(c){case"node":h.nodes.push(l),d.nodes.push(g);break;case"edge":h.edges.push(l),d.edges.push(g);break;case"combo":h.combos.push(l),d.combos.push(g)}this.pushStack("update",{before:h,after:d})}},e.prototype.update=function(t,n,i){void 0===i&&(i=!0),this.updateItem(t,n,i)},e.prototype.setItemState=function(t,n,i){(0,ue.isString)(t)&&(t=this.findById(t)),this.get("itemController").setItemState(t,n,i),this.get("stateController").updateState(t,n,i)},e.prototype.priorityState=function(t,n){this.get("itemController").priorityState(t,n)},e.prototype.data=function(t){ZL(t),this.set("data",t)},e.prototype.render=function(){var t=this;this.set("comboSorted",!1);var n=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!n)throw new Error("data must be defined first");var i=n.nodes,o=void 0===i?[]:i,a=n.edges,s=void 0===a?[]:a,u=n.combos,l=void 0===u?[]:u;if(this.clear(!0),this.emit("beforerender"),t.addItems(o.map(function(_){return{type:"node",model:_}}),!1,!1),0!==l?.length){var c=fM(l,o);this.set("comboTrees",c),t.addCombos(l)}t.addItems(s.map(function(_){return{type:"edge",model:_}}),!1,!1);var f=t.get("animate");(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1);var h=t.get("layoutController");if(h){if(h.layout(d),this.destroyed)return}else d();function d(){(t.get("comboTrees")||[]).forEach(function(_){Pf(_,function(D){var L=t.findById(D.id);return"combo"===L.getType()&&D.collapsed&&(t.collapseCombo(D.id,!1),t.updateCombo(L)),!0})}),t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter(),t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",f),setTimeout(function(){var _;null===(_=t.getCombos())||void 0===_||_.forEach(function(D){D.set("animate",!0)})},0)}this.get("groupByTypes")||(l&&0!==l.length?this.sortCombos():n.nodes&&n.edges&&n.nodes.length<n.edges.length?this.getNodes().forEach(function(_){_.toFront()}):this.getEdges().forEach(function(_){_.toBack()}))},e.prototype.read=function(t){this.data(t),this.render()},e.prototype.diffItems=function(t,n,i){var a,o=this,s=this.get("itemMap");(0,ue.each)(i,function(u){if(a=s[u.id]){if(o.get("animate")&&"node"===t){var l=a.getContainer().getMatrix();l||(l=[1,0,0,0,1,0,0,0,1]),a.set("originAttrs",{x:l[6],y:l[7]})}o.updateItem(a,u,!1)}else a=o.addItem(t,u,!1);a&&n["".concat(t,"s")].push(a)})},e.prototype.changeData=function(t,n){var o,i=this;void 0===n&&(n=!0);var a=this,s=t||a.get("data");if(!ZL(s))return this;this.emit("beforechangedata"),n&&this.get("enabledStack")&&this.pushStack("changedata",{before:a.save(),after:s}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(L){return a.clearItemStates(L)}),this.getEdges().map(function(L){return a.clearItemStates(L)});var u=this.get("canvas"),l=u.get("localRefresh");u.set("localRefresh",!1),a.get("data")||(a.data(s),a.render());var c=this.get("itemMap"),f={nodes:[],edges:[]},h=s.combos;if(h){var d=fM(h,s.nodes);this.set("comboTrees",d)}else this.set("comboTrees",[]);this.diffItems("node",f,s.nodes),(0,ue.each)(c,function(L,O){c[O].getModel().depth=0,(!L.getType||"edge"!==L.getType())&&(L.getType&&"combo"===L.getType()?(delete c[O],L.destroy()):f.nodes.indexOf(L)<0&&(delete c[O],a.remove(L,!1)))});for(var g=this.getCombos(),_=g.length-1;_>=0;_--)g[_].destroyed&&g.splice(_,1);h&&(a.addCombos(h),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",f,s.edges),(0,ue.each)(c,function(L,O){L.getType&&("node"===L.getType()||"combo"===L.getType())||f.edges.indexOf(L)<0&&(delete c[O],a.remove(L,!1))}),(this.get("comboTrees")||[]).forEach(function(L){Pf(L,function(O){return"combo"===i.findById(O.id).getType()&&O.collapsed&&i.collapseCombo(O.id,!1),!0})}),this.set({nodes:f.nodes,edges:f.edges});var D=this.get("layoutController");return D&&(D.changeData(function(){setTimeout(function(){var L;null===(L=a.getCombos())||void 0===L||L.forEach(function(O){O.set("animate",!0)})},0)}),a.get("animate")&&!D.getLayoutType()?(a.positionsAnimate(),null===(o=a.getCombos())||void 0===o||o.forEach(function(L){return L.set("animate",!0)})):a.autoPaint()),setTimeout(function(){u.set("localRefresh",l)},16),this.set("data",s),this.emit("afterchangedata"),this},e.prototype.addCombos=function(t){var i=this.get("comboTrees");this.get("itemController").addCombos(i,t)},e.prototype.createCombo=function(t,n,i){var o=this;void 0===i&&(i=!0);var a=this.get("itemController");this.set("comboSorted",!1);var u,s="";if(t){if((0,ue.isString)(t))s=t,u={id:t};else{if(!(s=t.id))return void console.warn("Create combo failed. Please assign a unique string id for the adding combo.");u=t}var l=i&&this.get("enabledStack"),c={nodes:[],combos:[]};l&&n.forEach(function(_){var D=o.findById(_),L=D.getType();if("node"===L||"combo"===L){var O=D.getModel();c["".concat(L,"s")].push({id:_,parentId:"node"===L?O.comboId:O.parentId})}});var f=this.get("comboTrees"),h=new Set(n),d=new Map;f&&(f.forEach(function(_){Pf(_,function(D,L,O){if(h.has(D.id)){if(L){var Z=o.findById(L.id),le=o.findById(D.id);L.children.splice(O,1),Z.removeChild(le),a.updateCombo(Z,L.children)}"combo"===D.itemType&&d.set(D.id,D)}return!0})}),f=f.filter(function(_){return!h.has(_.id)}),this.set("comboTrees",f));var g={nodes:[],combos:[]},m=n.map(function(_){var D=o.findById(_),L=D.getModel(),O="";D.getType&&(O=D.getType());var Z=d.get(_)||{id:D.getID(),itemType:O};return"combo"===O?(Z.parentId=s,L.parentId=s):"node"===O&&(Z.comboId=s,L.comboId=s),l&&g["".concat(O,"s")].push({id:L.id,parentId:s}),Z});u.children=m,this.addItem("combo",u,!1),this.set("comboSorted",!1),f&&(f.forEach(function(_){ou(_,function(D){return D.id!==s||(D.itemType="combo",D.children=m,!1)})}),this.sortCombos()),l&&(g.combos.push(u),this.pushStack("createCombo",{before:c,after:g}))}},e.prototype.uncombo=function(t,n){var o,a,i=this;void 0===n&&(n=!0);var u=t;if((0,ue.isString)(t)&&(u=this.findById(t)),!u||u.getType&&"combo"!==u.getType())console.warn("The item is not a combo!");else{var l=u.getModel(),c=u.getModel().parentId,f=this.get("comboTrees");f||(f=[]);var g,h=this.get("itemMap"),d=u.get("id"),m=[],_=this.get("combos"),D=this.findById(c),L=n&&this.get("enabledStack"),O={};if(L&&((O=(0,ue.clone)(l)).children=[]),f.forEach(function(Ee){g||Pf(Ee,function(Re){var Ve;if(Re.id===d){g=Re,u.getEdges().map(function(vn){return vn.getID()}).forEach(function(vn){i.removeItem(vn,!1)});var at=_.indexOf(u);_.splice(at,1),delete h[d];var _t=(0,ue.clone)(u.getModel());u.destroy(),i.emit("afterremoveitem",{item:_t,type:"combo"})}return!c||!g||Re.id!==c||(D.removeCombo(u),-1!==(at=(m=Re.children).indexOf(g))&&m.splice(at,1),null===(Ve=g.children)||void 0===Ve||Ve.forEach(function(Cn){var Tt=i.findById(Cn.id),kt=Tt.getModel();Tt.getType&&"combo"===Tt.getType()?(Cn.parentId=c,delete Cn.comboId,kt.parentId=c,delete kt.comboId):Tt.getType&&"node"===Tt.getType()&&(Cn.comboId=c,kt.comboId=c),D.addChild(Tt),m.push(Cn)}),i.updateCombo(D),!1)})}),!c&&g){var Z=f.indexOf(g);f.splice(Z,1),null===(o=g.children)||void 0===o||o.forEach(function(Ee){Ee.parentId=void 0;var Re=i.findById(Ee.id).getModel();delete Re.parentId,delete Re.comboId,"node"!==Ee.itemType&&f.push(Ee)})}if(L){var le={nodes:[],combos:[]},pe={nodes:[],combos:[]};null===(a=g.children)||void 0===a||a.forEach(function(Ee){var Ve=i.findById(Ee.id).getType();"node"!==Ve&&"combo"!==Ve||(le["".concat(Ve,"s")].push({id:Ee.id,parentId:d}),pe["".concat(Ve,"s")].push({id:Ee.id,parentId:c}))}),le.combos.push(O),this.pushStack("uncombo",{before:le,after:pe})}}},e.prototype.updateCombos=function(t){var n=this;void 0===t&&(t=!1);var i=this,o=this.get("comboTrees"),a=i.get("itemController"),s=i.get("itemMap");(o||[]).forEach(function(u){Pf(u,function(l){var c;if(!l)return!0;var f=s[l.id];if("combo"===(null===(c=f?.getType)||void 0===c?void 0:c.call(f))){var h=(0,De.__spreadArray)([],f.getStates(),!0);(0,ue.each)(h,function(d){return n.setItemState(f,d,!1)}),a.updateCombo(f,l.children,t),(0,ue.each)(h,function(d){return n.setItemState(f,d,!0)})}return!0})}),i.sortCombos()},e.prototype.updateCombo=function(t){var a,n=this,o=t;if((0,ue.isString)(t)&&(o=this.findById(t)),!o||o.getType&&"combo"!==o.getType())console.warn("The item to be updated is not a combo!");else{a=o.get("id");var s=this.get("comboTrees"),u=this.get("itemController"),l=this.get("itemMap");(s||[]).forEach(function(c){Pf(c,function(f){if(!f)return!0;var h=l[f.id];if(a===f.id&&h&&h.getType&&"combo"===h.getType()){var d=(0,De.__spreadArray)([],h.getStates(),!0);(0,ue.each)(d,function(g){h.getStateStyle(g)&&n.setItemState(h,g,!1)}),u.updateCombo(h,f.children),(0,ue.each)(d,function(g){h.getStateStyle(g)&&n.setItemState(h,g,!0)}),a&&(a=f.parentId)}return!0})})}},e.prototype.updateComboTree=function(t,n,i){var a;void 0===i&&(i=!0),this.set("comboSorted",!1);var _,s=(a=(0,ue.isString)(t)?this.findById(t):t).getModel(),u=s.comboId||s.parentId,l="";if(a.getType&&(l=a.getType()),n&&"combo"===l){var h,c=this.get("comboTrees"),f=!0;if((c||[]).forEach(function(L){h||ou(L,function(O){if(!h)return O.id===a.getID()&&(h=O),!0})}),ou(h,function(L){return L.id!==n||(f=!1,!1)}),!f)return void console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!")}if(i&&this.get("enabledStack")){var d={},g={};"combo"===l?(d.combos=[{id:s.id,parentId:s.parentId}],g.combos=[{id:s.id,parentId:n}]):"node"===l&&(d.nodes=[{id:s.id,parentId:s.comboId}],g.nodes=[{id:s.id,parentId:n}]),this.pushStack("updateComboTree",{before:d,after:g})}if(s.parentId||s.comboId){var m=this.findById(s.parentId||s.comboId);m&&m.removeChild(a)}"combo"===l?s.parentId=n:"node"===l&&(s.comboId=n),n&&(_=this.findById(n))&&_.addChild(a),u&&(_=this.findById(u))&&_.removeChild(a);var D=hM(this.get("comboTrees"),s.id,n);this.set("comboTrees",D),this.updateCombos()},e.prototype.save=function(){var t=[],n=[],i=[];return(0,ue.each)(this.get("nodes"),function(o){t.push(o.getModel())}),(0,ue.each)(this.get("edges"),function(o){n.push(o.getModel())}),(0,ue.each)(this.get("combos"),function(o){i.push(o.getModel())}),{nodes:t,edges:n,combos:i}},e.prototype.changeSize=function(t,n){return this.get("viewController").changeSize(t,n),this},e.prototype.refresh=function(){var t=this;if(t.emit("beforegraphrefresh"),t.get("animate"))t.positionsAnimate();else{var n=t.get("nodes"),i=t.get("edges"),o=t.get("edges");(0,ue.each)(n,function(a){a.refresh()}),(0,ue.each)(i,function(a){a.refresh()}),(0,ue.each)(o,function(a){a.refresh()})}t.emit("aftergraphrefresh"),t.autoPaint()},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.getComboChildren=function(t){if((0,ue.isString)(t)&&(t=this.findById(t)),t&&(!t.getType||"combo"===t.getType()))return t.getChildren();console.warn("The combo does not exist!")},e.prototype.positionsAnimate=function(t){var n=this;n.emit("beforeanimate");var i=n.get("animateCfg"),o=i.onFrame,a=t?n.getNodes().concat(n.getCombos()):n.getNodes(),s=a.map(function(l){var c=l.getModel();return{id:c.id,x:c.x,y:c.y}});n.stopAnimate();var u=n.get("canvas");n.animating=!0,u.animate(function(l){(0,ue.each)(s,function(c){var f=n.findById(c.id);if(f&&!f.destroyed){var h=f.get("originAttrs"),d=f.get("model"),g=f.getContainer().getMatrix();if(null==h&&(g&&(h={x:g[6],y:g[7]}),f.set("originAttrs",h||0)),o){var m=o(f,l,c,h||{x:0,y:0});f.set("model",Object.assign(d,m))}else h?(d.x=h.x+(c.x-h.x)*l,d.y=h.y+(c.y-h.y)*l):(d.x=c.x,d.y=c.y)}}),n.refreshPositions(t)},{duration:i.duration,easing:i.easing,callback:function(){(0,ue.each)(a,function(c){c.set("originAttrs",null)}),i.callback&&i.callback(),n.emit("afteranimate"),n.animating=!1}})},e.prototype.refreshPositions=function(t){var n=this;n.emit("beforegraphrefreshposition");var u,i=n.get("nodes"),o=n.get("edges"),a=n.get("vedges"),s=n.get("combos"),l={},c=function(h){(0,ue.each)(h,function(d){u=d.getModel();var g=d.get("originAttrs");if(!g||u.x!==g.x||u.y!==g.y){var m=d.updatePosition({x:u.x,y:u.y});l[u.id]=m,u.comboId&&(l[u.comboId]=l[u.comboId]||m),u.parentId&&(l[u.parentId]=l[u.parentId]||m)}})};c(s),c(i),s&&0!==s.length&&(t&&c(s),n.updateCombos()),(0,ue.each)(o,function(f){var h=f.getSource().getModel(),d=f.getTarget();if(!(0,ue.isPlainObject)(d)){var g=d.getModel();(l[h.id]||l[g.id]||f.getModel().isComboEdge)&&f.refresh()}}),(0,ue.each)(a,function(f){f.refresh()}),n.emit("aftergraphrefreshposition"),n.autoPaint()},e.prototype.stopAnimate=function(){this.isAnimating()&&this.get("canvas").stopAnimate()},e.prototype.isAnimating=function(){return this.animating},e.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},e.prototype.getCurrentMode=function(){return this.get("modeController").getMode()},e.prototype.setMode=function(t){return this.get("modeController").setMode(t),this},e.prototype.clear=function(t){var n;return void 0===t&&(t=!1),null===(n=this.get("canvas"))||void 0===n||n.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],vedges:[],groups:[],combos:[],comboTrees:[]}),t||this.emit("afterrender"),this},e.prototype.updateLayout=function(t,n,i,o){var a=this;void 0===t&&(t={}),void 0===o&&(o=!0);var s=this.get("layoutController");if((0,ue.isString)(t)&&(t={type:t}),n){var u=i;u||(u="begin"===n?{x:0,y:0}:{x:this.getWidth()/2,y:this.getHeight()/2}),u=this.getPointByCanvas(u.x,u.y);var l=["force","gForce","fruchterman","force2"];l.includes(t.type)||!t.type&&l.includes(s?.layoutType)?t.center=[u.x,u.y]:this.once("afterlayout",function(h){var d=a.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];u.x=u.x*d[0]+d[6],u.y=u.y*d[0]+d[7];var g=a.getGroup().getCanvasBBox(),m=g.minX,D=g.minY,O={x:(m+g.maxX)/2,y:(D+g.maxY)/2};"begin"===n&&(O.x=m,O.y=D),a.translate(u.x-O.x,u.y-O.y)})}var c=(0,De.__assign)({},this.get("layout")),f={};Object.assign(f,c,t),t.pipes&&!t.type?delete f.type:!t.pipes&&f.type&&delete f.pipes,this.set("layout",f),s&&(s.isLayoutTypeSame(f)&&f.gpuEnabled===c.gpuEnabled?s.updateLayoutCfg(f):s.changeLayout(f),o&&this.get("enabledStack")&&this.pushStack("layout",{before:c,after:f}))},e.prototype.destroyLayout=function(){this.get("layoutController")?.destroyLayout()},e.prototype.layout=function(){var t,n=this.get("layoutController"),i=this.get("layout");if(i&&n){if(i.workerEnabled)return void n.layout();null!==(t=n.layoutMethods)&&void 0!==t&&t.length?n.relayout(!0):n.layout()}},e.prototype.collapseCombo=function(t,n){var i=this;if(void 0===n&&(n=!0),!this.destroyed){if((0,ue.isString)(t)&&(t=this.findById(t)),!t)return void console.warn("The combo to be collapsed does not exist!");this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var o=t.getModel();this.get("itemController").collapseCombo(t,n),o.collapsed=!0;var s=this.getEdges().concat(this.get("vedges")),u=[],l=this.get("comboTrees"),c=!1;(l||[]).forEach(function(h){c||ou(h,function(d){if(c&&d.depth<=o.depth)return!1;if(o.id===d.id&&(c=!0),c){var g=i.findById(d.id);g&&g.getType&&"combo"===g.getType()&&(u=(u=u.concat(g.getNodes())).concat(g.getCombos()))}return!0})});var f={};s.forEach(function(h){var d=h.getModel(),g=d.isVEdge,m=d.size,_=void 0===m?1:m;if(!h.isVisible()||g){var Z,D=h.getSource(),L=h.getTarget(),O=null;if(D.getModel().id===o.id||u.includes(D)&&!u.includes(L)?(O=L,Z=!1):(L.getModel().id===o.id||!u.includes(D)&&u.includes(L))&&(O=D,Z=!0),O){if(g)return void i.removeItem(h,!1);for(var le=O.getModel();!O.isVisible();){var Re=le.parentId||le.comboId;if(!(O=i.findById(Re))||!Re)return;le=O.getModel()}var Ve=le.id,Ue=Z?{source:Ve,target:o.id,size:_,isVEdge:!0}:{source:o.id,target:Ve,size:_,isVEdge:!0},at="".concat(Ue.source,"-").concat(Ue.target);if(f[at])return void(f[at].size+=_);f[at]=Ue}}}),this.addItems(Object.values(f).map(function(h){return{type:"vedge",model:h}}),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:t})}},e.prototype.expandCombo=function(t,n){var i=this;if(void 0===n&&(n=!0),(0,ue.isString)(t)&&(t=this.findById(t)),!t||t.getType&&"combo"!==t.getType())console.warn("The combo to be collapsed does not exist!");else{this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var o=t.getModel();this.get("itemController").expandCombo(t,n),o.collapsed=!1;var s=this.getEdges().concat(this.get("vedges")),u=[],l=this.get("comboTrees"),c=!1;(l||[]).forEach(function(h){c||ou(h,function(d){if(c&&d.depth<=o.depth)return!1;if(o.id===d.id&&(c=!0),c){var g=i.findById(d.id);g&&g.getType&&"combo"===g.getType()&&(u=(u=u.concat(g.getNodes())).concat(g.getCombos()))}return!0})});var f={};s.forEach(function(h){if(!h.isVisible()||h.getModel().isVEdge){var L,d=h.getSource(),g=h.getTarget(),m=d.get("id"),_=g.get("id"),D=null;if(m===o.id||u.includes(d)&&!u.includes(g)?(D=g,L=!1):_===o.id||!u.includes(d)&&u.includes(g)?(D=d,L=!0):u.includes(d)&&u.includes(g)&&d.isVisible()&&g.isVisible()&&h.show(),D){var O=h.getModel(),le=O.size,pe=void 0===le?1:le;if(O.isVEdge)return void i.removeItem(h,!1);for(var Ee=D.getModel();!D.isVisible();){var Ue=Ee.parentId||Ee.comboId;if(!(D=i.findById(Ue))||!Ue)return;Ee=D.getModel()}for(var at=Ee.id,_t=L?g:d,vn=_t.getModel();!_t.isVisible();){var kt=vn.parentId||vn.comboId;if(!(_t=i.findById(kt))||!kt)return;if(vn.comboId===o.id||vn.parentId===o.id)break;vn=_t.getModel()}var Ln=vn.id;if(at){var Kn=L?{source:at,target:Ln,isVEdge:!0,size:pe}:{source:Ln,target:at,isVEdge:!0,size:pe},mn="".concat(Kn.source,"-").concat(Kn.target);if(f[mn])return void(f[mn].size+=pe);f[mn]=Kn}}}}),this.addItems(Object.values(f).map(function(h){return{type:"vedge",model:h}}),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:t})}},e.prototype.collapseExpandCombo=function(t,n){if(void 0===n&&(n=!0),(0,ue.isString)(t)&&(t=this.findById(t)),t&&(!t.getType||"combo"===t.getType())){for(var i=t.getModel(),o=this.findById(i.parentId);o;){var a=o.getModel();if(a.collapsed)return console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),void(o=void 0);o=this.findById(a.parentId)}i.collapsed?this.expandCombo(t,n):this.collapseCombo(t,n),this.updateCombo(t)}},e.prototype.getNeighbors=function(t,n){var i=t;return(0,ue.isString)(t)&&(i=this.findById(t)),i.getNeighbors(n)},e.prototype.getNodeDegree=function(t,n,i){void 0===n&&(n=void 0),void 0===i&&(i=!1);var o=t;(0,ue.isString)(t)&&(o=this.findById(t));var a=this.get("degrees");(!a||i)&&(a=Wm(this.save()),this.set("degrees",a));var s=a[o.getID()],u=0;if(!s)return 0;switch(n){case"in":u=s.inDegree;break;case"out":u=s.outDegree;break;case"all":u=s;break;default:u=s.degree}return u},e.prototype.getUndoStack=function(){return this.undoStack},e.prototype.getRedoStack=function(){return this.redoStack},e.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},e.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear(),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack}))},e.prototype.pushStack=function(t,n,i){if(void 0===t&&(t="update"),void 0===i&&(i="undo"),this.get("enabledStack")){var o=n?(0,ue.clone)(n):{before:{},after:(0,ue.clone)(this.save())};"redo"===i?this.redoStack.push({action:t,data:o}):this.undoStack.push({action:t,data:o}),this.emit("stackchange",{action:t,stackType:i,undoStack:this.undoStack,redoStack:this.redoStack})}else console.warn("\u8bf7\u5148\u542f\u7528 undo & redo \u529f\u80fd\uff0c\u5728\u5b9e\u4f8b\u5316 Graph \u65f6\u5019\u914d\u7f6e enabledStack: true !")},e.prototype.getAdjMatrix=function(t,n){void 0===t&&(t=!0),void 0===n&&(n=this.get("directed"));var i=this.get("adjMatrix");return(!i||!t)&&(i=$g(this.save(),n),this.set("adjMatrix",i)),i},e.prototype.getShortestPathMatrix=function(t,n){void 0===t&&(t=!0),void 0===n&&(n=this.get("directed"));var i=this.get("adjMatrix"),o=this.get("shortestPathMatrix");return(!i||!t)&&(i=$g(this.save(),n),this.set("adjMatrix",i)),(!o||!t)&&(o=Ym(this.save(),n),this.set("shortestPathMatrix",o)),o},e.prototype.on=function(t,n,i){return r.prototype.on.call(this,t,n,i)},e.prototype.destroy=function(){var t,n,i,o,a;this.clear(),this.clearStack(),null===(t=this.get("itemController"))||void 0===t||t.destroy(),null===(n=this.get("modeController"))||void 0===n||n.destroy(),null===(i=this.get("viewController"))||void 0===i||i.destroy(),null===(o=this.get("stateController"))||void 0===o||o.destroy(),null===(a=this.get("canvas"))||void 0===a||a.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},e.prototype.createHull=function(t){if(t.members&&!(t.members.length<1)){var n=this.get("hullGroup"),i=this.get("hullMap");if(i||this.set("hullMap",i={}),(!n||n.get("destroyed"))&&((n=this.get("group").addGroup({id:"hullGroup"})).toBack(),this.set("hullGroup",n)),i[t.id])return console.warn("Existed hull id."),i[t.id];var o=n.addGroup({id:"".concat(t.id,"-container")}),a=new SF(this,(0,De.__assign)((0,De.__assign)({},t),{group:o}));return i[a.id]=a,a}console.warn("Create hull failed! The members is empty.")},e.prototype.getHulls=function(){return this.get("hullMap")},e.prototype.getHullById=function(t){return this.get("hullMap")[t]},e.prototype.removeHull=function(t){var n,i;i=(0,ue.isString)(t)?this.getHullById(t):t,null===(n=this.get("hullMap"))||void 0===n||delete n[i.id],i.destroy()},e.prototype.removeHulls=function(){var t=this.getHulls();!t||!Object.keys(t).length||(Object.keys(t).forEach(function(n){t[n].destroy()}),this.set("hullMap",{}))},e}(HN);const MF=RJ;function iC(r){return(iC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}var Yv=Nl,oC="-label",Cw=["startArrow","endArrow"],AF={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},Aw={edge:{lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},node:AF,combo:AF},aC="-label-bg",sC={options:{labelCfg:{style:{fontFamily:jr.windowFontFamily}},descriptionCfg:{style:{fontFamily:jr.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(e){return{}},getOptions:function(e,t){return"move"===t||t?.includes("bbox")?e:(0,ue.deepMix)({},this.options,this.getCustomConfig(e)||{},e)},draw:function(e,t){t.shapeMap={},this.mergeStyle=this.getOptions(e);var n=this.drawShape(e,t);if(n.set("className",this.itemType+"-shape"),t.shapeMap[this.itemType+"-shape"]=n,e.label){var i=this.drawLabel(e,t);i.set("className",this.itemType+oC),t.shapeMap[this.itemType+oC]=i}return n},afterDraw:function(e,t,n){},drawShape:function(e,t){return null},drawLabel:function(e,t){var n=(this.mergeStyle||this.getOptions(e)||{}).labelCfg,o=this.getLabelStyle(e,n||{},t),a=o.rotate;delete o.rotate;var s=t.addShape("text",{attrs:o,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0});if(t.shapeMap["text-shape"]=s,!isNaN(a)&&""!==a){var u=s.getBBox(),l=[1,0,0,0,1,0,0,0,1];if(o.rotateCenter)switch(o.rotateCenter){case"center":default:l=Yv(l,[["t",-u.width/2,-u.height/2],["r",a],["t",u.width/2,u.height/2]]);break;case"lefttop":l=Yv(l,[["t",-o.x,-o.y],["r",a],["t",o.x,o.y]]);break;case"leftcenter":l=Yv(l,[["t",-o.x,-o.y-u.height/2],["r",a],["t",o.x,o.y+u.height/2]])}else l=Yv(l,[["t",-o.x,-o.y-u.height/2],["r",a],["t",o.x,o.y+u.height/2]]);s.setMatrix(l)}if(o.background){var c=this.drawLabelBg(e,t,s),f=this.itemType+aC;c.set("classname",f),t.shapeMap[f]=c,s.toFront()}return s},drawLabelBg:function(e,t,n){var o=(0,ue.mix)({},this.options.labelCfg,e.labelCfg),a=this.getLabelBgStyleByPosition(n,o),s=t.addShape("rect",{name:"text-bg-shape",attrs:a,labelRelated:!0});return t.shapeMap["text-bg-shape"]=s,s},getLabelStyleByPosition:function(e,t,n){return{text:e.label}},getLabelBgStyleByPosition:function(e,t){return{}},getLabelStyle:function(e,t,n){var i=this.getLabelStyleByPosition(e,t,n),o="".concat(this.itemType,"Label");return(0,De.__assign)((0,De.__assign)((0,De.__assign)({},jr[o]?jr[o].style:null),i),t.style)},getShapeStyle:function(e){return e.style},update:function(e,t,n){this.updateShapeStyle(e,t,n),this.updateLabel(e,t,n)},updateShapeStyle:function(e,t,n){var i,o=t.getContainer(),a=t.getKeyShape(),s=(0,ue.mix)({},a.attr(),e.style),u=function(f){var h,d=s[f];(0,ue.isPlainObject)(d)?((null===(i=o.shapeMap)||void 0===i?void 0:i[f])||o.find(function(m){return m.get("name")===f}))?.attr(d):a.attr(((h={})[f]=d,h))};for(var l in s)u(l)},updateLabel:function(e,t,n){var i,o;if(e.label||""===e.label){var a=t.getContainer(),s=(this.mergeStyle||this.getOptions({},n)||{}).labelCfg,u=void 0===s?{}:s,l=this.itemType+oC,c=a.shapeMap[l]||a.find(function(Z){return Z.get("className")===l}),f=this.itemType+aC,h=a.shapeMap[f]||a.find(function(Z){return Z.get("className")===f});if(c){(!n||"bbox|label"===n||"edge"===this.itemType&&"style"!==n)&&(u=(0,ue.deepMix)(u,e.labelCfg));var g=this.getLabelStyleByPosition(e,u,a),m=null===(i=e.labelCfg)||void 0===i?void 0:i.style,_=(0,De.__assign)((0,De.__assign)({},g),m),D=_.rotate;if(delete _.rotate,isNaN(D)||""===D)1!==(null===(o=c.getMatrix())||void 0===o?void 0:o[4])&&c.resetMatrix(),c.attr(_);else{var L=[1,0,0,0,1,0,0,0,1];L=Yv(L,[["t",-_.x,-_.y],["r",D],["t",_.x,_.y]]),_.matrix=L,c.attr(_)}if(h)if(_.background){var O=this.getLabelBgStyleByPosition(c,u);h.attr(O)}else a.removeChild(h);else _.background&&((h=this.drawLabelBg(e,a,c)).set("classname",f),a.shapeMap[f]=h,c.toFront())}else{var d=this.drawLabel(e,a);d.set("className",l),a.shapeMap[l]=d}}},afterUpdate:function(e,t){},setState:function(e,t,n){var i,o,a,s=n.get("keyShape");if(s&&!s.destroyed){var u=n.getType(),l=(0,ue.isBoolean)(t)?e:"".concat(e,":").concat(t),c=this.getStateStyle(l,n),f=n.getStateStyle(l);if(f||c){var h=(0,ue.mix)({},f||c),d=n.getContainer(),g={x:1,y:1,cx:1,cy:1,matrix:1};if("combo"===u&&(g.r=1,g.width=1,g.height=1),t){var m=function(kt){var Ln,Kn=h[kt];(0,ue.isPlainObject)(Kn)&&!Cw.includes(kt)?((null===(a=d.shapeMap)||void 0===a?void 0:a[kt])||d.find(function(On){return On.get("name")===kt}))?.attr(Kn):s.attr(((Ln={})[kt]=Kn,Ln))};for(var _ in h)m(_)}else{var D=rw(n.getCurrentStatesStyle()),L=n.getModel(),O=(0,ue.mix)({},L.style,rw(n.getOriginStyle())),Z=s.get("name"),le=s.attr(),pe={};Object.keys(le).forEach(function(Tt){if("img"!==Tt){var kt=le[Tt];pe[Tt]=kt&&"object"===iC(kt)?(0,ue.clone)(kt):kt}});var Ee={},Re=function(kt){var Ln=h[kt];if((0,ue.isPlainObject)(Ln)&&!Cw.includes(kt)){var Kn=d.shapeMap[kt]||d.find(function(Vn){return Vn.get("name")===kt});if(Kn){var mn=rw(Kn.attr());(0,ue.each)(Ln,function(Vn,rr){kt===Z&&pe[rr]&&!g[rr]?(delete pe[rr],s.attr(rr,O[kt][rr]||Aw[u][rr])):(mn[rr]||0===mn[rr])&&(delete mn[rr],Kn.attr(rr,O[kt][rr]||Aw[u][rr]))}),Ee[kt]=mn}}else pe[kt]&&!g[kt]&&(delete pe[kt],s.attr(kt,O[kt]||(O[Z]?O[Z][kt]:void 0)||Aw[u][kt]))};for(var Ve in h)Re(Ve);for(var _ in Z?Ee[Z]=pe:(0,ue.mix)(Ee,pe),D)if(!g[_]){var Ue=D[_];(!(0,ue.isPlainObject)(Ue)||Cw.includes(_))&&(Z?((0,ue.mix)(O[Z],((o={})[_]=Ue,o)),delete O[_]):(0,ue.mix)(O,((i={})[_]=Ue,i)),delete D[_])}var at={};(0,ue.deepMix)(at,O,Ee,D);var _t=!1,vn=function(kt){var Ln,Kn,mn=at[kt];if((0,ue.isPlainObject)(mn)&&!Cw.includes(kt)){var On=d.shapeMap[kt]||d.find(function(rr){return rr.get("name")===kt});On&&(("text"===On.get("type")||On.get("labelRelated"))&&(delete mn.x,delete mn.y,delete mn.matrix),kt===Z&&("combo"===u&&(delete mn.r,delete mn.width,delete mn.height),_t=!0),On.attr(mn))}else if(!_t){var Vn=mn||Aw[u][kt];"combo"===u?Z||s.attr(((Ln={})[kt]=Vn,Ln)):s.attr(((Kn={})[kt]=Vn,Kn))}};for(var Cn in at)vn(Cn)}}}},getStateStyle:function(e,t){var n=t.getModel(),i=t.getType(),o=this.getOptions(n),a=o.stateStyles,s=o.style,u=void 0===s?{}:s,l=n.stateStyles?n.stateStyles[e]:a&&a[e];return"combo"===i?(0,ue.clone)(l):(0,ue.mix)({},u,l)},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t,n;return e?.anchorPoints||(null===(t=this.getCustomConfig(e))||void 0===t?void 0:t.anchorPoints)||(null===(n=this.options)||void 0===n?void 0:n.anchorPoints)}},BJ={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:jr.nodeLabel.offset,getSize:function(e){var t,n=(null===(t=this.mergeStyle)||void 0===t?void 0:t.size)||e.size||this.getOptions({}).size||jr.defaultNode.size;return(0,ue.isArray)(n)&&1===n.length&&(n=[n[0],n[0]]),(0,ue.isArray)(n)||(n=[n,n]),n},getLabelStyleByPosition:function(e,t){var n=t.maxLength,i=e.label;n&&(i=KL(i,n));var o=t.position||this.labelPosition;if("center"===o)return{x:0,y:0,text:i,textBaseline:"middle",textAlign:"center"};var a=t.offset;(0,ue.isNil)(a)&&(a=this.offset);var u,s=this.getSize(e);switch(o){case"top":u={x:0,y:-s[1]/2-a,textBaseline:"bottom",textAlign:"center"};break;case"bottom":u={x:0,y:s[1]/2+a,textBaseline:"top",textAlign:"center"};break;case"left":u={x:-s[0]/2-a,y:0,textBaseline:"middle",textAlign:"right"};break;default:u={x:s[0]/2+a,y:0,textBaseline:"middle",textAlign:"left"}}return u.text=i,u},getLabelBgStyleByPosition:function(e,t){var n;if(!e)return{};var i=null===(n=t.style)||void 0===n?void 0:n.background;if(!i)return{};var o=e.getBBox(),a=YM(i.padding),s=o.width+a[1]+a[3],u=o.height+a[0]+a[2];return(0,De.__assign)((0,De.__assign)({x:o.minX-a[3],y:o.minY-a[0]},i),{width:s,height:u})},drawShape:function(e,t){var n=this.shapeType,i=this.getShapeStyle(e),o=t.addShape(n,{attrs:i,draggable:!0,name:"node-shape"});return t.shapeMap["node-shape"]=o,o},updateLinkPoints:function(e,t){var u,n=(this.mergeStyle||this.getOptions(e)).linkPoints,i=t.shapeMap["link-point-left"]||t.find(function(at){return"link-point-left"===at.get("className")}),o=t.shapeMap["link-point-right"]||t.find(function(at){return"link-point-right"===at.get("className")}),a=t.shapeMap["link-point-top"]||t.find(function(at){return"link-point-top"===at.get("className")}),s=t.shapeMap["link-point-bottom"]||t.find(function(at){return"link-point-bottom"===at.get("className")});i&&(u=i.attr()),o&&!u&&(u=o.attr()),a&&!u&&(u=a.attr()),s&&!u&&(u=s.attr()),u||(u=n);var l=(0,ue.mix)({},u,e.linkPoints),c=l.fill,f=l.stroke,h=l.lineWidth,d=l.size/2;d||(d=l.r);var g=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},m=g.left,_=g.right,D=g.top,L=g.bottom,O=this.getSize(e),Z=O[0],le=O[1],pe={r:d,fill:c,stroke:f,lineWidth:h};if(i)m||void 0===m?i.attr((0,De.__assign)((0,De.__assign)({},pe),{x:-Z/2,y:0})):(i.remove(),delete t.shapeMap["link-point-left"]);else if(m){var Ee="link-point-left";t.shapeMap[Ee]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},pe),{x:-Z/2,y:0}),className:Ee,name:Ee,isAnchorPoint:!0})}if(o)!_&&void 0!==_&&(o.remove(),delete t.shapeMap["link-point-right"]),o.attr((0,De.__assign)((0,De.__assign)({},pe),{x:Z/2,y:0}));else if(_){var Re="link-point-right";t.shapeMap[Re]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},pe),{x:Z/2,y:0}),className:Re,name:Re,isAnchorPoint:!0})}if(a)!D&&void 0!==D&&(a.remove(),delete t.shapeMap["link-point-top"]),a.attr((0,De.__assign)((0,De.__assign)({},pe),{x:0,y:-le/2}));else if(D){var Ve="link-point-top";t.shapeMap[Ve]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},pe),{x:0,y:-le/2}),className:Ve,name:Ve,isAnchorPoint:!0})}if(s)L||void 0===L?s.attr((0,De.__assign)((0,De.__assign)({},pe),{x:0,y:le/2})):(s.remove(),delete t.shapeMap["link-point-bottom"]);else if(L){var Ue="link-point-bottom";t.shapeMap[Ue]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},pe),{x:0,y:le/2}),className:Ue,name:Ue,isAnchorPoint:!0})}},updateShape:function(e,t,n,i,o){t.get("keyShape").attr((0,De.__assign)({},n)),this.updateLabel(e,t,o),i&&this.updateIcon(e,t)},updateIcon:function(e,t){var n=this,i=t.getContainer(),o=(this.mergeStyle||this.getOptions(e)).icon,a=e.icon?e.icon:{show:void 0,text:void 0},s=a.show,u=a.text,l=i.shapeMap["".concat(this.type,"-icon")]||i.find(function(D){return D.get("name")==="".concat(n.type,"-icon")});if(l)if(s||void 0===s){var c=(0,ue.mix)({},l.attr(),o),f=c.width,h=void 0===f?20:f,d=c.height,g=void 0===d?20:d;("iconfont"===c.fontFamily||c.hasOwnProperty("text"))&&(h=0,g=0),l.attr((0,De.__assign)((0,De.__assign)({},c),{x:-h/2,y:-g/2}))}else l.remove(),delete i.shapeMap["".concat(this.type,"-icon")];else if(s){var m="".concat(this.type,"-icon");u?i.shapeMap[m]=i.addShape("text",{attrs:(0,De.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:m,name:m}):(h=o.width,g=o.height,i.shapeMap[m]=i.addShape("image",{attrs:(0,De.__assign)((0,De.__assign)({},o),{x:-h/2,y:-g/2}),className:m,name:m}));var _=i.shapeMap["node-label"]||i.find(function(D){return"node-label"===D.get("name")});_&&_.toFront()}}},jJ=(0,De.__assign)((0,De.__assign)({},sC),BJ);Os.registerNode("single-node",jJ);var Dw="edge-shape",GJ={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:jr.defaultEdge.size,style:{x:0,y:0,stroke:jr.defaultEdge.style.stroke,lineAppendWidth:jr.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:jr.edgeLabel.style.fill,fontSize:jr.edgeLabel.style.fontSize,fontFamily:jr.windowFontFamily}},stateStyles:(0,De.__assign)({},jr.edgeStateStyles)},getPath:function(e){var t=[];return(0,ue.each)(e,function(n,i){t.push(0===i?["M",n.x,n.y]:["L",n.x,n.y])}),t},getShapeStyle:function(e){var i=(0,ue.mix)({},this.options.style,{stroke:e.color},e.style),o=e.size||jr.defaultEdge.size,a=(e=this.getPathPoints(e)).startPoint,s=e.endPoint,u=this.getControlPoints(e),l=[a];u&&(l=l.concat(u)),l.push(s);var c=this.getPath(l);return(0,ue.mix)({},jr.defaultEdge.style,{stroke:jr.defaultEdge.color,lineWidth:o,path:c},i)},updateShapeStyle:function(e,t,n){var i,o=t.getContainer(),a=(null===(i=t.getKeyShape)||void 0===i?void 0:i.call(t))||o.shapeMap["edge-shape"],s=e.size,u=(e=this.getPathPoints(e)).startPoint,l=e.endPoint,c=this.getControlPoints(e),f=[u];c&&(f=f.concat(c)),f.push(l);var h=a.attr(),d=e.style||{};void 0===d.stroke&&(d.stroke=e.color);var _={radius:d.radius};c||(_={source:e.sourceNode,target:e.targetNode,offset:d.offset,radius:d.radius});var D=this.getPath(f,_),L={};"move"===n?L={path:D}:(h.endArrow&&!1===d.endArrow&&(e.style.endArrow={path:""}),h.startArrow&&!1===d.startArrow&&(e.style.startArrow={path:""}),void 0===(L=(0,De.__assign)({},e.style)).lineWidth&&(L.lineWdith=((0,ue.isNumber)(s)?s:s?.[0])||h.lineWidth),void 0===L.path&&(L.path=D),void 0===L.stroke&&(L.stroke=h.stroke||e.color)),a&&a.attr(L)},getLabelStyleByPosition:function(e,t,n){var s,i=t.position||this.labelPosition,o={},a=n?.shapeMap[Dw];s="start"===i?0:"end"===i?1:.5;var c,u=t.refX||this.refX,l=t.refY||this.refY;if(e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y)return o.x=e.startPoint.x+u,o.y=e.startPoint.y+l,o.text=e.label,o;c=(0,ue.isNil)(t.autoRotate)?this.labelAutoRotate:t.autoRotate;var f=YL(a,s,u,l,c);return o.x=f.x,o.y=f.y,o.rotate=f.rotate,o.textAlign=this._getTextAlign(i,f.angle),o.text=e.label,o},getLabelBgStyleByPosition:function(e,t){if(!e)return{};var n=e.getBBox(),i=t.style&&t.style.background;if(!i)return{};var o=i.padding,a=n.width+o[1]+o[3],s=n.height+o[0]+o[2],u=(0,De.__assign)((0,De.__assign)({},i),{width:a,height:s,x:n.minX-o[3],y:n.minY-o[0],matrix:[1,0,0,0,1,0,0,0,1]});return((0,ue.isNil)(t.autoRotate)?this.labelAutoRotate:t.autoRotate)&&(u.matrix=e.attr("matrix")||[1,0,0,0,1,0,0,0,1]),u},_getTextAlign:function(e,t){var n="center";return t?(t%=2*Math.PI,"center"!==e&&(n=t>=0&&t<=Math.PI/2||t>=1.5*Math.PI&&t<2*Math.PI?e:function zJ(r){var e=r;return"start"===r?e="end":"end"===r&&(e="start"),e}(e)),n):e},getControlPoints:function(e){return e.controlPoints},getPathPoints:function(e){return e},drawShape:function(e,t){var n=this.getShapeStyle(e),i=t.addShape("path",{className:Dw,name:Dw,attrs:n});return t.shapeMap[Dw]=i,i},drawLabel:function(e,t){var i=(0,ue.deepMix)({},this.options.labelCfg,e.labelCfg),o=this.getLabelStyle(e,i,t),a=o.rotate;delete o.rotate;var s=t.addShape("text",{attrs:o,name:"text-shape",labelRelated:!0});if(t.shapeMap["text-shape"]=s,!isNaN(a)&&""!==a&&s.rotateAtStart(a),o.background){var u=this.drawLabelBg(e,t,s,o,a),l=this.itemType+aC;u.set("classname",l),t.shapeMap[l]=u,s.toFront()}return s},drawLabelBg:function(e,t,n,i,o){var s=(0,ue.deepMix)({},this.options.labelCfg,e.labelCfg),u=this.getLabelBgStyleByPosition(n,s),l=t.addShape("rect",{name:"text-bg-shape",attrs:u,labelRelated:!0});return t.shapeMap["text-bg-shape"]=l,l}},UJ=(0,De.__assign)((0,De.__assign)({},sC),GJ);Os.registerEdge("single-edge",UJ),Os.registerEdge("line",{getControlPoints:function(){}},"single-edge"),Os.registerEdge("spline",{getPath:function(e){return pF(e)}},"single-edge"),Os.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(e){var o,a,t=e.startPoint,n=e.endPoint,i_x=(t.x+n.x)/2,i_y=(t.y+n.y)/2;if(void 0!==e.controlPoints){if(o=tM(t,a=e.controlPoints[0],n),this.clockwise=t.x<=n.x&&t.y>n.y?o.x>a.x?0:1:t.x<=n.x&&t.y<n.y?o.x>a.x?1:0:t.x>n.x&&t.y<=n.y?o.y<a.y?0:1:o.y<a.y?1:0,(a.x-t.x)/(a.y-t.y)==(n.x-t.x)/(n.y-t.y))return[]}else{void 0===e.curveOffset&&(e.curveOffset=this.curveOffset),(0,ue.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),this.clockwise=e.curveOffset<0?0:1;var s={x:n.x-t.x,y:n.y-t.y},u=Math.atan2(s.y,s.x);a={x:e.curveOffset*Math.cos(-Math.PI/2+u)+i_x,y:e.curveOffset*Math.sin(-Math.PI/2+u)+i_y},o=tM(t,a,n)}var l=Z1(t,o);return[{x:l,y:l}]},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(2===e.length?["L",e[1].x,e[1].y]:["A",e[1].x,e[1].y,0,0,this.clockwise,e[2].x,e[2].y]),t}},"single-edge"),Os.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(e){var t=e.controlPoints;if(!t||!t.length){var n=e.startPoint,i=e.endPoint;void 0===e.curveOffset&&(e.curveOffset=this.curveOffset),void 0===e.curvePosition&&(e.curvePosition=this.curvePosition),(0,ue.isArray)(this.curveOffset)&&(e.curveOffset=e.curveOffset[0]),(0,ue.isArray)(this.curvePosition)&&(e.curvePosition=e.curveOffset[0]),t=[Mw(n,i,e.curvePosition,e.curveOffset)]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["Q",e[1].x,e[1].y,e[2].x,e[2].y]),t}},"single-edge"),Os.registerEdge("cubic",{curvePosition:[.5,.5],curveOffset:[-20,20],getControlPoints:function(e){var t=e.controlPoints;if(void 0===e.curveOffset&&(e.curveOffset=this.curveOffset),void 0===e.curvePosition&&(e.curvePosition=this.curvePosition),(0,ue.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,ue.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]),!t||!t.length||t.length<2){var n=e.startPoint,i=e.endPoint;t=[Mw(n,i,e.curvePosition[0],e.curveOffset[0]),Mw(n,i,e.curvePosition[1],e.curveOffset[1])]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]),t}},"single-edge"),Os.registerEdge("cubic-vertical",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,n=e.endPoint;void 0===e.curvePosition&&(e.curvePosition=this.curvePosition),void 0===e.curveOffset&&(e.curveOffset=this.curveOffset),void 0===e.minCurveOffset&&(e.minCurveOffset=this.minCurveOffset),(0,ue.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,ue.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,ue.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var i=n.y-t.y,o=[0,0];return e.curveOffset?o=e.curveOffset:Math.abs(i)<Math.abs(e.minCurveOffset[0])&&(o=e.minCurveOffset),[{x:t.x,y:t.y+i*this.curvePosition[0]+o[0]},{x:n.x,y:n.y-i*this.curvePosition[1]+o[1]}]}},"cubic"),Os.registerEdge("cubic-horizontal",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,n=e.endPoint;void 0===e.curvePosition&&(e.curvePosition=this.curvePosition),void 0===e.curveOffset&&(e.curveOffset=this.curveOffset),void 0===e.minCurveOffset&&(e.minCurveOffset=this.minCurveOffset),(0,ue.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,ue.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,ue.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var i=n.x-t.x,o=[0,0];return e.curveOffset?o=e.curveOffset:Math.abs(i)<Math.abs(e.minCurveOffset[0])&&(o=e.minCurveOffset),[{x:t.x+i*this.curvePosition[0]+o[0],y:t.y},{x:n.x-i*this.curvePosition[1]+o[1],y:n.y}]}},"cubic"),Os.registerEdge("loop",{getPathPoints:function(e){return $L(e)},getControlPoints:function(e){return e.controlPoints},afterDraw:function(e){e.controlPoints=void 0},afterUpdate:function(e){e.controlPoints=void 0}},"cubic");var VJ={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:jr.comboLabel.refX,refY:jr.comboLabel.refY,options:{style:{stroke:jr.defaultCombo.style.stroke,fill:jr.defaultCombo.style.fill,lineWidth:jr.defaultCombo.style.lineWidth},labelCfg:{style:{fill:jr.comboLabel.style.fill,fontSize:jr.comboLabel.style.fontSize,fontFamily:jr.windowFontFamily}},stateStyles:(0,De.__assign)({},jr.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(e){var t=(0,ue.clone)(e.size||this.options.size||jr.defaultCombo.size);return(0,ue.isArray)(t)&&1===t.length&&(t=[t[0],t[0]]),(0,ue.isArray)(t)||(t=[t,t]),t},getLabelStyleByPosition:function(e,t){var n=t.position||this.labelPosition,i=e.style,o=e.padding||this.options.padding;(0,ue.isArray)(o)&&(o=Math.max.apply(Math,o));var a=t.refX,s=t.refY;(0,ue.isNil)(a)&&(a=this.refX),(0,ue.isNil)(s)&&(s=this.refY);var f,u=this.getSize(e),c=(Math.max(i.r,u[0]/2)||u[0]/2)+o;switch(n){case"top":f={x:0,y:-c-s,textBaseline:"bottom",textAlign:"center"};break;case"bottom":f={x:0,y:c+s,textBaseline:"bottom",textAlign:"center"};break;case"left":f={x:-c+a,y:0,textAlign:"left"};break;case"center":f={x:0,y:0,text:e.label,textAlign:"center"};break;default:f={x:c+a,y:0,textAlign:"right"}}return f.text=e.label,f},drawShape:function(e,t){var n=this.shapeType,i=this.getShapeStyle(e);return t.addShape(n,{attrs:i,draggable:!0,name:"combo-shape"})},updateCollapsedIcon:function(e,t,n){var i=e.collapsed,o=e.collapsedSubstituteIcon,s=Object.assign({},this.options.collapsedSubstituteIcon,void 0===o?{}:o),u=s.show,l=s.img,c=s.width,f=s.height,h=t.getContainer(),d=h.find(function(D){return"combo-collapsed-substitute-icon"===D.get("name")}),g=d&&!d.destroyed,m=t.get("keyShape");if(i&&u){if(g)d.show();else{var _={width:c||2*n.r||n.width,height:f||2*n.r||n.height};d=h.addShape("image",{attrs:(0,De.__assign)({img:l,x:-_.width/2,y:-_.height/2},_),name:"combo-collapsed-substitute-icon",draggable:!0})}m.hide()}else g&&(d.hide(),m.show())},updateShape:function(e,t,n){var i=this,o=t.get("keyShape");t.get("animate")&&(void 0===e.animate?this.options.animate:e.animate)&&o.animate?(e.collapsed||this.updateCollapsedIcon(e,t,n),o.animate(n,{duration:200,easing:"easeLinear",callback:function(){e.collapsed&&i.updateCollapsedIcon(e,t,n)}})):(o.attr((0,De.__assign)({},n)),this.updateCollapsedIcon(e,t,n)),this.updateLabel(e,t)}},HJ=(0,De.__assign)((0,De.__assign)({},sC),VJ);Os.registerCombo("single-combo",HJ),Os.registerCombo("circle",{options:{size:[jr.defaultCombo.size[0],jr.defaultCombo.size[0]],padding:Math.max.apply(Math,jr.defaultCombo.padding),animate:!0,style:{stroke:jr.defaultCombo.style.stroke,fill:jr.defaultCombo.style.fill,lineWidth:jr.defaultCombo.style.lineWidth},labelCfg:{style:{fill:jr.comboLabel.style.fill,fontSize:jr.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:(0,De.__assign)({},jr.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(e,t){var n=this.getShapeStyle(e);return delete n.height,delete n.width,t.addShape("circle",{attrs:n,className:"circle-combo",name:"circle-combo",draggable:!0})},getShapeStyle:function(e){var t=this.options.style,n=e.padding||this.options.padding;(0,ue.isArray)(n)&&(n=Math.max.apply(Math,n));var s,o=(0,ue.mix)({},t,{stroke:e.color},e.style),a=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;if(a)s=(0,ue.isNumber)(a)?a/2:a[0]/2;else{var u=this.getSize(e);s=!(0,ue.isNumber)(o.r)||isNaN(o.r)?u[0]/2||jr.defaultCombo.style.r:Math.max(o.r,u[0]/2)||u[0]/2}o.r=s+n;var l=(0,De.__assign)({x:0,y:0},o);return e.style?e.style.r=s:e.style={r:s},l},update:function(e,t){var n=this.getSize(e),i=e.padding||this.options.padding;(0,ue.isArray)(i)&&(i=Math.max.apply(Math,i));var s,o=(0,ue.clone)(e.style),a=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;s=a?(0,ue.isNumber)(a)?a/2:a[0]/2:Math.max(o.r,n[0]/2)||n[0]/2,o.r=s+i;var u=t.get("sizeCache");u&&(u.r=o.r);var l={stroke:e.color},c=t.get("keyShape"),f=(0,ue.mix)({},c.attr(),l,o);e.style?e.style.r=s:e.style={r:s},this.updateShape(e,t,f,!0)}},"single-combo"),Os.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:jr.defaultCombo.style.stroke,fill:jr.defaultCombo.style.fill,lineWidth:jr.defaultCombo.style.lineWidth},labelCfg:{style:{fill:jr.comboLabel.style.fill,fontSize:jr.comboLabel.style.fontSize,fontFamily:jr.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,De.__assign)({},jr.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(e,t){var n=this.getShapeStyle(e);return t.addShape("rect",{attrs:n,className:"rect-combo",name:"rect-combo",draggable:!0})},getLabelStyleByPosition:function(e,t){var n=t.position||this.labelPosition,i=e.style,o=e.padding||this.options.padding;(0,ue.isNumber)(o)&&(o=[o,o,o,o]);var a=t.refX,s=t.refY;(0,ue.isNil)(a)&&(a=this.refX),(0,ue.isNil)(s)&&(s=this.refY);var h,u=-i.width/2-o[3],l=i.width/2+o[1],c=-i.height/2-o[0],f=i.height/2+o[2];switch(n){case"top":h={x:u+a,y:c+s,textBaseline:"top",textAlign:"left"};break;case"bottom":h={x:0,y:f+s,textBaseline:"top",textAlign:"center"};break;case"left":h={x:u+s,y:0,textAlign:"left"};break;case"center":h={x:0,y:0,text:e.label,textAlign:"center"};break;case"top-center":h={x:0,y:c+s,textBaseline:"top",textAlign:"center"};break;default:h={x:l+a,y:0,textAlign:"right"}}return h.text=e.label,h},getShapeStyle:function(e){var t=this.options.style,n=e.padding||this.options.padding;(0,ue.isNumber)(n)&&(n=[n,n,n,n]);var s,u,o=(0,ue.mix)({},t,{stroke:e.color},e.style),a=this.getSize(e),l=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;l?(0,ue.isNumber)(l)?(s=l,u=l):(s=l[0],u=l[1]):(s=!(0,ue.isNumber)(o.width)||isNaN(o.width)?a[0]||jr.defaultCombo.style.width:Math.max(o.width,a[0])||a[0],u=!(0,ue.isNumber)(o.height)||isNaN(o.height)?a[1]||jr.defaultCombo.style.height:Math.max(o.height,a[1])||a[1]);var c=-s/2-n[3],f=-u/2-n[0];o.width=s+n[1]+n[3],o.height=u+n[0]+n[2];var h=(0,De.__assign)({x:c,y:f},o);return e.style?(e.style.width=s,e.style.height=u):e.style={width:s,height:u},h},update:function(e,t){var n=this.getSize(e),i=e.padding||this.options.padding;(0,ue.isNumber)(i)&&(i=[i,i,i,i]);var a,s,o=(0,ue.clone)(e.style),u=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;u?(0,ue.isNumber)(u)?(a=u,s=u):(a=u[0],s=u[1]):(a=Math.max(o.width,n[0])||n[0],s=Math.max(o.height,n[1])||n[1]),o.width=a+i[1]+i[3],o.height=s+i[0]+i[2];var l=t.get("sizeCache");l&&(l.width=o.width,l.height=o.height),o.x=-a/2-i[3],o.y=-s/2-i[0];var c={stroke:e.color},f=t.get("keyShape"),h=(0,ue.mix)({},f.attr(),c,o);e.style?(e.style.width=a,e.style.height=s):e.style={width:a,height:s},this.updateShape(e,t,h,!1)}},"single-combo"),Os.registerNode("simple-circle",{options:{size:jr.defaultNode.size,style:{x:0,y:0,stroke:jr.defaultNode.style.stroke,fill:jr.defaultNode.style.fill,lineWidth:jr.defaultNode.style.lineWidth},labelCfg:{style:{fill:jr.nodeLabel.style.fill,fontSize:jr.nodeLabel.style.fontSize,fontFamily:jr.windowFontFamily}},stateStyles:(0,De.__assign)({},jr.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(e,t){var n=this.getShapeStyle(e),i="".concat(this.type,"-keyShape"),o=t.addShape("circle",{attrs:n,className:"".concat(this.type,"-keyShape"),name:i,draggable:!0});return t.shapeMap[i]=o,o},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,i=(0,ue.deepMix)({},t,{stroke:e.color}),o=this.getSize(e);return(0,De.__assign)({x:0,y:0,r:o[0]/2},i)},update:function(e,t,n){var i=this.getSize(e),o={stroke:e.color,r:i[0]/2},a=t.get("keyShape"),s=(0,ue.deepMix)({},a.attr(),o,e.style);this.updateShape(e,t,s,!0,n)}},"single-node"),Os.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:jr.defaultNode.style.stroke,fill:jr.defaultNode.style.fill,lineWidth:jr.defaultNode.style.lineWidth},labelCfg:{style:{fill:jr.nodeLabel.style.fill,fontSize:jr.nodeLabel.style.fontSize,fontFamily:jr.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,De.__assign)({},jr.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(e,t){var n=this.getShapeStyle(e);return t.addShape("rect",{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0})},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,i=(0,ue.mix)({},t,{stroke:e.color}),o=this.getSize(e),a=i.width||o[0],s=i.height||o[1];return(0,De.__assign)({x:-a/2,y:-s/2,width:a,height:s},i)},update:function(e,t,n){t.getContainer();var o=(this.mergeStyle||this.getOptions(e)).style,a=this.getSize(e),s=t.get("keyShape");e.size||(a[0]=s.attr("width")||o.width,a[1]=s.attr("height")||o.height);var u={stroke:e.color,x:-a[0]/2,y:-a[1]/2,width:a[0],height:a[1]},l=(0,ue.mix)({},o,s.attr(),u);l=(0,ue.mix)(l,e.style),this.updateShape(e,t,l,!1,n)}},"single-node"),Os.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:jr.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(e,t){var n=this.shapeType,i=this.getShapeStyle(e);delete i.fill;var o=t.addShape(n,{attrs:i,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return this.drawClip(e,o),o},drawClip:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).clipCfg;if(n.show){var i=n.type,o=n.x,a=n.y,s=n.style;if("circle"===i)t.setClip({type:"circle",attrs:(0,De.__assign)({r:n.r,x:o,y:a},s)});else if("rect"===i){var l=n.width,c=n.height;t.setClip({type:"rect",attrs:(0,De.__assign)({x:o-l/2,y:a-c/2,width:l,height:c},s)})}else"ellipse"===i?t.setClip({type:"ellipse",attrs:(0,De.__assign)({x:o,y:a,rx:n.rx,ry:n.ry},s)}):"polygon"===i?t.setClip({type:"polygon",attrs:(0,De.__assign)({points:n.points},s)}):"path"===i&&t.setClip({type:"path",attrs:(0,De.__assign)({path:n.path},s)})}},getShapeStyle:function(e){var t=this.mergeStyle||this.getOptions(e),n=t.style,i=t.img,o=this.getSize(e),a=o[0],s=o[1];return n&&(a=n.width||o[0],s=n.height||o[1]),(0,De.__assign)({x:-a/2,y:-s/2,width:a,height:s,img:i},n)},updateShapeStyle:function(e,t){var n=t.getContainer(),i="".concat(this.itemType,"-shape"),o=n.shapeMap[i]||n.find(function(s){return s.get("className")===i})||t.getKeyShape(),a=this.getShapeStyle(e);o&&!o.destroyed&&o.attr(a)}},"single-node");const TF={collapse:function(e,t,n){return[["M",e-n,t],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0],["M",e-n+4,t],["L",e+n-4,t]]},expand:function(e,t,n){return[["M",e-n,t],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0],["M",e-n+4,t],["L",e-n+2*n-4,t],["M",e-n+n,t-n+4],["L",e,t+n-4]]},upTriangle:function(e,t,n){var i=n*Math.cos(Math.PI/6),o=n*Math.sin(Math.PI/6);return[["M",e-i,t+o],["L",e+i,t+o],["L",e,t-n],["Z"]]},downTriangle:function(e,t,n){var i=n*Math.cos(Math.PI/6),o=n*Math.sin(Math.PI/6);return[["M",e-i,t-o],["L",e+i,t-o],["L",e,t+n],["Z"]]}},Nd=Os;var WJ=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],IF=function(e){return"force"===e||"g6force"===e||"gForce"===e||"force2"===e},$J=Nl;const su=(0,De.__assign)((0,De.__assign)((0,De.__assign)((0,De.__assign)((0,De.__assign)((0,De.__assign)((0,De.__assign)({},I),j),x),Q),E),b),{transform:$J,mat3:Tf});var XJ=function(){function r(e){this.graph=e,this.layoutCfg=e.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return r.prototype.initLayout=function(){},r.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},r.prototype.getLayoutCfgType=function(e){var t=e.type;if(t)return t;var n=e.pipes;return Array.isArray(n)?n.map(function(i){return i?.type||""}):null},r.prototype.isLayoutTypeSame=function(e){var t=this.getLayoutCfgType(e),n=Array.isArray(this.layoutType),i=Array.isArray(t);return n&&i?this.layoutType.every(function(o,a){return o===t[a]}):!Array.isArray(t)&&!Array.isArray(this.layoutType)&&e?.type===this.layoutType},r.prototype.refreshLayout=function(){var e=this,t=e.graph,n=e.layoutType,i=e.layoutCfg;if(t){var a=(void 0===i?{}:i).animate,s=void 0===a&&("force"===n||"force2"===n),u=IF(n)&&(a||s);t.get("animate")&&!u?t.positionsAnimate("comboCombined"===n):t.refreshPositions("comboCombined"===n)}},r.prototype.changeLayout=function(e){var t=e.disableTriggerLayout,n=(0,De.__rest)(e,["disableTriggerLayout"]);this.layoutCfg=n,this.layoutType=n.type||this.layoutType,!t&&this.layout()},r.prototype.changeData=function(e){this.layout(e)},r.prototype.destoryLayoutMethods=function(){var t=[];return this.layoutMethods?.forEach(function(n){var i,o=null===(i=n.getType)||void 0===i?void 0:i.call(n);o&&t.push(o),n.destroy()}),this.layoutMethods=[],t},r.prototype.destroyLayout=function(){this.destoryLayoutMethods();var e=this.graph;e&&!e.get("destroyed")&&e.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},r.prototype.setDataFromGraph=function(){for(var e,t=[],n=[],i=[],o=[],a=[],s=[],u=[],l=this.graph.getNodes(),c=this.graph.getEdges(),f=this.graph.getCombos(),h=l.length,d=0;d<h;d++){var g=l[d];if(g&&!g.destroyed){var m=g.getModel();if(!g.isVisible()){n.push(m);continue}t.push(m)}}var _=c.length;for(d=0;d<_;d++){var D=c[d];if(D&&!D.destroyed){if(m=D.getModel(),!D.isVisible()){o.push(m);continue}m.isComboEdge?a.push(m):i.push(m)}}var L=f.length;for(d=0;d<L;d++){var O=f[d];if(!O.destroyed){if(m=O.getModel(),!O.isVisible()){u.push(m);continue}s.push(m)}}return{nodes:t,hiddenNodes:n,edges:i,hiddenEdges:o,combos:s,hiddenCombos:u,comboEdges:a,vedges:null===(e=this.graph.get("vedges"))||void 0===e?void 0:e.map(function(Z){return Z.getModel()})}},r.prototype.relayout=function(e){var t=this,n=this,i=n.graph,o=n.layoutMethods,a=n.layoutCfg;if(i&&!i.get("destroyed")){if(e){this.data=this.setDataFromGraph();var s=this.data.nodes;if(!s)return!1;this.initPositions(a.center,s)}i.emit("beforelayout");var u=Promise.resolve();o?.forEach(function(l,c){var f=a[c]||a;u=u.then(function(){var h,d=t.execLayoutMethod(f,c);return c===o.length-1&&(null===(h=a.onAllLayoutEnd)||void 0===h||h.call(a)),d})})}},r.prototype.filterLayoutData=function(e,t){var a,s,n=e.nodes,i=e.edges,o=(0,De.__rest)(e,["nodes","edges"]);if(!n)return e;a=(0,ue.isFunction)(t?.nodesFilter)?t.nodesFilter:function(){return!0};var u=n.filter(a);if((0,ue.isFunction)(t?.edgesFilter))s=t.edgesFilter;else{var l=u.reduce(function(c,f){return c[f.id]=!0,c},{});s=function(f){return l[f.source]&&l[f.target]}}return(0,De.__assign)({nodes:u,edges:i.filter(s)},o)},r.prototype.getLayoutBBox=function(e){var n=(0,ue.groupBy)(this.graph.getNodes(),function(a){return a.getModel().layoutOrder}),i=Object.values(n).map(function(a){var s=QR(a);return s.size=[s.width,s.height],s});return{groupNodes:Object.values((0,ue.groupBy)(e,"layoutOrder")),layoutNodes:i}},r.prototype.layoutAnimate=function(){},r.prototype.moveToZero=function(){var n=this.graph.get("data").nodes;if(null!=n[0].x&&!kf(n[0].x)){for(var i=[0,0],o=n.length,a=0;a<o;a++)i[0]+=(s=n[a]).x,i[1]+=s.y;for(i[0]/=n.length,i[1]/=n.length,a=0;a<o;a++){var s;(s=n[a]).x-=i[0],s.y-=i[1]}}},r.prototype.initPositions=function(e,t){var n,i=this.graph;if(!t)return!1;var o=t.filter(function(O){return kf(O.x)||kf(O.y)}),a=o?o.length:0;if(a){if(null===(n=this.initWithPreset)||void 0===n?void 0:n.call(this))return!1;var u=.85*i.get("width"),l=.85*i.get("height"),c=Math.ceil(Math.sqrt(a)*(u/l)),h=u/(c-1),d=l/(Math.ceil(a/c)-1);(!isFinite(h)||!h)&&(h=0),(!isFinite(d)||!h)&&(d=0);for(var g=e[0]-u/2,m=e[1]-l/2,_=!0,D=0;D<a;D++){var L=o[D];kf(+L.x)&&(_=!1,L.x=D%c*h+g),kf(+L.y)&&(_=!1,L.y=Math.floor(D/c)*d+m)}return _}},r.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},r}();const OF=XJ;var Ph=Nd.registerNode,NF=Nd.registerEdge,KJ=Nd.registerCombo,LF=VN.registerBehavior,pr=jr,ZJ=G(4610);function kF(r,e,t,n){var i=r-t,o=e-n;return Math.sqrt(i*i+o*o)}function Jg(r,e,t,n,i,o){return i>=r&&i<=r+t&&o>=e&&o<=e+n}function hy(r,e){return!(e.minX>r.maxX||e.maxX<r.minX||e.minY>r.maxY||e.maxY<r.minY)}function RF(r,e){return r[0]===e[0]&&r[1]===e[1]}var eee=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,tee=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,nee=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,FF=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function BF(r,e){var t=r.match(FF);(0,ue.each)(t,function(n){var i=n.split(":");e.addColorStop(i[0],i[1])})}function aee(r,e,t){var n=e.getBBox();if(isNaN(n.x)||isNaN(n.y)||isNaN(n.width)||isNaN(n.height))return t;if((0,ue.isString)(t)){if("("===t[1]||"("===t[2]){if("l"===t[0])return function ree(r,e,t){var s,u,n=eee.exec(t),i=parseFloat(n[1])%360*(Math.PI/180),o=n[2],a=e.getBBox();i>=0&&i<.5*Math.PI?(s={x:a.minX,y:a.minY},u={x:a.maxX,y:a.maxY}):.5*Math.PI<=i&&i<Math.PI?(s={x:a.maxX,y:a.minY},u={x:a.minX,y:a.maxY}):Math.PI<=i&&i<1.5*Math.PI?(s={x:a.maxX,y:a.maxY},u={x:a.minX,y:a.minY}):(s={x:a.minX,y:a.maxY},u={x:a.maxX,y:a.minY});var l=Math.tan(i),c=l*l,d=r.createLinearGradient(s.x,s.y,(u.x-s.x+l*(u.y-s.y))/(c+1)+s.x,l*(u.x-s.x+l*(u.y-s.y))/(c+1)+s.y);return BF(o,d),d}(r,e,t);if("r"===t[0])return function iee(r,e,t){var n=tee.exec(t),i=parseFloat(n[1]),o=parseFloat(n[2]),a=parseFloat(n[3]),s=n[4];if(0===a){var u=s.match(FF);return u[u.length-1].split(":")[1]}var l=e.getBBox(),c=l.maxX-l.minX,f=l.maxY-l.minY,h=Math.sqrt(c*c+f*f)/2,d=r.createRadialGradient(l.minX+c*i,l.minY+f*o,0,l.minX+c/2,l.minY+f/2,a*h);return BF(s,d),d}(r,e,t);if("p"===t[0])return function oee(r,e,t){if(e.get("patternSource")&&e.get("patternSource")===t)return e.get("pattern");var n,i,o=nee.exec(t),a=o[1],s=o[2];function u(){n=r.createPattern(i,a),e.set("pattern",n),e.set("patternSource",t)}switch(a){case"a":a="repeat";break;case"x":a="repeat-x";break;case"y":a="repeat-y";break;default:a="no-repeat"}return i=new Image,s.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=s,i.complete?u():(i.onload=u,i.src=i.src),n}(r,e,t)}return t}return t instanceof CanvasPattern?t:void 0}function Tw(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function uC(r,e){return Tw(r)*Tw(e)?(r[0]*e[0]+r[1]*e[1])/(Tw(r)*Tw(e)):1}function jF(r,e){return(r[0]*e[1]<r[1]*e[0]?-1:1)*Math.acos(uC(r,e))}function zF(r,e){var t=e[1],n=e[2],i=(0,ue.mod)((0,ue.toRadian)(e[3]),2*Math.PI),o=e[4],a=e[5],s=r[0],u=r[1],l=e[6],c=e[7],f=Math.cos(i)*(s-l)/2+Math.sin(i)*(u-c)/2,h=-1*Math.sin(i)*(s-l)/2+Math.cos(i)*(u-c)/2,d=f*f/(t*t)+h*h/(n*n);d>1&&(t*=Math.sqrt(d),n*=Math.sqrt(d));var g=t*t*(h*h)+n*n*(f*f),m=g?Math.sqrt((t*t*(n*n)-g)/g):1;o===a&&(m*=-1),isNaN(m)&&(m=0);var _=n?m*t*h/n:0,D=t?m*-n*f/t:0,L=(s+l)/2+Math.cos(i)*_-Math.sin(i)*D,O=(u+c)/2+Math.sin(i)*_+Math.cos(i)*D,Z=[(f-_)/t,(h-D)/n],le=[(-1*f-_)/t,(-1*h-D)/n],pe=jF([1,0],Z),Ee=jF(Z,le);return uC(Z,le)<=-1&&(Ee=Math.PI),uC(Z,le)>=1&&(Ee=0),0===a&&Ee>0&&(Ee-=2*Math.PI),1===a&&Ee<0&&(Ee+=2*Math.PI),{cx:L,cy:O,rx:RF(r,[l,c])?0:t,ry:RF(r,[l,c])?0:n,startAngle:pe,endAngle:pe+Ee,xRotation:i,arcFlag:o,sweepFlag:a}}var Iw=Math.sin,Ow=Math.cos,lC=Math.atan2,Pw=Math.PI;function GF(r,e,t,n,i,o,a){var s=e.stroke,u=e.lineWidth,f=lC(n-o,t-i),h=new vC({type:"path",canvas:r.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*Ow(Pw/6)+","+10*Iw(Pw/6)+" L0,0 L"+10*Ow(Pw/6)+",-"+10*Iw(Pw/6),stroke:s,lineWidth:u}});h.translate(i,o),h.rotateAtPoint(i,o,f),r.set(a?"startArrowShape":"endArrowShape",h)}function UF(r,e,t,n,i,o,a){var l=e.stroke,c=e.lineWidth,f=a?e.startArrow:e.endArrow,h=f.d,d=f.fill,g=f.stroke,m=f.lineWidth,_=(0,De.__rest)(f,["d","fill","stroke","lineWidth"]),O=lC(n-o,t-i);h&&(i-=Ow(O)*h,o-=Iw(O)*h);var Z=new vC({type:"path",canvas:r.get("canvas"),isArrowShape:!0,attrs:(0,De.__assign)((0,De.__assign)({},_),{stroke:g||l,lineWidth:m||c,fill:d})});Z.translate(i,o),Z.rotateAtPoint(i,o,O),r.set(a?"startArrowShape":"endArrowShape",Z)}function ep(r,e,t,n,i){var o=lC(n-e,t-r);return{dx:Ow(o)*i,dy:Iw(o)*i}}function cC(r,e,t,n,i,o){"object"==typeof e.startArrow?UF(r,e,t,n,i,o,!0):e.startArrow?GF(r,e,t,n,i,o,!0):r.set("startArrowShape",null)}function fC(r,e,t,n,i,o){"object"==typeof e.endArrow?UF(r,e,t,n,i,o,!1):e.endArrow?GF(r,e,t,n,i,o,!1):r.set("startArrowShape",null)}var VF={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function Xv(r,e){var t=e.attr();for(var n in t){var i=t[n],o=VF[n]?VF[n]:n;"matrix"===o&&i?r.transform(i[0],i[1],i[3],i[4],i[6],i[7]):"lineDash"===o&&r.setLineDash?(0,ue.isArray)(i)&&r.setLineDash(i):("strokeStyle"===o||"fillStyle"===o?i=aee(r,e,i):"globalAlpha"===o&&(i*=r.globalAlpha),r[o]=i)}}function hC(r,e,t){for(var n=0;n<e.length;n++){var i=e[n];i.cfg.visible?i.draw(r,t):i.skipDraw()}}function uee(r,e,t){var n=r.get("refreshElements");(0,ue.each)(n,function(i){if(i!==r)for(var o=i.cfg.parent;o&&o!==r&&!o.cfg.refresh;)o.cfg.refresh=!0,o=o.cfg.parent}),n[0]===r?gC(e,t):dC(e,t)}function dC(r,e){for(var t=0;t<r.length;t++){var n=r[t];if(n.cfg.visible)if(n.cfg.hasChanged)n.cfg.refresh=!0,n.isGroup()&&gC(n.cfg.children,e);else if(n.cfg.refresh)n.isGroup()&&dC(n.cfg.children,e);else{var i=lee(n,e);n.cfg.refresh=i,i&&n.isGroup()&&dC(n.cfg.children,e)}}}function HF(r){for(var e=0;e<r.length;e++){var t=r[e];t.cfg.hasChanged=!1,t.isGroup()&&!t.destroyed&&HF(t.cfg.children)}}function gC(r,e){for(var t=0;t<r.length;t++){var n=r[t];n.cfg.refresh=!0,n.isGroup()&&gC(n.get("children"),e)}}function lee(r,e){var t=r.cfg.cacheCanvasBBox;return r.cfg.isInView&&t&&hy(t,e)}function WF(r,e,t,n){var i=t.path,o=t.startArrow,a=t.endArrow;if(i){var s=[0,0],u=[0,0],l={dx:0,dy:0};e.beginPath();for(var c=0;c<i.length;c++){var f=i[c],h=f[0];if(0===c&&o&&o.d)l=ep((d=r.getStartTangent())[0][0],d[0][1],d[1][0],d[1][1],o.d);else if(c===i.length-2&&"Z"===i[c+1][0]&&a&&a.d)"Z"===i[c+1][0]&&(l=ep((d=r.getEndTangent())[0][0],d[0][1],d[1][0],d[1][1],a.d));else if(c===i.length-1&&a&&a.d&&"Z"!==i[0]){var d;l=ep((d=r.getEndTangent())[0][0],d[0][1],d[1][0],d[1][1],a.d)}var m=l.dx,_=l.dy;switch(h){case"M":e.moveTo(f[1]-m,f[2]-_),u=[f[1],f[2]];break;case"L":e.lineTo(f[1]-m,f[2]-_);break;case"Q":e.quadraticCurveTo(f[1],f[2],f[3]-m,f[4]-_);break;case"C":e.bezierCurveTo(f[1],f[2],f[3],f[4],f[5]-m,f[6]-_);break;case"A":var D=void 0;n?(D=n[c])||(D=zF(s,f),n[c]=D):D=zF(s,f);var L=D.cx,O=D.cy,Z=D.rx,le=D.ry,pe=D.startAngle,Ee=D.endAngle,Re=D.xRotation,Ve=D.sweepFlag;if(e.ellipse)e.ellipse(L,O,Z,le,Re,pe,Ee,1-Ve);else{var Ue=Z>le?Z:le,at=Z>le?1:Z/le,_t=Z>le?le/Z:1;e.translate(L,O),e.rotate(Re),e.scale(at,_t),e.arc(0,0,Ue,pe,Ee,1-Ve),e.scale(1/at,1/_t),e.rotate(-Re),e.translate(-L,-O)}break;case"Z":e.closePath()}if("Z"===h)s=u;else{var vn=f.length;s=[f[vn-2],f[vn-1]]}}}}function $F(r,e){var t=r.get("canvas");t&&("remove"===e&&(r._cacheCanvasBBox=r.get("cacheCanvasBBox")),r.get("hasChanged")||(r.set("hasChanged",!0),r.cfg.parent&&r.cfg.parent.get("hasChanged")||(t.refreshElement(r,e,t),t.get("autoDraw")&&t.draw())))}var dee=function(r){function e(){return null!==r&&r.apply(this,arguments)||this}return(0,De.__extends)(e,r),e.prototype.onCanvasChange=function(t){$F(this,t)},e.prototype.getShapeBase=function(){return w},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,n){n&&(t.save(),Xv(t,n),n.createPath(t),t.restore(),t.clip(),n._afterDraw())},e.prototype.cacheCanvasBBox=function(){var n=[],i=[];(0,ue.each)(this.cfg.children,function(h){var d=h.cfg.cacheCanvasBBox;d&&h.cfg.isInView&&(n.push(d.minX,d.maxX),i.push(d.minY,d.maxY))});var o=null;if(n.length){var a=(0,ue.min)(n),s=(0,ue.max)(n),u=(0,ue.min)(i),l=(0,ue.max)(i);o={minX:a,minY:u,x:a,y:u,maxX:s,maxY:l,width:s-a,height:l-u};var c=this.cfg.canvas;if(c){var f=c.getViewRange();this.set("isInView",hy(o,f))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",o)},e.prototype.draw=function(t,n){var i=this.cfg.children;i.length&&(!n||this.cfg.refresh)&&(t.save(),Xv(t,this),this._applyClip(t,this.getClip()),hC(t,i,n),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(hR);const YF=dee;var gee=function(r){function e(){return null!==r&&r.apply(this,arguments)||this}return(0,De.__extends)(e,r),e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return(0,De.__assign)((0,De.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return w},e.prototype.getGroupBase=function(){return YF},e.prototype.onCanvasChange=function(t){$F(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),n=this.getHitLineWidth(),o=pR(t)(this),a=n/2,s=o.x-a,u=o.y-a;return{x:s,minX:s,y:u,minY:u,width:o.width+n,height:o.height+n,maxX:o.x+o.width+a,maxY:o.y+o.height+a}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,n){n&&(t.save(),Xv(t,n),n.createPath(t),t.restore(),t.clip(),n._afterDraw())},e.prototype.draw=function(t,n){var i=this.cfg.clipShape;if(n){if(!1===this.cfg.refresh)return void this.set("hasChanged",!1);if(!hy(n,this.getCanvasBBox()))return this.set("hasChanged",!1),void(this.cfg.isInView&&this._afterDraw())}t.save(),Xv(t,this),this._applyClip(t,i),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var n=this.getCanvasBBox(),i=hy(n,t);this.set("isInView",i),this.set("cacheCanvasBBox",i?n:null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var n=this.attrs,i=n.lineWidth,o=n.opacity,a=n.strokeOpacity,s=n.fillOpacity;this.isFill()&&((0,ue.isNil)(s)||1===s?this.fill(t):(t.globalAlpha=s,this.fill(t),t.globalAlpha=o)),this.isStroke()&&i>0&&(!(0,ue.isNil)(a)&&1!==a&&(t.globalAlpha=a),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,n){var i=this.isStroke(),o=this.isFill(),a=this.getHitLineWidth();return this.isInStrokeOrPath(t,n,i,o,a)},e.prototype.isInStrokeOrPath=function(t,n,i,o,a){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}(dR);const Nc=gee;var pee=function(r){function e(){return null!==r&&r.apply(this,arguments)||this}return(0,De.__extends)(e,r),e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return(0,De.__assign)((0,De.__assign)({},t),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,n,i,o,a){var s=this.attr(),c=s.r,f=a/2,h=kF(s.x,s.y,t,n);return o&&i?h<=c+f:o?h<=c:!!i&&h>=c-f&&h<=c+f},e.prototype.createPath=function(t){var n=this.attr(),i=n.x,o=n.y,a=n.r;t.beginPath(),t.arc(i,o,a,0,2*Math.PI,!1),t.closePath()},e}(Nc);const vee=pee;function Nw(r,e,t,n){return r/(t*t)+e/(n*n)}var mee=function(r){function e(){return null!==r&&r.apply(this,arguments)||this}return(0,De.__extends)(e,r),e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return(0,De.__assign)((0,De.__assign)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,n,i,o,a){var s=this.attr(),u=a/2,l=s.x,c=s.y,f=s.rx,h=s.ry,d=(t-l)*(t-l),g=(n-c)*(n-c);return o&&i?Nw(d,g,f+u,h+u)<=1:o?Nw(d,g,f,h)<=1:!!i&&Nw(d,g,f-u,h-u)>=1&&Nw(d,g,f+u,h+u)<=1},e.prototype.createPath=function(t){var n=this.attr(),i=n.x,o=n.y,a=n.rx,s=n.ry;if(t.beginPath(),t.ellipse)t.ellipse(i,o,a,s,0,0,2*Math.PI,!1);else{var u=a>s?a:s,l=a>s?1:a/s,c=a>s?s/a:1;t.save(),t.translate(i,o),t.scale(l,c),t.arc(0,0,u,0,2*Math.PI),t.restore(),t.closePath()}},e}(Nc);const yee=mee;function XF(r){return r instanceof HTMLElement&&(0,ue.isString)(r.nodeName)&&"CANVAS"===r.nodeName.toUpperCase()}var bee=function(r){function e(){return null!==r&&r.apply(this,arguments)||this}return(0,De.__extends)(e,r),e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return(0,De.__assign)((0,De.__assign)({},t),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(!0===this.get("toDraw")){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var n=this,i=this.attrs;if((0,ue.isString)(t)){var o=new Image;o.onload=function(){if(n.destroyed)return!1;n.attr("img",o),n.set("loading",!1),n._afterLoading();var a=n.get("callback");a&&a.call(n)},o.crossOrigin="Anonymous",o.src=t,this.set("loading",!0)}else t instanceof Image?(i.width||(i.width=t.width),i.height||(i.height=t.height)):XF(t)&&(i.width||(i.width=Number(t.getAttribute("width"))),i.height||Number(t.getAttribute("height")))},e.prototype.onAttrChange=function(t,n,i){r.prototype.onAttrChange.call(this,t,n,i),"img"===t&&this._setImage(n)},e.prototype.createPath=function(t){if(this.get("loading"))return this.set("toDraw",!0),void this.set("context",t);var n=this.attr(),i=n.x,o=n.y,a=n.width,s=n.height,u=n.sx,l=n.sy,c=n.swidth,f=n.sheight,h=n.img;(h instanceof Image||XF(h))&&((0,ue.isNil)(u)||(0,ue.isNil)(l)||(0,ue.isNil)(c)||(0,ue.isNil)(f)?t.drawImage(h,i,o,a,s):t.drawImage(h,u,l,c,f,i,o,a,s))},e}(Nc);const wee=bee;function Ld(r,e,t,n,i,o,a){var s=Math.min(r,t),u=Math.max(r,t),l=Math.min(e,n),c=Math.max(e,n),f=i/2;return o>=s-f&&o<=u+f&&a>=l-f&&a<=c+f&&Is_pointToLine(r,e,t,n,o,a)<=i/2}var xee=function(r){function e(){return null!==r&&r.apply(this,arguments)||this}return(0,De.__extends)(e,r),e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return(0,De.__assign)((0,De.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,n,i){r.prototype.onAttrChange.call(this,t,n,i),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),n=t.x1,i=t.y1,o=t.x2,a=t.y2,u=t.endArrow;t.startArrow&&cC(this,t,o,a,n,i),u&&fC(this,t,n,i,o,a)},e.prototype.isInStrokeOrPath=function(t,n,i,o,a){if(!i||!a)return!1;var s=this.attr();return Ld(s.x1,s.y1,s.x2,s.y2,a,t,n)},e.prototype.createPath=function(t){var n=this.attr(),i=n.x1,o=n.y1,a=n.x2,s=n.y2,u=n.startArrow,l=n.endArrow,c={dx:0,dy:0},f={dx:0,dy:0};u&&u.d&&(c=ep(i,o,a,s,n.startArrow.d)),l&&l.d&&(f=ep(i,o,a,s,n.endArrow.d)),t.beginPath(),t.moveTo(i+c.dx,o+c.dy),t.lineTo(a-f.dx,s-f.dy)},e.prototype.afterDrawPath=function(t){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(t),i&&i.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr();return Is_length(t.x1,t.y1,t.x2,t.y2)},e.prototype.getPoint=function(t){var n=this.attr();return Is_pointAt(n.x1,n.y1,n.x2,n.y2,t)},e}(Nc);const Eee=xee;var _ee={circle:function(r,e,t){return[["M",r-t,e],["A",t,t,0,1,0,r+t,e],["A",t,t,0,1,0,r-t,e]]},square:function(r,e,t){return[["M",r-t,e-t],["L",r+t,e-t],["L",r+t,e+t],["L",r-t,e+t],["Z"]]},diamond:function(r,e,t){return[["M",r-t,e],["L",r,e-t],["L",r+t,e],["L",r,e+t],["Z"]]},triangle:function(r,e,t){var n=t*Math.sin(.3333333333333333*Math.PI);return[["M",r-t,e+n],["L",r,e-n],["L",r+t,e+n],["Z"]]},"triangle-down":function(r,e,t){var n=t*Math.sin(.3333333333333333*Math.PI);return[["M",r-t,e-n],["L",r+t,e-n],["L",r,e+n],["Z"]]}},See=function(r){function e(){return null!==r&&r.apply(this,arguments)||this}return(0,De.__extends)(e,r),e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(t,n,i){r.prototype.onAttrChange.call(this,t,n,i),-1!==["symbol","x","y","r","radius"].indexOf(t)&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return(0,ue.isNil)(t.r)?t.radius:t.r},e.prototype._getPath=function(){var s,u,t=this.attr(),n=t.x,i=t.y,o=t.symbol||"circle",a=this._getR(t);if((0,ue.isFunction)(o))u=GR(u=(s=o)(n,i,a));else{if(!(s=e.Symbols[o]))return console.warn(o+" marker is not supported."),null;u=s(n,i,a)}return u},e.prototype.createPath=function(t){WF(this,t,{path:this._getPath()},this.get("paramsCache"))},e.Symbols=_ee,e}(Nc);const Mee=See;function qF(r,e,t){var n=RR();return r.createPath(n),n.isPointInPath(e,t)}function pC(r){return Math.abs(r)<1e-6?0:r<0?-1:1}function Aee(r,e,t){return(t[0]-r[0])*(e[1]-r[1])==(e[0]-r[0])*(t[1]-r[1])&&Math.min(r[0],e[0])<=t[0]&&t[0]<=Math.max(r[0],e[0])&&Math.min(r[1],e[1])<=t[1]&&t[1]<=Math.max(r[1],e[1])}function KF(r,e,t){var n=!1,i=r.length;if(i<=2)return!1;for(var o=0;o<i;o++){var a=r[o],s=r[(o+1)%i];if(Aee(a,s,[e,t]))return!0;pC(a[1]-t)>0!=pC(s[1]-t)>0&&pC(e-(t-a[1])*(a[0]-s[0])/(a[1]-s[1])-a[0])<0&&(n=!n)}return n}function dy(r,e,t,n,i,o,a,s){var u=(Math.atan2(s-e,a-r)+2*Math.PI)%(2*Math.PI);if(u<n||u>i)return!1;var l={x:r+t*Math.cos(u),y:e+t*Math.sin(u)};return kF(l.x,l.y,a,s)<=o/2}var Dee=Nl;const Lw=(0,De.__assign)({hasArc:function Tee(r){for(var e=!1,t=r.length,n=0;n<t;n++){var o=r[n][0];if("C"===o||"A"===o||"Q"===o){e=!0;break}}return e},extractPolygons:function Oee(r){for(var e=r.length,t=[],n=[],i=[],o=0;o<e;o++){var a=r[o],s=a[0];"M"===s?(i.length&&(n.push(i),i=[]),i.push([a[1],a[2]])):"Z"===s?i.length&&(t.push(i),i=[]):i.push([a[1],a[2]])}return i.length>0&&n.push(i),{polygons:t,polylines:n}},isPointInStroke:function Iee(r,e,t,n,i){for(var o=!1,a=e/2,s=0;s<r.length;s++){var u=r[s],l=u.currentPoint,c=u.params,f=u.prePoint,h=u.box;if(!h||Jg(h.x-a,h.y-a,h.width+e,h.height+e,t,n)){switch(u.command){case"L":case"Z":o=Ld(f[0],f[1],l[0],l[1],e,t,n);break;case"Q":o=ER.pointDistance(f[0],f[1],c[1],c[2],c[3],c[4],t,n)<=e/2;break;case"C":o=sy.pointDistance(f[0],f[1],c[1],c[2],c[3],c[4],c[5],c[6],t,n,i)<=e/2;break;case"A":var m=u.arcParams,L=m.rx,O=m.ry,Z=m.startAngle,le=m.endAngle,Ee=[t,n,1],Re=L>O?L:O,at=Dee(null,[["t",-m.cx,-m.cy],["r",-m.xRotation],["s",1/(L>O?1:L/O),1/(L>O?O/L:1)]]);eM.transformMat3(Ee,Ee,at),o=dy(0,0,Re,Z,le,e,Ee[0],Ee[1])}if(o)break}}return o}},k);function ZF(r,e,t){for(var n=!1,i=0;i<r.length&&!(n=KF(r[i],e,t));i++);return n}var Pee=function(r){function e(){return null!==r&&r.apply(this,arguments)||this}return(0,De.__extends)(e,r),e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return(0,De.__assign)((0,De.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(t,n,i){r.prototype.onAttrChange.call(this,t,n,i),"path"===t&&this._setPathArr(n),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=GR(t);var n=Lw.hasArc(t);this.set("hasArc",n),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=qR(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var o,t=this.attr(),i=t.endArrow;t.startArrow&&cC(this,t,(o=this.getStartTangent())[0][0],o[0][1],o[1][0],o[1][1]),i&&fC(this,t,(o=this.getEndTangent())[0][0],o[0][1],o[1][0],o[1][1])},e.prototype.isInStrokeOrPath=function(t,n,i,o,a){var s=this.getSegments(),u=this.get("hasArc"),l=!1;if(i){var c=this.getTotalLength();l=Lw.isPointInStroke(s,a,t,n,c)}if(!l&&o)if(u)l=qF(this,t,n);else{var f=this.attr("path"),h=Lw.extractPolygons(f);l=ZF(h.polygons,t,n)||ZF(h.polylines,t,n)}return l},e.prototype.createPath=function(t){WF(this,t,this.attr(),this.get("paramsCache"))},e.prototype.afterDrawPath=function(t){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(t),i&&i.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return(0,ue.isNil)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var n=this.get("tCache");n||(this._calculateCurve(),this._setTcache(),n=this.get("tCache"));var i,o,a=this.get("curve");if(!n||0===n.length)return a?{x:a[0][1],y:a[0][2]}:null;(0,ue.each)(n,function(c,f){t>=c[0]&&t<=c[1]&&(i=(t-c[0])/(c[1]-c[0]),o=f)});var s=a[o];if((0,ue.isNil)(s)||(0,ue.isNil)(o))return null;var u=s.length,l=a[o+1];return sy.pointAt(s[u-2],s[u-1],l[1],l[2],l[3],l[4],l[5],l[6],i)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",Lw.pathToCurve(t))},e.prototype._setTcache=function(){var o,a,s,u,t=0,n=0,i=[],l=this.get("curve");if(l){if((0,ue.each)(l,function(c,f){u=c.length,(s=l[f+1])&&(t+=sy.length(c[u-2],c[u-1],s[1],s[2],s[3],s[4],s[5],s[6])||0)}),this.set("totalLength",t),0===t)return void this.set("tCache",[]);(0,ue.each)(l,function(c,f){u=c.length,(s=l[f+1])&&((o=[])[0]=n/t,a=sy.length(c[u-2],c[u-1],s[1],s[2],s[3],s[4],s[5],s[6]),o[1]=(n+=a||0)/t,i.push(o))}),this.set("tCache",i)}},e.prototype.getStartTangent=function(){var n,t=this.getSegments();if(t.length>1){var i=t[0].currentPoint,o=t[1].currentPoint,a=t[1].startTangent;n=[],a?(n.push([i[0]-a[0],i[1]-a[1]]),n.push([i[0],i[1]])):(n.push([o[0],o[1]]),n.push([i[0],i[1]]))}return n},e.prototype.getEndTangent=function(){var i,t=this.getSegments(),n=t.length;if(n>1){var o=t[n-2].currentPoint,a=t[n-1].currentPoint,s=t[n-1].endTangent;i=[],s?(i.push([a[0]-s[0],a[1]-s[1]]),i.push([a[0],a[1]])):(i.push([o[0],o[1]]),i.push([a[0],a[1]]))}return i},e}(Nc);const vC=Pee;function QF(r,e,t,n,i){var o=r.length;if(o<2)return!1;for(var a=0;a<o-1;a++)if(Ld(r[a][0],r[a][1],r[a+1][0],r[a+1][1],e,t,n))return!0;if(i){var f=r[0],h=r[o-1];if(Ld(f[0],f[1],h[0],h[1],e,t,n))return!0}return!1}var Nee=function(r){function e(){return null!==r&&r.apply(this,arguments)||this}return(0,De.__extends)(e,r),e.prototype.isInStrokeOrPath=function(t,n,i,o,a){var s=this.attr().points,u=!1;return i&&(u=QF(s,a,t,n,!0)),!u&&o&&(u=KF(s,t,n)),u},e.prototype.createPath=function(t){var i=this.attr().points;if(!(i.length<2)){t.beginPath();for(var o=0;o<i.length;o++){var a=i[o];0===o?t.moveTo(a[0],a[1]):t.lineTo(a[0],a[1])}t.closePath()}},e}(Nc);const Lee=Nee;var kee=function(r){function e(){return null!==r&&r.apply(this,arguments)||this}return(0,De.__extends)(e,r),e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return(0,De.__assign)((0,De.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,n,i){r.prototype.onAttrChange.call(this,t,n,i),this.setArrow(),-1!==["points"].indexOf(t)&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),n=this.attrs,i=n.points,a=n.endArrow,s=i.length,c=i[s-1][0],f=i[s-1][1];n.startArrow&&cC(this,t,i[1][0],i[1][1],i[0][0],i[0][1]),a&&fC(this,t,i[s-2][0],i[s-2][1],c,f)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,n,i,o,a){return!(!i||!a)&&QF(this.attr().points,a,t,n,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var n=this.attr(),i=n.points,o=n.startArrow,a=n.endArrow,s=i.length;if(!(i.length<2)){var h,u=i[0][0],l=i[0][1],c=i[s-1][0],f=i[s-1][1];o&&o.d&&(u+=(h=ep(u,l,i[1][0],i[1][1],o.d)).dx,l+=h.dy),a&&a.d&&(c-=(h=ep(i[s-2][0],i[s-2][1],c,f,a.d)).dx,f-=h.dy),t.beginPath(),t.moveTo(u,l);for(var d=0;d<s-1;d++){var g=i[d];t.lineTo(g[0],g[1])}t.lineTo(c,f)}},e.prototype.afterDrawPath=function(t){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(t),i&&i.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,n=this.get("totalLength");return(0,ue.isNil)(n)?(this.set("totalLength",BM_length(t)),this.get("totalLength")):n},e.prototype.getPoint=function(t){var o,a,n=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),(0,ue.each)(i,function(s,u){t>=s[0]&&t<=s[1]&&(o=(t-s[0])/(s[1]-s[0]),a=u)}),Is_pointAt(n[a][0],n[a][1],n[a+1][0],n[a+1][1],o)},e.prototype._setTcache=function(){var t=this.attr().points;if(t&&0!==t.length){var n=this.getTotalLength();if(!(n<=0)){var a,s,i=0,o=[];(0,ue.each)(t,function(u,l){t[l+1]&&((a=[])[0]=i/n,s=Is_length(u[0],u[1],t[l+1][0],t[l+1][1]),a[1]=(i+=s)/n,o.push(a))}),this.set("tCache",o)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,n=[];return n.push([t[1][0],t[1][1]]),n.push([t[0][0],t[0][1]]),n},e.prototype.getEndTangent=function(){var t=this.attr().points,n=t.length-1,i=[];return i.push([t[n-1][0],t[n-1][1]]),i.push([t[n][0],t[n][1]]),i},e}(Nc);const Ree=kee;var jee=function(r){function e(){return null!==r&&r.apply(this,arguments)||this}return(0,De.__extends)(e,r),e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return(0,De.__assign)((0,De.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,n,i,o,a){var s=this.attr(),u=s.x,l=s.y,c=s.width,f=s.height,h=s.radius;if(h){var g=!1;return i&&(g=function Bee(r,e,t,n,i,o,a,s){return Ld(r+i,e,r+t-i,e,o,a,s)||Ld(r+t,e+i,r+t,e+n-i,o,a,s)||Ld(r+t-i,e+n,r+i,e+n,o,a,s)||Ld(r,e+n-i,r,e+i,o,a,s)||dy(r+t-i,e+i,i,1.5*Math.PI,2*Math.PI,o,a,s)||dy(r+t-i,e+n-i,i,0,.5*Math.PI,o,a,s)||dy(r+i,e+n-i,i,.5*Math.PI,Math.PI,o,a,s)||dy(r+i,e+i,i,Math.PI,1.5*Math.PI,o,a,s)}(u,l,c,f,h,a,t,n)),!g&&o&&(g=qF(this,t,n)),g}var d=a/2;return o&&i?Jg(u-d,l-d,c+d,f+d,t,n):o?Jg(u,l,c,f,t,n):i?function Fee(r,e,t,n,i,o,a){var s=i/2;return Jg(r-s,e-s,t,i,o,a)||Jg(r+t-s,e-s,i,n,o,a)||Jg(r+s,e+n-s,t,i,o,a)||Jg(r-s,e+s,i,n,o,a)}(u,l,c,f,a,t,n):void 0},e.prototype.createPath=function(t){var n=this.attr(),i=n.x,o=n.y,a=n.width,s=n.height,u=n.radius;if(t.beginPath(),0===u)t.rect(i,o,a,s);else{var l=function see(r){var e=0,t=0,n=0,i=0;return(0,ue.isArray)(r)?1===r.length?e=t=n=i=r[0]:2===r.length?(e=n=r[0],t=i=r[1]):3===r.length?(e=r[0],t=i=r[1],n=r[2]):(e=r[0],t=r[1],n=r[2],i=r[3]):e=t=n=i=r,[e,t,n,i]}(u),c=l[0],f=l[1],h=l[2],d=l[3];t.moveTo(i+c,o),t.lineTo(i+a-f,o),0!==f&&t.arc(i+a-f,o+f,f,-Math.PI/2,0),t.lineTo(i+a,o+s-h),0!==h&&t.arc(i+a-h,o+s-h,h,0,Math.PI/2),t.lineTo(i+d,o+s),0!==d&&t.arc(i+d,o+s-d,d,Math.PI/2,Math.PI),t.lineTo(i,o+c),0!==c&&t.arc(i+c,o+c,c,Math.PI,1.5*Math.PI),t.closePath()}},e}(Nc);const zee=jee;var Gee=function(r){function e(){return null!==r&&r.apply(this,arguments)||this}return(0,De.__extends)(e,r),e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return(0,De.__assign)((0,De.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=BR(t)},e.prototype._setText=function(t){var n=null;(0,ue.isString)(t)&&-1!==t.indexOf("\n")&&(n=t.split("\n")),this.set("textArr",n)},e.prototype.onAttrChange=function(t,n,i){r.prototype.onAttrChange.call(this,t,n,i),t.startsWith("font")&&this._assembleFont(),"text"===t&&this._setText(n)},e.prototype._getSpaceingY=function(){var t=this.attrs,n=t.lineHeight,i=1*t.fontSize;return n?n-i:.14*i},e.prototype._drawTextArr=function(t,n,i){var h,o=this.attrs,a=o.textBaseline,s=o.x,u=o.y,l=1*o.fontSize,c=this._getSpaceingY(),f=FR(o.text,o.fontSize,o.lineHeight);(0,ue.each)(n,function(d,g){h=u+g*(c+l)-f+l,"middle"===a&&(h+=f-l-(f-l)/2),"top"===a&&(h+=f-l),(0,ue.isNil)(d)||(i?t.fillText(d,s,h):t.strokeText(d,s,h))})},e.prototype._drawText=function(t,n){var i=this.attr(),o=i.x,a=i.y,s=this.get("textArr");if(s)this._drawTextArr(t,s,n);else{var u=i.text;(0,ue.isNil)(u)||(n?t.fillText(u,o,a):t.strokeText(u,o,a))}},e.prototype.strokeAndFill=function(t){var n=this.attrs,i=n.lineWidth,o=n.opacity,a=n.strokeOpacity,s=n.fillOpacity;this.isStroke()&&i>0&&(!(0,ue.isNil)(a)&&1!==a&&(t.globalAlpha=o),this.stroke(t)),this.isFill()&&((0,ue.isNil)(s)||1===s?this.fill(t):(t.globalAlpha=s,this.fill(t),t.globalAlpha=o)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(Nc);const Uee=Gee;function JF(r,e,t){var n=r.getTotalMatrix();if(n){var i=function Vee(r,e){return e?qg(bk(e),r):r}([e,t,1],n);return[i[0],i[1]]}return[e,t]}function eB(r,e,t){if(r.isCanvas&&r.isCanvas())return!0;if(!bM(r)||!1===r.cfg.isInView)return!1;if(r.cfg.clipShape){var n=JF(r,e,t);if(r.isClipped(n[0],n[1]))return!1}var a=r.cfg.cacheCanvasBBox||r.getCanvasBBox();return e>=a.minX&&e<=a.maxX&&t>=a.minY&&t<=a.maxY}function tB(r,e,t){if(!eB(r,e,t))return null;for(var n=null,i=r.getChildren(),a=i.length-1;a>=0;a--){var s=i[a];if(s.isGroup())n=tB(s,e,t);else if(eB(s,e,t)){var u=s,l=JF(s,e,t);u.isInShape(l[0],l[1])&&(n=s)}if(n)break}return n}var Hee=function(r){function e(){return null!==r&&r.apply(this,arguments)||this}return(0,De.__extends)(e,r),e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},e.prototype.onCanvasChange=function(t){("attr"===t||"sort"===t||"changeSize"===t)&&(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return w},e.prototype.getGroupBase=function(){return YF},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||function QJ(){return window?window.devicePixelRatio:1}();return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),n=t.getContext("2d");return this.set("context",n),t},e.prototype.setDOMSize=function(t,n){r.prototype.setDOMSize.call(this,t,n);var i=this.get("context"),o=this.get("el"),a=this.getPixelRatio();o.width=a*t,o.height=a*n,a>1&&i.scale(a,a)},e.prototype.clear=function(){r.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),n=this.get("el");t.clearRect(0,0,n.width,n.height)},e.prototype.getShape=function(t,n){return this.get("quickHit")?tB(this,t,n):r.prototype.getShape.call(this,t,n,null)},e.prototype._getRefreshRegion=function(){var i,t=this.get("refreshElements"),n=this.getViewRange();return t.length&&t[0]===this?i=n:(i=function fee(r){if(!r.length)return null;var e=[],t=[],n=[],i=[];return(0,ue.each)(r,function(o){var a=function cee(r){var e;if(r.destroyed)e=r._cacheCanvasBBox;else{var t=r.get("cacheCanvasBBox"),n=t&&!(!t.width||!t.height),i=r.getCanvasBBox(),o=i&&!(!i.width||!i.height);n&&o?e=function JJ(r,e){return r&&e?{minX:Math.min(r.minX,e.minX),minY:Math.min(r.minY,e.minY),maxX:Math.max(r.maxX,e.maxX),maxY:Math.max(r.maxY,e.maxY)}:r||e}(t,i):n?e=t:o&&(e=i)}return e}(o);a&&(e.push(a.minX),t.push(a.minY),n.push(a.maxX),i.push(a.maxY))}),{minX:(0,ue.min)(e),minY:(0,ue.min)(t),maxX:(0,ue.max)(n),maxY:(0,ue.max)(i)}}(t),i&&(i.minX=Math.floor(i.minX),i.minY=Math.floor(i.minY),i.maxX=Math.ceil(i.maxX),i.maxY=Math.ceil(i.maxY),i.maxY+=1,this.get("clipView")&&(i=function hee(r,e){return r&&e&&hy(r,e)?{minX:Math.max(r.minX,e.minX),minY:Math.max(r.minY,e.minY),maxX:Math.min(r.maxX,e.maxX),maxY:Math.min(r.maxY,e.maxY)}:null}(i,n)))),i},e.prototype.refreshElement=function(t){this.get("refreshElements").push(t)},e.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((0,ue.clearAnimationFrame)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),n=this.get("el"),i=this.getChildren();t.clearRect(0,0,n.width,n.height),Xv(t,this),hC(t,i),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),n=this.get("refreshElements"),i=this.getChildren(),o=this._getRefreshRegion();o?(t.clearRect(o.minX,o.minY,o.maxX-o.minX,o.maxY-o.minY),t.save(),t.beginPath(),t.rect(o.minX,o.minY,o.maxX-o.minX,o.maxY-o.minY),t.clip(),Xv(t,this),uee(this,i,o),hC(t,i,o),t.restore()):n.length&&HF(n),(0,ue.each)(n,function(a){a.get("hasChanged")&&a.set("hasChanged",!1)}),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t=this,n=this.get("drawFrame");n||(n=(0,ue.requestAnimationFrame)(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)}),this.set("drawFrame",n))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},e}(fR);const Nh=Hee;var mC={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},ho={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"};function Rl(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function nB(r){var e=mC[r.type],t=r.getParent();if(!e)throw new Error("the type "+r.type+" is not supported by svg");var n=Rl(e);if(r.get("id")&&(n.id=r.get("id")),r.set("el",n),r.set("attrs",{}),t){var i=t.get("el");i||(i=t.createDom(),t.set("el",i)),i.appendChild(n)}return n}function rB(r,e){var t=r.get("el"),n=(0,ue.toArray)(t.children).sort(e),i=document.createDocumentFragment();n.forEach(function(o){i.appendChild(o)}),t.appendChild(i)}function gy(r){var e=r.attr().matrix;if(e){for(var t=r.cfg.el,n=[],i=0;i<9;i+=3)n.push(e[i]+","+e[i+1]);-1===(n=n.join(",")).indexOf("NaN")?t.setAttribute("transform","matrix("+n+")"):console.warn("invalid matrix:",e)}}function py(r,e){var t=r.getClip(),n=r.get("el");if(t){if(t&&!n.hasAttribute("clip-path")){nB(t),t.createPath(e);var i=e.addClip(t);n.setAttribute("clip-path","url(#"+i+")")}}else n.removeAttribute("clip-path")}function iB(r,e){e.forEach(function(t){t.draw(r)})}function oB(r,e){var t=r.get("canvas");if(t&&t.get("autoDraw")){var n=t.get("context"),i=r.getParent(),o=i?i.getChildren():[t],a=r.get("el");if("remove"===e)if(r.get("isClipShape")){var u=a&&a.parentNode,l=u&&u.parentNode;u&&l&&l.removeChild(u)}else a&&a.parentNode&&a.parentNode.removeChild(a);else if("show"===e)a.setAttribute("visibility","visible");else if("hide"===e)a.setAttribute("visibility","hidden");else if("zIndex"===e)!function Wee(r,e){var t=r.parentNode,n=Array.from(t.childNodes).filter(function(s){return 1===s.nodeType&&"defs"!==s.nodeName.toLowerCase()}),i=n[e],o=n.indexOf(r);if(i){if(o>e)t.insertBefore(r,i);else if(o<e){var a=n[e+1];a?t.insertBefore(r,a):t.appendChild(r)}}else t.appendChild(r)}(a,o.indexOf(r));else if("sort"===e){var c=r.get("children");c&&c.length&&rB(r,function(f,h){return c.indexOf(f)-c.indexOf(h)?1:0})}else"clear"===e?a&&(a.innerHTML=""):"matrix"===e?gy(r):"clip"===e?py(r,n):"attr"===e||"add"===e&&r.draw(n)}}var Yee=function(r){function e(){return null!==r&&r.apply(this,arguments)||this}return(0,De.__extends)(e,r),e.prototype.isEntityGroup=function(){return!0},e.prototype.createDom=function(){var t=Rl("g");this.set("el",t);var n=this.getParent();if(n){var i=n.get("el");i||(i=n.createDom(),n.set("el",i)),i.appendChild(t)}return t},e.prototype.afterAttrsChange=function(t){r.prototype.afterAttrsChange.call(this,t);var n=this.get("canvas");if(n&&n.get("autoDraw")){var i=n.get("context");this.createPath(i,t)}},e.prototype.onCanvasChange=function(t){oB(this,t)},e.prototype.getShapeBase=function(){return y},e.prototype.getGroupBase=function(){return e},e.prototype.draw=function(t){var n=this.getChildren(),i=this.get("el");this.get("destroyed")?i&&i.parentNode.removeChild(i):(i||this.createDom(),py(this,t),this.createPath(t),n.length&&iB(t,n))},e.prototype.createPath=function(t,n){var i=this.attr(),o=this.get("el");(0,ue.each)(n||i,function(a,s){ho[s]&&o.setAttribute(ho[s],a)}),gy(this)},e}(hR);const aB=Yee;var Xee=function(r){function e(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return(0,De.__extends)(e,r),e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return(0,De.__assign)((0,De.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.afterAttrsChange=function(t){r.prototype.afterAttrsChange.call(this,t);var n=this.get("canvas");if(n&&n.get("autoDraw")){var i=n.get("context");this.draw(i,t)}},e.prototype.getShapeBase=function(){return y},e.prototype.getGroupBase=function(){return aB},e.prototype.onCanvasChange=function(t){oB(this,t)},e.prototype.calculateBBox=function(){var t=this.get("el"),n=null;if(t)n=t.getBBox();else{var i=pR(this.get("type"));i&&(n=i(this))}if(n){var o=n.x,a=n.y,s=n.width,u=n.height,l=this.getHitLineWidth(),c=l/2,f=o-c,h=a-c;return{x:f,y:h,minX:f,minY:h,maxX:o+s+c,maxY:a+u+c,width:s+l,height:u+l}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},e.prototype.isFill=function(){var t=this.attr();return(t.fill||t.fillStyle||this.isClipShape())&&this.canFill},e.prototype.isStroke=function(){var t=this.attr();return(t.stroke||t.strokeStyle)&&this.canStroke},e.prototype.draw=function(t,n){var i=this.get("el");this.get("destroyed")?i&&i.parentNode.removeChild(i):(i||nB(this),py(this,t),this.createPath(t,n),this.shadow(t,n),this.strokeAndFill(t,n),this.transform(n))},e.prototype.createPath=function(t,n){},e.prototype.strokeAndFill=function(t,n){var i=n||this.attr(),o=i.fill,a=i.fillStyle,s=i.stroke,u=i.strokeStyle,l=i.fillOpacity,c=i.strokeOpacity,f=i.lineWidth,h=this.get("el");this.canFill&&(n?"fill"in i?this._setColor(t,"fill",o):"fillStyle"in i&&this._setColor(t,"fill",a):this._setColor(t,"fill",o||a),l&&h.setAttribute(ho.fillOpacity,l)),this.canStroke&&f>0&&(n?"stroke"in i?this._setColor(t,"stroke",s):"strokeStyle"in i&&this._setColor(t,"stroke",u):this._setColor(t,"stroke",s||u),c&&h.setAttribute(ho.strokeOpacity,c),f&&h.setAttribute(ho.lineWidth,f))},e.prototype._setColor=function(t,n,i){var o=this.get("el");if(i)if(i=i.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(i))(a=t.find("gradient",i))||(a=t.addGradient(i)),o.setAttribute(ho[n],"url(#"+a+")");else if(/^[p,P]{1}[\s]*\(/.test(i)){var a;(a=t.find("pattern",i))||(a=t.addPattern(i)),o.setAttribute(ho[n],"url(#"+a+")")}else o.setAttribute(ho[n],i);else o.setAttribute(ho[n],"none")},e.prototype.shadow=function(t,n){var i=this.attr(),o=n||i;(o.shadowOffsetX||o.shadowOffsetY||o.shadowBlur||o.shadowColor)&&function $ee(r,e){var t=r.cfg.el,n=r.attr(),i={dx:n.shadowOffsetX,dy:n.shadowOffsetY,blur:n.shadowBlur,color:n.shadowColor};if(i.dx||i.dy||i.blur||i.color){var o=e.find("filter",i);o||(o=e.addShadow(i)),t.setAttribute("filter","url(#"+o+")")}else t.removeAttribute("filter")}(this,t)},e.prototype.transform=function(t){var n=this.attr();(t||n).matrix&&gy(this)},e.prototype.isInShape=function(t,n){return this.isPointInPath(t,n)},e.prototype.isPointInPath=function(t,n){var i=this.get("el"),a=this.get("canvas").get("el").getBoundingClientRect(),l=document.elementFromPoint(t+a.left,n+a.top);return!(!l||!l.isEqualNode(i))},e.prototype.getHitLineWidth=function(){var t=this.attrs,n=t.lineWidth,i=t.lineAppendWidth;return this.isStroke()?n+i:0},e}(dR);const Fl=Xee;var qee=function(r){function e(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return(0,De.__extends)(e,r),e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return(0,De.__assign)((0,De.__assign)({},t),{x:0,y:0,r:0})},e.prototype.createPath=function(t,n){var i=this.attr(),o=this.get("el");(0,ue.each)(n||i,function(a,s){"x"===s||"y"===s?o.setAttribute("c"+s,a):ho[s]&&o.setAttribute(ho[s],a)})},e}(Fl);const Kee=qee;var Zee=function(r){function e(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return(0,De.__extends)(e,r),e.prototype.createPath=function(t,n){var i=this.attr(),o=this.get("el");if((0,ue.each)(n||i,function(l,c){ho[c]&&o.setAttribute(ho[c],l)}),"function"==typeof i.html){var a=i.html.call(this,i);if(a instanceof Element||a instanceof HTMLDocument){for(var s=o.childNodes,u=s.length-1;u>=0;u--)o.removeChild(s[u]);o.appendChild(a)}else o.innerHTML=a}else o.innerHTML=i.html},e}(Fl);const Qee=Zee;var Jee=function(r){function e(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return(0,De.__extends)(e,r),e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return(0,De.__assign)((0,De.__assign)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(t,n){var i=this.attr(),o=this.get("el");(0,ue.each)(n||i,function(a,s){"x"===s||"y"===s?o.setAttribute("c"+s,a):ho[s]&&o.setAttribute(ho[s],a)})},e}(Fl);const ete=Jee;var tte=function(r){function e(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return(0,De.__extends)(e,r),e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return(0,De.__assign)((0,De.__assign)({},t),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(t,n){var i=this,o=this.attr(),a=this.get("el");(0,ue.each)(n||o,function(s,u){"img"===u?i._setImage(o.img):ho[u]&&a.setAttribute(ho[u],s)})},e.prototype.setAttr=function(t,n){this.attrs[t]=n,"img"===t&&this._setImage(n)},e.prototype._setImage=function(t){var n=this.attr(),i=this.get("el");if((0,ue.isString)(t))i.setAttribute("href",t);else if(t instanceof window.Image)n.width||(i.setAttribute("width",t.width),this.attr("width",t.width)),n.height||(i.setAttribute("height",t.height),this.attr("height",t.height)),i.setAttribute("href",t.src);else if(t instanceof HTMLElement&&(0,ue.isString)(t.nodeName)&&"CANVAS"===t.nodeName.toUpperCase())i.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var o=document.createElement("canvas");o.setAttribute("width",""+t.width),o.setAttribute("height",""+t.height),o.getContext("2d").putImageData(t,0,0),n.width||(i.setAttribute("width",""+t.width),this.attr("width",t.width)),n.height||(i.setAttribute("height",""+t.height),this.attr("height",t.height)),i.setAttribute("href",o.toDataURL())}},e}(Fl);const nte=tte;var rte=function(r){function e(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return(0,De.__extends)(e,r),e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return(0,De.__assign)((0,De.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,n){var i=this.attr(),o=this.get("el");(0,ue.each)(n||i,function(a,s){if("startArrow"===s||"endArrow"===s)if(a){var u=(0,ue.isObject)(a)?t.addArrow(i,ho[s]):t.getDefaultArrow(i,ho[s]);o.setAttribute(ho[s],"url(#"+u+")")}else o.removeAttribute(ho[s]);else ho[s]&&o.setAttribute(ho[s],a)})},e.prototype.getTotalLength=function(){var t=this.attr();return Is_length(t.x1,t.y1,t.x2,t.y2)},e.prototype.getPoint=function(t){var n=this.attr();return Is_pointAt(n.x1,n.y1,n.x2,n.y2,t)},e}(Fl);const ite=rte;var kw={circle:function(r,e,t){return[["M",r,e],["m",-t,0],["a",t,t,0,1,0,2*t,0],["a",t,t,0,1,0,2*-t,0]]},square:function(r,e,t){return[["M",r-t,e-t],["L",r+t,e-t],["L",r+t,e+t],["L",r-t,e+t],["Z"]]},diamond:function(r,e,t){return[["M",r-t,e],["L",r,e-t],["L",r+t,e],["L",r,e+t],["Z"]]},triangle:function(r,e,t){var n=t*Math.sin(.3333333333333333*Math.PI);return[["M",r-t,e+n],["L",r,e-n],["L",r+t,e+n],["z"]]},triangleDown:function(r,e,t){var n=t*Math.sin(.3333333333333333*Math.PI);return[["M",r-t,e-n],["L",r+t,e-n],["L",r,e+n],["Z"]]}};const sB={get:function(r){return kw[r]},register:function(r,e){kw[r]=e},remove:function(r){delete kw[r]},getAll:function(){return kw}};var ote=function(r){function e(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return(0,De.__extends)(e,r),e.prototype.createPath=function(t){this.get("el").setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var t=this._getPath();return(0,ue.isArray)(t)?t.map(function(n){return n.join(" ")}).join(""):t},e.prototype._getPath=function(){var s,t=this.attr(),n=t.x,i=t.y,o=t.r||t.radius,a=t.symbol||"circle";return(s=(0,ue.isFunction)(a)?a:sB.get(a))?s(n,i,o):(console.warn(s+" symbol is not exist."),null)},e.symbolsFactory=sB,e}(Fl);const ate=ote;var ste=function(r){function e(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return(0,De.__extends)(e,r),e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return(0,De.__assign)((0,De.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,n){var i=this,o=this.attr(),a=this.get("el");(0,ue.each)(n||o,function(s,u){if("path"===u&&(0,ue.isArray)(s))a.setAttribute("d",i._formatPath(s));else if("startArrow"===u||"endArrow"===u)if(s){var l=(0,ue.isObject)(s)?t.addArrow(o,ho[u]):t.getDefaultArrow(o,ho[u]);a.setAttribute(ho[u],"url(#"+l+")")}else a.removeAttribute(ho[u]);else ho[u]&&a.setAttribute(ho[u],s)})},e.prototype._formatPath=function(t){var n=t.map(function(i){return i.join(" ")}).join("");return~n.indexOf("NaN")?"":n},e.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},e.prototype.getPoint=function(t){var n=this.get("el"),i=this.getTotalLength();if(0===i)return null;var o=n?n.getPointAtLength(t*i):null;return o?{x:o.x,y:o.y}:null},e}(Fl);const ute=ste;var lte=function(r){function e(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return(0,De.__extends)(e,r),e.prototype.createPath=function(t,n){var i=this.attr(),o=this.get("el");(0,ue.each)(n||i,function(a,s){"points"===s&&(0,ue.isArray)(a)&&a.length>=2?o.setAttribute("points",a.map(function(u){return u[0]+","+u[1]}).join(" ")):ho[s]&&o.setAttribute(ho[s],a)})},e}(Fl);const cte=lte;var fte=function(r){function e(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return(0,De.__extends)(e,r),e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return(0,De.__assign)((0,De.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(t,n,i){r.prototype.onAttrChange.call(this,t,n,i),-1!==["points"].indexOf(t)&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(t,n){var i=this.attr(),o=this.get("el");(0,ue.each)(n||i,function(a,s){"points"===s&&(0,ue.isArray)(a)&&a.length>=2?o.setAttribute("points",a.map(function(u){return u[0]+","+u[1]}).join(" ")):ho[s]&&o.setAttribute(ho[s],a)})},e.prototype.getTotalLength=function(){var t=this.attr().points,n=this.get("totalLength");return(0,ue.isNil)(n)?(this.set("totalLength",BM_length(t)),this.get("totalLength")):n},e.prototype.getPoint=function(t){var o,a,n=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),(0,ue.each)(i,function(s,u){t>=s[0]&&t<=s[1]&&(o=(t-s[0])/(s[1]-s[0]),a=u)}),Is_pointAt(n[a][0],n[a][1],n[a+1][0],n[a+1][1],o)},e.prototype._setTcache=function(){var t=this.attr().points;if(t&&0!==t.length){var n=this.getTotalLength();if(!(n<=0)){var a,s,i=0,o=[];(0,ue.each)(t,function(u,l){t[l+1]&&((a=[])[0]=i/n,s=Is_length(u[0],u[1],t[l+1][0],t[l+1][1]),a[1]=(i+=s)/n,o.push(a))}),this.set("tCache",o)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,n=[];return n.push([t[1][0],t[1][1]]),n.push([t[0][0],t[0][1]]),n},e.prototype.getEndTangent=function(){var t=this.attr().points,n=t.length-1,i=[];return i.push([t[n-1][0],t[n-1][1]]),i.push([t[n][0],t[n][1]]),i},e}(Fl);const hte=fte;var vte=function(r){function e(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return(0,De.__extends)(e,r),e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return(0,De.__assign)((0,De.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(t,n){var i=this,o=this.attr(),a=this.get("el"),s=!1,u=["x","y","width","height","radius"];(0,ue.each)(n||o,function(l,c){-1===u.indexOf(c)||s?-1===u.indexOf(c)&&ho[c]&&a.setAttribute(ho[c],l):(a.setAttribute("d",i._assembleRect(o)),s=!0)})},e.prototype._assembleRect=function(t){var n=t.x,i=t.y,o=t.width,a=t.height,s=t.radius;if(!s)return"M "+n+","+i+" l "+o+",0 l 0,"+a+" l"+-o+" 0 z";var u=function pte(r){var e=0,t=0,n=0,i=0;return(0,ue.isArray)(r)?1===r.length?e=t=n=i=r[0]:2===r.length?(e=n=r[0],t=i=r[1]):3===r.length?(e=r[0],t=i=r[1],n=r[2]):(e=r[0],t=r[1],n=r[2],i=r[3]):e=t=n=i=r,{r1:e,r2:t,r3:n,r4:i}}(s);return(0,ue.isArray)(s)?1===s.length?u.r1=u.r2=u.r3=u.r4=s[0]:2===s.length?(u.r1=u.r3=s[0],u.r2=u.r4=s[1]):3===s.length?(u.r1=s[0],u.r2=u.r4=s[1],u.r3=s[2]):(u.r1=s[0],u.r2=s[1],u.r3=s[2],u.r4=s[3]):u.r1=u.r2=u.r3=u.r4=s,[["M "+(n+u.r1)+","+i],["l "+(o-u.r1-u.r2)+",0"],["a "+u.r2+","+u.r2+",0,0,1,"+u.r2+","+u.r2],["l 0,"+(a-u.r2-u.r3)],["a "+u.r3+","+u.r3+",0,0,1,"+-u.r3+","+u.r3],["l "+(u.r3+u.r4-o)+",0"],["a "+u.r4+","+u.r4+",0,0,1,"+-u.r4+","+-u.r4],["l 0,"+(u.r4+u.r1-a)],["a "+u.r1+","+u.r1+",0,0,1,"+u.r1+","+-u.r1],["z"]].join(" ")},e}(Fl);const mte=vte;var yte={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},bte={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},wte={left:"left",start:"left",center:"middle",right:"end",end:"end"},xte=function(r){function e(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return(0,De.__extends)(e,r),e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return(0,De.__assign)((0,De.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(t,n){var i=this,o=this.attr(),a=this.get("el");this._setFont(),(0,ue.each)(n||o,function(s,u){"text"===u?i._setText(""+s):"matrix"===u&&s?gy(i):ho[u]&&a.setAttribute(ho[u],s)}),a.setAttribute("paint-order","stroke"),a.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var t=this.get("el"),n=this.attr(),i=n.textBaseline,o=n.textAlign,a=pk();a&&"firefox"===a.name?t.setAttribute("dominant-baseline",bte[i]||"alphabetic"):t.setAttribute("alignment-baseline",yte[i]||"baseline"),t.setAttribute("text-anchor",wte[o]||"left")},e.prototype._setText=function(t){var n=this.get("el"),i=this.attr(),o=i.x,a=i.textBaseline,s=void 0===a?"bottom":a;if(t)if(~t.indexOf("\n")){var u=t.split("\n"),l=u.length-1,c="";(0,ue.each)(u,function(f,h){0===h?"alphabetic"===s?c+='<tspan x="'+o+'" dy="'+-l+'em">'+f+"</tspan>":"top"===s?c+='<tspan x="'+o+'" dy="0.9em">'+f+"</tspan>":"middle"===s?c+='<tspan x="'+o+'" dy="'+-(l-1)/2+'em">'+f+"</tspan>":"bottom"===s?c+='<tspan x="'+o+'" dy="-'+(l+.3)+'em">'+f+"</tspan>":"hanging"===s&&(c+='<tspan x="'+o+'" dy="'+(-(l-1)-.3)+'em">'+f+"</tspan>"):c+='<tspan x="'+o+'" dy="1em">'+f+"</tspan>"}),n.innerHTML=c}else n.innerHTML=t;else n.innerHTML=""},e}(Fl);const Ete=xte;var _te=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Ste=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Mte=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function lB(r){var e=r.match(Mte);if(!e)return"";var t="";return e.sort(function(n,i){return n=n.split(":"),i=i.split(":"),Number(n[0])-Number(i[0])}),(0,ue.each)(e,function(n){n=n.split(":"),t+='<stop offset="'+n[0]+'" stop-color="'+n[1]+'"></stop>'}),t}var Dte=function(){function r(e){this.cfg={};var t=null,n=(0,ue.uniqueId)("gradient_");return"l"===e.toLowerCase()[0]?function Cte(r,e){var o,a,t=_te.exec(r),n=(0,ue.mod)((0,ue.toRadian)(parseFloat(t[1])),2*Math.PI),i=t[2];n>=0&&n<.5*Math.PI?(o={x:0,y:0},a={x:1,y:1}):.5*Math.PI<=n&&n<Math.PI?(o={x:1,y:0},a={x:0,y:1}):Math.PI<=n&&n<1.5*Math.PI?(o={x:1,y:1},a={x:0,y:0}):(o={x:0,y:1},a={x:1,y:0});var s=Math.tan(n),u=s*s,l=(a.x-o.x+s*(a.y-o.y))/(u+1)+o.x,c=s*(a.x-o.x+s*(a.y-o.y))/(u+1)+o.y;e.setAttribute("x1",o.x),e.setAttribute("y1",o.y),e.setAttribute("x2",l),e.setAttribute("y2",c),e.innerHTML=lB(i)}(e,t=Rl("linearGradient")):function Ate(r,e){var t=Ste.exec(r),n=parseFloat(t[1]),i=parseFloat(t[2]),o=parseFloat(t[3]),a=t[4];e.setAttribute("cx",n),e.setAttribute("cy",i),e.setAttribute("r",o),e.innerHTML=lB(a)}(e,t=Rl("radialGradient")),t.setAttribute("id",n),this.el=t,this.id=n,this.cfg=e,this}return r.prototype.match=function(e,t){return this.cfg===t},r}();const Tte=Dte;var Ite={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},Ote={x:"-40%",y:"-40%",width:"200%",height:"200%"},Pte=function(){function r(e){this.type="filter",this.cfg={},this.type="filter";var t=Rl("filter");return(0,ue.each)(Ote,function(n,i){t.setAttribute(i,n)}),this.el=t,this.id=(0,ue.uniqueId)("filter_"),this.el.id=this.id,this.cfg=e,this._parseShadow(e,t),this}return r.prototype.match=function(e,t){if(this.type!==e)return!1;var n=!0,i=this.cfg;return(0,ue.each)(Object.keys(i),function(o){if(i[o]!==t[o])return n=!1,!1}),n},r.prototype.update=function(e,t){var n=this.cfg;return n[Ite[e]]=t,this._parseShadow(n,this.el),this},r.prototype._parseShadow=function(e,t){t.innerHTML='<feDropShadow\n      dx="'+(e.dx||0)+'"\n      dy="'+(e.dy||0)+'"\n      stdDeviation="'+(e.blur?e.blur/10:0)+'"\n      flood-color="'+(e.color?e.color:"#000")+'"\n      flood-opacity="'+(e.opacity?e.opacity:1)+'"\n      />'},r}();const Nte=Pte;var Lte=function(){function r(e,t){this.cfg={};var n=Rl("marker"),i=(0,ue.uniqueId)("marker_");n.setAttribute("id",i);var o=Rl("path");o.setAttribute("stroke",e.stroke||"none"),o.setAttribute("fill",e.fill||"none"),n.appendChild(o),n.setAttribute("overflow","visible"),n.setAttribute("orient","auto-start-reverse"),this.el=n,this.child=o,this.id=i;var a=e["marker-start"===t?"startArrow":"endArrow"];return this.stroke=e.stroke||"#000",!0===a?this._setDefaultPath(t,o):(this.cfg=a,this._setMarker(e.lineWidth,o)),this}return r.prototype.match=function(){return!1},r.prototype._setDefaultPath=function(e,t){var n=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),n.setAttribute("refX",""+10*Math.cos(Math.PI/6)),n.setAttribute("refY","5")},r.prototype._setMarker=function(e,t){var n=this.el,i=this.cfg.path,o=this.cfg.d;(0,ue.isArray)(i)&&(i=i.map(function(a){return a.join(" ")}).join("")),t.setAttribute("d",i),n.appendChild(t),o&&n.setAttribute("refX",""+o/e)},r.prototype.update=function(e){var t=this.child;t.attr?t.attr("fill",e):t.setAttribute("fill",e)},r}();const cB=Lte;var kte=function(){function r(e){this.type="clip",this.cfg={};var t=Rl("clipPath");return this.el=t,this.id=(0,ue.uniqueId)("clip_"),t.id=this.id,t.appendChild(e.cfg.el),this.cfg=e,this}return r.prototype.match=function(){return!1},r.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},r}();const Rte=kte;var Fte=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Bte=function(){function r(e){this.cfg={};var t=Rl("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var n=Rl("image");t.appendChild(n);var i=(0,ue.uniqueId)("pattern_");t.id=i,this.el=t,this.id=i,this.cfg=e;var a=Fte.exec(e)[2];n.setAttribute("href",a);var s=new Image;function u(){t.setAttribute("width",""+s.width),t.setAttribute("height",""+s.height)}return a.match(/^data:/i)||(s.crossOrigin="Anonymous"),s.src=a,s.complete?u():(s.onload=u,s.src=s.src),this}return r.prototype.match=function(e,t){return this.cfg===t},r}();const jte=Bte;var zte=function(){function r(e){var t=Rl("defs"),n=(0,ue.uniqueId)("defs_");t.id=n,e.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=e}return r.prototype.find=function(e,t){for(var n=this.children,i=null,o=0;o<n.length;o++)if(n[o].match(e,t)){i=n[o].id;break}return i},r.prototype.findById=function(e){for(var t=this.children,n=null,i=0;i<t.length;i++)if(t[i].id===e){n=t[i];break}return n},r.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},r.prototype.getDefaultArrow=function(e,t){var n=e.stroke||e.strokeStyle;if(this.defaultArrow[n])return this.defaultArrow[n].id;var i=new cB(e,t);return this.defaultArrow[n]=i,this.el.appendChild(i.el),this.add(i),i.id},r.prototype.addGradient=function(e){var t=new Tte(e);return this.el.appendChild(t.el),this.add(t),t.id},r.prototype.addArrow=function(e,t){var n=new cB(e,t);return this.el.appendChild(n.el),this.add(n),n.id},r.prototype.addShadow=function(e){var t=new Nte(e);return this.el.appendChild(t.el),this.add(t),t.id},r.prototype.addPattern=function(e){var t=new jte(e);return this.el.appendChild(t.el),this.add(t),t.id},r.prototype.addClip=function(e){var t=new Rte(e);return this.el.appendChild(t.el),this.add(t),t.id},r}();const Gte=zte;var Ute=function(r){function e(t){return r.call(this,(0,De.__assign)((0,De.__assign)({},t),{autoDraw:!0,renderer:"svg"}))||this}return(0,De.__extends)(e,r),e.prototype.getShapeBase=function(){return y},e.prototype.getGroupBase=function(){return aB},e.prototype.getShape=function(t,n,i){var o=i.target||i.srcElement;if(!mC[o.tagName]){for(var a=o.parentNode;a&&!mC[a.tagName];)a=a.parentNode;o=a}return this.find(function(s){return s.get("el")===o})},e.prototype.createDom=function(){var t=Rl("svg"),n=new Gte(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",n),t},e.prototype.onCanvasChange=function(t){var n=this.get("context"),i=this.get("el");if("sort"===t){var o=this.get("children");o&&o.length&&rB(this,function(s,u){return o.indexOf(s)-o.indexOf(u)?1:0})}else if("clear"===t){if(i){i.innerHTML="";var a=n.el;a.innerHTML="",i.appendChild(a)}}else"matrix"===t?gy(this):"clip"===t?py(this,n):"changeSize"===t&&(i.setAttribute("width",""+this.get("width")),i.setAttribute("height",""+this.get("height")))},e.prototype.draw=function(){var t=this.get("context"),n=this.getChildren();py(this,t),n.length&&iB(t,n)},e}(fR);const vy=Ute;var Vte=G(3608),my=G.n(Vte);function Rw(r){return(Rw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}var Hte=/^\s+/,Wte=/\s+$/;function Jr(r,e){if(e=e||{},(r=r||"")instanceof Jr)return r;if(!(this instanceof Jr))return new Jr(r,e);var t=function $te(r){var e={r:0,g:0,b:0},t=1,n=null,i=null,o=null,a=!1,s=!1;return"string"==typeof r&&(r=function hne(r){r=r.replace(Hte,"").replace(Wte,"").toLowerCase();var t,e=!1;if(yC[r])r=yC[r],e=!0;else if("transparent"==r)return{r:0,g:0,b:0,a:0,format:"name"};return(t=kc.rgb.exec(r))?{r:t[1],g:t[2],b:t[3]}:(t=kc.rgba.exec(r))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=kc.hsl.exec(r))?{h:t[1],s:t[2],l:t[3]}:(t=kc.hsla.exec(r))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=kc.hsv.exec(r))?{h:t[1],s:t[2],v:t[3]}:(t=kc.hsva.exec(r))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=kc.hex8.exec(r))?{r:cl(t[1]),g:cl(t[2]),b:cl(t[3]),a:yB(t[4]),format:e?"name":"hex8"}:(t=kc.hex6.exec(r))?{r:cl(t[1]),g:cl(t[2]),b:cl(t[3]),format:e?"name":"hex"}:(t=kc.hex4.exec(r))?{r:cl(t[1]+""+t[1]),g:cl(t[2]+""+t[2]),b:cl(t[3]+""+t[3]),a:yB(t[4]+""+t[4]),format:e?"name":"hex8"}:!!(t=kc.hex3.exec(r))&&{r:cl(t[1]+""+t[1]),g:cl(t[2]+""+t[2]),b:cl(t[3]+""+t[3]),format:e?"name":"hex"}}(r)),"object"==Rw(r)&&(Lh(r.r)&&Lh(r.g)&&Lh(r.b)?(e=function Yte(r,e,t){return{r:255*wa(r,255),g:255*wa(e,255),b:255*wa(t,255)}}(r.r,r.g,r.b),a=!0,s="%"===String(r.r).substr(-1)?"prgb":"rgb"):Lh(r.h)&&Lh(r.s)&&Lh(r.v)?(n=yy(r.s),i=yy(r.v),e=function qte(r,e,t){r=6*wa(r,360),e=wa(e,100),t=wa(t,100);var n=Math.floor(r),i=r-n,o=t*(1-e),a=t*(1-i*e),s=t*(1-(1-i)*e),u=n%6;return{r:255*[t,a,o,o,s,t][u],g:255*[s,t,t,a,o,o][u],b:255*[o,o,s,t,t,a][u]}}(r.h,n,i),a=!0,s="hsv"):Lh(r.h)&&Lh(r.s)&&Lh(r.l)&&(n=yy(r.s),o=yy(r.l),e=function Xte(r,e,t){var n,i,o;function a(l,c,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?l+6*(c-l)*f:f<.5?c:f<2/3?l+(c-l)*(2/3-f)*6:l}if(r=wa(r,360),e=wa(e,100),t=wa(t,100),0===e)n=i=o=t;else{var s=t<.5?t*(1+e):t+e-t*e,u=2*t-s;n=a(u,s,r+1/3),i=a(u,s,r),o=a(u,s,r-1/3)}return{r:255*n,g:255*i,b:255*o}}(r.h,n,o),a=!0,s="hsl"),r.hasOwnProperty("a")&&(t=r.a)),t=vB(t),{ok:a,format:r.format||s,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}(r);this._originalInput=r,this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||t.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=t.ok}function fB(r,e,t){r=wa(r,255),e=wa(e,255),t=wa(t,255);var o,a,n=Math.max(r,e,t),i=Math.min(r,e,t),s=(n+i)/2;if(n==i)o=a=0;else{var u=n-i;switch(a=s>.5?u/(2-n-i):u/(n+i),n){case r:o=(e-t)/u+(e<t?6:0);break;case e:o=(t-r)/u+2;break;case t:o=(r-e)/u+4}o/=6}return{h:o,s:a,l:s}}function hB(r,e,t){r=wa(r,255),e=wa(e,255),t=wa(t,255);var o,a,n=Math.max(r,e,t),i=Math.min(r,e,t),s=n,u=n-i;if(a=0===n?0:u/n,n==i)o=0;else{switch(n){case r:o=(e-t)/u+(e<t?6:0);break;case e:o=(t-r)/u+2;break;case t:o=(r-e)/u+4}o/=6}return{h:o,s:a,v:s}}function dB(r,e,t,n){var i=[Lc(Math.round(r).toString(16)),Lc(Math.round(e).toString(16)),Lc(Math.round(t).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function gB(r,e,t,n){return[Lc(mB(n)),Lc(Math.round(r).toString(16)),Lc(Math.round(e).toString(16)),Lc(Math.round(t).toString(16))].join("")}function Zte(r,e){e=0===e?0:e||10;var t=Jr(r).toHsl();return t.s-=e/100,t.s=Fw(t.s),Jr(t)}function Qte(r,e){e=0===e?0:e||10;var t=Jr(r).toHsl();return t.s+=e/100,t.s=Fw(t.s),Jr(t)}function Jte(r){return Jr(r).desaturate(100)}function ene(r,e){e=0===e?0:e||10;var t=Jr(r).toHsl();return t.l+=e/100,t.l=Fw(t.l),Jr(t)}function tne(r,e){e=0===e?0:e||10;var t=Jr(r).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(-e/100*255))),t.g=Math.max(0,Math.min(255,t.g-Math.round(-e/100*255))),t.b=Math.max(0,Math.min(255,t.b-Math.round(-e/100*255))),Jr(t)}function nne(r,e){e=0===e?0:e||10;var t=Jr(r).toHsl();return t.l-=e/100,t.l=Fw(t.l),Jr(t)}function rne(r,e){var t=Jr(r).toHsl(),n=(t.h+e)%360;return t.h=n<0?360+n:n,Jr(t)}function ine(r){var e=Jr(r).toHsl();return e.h=(e.h+180)%360,Jr(e)}function pB(r,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var t=Jr(r).toHsl(),n=[Jr(r)],i=360/e,o=1;o<e;o++)n.push(Jr({h:(t.h+o*i)%360,s:t.s,l:t.l}));return n}function one(r){var e=Jr(r).toHsl(),t=e.h;return[Jr(r),Jr({h:(t+72)%360,s:e.s,l:e.l}),Jr({h:(t+216)%360,s:e.s,l:e.l})]}function ane(r,e,t){e=e||6,t=t||30;var n=Jr(r).toHsl(),i=360/t,o=[Jr(r)];for(n.h=(n.h-(i*e>>1)+720)%360;--e;)n.h=(n.h+i)%360,o.push(Jr(n));return o}function sne(r,e){e=e||6;for(var t=Jr(r).toHsv(),n=t.h,i=t.s,o=t.v,a=[],s=1/e;e--;)a.push(Jr({h:n,s:i,v:o})),o=(o+s)%1;return a}Jr.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var t,n,i,e=this.toRgb();return n=e.g/255,i=e.b/255,.2126*((t=e.r/255)<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))},setAlpha:function(e){return this._a=vB(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=hB(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=hB(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),i=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+i+"%)":"hsva("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=fB(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=fB(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),i=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+i+"%)":"hsla("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return dB(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function Kte(r,e,t,n,i){var o=[Lc(Math.round(r).toString(16)),Lc(Math.round(e).toString(16)),Lc(Math.round(t).toString(16)),Lc(mB(n))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*wa(this._r,255))+"%",g:Math.round(100*wa(this._g,255))+"%",b:Math.round(100*wa(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*wa(this._r,255))+"%, "+Math.round(100*wa(this._g,255))+"%, "+Math.round(100*wa(this._b,255))+"%)":"rgba("+Math.round(100*wa(this._r,255))+"%, "+Math.round(100*wa(this._g,255))+"%, "+Math.round(100*wa(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(une[dB(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+gB(this._r,this._g,this._b,this._a),n=t,i=this._gradientType?"GradientType = 1, ":"";if(e){var o=Jr(e);n="#"+gB(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1;return!t&&this._a<1&&this._a>=0&&("hex"===e||"hex6"===e||"hex3"===e||"hex4"===e||"hex8"===e||"name"===e)?"name"===e&&0===this._a?this.toName():this.toRgbString():("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),("hex"===e||"hex6"===e)&&(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return Jr(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(ene,arguments)},brighten:function(){return this._applyModification(tne,arguments)},darken:function(){return this._applyModification(nne,arguments)},desaturate:function(){return this._applyModification(Zte,arguments)},saturate:function(){return this._applyModification(Qte,arguments)},greyscale:function(){return this._applyModification(Jte,arguments)},spin:function(){return this._applyModification(rne,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(ane,arguments)},complement:function(){return this._applyCombination(ine,arguments)},monochromatic:function(){return this._applyCombination(sne,arguments)},splitcomplement:function(){return this._applyCombination(one,arguments)},triad:function(){return this._applyCombination(pB,[3])},tetrad:function(){return this._applyCombination(pB,[4])}},Jr.fromRatio=function(r,e){if("object"==Rw(r)){var t={};for(var n in r)r.hasOwnProperty(n)&&(t[n]="a"===n?r[n]:yy(r[n]));r=t}return Jr(r,e)},Jr.equals=function(r,e){return!(!r||!e)&&Jr(r).toRgbString()==Jr(e).toRgbString()},Jr.random=function(){return Jr.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},Jr.mix=function(r,e,t){t=0===t?0:t||50;var n=Jr(r).toRgb(),i=Jr(e).toRgb(),o=t/100;return Jr({r:(i.r-n.r)*o+n.r,g:(i.g-n.g)*o+n.g,b:(i.b-n.b)*o+n.b,a:(i.a-n.a)*o+n.a})},Jr.readability=function(r,e){var t=Jr(r),n=Jr(e);return(Math.max(t.getLuminance(),n.getLuminance())+.05)/(Math.min(t.getLuminance(),n.getLuminance())+.05)},Jr.isReadable=function(r,e,t){var i,o,n=Jr.readability(r,e);switch(o=!1,i=function dne(r){var e,t;return"AA"!==(e=((r=r||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==e&&(e="AA"),"small"!==(t=(r.size||"small").toLowerCase())&&"large"!==t&&(t="small"),{level:e,size:t}}(t),i.level+i.size){case"AAsmall":case"AAAlarge":o=n>=4.5;break;case"AAlarge":o=n>=3;break;case"AAAsmall":o=n>=7}return o},Jr.mostReadable=function(r,e,t){var o,a,s,u,n=null,i=0;a=(t=t||{}).includeFallbackColors,s=t.level,u=t.size;for(var l=0;l<e.length;l++)(o=Jr.readability(r,e[l]))>i&&(i=o,n=Jr(e[l]));return Jr.isReadable(r,n,{level:s,size:u})||!a?n:(t.includeFallbackColors=!1,Jr.mostReadable(r,["#fff","#000"],t))};var yC=Jr.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},une=Jr.hexNames=function lne(r){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[r[t]]=t);return e}(yC);function vB(r){return r=parseFloat(r),(isNaN(r)||r<0||r>1)&&(r=1),r}function wa(r,e){(function cne(r){return"string"==typeof r&&-1!=r.indexOf(".")&&1===parseFloat(r)})(r)&&(r="100%");var t=function fne(r){return"string"==typeof r&&-1!=r.indexOf("%")}(r);return r=Math.min(e,Math.max(0,parseFloat(r))),t&&(r=parseInt(r*e,10)/100),Math.abs(r-e)<1e-6?1:r%e/parseFloat(e)}function Fw(r){return Math.min(1,Math.max(0,r))}function cl(r){return parseInt(r,16)}function Lc(r){return 1==r.length?"0"+r:""+r}function yy(r){return r<=1&&(r=100*r+"%"),r}function mB(r){return Math.round(255*parseFloat(r)).toString(16)}function yB(r){return cl(r)/255}var t,n,i,kc=(n="[\\s|\\(]+("+(t="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",i="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function Lh(r){return!!kc.CSS_UNIT.exec(r)}var mne=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function EB(r,e,t){var n;return(n=Math.round(r.h)>=60&&Math.round(r.h)<=240?t?Math.round(r.h)-2*e:Math.round(r.h)+2*e:t?Math.round(r.h)+2*e:Math.round(r.h)-2*e)<0?n+=360:n>=360&&(n-=360),n}function _B(r,e,t){return 0===r.h&&0===r.s?r.s:((n=t?r.s-.16*e:4===e?r.s+.16:r.s+.05*e)>1&&(n=1),t&&5===e&&n>.1&&(n=.1),n<.06&&(n=.06),Number(n.toFixed(2)));var n}function SB(r,e,t){var n;return(n=t?r.v+.05*e:r.v-.15*e)>1&&(n=1),Number(n.toFixed(2))}function jw(r){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=[],n=Jr(r),i=5;i>0;i-=1){var o=n.toHsv(),a=Jr({h:EB(o,i,!0),s:_B(o,i,!0),v:SB(o,i,!0)}).toHexString();t.push(a)}t.push(n.toHexString());for(var s=1;s<=4;s+=1){var u=n.toHsv(),l=Jr({h:EB(u,s),s:_B(u,s),v:SB(u,s)}).toHexString();t.push(l)}return"dark"===e.theme?mne.map(function(c){return Jr.mix(e.backgroundColor||"#141414",t[c.index],100*c.opacity).toHexString()}):t}var bC={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},uu={},wC={};Object.keys(bC).forEach(function(r){uu[r]=jw(bC[r]),uu[r].primary=uu[r][5],wC[r]=jw(bC[r],{theme:"dark",backgroundColor:"#141414"}),wC[r].primary=wC[r][5]});var ps=function(e,t,n){var i=my()(e),o=my()(t);return my()([(1-n)*i.red()+n*o.red(),(1-n)*i.green()+n*o.green(),(1-n)*i.blue()+n*o.blue()]).rgb()},xC=function(e,t,n,i){return void 0===t&&(t="#fff"),void 0===n&&(n="default"),void 0===i&&(i="rgb(150, 150, 150)"),"default"===n?function(e,t,n){void 0===t&&(t="#fff"),void 0===n&&(n="rgb(150, 150, 150)");var i=ps(t,e,.05).rgb().toString(),o=ps(t,e,.1).rgb().toString(),a=ps(t,e,.2).rgb().toString(),s=ps(t,e,.4).rgb().toString(),u=ps(t,n,.02).rgb().toString(),l=ps(t,n,.05).rgb().toString(),c=ps(t,n,.1).rgb().toString(),f=ps(t,n,.2).rgb().toString(),h=ps(t,n,.3).rgb().toString(),d=jw(e,{theme:"default",backgroundColor:t}),g=my()(e).hex().toLowerCase(),m=d.indexOf(g),_=e;return-1!==m&&(_=d[m+1]),{mainStroke:e,mainFill:o,activeStroke:e,activeFill:i,inactiveStroke:s,inactiveFill:i,selectedStroke:e,selectedFill:t,highlightStroke:_,highlightFill:a,disableStroke:h,disableFill:l,edgeMainStroke:h,edgeActiveStroke:e,edgeInactiveStroke:f,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:h,comboMainFill:u,comboActiveStroke:e,comboActiveFill:i,comboInactiveStroke:h,comboInactiveFill:u,comboSelectedStroke:e,comboSelectedFill:u,comboHighlightStroke:_,comboHighlightFill:u,comboDisableStroke:f,comboDisableFill:l}}(e,t,"rgb(150, 150, 150)"):function(e,t,n){void 0===t&&(t="#fff"),void 0===n&&(n="#777");var i=ps(t,e,.2).rgb().toString(),o=ps(t,e,.3).rgb().toString(),a=ps(t,e,.6).rgb().toString(),s=ps(t,e,.8).rgb().toString(),u=ps(t,n,.2).rgb().toString(),l=ps(t,n,.25).rgb().toString(),c=ps(t,n,.3).rgb().toString(),f=ps(t,n,.4).rgb().toString(),h=ps(t,n,.5).rgb().toString(),d=jw(e,{theme:"dark",backgroundColor:t}),g=my()(e).hex().toLowerCase(),m=d.indexOf(g),_=e;return-1!==m&&(_=d[m+1]),{mainStroke:s,mainFill:i,activeStroke:e,activeFill:o,inactiveStroke:s,inactiveFill:i,selectedStroke:e,selectedFill:i,highlightStroke:e,highlightFill:a,disableStroke:h,disableFill:l,edgeMainStroke:n,edgeActiveStroke:e,edgeInactiveStroke:n,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:f,comboMainFill:l,comboActiveStroke:e,comboActiveFill:u,comboInactiveStroke:f,comboInactiveFill:l,comboSelectedStroke:e,comboSelectedFill:u,comboHighlightStroke:_,comboHighlightFill:l,comboDisableStroke:f,comboDisableFill:u}}(e,t,"#777")},wne=function(e,t,n,i){void 0===t&&(t="#fff"),void 0===n&&(n="default"),void 0===i&&(i="rgb(150, 150, 150)");var o=[];return e.forEach(function(a){o.push(xC(a,t,n,i))}),o},MB="rgb(0, 0, 0)",ro=xC("rgb(95, 149, 255)","rgb(255, 255, 255)");const tp={version:"0.8.6",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:ro.mainStroke,fill:ro.mainFill},size:20,color:ro.mainStroke,linkPoints:{size:8,lineWidth:1,fill:ro.activeFill,stroke:ro.activeStroke}},nodeStateStyles:{active:{fill:ro.activeFill,stroke:ro.activeStroke,lineWidth:2,shadowColor:ro.mainStroke,shadowBlur:10},selected:{fill:ro.selectedFill,stroke:ro.selectedStroke,lineWidth:4,shadowColor:ro.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:ro.highlightFill,stroke:ro.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:ro.inactiveFill,stroke:ro.inactiveStroke,lineWidth:1},disable:{fill:ro.disableFill,stroke:ro.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:MB,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:ro.edgeMainStroke,lineAppendWidth:2},color:ro.edgeMainStroke},edgeStateStyles:{active:{stroke:ro.edgeActiveStroke,lineWidth:1},selected:{stroke:ro.edgeSelectedStroke,lineWidth:2,shadowColor:ro.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:ro.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:ro.edgeInactiveStroke,lineWidth:1},disable:{stroke:ro.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:MB,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:ro.comboMainFill,lineWidth:1,stroke:ro.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:ro.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:ro.comboActiveStroke,lineWidth:1,fill:ro.comboActiveFill},selected:{stroke:ro.comboSelectedStroke,lineWidth:2,fill:ro.comboSelectedFill,shadowColor:ro.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:ro.comboHighlightStroke,lineWidth:2,fill:ro.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:ro.comboInactiveStroke,fill:ro.comboInactiveFill,lineWidth:1},disable:{stroke:ro.comboDisableStroke,fill:ro.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"};function zw(r,e,t){if(r){if("function"==typeof r.addEventListener)return r.addEventListener(e,t,!1),{remove:function(){r.removeEventListener(e,t,!1)}};if("function"==typeof r.attachEvent)return r.attachEvent("on"+e,t),{remove:function(){r.detachEvent("on"+e,t)}}}}var _ne=su.cloneEvent,Sne=su.isViewportChanged,Mne=function(r){function e(t){var n=r.call(this,t)||this;return n.extendEvents=[],n.dragging=!1,n.mousedown=!1,n.preItem=null,n.destroy(),n.graph=t,n.destroyed=!1,n.initEvents(),n}return(0,De.__extends)(e,r),e.prototype.initEvents=function(){var n=this.graph,i=this.extendEvents,o=void 0===i?[]:i,a=n.get("canvas"),s=a.get("el"),u=(0,ue.wrapBehavior)(this,"onCanvasEvents"),l=(0,ue.wrapBehavior)(this,"onExtendEvents"),c=(0,ue.wrapBehavior)(this,"onWheelEvent");a.off("*").on("*",u),this.canvasHandler=u,o.push(zw(s,"wheel",c)),typeof window<"u"&&(o.push(zw(window,"keydown",l)),o.push(zw(window,"keyup",l)),o.push(zw(window,"focus",l))),this.resetHandler&&n.off("afterchangedata",this.resetHandler),this.resetHandler=(0,ue.wrapBehavior)(this,"resetStatus"),n.on("afterchangedata",this.resetHandler)},e.getItemRoot=function(t){for(;t&&!t.get("item");)t=t.get("parent");return t},e.prototype.onCanvasEvents=function(t){var n=this,i=this.graph,o=i.get("canvas"),a=t.target,s=t.type;switch(s){case"drag":this.onCanvasEvents(Object.assign({},t,{type:"mousemove"}));break;case"dragend":this.onCanvasEvents(Object.assign({},t,{type:"mouseup"}));break;case"mousedown":this.mousedown=!0;break;case"dragend":case"mouseup":setTimeout(function(){return n.mousedown=!1});break;case"click":if(!this.mousedown)return}t.canvasX=t.x,t.canvasY=t.y;var u={x:t.canvasX,y:t.canvasY},c=i.get("group").getMatrix();if(c||(c=[1,0,0,0,1,0,0,0,1]),Sne(c)&&(u=i.getPointByClient(t.clientX,t.clientY)),t.x=u.x,t.y=u.y,t.currentTarget=i,a===o)return("mousemove"===s||"mouseleave"===s)&&this.handleMouseMove(t,"canvas"),t.target=o,t.item=null,i.emit(s,t),void i.emit("canvas:".concat(s),t);var f=e.getItemRoot(a);if(f){var h=f.get("item");if(!h.destroyed){var d=h.getType();if(t.target=a,t.item=h,t.canvasX===t.x&&t.canvasY===t.y){var g=i.getCanvasByPoint(t.x,t.y);t.canvasX=g.x,t.canvasY=g.y}t.name&&!t.name.includes(":")?(i.emit("".concat(d,":").concat(s),t),i.emit(s,t)):t.name&&i.emit(t.name,t),"dragstart"===s&&(this.dragging=!0),"dragend"===s&&(this.dragging=!1),"mousemove"===s&&this.handleMouseMove(t,d)}}else i.emit(s,t)},e.prototype.onExtendEvents=function(t){this.graph.emit(t.type,t)},e.prototype.onWheelEvent=function(t){(0,ue.isNil)(t.wheelDelta)&&(t.wheelDelta=-t.detail),this.graph.emit("wheel",t)},e.prototype.handleMouseMove=function(t,n){var a=this.preItem,s=this.graph.get("canvas"),u=t.target===s?null:t.item;t=_ne(t),a&&a!==u&&!a.destroyed&&(t.item=a,this.emitCustomEvent(a.getType(),"mouseleave",t),this.dragging&&this.emitCustomEvent(a.getType(),"dragleave",t)),u&&a!==u&&(t.item=u,this.emitCustomEvent(n,"mouseenter",t),this.dragging&&this.emitCustomEvent(n,"dragenter",t)),this.preItem=u},e.prototype.emitCustomEvent=function(t,n,i){i.type=n,this.graph.emit("".concat(t,":").concat(n),i)},e.prototype.resetStatus=function(){this.mousedown=!1,this.dragging=!1,this.preItem=null},e.prototype.destroy=function(){var t=this,i=t.canvasHandler,o=t.extendEvents;t.graph.get("canvas").off("*",i),(0,ue.each)(o,function(s){s.remove()}),this.resetStatus(),this.extendEvents.length=0,this.canvasHandler=null,this.resetHandler=null,this.destroyed=!0},e}(function r(e){this.graph=e,this.destroyed=!1,this.initEvents()});const Cne=Mne;var Xi=G(66),Ane=G(1983),Gw=G.n(Ane),CB=su.traverseTree,Dne=function(e,t){return e?(0,ue.isNumber)(e)?function(o){return e}:e:function(o){return t||1}},Tne=function(e,t){var n=[],i=[],o={},a=0;for(a=0;a<e.length;a++){var s=e[a];o[s.id]=a,n.push(s.x),n.push(s.y),n.push(0),n.push(0),i.push([])}for(a=0;a<t.length;a++){var u=t[a];i[o[u.source]].push(o[u.target]),i[o[u.target]].push(o[u.source])}var l=0;for(a=0;a<e.length;a++){var f=i[a],h=f.length;n[4*a+2]=n.length,n[4*a+3]=f.length,l=Math.max(l,f.length);for(var d=0;d<h;++d)n.push(+f[d])}for(;n.length%4!=0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:l}},Ine=function(e,t,n){var i=[],o=[],a={},s=0;for(s=0;s<e.length;s++){var u=e[s];a[u.id]=s,i.push(u.x),i.push(u.y),i.push(0),i.push(0),o.push([])}for(s=0;s<t.length;s++){var l=t[s];o[a[l.source]].push(a[l.target]),o[a[l.source]].push(n(l)),o[a[l.target]].push(a[l.source]),o[a[l.target]].push(n(l))}var c=0;for(s=0;s<e.length;s++){var h=o[s],d=h.length;i[4*s+2]=i.length,i[4*s+3]=d/2,c=Math.max(c,d/2);for(var g=0;g<d;++g)i.push(+h[g])}for(;i.length%4!=0;)i.push(0);return{array:new Float32Array(i),maxEdgePerVetex:c}},One=function(e,t,n,i){var o=[],a=[],s={},u=0;for(u=0;u<e.length;u++){var l=e[u];s[l.id]=u,o.push(l.x),o.push(l.y),o.push(0),o.push(0),a.push([])}for(u=0;u<t.length;u++){var c=t[u];a[s[c.source]].push(s[c.target]),a[s[c.source]].push(n(c)),a[s[c.source]].push(i(c)),a[s[c.source]].push(0),a[s[c.target]].push(s[c.source]),a[s[c.target]].push(n(c)),a[s[c.target]].push(i(c)),a[s[c.target]].push(0)}var f=0;for(u=0;u<e.length;u++){var d=a[u],g=d.length;o[4*u+2]=o.length+1048576*g/4,o[4*u+3]=0,f=Math.max(f,g/4);for(var m=0;m<g;++m)o.push(+d[m])}for(;o.length%4!=0;)o.push(0);return{array:new Float32Array(o),maxEdgePerVetex:f}},Pne=function(e,t){var n=[],i=e.length,o={};return t.forEach(function(a){e.forEach(function(s,u){if(void 0===o[a[s]]&&(o[a[s]]=Object.keys(o).length),n.push(o[a[s]]),u===i-1)for(;n.length%4!=0;)n.push(0)})}),{array:new Float32Array(n),count:Object.keys(o).length}},Nne=function(e){for(var t=[],n=e.length,i=e[0].length,o=function(u){e.forEach(function(l,c){if(t.push(l[u]),c===n-1)for(;t.length%4!=0;)t.push(0)})},a=0;a<i;a++)o(a);return new Float32Array(t)},Lne=function(e,t){var i={x:1/0,y:1/0},o={x:-1/0,y:-1/0},a="x",s="y";t&&["V","TB","BT"].indexOf(t)>=0&&(s="x",a="y");var u=0;CB(e,function(f){return u++,f.x>o.x&&(o.x=f.x),f.x<i.x&&(i.x=f.x),f.y>o.y&&(o.y=f.y),f.y<i.y&&(i.y=f.y),!0});var l=2*Math.PI/u,c=o[s]-i[s];return 0===c||CB(e,function(f){var h=(f[s]-i[s])/c*(2*Math.PI-l)+l,d=Math.abs("x"===a?f.x-e.x:f.y-e.y);return f.x=d*Math.cos(h),f.y=d*Math.sin(h),!0}),e},AB=function r(){return typeof window>"u"||typeof document>"u"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch{return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",this.webgl||(t.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join("\n")),t},addGetWebGLMessage:function(t){var n=void 0!==(t=t||{}).parent?t.parent:document.body,i=void 0!==t.id?t.id:"oldie",o=r().getWebGLErrorMessage();o.id=i,n.appendChild(o)}}};const kh=(0,De.__assign)((0,De.__assign)((0,De.__assign)((0,De.__assign)({},su),A),M),S);var Rne=kh.radialLayout,Fne=function(){function r(e){this.type=e.type,this.radial=e.radial,this.config=e}return r.prototype.init=function(e){var t=this;this.data=e,this.layoutMethod=this.radial?function(n){var i=Gw()[t.type](n,t.config);return Rne(i),i}:function(n){return Gw()[t.type](n,t.config)}},r.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},r.prototype.layout=function(e){return this.init(e),this.execute()},r}();const Bne=Fne;(0,Xi.registerLayout)("grid",Xi.GridLayout),(0,Xi.registerLayout)("random",Xi.RandomLayout),(0,Xi.registerLayout)("force",Xi.ForceLayout),(0,Xi.registerLayout)("circular",Xi.CircularLayout),(0,Xi.registerLayout)("dagre",Xi.DagreLayout),(0,Xi.registerLayout)("dagreCompound",Xi.DagreCompoundLayout),(0,Xi.registerLayout)("radial",Xi.RadialLayout),(0,Xi.registerLayout)("concentric",Xi.ConcentricLayout),(0,Xi.registerLayout)("mds",Xi.MDSLayout),(0,Xi.registerLayout)("fruchterman",Xi.FruchtermanLayout),(0,Xi.registerLayout)("fruchterman-gpu",Xi.FruchtermanGPULayout),(0,Xi.registerLayout)("gForce",Xi.GForceLayout),(0,Xi.registerLayout)("force2",Xi.Force2Layout),(0,Xi.registerLayout)("gForce-gpu",Xi.GForceGPULayout),(0,Xi.registerLayout)("comboForce",Xi.ComboForceLayout),(0,Xi.registerLayout)("comboCombined",Xi.ComboCombinedLayout),(0,Xi.registerLayout)("forceAtlas2",Xi.ForceAtlas2Layout);const Gne=function r(e,t){var n=e.toString(),i=new Blob(["importScripts('".concat(t,"');(").concat(n,")()")],{type:"text/javascript"});return new Worker(URL.createObjectURL(i))};function EC(r){return(EC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}var DB=function(e){return setTimeout(e,16)},TB=function(e){return clearTimeout(e)},Uw_requestAnimationFrame=function(e){return(typeof window<"u"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||DB)(e)},Uw_cancelAnimationFrame=function(e){return(typeof window<"u"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||TB)(e)},Vne=["fruchterman","gForce"],Hne=["force","grid","circular"],Wne=function(r){function e(t){var n=r.call(this,t)||this;return n.graph=t,n.layoutCfg=t.get("layout")||{},n.layoutType=n.getLayoutType(),n.worker=null,n.workerData={},n.initLayout(),n}return(0,De.__extends)(e,r),e.prototype.initLayout=function(){},e.prototype.getWorker=function(){return this.worker||(typeof Worker>"u"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=function(e){return void 0===e&&(e="https://unpkg.com/@antv/layout@latest/dist/layout.min.js"),new Gne(function t(){layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("dagreCompound",layout.DagreCompoundLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("comboCombined",layout.ComboCombinedLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout),onmessage=function(u){(function o(s){var u=s.data.type;return"LAYOUT_RUN"===u||"GPU_LAYOUT_RUN"===u})(u)&&function a(s){var u=this;switch(s.data.type){case"LAYOUT_RUN":var D,c=s.data,f=c.nodes,h=c.edges,d=c.layoutCfg,m=(g=void 0===d?{}:d).type;if(!(_=layout.getLayoutByName(m))){this.postMessage({type:"LAYOUT_ERROR",message:"layout ".concat(m," not found")});break}g.onLayoutEnd=function(){u.postMessage({type:"LAYOUT_END",nodes:f}),D?.destroy()},(D=new _(g)).init({nodes:f,edges:h}),D.execute();break;case"GPU_LAYOUT_RUN":var g,_,L=s.data,O=L.nodes,Z=(h=L.edges,L.layoutCfg),le=L.canvas;if(m=(g=void 0===Z?{}:Z).type,!(_=layout.getLayoutByName(m))){this.postMessage({type:"LAYOUT_ERROR",message:"layout ".concat(m," not found")});break}if("gpu"!==m.split("-")[1]){this.postMessage({type:"LAYOUT_ERROR",message:"layout ".concat(m," does not support GPU")});break}var pe=new _(g);pe.init({nodes:O,edges:h}),pe.executeWithWorker(le,this)}}(u)}},e)}(this.layoutCfg.workerScriptURL)),this.worker},e.prototype.stopWorker=function(){var t=this.workerData;!this.worker||(this.worker.terminate(),this.worker=null,t.requestId&&(Uw_cancelAnimationFrame(t.requestId),t.requestId=null),t.requestId2&&(Uw_cancelAnimationFrame(t.requestId2),t.requestId2=null))},e.prototype.execLayoutMethod=function(t,n){var i=this;return new Promise(function(o,a){return(0,De.__awaiter)(i,void 0,void 0,function(){var s,u,l,c,f,d,g,_;return(0,De.__generator)(this,function(D){switch(D.label){case 0:if(!(s=this.graph)||s.get("destroyed"))return[2];u=t.type,t.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),o()},u&&this.isGPU&&(this.hasGPUVersion(u)?u="".concat(u,"-gpu"):console.warn("The '".concat(u,"' layout does not support GPU calculation for now, it will run in CPU."))),su.isForce(u)?(l=t.onTick,f=void 0===(c=t.animate)&&("force"===u||"force2"===u),t.tick=function(){l&&l(),(c||f)&&s.refreshPositions()}):("comboForce"===u||"comboCombined"===u)&&(t.comboTrees=s.get("comboTrees"));try{d=new Xi.Layouts[u](t),this.layoutMethods[n]&&this.layoutMethods[n].destroy(),this.layoutMethods[n]=d}catch{console.warn("The layout method: '".concat(u,"' does not exist! Please specify it first.")),a()}return d.enableTick&&(g=t.onTick,d.tick=function(){g&&g(),s.refreshPositions()}),function qne(r,e){var t;null!==(t=r?.nodes)&&void 0!==t&&t.length&&r.nodes.forEach(function(i){i.layoutOrder=e})}(_=this.filterLayoutData(this.data,t),n),d.init(_),s.emit("beforesublayout",{type:u}),[4,d.execute()];case 1:return D.sent(),d.isCustomLayout&&t.onLayoutEnd&&t.onLayoutEnd(),[2]}})})})},e.prototype.updateLayoutMethod=function(t,n){var i=this;return new Promise(function(o,a){return(0,De.__awaiter)(i,void 0,void 0,function(){var s,u,l;return(0,De.__generator)(this,function(c){switch(c.label){case 0:return s=this.graph,u=n?.type,n.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),o()},l=this.filterLayoutData(this.data,n),t.init(l),t.updateCfg(n),s.emit("beforesublayout",{type:u}),[4,t.execute()];case 1:return c.sent(),t.isCustomLayout&&n.onLayoutEnd&&n.onLayoutEnd(),[2]}})})})},e.prototype.layout=function(t){var i,n=this,o=this.graph;if(o&&!o.get("destroyed")){this.data=this.setDataFromGraph();var a=this.data,s=a.nodes,u=a.hiddenNodes;if(!s)return!1;var l=o.get("width"),c=o.get("height"),f={};Object.assign(f,{width:l,height:c,center:[l/2,c/2]},this.layoutCfg),this.layoutCfg=f;var h=f.type,d=!1;null===(i=this.layoutMethods)||void 0===i||i.forEach(function(le){var pe;return d=!(null===(pe=le.nodes)||void 0===pe||!pe.length)||d});var g=this.destoryLayoutMethods();o.emit("beforelayout"),d&&h&&1===g?.length&&g[0]===h?this.tweakInit():this.initPositions(f.center,s),this.initPositions(f.center,u),h&&"gpu"===h.split("-")[1]&&(h=h.split("-")[0],f.gpuEnabled=!0);var m=!1;f.gpuEnabled&&(m=!0,AB().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),m=!1)),m&&!this.hasGPUVersion(h)&&(console.warn("The '".concat(h,"' layout does not support GPU calculation for now, it will run in CPU.")),m=!1),this.isGPU=m;var _=f.onLayoutEnd,L=f.adjust;if(f.layoutEndFormatted||(f.layoutEndFormatted=!0,f.onAllLayoutEnd=function(){return(0,De.__awaiter)(n,void 0,void 0,function(){return(0,De.__generator)(this,function(le){switch(le.label){case 0:return _&&_(s),this.refreshLayout(),L&&f.pipes?[4,this.adjustPipesBox(this.data,L)]:[3,2];case 1:le.sent(),this.refreshLayout(),le.label=2;case 2:return o.emit("afterlayout"),[2]}})})}),this.stopWorker(),f.workerEnabled&&this.layoutWithWorker(this.data,t))return!0;var O=Promise.resolve(),Z=!1;return f.type?(Z=!0,O=O.then(function(){return(0,De.__awaiter)(n,void 0,void 0,function(){return(0,De.__generator)(this,function(le){switch(le.label){case 0:return[4,this.execLayoutMethod(f,0)];case 1:return[2,le.sent()]}})})})):f.pipes&&(Z=!0,f.pipes.forEach(function(le,pe){O=O.then(function(){return(0,De.__awaiter)(n,void 0,void 0,function(){return(0,De.__generator)(this,function(Ee){switch(Ee.label){case 0:return[4,this.execLayoutMethod(le,pe)];case 1:return[2,Ee.sent()]}})})})})),Z?O.then(function(){f.onAllLayoutEnd&&f.onAllLayoutEnd(),t&&t()}).catch(function(le){console.warn("graph layout failed,",le)}):(o.refreshPositions(),t?.()),!1}},e.prototype.tweakInit=function(){var n=this.data,i=this.graph,o=n.nodes,a=n.edges;if(o?.length){var s={};o.forEach(function(c){var f=c.x,h=c.y;!isNaN(f)&&!isNaN(h)&&(s[c.id]={x:f,y:h},c.mass=c.mass||2)}),a.forEach(function(c){var f=c.source,h=c.target,d=s[f],g=s[h];!d&&g?s[f]={x:g.x+80*(Math.random()-.5),y:g.y+80*(Math.random()-.5)}:!g&&d&&(s[h]={x:d.x+80*(Math.random()-.5),y:d.y+80*(Math.random()-.5)})});var u=i.get("width"),l=i.get("height");o.forEach(function(c){var f=s[c.id]||{x:u/2+20*(Math.random()-.5),y:l/2+20*(Math.random()-.5)};c.x=f.x,c.y=f.y})}},e.prototype.initWithPreset=function(){var n=this.layoutCfg,i=this.data,o=n.preset;return!(!o?.type||!Xi.Layouts[o?.type]||(new Xi.Layouts[o?.type](o).layout(i),delete n.preset,0))},e.prototype.layoutWithWorker=function(t,n){var i=this,a=this.layoutCfg,s=this.graph,u=this.getWorker(),l=this.workerData;if(!u)return!1;l.requestId=null,l.requestId2=null,l.currentTick=null,l.currentTickData=null,s.emit("beforelayout");var c=Promise.resolve(),f=!1;if(a.type)f=!0,c=c.then(function(){return i.runWebworker(u,t,a)});else if(a.pipes){f=!0;for(var h=function(D){c=c.then(function(){return i.runWebworker(u,t,D)})},d=0,g=a.pipes;d<g.length;d++)h(g[d])}return f&&c.then(function(){a.onAllLayoutEnd&&a.onAllLayoutEnd(),n?.()}).catch(function(_){console.error("layout failed",_)}),!0},e.prototype.runWebworker=function(t,n,i){var o=this,a=this.isGPU,s=this.filterLayoutData(n,i),u=s.nodes,l=s.edges,c=document.createElement("canvas"),f=a&&typeof window<"u"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in c,h=function Yne(r,e){var t={};return r&&"object"===EC(r)?(Object.keys(r).forEach(function(n){r.hasOwnProperty(n)&&e(r[n])&&(t[n]=r[n])}),t):r}(i,function(g){return"function"!=typeof g});if(f){var d=c.transferControlToOffscreen();h.type="".concat(h.type,"-gpu"),t.postMessage({type:"GPU_LAYOUT_RUN",nodes:u,edges:l,layoutCfg:h,canvas:d},[d])}else t.postMessage({type:"LAYOUT_RUN",nodes:u,edges:l,layoutCfg:h});return new Promise(function(g,m){t.onmessage=function(_){o.handleWorkerMessage(g,m,_,s,i)}})},e.prototype.handleWorkerMessage=function(t,n,i,o,a){var u=this.graph,l=this.workerData,c=i.data,h=function(){a.onTick&&a.onTick()};switch(c.type){case"LAYOUT_TICK":l.currentTick=c.currentTick,l.currentTickData=c,l.requestId||(l.requestId=Uw_requestAnimationFrame(function(){_C(o,c),u.refreshPositions(),h(),c.currentTick===c.totalTicks?t():l.currentTick===c.totalTicks&&(l.requestId2=Uw_requestAnimationFrame(function(){_C(o,l.currentTickData),u.refreshPositions(),l.requestId2=null,h(),t()})),l.requestId=null}));break;case"LAYOUT_END":null==l.currentTick&&(_C(o,c),t());break;case"GPU_LAYOUT_END":null==l.currentTick&&(function Xne(r,e){for(var t=r.nodes,n=e.vertexEdgeData,i=t.length,o=0;o<i;o++){var a=t[o],u=n[4*o+1];a.x=n[4*o],a.y=u}}(o,c),t());break;case"LAYOUT_ERROR":console.warn("Web-Worker layout error!",c.message),n();break;default:n()}},e.prototype.updateLayoutCfg=function(t){var n=this,o=this.graph,a=this.layoutMethods;if(o&&!o.get("destroyed")){var s=t.disableTriggerLayout,u=(0,De.__rest)(t,["disableTriggerLayout"]),l=(0,ue.mix)({},this.layoutCfg,u);if(this.layoutCfg=l,!s){if(!a?.length)return void this.layout();if(this.data=this.setDataFromGraph(),this.stopWorker(),!u.workerEnabled||!this.layoutWithWorker(this.data,null)){o.emit("beforelayout");var c=Promise.resolve(),f=!1;1===a?.length?(f=!0,c=c.then(function(){return(0,De.__awaiter)(n,void 0,void 0,function(){return(0,De.__generator)(this,function(h){switch(h.label){case 0:return[4,this.updateLayoutMethod(a[0],l)];case 1:return[2,h.sent()]}})})})):a?.length&&(f=!0,a.forEach(function(h,d){var g=l.pipes[d];c=c.then(function(){return(0,De.__awaiter)(n,void 0,void 0,function(){return(0,De.__generator)(this,function(m){switch(m.label){case 0:return[4,this.updateLayoutMethod(h,g)];case 1:return[2,m.sent()]}})})})})),f&&c.then(function(){l.onAllLayoutEnd&&l.onAllLayoutEnd()}).catch(function(h){console.warn("layout failed",h)})}}}},e.prototype.adjustPipesBox=function(t,n){var i=this;return new Promise(function(o){var a=t.nodes;a?.length||o(),Hne.includes(n)||(console.warn("The adjust type ".concat(n," is not supported yet, please assign it with 'force', 'grid', or 'circular'.")),o());var s={center:i.layoutCfg.center,nodeSize:function(g){return Math.max(g.height,g.width)},preventOverlap:!0,onLayoutEnd:function(){}},u=i.getLayoutBBox(a),l=u.groupNodes,c=u.layoutNodes,f=(0,ue.clone)(c);s.onLayoutEnd=function(){c?.forEach(function(d,g){var m,_,D,L=d.x-(null===(m=f[g])||void 0===m?void 0:m.x),O=d.y-(null===(_=f[g])||void 0===_?void 0:_.y);null===(D=l[g])||void 0===D||D.forEach(function(Z){Z.x+=L,Z.y+=O})}),o()},new Xi.Layouts[n](s).layout({nodes:c})})},e.prototype.hasGPUVersion=function(t){return Vne.includes(t)},e.prototype.destroy=function(){this.destoryLayoutMethods();var t=this.worker;t&&(t.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},e}(OF);const $ne=Wne;function _C(r,e){for(var t=r.nodes,n=e.nodes,i=t.length,o=0;o<i;o++){var a=t[o];a.x=n[o].x,a.y=n[o].y}}var by,SC,IB,MC;function ra(r){by||function Kne(){by=document.createElement("table"),SC=document.createElement("tr"),IB=/^\s*<(\w+|!)[^>]*>/,MC={tr:document.createElement("tbody"),tbody:by,thead:by,tfoot:by,td:SC,th:SC,"*":document.createElement("div")}}();var e=IB.test(r)&&RegExp.$1;(!e||!(e in MC))&&(e="*");var t=MC[e];r="string"==typeof r?r.replace(/(^\s*)|(\s*$)/g,""):r,t.innerHTML=""+r;var n=t.childNodes[0];return n&&t.contains(n)&&t.removeChild(n),n}var Qne=function r(e,t){var n;e.isGroup()&&t.isGroup()&&(null===(n=e.get("children"))||void 0===n||n.forEach(function(s,u){var l=t.get("children")[u];r(s,l)}));var i=e.get("type"),o=t.get("type");if("image"===i&&"image"===o){var a=e.get("clipShape");a&&t.setClip({type:a.get("type"),attrs:a.attr()})}},OB=Nl,ere=function(r){function e(t){var n=r.call(this,t)||this,i=n.get("defaultNode");return i||n.set("defaultNode",{type:"circle"}),i.type||(i.type="circle",n.set("defaultNode",i)),n.destroyed=!1,n}return(0,De.__extends)(e,r),e.prototype.initLayoutController=function(){var t=new $ne(this);this.set({layoutController:t})},e.prototype.initEventController=function(){var t=new Cne(this);this.set({eventController:t})},e.prototype.initCanvas=function(){var t=this.get("container");if("string"==typeof t&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var u,n=t.clientWidth,i=t.clientHeight,o=this.get("width")||n,a=this.get("height")||i;if(!this.get("width")&&!this.get("height")&&(this.set("width",n),this.set("height",i)),"svg"===this.get("renderer"))u=new vy({container:t,width:o,height:a});else{var l={container:t,width:o,height:a},c=this.get("pixelRatio");c&&(l.pixelRatio=c,window.devicePixelRatio=c),u=new Nh(l)}this.set("canvas",u)},e.prototype.initPlugins=function(){var t=this;(0,ue.each)(t.get("plugins"),function(n){!n.destroyed&&n.initPlugin&&n.initPlugin(t)})},e.prototype.downloadImageWatermark=function(t,n,i,o){return(0,De.__awaiter)(this,void 0,void 0,function(){var a,s,u;return(0,De.__generator)(this,function(l){switch(l.label){case 0:return s=(a=t.style.backgroundImage).slice(5,a.length-2),(u=new Image).src=s,[4,new Promise(function(c){u.onload=function(){var f=n.createPattern(u,"repeat");n.rect(0,0,i,o),n.fillStyle=f,n.fill(),c("")}})];case 1:return l.sent(),[2]}})})},e.prototype.asyncToDataUrl=function(t,n,i,o,a,s){var u=this,l=document.querySelector(".g6-graph-watermarker"),c=this.get("canvas"),f=c.getRenderer(),h=s||c.get("el"),d="";t||(t="image/png"),setTimeout(function(){return(0,De.__awaiter)(u,void 0,void 0,function(){var g,m,_,D,L,O,Z,le,pe,Ee;return(0,De.__generator)(this,function(Re){switch(Re.label){case 0:return"svg"!==f?[3,1]:(g=h.cloneNode(!0),m=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),(_=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",m)).replaceChild(g,_.documentElement),D=(new XMLSerializer).serializeToString(_),d="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(D)),[3,4]);case 1:return L=void 0,O=h.getContext("2d"),Z=o||this.get("width"),le=a||this.get("height"),pe=void 0,l?[4,this.downloadImageWatermark(l,O,Z,le)]:[3,3];case 2:Re.sent(),Re.label=3;case 3:if(n){Ee=typeof window<"u"?window.devicePixelRatio:1;try{L=O.getImageData(0,0,Z*Ee,le*Ee),pe=O.globalCompositeOperation,O.globalCompositeOperation="destination-over",O.fillStyle=n,O.fillRect(0,0,Z,le)}catch{console.error("Download image failed. Out of memory at ImageData creation")}}d=h.toDataURL(t),n&&(O.clearRect(0,0,Z,le),O.putImageData(L,0,0),O.globalCompositeOperation=pe),Re.label=4;case 4:return i&&i(d),[2]}})})},16)},e.prototype.toDataURL=function(t,n){var i=this.get("canvas"),o=i.getRenderer(),a=i.get("el");t||(t="image/png");var s="";if("svg"===o){var u=a.cloneNode(!0),l=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),c=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",l);c.replaceChild(u,c.documentElement);var f=(new XMLSerializer).serializeToString(c);s="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(f))}else{var h=void 0,d=a.getContext("2d"),g=Math.max(this.get("width"),500),m=Math.max(this.get("height"),500),_=void 0;if(n){var D=typeof window<"u"&&window.devicePixelRatio||1;try{h=d.getImageData(0,0,g*D,m*D),_=d.globalCompositeOperation,d.globalCompositeOperation="destination-over",d.fillStyle=n,d.fillRect(0,0,g,m)}catch{console.error("Download image failed. Out of memory at ImageData creation")}}s=a.toDataURL(t),n&&(d.clearRect(0,0,g,m),d.putImageData(h,0,0),d.globalCompositeOperation=_)}return s},e.prototype.toFullDataURL=function(t,n,i){var o=this.get("group").getCanvasBBox(),a=o.height,s=o.width,u=this.get("renderer"),l=ra('<div id="virtual-image"></div>'),c=i?i.backgroundColor:void 0,f=i?i.padding:void 0;f?(0,ue.isNumber)(f)&&(f=[f,f,f,f]):f=[0,0,0,0];var h=a+f[0]+f[2],d=s+f[1]+f[3],g={container:l,height:h,width:d,quickHit:!0},m="svg"===u?new vy(g):new Nh(g),D=this.get("group").clone(),L=(0,ue.clone)(D.getMatrix());L||(L=[1,0,0,0,1,0,0,0,1]),L=OB(L,[["t",-(o.maxX+o.minX)/2,-(o.maxY+o.minY)/2],["t",s/2+f[3],a/2+f[0]]]),D.resetMatrix(),D.setMatrix(L),m.add(D);var le=m.get("el"),pe="";n||(n="image/png"),setTimeout(function(){if("svg"===u){var Ee=le.cloneNode(!0),Re=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),Ve=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",Re);Ve.replaceChild(Ee,Ve.documentElement);var Ue=(new XMLSerializer).serializeToString(Ve);pe="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(Ue))}else{var at=void 0,_t=le.getContext("2d"),vn=void 0;if(c){var Cn=typeof window<"u"?window.devicePixelRatio:1;try{at=_t.getImageData(0,0,d*Cn,h*Cn),vn=_t.globalCompositeOperation,_t.globalCompositeOperation="destination-over",_t.fillStyle=c,_t.fillRect(0,0,d,h)}catch{console.error("Download image failed. Out of memory at ImageData creation")}}pe=le.toDataURL(n),c&&(_t.clearRect(0,0,d,h),_t.putImageData(at,0,0),_t.globalCompositeOperation=vn)}t&&t(pe)},16)},e.prototype.downloadFullImage=function(t,n,i){var o=this,a=this.get("group").getCanvasBBox(),s=a.height,u=a.width,l=this.get("renderer"),c=ra('<div id="virtual-image"></div>'),f=document.querySelector(".g6-graph-watermarker"),h=i?i.backgroundColor:void 0,d=i?i.padding:void 0;d?(0,ue.isNumber)(d)&&(d=[d,d,d,d]):d=[0,0,0,0];var g=s+d[0]+d[2],m=u+d[1]+d[3];if(f){var _=this.get("graphWaterMarker").cfg||{},D=_.width,L=_.height;g=Math.ceil(g/L)*L,m=Math.ceil(m/D)*D}var O={container:c,height:g,width:m},Z="svg"===l?new vy(O):new Nh(O),pe=function(e){var t=e.clone();return Qne(e,t),t}(this.get("group")),Ee=(0,ue.clone)(pe.getMatrix());Ee||(Ee=[1,0,0,0,1,0,0,0,1]),Ee=OB(Ee,[["t",-(a.maxX+a.minX)/2,-(a.maxY+a.minY)/2],["t",u/2+d[3],s/2+d[0]]]),pe.resetMatrix(),pe.setMatrix(Ee),Z.add(pe);var Ue=Z.get("el");n||(n="image/png"),this.asyncToDataUrl(n,h,function(at){var _t=document.createElement("a"),vn=(t||"graph")+("svg"===l?".svg":".".concat(n.split("/")[1]));o.dataURLToImage(at,l,_t,vn);var Cn=document.createEvent("MouseEvents");Cn.initEvent("click",!1,!1),_t.dispatchEvent(Cn)},m,g,Ue)},e.prototype.downloadImage=function(t,n,i){var o=this,a=this;a.stopAnimate();var u=a.get("canvas").getRenderer();n||(n="image/png");var l=(t||"graph")+("svg"===u?".svg":n.split("/")[1]),c=document.createElement("a");a.asyncToDataUrl(n,i,function(f){o.dataURLToImage(f,u,c,l);var h=document.createEvent("MouseEvents");h.initEvent("click",!1,!1),c.dispatchEvent(h)})},e.prototype.dataURLToImage=function(t,n,i,o){if(t&&"data:"!==t){if(typeof window<"u")if(window.Blob&&window.URL&&"svg"!==n){var a=t.split(","),s="";if(a&&a.length>0){var u=a[0].match(/:(.*?);/);u&&u.length>=2&&(s=u[1])}for(var l=atob(a[1]),c=l.length,f=new Uint8Array(c);c--;)f[c]=l.charCodeAt(c);var h=new Blob([f],{type:s});window.navigator.msSaveBlob?window.navigator.msSaveBlob(h,o):i.addEventListener("click",function(){i.download=o,i.href=window.URL.createObjectURL(h)})}else i.addEventListener("click",function(){i.download=o,i.href=t})}else console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items")},e.prototype.addPlugin=function(t){t.destroyed||(this.get("plugins").push(t),t.initPlugin(this))},e.prototype.removePlugin=function(t){var n=this.get("plugins"),i=n.indexOf(t);i>=0&&(t.destroyPlugin(),n.splice(i,1))},e.prototype.setImageWaterMarker=function(t,n){void 0===t&&(t=tp.waterMarkerImage);var i=this.get("container");(0,ue.isString)(i)&&(i=document.getElementById(i)),i.style.position||(i.style.position="relative");var o=this.get("graphWaterMarker"),a=(0,ue.deepMix)({},tp.imageWaterMarkerConfig,n),s=a.width,u=a.height,l=a.compatible,c=a.image;if(!t){var f=l?i:document.querySelector(".g6-graph-watermarker");return f&&(f.style.cssText=void 0),void(o&&o.clear())}if(o)o.clear();else{var h={container:i,width:s,height:u,capture:!1},d=this.get("pixelRatio");d&&(h.pixelRatio=d,window.devicePixelRatio=d),o=new Nh(h),this.set("graphWaterMarker",o)}o.get("el").style.display="none";var g=o.get("context"),m=c.rotate,_=c.x,D=c.y;g.rotate(-m*Math.PI/180);var L=new Image;L.crossOrigin="anonymous",L.src=t,L.onload=function(){if(g.drawImage(L,_,D,c.width,c.height),g.rotate(m*Math.PI/180),l)i.style.cssText="background-image: url(".concat(o.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var O=document.querySelector(".g6-graph-watermarker");O||((O=document.createElement("div")).className="g6-graph-watermarker"),O.className="g6-graph-watermarker",o.destroyed||(O.style.cssText="background-image: url(".concat(o.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"),i.appendChild(O))}}},e.prototype.setTextWaterMarker=function(t,n){var i=this.get("container");(0,ue.isString)(i)&&(i=document.getElementById(i)),i.style.position||(i.style.position="relative");var o=this.get("graphWaterMarker"),a=(0,ue.deepMix)({},tp.textWaterMarkerConfig,n),s=a.width,u=a.height,l=a.compatible,c=a.text;if(!t?.length){var f=l?i:document.querySelector(".g6-graph-watermarker");return f&&(f.style.cssText=void 0),void(o&&o.clear())}if(o)o.clear();else{var h={container:i,width:s,height:u,capture:!1},d=this.get("pixelRatio");d&&(h.pixelRatio=d,window.devicePixelRatio=d),o=new Nh(h),this.set("graphWaterMarker",o)}o.get("el").style.display="none";var g=o.get("context"),m=c.rotate,_=c.fill,D=c.fontFamily,L=c.fontSize,O=c.baseline,Z=c.x,le=c.y,pe=c.lineHeight;g.rotate(-m*Math.PI/180),g.font="".concat(L,"px ").concat(D),g.fillStyle=_,g.textBaseline=O;for(var Ee=(0,ue.isString)(t)?[t]:t,Re=Ee.length-1;Re>=0;Re--)g.fillText(Ee[Re],Z,le+Re*pe);if(g.rotate(m*Math.PI/180),l)i.style.cssText="background-image: url(".concat(o.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var Ve=document.querySelector(".g6-graph-watermarker");Ve||((Ve=document.createElement("div")).className="g6-graph-watermarker"),Ve.style.cssText="background-image: url(".concat(o.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),i.appendChild(Ve)}},e.prototype.destroy=function(){var t,n,i,o;(0,ue.each)(this.get("plugins"),function(c){c.destroyPlugin()});var a=this.get("tooltips");if(a)for(var s=0;s<a.length;s++){var u=a[s];if(u){var l=u.parentElement;!l||l.removeChild(u)}}null===(t=this.get("eventController"))||void 0===t||t.destroy(),null===(n=this.get("layoutController"))||void 0===n||n.destroy(),null===(i=this.get("graphWaterMarker"))||void 0===i||i.destroy(),null===(o=document.querySelector(".g6-graph-watermarker"))||void 0===o||o.remove(),r.prototype.destroy.call(this)},e}(MF);const PB=ere;var tre=kh.radialLayout,nre=kh.traverseTree,rre=function(r){function e(t){var n=r.call(this,t)||this;return n.layoutAnimating=!1,n.set("removeList",[]),n.set("layoutMethod",n.getLayout()),n}return(0,De.__extends)(e,r),e.prototype.getLayout=function(){var t=this.get("layout");return t?"function"==typeof t?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction="indented"===t.type?"LR":"TB"),t.radial?function(n){var i=Gw()[t.type](n,t);return tre(i),i}:function(n){return Gw()[t.type](n,t)}):null},e.indexOfChild=function(t,n){var i=-1;return(0,ue.each)(t,function(o,a){if(n===o.id)return i=a,!1}),i},e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return t.animate=!0,t},e.prototype.innerAddChild=function(t,n,i){var o=this,a=t.data;a&&(a.x=t.x,a.y=t.y,a.depth=t.depth);var s=o.addItem("node",a,!1);if(n){if(s.set("parent",n),i){var u=n.get("originAttrs");if(u)s.set("originAttrs",u);else{var l=n.getModel();s.set("originAttrs",{x:l.x,y:l.y})}}var c=n.get("children");c?c.push(s):n.set("children",[s]),o.addItem("edge",{source:n.get("id"),target:s.get("id"),id:"".concat(n.get("id"),":").concat(s.get("id"))},!1)}return(0,ue.each)(t.children||[],function(f){o.innerAddChild(f,s,i)}),o.emit("afteraddchild",{item:s,parent:n}),s},e.prototype.innerUpdateChild=function(t,n,i){var o=this,a=o.findById(t.id);if(a){(0,ue.each)(t.children||[],function(g){o.innerUpdateChild(g,a,i)});var f,h,s=a.get("children");if(s&&s.length>0)for(var l=s.length-1;l>=0;l--){var c=s[l].getModel();-1===e.indexOfChild(t.children||[],c.id)&&(o.innerRemoveChild(c.id,{x:t.x,y:t.y},i),s.splice(l,1))}a.get("originAttrs")&&(f=a.get("originAttrs").x,h=a.get("originAttrs").y);var d=a.getModel();i&&a.set("originAttrs",{x:d.x,y:d.y}),a.set("model",Object.assign(d,t.data)),(f!==t.x||h!==t.y)&&a.updatePosition({x:t.x,y:t.y})}else o.innerAddChild(t,n,i)},e.prototype.innerRemoveChild=function(t,n,i){var o=this,a=o.findById(t);if(a)if((0,ue.each)(a.get("children"),function(u){o.innerRemoveChild(u.getModel().id,n,i)}),i){var s=a.getModel();a.set("to",n),a.set("originAttrs",{x:s.x,y:s.y}),o.get("removeList").push(a)}else o.removeItem(a,!1)},e.prototype.changeData=function(t,n){void 0===n&&(n=!0);var i=this;this.getNodes().map(function(o){return i.clearItemStates(o)}),this.getEdges().map(function(o){return i.clearItemStates(o)}),n&&this.get("enabledStack")&&this.pushStack("changedata",{before:i.get("originData"),after:t||i.get("data")}),t?(i.data(t),i.render(!1)):i.layout(this.get("fitView"))},e.prototype.changeLayout=function(t){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon"),this.updateLayout(t)},e.prototype.updateLayout=function(t,n){void 0===n&&(n=!0);var i=this;t?(n&&this.get("enabledStack")&&this.pushStack("layout",{before:i.get("layout"),after:t}),i.set("layout",t),i.set("layoutMethod",i.getLayout()),i.layout()):console.warn("layout cannot be null")},e.prototype.refreshLayout=function(t){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon"),this.layout(t)},e.prototype.layout=function(t){var n=this,i=n.get("data"),o=n.get("layoutMethod"),a=o?o(i,n.get("layout")):i,s=n.get("animate");n.emit("beforerefreshlayout",{data:i,layoutData:a}),n.emit("beforelayout"),n.innerUpdateChild(a,void 0,s),t&&n.get("viewController").fitView(),s?n.layoutAnimate(a):(n.refresh(),n.paint()),n.emit("afterrefreshlayout",{data:i,layoutData:a}),n.emit("afterlayout")},e.prototype.addChild=function(t,n,i){void 0===i&&(i=!0);var o=this;o.emit("beforeaddchild",{model:t,parent:n}),(0,ue.isString)(n)||(n=n.get("id"));var a=o.findDataById(n);a&&(a.children||(a.children=[]),a.children.push(t),o.findById(n).refresh(),o.changeData(void 0,i))},e.prototype.updateChildren=function(t,n,i){void 0===i&&(i=!0);var o=this,a=o.findById(n);n&&a?(o.findDataById(n).children=t,a.refresh(),o.changeData(void 0,i)):console.warn("Update children failed! There is no node with id '".concat(n,"'"))},e.prototype.updateChild=function(t,n,i){void 0===i&&(i=!0);var o=this;if(n&&o.findById(n)){var a=o.findDataById(n),s=o.findById(t.id);if(a.children||(a.children=[]),s){var u=e.indexOfChild(a.children,t.id);u>-1&&(a.children[u]=t)}else a.children.push(t);o.findById(n)?.refresh(),o.changeData(void 0,i)}else o.changeData(t,i)},e.prototype.removeChild=function(t,n){void 0===n&&(n=!0);var a,i=this,o=i.findById(t);if((a=o?o?.get("parent"):i.getNodes().find(function(f){return!!(f.getModel().children||[]).find(function(d){return d.id===t})}))&&!a.destroyed){var s=a.get("id"),u=i.findDataById(s),l=u&&u.children||[],c=e.indexOfChild(l,t);l.splice(c,1),a.refresh()}i.changeData(void 0,n)},e.prototype.findDataById=function(t,n){var i=this;if(n||(n=i.get("data")),t===n.id)return n;var o=null;return(0,ue.each)(n.children||[],function(a){return a.id===t?(o=a,!1):!(o=i.findDataById(t,a))&&void 0}),o},e.prototype.layoutAnimate=function(t,n){var i=this,o=this.get("animateCfg");i.emit("beforeanimate",{data:t}),i.getEdges().forEach(function(a){var s=a.get("model");s.sourceAnchor||(s.sourceAnchor=a.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(a){nre(t,function(s){var u=i.findById(s.id);if(u){var l=u.get("originAttrs"),c=u.get("model");if(l||u.set("originAttrs",l={x:c.x,y:c.y}),n){var f=n(u,a,l,t);u.set("model",Object.assign(c,f))}else c.x=l.x+(s.x-l.x)*a,c.y=l.y+(s.y-l.y)*a}return!0}),(0,ue.each)(i.get("removeList"),function(s){var u=s.getModel(),l=s.get("originAttrs"),c=s.get("to");u.x=l.x+(c.x-l.x)*a,u.y=l.y+(c.y-l.y)*a}),i.refreshPositions()},{duration:o.duration,easing:o.ease,callback:function(){(0,ue.each)(i.getNodes(),function(s){s.set("originAttrs",null)}),(0,ue.each)(i.get("removeList"),function(s){i.removeItem(s,!1)}),i.set("removeList",[]),o.callback&&o.callback(),i.emit("afteranimate",{data:t})},delay:o.delay})},e.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},e.prototype.isLayoutAnimating=function(){return this.layoutAnimating},e.prototype.render=function(t){void 0===t&&(t=!0);var n=this,i=n.get("data");if(!i||!(0,ue.isObject)(i)||!Object.keys(i).length)throw new Error("data must be defined first");n.clear(),t&&this.get("enabledStack")&&this.clearStack(),n.emit("beforerender"),n.layout(this.get("fitView")),n.emit("afterrender")},e.prototype.save=function(){return this.get("data")},e.prototype.data=function(t){r.prototype.data.call(this,t),this.set("originData",JSON.parse(JSON.stringify(t)))},e}(PB);const ire=rre;function Fi(r,e){if(r)for(var t in e)e.hasOwnProperty(t)&&(r.style[t]=e[t]);return r}var ore=function(){function r(e){this._cfgs=(0,ue.deepMix)(this.getDefaultCfgs(),e),this._events={},this.destroyed=!1}return r.prototype.getDefaultCfgs=function(){return{}},r.prototype.initPlugin=function(e){var t=this;t.set("graph",e);var n=t.getEvents(),i={};(0,ue.each)(n,function(o,a){var s=(0,ue.wrapBehavior)(t,o);i[a]=s,e.on(a,s)}),this._events=i,this.init()},r.prototype.getEvents=function(){return{}},r.prototype.get=function(e){var t;return null===(t=this._cfgs)||void 0===t?void 0:t[e]},r.prototype.set=function(e,t){this._cfgs[e]=t},r.prototype.destroy=function(){},r.prototype.destroyPlugin=function(){this.destroy();var e=this.get("graph");(0,ue.each)(this._events,function(n,i){e.off(i,n)}),this._events=null,this._cfgs=null,this.destroyed=!0},r}();const Uu=ore;var r,are=(r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(i[a]=o[a])},r(t,n)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),NB="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",sre=function(r){function e(t){return r.call(this,t)||this}return are(e,r),e.prototype.getDefaultCfgs=function(){return{img:NB,follow:!0}},e.prototype.init=function(){var t=this.get("graph"),n=t.get("container"),i=t.get("canvas").get("el"),o=this.get("img")||NB;o.includes("url(")||(o='url("'.concat(o,'")'));var a=ra("<div class='g6-grid-container' style=\"position:absolute;overflow:hidden;z-index: -1;\"></div>"),s=ra("<div\n        class='g6-grid'\n        style='position:absolute;\n        background-image: ".concat(o,";\n        user-select: none\n        '></div>"));this.set("container",a),this.set("gridContainer",s),this.positionInit(),a.appendChild(s),n.insertBefore(a,i)},e.prototype.positionInit=function(){var t=this.get("graph"),n=t.get("minZoom"),i=t.get("width"),o=t.get("height");Fi(this.get("container"),{width:"".concat(i,"px"),height:"".concat(o,"px")});var a=80*i/n,s=80*o/n;Fi(this.get("gridContainer"),{width:"".concat(a,"px"),height:"".concat(s,"px"),left:"-".concat(a/2,"px"),top:"-".concat(s/2,"px")})},e.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},e.prototype.updateGrid=function(t){var n=this.get("gridContainer"),i=t.matrix;i||(i=[1,0,0,0,1,0,0,0,1]);var o=this.get("follow");Fi(n,{transform:"matrix(".concat(i[0],", ").concat(i[1],", ").concat(i[3],", ").concat(i[4],", ").concat(o?i[6]:"0",", ").concat(o?i[7]:"0",")")})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var n=this.get("graph").get("container"),i=this.get("container");n.removeChild(i)},e}(Uu);const ure=sre;var lre=G(4586),Vw=G.n(lre),cre=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(i[a]=o[a])},r(t,n)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();typeof document<"u"&&Vw()("\n  .g6-component-contextmenu {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n  .g6-contextmenu-ul {\n    padding: 0;\n    margin: 0;\n    list-style: none;\n  }\n\n");var fre=function(r){function e(t){return r.call(this,t)||this}return cre(e,r),e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(n){return"\n          <ul class='g6-contextmenu-ul'>\n            <li>\u83dc\u5355\u98791</li>\n            <li>\u83dc\u5355\u98792</li>\n          </ul>\n        "},shouldBegin:function(n){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},e.prototype.getEvents=function(){return"click"===this.get("trigger")?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},e.prototype.init=function(){var t=this.get("className"),n=ra("<div class=".concat(t||"g6-component-contextmenu","></div>"));Fi(n,{top:"0px",position:"absolute",visibility:"hidden"});var i=this.get("container");i||(i=this.get("graph").get("container")),(0,ue.isString)(i)&&(i=document.getElementById(i)),i.appendChild(n),this.set("menu",n)},e.prototype.onMenuShow=function(t){var n=this;t.preventDefault();var i=this.get("itemTypes");if(t.item){if(t.item&&t.item.getType&&-1===i.indexOf(t.item.getType()))return void n.onMenuHide()}else if(-1===i.indexOf("canvas"))return void n.onMenuHide();if(this.get("shouldBegin")(t)){var a=this.get("menu"),s=this.get("getContent"),u=this.get("graph"),l=s(t,u);a.innerHTML=(0,ue.isString)(l)?l:l.outerHTML,this.removeMenuEventListener();var c=this.get("handleMenuClick");if(c){var f=function(Re){c(Re.target,t.item,u)};this.set("handleMenuClickWrapper",f),a.addEventListener("click",f)}var h=u.get("width"),d=u.get("height"),g=a.getBoundingClientRect(),m=this.get("offsetX")||0,_=this.get("offsetY")||0,D=u.getContainer().offsetTop,L=u.getContainer().offsetLeft,O=t.canvasX+L+m,Z=t.canvasY+D+_;O+g.width>h&&(O=t.canvasX-g.width-m+L),Z+g.height>d&&(Z=t.canvasY-g.height-_+D),Fi(a,{top:"".concat(Z,"px"),left:"".concat(O,"px"),visibility:"visible"});var le="click"===this.get("trigger"),pe=function(Re){le?le=!1:n.onMenuHide()};document.body.addEventListener("click",pe),this.set("handler",pe)}},e.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),n=this.get("handler");t&&(this.get("menu").removeEventListener("click",t),this.set("handleMenuClickWrapper",null)),n&&document.body.removeEventListener("click",n)},e.prototype.onMenuHide=function(){var t=this.get("menu");t&&Fi(t,{visibility:"hidden"}),this.removeMenuEventListener()},e.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var n=this.get("container");n||(n=this.get("graph").get("container")),(0,ue.isString)(n)&&(n=document.getElementById(n)),n.removeChild(t)}},e}(Uu);const hre=fre;var dre=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(i[a]=o[a])},r(t,n)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),CC=function(){return CC=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},CC.apply(this,arguments)},LB=Math.max,gre=Nl,yre=function(r){function e(t){var n=r.call(this,t)||this;return n.handleUpdateCanvas=(0,ue.debounce)(function(i){n.destroyed||n.updateCanvas()},100,!1),n}return dre(e,r),e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0,hideEdge:!1}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,n=this._cfgs,i=n.size,o=n.graph;if(!this.destroyed){var s=this.get("canvas").get("container"),u=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,l=navigator.userAgent.toLowerCase().indexOf("safari")>-1,c=ra("\n      <div\n        class=".concat(n.viewportClassName,"\n        style='position:absolute;\n          left:0;\n          top:0;\n          box-sizing:border-box;\n          outline: 2px solid #1980ff;\n          cursor:move'\n        draggable=").concat(!(l||u),"\n      </div>")),f=0,h=0,d=!1,g=0,m=0,_=0,D=0,L=0,O=0;c.addEventListener(l||u?"mousedown":"dragstart",function(Re){var Ve,Ue;if(Re.dataTransfer){var at=new Image;at.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",null===(Ue=(Ve=Re.dataTransfer).setDragImage)||void 0===Ue||Ue.call(Ve,at,0,0);try{Re.dataTransfer.setData("text/html","view-port-minimap")}catch{Re.dataTransfer.setData("text","view-port-minimap")}}if(n.refresh=!1,Re.target===c){var _t=c.style;g=parseInt(_t.left,10),m=parseInt(_t.top,10),_=parseInt(_t.width,10),D=parseInt(_t.height,10),!(_>i[0]||D>i[1])&&(O=o.getZoom(),L=t.get("ratio"),d=!0,f=Re.clientX,h=Re.clientY)}},!1);var le=function(Ve){if(d&&!(0,ue.isNil)(Ve.clientX)&&!(0,ue.isNil)(Ve.clientY)){var Ue=f-Ve.clientX,at=h-Ve.clientY;(g-Ue<0||g-Ue+_>=i[0])&&(Ue=0),(m-at<0||m-at+D>=i[1])&&(at=0),m-=at,Fi(c,{left:"".concat(g-=Ue,"px"),top:"".concat(m,"px")}),o.translate(Ue*O/L,at*O/L),f=Ve.clientX,h=Ve.clientY}};!l&&!u&&c.addEventListener("drag",le,!1);var pe=function(){d=!1,n.refresh=!0};c.addEventListener(l||u?"mouseup":"dragend",pe,!1),s.addEventListener("mouseleave",pe),s.addEventListener("mouseup",pe),(l||u)&&s.addEventListener("mousemove",le,!1),this.set("viewport",c),s.appendChild(c)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),n=this.get("totaldx"),i=this.get("totaldy"),o=this.get("graph"),a=this.get("size"),s=o.get("canvas").get("el"),u=o.get("width")||s.scrollWidth||500,l=o.get("height")||s.scrollHeight||500,c=o.getPointByCanvas(0,0),f=o.getPointByCanvas(u,l),h=this.get("viewport");h||this.initViewport();var d=(f.x-c.x)*t,g=(f.y-c.y)*t,m=c.x*t+n,_=c.y*t+i,D=m+d,L=_+g;m<0&&(d+=m,m=0),D>a[0]&&(d-=D-a[0]),_<0&&(g+=_,_=0),L>a[1]&&(g-=L-a[1]),this.set("ratio",t),Fi(h,{left:"".concat(m,"px"),top:"".concat(_,"px"),width:"".concat(d,"px"),height:"".concat(g,"px")})}},e.prototype.updateGraphShapes=function(){var o,t=this._cfgs.graph,n=this.get("canvas"),i=t.get("group");i.destroyed||(n.clear(),this.get("hideEdge")?(o=n.addGroup(),i.get("children").forEach(function(s){s.get("id").includes("-edge")||o.add(s.clone())})):((o=i.clone()).resetMatrix(),n.add(o)),"svg"===t.get("renderer")&&this.updateVisible(o))},e.prototype.updateVisible=function(t){var n=this;if(t.isGroup()||t.get("visible")){var i=t.get("children");if(!i||!i.length)return;i.forEach(function(o){o.get("visible")||o.hide(),n.updateVisible(o)})}else t.hide()},e.prototype.updateKeyShapes=function(){var t=this,n=this._cfgs.graph,i=this.get("canvas"),o=i.get("children")[0]||i.addGroup();this.get("hideEdge")||(0,ue.each)(n.getEdges(),function(u){t.updateOneEdgeKeyShape(u,o)}),(0,ue.each)(n.getNodes(),function(u){t.updateOneNodeKeyShape(u,o)});var a=n.getCombos();if(a&&a.length){var s=o.find(function(u){return"comboGroup"===u.get("name")})||o.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,ue.each)(a,function(u){t.updateOneComboKeyShape(u,s)}),s?.sort(),s?.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.updateOneComboKeyShape=function(t,n){if(!this.destroyed){var i=this.get("itemMap")||{},o=i[t.get("id")],a=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),l={x:a.centerX,y:a.centerY};o?l=Object.assign(u,l):n.add(o=s);var c=o.get("type");("rect"===c||"image"===c)&&(l.x=a.minX,l.y=a.minY),o.attr(l),t.isVisible()?o.show():o.hide(),o.exist=!0;var f=t.getModel().depth;isNaN(f)||o.set("zIndex",f),i[t.get("id")]=o,this.set("itemMap",i)}},e.prototype.updateOneNodeKeyShape=function(t,n){var i=this.get("itemMap")||{},o=i[t.get("id")],a=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),l={x:a.centerX,y:a.centerY};o?(l=Object.assign(u,l),o.toFront()):n.add(o=s);var c=o.get("type");("rect"===c||"image"===c)&&(l.x=a.minX,l.y=a.minY),o.attr(l),t.isVisible()?o.show():o.hide(),o.exist=!0;var f=t.getModel().depth;isNaN(f)||o.set("zIndex",f),i[t.get("id")]=o,this.set("itemMap",i)},e.prototype.updateDelegateShapes=function(){var t=this,n=this._cfgs.graph,i=this.get("canvas"),o=i.get("children")[0]||i.addGroup();this.get("hideEdge")||(0,ue.each)(n.getEdges(),function(u){t.updateOneEdgeKeyShape(u,o)}),(0,ue.each)(n.getNodes(),function(u){t.updateOneNodeDelegateShape(u,o)});var a=n.getCombos();if(a&&a.length){var s=o.find(function(u){return"comboGroup"===u.get("name")})||o.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,ue.each)(a,function(u){t.updateOneComboKeyShape(u,s)}),s?.sort(),s?.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},n=Object.keys(t);if(n&&0!==n.length)for(var i=n.length-1;i>=0;i--){var o=t[n[i]],a=o.exist;o.exist=!1,a||(o.remove(),delete t[n[i]])}},e.prototype.updateOneEdgeKeyShape=function(t,n){var i=this.get("itemMap")||{},o=i[t.get("id")];if(o){var a=t.get("keyShape").attr("path");o.attr("path",a)}else o=t.get("keyShape").clone(),n.add(o);t.isVisible()?o.show():o.hide(),o.exist=!0,i[t.get("id")]=o,this.set("itemMap",i)},e.prototype.updateOneNodeDelegateShape=function(t,n){var i=this.get("delegateStyle"),o=this.get("itemMap")||{},a=o[t.get("id")],s=t.getBBox();a?(a.attr({x:s.minX,y:s.minY,width:s.width,height:s.height}),a.toFront()):a=n.addShape("rect",{attrs:CC({x:s.minX,y:s.minY,width:s.width,height:s.height},i),name:"minimap-node-shape"}),t.isVisible()?a.show():a.hide(),a.exist=!0,o[t.get("id")]=a,this.set("itemMap",o)},e.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},e.prototype.initContainer=function(){var t=this,n=t.get("graph"),i=t.get("size"),o=t.get("className"),a=t.get("container"),s=ra("<div class='".concat(o,"' style='width: ").concat(i[0],"px; height: ").concat(i[1],"px; overflow: hidden'></div>"));(0,ue.isString)(a)&&(a=document.getElementById(a)),a?a.appendChild(s):n.get("container").appendChild(s),t.set("container",s);var l,u=ra('<div class="g6-minimap-container" style="position: relative;"></div>');s.appendChild(u),u.addEventListener("dragenter",function(f){f.preventDefault()}),u.addEventListener("dragover",function(f){f.preventDefault()}),l="svg"===n.get("renderer")?new vy({container:u,width:i[0],height:i[1]}):new Nh({container:u,width:i[0],height:i[1]}),t.set("canvas",l),t.updateCanvas()},e.prototype.updateCanvas=function(){if(!this.destroyed&&this.get("refresh")){var n=this.get("graph");if(!n.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var i=this.get("size"),o=this.get("canvas"),a=this.get("type"),s=this.get("padding");if(!o.destroyed){switch(a){case"default":this.updateGraphShapes();break;case"keyShape":this.updateKeyShapes();break;case"delegate":this.updateDelegateShapes()}var u=o.get("children")[0];if(u){u.resetMatrix();var l=u.getCanvasBBox(),c=n.get("canvas").getCanvasBBox(),f=n.getZoom()||1,h=c.width/f,d=c.height/f;Number.isFinite(l.width)&&(h=LB(l.width,h),d=LB(l.height,d)),h+=2*s,d+=2*s;var g=Math.min(i[0]/h,i[1]/d),m=[1,0,0,0,1,0,0,0,1],_=0,D=0;Number.isFinite(l.minX)&&(_=-l.minX),Number.isFinite(l.minY)&&(D=-l.minY);var L=(i[0]-(h-2*s)*g)/2,O=(i[1]-(d-2*s)*g)/2;m=gre(m,[["t",_,D],["s",g,g],["t",L,O]]),u.setMatrix(m),this.set("ratio",g),this.set("totaldx",L+_*g),this.set("totaldy",O+D*g),this.set("dx",L),this.set("dy",O),this.updateViewport()}}}}},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t;null===(t=this.get("canvas"))||void 0===t||t.destroy();var n=this.get("container");n?.parentNode&&n.parentNode.removeChild(n)},e}(Uu);const bre=yre;var wre=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(i[a]=o[a])},r(t,n)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();function Ff(r,e,t){var n=r.x-e.x,i=r.y-e.y;return!t||Math.abs(n)>t||Math.abs(i)>t?Math.sqrt(n*n+i*i):t}function RB(r,e){var t=(e.source.y-e.target.y)/(e.source.x-e.target.x),n=(t*t*e.source.x+t*(r.y-e.source.y)+r.x)/(t*t+1);return{x:n,y:t*(n-e.source.x)+e.source.y}}var Ere=function(r){function e(t){return r.call(this,t)||this}return wre(e,r),e.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},e.prototype.init=function(){var t=this.get("graph"),n=this.get("onTick");this.set("tick",function(){n&&n(),t.refreshPositions()})},e.prototype.bundling=function(t){var n=this;if(n.set("data",t),!n.isTicking()){var i=t.edges||[],a={},s=!1;if((t.nodes||[]).forEach(function(Z){(null===Z.x||null===!Z.y||void 0===Z.x||void 0===!Z.y)&&(s=!0),a[Z.id]=Z}),s)throw new Error("please layout the graph or assign x and y for nodes first");n.set("nodeIdMap",a);var u=n.get("divisions"),l=n.get("divRate"),c=n.divideEdges(u);n.set("edgePoints",c);var f=n.getEdgeBundles();n.set("edgeBundles",f);for(var h=n.get("cycles"),d=n.get("iterations"),g=n.get("iterRate"),m=n.get("lambda"),_=0;_<h;_++){for(var D=function(le){var pe=[];i.forEach(function(Ee,Re){if(Ee.source!==Ee.target){pe[Re]=n.getEdgeForces({source:a[Ee.source],target:a[Ee.target]},Re,u,m);for(var at=0;at<u+1;at++)c[Re][at].x+=pe[Re][at].x,c[Re][at].y+=pe[Re][at].y}})},L=0;L<d;L++)D();m/=2,d*=g,c=n.divideEdges(u*=l),n.set("edgePoints",c)}i.forEach(function(Z,le){Z.source!==Z.target&&(Z.type="polyline",Z.controlPoints=c[le].slice(1,c[le].length-1))}),n.get("graph").refresh()}},e.prototype.updateBundling=function(t){var n=this,i=t.data;if(i&&n.set("data",i),n.get("ticking")&&n.set("ticking",!1),Object.keys(t).forEach(function(a){n.set(a,t[a])}),t.onTick){var o=this.get("graph");n.set("tick",function(){t.onTick(),o.refresh()})}n.bundling(i)},e.prototype.divideEdges=function(t){var n=this,i=n.get("data").edges,o=n.get("nodeIdMap"),a=n.get("edgePoints");return(!a||void 0===a)&&(a=[]),i.forEach(function(s,u){var l;(!a[u]||void 0===a[u])&&(a[u]=[]);var c=o[s.source],f=o[s.target];if(1===t)a[u].push({x:c.x,y:c.y}),a[u].push({x:.5*(c.x+f.x),y:.5*(c.y+f.y)}),a[u].push({x:f.x,y:f.y});else{var d=(null!==(l=a[u])&&void 0!==l&&l.length?n.getEdgeLength(a[u]):Ff({x:c.x,y:c.y},{x:f.x,y:f.y}))/(t+1),g=d,m=[{x:c.x,y:c.y}];a[u].forEach(function(_,D){if(0!==D){for(var L=Ff(_,a[u][D-1]);L>g;){var O=g/L,Z={x:a[u][D-1].x,y:a[u][D-1].y};Z.x+=O*(_.x-a[u][D-1].x),Z.y+=O*(_.y-a[u][D-1].y),m.push(Z),L-=g,g=d}g-=L}}),m.push({x:f.x,y:f.y}),a[u]=m}}),a},e.prototype.getEdgeLength=function(t){var n=0;return t.forEach(function(i,o){0!==o&&(n+=Ff(i,t[o-1]))}),n},e.prototype.getEdgeBundles=function(){var t=this,i=t.get("data").edges||[],o=t.get("bundleThreshold"),a=t.get("nodeIdMap"),s=t.get("edgeBundles");return s||(s=[]),i.forEach(function(u,l){(!s[l]||void 0===s[l])&&(s[l]=[])}),i.forEach(function(u,l){var c=a[u.source],f=a[u.target];i.forEach(function(h,d){d<=l||t.getBundleScore({source:c,target:f},{source:a[h.source],target:a[h.target]})>=o&&(s[l].push(d),s[d].push(l))})}),s},e.prototype.getBundleScore=function(t,n){var i=this;return t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,n.vx=n.target.x-n.source.x,n.vy=n.target.y-n.source.y,t.length=Ff({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),n.length=Ff({x:n.source.x,y:n.source.y},{x:n.target.x,y:n.target.y}),i.getAngleScore(t,n)*i.getScaleScore(t,n)*i.getPositionScore(t,n)*i.getVisibilityScore(t,n)},e.prototype.getAngleScore=function(t,n){var i=function xre(r,e){return r.x*e.x+r.y*e.y}({x:t.vx,y:t.vy},{x:n.vx,y:n.vy});return i/(t.length*n.length)},e.prototype.getScaleScore=function(t,n){var i=(t.length+n.length)/2;return 2/(i/Math.min(t.length,n.length)+Math.max(t.length,n.length)/i)},e.prototype.getPositionScore=function(t,n){var i=(t.length+n.length)/2;return i/(i+Ff({x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},{x:(n.source.x+n.target.x)/2,y:(n.source.y+n.target.y)/2}))},e.prototype.getVisibilityScore=function(t,n){var i=this.getEdgeVisibility(t,n),o=this.getEdgeVisibility(n,t);return i<o?i:o},e.prototype.getEdgeVisibility=function(t,n){var i=RB(n.source,t),o=RB(n.target,t);return Math.max(0,1-2*Ff({x:(i.x+o.x)/2,y:(i.y+o.y)/2},{x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2})/Ff(i,o))},e.prototype.getEdgeForces=function(t,n,i,o){for(var a=this,s=a.get("edgePoints"),l=a.get("K")/(Ff(t.source,t.target)*(i+1)),c=[{x:0,y:0}],f=1;f<i;f++){var h={x:0,y:0},d=a.getSpringForce({pre:s[n][f-1],cur:s[n][f],next:s[n][f+1]},l),g=a.getElectrostaticForce(f,n);h.x=o*(d.x+g.x),h.y=o*(d.y+g.y),c.push(h)}return c.push({x:0,y:0}),c},e.prototype.getSpringForce=function(t,n){var i=t.pre.x+t.next.x-2*t.cur.x,o=t.pre.y+t.next.y-2*t.cur.y;return{x:i*=n,y:o*=n}},e.prototype.getElectrostaticForce=function(t,n){var i=this,o=i.get("eps"),a=i.get("edgeBundles"),s=i.get("edgePoints"),l={x:0,y:0};return a[n].forEach(function(c){var f={x:s[c][t].x-s[n][t].x,y:s[c][t].y-s[n][t].y};if(Math.abs(f.x)>o||Math.abs(f.y)>o){var d=1/Ff(s[c][t],s[n][t]);l.x+=f.x*d,l.y+=f.y*d}}),l},e.prototype.isTicking=function(){return this.get("ticking")},e.prototype.getSimulation=function(){return this.get("forceSimulation")},e.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),r.prototype.destroy.call(this)},e}(Uu);const _re=Ere;var Sre=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(i[a]=o[a])},r(t,n)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),AC=function(){return AC=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},AC.apply(this,arguments)},FB={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},Mre=function(r){function e(t){return r.call(this,t)||this}return Sre(e,r),e.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:(0,ue.clone)(FB),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"}}return t},e.prototype.init=function(){var t=this,n=t.get("r");t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{}),t.set("r2",n*n);var i=t.get("d");t.set("molecularParam",(i+1)*n)},e.prototype.createDelegate=function(t){var n=this,i=this,o=i.get("delegate");(!o||o.destroyed)&&(i.magnify(t),(o=i.get("delegate")).on("dragstart",function(a){i.set("delegateCenterDiff",{x:o.attr("x")-a.x,y:o.attr("y")-a.y})}),o.on("drag",function(a){i.magnify(a)}),"wheel"===this.get("scaleDBy")&&o.on("mousewheel",function(a){n.scaleDByWheel(a)}),"wheel"===this.get("scaleRBy")&&o.on("mousewheel",function(a){i.scaleRByWheel(a)}))},e.prototype.scaleRByWheel=function(t){var n=this;if(t&&t.originalEvent){t.preventDefault&&t.preventDefault();var o,i=n.get("graph"),a=n.get("delegate"),u=(a?{x:a.attr("x"),y:a.attr("y")}:void 0)||i.getPointByClient(t.clientX,t.clientY);o=t.originalEvent.wheelDelta<0?.95:1/.95;var l=n.get("maxR"),c=n.get("minR"),f=n.get("r");(f>(l||i.get("height"))&&o>1||f<(c||.05*i.get("height"))&&o<1)&&(o=1),n.set("r",f*=o),n.set("r2",f*f);var h=n.get("d");n.set("molecularParam",(h+1)*f),n.set("delegateCenterDiff",void 0),n.magnify(t,u)}},e.prototype.scaleRByDrag=function(t){var n=this;if(t){var a,i=n.get("dragPrePos"),o=n.get("graph"),s=o.getPointByClient(t.clientX,t.clientY);a=t.x-i.x<0?.95:1/.95;var u=n.get("maxR"),l=n.get("minR"),c=n.get("r");(c>(u||o.get("height"))&&a>1||c<(l||.05*o.get("height"))&&a<1)&&(a=1),n.set("r",c*=a),n.set("r2",c*c);var f=n.get("d");n.set("molecularParam",(f+1)*c),n.magnify(t,s),n.set("dragPrePos",{x:t.x,y:t.y})}},e.prototype.scaleDByWheel=function(t){var n=this;if(t||t.originalEvent){t.preventDefault&&t.preventDefault();var i;i=t.originalEvent.wheelDelta<0?-.1:.1;var a=n.get("d")+i,s=n.get("maxD"),u=n.get("minD");if(a<s&&a>u){n.set("d",a);var l=n.get("r");n.set("molecularParam",(a+1)*l);var c=n.get("delegate"),f=c?{x:c.attr("x"),y:c.attr("y")}:void 0;n.set("delegateCenterDiff",void 0),n.magnify(t,f)}}},e.prototype.scaleDByDrag=function(t){var n=this,i=n.get("dragPrePos"),o=t.x-i.x>0?.1:-.1,s=n.get("d")+o,u=n.get("maxD"),l=n.get("minD");if(s<u&&s>l){n.set("d",s);var c=n.get("r");n.set("molecularParam",(s+1)*c),n.magnify(t)}n.set("dragPrePos",{x:t.x,y:t.y})},e.prototype.magnify=function(t,n){var i=this;i.restoreCache();var o=i.get("graph"),a=i.get("cachedMagnifiedModels"),s=i.get("cachedOriginPositions"),u=i.get("showLabel"),l=i.get("r"),c=i.get("r2"),f=i.get("d"),h=i.get("molecularParam"),d=o.getNodes(),g=d.length,m=n?{x:n.x,y:n.y}:{x:t.x,y:t.y};i.get("dragging")&&("mousemove"===i.get("trigger")||"click"===i.get("trigger"))&&(m=i.get("cacheCenter"));var _=i.get("delegateCenterDiff");_&&(m.x+=_.x,m.y+=_.y),i.updateDelegate(m,l);for(var D=0;D<g;D++){var L=d[D].getModel(),O=L.x,Z=L.y;if(!isNaN(O)&&!isNaN(Z)){var le=(O-m.x)*(O-m.x)+(Z-m.y)*(Z-m.y);if(!isNaN(le)&&le<c&&0!==le){var pe=Math.sqrt(le),Ee=h*pe/(f*pe+l),Ve=(Z-m.y)/pe;if(L.x=(O-m.x)/pe*Ee+m.x,L.y=Ve*Ee+m.y,s[L.id]||(s[L.id]={x:O,y:Z,texts:[]}),a.push(L),u&&2*pe<l)for(var _t=d[D].getContainer().getChildren(),vn=_t.length,Cn=0;Cn<vn;Cn++){var Tt=_t[Cn];"text"===Tt.get("type")&&(s[L.id].texts.push({visible:Tt.get("visible"),shape:Tt}),Tt.set("visible",!0))}}}}o.refreshPositions()},e.prototype.restoreCache=function(){for(var t=this,n=t.get("cachedMagnifiedModels"),i=t.get("cachedOriginPositions"),o=n.length,a=0;a<o;a++){var s=n[a],l=i[s.id];s.x=l.x,s.y=l.y;for(var c=l.texts.length,f=0;f<c;f++){var h=l.texts[f];h.shape.set("visible",h.visible)}}t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{})},e.prototype.updateParams=function(t){var n=this,i=t.r,o=t.d,a=t.trigger,s=t.minD,u=t.maxD,l=t.minR,c=t.maxR,f=t.scaleDBy,h=t.scaleRBy;isNaN(t.r)||(n.set("r",i),n.set("r2",i*i)),isNaN(o)||n.set("d",o),isNaN(u)||n.set("maxD",u),isNaN(s)||n.set("minD",s),isNaN(c)||n.set("maxR",c),isNaN(l)||n.set("minR",l);var m,d=n.get("d"),g=n.get("r");n.set("molecularParam",(d+1)*g),("mousemove"===a||"click"===a||"drag"===a)&&n.set("trigger",a),("drag"===f||"wheel"===f||"unset"===f)&&(n.set("scaleDBy",f),n.get("delegate").remove(),n.get("delegate").destroy(),(m=n.get("dPercentText"))&&(m.remove(),m.destroy())),"drag"!==h&&"wheel"!==h&&"unset"!==h||(n.set("scaleRBy",h),n.get("delegate").remove(),n.get("delegate").destroy(),(m=n.get("dPercentText"))&&(m.remove(),m.destroy()))},e.prototype.updateDelegate=function(t,n){var i=this,o=this,a=o.get("graph"),s=o.get("delegate");if(!s||s.destroyed){var u=a.get("group"),l=o.get("delegateStyle")||FB;s=u.addShape("circle",{attrs:AC({r:n/1.5,x:t.x,y:t.y},l),name:"lens-shape",draggable:!0}),"drag"!==this.get("trigger")&&("wheel"===this.get("scaleRBy")?s.on("mousewheel",function(g){o.scaleRByWheel(g)}):"drag"===this.get("scaleRBy")&&(s.on("dragstart",function(g){o.set("dragging",!0),o.set("cacheCenter",{x:g.x,y:g.y}),o.set("dragPrePos",{x:g.x,y:g.y})}),s.on("drag",function(g){o.scaleRByDrag(g)}),s.on("dragend",function(g){o.set("dragging",!1)})),"wheel"===this.get("scaleDBy")?s.on("mousewheel",function(g){i.scaleDByWheel(g)}):"drag"===this.get("scaleDBy")&&(s.on("dragstart",function(g){o.set("dragging",!0),o.set("cacheCenter",{x:g.x,y:g.y}),o.set("dragPrePos",{x:g.x,y:g.y})}),s.on("drag",function(g){i.scaleDByDrag(g)}),s.on("dragend",function(g){o.set("dragging",!1)})))}else s.attr({x:t.x,y:t.y,r:n/1.5});if(o.get("showDPercent")){var c=Math.round((o.get("d")-o.get("minD"))/(o.get("maxD")-o.get("minD"))*100),f=o.get("dPercentText"),h=t.y+n/1.5+16;!f||f.destroyed?(f=a.get("group").addShape("text",{attrs:{text:"".concat(c,"%"),x:t.x,y:h,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),o.set("dPercentText",f)):f.attr({text:"".concat(c,"%"),x:t.x,y:h})}o.set("delegate",s)},e.prototype.clear=function(){var t=this.get("graph");this.restoreCache(),t.refreshPositions();var n=this.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy());var i=this.get("dPercentText");i&&!i.destroyed&&(i.remove(),i.destroy())},e.prototype.destroy=function(){this.clear()},e}(Uu);const Cre=Mre;var Are=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(i[a]=o[a])},r(t,n)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();typeof document<"u"&&Vw()("\n  .g6-component-toolbar {\n    position: absolute;\n    list-style-type: none;\n    padding: 6px;\n    left: 0px;\n    top: 0px;\n    background-color: rgba(255, 255, 255, 0.9);\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    margin: 0;\n  }\n  .g6-component-toolbar li {\n    float: left;\n    text-align: center;\n    width: 35px;\n    height: 24px;\n    cursor: pointer;\n\t\tlist-style-type:none;\n    list-style: none;\n    margin-left: 0px;\n  }\n  .g6-component-toolbar li .icon {\n    opacity: 0.7;\n  }\n  .g6-component-toolbar li .icon:hover {\n    opacity: 1;\n  }\n");var Tre=function(r){function e(t){return r.call(this,t)||this}return Are(e,r),e.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(n){return'\n          <ul class=\'g6-component-toolbar\'>\n            <li code=\'redo\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>\n              </svg>\n            </li>\n            <li code=\'undo\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>\n              </svg>\n            </li>\n            <li  code=\'zoomOut\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>\n              </svg>\n            </li>\n            <li code=\'zoomIn\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>\n              </svg>\n            </li>\n            <li code=\'realZoom\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">\n                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>\n              </svg>\n            </li>\n            <li code=\'autoZoom\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">\n                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>\n              </svg>\n            </li>\n          </ul>\n        '},zoomSensitivity:2}},e.prototype.init=function(){var t=this,n=this.get("graph"),o=this.get("getContent")(n),a=o;(0,ue.isString)(o)&&(a=ra(o));var s=this.get("className");a.setAttribute("class",s||"g6-component-toolbar");var u=this.get("container");u||(u=this.get("graph").get("container")),(0,ue.isString)(u)&&(u=document.getElementById(u)),u.appendChild(a),this.set("toolBar",a);var l=this.get("handleClick");a.addEventListener("click",function(f){var h=function(e){if(!e)return[];if(e.composedPath)return e.composedPath();for(var t=[],n=e.target;n;){if(t.push(n),"HTML"===n.tagName)return t.push(document,window),t;n=n.parentElement}return t}(f).filter(function(g){return"LI"===g.nodeName});if(0!==h.length){var d=h[0].getAttribute("code");!d||(l?l(d,n):t.handleDefaultOperator(d))}});var c=this.get("position");c&&Fi(a,{top:"".concat(c.y,"px"),left:"".concat(c.x,"px")}),this.bindUndoRedo()},e.prototype.bindUndoRedo=function(){var t=this.get("graph"),n=document.querySelector('.g6-component-toolbar li[code="undo"]'),i=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),o=document.querySelector('.g6-component-toolbar li[code="redo"]'),a=document.querySelector('.g6-component-toolbar li[code="redo"] svg');!n||!i||!o||!a||(n.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4"),o.setAttribute("style","cursor: not-allowed"),a.setAttribute("style","opacity: 0.4"),t.on("stackchange",function(s){var f=s.redoStack.length;0===s.undoStack.length?(n.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4")):(n.removeAttribute("style"),i.removeAttribute("style")),0===f?(o.setAttribute("style","cursor: not-allowed"),a.setAttribute("style","opacity: 0.4")):(o.removeAttribute("style"),a.removeAttribute("style"))}))},e.prototype.undo=function(){var t=this.get("graph"),n=t.getUndoStack();if(n&&0!==n.length){var i=n.pop();if(i){var o=i.action;t.pushStack(o,(0,ue.clone)(i.data),"redo");var a=i.data.before;if("add"===o&&(a=i.data.after),!a)return;switch(o){case"visible":Object.keys(a).forEach(function(f){var h=a[f];!h||h.forEach(function(d){var g=t.findById(d.id);d.visible?t.showItem(g,!1):t.hideItem(g,!1)})});break;case"render":case"update":Object.keys(a).forEach(function(f){var h=a[f];!h||h.forEach(function(d){var g=t.findById(d.id);delete d.id,t.updateItem(g,d,!1),"combo"===g.getType()&&t.updateCombo(g)})});break;case"changedata":t.changeData(a,!1);break;case"delete":Object.keys(a).forEach(function(f){var h=a[f];!h||h.forEach(function(d){var g=d.itemType;delete d.itemType,t.addItem(g,d,!1)})});break;case"add":Object.keys(a).forEach(function(f){var h=a[f];!h||h.forEach(function(d){t.removeItem(d.id,!1)})});break;case"updateComboTree":Object.keys(a).forEach(function(f){var h=a[f];!h||h.forEach(function(d){t.updateComboTree(d.id,d.parentId,!1)})});break;case"createCombo":var s=i.data.after.combos,u=s[s.length-1];Object.keys(a).forEach(function(f){var h=a[f];!h||h.forEach(function(d){t.updateComboTree(d.id,d.parentId,!1)})}),t.removeItem(u.id,!1);break;case"uncombo":var l=a.combos[a.combos.length-1],c=a.nodes.concat(a.combos).map(function(f){return f.id}).filter(function(f){return f!==l.id});t.createCombo(l,c,!1);break;case"layout":t.updateLayout(a,void 0,void 0,!1)}}}},e.prototype.redo=function(){var t=this.get("graph"),n=t.getRedoStack();if(n&&0!==n.length){var i=n.pop();if(i){var o=i.action,a=i.data.after;if(t.pushStack(o,(0,ue.clone)(i.data)),"delete"===o&&(a=i.data.before),!a)return;switch(o){case"visible":Object.keys(a).forEach(function(c){var f=a[c];!f||f.forEach(function(h){var d=t.findById(h.id);h.visible?t.showItem(d,!1):t.hideItem(d,!1)})});break;case"render":case"update":Object.keys(a).forEach(function(c){var f=a[c];!f||f.forEach(function(h){var d=t.findById(h.id);delete h.id,t.updateItem(d,h,!1),"combo"===d.getType()&&t.updateCombo(d)})});break;case"changedata":t.changeData(a,!1);break;case"delete":a.edges&&a.edges.forEach(function(c){t.removeItem(c.id,!1)}),a.nodes&&a.nodes.forEach(function(c){t.removeItem(c.id,!1)}),a.combos&&a.combos.forEach(function(c){t.removeItem(c.id,!1)});break;case"add":Object.keys(a).forEach(function(c){var f=a[c];!f||f.forEach(function(h){var d=h.itemType;delete h.itemType,t.addItem(d,h,!1)})});break;case"updateComboTree":Object.keys(a).forEach(function(c){var f=a[c];!f||f.forEach(function(h){t.updateComboTree(h.id,h.parentId,!1)})});break;case"createCombo":var s=a.combos[a.combos.length-1];t.createCombo(s,s.children.map(function(c){return c.id}),!1);break;case"uncombo":var u=i.data.before.combos;t.uncombo(u[u.length-1].id,!1);break;case"layout":t.updateLayout(a,void 0,void 0,!1)}}}},e.prototype.zoomOut=function(){var t=this.get("graph"),n=t.getZoom(),i=1/(1-.05*this.get("zoomSensitivity"));i*n>(this.get("maxZoom")||t.get("maxZoom"))||t.zoomTo(n*i)},e.prototype.zoomIn=function(){var t=this.get("graph"),n=t.getZoom(),i=1-.05*this.get("zoomSensitivity");i*n<(this.get("minZoom")||t.get("minZoom"))||t.zoomTo(n*i)},e.prototype.realZoom=function(){this.get("graph").zoomTo(1)},e.prototype.autoZoom=function(){this.get("graph").fitView([20,20])},e.prototype.handleDefaultOperator=function(t){switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom()}},e.prototype.destroy=function(){var t=this.get("toolBar");if(t){var n=this.get("container");n||(n=this.get("graph").get("container")),(0,ue.isString)(n)&&(n=document.getElementById(n)),n.removeChild(t)}var i=this.get("handleClick");i&&t.removeEventListener("click",i)},e}(Uu);const Ire=Tre;var Ore=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(i[a]=o[a])},r(t,n)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();typeof document<"u"&&Vw()("\n  .g6-component-tooltip {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n  .tooltip-type {\n    padding: 0;\n    margin: 0;\n  }\n  .tooltip-id {\n    color: #531dab;\n  }\n");var Pre=function(r){function e(t){return r.call(this,t)||this}return Ore(e,r),e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(n){return"\n          <h4 class='tooltip-type'>\u7c7b\u578b\uff1a".concat(n.item.getType(),"</h4>\n          <span class='tooltip-id'>ID\uff1a").concat(n.item.getID(),"</span>\n        ")},shouldBegin:function(n){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},e.prototype.getEvents=function(){return"click"===this.get("trigger")?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},e.prototype.init=function(){var t=this,n=t.get("className")||"g6-component-tooltip",i=ra("<div class='".concat(n,"'></div>")),o=t.get("container");o||(o=t.get("graph").get("container")),(0,ue.isString)(o)&&(o=document.getElementById(o)),Fi(i,{position:"absolute",visibility:"hidden",display:"none"}),o.appendChild(i),"click"!==t.get("trigger")&&(i.addEventListener("mouseenter",function(a){Fi(i,{visibility:"visible",display:"unset"})}),i.addEventListener("mouseleave",function(a){t.hideTooltip()})),t.set("tooltip",i)},e.prototype.onClick=function(t){var n=this.get("itemTypes");if(!t.item||!t.item.getType||-1!==n.indexOf(t.item.getType())){var i=t.item,o=this.get("graph");this.currentTarget===i?(this.currentTarget=null,this.hideTooltip(),o.emit("tooltipchange",{item:t.item,action:"hide"})):(this.currentTarget=i,this.showTooltip(t),o.emit("tooltipchange",{item:t.item,action:"show"}))}},e.prototype.onMouseEnter=function(t){var n=this.get("itemTypes");if(!t.item||!t.item.getType||-1!==n.indexOf(t.item.getType())){var i=t.item,o=this.get("graph");this.currentTarget=i,this.showTooltip(t),o.emit("tooltipchange",{item:t.item,action:"show"})}},e.prototype.onMouseMove=function(t){var n=this.get("itemTypes");t.item&&t.item.getType&&-1===n.indexOf(t.item.getType())||!this.currentTarget||t.item!==this.currentTarget||this.showTooltip(t)},e.prototype.onMouseLeave=function(){this.hideTooltip(),this.get("graph").emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},e.prototype.clearContainer=function(){var t=this.get("tooltip");t&&(t.innerHTML="")},e.prototype.showTooltip=function(t){if(t.item){var n=this.get("itemTypes");if(!t.item.getType||-1!==n.indexOf(t.item.getType())){var i=this.get("tooltip"),a=this.get("getContent")(t);(0,ue.isString)(a)?i.innerHTML=a:(this.clearContainer(),i.appendChild(a)),this.updatePosition(t)}}},e.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&Fi(t,{visibility:"hidden",display:"none"})},e.prototype.updatePosition=function(t){var n=this.get("shouldBegin"),i=this.get("tooltip");if(n(t)){var o=this.get("graph"),a=o.get("width"),s=o.get("height"),u=this.get("offsetX")||0,l=this.get("offsetY")||0,c=o.getPointByClient(t.clientX,t.clientY),f=this.get("fixToNode"),h=t.item;if(h.getType&&"node"===h.getType()&&f&&(0,ue.isArray)(f)&&f.length>=2){var d=h.getBBox();c={x:d.minX+d.width*f[0],y:d.minY+d.height*f[1]}}var g=o.getCanvasByPoint(c.x,c.y),m=g.x,_=g.y,D=o.getContainer(),L={x:m+D.offsetLeft+u,y:_+D.offsetTop+l};Fi(i,{visibility:"visible",display:"unset"});var O=i.getBoundingClientRect();m+O.width+u>a&&(L.x-=O.width+u),_+O.height+l>s&&(L.y-=O.height+l),Fi(i,{left:"".concat(L.x,"px"),top:"".concat(L.y,"px")})}else Fi(i,{visibility:"hidden",display:"none"})},e.prototype.hide=function(){this.onMouseLeave()},e.prototype.destroy=function(){var t=this.get("tooltip");if(t){var n=this.get("container");n||(n=this.get("graph").get("container")),(0,ue.isString)(n)&&(n=document.getElementById(n)),n.removeChild(t)}},e}(Uu);const Nre=Pre;var jB={};function Bf(r,e){jB[r]=e}var kre=function(){function r(e){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}return r.prototype.translate=function(e){return e},r.prototype.change=function(e){(0,ue.assign)(this.__cfg__,e),this.init()},r.prototype.clone=function(){return this.constructor(this.__cfg__)},r.prototype.getTicks=function(){var e=this;return(0,ue.map)(this.ticks,function(t,n){return(0,ue.isObject)(t)?t:{text:e.getText(t,n),tickValue:t,value:e.scale(t)}})},r.prototype.getText=function(e,t){var n=this.formatter,i=n?n(e,t):e;return(0,ue.isNil)(i)||!(0,ue.isFunction)(i.toString)?"":i.toString()},r.prototype.getConfig=function(e){return this.__cfg__[e]},r.prototype.init=function(){(0,ue.assign)(this,this.__cfg__),this.setDomain(),(0,ue.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},r.prototype.initCfg=function(){},r.prototype.setDomain=function(){},r.prototype.calculateTicks=function(){var e=this.tickMethod,t=[];if((0,ue.isString)(e)){var n=function Lre(r){return jB[r]}(e);if(!n)throw new Error("There is no method to to calculate ticks!");t=n(this)}else(0,ue.isFunction)(e)&&(t=e(this));return t},r.prototype.rangeMin=function(){return this.range[0]},r.prototype.rangeMax=function(){return this.range[1]},r.prototype.calcPercent=function(e,t,n){return(0,ue.isNumber)(e)?(e-t)/(n-t):NaN},r.prototype.calcValue=function(e,t,n){return t+e*(n-t)},r}();const DC=kre;var Rre=function(r){function e(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return(0,De.__extends)(e,r),e.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},e.prototype.translate=function(t){this.buildIndexMap();var n=this.translateIndexMap.get(t);return void 0===n&&(n=(0,ue.isNumber)(t)?t:NaN),n},e.prototype.scale=function(t){var n=this.translate(t),i=this.calcPercent(n,this.min,this.max);return this.calcValue(i,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(t){var n=this.max-this.min,i=this.calcPercent(t,this.rangeMin(),this.rangeMax()),o=Math.round(n*i)+this.min;return o<this.min||o>this.max?NaN:this.values[o]},e.prototype.getText=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=t;return(0,ue.isNumber)(t)&&!this.values.includes(t)&&(o=this.values[o]),r.prototype.getText.apply(this,(0,De.__spreadArrays)([o],n))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if((0,ue.isNil)(this.getConfig("min"))&&(this.min=0),(0,ue.isNil)(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},e}(DC);const wy=Rre;var zB=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,kd="\\d\\d?",Rd="\\d\\d",xy="[^\\s]+",GB=/\[([^]*?)\]/gm;function UB(r,e){for(var t=[],n=0,i=r.length;n<i;n++)t.push(r[n].substr(0,e));return t}var VB=function(r){return function(e,t){var i=t[r].map(function(o){return o.toLowerCase()}).indexOf(e.toLowerCase());return i>-1?i:null}};function Fd(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var n=0,i=e;n<i.length;n++){var o=i[n];for(var a in o)r[a]=o[a]}return r}var HB=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],WB=["January","February","March","April","May","June","July","August","September","October","November","December"],jre=UB(WB,3),TC={dayNamesShort:UB(HB,3),dayNames:HB,monthNamesShort:jre,monthNames:WB,amPm:["am","pm"],DoFn:function(r){return r+["th","st","nd","rd"][r%10>3?0:(r-r%10!=10?1:0)*r%10]}},Ww=Fd({},TC),$B=function(r){return Ww=Fd(Ww,r)},YB=function(r){return r.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Vu=function(r,e){for(void 0===e&&(e=2),r=String(r);r.length<e;)r="0"+r;return r},Gre={D:function(r){return String(r.getDate())},DD:function(r){return Vu(r.getDate())},Do:function(r,e){return e.DoFn(r.getDate())},d:function(r){return String(r.getDay())},dd:function(r){return Vu(r.getDay())},ddd:function(r,e){return e.dayNamesShort[r.getDay()]},dddd:function(r,e){return e.dayNames[r.getDay()]},M:function(r){return String(r.getMonth()+1)},MM:function(r){return Vu(r.getMonth()+1)},MMM:function(r,e){return e.monthNamesShort[r.getMonth()]},MMMM:function(r,e){return e.monthNames[r.getMonth()]},YY:function(r){return Vu(String(r.getFullYear()),4).substr(2)},YYYY:function(r){return Vu(r.getFullYear(),4)},h:function(r){return String(r.getHours()%12||12)},hh:function(r){return Vu(r.getHours()%12||12)},H:function(r){return String(r.getHours())},HH:function(r){return Vu(r.getHours())},m:function(r){return String(r.getMinutes())},mm:function(r){return Vu(r.getMinutes())},s:function(r){return String(r.getSeconds())},ss:function(r){return Vu(r.getSeconds())},S:function(r){return String(Math.round(r.getMilliseconds()/100))},SS:function(r){return Vu(Math.round(r.getMilliseconds()/10),2)},SSS:function(r){return Vu(r.getMilliseconds(),3)},a:function(r,e){return r.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(r,e){return r.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(r){var e=r.getTimezoneOffset();return(e>0?"-":"+")+Vu(100*Math.floor(Math.abs(e)/60)+Math.abs(e)%60,4)},Z:function(r){var e=r.getTimezoneOffset();return(e>0?"-":"+")+Vu(Math.floor(Math.abs(e)/60),2)+":"+Vu(Math.abs(e)%60,2)}},XB=function(r){return+r-1},qB=[null,kd],KB=[null,xy],ZB=["isPm",xy,function(r,e){var t=r.toLowerCase();return t===e.amPm[0]?0:t===e.amPm[1]?1:null}],QB=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(r){var e=(r+"").match(/([+-]|\d\d)/gi);if(e){var t=60*+e[1]+parseInt(e[2],10);return"+"===e[0]?t:-t}return 0}],Ure={D:["day",kd],DD:["day",Rd],Do:["day",kd+xy,function(r){return parseInt(r,10)}],M:["month",kd,XB],MM:["month",Rd,XB],YY:["year",Rd,function(r){var t=+(""+(new Date).getFullYear()).substr(0,2);return+(""+(+r>68?t-1:t)+r)}],h:["hour",kd,void 0,"isPm"],hh:["hour",Rd,void 0,"isPm"],H:["hour",kd],HH:["hour",Rd],m:["minute",kd],mm:["minute",Rd],s:["second",kd],ss:["second",Rd],YYYY:["year","\\d{4}"],S:["millisecond","\\d",function(r){return 100*+r}],SS:["millisecond",Rd,function(r){return 10*+r}],SSS:["millisecond","\\d{3}"],d:qB,dd:qB,ddd:KB,dddd:KB,MMM:["month",xy,VB("monthNamesShort")],MMMM:["month",xy,VB("monthNames")],a:ZB,A:ZB,ZZ:QB,Z:QB},$w={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},JB=function(r){return Fd($w,r)},e3=function(r,e,t){if(void 0===e&&(e=$w.default),void 0===t&&(t={}),"number"==typeof r&&(r=new Date(r)),"[object Date]"!==Object.prototype.toString.call(r)||isNaN(r.getTime()))throw new Error("Invalid Date pass to format");var n=[];e=(e=$w[e]||e).replace(GB,function(o,a){return n.push(a),"@@@"});var i=Fd(Fd({},Ww),t);return(e=e.replace(zB,function(o){return Gre[o](r,i)})).replace(/@@@/g,function(){return n.shift()})};function t3(r,e,t){if(void 0===t&&(t={}),"string"!=typeof e)throw new Error("Invalid format in fecha parse");if(e=$w[e]||e,r.length>1e3)return null;var i={year:(new Date).getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},o=[],a=[],s=e.replace(GB,function(Z,le){return a.push(YB(le)),"@@@"}),u={},l={};s=YB(s).replace(zB,function(Z){var le=Ure[Z],pe=le[0],Ee=le[1],Re=le[3];if(u[pe])throw new Error("Invalid format. "+pe+" specified twice in format");return u[pe]=!0,Re&&(l[Re]=!0),o.push(le),"("+Ee+")"}),Object.keys(l).forEach(function(Z){if(!u[Z])throw new Error("Invalid format. "+Z+" is required in specified format")}),s=s.replace(/@@@/g,function(){return a.shift()});var D,c=r.match(new RegExp(s,"i"));if(!c)return null;for(var f=Fd(Fd({},Ww),t),h=1;h<c.length;h++){var d=o[h-1],g=d[0],m=d[2],_=m?m(c[h],f):+c[h];if(null==_)return null;i[g]=_}if(1===i.isPm&&null!=i.hour&&12!=+i.hour?i.hour=+i.hour+12:0===i.isPm&&12==+i.hour&&(i.hour=0),null==i.timezoneOffset){D=new Date(i.year,i.month,i.day,i.hour,i.minute,i.second,i.millisecond);for(var L=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],O=(h=0,L.length);h<O;h++)if(u[L[h][0]]&&i[L[h][0]]!==D[L[h][1]]())return null}else if(D=new Date(Date.UTC(i.year,i.month,i.day,i.hour,i.minute-i.timezoneOffset,i.second,i.millisecond)),i.month>11||i.month<0||i.day>31||i.day<1||i.hour>23||i.hour<0||i.minute>59||i.minute<0||i.second>59||i.second<0)return null;return D}const n3={format:e3,parse:t3,defaultI18n:TC,setGlobalDateI18n:$B,setGlobalDateMasks:JB};function i3(r,e){return(P.format||n3.format)(r,e)}function Yw(r){return(0,ue.isString)(r)&&(r=r.indexOf("T")>0?new Date(r).getTime():new Date(r.replace(/-/gi,"/")).getTime()),(0,ue.isDate)(r)&&(r=r.getTime()),r}var Rc=1e3,np=6e4,rp=60*np,Rh=24*rp,Ey=31*Rh,o3=365*Rh,_y=[["HH:mm:ss",Rc],["HH:mm:ss",1e4],["HH:mm:ss",3e4],["HH:mm",np],["HH:mm",10*np],["HH:mm",30*np],["HH",rp],["HH",6*rp],["HH",12*rp],["YYYY-MM-DD",Rh],["YYYY-MM-DD",4*Rh],["YYYY-WW",7*Rh],["YYYY-MM",Ey],["YYYY-MM",4*Ey],["YYYY-MM",6*Ey],["YYYY",380*Rh]];var $re=function(r){function e(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="timeCat",t}return(0,De.__extends)(e,r),e.prototype.translate=function(t){t=Yw(t);var n=this.values.indexOf(t);return-1===n&&(n=(0,ue.isNumber)(t)&&t<this.values.length?t:NaN),n},e.prototype.getText=function(t,n){var i=this.translate(t);if(i>-1){var o=this.values[i],a=this.formatter;return a?a(o,n):i3(o,this.mask)}return t},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var t=this.values;(0,ue.each)(t,function(n,i){t[i]=Yw(n)}),t.sort(function(n,i){return n-i}),r.prototype.setDomain.call(this)},e}(wy);const Yre=$re;var Xre=function(r){function e(){var t=null!==r&&r.apply(this,arguments)||this;return t.isContinuous=!0,t}return(0,De.__extends)(e,r),e.prototype.scale=function(t){if((0,ue.isNil)(t))return NaN;var n=this.rangeMin(),i=this.rangeMax();return this.max===this.min?n:n+this.getScalePercent(t)*(i-n)},e.prototype.init=function(){r.prototype.init.call(this);var t=this.ticks,n=(0,ue.head)(t),i=(0,ue.last)(t);n<this.min&&(this.min=n),i>this.max&&(this.max=i),(0,ue.isNil)(this.minLimit)||(this.min=n),(0,ue.isNil)(this.maxLimit)||(this.max=i)},e.prototype.setDomain=function(){var t=(0,ue.getRange)(this.values),n=t.min,i=t.max;(0,ue.isNil)(this.min)&&(this.min=n),(0,ue.isNil)(this.max)&&(this.max=i),this.min>this.max&&(this.min=n,this.max=i)},e.prototype.calculateTicks=function(){var t=this,n=r.prototype.calculateTicks.call(this);return this.nice||(n=(0,ue.filter)(n,function(i){return i>=t.min&&i<=t.max})),n},e.prototype.getScalePercent=function(t){var i=this.min;return(t-i)/(this.max-i)},e.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(DC);const Xw=Xre;var qre=function(r){function e(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return(0,De.__extends)(e,r),e.prototype.invert=function(t){var n=this.getInvertPercent(t);return this.min+n*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}(Xw);const Sy=qre;function Bd(r,e){var t=Math.E;return e>=0?Math.pow(t,Math.log(e)/r):-1*Math.pow(t,Math.log(-e)/r)}function Bl(r,e){return 1===r?1:Math.log(e)/Math.log(r)}function a3(r,e,t){(0,ue.isNil)(t)&&(t=Math.max.apply(null,r));var n=t;return(0,ue.each)(r,function(i){i>0&&i<n&&(n=i)}),n===t&&(n=t/e),n>1&&(n=1),n}var Kre=function(r){function e(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="log",t}return(0,De.__extends)(e,r),e.prototype.invert=function(t){var s,n=this.base,i=Bl(n,this.max),o=this.rangeMin(),a=this.rangeMax()-o,u=this.positiveMin;if(u){if(0===t)return 0;var l=1/(i-(s=Bl(n,u/n)))*a;if(t<l)return t/l*u}else s=Bl(n,this.min);return Math.pow(n,(t-o)/a*(i-s)+s)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){r.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");0===t&&(this.positiveMin=a3(this.values,this.base,this.max))},e.prototype.getScalePercent=function(t){var n=this.max,i=this.min;if(n===i||t<=0)return 0;var o=this.base,a=this.positiveMin;return a&&(i=1*a/o),t<a?t/a/(Bl(o,n)-Bl(o,i)):(Bl(o,t)-Bl(o,i))/(Bl(o,n)-Bl(o,i))},e}(Xw);const Zre=Kre;var Qre=function(r){function e(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="pow",t}return(0,De.__extends)(e,r),e.prototype.invert=function(t){var n=this.getInvertPercent(t),i=this.exponent,o=Bd(i,this.max),a=Bd(i,this.min),s=n*(o-a)+a,u=s>=0?1:-1;return Math.pow(s,i)*u},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(t){var n=this.max,i=this.min;if(n===i)return 0;var o=this.exponent;return(Bd(o,t)-Bd(o,i))/(Bd(o,n)-Bd(o,i))},e}(Xw);const Jre=Qre;var eie=function(r){function e(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="time",t}return(0,De.__extends)(e,r),e.prototype.getText=function(t,n){var i=this.translate(t),o=this.formatter;return o?o(i,n):i3(i,this.mask)},e.prototype.scale=function(t){var n=t;return((0,ue.isString)(n)||(0,ue.isDate)(n))&&(n=this.translate(n)),r.prototype.scale.call(this,n)},e.prototype.translate=function(t){return Yw(t)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var t=this.values,n=this.getConfig("min"),i=this.getConfig("max");if((!(0,ue.isNil)(n)||!(0,ue.isNumber)(n))&&(this.min=this.translate(this.min)),(!(0,ue.isNil)(i)||!(0,ue.isNumber)(i))&&(this.max=this.translate(this.max)),t&&t.length){var o=[],a=1/0,s=a,u=0;(0,ue.each)(t,function(l){var c=Yw(l);if(isNaN(c))throw new TypeError("Invalid Time: "+l+" in time scale!");a>c?(s=a,a=c):s>c&&(s=c),u<c&&(u=c),o.push(c)}),t.length>1&&(this.minTickInterval=s-a),(0,ue.isNil)(n)&&(this.min=a),(0,ue.isNil)(i)&&(this.max=u)}},e}(Sy);const tie=eie;var nie=function(r){function e(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="quantize",t}return(0,De.__extends)(e,r),e.prototype.invert=function(t){var n=this.ticks,i=n.length,o=this.getInvertPercent(t),a=Math.floor(o*(i-1));if(a>=i-1)return(0,ue.last)(n);if(a<0)return(0,ue.head)(n);var s=n[a],l=a/(i-1);return s+(o-l)/((a+1)/(i-1)-l)*(n[a+1]-s)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var t=r.prototype.calculateTicks.call(this);return this.nice||((0,ue.last)(t)!==this.max&&t.push(this.max),(0,ue.head)(t)!==this.min&&t.unshift(this.min)),t},e.prototype.getScalePercent=function(t){var n=this.ticks;if(t<(0,ue.head)(n))return 0;if(t>(0,ue.last)(n))return 1;var i=0;return(0,ue.each)(n,function(o,a){if(!(t>=o))return!1;i=a}),i/(n.length-1)},e}(Xw);const u3=nie;var rie=function(r){function e(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="quantile",t}return(0,De.__extends)(e,r),e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}(u3);const iie=rie;var l3={};function jf(r,e){if(function oie(r){return l3[r]}(r))throw new Error("type '"+r+"' existed.");l3[r]=e}var aie=function(r){function e(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return(0,De.__extends)(e,r),e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(t){return this.values[0]!==t&&(0,ue.isNumber)(t)?t:this.range[0]},e.prototype.invert=function(t){var n=this.range;return t<n[0]||t>n[1]?NaN:this.values[0]},e}(DC);const sie=aie;function c3(r){var e=r.values,t=r.tickInterval,n=r.tickCount,i=r.showLast;if((0,ue.isNumber)(t)){var o=(0,ue.filter)(e,function(g,m){return m%t==0}),a=(0,ue.last)(e);return i&&(0,ue.last)(o)!==a&&o.push(a),o}var s=e.length,u=r.min,l=r.max;if((0,ue.isNil)(u)&&(u=0),(0,ue.isNil)(l)&&(l=e.length-1),!(0,ue.isNumber)(n)||n>=s)return e.slice(u,l+1);if(n<=0||l<=0)return[];for(var c=1===n?s:Math.floor(s/(n-1)),f=[],h=u,d=0;d<n&&!(h>=l);d++)h=Math.min(u+d*c,l),f.push(d===n-1&&i?e[l]:e[h]);return f}var f3=Math.sqrt(50),h3=Math.sqrt(10),d3=Math.sqrt(2),lie=function(){function r(){this._domain=[0,1]}return r.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},r.prototype.nice=function(e){var t,n;void 0===e&&(e=5);var l,i=this._domain.slice(),o=0,a=this._domain.length-1,s=this._domain[o],u=this._domain[a];return u<s&&(s=(t=[u,s])[0],u=t[1],o=(n=[a,o])[0],a=n[1]),(l=qw(s,u,e))>0?l=qw(s=Math.floor(s/l)*l,u=Math.ceil(u/l)*l,e):l<0&&(l=qw(s=Math.ceil(s*l)/l,u=Math.floor(u*l)/l,e)),l>0?(i[o]=Math.floor(s/l)*l,i[a]=Math.ceil(u/l)*l,this.domain(i)):l<0&&(i[o]=Math.ceil(s*l)/l,i[a]=Math.floor(u*l)/l,this.domain(i)),this},r.prototype.ticks=function(e){return void 0===e&&(e=5),function cie(r,e,t){var n,o,a,s,i=-1;if(t=+t,(r=+r)==(e=+e)&&t>0)return[r];if((n=e<r)&&(o=r,r=e,e=o),0===(s=qw(r,e,t))||!isFinite(s))return[];if(s>0)for(r=Math.ceil(r/s),e=Math.floor(e/s),a=new Array(o=Math.ceil(e-r+1));++i<o;)a[i]=(r+i)*s;else for(r=Math.floor(r*s),e=Math.ceil(e*s),a=new Array(o=Math.ceil(r-e+1));++i<o;)a[i]=(r-i)/s;return n&&a.reverse(),a}(this._domain[0],this._domain[this._domain.length-1],e||5)},r}();function qw(r,e,t){var n=(e-r)/Math.max(0,t),i=Math.floor(Math.log(n)/Math.LN10),o=n/Math.pow(10,i);return i>=0?(o>=f3?10:o>=h3?5:o>=d3?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=f3?10:o>=h3?5:o>=d3?2:1)}function g3(r,e,t){return("ceil"===t?Math.ceil(r/e):"floor"===t?Math.floor(r/e):Math.round(r/e))*e}function OC(r,e,t){var n=g3(r,t,"floor"),i=g3(e,t,"ceil");n=(0,ue.fixedBase)(n,t),i=(0,ue.fixedBase)(i,t);for(var o=[],a=Math.max((i-n)/(Math.pow(2,12)-1),t),s=n;s<=i;s+=a){var u=(0,ue.fixedBase)(s,a);o.push(u)}return{min:n,max:i,ticks:o}}function PC(r,e,t){var n,i=r.minLimit,o=r.maxLimit,a=r.min,s=r.max,u=r.tickCount,l=void 0===u?5:u,c=(0,ue.isNil)(i)?(0,ue.isNil)(e)?a:e:i,f=(0,ue.isNil)(o)?(0,ue.isNil)(t)?s:t:o;if(c>f&&(f=(n=[c,f])[0],c=n[1]),l<=2)return[c,f];for(var h=(f-c)/(l-1),d=[],g=0;g<l;g++)d.push(c+h*g);return d}function ip(r){return Math.abs(r)<1e-15?r:parseFloat(r.toFixed(15))}var hie=[1,5,2,2.5,4,3],p3=100*Number.EPSILON;function pie(r,e,t,n,i,o){var a=(0,ue.size)(e),s=(0,ue.indexOf)(e,r),u=0,l=function die(r,e){return(r%e+e)%e}(n,o);return(l<p3||o-l<p3)&&n<=0&&i>=0&&(u=1),1-s/(a-1)-t+u}function vie(r,e,t){var n=(0,ue.size)(e);return 1-(0,ue.indexOf)(e,r)/(n-1)-t+1}function mie(r,e,t,n,i,o){var a=(r-1)/(o-i),s=(e-1)/(Math.max(o,n)-Math.min(t,i));return 2-Math.max(a/s,s/a)}function yie(r,e){return r>=e?2-(r-1)/(e-1):1}function bie(r,e,t,n){var i=e-r;return 1-.5*(Math.pow(e-n,2)+Math.pow(r-t,2))/Math.pow(.1*i,2)}function wie(r,e,t){var n=e-r;return t>n?1-Math.pow((t-n)/2,2)/Math.pow(.1*n,2):1}function v3(r,e,t){if(void 0===t&&(t=5),r===e)return{max:e,min:r,ticks:[r]};var n=t<0?0:Math.round(t);if(0===n)return{max:e,min:r,ticks:[]};var s=(e-r)/n,u=Math.pow(10,Math.floor(Math.log10(s))),l=u;2*u-s<1.5*(s-l)&&5*u-s<2.75*(s-(l=2*u))&&10*u-s<1.5*(s-(l=5*u))&&(l=10*u);for(var c=Math.ceil(e/l),f=Math.floor(r/l),h=Math.max(c*l,e),d=Math.min(f*l,r),g=Math.floor((h-d)/l)+1,m=new Array(g),_=0;_<g;_++)m[_]=ip(d+_*l);return{min:d,max:h,ticks:m}}function Cie(r,e){var t=r.length*e;return 1===e?r[r.length-1]:0===e?r[0]:t%1!=0?r[Math.ceil(t)-1]:r.length%2==0?(r[t-1]+r[t])/2:r[t]}function Kw(r){return new Date(r).getFullYear()}function Oie(r){return new Date(r,0,1).getTime()}function NC(r){return new Date(r).getMonth()}function Nie(r,e){return new Date(r,e,1).getTime()}function m3(r){return function jie(r){return(0,ue.map)(r,function(e,t){return[0===t?"M":"L",e[0],e[1]]})}(r)}function Uie(r,e,t,n){void 0===n&&(n=5);for(var i=new Sy({values:r}),o=new wy({values:(0,ue.map)(r,function(h,d){return d})}),a=(0,ue.map)(r,function(h,d){return[o.scale(d)*e,t-i.scale(h)*t]}),s=[],u=0;u<a.length;u++){var l=a[u],f=Wie({x:l[0],y:l[1],y0:t,size:n});s.push.apply(s,f)}return function $ie(r,e){void 0===e&&(e=!0);var t=[],n=r[0];t.push(["M",n.x,n.y]);for(var i=1,o=r.length;i<o;i++)t.push(["L",r[i].x,r[i].y]);return e&&(t.push(["L",n.x,n.y]),t.push(["z"])),t}(s)}function Wie(r){var o,a,s,u,e=r.x,t=r.y,n=r.y0,i=r.size;(0,ue.isArray)(t)?(o=t[0],a=t[1]):(o=n,a=t),(0,ue.isArray)(e)?(s=e[0],u=e[1]):(s=e-i/2,u=e+i/2);var l=[{x:s,y:o},{x:s,y:a}];return l.push({x:u,y:a},{x:u,y:o}),l}Bf("cat",c3),Bf("time-cat",function Iie(r){return c3((0,De.__assign)({showLast:!0},r))}),Bf("wilkinson-extended",function _ie(r){var e=r.min,t=r.max,o=r.tickInterval,a=r.minLimit,s=r.maxLimit,u=function Eie(r,e,t,n,i,o){void 0===t&&(t=5),void 0===n&&(n=!0),void 0===i&&(i=hie),void 0===o&&(o=[.25,.2,.5,.05]);var a=t<0?0:Math.round(t);if(Number.isNaN(r)||Number.isNaN(e)||"number"!=typeof r||"number"!=typeof e||!a)return{min:0,max:0,ticks:[]};if(e-r<1e-15||1===a)return{min:r,max:e,ticks:[r]};if(e-r>1e148){var u=(e-r)/(s=t||5);return{min:r,max:e,ticks:Array(s).fill(null).map(function(Vn,rr){return ip(r+u*rr)})}}for(var l={score:-2,lmin:0,lmax:0,lstep:0},c=1;c<1/0;){for(var f=0;f<i.length;f+=1){var h=i[f],d=vie(h,i,c);if(o[0]*d+o[1]+o[2]+o[3]<l.score){c=1/0;break}for(var g=2;g<1/0;){var m=yie(g,a);if(o[0]*d+o[1]+o[2]*m+o[3]<l.score)break;for(var D=Math.ceil(Math.log10((e-r)/(g+1)/c/h));D<1/0;){var L=c*h*Math.pow(10,D),O=wie(r,e,L*(g-1));if(o[0]*d+o[1]*O+o[2]*m+o[3]<l.score)break;var Z=Math.floor(e/L)*c-(g-1)*c,le=Math.ceil(r/L)*c;if(Z<=le)for(var s=le-Z,pe=0;pe<=s;pe+=1){var Re=(Z+pe)*(L/c),Ve=Re+L*(g-1),Ue=L,at=pie(h,i,c,Re,Ve,Ue),_t=bie(r,e,Re,Ve),vn=mie(g,a,r,e,Re,Ve),Tt=o[0]*at+o[1]*_t+o[2]*vn+1*o[3];Tt>l.score&&(!n||Re<=r&&Ve>=e)&&(l.lmin=Re,l.lmax=Ve,l.lstep=Ue,l.score=Tt)}D+=1}g+=1}}c+=1}var kt=ip(l.lmax),Ln=ip(l.lmin),Kn=ip(l.lstep),mn=Math.floor(function gie(r){return Math.round(1e12*r)/1e12}((kt-Ln)/Kn))+1,On=new Array(mn);for(On[0]=ip(Ln),f=1;f<mn;f++)On[f]=ip(On[f-1]+Kn);return{min:Math.min(r,(0,ue.head)(On)),max:Math.max(e,(0,ue.last)(On)),ticks:On}}(e,t,r.tickCount,r.nice).ticks;return(0,ue.isNil)(a)&&(0,ue.isNil)(s)?o?OC(e,t,o).ticks:u:PC(r,(0,ue.head)(u),(0,ue.last)(u))}),Bf("r-pretty",function Die(r){var e=r.min,t=r.max,i=r.tickInterval,o=r.minLimit,a=r.maxLimit,s=v3(e,t,r.tickCount).ticks;return(0,ue.isNil)(o)&&(0,ue.isNil)(a)?i?OC(e,t,i).ticks:s:PC(r,(0,ue.head)(s),(0,ue.last)(s))}),Bf("time",function Tie(r){var e=r.min,t=r.max,n=r.minTickInterval,i=r.tickInterval,o=r.tickCount;if(i)o=Math.ceil((t-e)/i);else{var s=(t-e)/(i=function Wre(r,e,t){var n=(e-r)/t,i=function Hre(r){return function(e,t,n,i){for(var o=(0,ue.isNil)(n)?0:n,a=(0,ue.isNil)(i)?e.length:i;o<a;){var s=o+a>>>1;r(e[s])>t?a=s:o=s+1}return o}}(function(a){return a[1]})(_y,n)-1,o=_y[i];return i<0?o=_y[0]:i>=_y.length&&(o=(0,ue.last)(_y)),o}(e,t,o)[1])/o;s>1&&(i*=Math.ceil(s)),n&&i<n&&(i=n)}i=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),i);for(var u=[],l=e;l<t+i;l+=i)u.push(l);return u}),Bf("time-pretty",function Fie(r){var e=r.min,t=r.max,n=r.minTickInterval,o=r.tickInterval,a=[];o||(o=(t-e)/r.tickCount,n&&o<n&&(o=n)),o=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),o);var s=Kw(e);if(o>o3)for(var u=Kw(t),l=Math.ceil(o/o3),c=s;c<=u+l;c+=l)a.push(Oie(c));else if(o>Ey){var f=Math.ceil(o/Ey),h=NC(e),d=function Pie(r,e){var t=Kw(r),n=Kw(e),i=NC(r);return 12*(n-t)+(NC(e)-i)%12}(e,t);for(c=0;c<=d+f;c+=f)a.push(Nie(s,c+h))}else if(o>Rh){var m=(g=new Date(e)).getFullYear(),_=g.getMonth(),D=g.getDate(),L=Math.ceil(o/Rh),O=function Lie(r,e){return Math.ceil((e-r)/Rh)}(e,t);for(c=0;c<O+L;c+=L)a.push(new Date(m,_,D+c).getTime())}else if(o>rp){m=(g=new Date(e)).getFullYear(),_=g.getMonth(),L=g.getDate();var g,Z=g.getHours(),le=Math.ceil(o/rp),pe=function kie(r,e){return Math.ceil((e-r)/rp)}(e,t);for(c=0;c<=pe+le;c+=le)a.push(new Date(m,_,L,Z+c).getTime())}else if(o>np){var Ee=function Rie(r,e){return Math.ceil((e-r)/6e4)}(e,t),Re=Math.ceil(o/np);for(c=0;c<=Ee+Re;c+=Re)a.push(e+c*np)}else{var Ve=o;Ve<Rc&&(Ve=Rc);var Ue=Math.floor(e/Rc)*Rc,at=Math.ceil((t-e)/Rc),_t=Math.ceil(Ve/Rc);for(c=0;c<at+_t;c+=_t)a.push(Ue+c*Rc)}return a.length>=512&&console.warn("Notice: current ticks length("+a.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+o+") is too small, increase the value to solve the problem!"),a}),Bf("log",function Sie(r){var a,e=r.base,t=r.tickCount,n=r.min,i=r.max,o=r.values,s=Bl(e,i);if(n>0)a=Math.floor(Bl(e,n));else{var u=a3(o,e,i);a=Math.floor(Bl(e,u))}for(var c=Math.ceil((s-a)/t),f=[],h=a;h<s+c;h+=c)f.push(Math.pow(e,h));return n<=0&&f.unshift(0),f}),Bf("pow",function Mie(r){var e=r.exponent,t=r.tickCount,n=Math.ceil(Bd(e,r.max));return v3(Math.floor(Bd(e,r.min)),n,t).ticks.map(function(a){var s=a>=0?1:-1;return Math.pow(a,e)*s})}),Bf("quantile",function Aie(r){var e=r.tickCount,t=r.values;if(!t||!t.length)return[];for(var n=t.slice().sort(function(s,u){return s-u}),i=[],o=0;o<e;o++)i.push(Cie(n,o/(e-1)));return i}),Bf("d3-linear",function fie(r){var e=r.min,t=r.max,n=r.tickInterval,i=r.minLimit,o=r.maxLimit,a=function uie(r){var e=r.min,t=r.max,n=r.nice,i=r.tickCount,o=new lie;return o.domain([e,t]),n&&o.nice(i),o.ticks(i)}(r);return(0,ue.isNil)(i)&&(0,ue.isNil)(o)?n?OC(e,t,n).ticks:a:PC(r,(0,ue.head)(a),(0,ue.last)(a))}),jf("cat",wy),jf("category",wy),jf("identity",sie),jf("linear",Sy),jf("log",Zre),jf("pow",Jre),jf("time",tie),jf("timeCat",Yre),jf("quantize",u3),jf("quantile",iie);var My=function(){return My=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},My.apply(this,arguments)},Yie={stroke:"#C5C5C5",strokeOpacity:.85},Xie={fill:"#CACED4",opacity:.85},qie=function(){function r(e){var t=e.x,n=void 0===t?0:t,i=e.y,o=void 0===i?0:i,a=e.width,s=void 0===a?200:a,u=e.height,l=void 0===u?26:u,c=e.smooth,f=void 0===c||c,h=e.isArea,d=void 0!==h&&h,g=e.data,m=void 0===g?[]:g,_=e.lineStyle,D=e.areaStyle,O=e.interval,Z=void 0===O?null:O;this.group=e.group,this.x=n,this.y=o,this.width=s,this.height=l,this.data=m,this.smooth=f,this.isArea=d,this.lineStyle=Object.assign({},Yie,_),this.areaStyle=Object.assign({},Xie,D),this.intervalConfig=Z,this.renderLine()}return r.prototype.renderLine=function(){var e=this,t=e.x,n=e.y,i=e.width,o=e.height,s=e.data,u=e.smooth,l=e.isArea,c=e.lineStyle,f=e.areaStyle,h=this.group.addGroup({name:"trend-group"});if(s){var d=function Gie(r,e,t,n){void 0===n&&(n=!0);var i=new Sy({values:r}),o=new wy({values:(0,ue.map)(r,function(s,u){return u})}),a=(0,ue.map)(r,function(s,u){return[o.scale(u)*e,t-i.scale(s)*t]});return n?function zie(r){if(r.length<=2)return m3(r);var e=[];(0,ue.each)(r,function(a){(0,ue.isEqual)(a,e.slice(e.length-2))||e.push(a[0],a[1])});var t=jR(e,!1),n=(0,ue.head)(r);return t.unshift(["M",n[0],n[1]]),t}(a):m3(a)}(s,i,o,u);if(h.addShape("path",{attrs:My({path:d},c),name:"trend-line"}),l){var g=function Hie(r,e,t,n){var i=function(r,e,t){if(t||2===arguments.length)for(var o,n=0,i=e.length;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))}([],r,!0),o=function Vie(r,e){var t=new Sy({values:r}),n=Math.max(0,t.min);return e-t.scale(n)*e}(n,t);return i.push(["L",e,o]),i.push(["L",0,o]),i.push(["Z"]),i}(d,i,o,s);h.addShape("path",{attrs:My({path:g},f),name:"trend-area"})}}this.intervalConfig&&h.addShape("path",{attrs:My({path:Uie(this.intervalConfig.data,i,o,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),h.move(t,n)},r.prototype.destory=function(){this.group.destroy()},r}();const Kie=qie;var Kv=function(){return Kv=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},Kv.apply(this,arguments)},Zie={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},Qie={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},Jie=function(){function r(e){var n=e.name,i=e.type,o=e.x,a=void 0===o?0:o,s=e.y,u=void 0===s?0:s,l=e.width,c=void 0===l?2:l,f=e.height,h=void 0===f?24:f,d=e.style,g=void 0===d?{}:d;this.group=e.group,this.name=n,this.handleType=i,this.x=a,this.y=u,this.width=c,this.height=h,"trend"===i?this.style=Kv(Kv({},Zie),g):"simple"===i&&(this.style=Kv(Kv({},Qie),g)),this.renderHandle()}return r.prototype.setX=function(e){this.setXY(e,void 0)},r.prototype.setY=function(e){this.setXY(void 0,e)},r.prototype.setXY=function(e,t){(0,ue.isNumber)(e)&&(this.x=e),(0,ue.isNumber)(t)&&(this.y=t),this.updateXY()},r.prototype.renderHandle=function(){var e=this,t=e.width,n=e.height,i=e.style,o=e.name,a=i.fill,s=i.stroke,u=i.radius,l=i.opacity,c=i.cursor;this.handleGroup=this.group.addGroup(),"trend"===this.handleType?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:t,height:n,fill:a,stroke:s,radius:u,opacity:l,cursor:c},name:"".concat(o,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:0,r:2*t,fill:a,stroke:s,radius:u,opacity:l,cursor:c,lineAppendWidth:12},name:"".concat(o,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:n,r:2*t,fill:a,stroke:s,radius:u,opacity:l,cursor:c},name:"".concat(o,"-handler")})):"simple"===this.handleType&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:n/2,r:2*t,fill:a,stroke:s,radius:u,opacity:l,cursor:c,lineWidth:2},name:"".concat(o,"-handler")})),this.updateXY(),"trend"===this.handleType?this.bindTrendEvents():"simple"===this.handleType&&this.bindSimpleEvents()},r.prototype.bindSimpleEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){e.topCircle.attr("fill",e.style.highLightFill)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){e.topCircle.attr("fill",e.style.fill)})},r.prototype.bindTrendEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var n=e.style.highLightFill;e.verticalLine.attr("fill",n),e.topCircle.attr("fill",n),e.bottomCircle.attr("fill",n)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var n=e.style.fill;e.verticalLine.attr("fill",n),e.topCircle.attr("fill",n),e.bottomCircle.attr("fill",n)})},r.prototype.show=function(){this.handleGroup.show()},r.prototype.hide=function(){this.handleGroup.hide()},r.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},r}();const y3=Jie;var b3="timebarstartplay",w3="timebarendplay",zf="valuechange",op="timebarConfigChanged",jd="playPauseBtn",Cy="nextStepBtn",Ay="preStepBtn",LC=function(){return LC=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},LC.apply(this,arguments)},eoe=function(){function r(e){this.config=(0,ue.deepMix)({},e),this.init()}return r.prototype.update=function(e){this.config=(0,ue.deepMix)({},this.config,e),this.updateElement(),this.renderMarker()},r.prototype.init=function(){this.initElement(),this.renderMarker()},r.prototype.initElement=function(){var e=this.config,t=e.group,n=e.style,i=n.scale,o=void 0===i?1:i,a=n.offsetX,u=n.offsetY,c=this.config.x+(void 0===a?0:a),f=this.config.y+(void 0===u?0:u),h=t.addGroup({name:jd});this.startMarkerGroup=h.addGroup({name:jd}),this.circle=t.addShape("circle",{attrs:LC({x:c,y:f,r:this.config.r*o},n),name:jd}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(c,f,o),fill:n.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=h.addGroup({name:jd});var d=.25*this.config.r*o,g=.5*this.config.r*Math.sqrt(3)*o;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c-.375*this.config.r*o,y:f-g/2,width:d,height:g,fill:n.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c+1/8*this.config.r*o,y:f-g/2,width:d,height:g,fill:n.stroke||"#aaa",lineWidth:0}})},r.prototype.updateElement=function(){var e=this.config.style,t=e.scale,n=void 0===t?1:t,i=e.offsetX,a=e.offsetY,u=this.config.x+(void 0===i?0:i),l=this.config.y+(void 0===a?0:a);this.circle.attr("x",u),this.circle.attr("y",l),this.circle.attr("r",this.config.r*n),this.startMarker.attr("path",this.getStartMarkerPath(u,l,n));var c=.25*this.config.r*n,f=.5*this.config.r*Math.sqrt(3)*n;this.pauseLeftMarker.attr("x",u-.375*this.config.r*n),this.pauseLeftMarker.attr("y",l-f/2),this.pauseLeftMarker.attr("width",c),this.pauseLeftMarker.attr("height",f),this.pauseRightMarker.attr("x",u+1/8*this.config.r*n),this.pauseRightMarker.attr("y",l-f/2),this.pauseRightMarker.attr("width",c),this.pauseRightMarker.attr("height",f)},r.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},r.prototype.getStartMarkerPath=function(e,t,n){var i=.5*this.config.r*Math.sqrt(3)*n;return[["M",e-i/Math.sqrt(3)/2,t-i/2],["L",e+i/Math.sqrt(3),t],["L",e-i/Math.sqrt(3)/2,t+i/2]]},r}();const toe=eoe;var Fa=function(){return Fa=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},Fa.apply(this,arguments)},Dy=Nl,ioe={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},ooe={fill:"#fff"},aoe={fill:"green"},x3={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},E3={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},soe={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:x3,timeTypeControllerStyle:E3},uoe=function(){function r(e){this.controllerCfg=(0,ue.deepMix)({},soe,e),this.group=e.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType=this.controllerCfg.defaultTimeType||"range",this.fontFamily=e.fontFamily||"Arial, sans-serif",this.init()}return r.prototype.init=function(){this.renderPlayButton()},r.prototype.getNextMarkerPath=function(e,t,n){return[["M",e,t-n],["L",e+n,t],["L",e,t+n],["Z",e,t-n],["M",e,t],["L",e-n,t-n],["L",e-n,t+n],["Z"]]},r.prototype.getPreMarkerPath=function(e,t,n){return[["M",e,t-n],["L",e-n,t],["L",e,t+n],["L",e,t-n],["M",e,t],["L",e+n,t-n],["L",e+n,t+n],["Z"]]},r.prototype.renderPlayButton=function(){var e=this.controllerCfg,t=e.width,n=e.height,i=e.x,o=e.y,a=e.hideTimeTypeController,s=e.fill,u=void 0===s?"#aaa":s,l=e.stroke,c=void 0===l?"green":l,f=e.containerStyle,h=void 0===f?{}:f,d=Fa(Fa({},ioe),e.playBtnStyle||{}),g=Fa(Fa({},ooe),e.preBtnStyle||{}),m=Fa(Fa({},aoe),e.nextBtnStyle||{}),_=n/2-5,D=o+10,L=this.controllerGroup.addShape("rect",{attrs:Fa({x:i,y:D,width:t,height:n,stroke:c,fill:u},h),name:"container-rect"});this.playButton?this.playButton.update({x:t/2,y:D,r:_}):this.playButton=new toe({group:this.controllerGroup,x:t/2,y:D+_+5,r:_,isPlay:this.isPlay,style:d}),this.controllerGroup.addShape("path",{attrs:Fa({path:this.getPreMarkerPath(t/2-5*_+(g.offsetX||0),D+_+5+(g.offsetY||0),(g.scale||1)*_*.5)},g),name:Ay}),this.controllerGroup.addShape("path",{attrs:Fa({path:this.getNextMarkerPath(t/2+5*_+(m.offsetX||0),D+_+5+(m.offsetY||0),(m.scale||1)*_*.5)},m),name:Cy}),L.toBack(),this.renderSpeedBtn(),a||this.renderToggleTime(),this.bindEvent();var Ve=this.controllerCfg.scale,Ue=void 0===Ve?1:Ve,at=this.controllerGroup.getCanvasBBox(),_t=(at.maxX+at.minX)/2,vn=(at.maxY+at.minY)/2,Cn=Dy([1,0,0,0,1,0,0,0,1],[["t",-_t,-vn],["s",Ue,Ue],["t",_t,vn]]);this.controllerGroup.setMatrix(Cn)},r.prototype.renderSpeedBtn=function(){var e=this.controllerCfg,t=e.y,n=e.width,i=e.hideTimeTypeController,o=Fa(Fa({},x3),this.controllerCfg.speedControllerStyle||{}),a=o.scroller,s=void 0===a?{}:a,u=o.text,l=void 0===u?{}:u,c=o.pointer,f=void 0===c?{}:c,h=o.scale,d=void 0===h?1:h,g=o.offsetX,m=void 0===g?0:g,_=o.offsetY,D=void 0===_?0:_,L=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=L;var O=[],Z=5;this.speedAxisY=[19,22,26,32,39];for(var le=0;le<5;le++){var pe=t+this.speedAxisY[le],Ee=n-(i?50:110);L.addShape("line",{attrs:Fa({x1:Ee,x2:Ee+15,y1:pe,y2:pe},s),speed:Z,name:"speed-rect"}),this.speedAxisY[le]=pe,O.push(Z),Z-=1}this.speedText=L.addShape("text",{attrs:Fa({x:n-(i?50:110)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},l),name:"speed-text"}),this.speedPoint=L.addShape("path",{attrs:Fa({path:this.getPointerPath(n-(i?50:110),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},f),name:"speed-pointer"});var Re=this.speedGroup.getCanvasBBox(),Ve=(Re.maxX+Re.minX)/2,Ue=(Re.maxY+Re.minY)/2,at=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];at=Dy(at,[["t",-Ve,-Ue],["s",d,d],["t",Ve+m*d,Ue+D*d]]),this.speedGroup.setMatrix(at)},r.prototype.getPointerPath=function(e,t){return[["M",e,t],["L",e-10,t-4],["L",e-10,t+4],["Z"]]},r.prototype.renderToggleTime=function(){var e,t,n=this.controllerCfg,i=n.width,o=n.defaultTimeType,a=Fa(Fa({},E3),this.controllerCfg.timeTypeControllerStyle||{}),s=a.scale,u=void 0===s?1:s,l=a.offsetX,c=void 0===l?0:l,f=a.offsetY,h=void 0===f?0:f,d=a.box,g=void 0===d?{}:d,m=a.check,_=void 0===m?{}:m,D=a.text,L=void 0===D?{}:D;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"});var O="single"===o;this.toggleGroup.addShape("rect",{attrs:Fa({x:i-50,y:this.speedAxisY[0]+3.5},g),isChecked:O,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:Fa({path:[["M",i-50+3,this.speedAxisY[1]+6],["L",i-50+7,this.speedAxisY[1]+10],["L",i-50+12,this.speedAxisY[1]+4]]},_),capture:!1,name:"check-icon"}),O||this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:Fa({text:O?(null===(e=this.controllerCfg)||void 0===e?void 0:e.timeRangeControllerText)||"\u65f6\u95f4\u8303\u56f4":(null===(t=this.controllerCfg)||void 0===t?void 0:t.timePointControllerText)||"\u5355\u4e00\u65f6\u95f4",x:i-50+15,y:this.speedAxisY[0]+4,fontFamily:typeof window<"u"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},L),name:"checked-text"});var Z=this.toggleGroup.getCanvasBBox(),le=(Z.maxX+Z.minX)/2,pe=(Z.maxY+Z.minY)/2,Ee=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];Ee=Dy(Ee,[["t",-le,-pe],["s",u,u],["t",le+c*u,pe+h*u]]),this.toggleGroup.setMatrix(Ee)},r.prototype.bindEvent=function(){var e=this;this.speedGroup.on("speed-rect:click",function(t){var n=t.target.attr("y1"),i=e.speedPoint.attr("matrix"),o=e.speedAxisY.indexOf(i[7]||0),a=e.speedAxisY.indexOf(n);i=Dy(i,[["t",0,e.speedAxisY[a]-e.speedAxisY[o]]]),e.speedPoint.setMatrix(i),e.currentSpeed=e.speedAxisY.length-a,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(op,{speed:e.currentSpeed,type:e.currentType})}),this.speedGroup.on("mousewheel",function(t){t.preventDefault();var n=e.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],i=n[7],o=e.speedAxisY.indexOf(i);if(-1===o){var a=1/0;e.speedAxisY.forEach(function(u,l){var c=Math.abs(u-i);a>c&&(a=c,o=l)})}o=t.originalEvent.deltaY>0?Math.max(0,o-1):Math.min(e.speedAxisY.length-1,o+1),n=Dy(n,[["t",0,e.speedAxisY[o]-i]]),e.speedPoint.setMatrix(n),e.currentSpeed=e.speedAxisY.length-o,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(op,{speed:e.currentSpeed,type:e.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(t){var n,i,o=t.target.get("isChecked");o?(e.checkedIcon.hide(),e.checkedText.attr("text",(null===(i=e.controllerCfg)||void 0===i?void 0:i.timePointControllerText)||"\u5355\u4e00\u65f6\u95f4"),e.currentType="range"):(e.checkedIcon.show(),e.checkedText.attr("text",(null===(n=e.controllerCfg)||void 0===n?void 0:n.timeRangeControllerText)||"\u65f6\u95f4\u8303\u56f4"),e.currentType="single"),t.target.set("isChecked",!o),e.group.emit(op,{type:e.currentType,speed:e.currentSpeed})})},r.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},r}();const _3=uoe;var Wo=function(){return Wo=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},Wo.apply(this,arguments)},loe=Nl,coe={fill:"#416180",opacity:.05},foe={fill:"#416180",opacity:.15,radius:5},hoe={fill:"#5B8FF9",opacity:.3,cursor:"grab"},doe={width:2,height:24},goe={textBaseline:"middle",fill:"#000",opacity:.45},poe={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},voe={lineWidth:1,stroke:"#ccc"},moe=function(){function r(e){var t=this;this.prevX=0,this.onMouseDown=function(Vn){return function(rr){t.currentHandler=Vn;var vr=rr.originalEvent;vr.stopPropagation(),vr.preventDefault(),t.prevX=(0,ue.get)(vr,"touches.0.pageX",vr.pageX);var Sr=t.canvas.get("container");Sr.addEventListener("mousemove",t.onMouseMove),Sr.addEventListener("mouseup",t.onMouseUp),Sr.addEventListener("mouseleave",t.onMouseUp),Sr.addEventListener("touchmove",t.onMouseMove),Sr.addEventListener("touchend",t.onMouseUp),Sr.addEventListener("touchcancel",t.onMouseUp)}},this.onMouseMove=function(Vn){Vn.stopPropagation(),Vn.preventDefault();var rr=(0,ue.get)(Vn,"touches.0.pageX",Vn.pageX),Sr=t.adjustOffsetRange((rr-t.prevX)/t.width);t.updateStartEnd(Sr),t.updateUI(),t.prevX=rr},this.onMouseUp=function(){t.currentHandler&&(t.currentHandler=void 0);var Vn=t.canvas.get("container");Vn&&(Vn.removeEventListener("mousemove",t.onMouseMove),Vn.removeEventListener("mouseup",t.onMouseUp),Vn.removeEventListener("mouseleave",t.onMouseUp),Vn.removeEventListener("touchmove",t.onMouseMove),Vn.removeEventListener("touchend",t.onMouseUp),Vn.removeEventListener("touchcancel",t.onMouseUp))};var n=e.x,i=void 0===n?0:n,o=e.y,a=void 0===o?0:o,s=e.width,u=void 0===s?100:s,l=e.height,c=e.padding,f=void 0===c?10:c,h=e.trendCfg,d=e.controllerCfg,g=void 0===d?{speed:1}:d,m=e.backgroundStyle,_=void 0===m?{}:m,D=e.foregroundStyle,L=void 0===D?{}:D,O=e.handlerStyle,Z=void 0===O?{}:O,le=e.textStyle,pe=void 0===le?{}:le,Ee=e.start,Re=void 0===Ee?0:Ee,Ve=e.end,Ue=void 0===Ve?1:Ve,at=e.minText,_t=void 0===at?"":at,vn=e.maxText,Cn=void 0===vn?"":vn,Tt=e.group,Ln=e.canvas,Kn=e.tick,mn=void 0===Kn?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(rr){return rr},ticks:[]}:Kn,On=e.type;this.graph=e.graph,this.canvas=Ln,this.group=Tt,this.timeBarType=On,this.x=i,this.y=a,this.width=u,this.height=l,this.padding=f,this.ticks=mn.ticks,this.trendCfg=h,this.controllerCfg=g,this.currentSpeed=g.speed||1,this.tickLabelFormatter=mn.tickLabelFormatter,"trend"===On?this.backgroundStyle=Wo(Wo({},coe),_):"simple"===On&&(this.backgroundStyle=Wo(Wo({},foe),_)),this.foregroundStyle=Wo(Wo({},hoe),L),this.handlerStyle=Wo(Wo({},doe),Z),this.textStyle=Wo(Wo({},goe),pe),this.tickLabelStyle=Wo(Wo({},poe),mn.tickLabelStyle),this.tickLineStyle=Wo(Wo({},voe),mn.tickLineStyle),this.currentMode=g.defaultTimeType||"range",this.start=Re,this.end=Ue,this.minText=_t,this.maxText=Cn,this.fontFamily=typeof window<"u"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return r.prototype.update=function(e){var t=e.x,n=e.y,i=e.width,o=e.height,a=e.minText,s=e.maxText,l=e.end;this.start=Math.min(1,Math.max(e.start,0)),this.end=Math.min(1,Math.max(l,0)),(0,ue.assign)(this,{x:t,y:n,width:i,height:o,minText:a,maxText:s}),this.updateUI()},r.prototype.setText=function(e,t){this.minTextShape.attr("text",e),this.maxTextShape.attr("text",t)},r.prototype.renderSlider=function(){var e=this,t=this,n=t.width,i=t.height,o=t.timeBarType;if("trend"===o&&(0,ue.size)((0,ue.get)(this.trendCfg,"data"))){var a=new Kie(Wo(Wo({x:this.x,y:this.y,width:n,height:i},this.trendCfg),{group:this.group}));this.trendComponent=a}var s=this.group.addGroup({name:"slider-group"});s.addShape("rect",{attrs:Wo({x:0,y:0,width:n,height:i},this.backgroundStyle),name:"background"});var u=this.group.addGroup();"trend"===o?(this.minTextShape=u.addShape("text",{attrs:Wo({x:0,y:i/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:Wo({y:i/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=u.addShape("text",{attrs:Wo({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:Wo({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:Wo({x:0,y:this.y,height:i},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",function(D){D.target.attr("cursor","grabbing")}),this.foregroundShape.on("mouseup",function(D){D.target.attr("cursor",e.foregroundStyle.cursor||"grab")});var l=(0,ue.get)(this.handlerStyle,"width",2),c=(0,ue.get)(this.handlerStyle,"height",24),f=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new y3({name:"minHandlerShape",group:f,type:o,x:this.x,y:this.y,width:l,height:c,style:this.handlerStyle});var h=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new y3({name:"maxHandlerShape",group:h,type:o,x:this.x,y:this.y,width:l,height:c,style:this.handlerStyle});var d=this.ticks,g=n/(d.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(D){D.destroy()});var m=-1/0,_=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=d.map(function(D,L){var O;e.tickPosList.push(e.x+L*g),e.tickLabelFormatter?(O=e.tickLabelFormatter(D),!(0,ue.isString)(O)&&O&&(O=D.date)):O=D.date;var Z=e.x+L*g,le=e.y+i+5,pe=e.group.addShape("text",{attrs:Wo({x:Z,y:le,text:O,fontFamily:e.fontFamily||"Arial, sans-serif"},e.tickLabelStyle),name:"tick-label"});if((0,ue.isNumber)(_)&&L!==d.length-1){var Ee=loe([1,0,0,0,1,0,0,0,1],[["t",-Z,-le],["r",_],["t",Z-5,le+2]]);pe.attr({textAlign:"left",matrix:Ee})}0===L?pe.attr({textAlign:"left"}):L!==d.length-1&&pe.attr({textAlign:"right"});var Re=e.group.addShape("line",{attrs:Wo({x1:e.x+L*g,y1:e.y+i+2,x2:e.x+L*g,y2:e.y+i+6},e.tickLineStyle),name:"tick-line"});Re.toBack();var Ve=pe.getBBox();return Ve.minX>m?(pe.show(),Re.show(),m=Ve.minX+Ve.width+10):(pe.hide(),Re.hide()),pe}),this.controllerBtnGroup=new _3(Wo({group:this.group,x:this.x,y:this.y+i+25,width:n,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),s.move(this.x,this.y),this.bindEvents(),"single"===this.currentMode&&(this.minHandlerShape.hide(),this.foregroundShape.hide(),this.minTextShape.hide())},r.prototype.bindEvents=function(){var e=this,t=this.group.find(function(i){return"minHandlerShape"===i.get("name")});t&&(t.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),t.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var n=this.group.find(function(i){return"maxHandlerShape"===i.get("name")});n&&(n.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),n.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat(jd,":click"),function(){e.isPlay=!e.isPlay,e.currentHandler=e.maxHandlerShape,e.changePlayStatus()}),this.group.on("".concat(Cy,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(.01),e.updateUI()}),this.group.on("".concat(Ay,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(-.01),e.updateUI()}),this.group.on(op,function(i){var o=i.type;e.currentSpeed=i.speed,e.currentMode=o,"single"===o?(e.minHandlerShape.hide(),e.foregroundShape.hide(),e.minTextShape.hide()):"range"===o&&(e.minHandlerShape.show(),e.foregroundShape.show(),e.minTextShape.show())})},r.prototype.adjustTickIndex=function(e){for(var t=0;t<this.tickPosList.length-1;t++)if(this.tickPosList[t]<=e&&e<=this.tickPosList[t+1])return Math.abs(this.tickPosList[t]-e)<Math.abs(e-this.tickPosList[t+1])?t:t+1;return 0},r.prototype.adjustOffsetRange=function(e){switch(this.currentHandler){case this.minHandlerShape:var t=0-this.start,n=1-this.start;return Math.min(n,Math.max(t,e));case this.maxHandlerShape:return t=0-this.end,n=1-this.end,Math.min(n,Math.max(t,e));case this.foregroundShape:return t=0-this.start,n=1-this.end,Math.min(n,Math.max(t,e));default:return 0}},r.prototype.updateStartEnd=function(e){var t=this.ticks[this.adjustTickIndex(this.start*this.width)],n=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler)return this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t?.date,void(this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n?.date);switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=e,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date;break;case this.foregroundShape:this.start+=e,this.end+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date}},r.prototype.updateUI=function(){var e=this;this.start<0&&(this.start=0),this.end>1&&(this.end=1);var t=this.x+this.start*this.width,n=this.x+this.end*this.width;this.foregroundShape.attr("x",t),this.foregroundShape.attr("width",n-t);var i=(0,ue.get)(this.handlerStyle,"width",2);this.setText(this.minText,this.maxText);var o=this.dodgeText([t,n]),a=o[0],s=o[1];this.minHandlerShape.setX(t-i/2),(0,ue.each)(a,function(u,l){return e.minTextShape.attr(l,u)}),this.maxHandlerShape.setX(n-i/2),(0,ue.each)(s,function(u,l){return e.maxTextShape.attr(l,u)}),"range"===this.currentMode?this.graph.emit(zf,{value:[this.start,this.end].sort()}):"single"===this.currentMode&&this.graph.emit(zf,{value:[this.end,this.end]})},r.prototype.dodgeText=function(e){var t,n,o=(0,ue.get)(this.handlerStyle,"width",2),a=this.minTextShape,s=this.maxTextShape,u=e[0],l=e[1],c=!1;u>l&&(u=(t=[l,u])[0],l=t[1],a=(n=[s,a])[0],s=n[1],c=!0);var f=a.getBBox(),h=s.getBBox(),d=null,g=null;return"trend"===this.timeBarType?(d=u-f.width<this.x+2?{x:u+o/2+2,textAlign:"left"}:{x:u-o/2-2,textAlign:"right"},g=l+h.width>this.x+this.width?{x:l-o/2-2,textAlign:"right"}:{x:l+o/2+2,textAlign:"left"}):"simple"===this.timeBarType&&(d=a.attr("x")>f.width?{x:u,textAlign:"center"}:{x:u,textAlign:"left"},g=s.attr("x")>this.width-h.width?{x:l,textAlign:"right"}:{x:l,textAlign:"center"}),c?[g,d]:[d,g]},r.prototype.startPlay=function(){var e=this;return typeof window<"u"?window.requestAnimationFrame(function(){var u=e.adjustOffsetRange(e.width/e.ticks.length/(1e3*(10-e.currentSpeed)/60)/e.width);e.updateStartEnd(u),e.updateUI(),e.isPlay&&(e.playHandler=e.startPlay())}):void 0},r.prototype.changePlayStatus=function(e){void 0===e&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(b3,null)):this.playHandler&&(typeof window<"u"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(w3,null))},r.prototype.destory=function(){this.graph.off(zf,function(){});var e=this.group,t=e.find(function(i){return"minHandlerShape"===i.get("name")});t&&(t.off("minHandlerShape-handler:mousedown"),t.off("minHandlerShape-handler:touchstart"),t.destroy());var n=e.find(function(i){return"maxHandlerShape"===i.get("name")});n&&(n.off("maxHandlerShape-handler:mousedown"),n.off("maxHandlerShape-handler:touchstart"),n.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),e.off("".concat(jd,":click")),e.off("".concat(Cy,":click")),e.off("".concat(Ay,":click")),e.off(op),e.destroy(),this.trendComponent&&this.trendComponent.destory()},r}();const yoe=moe;var boe=function(){function r(e){var t=e.x,n=void 0===t?0:t,i=e.y,o=void 0===i?0:i,s=e.text,u=e.padding,l=void 0===u?[4,4,4,4]:u,c=e.className,f=void 0===c?"g6-component-timebar-tooltip":c,h=e.backgroundColor,d=void 0===h?"#000":h,g=e.textColor,m=void 0===g?"#fff":g,_=e.opacity,D=void 0===_?.8:_,L=e.fontSize,O=void 0===L?12:L;this.container=e.container,this.className=f,this.backgroundColor=d,this.textColor=m,this.x=n,this.y=o,this.text=s,this.padding=l,this.opacity=D,this.fontSize=O,this.render()}return r.prototype.render=function(){var e=this,o=e.backgroundColor,a=e.textColor,s=e.text,u=e.padding,l=e.opacity,c=e.fontSize,f=e.container,h=ra("<div class='".concat(e.className,"' style=\"position: absolute; width: fit-content; height: fit-content; opacity: ").concat(l,'"></div>'));(0,ue.isString)(f)&&(f=document.getElementById(f)),f.appendChild(h),e.parentHeight=f.offsetHeight,e.parentWidth=f.offsetWidth,Fi(h,{visibility:"hidden",top:0,left:0});var d=ra("\n      <div style='position: absolute; white-space:nowrap; background-color: ".concat(o,"; font-size: ").concat(c,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(a,"; padding: ").concat(u[0],"px ").concat(u[1],"px ").concat(u[2],"px ").concat(u[3],"px'></div>"));d.innerHTML=s,h.appendChild(d),e.backgroundDOM=d;var g=ra("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(o,"'></div>"));h.appendChild(g),e.arrowDOM=g,e.container=h},r.prototype.show=function(e){var t=this,i=e.x;t.backgroundDOM.innerHTML=e.text;var u=t.backgroundDOM.offsetWidth,l=t.backgroundDOM.offsetHeight,c=t.arrowDOM.offsetWidth;Fi(t.container,{top:"".concat(-l-t.arrowDOM.offsetHeight,"px"),left:"".concat(i,"px"),visibility:"visible"}),Fi(t.backgroundDOM,{marginLeft:"".concat(-u/2,"px")}),Fi(t.arrowDOM,{marginLeft:"".concat(-c/2,"px"),top:"".concat(l,"px")});var h=i-u/2,d=i+u/2;h<0?Fi(t.backgroundDOM,{marginLeft:"".concat(-u/2-h,"px")}):d>t.parentWidth&&Fi(t.backgroundDOM,{marginLeft:"".concat(-u/2-d+t.parentWidth+12,"px")})},r.prototype.hide=function(){Fi(this.container,{top:0,left:0,visibility:"hidden"})},r}();const woe=boe;var Ty=function(){return Ty=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},Ty.apply(this,arguments)},xoe=Nl,Eoe={fill:"#5B8FF9"},_oe={fill:"#e6e8e9"},Soe=function(){function r(e){this.frameCount=0,this.fontFamily="Arial, sans-serif";var n=e.canvas,i=e.group,o=e.width,a=e.height,s=e.padding,u=e.data,l=e.start,c=e.end,f=e.x,h=void 0===f?0:f,d=e.y,g=void 0===d?0:d,m=e.tickLabelFormatter,_=e.selectedTickStyle,D=void 0===_?Eoe:_,L=e.unselectedTickStyle,O=void 0===L?_oe:L,Z=e.tooltipBackgroundColor,le=e.tooltipFomatter,pe=e.tickLabelStyle,Ee=e.controllerCfg,Re=void 0===Ee?{speed:1}:Ee;this.graph=e.graph,this.group=i,this.sliceGroup=i.addGroup({name:"slice-group"}),this.canvas=n,this.width=o,this.height=a,this.padding=s,this.data=u,this.start=l,this.end=c,this.tickLabelFormatter=m,this.tickLabelStyle=pe||{},this.selectedTickStyle=D,this.unselectedTickStyle=O,this.controllerCfg=Re,this.currentSpeed=Re.speed||1,this.x=h,this.y=g,this.tooltipBackgroundColor=Z,this.tooltipFomatter=le,this.fontFamily=typeof window<"u"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return r.prototype.renderSlices=function(){var e=this,t=this,n=t.width,i=t.height,o=t.padding,a=t.data,s=t.start,u=t.end,l=t.tickLabelFormatter,c=t.selectedTickStyle,f=t.unselectedTickStyle,h=t.tickLabelStyle,D=i-(3*o+4+10)-2*o,O=a.length,Z=(n-2*o-2*(O-1))/O;this.tickWidth=Z;var le=this.sliceGroup,pe=[],Ee=[],Re=Math.round(O*s),Ve=Math.round(O*u);this.startTickRectId=Re,this.endTickRectId=Ve;var Ue=h.rotate;delete h.rotate,a.forEach(function(_t,vn){var kt=le.addShape("rect",{attrs:Ty({x:o+vn*(Z+2),y:o,width:Z,height:D},vn>=Re&&vn<=Ve?c:f),draggable:!0,name:"tick-rect-".concat(vn)}),Ln=le.addShape("rect",{attrs:{x:o+vn*Z+2*(2*vn-1)/2,y:o,width:0===vn||vn===O-1?Z+1:Z+2,height:D,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(vn)});Ln.toFront();var On,Kn=kt.getBBox(),mn=(Kn.minX+Kn.maxX)/2;if(pe.push({rect:kt,pickRect:Ln,value:_t.date,x:mn,y:Kn.minY}),l?(On=l(_t),!(0,ue.isString)(On)&&On&&(On=_t.date)):vn%Math.round(O/10)==0&&(On=_t.date),On){Ee.push(On);var Vn=Kn.maxY+2*o;le.addShape("line",{attrs:{stroke:"#BFBFBF",x1:mn,y1:Vn,x2:mn,y2:Vn+4},name:"tick-line"});var rr=Vn+4+o,vr=le.addShape("text",{attrs:Ty({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:mn,y:rr,textAlign:"center",text:On,textBaseline:"top",fontSize:10,fontFamily:e.fontFamily||"Arial, sans-serif"},h),capture:!1,name:"tick-label"}),Sr=vr.getBBox();if(Sr.maxX>n?vr.attr("textAlign","right"):Sr.minX<0&&vr.attr("textAlign","left"),(0,ue.isNumber)(Ue)&&10!==Ee.length){var Zr=xoe([1,0,0,0,1,0,0,0,1],[["t",-mn,-rr],["r",Ue],["t",mn-5,rr+2]]);vr.attr({textAlign:"left",matrix:Zr})}1===Ee.length?vr.attr({textAlign:"left"}):10===Ee.length&&vr.attr({textAlign:"right"})}}),this.tickRects=pe;var at=this.group;this.currentSpeed=1,this.controllerBtnGroup=new _3(Ty({group:at,x:this.x,y:this.y+i+5,width:n,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"},this.controllerCfg))},r.prototype.initEvent=function(){var e=this,t=this.sliceGroup;t.on("click",function(c){var f=c.target;if("rect"===f.get("type")&&f.get("name")){var h=parseInt(f.get("name").split("-")[2],10);if(!isNaN(h)){var d=e.tickRects,g=e.unselectedTickStyle;d.forEach(function(L){L.rect.attr(g)}),d[h].rect.attr(e.selectedTickStyle),e.startTickRectId=h,e.endTickRectId=h;var D=h/d.length;e.graph.emit(zf,{value:[D,D]})}}}),t.on("dragstart",function(c){var f=e.tickRects,h=e.unselectedTickStyle;f.forEach(function(L){L.rect.attr(h)});var g=parseInt(c.target.get("name").split("-")[2],10);f[g].rect.attr(e.selectedTickStyle),e.startTickRectId=g;var D=g/f.length;e.graph.emit(zf,{value:[D,D]}),e.dragging=!0}),t.on("dragover",function(c){if(e.dragging&&"rect"===c.target.get("type")){for(var f=parseInt(c.target.get("name").split("-")[2],10),h=e.startTickRectId,d=e.tickRects,g=e.selectedTickStyle,m=e.unselectedTickStyle,_=0;_<d.length;_++)d[_].rect.attr(_>=h&&_<=f?g:m);var L=d.length;e.endTickRectId=f,e.graph.emit(zf,{value:[h/L,f/L]})}}),t.on("drop",function(c){if(e.dragging&&(e.dragging=!1,"rect"===c.target.get("type"))){var f=e.startTickRectId,h=parseInt(c.target.get("name").split("-")[2],10);if(!(h<f)){var g=e.tickRects;g[h].rect.attr(e.selectedTickStyle),e.endTickRectId=h;var m=g.length;e.graph.emit(zf,{value:[f/m,h/m]})}}});var n=this,i=n.tooltipBackgroundColor,o=n.tooltipFomatter,a=n.canvas,s=new woe({container:a.get("container"),backgroundColor:i}),u=this.tickRects;u.forEach(function(c){var f=c.pickRect;f.on("mouseenter",function(h){var d=h.target;if("rect"===d.get("type")){var g=parseInt(d.get("name").split("-")[2],10),m=a.getClientByPoint(u[g].x,u[g].y);s.show({x:u[g].x,y:u[g].y,clientX:m.x,clientY:m.y,text:o?o(u[g].value):u[g].value})}}),f.on("mouseleave",function(h){s.hide()})});var l=this.group;l.on("".concat(jd,":click"),function(){e.isPlay=!e.isPlay,e.changePlayStatus()}),l.on("".concat(Cy,":click"),function(){e.updateStartEnd(1)}),l.on("".concat(Ay,":click"),function(){e.updateStartEnd(-1)}),l.on(op,function(c){e.currentSpeed=c.speed})},r.prototype.changePlayStatus=function(e){void 0===e&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(b3,null)):this.playHandler&&(typeof window<"u"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(w3,null))},r.prototype.startPlay=function(){var e=this;return typeof window<"u"?window.requestAnimationFrame(function(){e.frameCount%(60/e.currentSpeed)==0&&(e.frameCount=0,e.updateStartEnd(1)),e.frameCount++,e.isPlay&&(e.playHandler=e.startPlay())}):void 0},r.prototype.updateStartEnd=function(e){var t=this,n=this.tickRects,i=n.length,o=this.unselectedTickStyle,a=this.selectedTickStyle,s=t.endTickRectId;if(e>0?t.endTickRectId++:(n[t.endTickRectId].rect.attr(o),t.endTickRectId--),s!==t.startTickRectId)t.endTickRectId<t.startTickRectId&&(t.startTickRectId=t.endTickRectId);else{for(var u=t.startTickRectId;u<=t.endTickRectId-1;u++)n[u].rect.attr(o);t.startTickRectId=t.endTickRectId}n[t.endTickRectId]&&(n[t.endTickRectId].rect.attr(a),this.graph.emit(zf,{value:[t.startTickRectId/i,t.endTickRectId/i]}))},r.prototype.destory=function(){var e=this.sliceGroup;e.off("click"),e.off("dragstart"),e.off("dragover"),e.off("drop"),this.tickRects.forEach(function(t){var n=t.pickRect;n.off("mouseenter"),n.off("mouseleave")}),this.tickRects.length=0,e.off("".concat(jd,":click")),e.off("".concat(Cy,":click")),e.off("".concat(Ay,":click")),e.off(op),this.sliceGroup.destroy()},r}();const Moe=Soe;var Coe=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(i[a]=o[a])},r(t,n)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Fh=function(){return Fh=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},Fh.apply(this,arguments)},Ioe=function(r){function e(t){var n=r.call(this,t)||this;return n.afterrenderListener=function(i){return n.filterData({})},n.valueChangeListener=(0,ue.throttle)(function(i){return n.filterData(i)},200,{trailing:!0,leading:!0}),n.changeData=function(i){var o=n.get("graph");n.cacheGraphData=o.get("data"),n.filterData({})},n}return Coe(e,r),e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{}}},e.prototype.initContainer=function(){var l,c,t=this.get("graph"),n=this._cfgs,i=n.width,o=n.height,a=this.get("className")||"g6-component-timebar",s=this.get("container"),u=this.get("graph").get("container");s?((0,ue.isString)(s)&&(s=document.getElementById(s)),l=s):Fi(l=ra("<div class='".concat(a,"'></div>")),{position:"relative"}),u.appendChild(l),this.set("timeBarContainer",l),c="SVG"===t.get("renderer")?new vy({container:l,width:i,height:o}):new Nh({container:l,width:i,height:o}),this.get("containerCSS")&&Fi(l,this.get("containerCSS")),this.set("canvas",c)},e.prototype.init=function(){this.initContainer();var n=this.get("canvas").addGroup({name:"timebar-group"});this.set("timeBarGroup",n),this.renderTrend(),this.initEvent();var i=typeof window<"u"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",i)},e.prototype.play=function(){this.togglePlay(!0)},e.prototype.pause=function(){this.togglePlay(!1)},e.prototype.togglePlay=function(t){var n=this.get("timebar");!n||(n.isPlay=!!t,n.changePlayStatus())},e.prototype.renderTrend=function(){var t=this,n=this._cfgs,i=n.width,o=n.x,a=n.y,s=n.padding,u=n.type,l=n.trend,c=n.slider,f=n.controllerCfg,h=n.textStyle,d=n.tick,g=n.backgroundStyle,m=n.foregroundStyle,_=l.data,D=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(l,["data"]),L=i-2*s,O="trend"===u?26:4,Z=this.get("graph"),le=this.get("timeBarGroup"),pe=this.get("canvas"),Ee=null;if("trend"===u||"simple"===u){var Re=this.get("getValue");Ee=new yoe(Fh(Fh({graph:Z,canvas:pe,group:le,type:u,x:o+s,y:"trend"===u?a+s:a+s+15,width:L,height:O,padding:s,backgroundStyle:g,foregroundStyle:m,trendCfg:Fh(Fh({},D),{data:_.map(function(Ue){return Re?.(Ue)||Ue.value})})},c),{tick:{ticks:_,tickLabelFormatter:d.tickLabelFormatter,tickLabelStyle:d.tickLabelStyle,tickLineStyle:d.tickLineStyle},handlerStyle:Fh(Fh({},c.handlerStyle),{height:c.height||O}),controllerCfg:f,textStyle:h}))}else"tick"===u&&(Ee=new Moe(Fh({graph:Z,canvas:pe,group:le,x:o+s,y:a+s,width:i,height:42,padding:2,controllerCfg:f},d)));var Ve=function Ue(){var at=t.get("timebar");at.draggingHandler=!1,at.isPlay&&(at.isPlay=!1,at.currentHandler=at.maxHandlerShape,at.changePlayStatus()),document.removeEventListener("mouseup",Ue)};pe.on("mousedown",function(Ue){("maxHandlerShape-handler"===Ue.target.get("name")||"minHandlerShape-handler"===Ue.target.get("name")||Ue.target===Ee.foregroundShape)&&document.addEventListener("mouseup",Ve)}),this.set("timebar",Ee)},e.prototype.filterData=function(t){var n,i=t.value;if(!i){i=[];var o=this._cfgs.type;o&&"trend"!==o&&"simple"!==o?"tick"===o&&(i[0]=this._cfgs.tick.start,i[1]=this._cfgs.tick.end):(i[0]=this._cfgs.slider.start,i[1]=this._cfgs.slider.end)}var a=null,s=this._cfgs.type;if("trend"===s||"simple"===s?a=this._cfgs.trend.data:"tick"===s&&(a=this._cfgs.tick.data),a&&0!==a.length){var u=this.get("rangeChange"),l=this.get("graph"),c=Math.round(a.length*i[0]),f=Math.round(a.length*i[1]);f=f>=a.length?a.length-1:f,c=c>=a.length?a.length-1:c;var h=null===(n=this._cfgs.tick)||void 0===n?void 0:n.tickLabelFormatter,d=h?h(a[c]):a[c].date,g=h?h(a[f]):a[f].date;if("tick"!==s&&this.get("timebar").setText(d,g),u)u(l,d,g);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&0===this.cacheGraphData.nodes.length)&&(this.cacheGraphData=l.get("data"));var _=this.get("filterItemTypes"),D=this.get("changeData"),L=this.get("getDate"),O=this.get("shouldIgnore"),Z=a[c].date,le=a[f].date;if(D||void 0===D){var pe=this.cacheGraphData.nodes,Ee=this.cacheGraphData.edges,Re={},Ve={};l.getNodes().forEach(function(Ue){return Re[Ue.getID()]=!0}),l.getEdges().forEach(function(Ue){return Ve[Ue.getID()]=!0}),_.includes("node")&&(pe.forEach(function(Ue){var at=+(L?.(Ue)||Ue.date),_t=at>=Z&&at<=le||O?.("node",Ue,{min:Z,max:le}),vn=Re[Ue.id];vn&&!_t?(l.removeItem(Ue.id),Re[Ue.id]=!1):!vn&&_t&&(l.addItem("node",Ue),Re[Ue.id]=!0)}),Ee?.forEach(function(Ue){var at=Re[Ue.source]&&Re[Ue.target]||O?.("edge",Ue,{min:Z,max:le}),_t=!!l.findById(Ue.id);_t&&!at?(l.removeItem(Ue.id),Ve[Ue.id]=!1):!_t&&at?(l.addItem("edge",Ue),Ve[Ue.id]=!0):_t||(Ve[Ue.id]=!1)})),(this.get("filterEdge")||_.includes("edge"))&&Ee?.filter(function(Ue){var at=+(L?.(Ue)||Ue.date),Cn=(at>=Z&&at<=le||O?.("edge",Ue,{min:Z,max:le}))&&Re[Ue.source]&&Re[Ue.target],Tt=Ve[Ue.id];Tt&&!Cn?(Ve[Ue.id]=!1,l.removeItem(Ue.id)):!Tt&&Cn&&(Ve[Ue.id]=!0,l.addItem("edge",Ue))})}else _.includes("node")&&l.getNodes().forEach(function(Ue){var at=Ue.getModel();if(!O?.("node",at,{min:Z,max:le})){var _t=+(L?.(at)||at.date);_t<Z||_t>le?l.hideItem(Ue):l.showItem(Ue)}}),(this.get("filterEdge")||_.includes("edge"))&&l.getEdges().forEach(function(Ue){var at=Ue.getModel();if(!O?.("edge",at,{min:a[c].date,max:a[f].date})){var _t=+(L?.(at)||at.date);if(_t<a[c].date||_t>a[f].date)l.hideItem(Ue);else{var vn=Ue.getSource().isVisible(),Cn=Ue.getTarget().isVisible();vn&&Cn&&l.showItem(Ue)}}})}}else console.warn("\u8bf7\u914d\u7f6e TimeBar \u7ec4\u4ef6\u7684\u6570\u636e")},e.prototype.initEvent=function(){var t=this.get("graph");t.on("afterchangedata",this.changeData),t.on("afterrender",this.afterrenderListener),t.on(zf,this.valueChangeListener)},e.prototype.destroy=function(){var t=this.get("graph");t.off("afterchangedata",this.changeData),t.off("afterrender",this.afterrenderListener),t.off(zf,this.valueChangeListener);var n=this.get("timebar");n&&n.destory&&n.destory(),r.prototype.destroy.call(this);var i=this.get("timeBarContainer");if(i){var o=this.get("container");o||(o=this.get("graph").get("container")),(0,ue.isString)(o)&&(o=document.getElementById(o)),o.removeChild(i)}},e}(Uu);const Ooe=Ioe;var Poe=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(i[a]=o[a])},r(t,n)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Noe=su.applyMatrix,koe=function(r){function e(t){return r.call(this,t)||this}return Poe(e,r),e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,n=this._cfgs,i=n.graph;if(!this.destroyed){var o=this.get("container");(0,ue.isString)(o)&&(o=document.getElementById(o));var a=ra("<div class=".concat(n.viewportClassName,"\n      style='position:absolute;\n        left:0;\n        top:0;\n        box-sizing:border-box;\n        border: 2px solid #1980ff;\n        cursor:move'\n      </div>")),s=0,u=0,l=!1,c=0,f=0,h=0,d=0,g=0,m=0;o.addEventListener("mousedown",function(_){if(n.refresh=!1,_.target===a){var D=a.style;h=parseInt(D.width,10),d=parseInt(D.height,10);var L=t.get("width"),O=t.get("height");h>L||d>O||(m=i.getZoom(),g=t.get("ratio"),l=!0,s=_.clientX,u=_.clientY)}},!1),o.addEventListener("mousemove",function(_){if(l&&!(0,ue.isNil)(_.clientX)&&!(0,ue.isNil)(_.clientY)){var D=t.get("width"),L=t.get("height"),O=a.style;c=parseInt(O.left,10),f=parseInt(O.top,10),h=parseInt(O.width,10),d=parseInt(O.height,10);var Z=s-_.clientX,le=u-_.clientY;c-Z<0?Z=c:c-Z+h>=D&&(Z=0),f-le<0?le=f:f-le+d>=L&&(le=0),f-=le,Fi(a,{left:"".concat(c-=Z,"px"),top:"".concat(f,"px")}),i.translate(Z*m/g,le*m/g),s=_.clientX,u=_.clientY}},!1),o.addEventListener("mouseleave",function(){l=!1,n.refresh=!0},!1),o.addEventListener("mouseup",function(){l=!1,n.refresh=!0},!1),this.set("viewport",a),o.appendChild(a)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),n=this.get("width"),i=this.get("height"),o=this.get("graph"),a=o.get("width"),u=a/o.get("height"),l=o.getGroup(),c=l.getCanvasBBox(),f=[(c.minX+c.maxX)/2,(c.minY+c.maxY)/2],h=[c.maxX-c.minX,c.maxY-c.minY],d={centerX:f[0],centerY:f[1],width:0,height:0,minX:0,minY:0};c[0]/c[1]>u?(d.width=h[0],d.height=d.width/u):(d.height=h[1],d.width=d.height*u),d.minX=f[0]-d.width/2,d.minY=f[1]-d.height/2;var g=l.getMatrix();g||(g=[1,0,0,0,1,0,0,0,1]);var m=Tf.invert([1,0,0,0,1,0,0,0,1],g),_=Noe({x:d.minX,y:d.minY},m),D=o.getCanvasByPoint(_.x,_.y),L=this.get("viewport");L||this.initViewport();var O=a/d.width,Z=O*n,le=O*i,pe=n*-D.x/d.width,Ee=i*-D.y/d.height,Re=pe+Z,Ve=Ee+le;pe<0&&(Z+=pe,pe=0),Re>n&&(Z-=Re-n),Ee<0&&(le+=Ee,Ee=0),Ve>i&&(le-=Ve-i),this.set("ratio",t),Fi(L,{left:"".concat(pe,"px"),top:"".concat(Ee,"px"),width:"".concat(Z,"px"),height:"".concat(le,"px")})}},e.prototype.init=function(){this.initContainer()},e.prototype.initContainer=function(){var t=this,n=t.get("graph"),i=n.get("width"),a=n.get("height")/i,s=t.get("className"),u=t.get("container"),l=t.get("width"),c=t.get("height");!l&&!c&&(l=200),l?t.set("height",c=a*l):t.set("width",l=1/a*c);var f=ra("<div class='".concat(s,"' style='width: ").concat(l,"px; height: ").concat(c,"px; overflow: hidden; position: relative;'></div>"));(0,ue.isString)(u)&&(u=document.getElementById(u)),u?u.appendChild(f):n.get("container").appendChild(f),t.set("container",f);var h=ra('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');f.appendChild(h);var d=ra('<span style="display: table-cell; vertical-align: middle; "></span>');h.appendChild(d),t.set("containerDOM",h),t.set("containerSpan",d);var g=ra('<img alt="" src="'.concat(this.get("graphImg"),'" style="display: inline-block; user-select: none;" draggable="false" />'));t.set("imgDOM",g),t.updateImgSize(),d.appendChild(g),t.updateCanvas()},e.prototype.updateImgSize=function(){var t=this,n=t.get("imgDOM"),i=t.get("width"),o=t.get("height");n.onload=function(){var a=function Loe(r,e){var t,n;if(r.naturalWidth)t=r.naturalWidth,n=r.naturalHeight;else{var i=new Image;i.src=r.src,i.onload=function(){e&&e(i.width,i.height)}}return[t,n]}(n);a[0]>a[1]?n.width=i:n.height=o}},e.prototype.updateCanvas=function(){if(this.get("refresh")){var n=this.get("graph");if(!n.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var i=this.get("width"),o=n.get("canvas").getCanvasBBox();this.set("ratio",i/o.width),this.updateViewport()}}},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateGraphImg=function(t){var n=this;n.get("imgDOM").remove(),n.set("graphImg",t);var o=ra('<img alt="" src="'.concat(t,'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>'));n.set("imgDOM",o),o.src=t,n.updateImgSize(),n.get("containerSpan").appendChild(o),n.updateCanvas()},e.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)},e}(Uu);const Roe=koe;var Foe=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(i[a]=o[a])},r(t,n)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),FC=function(){return FC=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},FC.apply(this,arguments)},Boe=su.distance,M3={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},joe=function(r){function e(t){return r.call(this,t)||this}return Foe(e,r),e.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:(0,ue.clone)(M3),showLabel:"edge",scaleRBy:"wheel"}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"}}return t},e.prototype.init=function(){var t=this,n=t.get("showLabel"),o="edge"===n||"both"===n;t.set("showNodeLabel","node"===n||"both"===n),t.set("showEdgeLabel",o),t.get("shouldShow")||t.set("shouldShow",function(){return!0})},e.prototype.createDelegate=function(t){var n=this,i=n.get("delegate");(!i||i.destroyed)&&(n.filter(t),(i=n.get("delegate")).on("dragstart",function(o){}),i.on("drag",function(o){n.filter(o)}),"wheel"===this.get("scaleRBy")&&i.on("mousewheel",function(o){n.scaleRByWheel(o)}))},e.prototype.scaleRByWheel=function(t){var n=this;if(t&&t.originalEvent){t.preventDefault&&t.preventDefault();var o,i=n.get("graph"),a=n.get("delegate");(a?(a.attr("x"),a.attr("y"),1):void 0)||i.getPointByClient(t.clientX,t.clientY),o=t.originalEvent.wheelDelta<0?.95:1/.95;var l=n.get("maxR"),c=n.get("minR"),f=n.get("r");(f>(l||i.get("height"))&&o>1||f<(c||.05*i.get("height"))&&o<1)&&(o=1),n.set("r",f*=o),n.filter(t)}},e.prototype.filter=function(t){var n=this,i=n.get("graph"),o=i.getNodes(),a={},s=n.get("r"),u=n.get("type"),l={x:t.x,y:t.y};n.updateDelegate(l,s);var c=n.get("shouldShow"),f=n.get("vShapes");f&&f.forEach(function(D){D.remove(),D.destroy()}),f=[],o.forEach(function(D){var L=D.getModel();Boe({x:L.x,y:L.y},l)<s&&(a[L.id]=D)});var h=i.getEdges(),d=[];h.forEach(function(D){var L=D.getModel(),O=L.source,Z=L.target;c(L)&&("only-source"===u||"one"===u?a[O]&&!a[Z]&&d.push(D):"only-target"===u||"one"===u?a[Z]&&!a[O]&&d.push(D):"both"===u&&a[O]&&a[Z]&&d.push(D))});var g=n.get("showNodeLabel"),m=n.get("showEdgelabel"),_=i.get("group");d.forEach(function(D){D.get("group").get("children").forEach(function(O){var Z=O.get("type"),le=_.addShape(Z,{attrs:O.attr()});f.push(le),g&&"text"===Z&&le.set("visible",!0)})}),Object.keys(a).forEach(function(D){var O=a[D].get("group").clone();if(_.add(O),f.push(O),m)for(var Z=O.get("children"),le=0;le<Z.length;le++){var pe=Z[le];"text"===pe.get("type")&&pe.set("visible",!0)}}),n.set("vShapes",f)},e.prototype.updateParams=function(t){var n=this,i=t.r,o=t.trigger,a=t.minR,s=t.maxR,u=t.scaleRBy,l=t.showLabel,c=t.shouldShow;if(isNaN(t.r)||n.set("r",i),isNaN(s)||n.set("maxR",s),isNaN(a)||n.set("minR",a),("mousemove"===o||"click"===o)&&n.set("trigger",o),"wheel"===u||"unset"===u){n.set("scaleRBy",u),n.get("delegate").remove(),n.get("delegate").destroy();var f=n.get("dPercentText");f&&(f.remove(),f.destroy())}("node"===l||"both"===l)&&n.set("showNodeLabel",!0),("edge"===l||"both"===l)&&n.set("showEdgeLabel",!0),c&&n.set("shouldShow",c)},e.prototype.updateDelegate=function(t,n){var i=this,o=i.get("graph"),a=i.get("delegate");if(!a||a.destroyed){var s=o.get("group"),u=i.get("delegateStyle")||M3;a=s.addShape("circle",{attrs:FC({r:n,x:t.x,y:t.y},u),name:"lens-shape",draggable:!0}),"drag"!==this.get("trigger")&&"wheel"===this.get("scaleRBy")&&a.on("mousewheel",function(l){i.scaleRByWheel(l)})}else a.attr({x:t.x,y:t.y,r:n});i.set("delegate",a)},e.prototype.clear=function(){var t=this,n=t.get("vShapes");n&&n.forEach(function(o){o.remove(),o.destroy()}),t.set("vShapes",n=[]);var i=t.get("delegate");i&&!i.destroyed&&(i.remove(),i.destroy())},e.prototype.destroy=function(){this.clear()},e}(Uu);const zoe=joe;var Goe=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(i[a]=o[a])},r(t,n)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Uoe=su.pointLineDistance,Voe={stroke:"#FA8C16",lineWidth:1},Hoe=function(r){function e(t){return r.call(this,t)||this}return Goe(e,r),e.prototype.getDefaultCfgs=function(){return{line:Voe,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},e.prototype.init=function(){},e.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},e.prototype.onDragStart=function(){this.initBoxLine()},e.prototype.onDrag=function(t){var n=t.item,o=(n.get("delegateShape")||n).getBBox(),a=n.getModel();this.show({x:o.minX+(a.x-o.x),y:o.minY+(a.y-o.y)},{width:o.width,height:o.height})},e.prototype.onDragEnd=function(){this.destory()},e.prototype.initBoxLine=function(){var t=this._cfgs,n=t.horizontalLines,i=t.verticalLines,o=t.itemAlignType;this.get("graph").getNodes().forEach(function(u){var l=u.getBBox(),c=u.get("id");!0===o||"horizontal"===o?(n["".concat(c,"tltr")]=[l.minX,l.minY,l.maxX,l.minY,u],n["".concat(c,"lcrc")]=[l.minX,l.centerY,l.maxX,l.centerY,u],n["".concat(c,"blbr")]=[l.minX,l.maxY,l.maxX,l.maxY,u]):"center"===o&&(n["".concat(c,"lcrc")]=[l.minX,l.centerY,l.maxX,l.centerY,u]),!0===o||"vertical"===o?(i["".concat(c,"tlbl")]=[l.minX,l.minY,l.minX,l.maxY,u],i["".concat(c,"tcbc")]=[l.centerX,l.minY,l.centerX,l.maxY,u],i["".concat(c,"trbr")]=[l.maxX,l.minY,l.maxX,l.maxY,u]):"center"===o&&(i["".concat(c,"tcbc")]=[l.centerX,l.minY,l.centerX,l.maxY,u])})},e.prototype.show=function(t,n){var i=(0,ue.mix)({},t);return this.itemAlign(t,n,i),t},e.prototype.itemAlign=function(t,n,i){var o=this,a=this._cfgs,s=a.horizontalLines,u=a.verticalLines,l=a.tolerance,c={x:i.x+n.width/2,y:i.y},f={x:i.x+n.width/2,y:i.y+n.height/2},h={x:i.x+n.width/2,y:i.y+n.height},d={x:i.x,y:i.y+n.height/2},g={x:i.x+n.width,y:i.y+n.height/2},m=[],_=[],D=null;if(this.clearAlignLine(),(0,ue.each)(s,function(O){O[4].isVisible&&(m.push(o.getLineDisObject(O,c)),m.push(o.getLineDisObject(O,f)),m.push(o.getLineDisObject(O,h)))}),(0,ue.each)(u,function(O){O[4].isVisible&&(_.push(o.getLineDisObject(O,d)),_.push(o.getLineDisObject(O,f)),_.push(o.getLineDisObject(O,g)))}),m.sort(function(O,Z){return O.dis-Z.dis}),_.sort(function(O,Z){return O.dis-Z.dis}),0!==m.length&&m[0].dis<l){t.y=m[0].line[1]-m[0].point.y+i.y,D={type:"item",horizontals:[m[0]]};for(var L=1;L<3;L++)m[0].dis===m[L].dis&&D.horizontals.push(m[L])}if(0!==_.length&&_[0].dis<l)for(t.x=_[0].line[0]-_[0].point.x+i.x,D?D.verticals=[_[0]]:D={type:"item",verticals:[_[0]]},L=1;L<3;L++)_[0].dis===_[L].dis&&D.verticals.push(_[L]);D&&(D.bbox=n,this.addAlignLine(D))},e.prototype.addAlignLine=function(t){var n=t.bbox,i=t.type,o=t.horizontals,a=t.verticals,s=this._cfgs,u=s.line,l=s.alignLines,f=this.get("graph").get("group");"item"===i&&(o&&(0,ue.each)(o,function(h){var _,D,d=h.line,g=h.point;g.x<(d[0]+d[2])/2?(_=g.x-n.width/2,D=Math.max(d[0],d[2])):(_=g.x+n.width/2,D=Math.min(d[0],d[2]));var L=(0,ue.mix)({x1:_,y1:d[1],x2:D,y2:d[1]},u),O=f.addShape("line",{attrs:L,capture:!1});l.push(O)}),a&&(0,ue.each)(a,function(h){var _,D,d=h.line,g=h.point;g.y<(d[1]+d[3])/2?(_=g.y-n.height/2,D=Math.max(d[1],d[3])):(_=g.y+n.height/2,D=Math.min(d[1],d[3]));var L=(0,ue.mix)({x1:d[0],y1:_,x2:d[0],y2:D},u),O=f.addShape("line",{attrs:L,capture:!1});l.push(O)}))},e.prototype.getLineDisObject=function(t,n){return{line:t,point:n,dis:Uoe(t,n)}},e.prototype.getContainer=function(){return this.get("container")},e.prototype.clearAlignLine=function(){var t=this._cfgs.alignLines;(0,ue.each)(t,function(n){n.remove()}),t.length=0},e.prototype.destory=function(){var t=this._cfgs,n=t.horizontalLines,i=t.verticalLines;this.get("graph").getNodes().forEach(function(s){var u=s.get("id");delete n["".concat(u,"tltr")],delete n["".concat(u,"lcrc")],delete n["".concat(u,"blbr")],delete i["".concat(u,"tlbl")],delete i["".concat(u,"tcbc")],delete i["".concat(u,"trbr")]}),this.clearAlignLine()},e}(Uu);const Woe=Hoe;var $oe=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(i[a]=o[a])},r(t,n)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),xa=function(){return xa=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},xa.apply(this,arguments)},Yoe=["click","mouseenter"],Xoe=function(r){function e(t){return r.call(this,t)||this}return $oe(e,r),e.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},e.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var t=this.get("filter")||{};t.multiple&&"mouseenter"===t.trigger&&this.set("multiple",!1);var i=this.get("align");if(!i){var o=this.get("position").split("-");o.includes("left")&&(i="left"),i=o.includes("right")?"right":"center",this.set("align",i)}var s=this.get("graph").get("container"),u=ra("<div class='g6-legend-container' style=\"position: absolute;\"></div>");s.appendChild(u),this.set("container",u);var l=this.render();Fi(u,this.getContainerPos(l)),this.bindEvents()},e.prototype.getContainerPos=function(t){void 0===t&&(t=[0,0]);var i=this.get("graph"),o=this.get("offsetX"),a=this.get("offsetY"),s=this.get("margin"),u=this.get("position").split("-"),l={top:0,right:1,bottom:2,left:3},h={left:(i.getWidth()-t[0])/2+0,top:(i.getHeight()-t[1])/2+0};return u.forEach(function(d){var g=s[l[d]],m=d;switch(d){case"top":case"left":g+=0;break;case"bottom":g=i.getHeight()-t[1]-g+0,m="top";break;default:g=i.getWidth()-t[0]-g+0,m="left"}h[m]=g}),h.top+=a+i.getContainer().offsetTop,h.left+=o+i.getContainer().offsetLeft,Object.keys(h).forEach(function(d){h[d]="".concat(h[d],"px")}),h},e.prototype.bindEvents=function(){var t=this,n=t.get("filter");if(n&&n.enable){var i=n.trigger||"click";Yoe.includes(i)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),i="click");var o=t.get("legendCanvas");"mouseenter"===i?(o.on("node-container:mouseenter",function(a){return t.filterData(a)}),o.on("node-container:mouseleave",function(a){t.clearFilter(),t.clearActiveLegend()})):(o.on("node-container:click",function(a){return t.filterData(a)}),o.on("click",function(a){a.target&&a.target.isCanvas&&a.target.isCanvas()&&(t.clearFilter(),t.clearActiveLegend())}))}},e.prototype.changeData=function(t){this.set("data",t);var n=this.render();Fi(this.get("container"),this.getContainerPos(n))},e.prototype.activateLegend=function(t){var n=this.get("filter"),i=n?.multiple;i||this.clearActiveLegend();var o=t.get("parent");o.get("active")?(o.set("active",!1),this.findLegendItemsByState("active").length&&o.set("inactive",!0)):(o.set("inactive",!1),o.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach(function(f){f.set("inactive",!0)}):this.clearActiveLegend();var a=n?.legendStateStyles||{},s=a?.inactive||{opacity:.5,"text-shape":{opacity:.5}},u=s["text-shape"]||{};this.findLegendItemsByState("inactive").forEach(function(f){var h=f.get("children"),d=h[0],g=h[1];d.attr(xa(xa({},d.get("oriAttrs")),s)),g.attr(xa(xa({},g.get("oriAttrs")),u))});var l=a?.active||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},c=l["text-shape"]||{};this.findLegendItemsByState("active").forEach(function(f){var h=f.get("children"),d=h[0],g=h[1];d.attr(xa(xa({},d.get("oriAttrs")),l)),g.attr(xa(xa({},g.get("oriAttrs")),c))})},e.prototype.findLegendItemsByState=function(t,n,i){void 0===n&&(n="all"),void 0===i&&(i=!0);var o=this.get("legendCanvas").find(function(u){return"root"===u.get("name")}),a=o.find(function(u){return"node-group"===u.get("name")}),s=o.find(function(u){return"edge-group"===u.get("name")});return"node"===n?a.get("children").filter(function(u){return!!u.get(t)===i}):"edge"===n?s.get("children").filter(function(u){return!!u.get(t)===i}):a.get("children").filter(function(u){return!!u.get(t)===i}).concat(s.get("children").filter(function(u){return!!u.get(t)===i}))},e.prototype.clearActiveLegend=function(){var n=this.get("legendCanvas").find(function(o){return"root"===o.get("name")});[n.find(function(o){return"node-group"===o.get("name")}),n.find(function(o){return"edge-group"===o.get("name")})].forEach(function(o){o.get("children").forEach(function(a){a.set("active",!1),a.set("inactive",!1);var s=a.get("children"),u=s[0],l=s[1];u.attr(u.get("oriAttrs")),l.attr(l.get("oriAttrs"))})})},e.prototype.filterData=function(t){var n=this.get("filter"),i=n?.filterFunctions;if(n&&i){var o=this.get("legendCanvas"),a=this.get("graph"),s=n.graphActiveState||"active",u=n.graphInactiveState||"inactive",l=n.multiple;this.clearFilter(),l||this.clearActiveLegend(),this.activateLegend(t.target);var c=o.find(function(D){return"root"===D.get("name")}),f=c.find(function(D){return"node-group"===D.get("name")}),h=c.find(function(D){return"edge-group"===D.get("name")}),d=f.get("children").filter(function(D){return D.get("active")}),g=h.get("children").filter(function(D){return D.get("active")}),m=0,_=["getNodes","getEdges"];_.forEach(function(D){a[D]().forEach(function(L){var O=!1;("getNodes"===D?d:g).forEach(function(le){var pe=i[le.get("id")];O=O||pe(L.getModel())}),O?(a.setItemState(L,u,!1),a.setItemState(L,s,!0),m++):(a.setItemState(L,s,!1),a.setItemState(L,u,!0))})}),m||_.forEach(function(D){a[D]().forEach(function(L){a.clearItemStates(L,[u])})})}},e.prototype.clearFilter=function(){var t=this.get("graph"),n=this.get("filter");if(n){var i=n.graphActiveState||"active",o=n.graphInactiveState||"inactive";t.getNodes().forEach(function(a){t.clearItemStates(a,[i,o])}),t.getEdges().forEach(function(a){t.clearItemStates(a,[i,o])})}},e.prototype.render=function(){var t=this;this.processData();var n=this.get("legendCanvas");n?n.clear():n=new Nh({container:this.get("container"),width:200,height:200});var i=n.addGroup({name:"root"}),o=i.addGroup({name:"node-group"}),a=i.addGroup({name:"edge-group"});this.set("legendCanvas",n);var s=this.get("itemsData"),l=[o,a];["nodes","edges"].forEach(function(kt,Ln){s[kt].forEach(function(Kn){var mn,Vn,On=l[Ln].addGroup({id:Kn.id,name:"node-container"}),rr=Kn.type,vr=t.getShapeSize(Kn),Sr=vr.width,Zr=vr.height,ni=vr.r,ji=t.getStyle(kt.substr(0,4),Kn);switch(Kn.type){case"circle":default:Vn={r:ni,x:0,y:0};break;case"rect":Vn={width:Sr,height:Zr,x:-Sr/2,y:-Zr/2};break;case"ellipse":Vn={rx:Sr,ry:Zr,x:0,y:0},rr="ellipse";break;case"line":Vn={x1:-Sr/2,y1:0,x2:Sr/2,y2:0},rr="line";break;case"quadratic":Vn={path:[["M",-Sr/2,0],["Q",0,Sr/2,Sr/2,0]]},rr="path";break;case"cubic":Vn={path:[["M",-Sr/2,0],["C",-Sr/6,Sr/2,Sr/6,-Sr/2,Sr/2,0]]},rr="path";break;case"diamond":Vn={path:[["M",0,-Zr],["L",Sr,0],["L",0,Zr],["L",-Sr,0],["Z"]]},rr="path";break;case"triangle":Vn={path:[["M",-Sr,Zr],["L",0,-Zr],["L",Sr,Zr],["Z"]]},rr="path";break;case"star":Vn={path:su.getStarPath(3*ni,1.2*ni)},rr="path"}var Wi=On.addShape(rr,{attrs:xa(xa({},Vn),ji),name:"".concat(Kn.type,"-node-keyShape"),oriAttrs:xa({opacity:1},ji)});if(Kn.label){var po=Wi.getBBox(),io=(null===(mn=Kn.labelCfg)||void 0===mn?void 0:mn.style)||{},Xo=xa({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},io);On.addShape("text",{attrs:xa({x:po.maxX+4,y:0,text:Kn.label},Xo),className:"legend-label",name:"".concat(Kn.type,"-node-text"),oriAttrs:Xo})}})});var f,c=this.get("padding"),h=i.find(function(kt){return"title-container"===kt.get("name")}),d={height:0,maxY:0,width:0};if(this.get("title")){h||(h=i.addGroup({name:"title-container"}));var g={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:c[0]},m=this.get("titleConfig")||{},_=Object.assign(g,m.style||{});f=h.addShape("text",{attrs:xa({text:this.get("title")},_)}),d=h.getCanvasBBox(),h.setMatrix([1,0,0,0,1,0,m.offsetX,m.offsetY,1])}this.layoutItems();var D=i.getCanvasBBox(),L=o.getCanvasBBox(),O=L.minX<0?Math.abs(L.minX)+c[3]:c[3],Z=d.maxY<L.minY?Math.abs(d.maxY-L.minY)+c[0]:d.maxY+c[0],le=[1,0,0,0,1,0,O,Z,1];o.setMatrix(le);var pe=[(D=i.getCanvasBBox()).minX+D.width+c[1],D.minY+D.height+c[2]];if(f){m=xa({position:"center",offsetX:0,offsetY:0},this.get("titleConfig")),d=h.getCanvasBBox();var Ee=h.getMatrix()||[1,0,0,0,1,0,0,0,1];"center"===m.position?Ee[6]=pe[0]/2+m.offsetX:"right"===m.position?(Ee[6]=pe[0]-c[3]+m.offsetX,f.attr({textAlign:"right"})):(Ee[6]=c[3]+m.offsetX,f.attr({textAlign:"left"})),h.setMatrix(Ee),d=h.getCanvasBBox(),O=L.minX<0?Math.abs(L.minX)+c[3]:c[3],Z=L.minY<d.maxY?Math.abs(d.maxY-L.minY)+c[0]:d.maxY+c[0],o.setMatrix(le=[1,0,0,0,1,0,O,Z,1]);var Re=[1,0,0,0,1,0,O,Z,1];"vertical"===this.get("layout")?Re[6]+=L.maxX+this.get("horiSep"):Re[7]+=L.maxY+this.get("vertiSep"),a.setMatrix(Re)}else{L=o.getCanvasBBox();var Ve=[1,0,0,0,1,0,0,0,1];"vertical"===this.get("layout")?Ve[6]+=le[6]+L.maxX+this.get("horiSep"):Ve[7]+=le[7]+L.maxY+this.get("vertiSep"),a.setMatrix(Ve)}D=i.getCanvasBBox(),L=o.getCanvasBBox(),le=o.getMatrix()||[1,0,0,0,1,0,0,0,1];var Ue=a.getMatrix()||[1,0,0,0,1,0,0,0,1],at=a.getCanvasBBox();pe=[Math.max(L.width+le[6],at.width+Ue[6])+c[1],Math.max(L.height+le[7],at.height+Ue[7])+c[2]],n.changeSize(pe[0],pe[1]);var _t=this.get("containerStyle"),vn=i.getMatrix()||[1,0,0,0,1,0,0,0,1],Cn=su.invertMatrix({x:0,y:0},vn);return i.addShape("rect",{attrs:xa({x:Cn.x+(_t.lineWidth||1),y:Cn.y+(_t.lineWidth||1),width:pe[0]-2*(_t.lineWidth||1),height:pe[1]-2*(_t.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},_t),name:"legend-back-rect",capture:!1}).toBack(),pe},e.prototype.layoutItems=function(){var t=this.get("legendCanvas"),n=this.get("horiSep"),i=this.get("vertiSep"),o=this.get("layout"),a=this.get("align"),s=[0,0],u=t.find(function(Z){return"root"===Z.get("name")}),l=u.find(function(Z){return"node-group"===Z.get("name")}),c=u.find(function(Z){return"edge-group"===Z.get("name")}),f={min:0,max:-1/0},h=-1/0;l.get("children").forEach(function(Z,le){0===le&&(f.min=s[0]);var pe=Z.get("children")[0],Ee=Z.getCanvasBBox(),Re=pe.getBBox(),Ve=Re.width,Ue=Re.height,at=0,_t=0,vn=0;"vertical"===o?(_t=s[1],s[0]=(vn=s[0]+Ve/2)+Ee.height+i,at=Ee.maxX+_t+Ve/2):(vn=s[1],s[0]=(_t=s[0]+Ve/2)+Ee.width+n,at=Ee.maxY+vn+Ue/2),s[0]>f.max&&(f.max=s[0]),at>h&&(h=at),Z.setMatrix([1,0,0,0,1,0,_t,vn,1])});var d=f.max-f.min,g={min:0,max:-1/0},m=l.getCanvasBBox();if(s[0]=0,s[1]="vertical"===o?m.maxX+n:m.maxY+i,c.get("children").forEach(function(Z,le){0===le&&(g.min=s[0]);var pe=Z.get("children")[0],Ee=Z.getCanvasBBox(),Re=pe.getBBox(),Ve=Re.width,Ue=Re.height,at=0,_t=0;"vertical"===o?(at=s[1],s[0]=(_t=s[0])+Ee.height+i,Z.setMatrix([1,0,0,0,1,0,0,_t+Ue/2,1])):(_t=s[1],s[0]=(at=s[0])+Ee.width+n,Z.setMatrix([1,0,0,0,1,0,at+Ve/2,0,1])),s[0]>g.max&&(g.max=s[0])}),a&&""!==a&&"left"!==a){var D=d-(g.max-g.min),L="center"===a?Math.abs(D)/2:Math.abs(D);(D<0?l:c).get("children").forEach(function(Z){var le=Z.getMatrix()||[1,0,0,0,1,0,0,0,1];"vertical"===o?le[7]+=L:le[6]+=L,Z.setMatrix(le)})}},e.prototype.processData=function(){var t=this.get("data"),n={nodes:[],edges:[]};t.nodes&&(t.nodes.sort(function(i,o){return i.order-o.order}),t.nodes.forEach(function(i){var o,a,s,u,l,c=i.size||[(null===(o=i.style)||void 0===o?void 0:o.width)||(null===(a=i.style)||void 0===a?void 0:a.r)||8,(null===(s=i.style)||void 0===s?void 0:s.height)||(null===(u=i.style)||void 0===u?void 0:u.r)||8],f=(null===(l=i.labelCfg)||void 0===l?void 0:l.style)||{};n.nodes.push({id:i.id||(0,ue.uniqueId)(),type:i.type||"circle",style:xa({},i.style),order:i.order,label:i.label,itemType:"node",size:c,labelCfg:{position:"right",style:xa({fontFamily:"Arial"},f)}})})),t.edges&&(t.edges.sort(function(i,o){return i.order-o.order}),t.edges.forEach(function(i){var o,a,s=i.type||"line";"cubic-horizontal"===i.type&&(s="cubic");var u=(null===(o=i.labelCfg)||void 0===o?void 0:o.style)||{},l=i.size||[(null===(a=i.style)||void 0===a?void 0:a.width)||8,1];n.edges.push({id:i.id||(0,ue.uniqueId)(),type:s,size:l,style:xa({lineWidth:(0,ue.isArray)(l)?l[1]:1},i.style),order:i.order,label:i.label,itemType:"edge",labelCfg:{position:"right",style:xa({fontFamily:"Arial"},u)}})})),this.set("itemsData",n)},e.prototype.getContainer=function(){return this.get("container")},e.prototype.formatArray=function(t){var n=this.get(t);if((0,ue.isNumber)(n))this.set(t,[n,n,n,n]);else if((0,ue.isArray)(n))switch(n.length){case 0:this.set(t,[0,0,0,0]);break;case 1:this.set(t,[n[0],n[0],n[0],n[0]]);break;case 2:this.set(t,[n[0],n[1],n[0],n[1]]);break;case 3:this.set(t,[n[0],n[1],n[2],n[1]])}return this.get(t)},e.prototype.getShapeSize=function(t){var n,i,o;return t.size&&((0,ue.isArray)(t.size)?(n=t.size[0],i=t.size[1]||t.size[0],o=t.size[0]/2):(0,ue.isNumber)(t.size)&&(n=t.size,i=t.size,o=t.size/2)),t.style&&(t.style.width&&(n=t.style.width),t.style.height&&(i=t.style.height),t.style.r&&(o=t.style.r)),o||(o=5),n||(n=o),i||(i=o),{width:n,height:i,r:o}},e.prototype.getStyle=function(t,n){return xa(xa({},"node"===t?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1}),n.style||{})},e.prototype.destroy=function(){this.get("legendCanvas")?.destroy();var i=this.get("graph").get("container"),o=this.get("container");i.removeChild(o)},e}(Uu);const qoe=Xoe;var Koe=function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(i[a]=o[a])},r(t,n)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),jl=function(){return jl=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},jl.apply(this,arguments)},C3=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t};typeof document<"u"&&Vw()("\n  .g6-annotation-container {\n    background-color: rgba(255, 255, 255, 0.3);\n    padding: 8px;\n  }\n  .g6-annotation-wrapper {\n    background-color: #fff;\n    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);\n  }\n  .g6-annotation-header-wapper {\n    height: fit-content;\n    width: 100%;\n    background-color: #5B8FF9;\n    display: inline-flex;\n    cursor: move;\n  }\n  .g6-annotation-title {\n    margin: 4px 40px 4px 8px;\n    cursor: text;\n    min-width: 32px;\n  }\n  .g6-annotation-collapse {\n    margin: 4px;\n    cursor: pointer;\n  }\n  .g6-annotation-expand {\n    margin: 4px;\n    cursor: pointer;\n  }\n  .g6-annotation-close {\n    margin: 4px 8px 4px 0;\n    cursor: pointer;\n  }\n  .g6-annotation-content {\n    padding: 8px;\n    width: fit-content;\n    cursor: text;\n    word-break: break-all;\n    min-width: 32px;\n  }\n  .g6-annotation-title-input-wrapper {\n    margin: 4px 40px 4px 8px;\n  }\n  .g6-annotation-content-input {\n    height: 100%;\n    word-break: break-all;\n  }\n  .g6-annotation-content-input-wrapper {\n    margin: 8px;\n    height: 100%;\n  }\n");var A3="canvas-annotation",Zoe=function(r){function e(t){return r.call(this,t)||this}return Koe(e,r),e.prototype.getDefaultCfgs=function(){return{trigger:"click",editable:!0,itemHighlightState:"highlight",linkHighlightStyle:{shadowColor:"#5B8FF9",shadowBlur:10},cardCfg:{minHeight:60,width:"fit-content",height:"fit-content",collapseType:"minimize",closeType:"hide",borderRadius:5,maxTitleLength:20}}},e.prototype.getEvents=function(){var t={viewportchange:"updateLinks",afterlayout:"updateLinks",aftergraphrefreshposition:"updateLinks",afterupdateitem:"updateLink",afterchangedata:"onGraphDataChange",afteritemvisibilitychange:"onGraphItemVisibilityChange"};return"click"===this.get("trigger")&&(t=jl(jl({},t),{"node:click":"showAnnotation","edge:click":"showAnnotation"})),t},e.prototype.getDOMContent=function(t){if(!this.destroyed){var n=t.collapsed,i=t.maxWidth,o=t.title,a=void 0===o?"":o,s=t.content,l=t.borderRadius,c=void 0===l?5:l,f=n?"<p class='g6-annotation-expand'>+</p>":"<p class='g6-annotation-collapse'>-</p>",h=n?"":" <p class='g6-annotation-content'>".concat(void 0===s?"":s,"</p>"),g=n?"".concat(c,"px"):"".concat(c,"px ").concat(c,"px 0 0");return'<div class="g6-annotation-wrapper" style="border-radius: '.concat(c,"px; max-width: ").concat(i,'px">\n        <div\n          class="g6-annotation-header-wapper"\n          style="border-radius: ').concat(g,";\"\n        >\n          <h4 class='g6-annotation-title'>").concat(a,"</h4>\n          ").concat(f,"\n          ").concat("<p class='g6-annotation-close'>x</p>","\n        </div>\n        ").concat(h,"\n      </div>")}},e.prototype.init=function(){var t=this;if(!t.destroyed){var i=t.get("graph").getContainer(),o=t.get("container");this.get("containerCfg")?(o=this.createContainer(),i.appendChild(o)):o=i,this.set("container",o);var s=i.getBoundingClientRect(),u=new Nh({container:i,width:s.right-s.left,height:s.bottom-s.top});Fi(u.get("el"),{position:"absolute",top:0,left:0,pointerEvents:"none"}),window.addEventListener("resize",(0,ue.debounce)(function(){return t.resizeCanvas(t)},100));var l=u.addGroup({id:"annotation-link-group"});t.set("linkGroup",l),t.set("canvas",u),t.get("getTitle")||t.set("getTitle",function(f){var h,d=(null===(h=f?.getModel)||void 0===h?void 0:h.call(f))||{};return d.label||d.id||"-"}),t.get("getContent")||t.set("getContent",function(f){var h,d;if(!f)return"-";var g=(null===(h=f.getModel)||void 0===h?void 0:h.call(f))||{},m=g.label,_=g.id,D=null===(d=f.getType)||void 0===d?void 0:d.call(f),L=D?"".concat(D,": "):"";return"".concat(L).concat(m||_||"")});var c=t.get("defaultData");c&&this.readData(c)}},e.prototype.createContainer=function(){var t=this;if(!this.destroyed){var n=this.get("containerCfg"),i=this.get("graph"),o=i.getContainer(),a=o.getBoundingClientRect(),s=a.left,l=a.top,f=a.bottom-l,h=a.right-s,d=n.position,g=void 0===d?"top":d,m=n.offsetX,_=void 0===m?0:m,D=n.offsetY,L=void 0===D?0:D,O=C3(n,["position","offsetX","offsetY"]),Z=n.height,le=void 0===Z?"fit-content":Z,pe=n.width,Ee=void 0===pe?i.getWidth():pe;"100%"===le&&(le=f),"100%"===Ee&&(Ee=h);var Re="unset",Ve="unset",Ue={};switch(g){case"right":Re="".concat(f,"px"),(Ue={top:0,right:0}).right+=s+_,Ue.top+=l+L;break;case"bottom":Ve="".concat(h,"px"),(Ue={bottom:0,left:0}).left+=s+_,Ue.bottom+=l+L;break;case"top":Ve="".concat(h,"px");case"left":Re="".concat(f,"px");default:(Ue={top:0,left:0}).left+=s+_,Ue.top+=l+L}Object.keys(Ue).forEach(function(_t){Ue[_t]="".concat(Ue[_t],"px")});var at=ra("<div class='".concat(n.className," g6-annotation-container'></div>"));return Fi(at,jl(jl({position:"absolute",display:"top"===g||"bottom"===g?"inline-flex":"unset",width:(0,ue.isNumber)(Ee)?"".concat(Ee,"px"):Ee,height:(0,ue.isNumber)(le)?"".concat(le,"px"):le,maxHeight:Re,maxWidth:Ve,overflow:"scroll"},Ue),O)),o.appendChild(at),at.addEventListener("scroll",function(_t){t.updateLinks()}),at}},e.prototype.resizeCanvas=function(t){clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout(function(){if(t&&!t.destroyed){var n=t.get("container").getBoundingClientRect(),i=n.right-n.left,o=n.bottom-n.top;t.get("canvas").changeSize(i,o),t.updateOutsideCards(t)}},250)},e.prototype.updateOutsideCards=function(t){var n=t||this,i=n.get("cardInfoMap")||{},o=n.get("graph"),a=o.getPointByCanvas(0,0),s=o.getPointByCanvas(o.getWidth(),o.getHeight()),u=o.getClientByPoint(a.x,a.y),l=u.x,c=u.y,f=o.getClientByPoint(s.x,s.y),h=f.x,d=f.y;Object.values(i).forEach(function(g){var m=g.card;if(m){var _=m.style,D=ap(_.left),L=ap(_.top),O=m.getBoundingClientRect(),Z=O.width,le=O.height,pe=D,Ee=L;D+Z>h-l&&(pe=h-l-Z),D<0&&(pe=0),L+le>d-c&&(Ee=d-c-le),L<0&&(Ee=0),Fi(m,{left:"".concat(pe,"px"),top:"".concat(Ee,"px")})}}),n.updateLinks()},e.prototype.showAnnotation=function(t){this.destroyed||this.toggleAnnotation(t.item)},e.prototype.hideCards=function(){var t=this;if(!t.destroyed){var n=t.get("cardInfoMap")||{};Object.keys(n).forEach(function(i){t.hideCard(i)})}},e.prototype.toggleAnnotation=function(t,n){var i,o;void 0===n&&(n={});var a=this;if(!a.destroyed){var s=a.get("cardInfoMap")||{},u=a.get("graph"),l=a.get("container"),c=a.get("containerCfg"),f=Object.assign({},a.get("cardCfg")||{},n),h=f.minHeight,d=f.minWidth,g=f.width,m=f.height,_=f.collapsed,D=void 0!==_&&_,L=f.x,O=f.y,Z=f.title,le=f.content,pe=f.maxTitleLength,Ee=f.defaultBegin,Re=C3(f,["minHeight","minWidth","width","height","collapsed","x","y","title","content","maxTitleLength","defaultBegin"]),Ve=a.get("linkGroup"),Ue=this.get("rows")||[[]],at=null===(i=t.isCanvas)||void 0===i?void 0:i.call(t),_t=at?A3:t.getID(),vn=s[_t]||{},Cn=vn.card,Tt=vn.link,kt=vn.x,Ln=vn.y,Kn=vn.title,mn=vn.content,On=this.get("getTitle"),Vn=this.get("getContent"),rr=this.get("getContentPlaceholder")||function(){return""},vr=this.get("getTitlePlaceHolder")||function(){return""},Sr=rr(t),Zr=vr(t),ni=ra(this.getDOMContent(jl({itemId:_t,collapsed:D,title:(null===(o=Kn||Z||On?.(t))||void 0===o?void 0:o.substr(0,pe))||Zr,content:mn||le||Vn?.(t)||Sr},Re))),ji=(0,ue.isNumber)(h)?"".concat(h,"px"):h;Fi(ni,{minHeight:D?"unset":ji,minWidth:(0,ue.isNumber)(d)?"".concat(d,"px"):d,height:m,width:g});var po,Wi=!!Cn;if(Wi?(Tt?.remove(!0),l.replaceChild(ni,Cn)):l.appendChild(ni),!c){if(po=l.getBoundingClientRect()||{},void 0!==L&&void 0!==O)kt=L,Ln=O;else if(!Wi&&!at){var io=po.top,Xo=Ee||{},Ro=Xo.left,Yl=Xo.right,Xl=Xo.top,ts=Xo.bottom,hl=void 0===Yl?16:Yl,Ys=void 0===Xl?8:Xl;isNaN(Ro)||(hl=l.scrollWidth-Ro),isNaN(ts)||(Ys=l.scrollHeight-ts);var Su=(0,ue.isNumber)(d)?d:100;kt=l.scrollWidth-ni.scrollWidth-(Ue.length-1)*Su-hl;var zi=Ue[Ue.length-1];Ln=(zi[zi.length-1]||{}).bbox?.bottom-io||Ys}Fi(ni,{position:"absolute",left:"".concat(kt,"px"),top:"".concat(Ln,"px"),cusor:c?"unset":"move"})}this.bindListener(ni,_t);var Pi=ni.getBoundingClientRect();if(!at){var wo=BC(t,Pi,u,this.get("canvas")),Oo=this.get("linkStyle");Tt=Ve.addShape("path",{attrs:jl({lineWidth:1,lineDash:[5,5],stroke:"#ccc",path:wo},Oo)})}if(s[_t]=jl(jl({},s[_t]||{}),{id:_t,collapsed:D,card:ni,link:Tt,x:kt,y:Ln,cardBBox:Pi,content:mn||le,title:Kn||Z,contentPlaceholder:Sr,titlePlaceholder:Zr,isCanvas:at}),a.set("cardInfoMap",s),c)this.updateCardPositionsInConatainer(),this.updateLinks();else{var Yr=!isNaN(L)&&!isNaN(O);if(!Wi&&!at&&!Yr){var $i=po.bottom,qi=void 0===$i?0:$i;io=po.top,Ue[Ue.length-1].push({id:_t,bbox:Pi}),Pi.top>qi-io-Pi.height-16&&Ue.push([]),this.set("rows",Ue)}}this.updateCardSize(_t),this.get("onAnnotationChange")?.(s[_t],Wi?"update":"create")}},e.prototype.updateCardPositionsInConatainer=function(){if(!this.destroyed){var t=this.get("cardInfoMap");if(t){var n=this.get("container"),i=this.get("containerCfg").position,o=n.getBoundingClientRect().width,a=getComputedStyle(n),s=ap(a.paddingLeft)+ap(a.paddingRight);o-=s,Object.values(t).forEach(function(u){var l=u.card,c=l.getBoundingClientRect().width;switch(i){case"right":Fi(l,{marginLeft:o?"".concat(o-c,"px"):"0px"});break;case"top":case"bottom":Fi(l,{marginLeft:"8px"})}})}}},e.prototype.handleExpandCollapseCard=function(t){if(!this.destroyed){var n=this.get("graph"),i=this.get("cardInfoMap");if(i){var o=i[t].collapsed,a=n.findById(t);a&&("hide"!==this.get("cardCfg").collapseType||o?this.toggleAnnotation(a,{collapsed:!o}):this.hideCard(t),i[t]=jl(jl({},i[t]),{collapsed:!o}))}}},e.prototype.hideCard=function(t){if(!this.destroyed){var n=this.get("cardInfoMap");if(n&&n[t]){var i=n[t],a=i.link;Fi(i.card,{display:"none"}),a?.hide(),this.get("onAnnotationChange")(n[t],"hide")}}},e.prototype.removeCard=function(t){if(!this.destroyed){var n=this.get("cardInfoMap");if(n){var i=n[t],o=i.card,a=i.link;this.get("container").removeChild(o),a?.remove(!0),delete n[t],this.get("onAnnotationChange")(i,"remove")}}},e.prototype.bindListener=function(t,n){var i=this;if(!this.destroyed){t.addEventListener("mousemove",function(u){var l;if("g6-annotation-collapse"===u.target.className?l="collapse":"g6-annotation-expand"===u.target.className?l="expand":"g6-annotation-close"===u.target.className&&(l="close"),l){var c=i.get("cardCfg").onMouseEnterIcon;(void 0===c?function(){}:c)(u,n,l)}}),t.addEventListener("mouseout",function(u){var l;if("g6-annotation-collapse"===u.target.className?l="collapse":"g6-annotation-expand"===u.target.className?l="expand":"g6-annotation-close"===u.target.className&&(l="close"),l){var c=i.get("cardCfg").onMouseLeaveIcon;(void 0===c?function(){}:c)(u,n,l)}}),t.addEventListener("mouseenter",function(u){var l=i.get("cardInfoMap");if(l){var c=i.get("graph"),f=c.findById(n);if(f){var h=i.get("itemHighlightState");c.setItemState(f,h,!0)}var d=l[n].link;if(d){var g=i.get("linkHighlightStyle")||{};d.attr(g)}}}),t.addEventListener("mouseleave",function(u){var l=i.get("cardInfoMap");if(l){var c=i.get("graph"),f=c.findById(n);if(f){var h=i.get("itemHighlightState");c.setItemState(f,h,!1)}var d=l[n].link;if(d){var g=i.get("linkHighlightStyle")||{};Object.keys(g).forEach(function(_){d.attr(_,void 0),d.attr(_,void 0)});var m=i.get("linkStyle");d.attr(m)}}}),t.addEventListener("click",function(u){var l=(i.get("cardCfg")||{}).onClickIcon;"g6-annotation-collapse"===u.target.className||"g6-annotation-expand"===u.target.className?("hide"===i.get("cardCfg").collapseType?i.hideCard(n):i.handleExpandCollapseCard(n),l?.(u,n,"g6-annotation-collapse"===u.target.className?"collapse":"expand")):"g6-annotation-close"===u.target.className&&("remove"===i.get("cardCfg").closeType?i.removeCard(n):i.hideCard(n),l?.(u,n,"close"))}),this.get("editable")&&t.addEventListener("dblclick",function(u){var l=i.get("cardInfoMap"),c=(i.get("cardCfg")||{}).maxTitleLength,f=void 0===c?20:c;if(l){var h=u.target,d=h.className;if("g6-annotation-title"===d||"g6-annotation-content"===d){var g="g6-annotation-title"===d?h.getBoundingClientRect():h.parentNode.getBoundingClientRect(),m=g.width,_=g.height,D=getComputedStyle(h),O=ra("<".concat("g6-annotation-title"===d?"input":"textarea",' class="').concat(d,'-input" type="textarea" style="width:').concat(m,"px; height: ").concat(_,'px; min-width: 16px;"/>')),Z=ra('<div class="'.concat(d,'-input-wrapper" style="width: ').concat(m,"px; height: ").concat(_,"px; min-width: 16px; margin-right: ").concat(D.marginRight,'" />'));Z.appendChild(O),h.parentNode.replaceChild(Z,h);var le=l[n],pe=le.contentPlaceholder,Ee=le.titlePlaceholder,Ve=le.title,Ue=le.content;"g6-annotation-title"===d?(O.name="title",O.maxLength=f,Ue=Ve):O.name="content",Ue?(O.innerHTML=h.innerHTML,O.value=h.innerHTML):O.placeholder="g6-annotation-title"===d?Ee:pe,O.focus(),O.addEventListener("blur",function(at){O.value&&(h.innerHTML=O.value,le[O.name||"title"]=O.value),Z.parentNode.replaceChild(h,Z),i.updateCardSize(n),i.get("onAnnotationChange")?.(le,"update")})}}});var a=["g6-annotation-title","g6-annotation-content","g6-annotation-title-input","g6-annotation-content-input"];t.draggable=!0,t.addEventListener("dragstart",function(u){if(!a.includes(u.target.className)){var c=t.style;i.set("dragging",{card:t,x:u.clientX,y:u.clientY,left:ap(c.left),top:ap(c.top)})}}),t.addEventListener("drag",function(u){u.preventDefault();var l=i.get("cardInfoMap");if(l){var c=u.clientX,f=u.clientY,h=i.get("dragging");if(!isNaN(c)&&!isNaN(f)&&h){var d=h.x,g=h.y,m=h.left,_=h.top,D=h.card,L=c-d,O=f-g;m+=L,_+=O;var Z=i.get("graph"),le=Z.getPointByCanvas(0,0),pe=Z.getPointByCanvas(Z.getWidth(),Z.getHeight()),Ee=Z.getClientByPoint(le.x,le.y),Re=Ee.x,Ve=Ee.y,Ue=Z.getClientByPoint(pe.x,pe.y),at=Ue.x,_t=Ue.y,vn=D.getBoundingClientRect();(m>at-Re-(vn.right-vn.left)&&L>0||m<0&&L<0)&&(m-=L),(_>_t-Ve-(vn.bottom-vn.top)&&O>0||_<0&&O<0)&&(_-=O),Fi(D,{left:"".concat(m,"px"),top:"".concat(_,"px"),visibility:"hidden"}),d=c,g=f;var kt=(l[n]||{}).link;if(kt){var Ln=Z.findById(n);kt.attr("path",BC(Ln,vn,Z,i.get("canvas")))}i.set("dragging",{x:d,y:g,left:m,top:_,card:D})}}}),t.addEventListener("dragend",function(l){var c=i.get("cardInfoMap");if(c){var f=i.get("dragging");if(f){var d=f.top,g=f.card;c[n].x=f.left,c[n].y=d,Fi(g,{visibility:"visible"}),i.set("dragging",!1),i.get("rows")?.forEach(function(D){for(var L=D.length-1;L>=0;L--)D[L].id===n&&D.splice(L,1)}),i.get("onAnnotationChange")?.(c[n],"update")}}})}},e.prototype.updateCardSize=function(t){var n=this.get("cardInfoMap");if(n){var i=n[t].card,o=i.getBoundingClientRect().width,a=i.getElementsByClassName("g6-annotation-title")[0];if(a){var s=getComputedStyle(a),u=ap(s.marginLeft),l=a.getBoundingClientRect().width;Fi(a,{marginRight:"".concat(o-u-24-16-l,"px")})}}},e.prototype.updateLink=function(t){var n=t.item;if(n){var i=this.get("cardInfoMap");if(i){var o=this.get("canvas"),a=this.get("graph"),u=i[n.getID()]||{},l=u.link;if(l){var f=BC(n,u.card.getBoundingClientRect(),a,o);l.attr("path",f)}}}},e.prototype.updateLinks=function(){var t=this;if(!this.destroyed){var n=this.get("cardInfoMap");if(n){var i=this.get("graph");Object.values(n).forEach(function(o){var s=i.findById(o.id);t.updateLink({item:s})})}}},e.prototype.onGraphDataChange=function(){var t=this,n=this.get("cardInfoMap");if(n){var i=this.get("graph");Object.values(n).forEach(function(o){var a=o.id,s=o.card;if(s&&!o.isCanvas&&"none"!==s.style.display){var l=i.findById(a);l&&l.isVisible()?t.toggleAnnotation(l):t.hideCard(a)}})}},e.prototype.onGraphItemVisibilityChange=function(t){var n=t.item,i=t.visible;if(n&&!n.destroyed){var o=this.get("cardInfoMap");if(o){var a=n.getID();!o[a]||i||this.hideCard(a)}}},e.prototype.saveData=function(t){void 0===t&&(t=!1);var n=this.get("cardInfoMap");if(n){var i=this.get("graph"),o=this.get("getTitle"),a=this.get("getContent"),s=[];return Object.values(n).forEach(function(u){var l=u.title,c=u.content,f=u.x,h=u.y,d=u.id,g=u.collapsed,m=u.card;if(!m||"none"!==m.style.display||t){var _=i.findById(d)||i.get("canvas");s.push({id:d,x:f,y:h,collapsed:g,title:l||o?.(_),content:c||a?.(_),visible:m&&"none"!==m.style.display})}}),s}},e.prototype.readData=function(t){var n=this,i=this.get("graph");t.forEach(function(o){var a=o.id,s=o.x,u=o.y,l=o.title,c=o.content,f=o.collapsed,h=o.visible,d=i.findById(a);if(!d&&a===A3&&(d=i.get("canvas")),!d){var g=n.get("cardInfoMap")||{};return g[a]=o,void n.set("cardInfoMap",g)}n.toggleAnnotation(d,{x:s,y:u,title:l,content:c,collapsed:f}),h||n.hideCard(a)})},e.prototype.clear=function(){var t=this.get("cardInfoMap");if(t){var n=this.get("container");Object.values(t).forEach(function(i){var a=i.link;n.removeChild(i.card),a?.remove(!0)}),this.set("cardInfoMap",{})}},e.prototype.destroy=function(){var t;this.clear(),null===(t=this.get("canvas"))||void 0===t||t.destroy();var n=this.get("graph");!n||n.destroyed||(this.get("containerCfg")&&n.getContainer().removeChild(this.get("container")),this.destroyed=!0)},e}(Uu),BC=function(e,t,n,i){var o,a;if("edge"===e.getType())a=[e.getKeyShape().getPoint(.5)];else{var u=null===(o=e.getKeyShape)||void 0===o?void 0:o.call(e).getBBox(),l=u.minX,c=u.minY,f=u.maxX,h=u.maxY,d=e.getModel(),g=d.x,m=d.y;a={left:{x:l+=g,y:((c+=m)+(h+=m))/2},right:{x:f+=g,y:(c+h)/2},top:{x:(l+f)/2,y:c},bottom:{x:(l+f)/2,y:h}}}Object.keys(a).forEach(function(Ve){var Ue=a[Ve],vn=n.getClientByPoint(Ue.x,Ue.y);a[Ve]=i.getPointByClient(vn.x,vn.y)});var _=t.top,D=void 0===_?0:_,L=t.left,O=void 0===L?0:L,Z=t.right,le=void 0===Z?0:Z,pe=t.bottom,Ee=void 0===pe?0:pe,Re={left:i.getPointByClient(O,(D+Ee)/2),right:i.getPointByClient(le,(D+Ee)/2),top:i.getPointByClient((O+le)/2,D),bottom:i.getPointByClient((O+le)/2,Ee)};return function(e,t){var n,i,a=1/0;Object.keys(e).forEach(function(l){var c=e[l];Object.keys(t).forEach(function(f){var h=t[f],d=c.x-h.x,g=c.y-h.y,m=d*d+g*g;a>m&&(a=m,n=c,i=h)})});var u=su.getControlPoint(n,i,.5,20);return[["M",n.x,n.y],["Q",u.x,u.y,i.x,i.y]]}(a,Re)},ap=function(e){return Number(e.replace(/\s+|px/gi,""))||0};const Ka={PluginBase:Uu,Menu:hre,Grid:ure,Minimap:bre,Bundling:_re,ToolBar:Ire,Tooltip:Nre,Fisheye:Cre,TimeBar:Ooe,ImageMinimap:Roe,EdgeFilterLens:zoe,SnapLine:Woe,Legend:qoe,Annotation:Zoe};Ph("circle",{options:{size:pr.defaultNode.size,style:{x:0,y:0,stroke:pr.defaultNode.style.stroke,fill:pr.defaultNode.style.fill,lineWidth:pr.defaultNode.style.lineWidth},labelCfg:{style:{fill:pr.nodeLabel.style.fill,fontSize:pr.nodeLabel.style.fontSize,fontFamily:pr.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:pr.defaultNode.linkPoints.size,lineWidth:pr.defaultNode.linkPoints.lineWidth,fill:pr.defaultNode.linkPoints.fill,stroke:pr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,De.__assign)({},pr.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).icon,i=void 0===n?{}:n,o=this.getShapeStyle(e),a=(0,ue.deepMix)({},i,e.icon),s="".concat(this.type,"-keyShape"),u=t.addShape("circle",{attrs:o,className:s,name:s,draggable:!0});t.shapeMap[s]=u;var l=a.width,c=a.height,h=a.text;if(a.show){var d="".concat(this.type,"-icon");t.shapeMap[d]=h?t.addShape("text",{attrs:(0,De.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:d,name:d,draggable:!0}):t.addShape("image",{attrs:(0,De.__assign)({x:-l/2,y:-c/2},a),className:d,name:d,draggable:!0})}return this.drawLinkPoints(e,t),u},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints;if(n){var i=n||{},o=i.top,a=i.left,s=i.right,u=i.bottom,l=i.size,c=i.r,f=(0,De.__rest)(i,["top","left","right","bottom","size","r"]),d=this.getSize(e)[0]/2;if(a){var g="link-point-left";t.shapeMap[g]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},f),{x:-d,y:0,r:l/2||c||5}),className:g,name:g,isAnchorPoint:!0})}if(s){var m="link-point-right";t.shapeMap[m]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},f),{x:d,y:0,r:l/2||c||5}),className:m,name:m,isAnchorPoint:!0})}if(o){var _="link-point-top";t.shapeMap[_]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},f),{x:0,y:-d,r:l/2||c||5}),className:_,name:_,isAnchorPoint:!0})}if(u){var D="link-point-bottom";t.shapeMap[D]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},f),{x:0,y:d,r:l/2||c||5}),className:D,name:D,isAnchorPoint:!0})}}},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,i=(0,ue.deepMix)({},t,{stroke:e.color}),o=this.getSize(e);return(0,De.__assign)({x:0,y:0,r:o[0]/2},i)},update:function(e,t,n){var i=t.getContainer(),o=this.getSize(e),a=(0,De.__assign)({},e.style);void 0===e.style.stroke&&e.color&&(a.stroke=e.color),void 0===e.style.r&&!isNaN(o[0])&&(a.r=o[0]/2),this.updateShape(e,t,a,!0,n),this.updateLinkPoints(e,i)}},"single-node"),Ph("rect",{options:{size:[100,30],style:{radius:0,stroke:pr.defaultNode.style.stroke,fill:pr.defaultNode.style.fill,lineWidth:pr.defaultNode.style.lineWidth},labelCfg:{style:{fill:pr.nodeLabel.style.fill,fontSize:pr.nodeLabel.style.fontSize,fontFamily:pr.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:pr.defaultNode.linkPoints.size,lineWidth:pr.defaultNode.linkPoints.lineWidth,fill:pr.defaultNode.linkPoints.fill,stroke:pr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,De.__assign)({},pr.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(e,t){var n=this.getShapeStyle(e),i=t.addShape("rect",{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return t.shapeMap["".concat(this.type,"-keyShape")]=i,this.drawLinkPoints(e,t),i},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,i=void 0===n?{}:n,o=i.top,a=i.left,s=i.right,u=i.bottom,l=i.size,c=i.r,f=(0,De.__rest)(i,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0],g=h[1];a&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},f),{x:-d/2,y:0,r:l/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},f),{x:d/2,y:0,r:l/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),o&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},f),{x:0,y:-g/2,r:l/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},f),{x:0,y:g/2,r:l/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,i=(0,ue.mix)({},t,{stroke:e.color}),o=this.getSize(e),a=i.width||o[0],s=i.height||o[1];return(0,De.__assign)({x:-a/2,y:-s/2,width:a,height:s},i)},update:function(e,t,n){var i=t.getContainer(),o=this.getOptions({}).style,a=this.getSize(e),s=t.get("keyShape");e.size||(a[0]=s.attr("width")||o.width,a[1]=s.attr("height")||o.height);var u={stroke:e.color,x:-a[0]/2,y:-a[1]/2,width:a[0],height:a[1]},l=(0,ue.mix)({},o,s.attr(),u);l=(0,ue.mix)(l,e.style),this.updateShape(e,t,l,!1,n),this.updateLinkPoints(e,i)}},"single-node"),Ph("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:pr.defaultNode.style.stroke,fill:pr.defaultNode.style.fill,lineWidth:pr.defaultNode.style.lineWidth},labelCfg:{style:{fill:pr.nodeLabel.style.fill,fontSize:pr.nodeLabel.style.fontSize,fontFamily:pr.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:pr.defaultNode.linkPoints.size,lineWidth:pr.defaultNode.linkPoints.lineWidth,fill:pr.defaultNode.linkPoints.fill,stroke:pr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,De.__assign)({},pr.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).icon,i=void 0===n?{}:n,o=this.getShapeStyle(e),a=t.addShape("ellipse",{attrs:o,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0});t.shapeMap["ellipse-keyShape"]=a;var s=i.width,u=i.height,c=i.text;return i.show&&(t.shapeMap["".concat(this.type,"-icon")]=c?t.addShape("text",{attrs:(0,De.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.addShape("image",{attrs:(0,De.__assign)({x:-s/2,y:-u/2},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),a},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,i=void 0===n?{}:n,o=i.top,a=i.left,s=i.right,u=i.bottom,l=i.size,c=i.r,f=(0,De.__rest)(i,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0]/2,g=h[1]/2;a&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},f),{x:-d,y:0,r:l/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},f),{x:d,y:0,r:l/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),o&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},f),{x:0,y:-g,r:l/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},f),{x:0,y:g,r:l/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,i=(0,ue.mix)({},t,{stroke:e.color}),o=this.getSize(e);return(0,De.__assign)({x:0,y:0,rx:o[0]/2,ry:o[1]/2},i)},update:function(e,t,n){var i=t.getContainer(),o=this.getOptions({}).style,a=this.getSize(e),s={stroke:e.color,rx:a[0]/2,ry:a[1]/2},u=t.get("keyShape"),l=(0,ue.mix)({},o,u.attr(),s);l=(0,ue.mix)(l,e.style),this.updateShape(e,t,l,!0,n),this.updateLinkPoints(e,i)}},"single-node"),Ph("diamond",{options:{size:[80,80],style:{stroke:pr.defaultNode.style.stroke,fill:pr.defaultNode.style.fill,lineWidth:pr.defaultNode.style.lineWidth},labelCfg:{style:{fill:pr.nodeLabel.style.fill,fontSize:pr.nodeLabel.style.fontSize,fontFamily:pr.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:pr.defaultNode.linkPoints.size,lineWidth:pr.defaultNode.linkPoints.lineWidth,fill:pr.defaultNode.linkPoints.fill,stroke:pr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,De.__assign)({},pr.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).icon,i=void 0===n?{}:n,o=this.getShapeStyle(e),a=t.addShape("path",{attrs:o,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=a;var s=i.width,u=i.height,c=i.text;return i.show&&(t.shapeMap["".concat(this.type,"-icon")]=c?t.addShape("text",{attrs:(0,De.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.addShape("image",{attrs:(0,De.__assign)({x:-s/2,y:-u/2},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),a},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,i=void 0===n?{}:n,o=i.top,a=i.left,s=i.right,u=i.bottom,l=i.size,c=i.r,f=(0,De.__rest)(i,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0],g=h[1];a&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},f),{x:-d/2,y:0,r:l/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},f),{x:d/2,y:0,r:l/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),o&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},f),{x:0,y:-g/2,r:l/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},f),{x:0,y:g/2,r:l/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(e){var t=this.getSize(e),n=t[0],i=t[1];return[["M",0,-i/2],["L",n/2,0],["L",0,i/2],["L",-n/2,0],["Z"]]},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,i=(0,ue.mix)({},t,{stroke:e.color}),o=this.getPath(e);return(0,De.__assign)({path:o},i)},update:function(e,t,n){var i=t.getContainer(),o=this.getOptions({}).style,a=this.getPath(e),s={stroke:e.color,path:a},u=t.get("keyShape"),l=(0,ue.mix)({},o,u.attr(),s);l=(0,ue.mix)(l,e.style),this.updateShape(e,t,l,!0,n),this.updateLinkPoints(e,i)}},"single-node"),Ph("triangle",{options:{size:40,direction:"up",style:{stroke:pr.defaultNode.style.stroke,fill:pr.defaultNode.style.fill,lineWidth:pr.defaultNode.style.lineWidth},labelCfg:{style:{fill:pr.nodeLabel.style.fill,fontSize:pr.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:pr.defaultNode.linkPoints.size,lineWidth:pr.defaultNode.linkPoints.lineWidth,fill:pr.defaultNode.linkPoints.fill,stroke:pr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:(0,De.__assign)({},pr.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(e,t){var n=this.mergeStyle||this.getOptions(e),i=n.icon,o=void 0===i?{}:i,a=n.direction,s=this.getShapeStyle(e),u=e.direction||a,l=t.addShape("path",{attrs:s,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=l;var c=o.width,f=o.height,d=o.offset;if(o.show)if(o.text)t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,De.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0});else{var m=-c/2,_=-f/2;("up"===u||"down"===u)&&(_+=d),("left"===u||"right"===u)&&(m+=d),t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,De.__assign)({x:m,y:_},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})}return this.drawLinkPoints(e,t),l},drawLinkPoints:function(e,t){var n=this.mergeStyle||this.getOptions(e),i=n.linkPoints,o=void 0===i?{}:i,s=e.direction||n.direction,u=o.top,l=o.left,c=o.right,f=o.bottom,h=o.size,d=o.r,g=(0,De.__rest)(o,["top","left","right","bottom","size","r"]),_=this.getSize(e)[0];if(l){var D=null,L=_*Math.sin(1/3*Math.PI),O=_*Math.sin(1/3*Math.PI);"up"===s?D=[-O,L]:"down"===s?D=[-O,-L]:"left"===s&&(D=[-O,O-L]),D&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},g),{x:D[0],y:D[1],r:h/2||d||5}),className:"link-point-left",name:"link-point-left"}))}if(c){var Z=null;L=_*Math.sin(1/3*Math.PI),O=_*Math.sin(1/3*Math.PI),"up"===s?Z=[O,L]:"down"===s?Z=[O,-L]:"right"===s&&(Z=[O,O-L]),Z&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},g),{x:Z[0],y:Z[1],r:h/2||d||5}),className:"link-point-right",name:"link-point-right"}))}if(u){var le=null;L=_*Math.sin(1/3*Math.PI),O=_*Math.sin(1/3*Math.PI),"up"===s?le=[O-L,-L]:"left"===s?le=[O,-L]:"right"===s&&(le=[-O,-L]),le&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},g),{x:le[0],y:le[1],r:h/2||d||5}),className:"link-point-top",name:"link-point-top"}))}if(f){var pe=null;L=_*Math.sin(1/3*Math.PI),O=_*Math.sin(1/3*Math.PI),"down"===s?pe=[-O+L,L]:"left"===s?pe=[O,L]:"right"===s&&(pe=[-O,L]),pe&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},g),{x:pe[0],y:pe[1],r:h/2||d||5}),className:"link-point-bottom",name:"link-point-bottom"}))}},getPath:function(e){var t=(this.mergeStyle||this.getOptions(e)).direction,n=e.direction||t,o=this.getSize(e)[0],a=o*Math.sin(1/3*Math.PI),s=o*Math.sin(1/3*Math.PI),u=[["M",-s,a],["L",0,-a],["L",s,a],["Z"]];return"down"===n?u=[["M",-s,-a],["L",s,-a],["L",0,a],["Z"]]:"left"===n?u=[["M",-s,s-a],["L",s,-s],["L",s,s],["Z"]]:"right"===n&&(u=[["M",s,s-a],["L",-s,s],["L",-s,-s],["Z"]]),u},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,i=(0,ue.mix)({},t,{stroke:e.color}),o=this.getPath(e);return(0,De.__assign)({path:o},i)},update:function(e,t,n){var i=t.getContainer(),o=this.getOptions({}).style,a=this.getPath(e),s={stroke:e.color,path:a},u=t.get("keyShape"),l=(0,ue.mix)({},o,u.attr(),s);l=(0,ue.mix)(l,e.style),this.updateShape(e,t,l,!0,n),this.updateLinkPoints(e,i)},updateLinkPoints:function(e,t){var n=this.getOptions({}),i=n.linkPoints,a=e.direction||n.direction,s=t.shapeMap["link-point-left"]||t.find(function(kt){return"link-point-left"===kt.get("className")}),u=t.shapeMap["link-point-right"]||t.find(function(kt){return"link-point-right"===kt.get("className")}),l=t.shapeMap["link-point-top"]||t.find(function(kt){return"link-point-top"===kt.get("className")}),c=t.shapeMap["link-point-bottom"]||t.find(function(kt){return"link-point-bottom"===kt.get("className")}),f=i,h=s||u||l||c;h&&(f=h.attr());var d=(0,ue.mix)({},f,e.linkPoints),g=d.fill,m=d.stroke,_=d.lineWidth,D=d.size/2;D||(D=d.r);var L=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},O=L.left,Z=L.right,le=L.top,pe=L.bottom,Re=this.getSize(e)[0],Ve={r:D,fill:g,stroke:m,lineWidth:_},Ue=null,at=Re*Math.sin(1/3*Math.PI),_t=Re*Math.sin(1/3*Math.PI);"up"===a?Ue=[-_t,at]:"down"===a?Ue=[-_t,-at]:"left"===a&&(Ue=[-_t,_t-at]),Ue&&(s?O||void 0===O?s.attr((0,De.__assign)((0,De.__assign)({},Ve),{x:Ue[0],y:Ue[1]})):(s.remove(),delete t.shapeMap["link-point-left"]):O&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},Ve),{x:Ue[0],y:Ue[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})));var vn=null;"up"===a?vn=[_t,at]:"down"===a?vn=[_t,-at]:"right"===a&&(vn=[_t,_t-at]),vn&&(u?Z||void 0===Z?u.attr((0,De.__assign)((0,De.__assign)({},Ve),{x:vn[0],y:vn[1]})):(u.remove(),delete t.shapeMap["link-point-right"]):Z&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},Ve),{x:vn[0],y:vn[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})));var Cn=null;"up"===a?Cn=[_t-at,-at]:"left"===a?Cn=[_t,-at]:"right"===a&&(Cn=[-_t,-at]),Cn&&(l?le||void 0===le?l.attr((0,De.__assign)((0,De.__assign)({},Ve),{x:Cn[0],y:Cn[1]})):(l.remove(),delete t.shapeMap["link-point-top"]):le&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},Ve),{x:Cn[0],y:Cn[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})));var Tt=null;"down"===a?Tt=[-_t+at,at]:"left"===a?Tt=[_t,at]:"right"===a&&(Tt=[-_t,at]),Tt&&(c?pe||void 0===pe?c.attr((0,De.__assign)((0,De.__assign)({},Ve),{x:Tt[0],y:Tt[1]})):(c.remove(),delete t.shapeMap["link-point-bottom"]):pe&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},Ve),{x:Tt[0],y:Tt[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node"),Ph("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:pr.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:pr.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:pr.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).preRect,i=void 0===n?{}:n,o=this.getShapeStyle(e),a=this.getSize(e),s=a[0],u=a[1],l=t.addShape("rect",{attrs:o,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=l;var c=i.show,f=(0,De.__rest)(i,["show"]);return c&&(t.shapeMap["pre-rect"]=t.addShape("rect",{attrs:(0,De.__assign)({x:-s/2,y:-u/2,height:u},f),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(e,t),this.drawStateIcon(e,t),this.drawLinkPoints(e,t),l},drawLogoIcon:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).logoIcon,i=void 0===n?{}:n,a=this.getSize(e)[0];if(i.show){var s=i.width,u=i.height,l=i.x,c=i.y,f=i.offset,h=i.text,d=(0,De.__rest)(i,["width","height","x","y","offset","text"]);t.shapeMap["rect-logo-icon"]=h?t.addShape("text",{attrs:(0,De.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},d),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):t.addShape("image",{attrs:(0,De.__assign)((0,De.__assign)({},d),{x:l||-a/2+s+f,y:c||-u/2,width:s,height:u}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).stateIcon,i=void 0===n?{}:n,a=this.getSize(e)[0];if(i.show){var s=i.width,u=i.height,l=i.x,c=i.y,f=i.offset,h=i.text,d=(0,De.__rest)(i,["width","height","x","y","offset","text"]);t.shapeMap["rect-state-icon"]=h?t.addShape("text",{attrs:(0,De.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},d),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):t.addShape("image",{attrs:(0,De.__assign)((0,De.__assign)({},d),{x:l||a/2-s+f,y:c||-u/2,width:s,height:u}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,i=void 0===n?{}:n,o=i.top,a=i.left,s=i.right,u=i.bottom,l=i.size,c=i.r,f=(0,De.__rest)(i,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0],g=h[1];a&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},f),{x:-d/2,y:0,r:l/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},f),{x:d/2,y:0,r:l/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),o&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},f),{x:0,y:-g/2,r:l/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},f),{x:0,y:g/2,r:l/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(e,t){var n=this.getOptions(e),i=n.labelCfg,o=void 0===i?{}:i,a=n.logoIcon,s=void 0===a?{}:a,u=n.descriptionCfg,l=void 0===u?{}:u,f=this.getSize(e)[0],h=null,m=-f/2+o.offset;s.show&&(m=-f/2+s.width+o.offset);var _=o.style,D=l.style,L=l.paddingTop;return(0,ue.isString)(e.description)?(h=t.addShape("text",{attrs:(0,De.__assign)((0,De.__assign)({},_),{x:m,y:-5,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=h,t.shapeMap["rect-description"]=t.addShape("text",{attrs:(0,De.__assign)((0,De.__assign)({},D),{x:m,y:17+(L||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})):(h=t.addShape("text",{attrs:(0,De.__assign)((0,De.__assign)({},_),{x:m,y:7,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=h),h},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,i=(0,ue.mix)({},t,{stroke:e.color}),o=this.getSize(e),a=i.width||o[0],s=i.height||o[1];return(0,De.__assign)({x:-a/2,y:-s/2,width:a,height:s},i)},update:function(e,t){var n=this.mergeStyle||this.getOptions(e),i=n.style,o=void 0===i?{}:i,a=n.labelCfg,s=void 0===a?{}:a,u=n.descriptionCfg,l=void 0===u?{}:u,c=this.getSize(e),f=c[0],h=c[1];t.get("keyShape").attr((0,De.__assign)((0,De.__assign)({},o),{x:-f/2,y:-h/2,width:f,height:h}));var g=t.getContainer(),m=g.shapeMap["rect-logo-icon"]||g.find(function(ni){return"rect-logo-icon"===ni.get("className")}),_=m?m.attr():{},D=(0,ue.mix)({},_,e.logoIcon),L=D.width;void 0===L&&(L=this.options.logoIcon.width);var O=e.logoIcon?e.logoIcon.show:void 0,Z=s.offset,le=-f/2+L+Z;!O&&void 0!==O&&(le=-f/2+Z);var pe=g.shapeMap["node-label"]||g.find(function(ni){return"node-label"===ni.get("className")}),Ee=g.shapeMap["rect-description"]||g.find(function(ni){return"rect-description"===ni.get("className")});if(e.label)if(pe){var Re=e.labelCfg?e.labelCfg.style:{},Ve=(0,ue.mix)({},pe.attr(),Re);e.label&&(Ve.text=e.label),Ve.x=le,(0,ue.isString)(e.description)&&(Ve.y=-5),Ee&&(Ee.resetMatrix(),Ee.attr({x:le})),pe.resetMatrix(),pe.attr(Ve)}else g.shapeMap["node-label"]=g.addShape("text",{attrs:(0,De.__assign)((0,De.__assign)({},s.style),{x:le,y:e.description?-5:7,text:e.label}),className:"node-label",name:"node-label",draggable:!0,labelRelated:!0});if((0,ue.isString)(e.description)){var Ue=l.paddingTop;if(Ee){Re=e.descriptionCfg?e.descriptionCfg.style:{};var at=(0,ue.mix)({},Ee.attr(),Re);(0,ue.isString)(e.description)&&(at.text=e.description),at.x=le,Ee.resetMatrix(),Ee.attr((0,De.__assign)((0,De.__assign)({},at),{y:17+(Ue||0)}))}else g.shapeMap["rect-description"]=g.addShape("text",{attrs:(0,De.__assign)((0,De.__assign)({},l.style),{x:le,y:17+(Ue||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})}var _t=g.shapeMap["pre-rect"]||g.find(function(ni){return"pre-rect"===ni.get("className")});if(_t&&!_t.destroyed){var vn=(0,ue.mix)({},_t.attr(),e.preRect);_t.attr((0,De.__assign)((0,De.__assign)({},vn),{x:-f/2,y:-h/2,height:h}))}if(m&&!m.destroyed)if(O||void 0===O){var Cn=D.width,Tt=D.height,kt=D.x,Ln=D.y,Kn=D.offset,mn=(0,De.__rest)(D,["width","height","x","y","offset"]);m.attr((0,De.__assign)((0,De.__assign)({},mn),{x:kt||-f/2+Cn+Kn,y:Ln||-Tt/2,width:Cn,height:Tt}))}else m.remove(),delete g.shapeMap["pre-rect"];else O&&this.drawLogoIcon(e,g);var On=g.shapeMap["rect-state-icon"]||g.find(function(ni){return"rect-state-icon"===ni.get("className")}),Vn=On?On.attr():{},rr=(0,ue.mix)({},Vn,e.stateIcon);if(On){!rr.show&&void 0!==rr.show&&(On.remove(),delete g.shapeMap["rect-state-icon"]);var vr=rr.width,Sr=(Tt=rr.height,kt=rr.x,Ln=rr.y,rr.offset),Zr=(0,De.__rest)(rr,["width","height","x","y","offset"]);On.attr((0,De.__assign)((0,De.__assign)({},Zr),{x:kt||f/2-vr+Sr,y:Ln||-Tt/2,width:vr,height:Tt}))}else rr.show&&this.drawStateIcon(e,g);this.updateLinkPoints(e,g)},getOptions:function(e,t){return"move"===t?e:(0,ue.deepMix)({},this.options,this.getCustomConfig(e)||{},e)}},"single-node"),Ph("star",{options:{size:60,style:{stroke:pr.defaultNode.style.stroke,fill:pr.defaultNode.style.fill,lineWidth:pr.defaultNode.style.lineWidth},labelCfg:{style:{fill:pr.nodeLabel.style.fill,fontSize:pr.nodeLabel.style.fontSize,fontFamily:pr.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:pr.defaultNode.linkPoints.size,lineWidth:pr.defaultNode.linkPoints.lineWidth,fill:pr.defaultNode.linkPoints.fill,stroke:pr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,De.__assign)({},pr.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).icon,i=void 0===n?{}:n,o=this.getShapeStyle(e),a=t.addShape("path",{attrs:o,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=a;var s=i.width,u=i.height,c=i.text;return i.show&&(t.shapeMap["".concat(this.type,"-icon")]=c?t.addShape("text",{attrs:(0,De.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.addShape("image",{attrs:(0,De.__assign)({x:-s/2,y:-u/2},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),a},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,i=void 0===n?{}:n,o=i.top,a=i.left,s=i.right,u=i.leftBottom,l=i.rightBottom,c=i.size,f=i.r,h=(0,De.__rest)(i,["top","left","right","leftBottom","rightBottom","size","r"]),g=this.getSize(e)[0];if(s){var m=Math.cos(.1*Math.PI)*g,_=Math.sin(.1*Math.PI)*g;t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},h),{x:m,y:-_,r:c/2||f||5}),className:"link-point-right",name:"link-point-right"})}o&&(m=Math.cos(.5*Math.PI)*g,_=Math.sin(.5*Math.PI)*g,t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},h),{x:m,y:-_,r:c/2||f||5}),className:"link-point-top",name:"link-point-top"})),a&&(m=Math.cos(.9*Math.PI)*g,_=Math.sin(.9*Math.PI)*g,t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},h),{x:m,y:-_,r:c/2||f||5}),className:"link-point-left",name:"link-point-left"})),u&&(m=Math.cos(1.3*Math.PI)*g,_=Math.sin(1.3*Math.PI)*g,t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},h),{x:m,y:-_,r:c/2||f||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})),l&&(m=Math.cos(1.7*Math.PI)*g,_=Math.sin(1.7*Math.PI)*g,t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},h),{x:m,y:-_,r:c/2||f||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"}))},getPath:function(e){var n=this.getSize(e)[0];return su.getStarPath(n,e.innerR||3*n/8)},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,i=(0,ue.mix)({},t,{stroke:e.color}),o=this.getPath(e);return(0,De.__assign)({path:o},i)},update:function(e,t,n){var i=t.getContainer(),o=this.getOptions({}).style,a=this.getPath(e),s={stroke:e.color,path:a},u=t.get("keyShape"),l=(0,ue.mix)({},o,u.attr(),s);l=(0,ue.mix)(l,e.style),this.updateShape(e,t,l,!0,n),this.updateLinkPoints(e,i)},updateLinkPoints:function(e,t){var n=this.getOptions({}).linkPoints,i=t.shapeMap["link-point-left"]||t.find(function(at){return"link-point-left"===at.get("className")}),o=t.shapeMap["link-point-right"]||t.find(function(at){return"link-point-right"===at.get("className")}),a=t.shapeMap["link-point-top"]||t.find(function(at){return"link-point-top"===at.get("className")}),s=t.shapeMap["link-point-left-bottom"]||t.find(function(at){return"link-point-left-bottom"===at.get("className")}),u=t.shapeMap["link-point-left-bottom"]||t.find(function(at){return"link-point-right-bottom"===at.get("className")}),l=n,c=i||o||a||s||u;c&&(l=c.attr());var f=(0,ue.mix)({},l,e.linkPoints),h=f.fill,d=f.stroke,g=f.lineWidth,m=f.size/2;m||(m=f.r);var _=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},D=_.left,L=_.right,O=_.top,Z=_.leftBottom,le=_.rightBottom,Ee=this.getSize(e)[0],Re={r:m,fill:h,stroke:d,lineWidth:g},Ve=Math.cos(.1*Math.PI)*Ee,Ue=Math.sin(.1*Math.PI)*Ee;o?L||void 0===L?o.attr((0,De.__assign)((0,De.__assign)({},Re),{x:Ve,y:-Ue})):(o.remove(),delete t.shapeMap["link-point-right"]):L&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},Re),{x:Ve,y:-Ue}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),Ve=Math.cos(.5*Math.PI)*Ee,Ue=Math.sin(.5*Math.PI)*Ee,a?O||void 0===O?a.attr((0,De.__assign)((0,De.__assign)({},Re),{x:Ve,y:-Ue})):(a.remove(),delete t.shapeMap["link-point-top"]):O&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},Re),{x:Ve,y:-Ue}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),Ve=Math.cos(.9*Math.PI)*Ee,Ue=Math.sin(.9*Math.PI)*Ee,i?D||void 0===D?i.attr((0,De.__assign)((0,De.__assign)({},Re),{x:Ve,y:-Ue})):(i.remove(),delete t.shapeMap["link-point-left"]):D&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},Re),{x:Ve,y:-Ue}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),Ve=Math.cos(1.3*Math.PI)*Ee,Ue=Math.sin(1.3*Math.PI)*Ee,s?Z||void 0===Z?s.attr((0,De.__assign)((0,De.__assign)({},Re),{x:Ve,y:-Ue})):(s.remove(),delete t.shapeMap["link-point-left-bottom"]):Z&&(t.shapeMap["link-point-left-bottom"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},Re),{x:Ve,y:-Ue}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),Ve=Math.cos(1.7*Math.PI)*Ee,Ue=Math.sin(1.7*Math.PI)*Ee,u?le||void 0===le?u.attr((0,De.__assign)((0,De.__assign)({},Re),{x:Ve,y:-Ue})):(u.remove(),delete t.shapeMap["link-point-right-bottom"]):le&&(t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,De.__assign)((0,De.__assign)({},Re),{x:Ve,y:-Ue}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node");var D3=su.defaultSubjectColors,Iy="fan-shape-";Ph("donut",{options:{size:pr.defaultNode.size,style:{x:0,y:0,stroke:pr.defaultNode.style.stroke,fill:pr.defaultNode.style.fill,lineWidth:pr.defaultNode.style.lineWidth},labelCfg:{style:{fill:pr.nodeLabel.style.fill,fontSize:pr.nodeLabel.style.fontSize,fontFamily:pr.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:pr.defaultNode.linkPoints.size,lineWidth:pr.defaultNode.linkPoints.lineWidth,fill:pr.defaultNode.linkPoints.fill,stroke:pr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,De.__assign)({},pr.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).icon,i=void 0===n?{}:n,o=this.getShapeStyle(e),a=(0,ue.deepMix)({},i,e.icon),s=t.addShape("circle",{attrs:o,className:"".concat(this.type,"-keyShape"),draggable:!0,name:"".concat(this.type,"-keyShape")});t.shapeMap["".concat(this.type,"-keyShape")]=s;var u=a.width,l=a.height,f=a.text;return a.show&&(t.shapeMap["".concat(this.type,"-icon")]=f?t.addShape("text",{attrs:(0,De.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.addShape("image",{attrs:(0,De.__assign)({x:-u/2,y:-l/2},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),tae(e,t,s),this.drawLinkPoints(e,t),s},updateShape:function(e,t,n,i,o){var a=t.get("keyShape");a.attr((0,De.__assign)({},n)),nae(e,t,a),this.updateLabel(e,t,o),i&&this.updateIcon(e,t)}},"circle");var tae=function(e,t,n){var i=e.donutAttrs,o=void 0===i?{}:i,a=e.donutColorMap,s=void 0===a?{}:a,u=Object.keys(o).length;if(o&&u>1){var l=T3(o,s),c=l.configs,f=l.totalValue;if(f){var h=I3(n),d=h.lineWidth,g=h.arcR,m=[g,0],_=0;if(1===u)return void jC(t,{arcR:g,arcBegin:m,beginAngle:_,config:c[0],fanIndex:0,lineWidth:d,totalValue:f,drawWhole:!0});for(var D=0;D<c.length;D++){var L=jC(t,{arcR:g,arcBegin:m,beginAngle:_,config:c[D],fanIndex:D,lineWidth:d,totalValue:f});if(L.shouldEnd)return;m=L.arcBegin,_=L.beginAngle}}}},jC=function(e,t){var m,_,D,n=t.arcR,i=t.arcBegin,o=t.beginAngle,a=t.config,s=t.fanIndex,u=t.lineWidth,c=t.drawWhole,f=void 0!==c&&c,h=t.updateShape,d=void 0===h?void 0:h,g=a.value/t.totalValue;if(g<.001)return{beginAngle:o,arcBegin:i,shape:void 0,shouldEnd:!1};if(f||g>.999)m=[n,1e-4],D=!0;else{var L=g*Math.PI*2;_=o+L,m=[n*Math.cos(_),-n*Math.sin(_)],D=L>Math.PI?1:0}var O={path:[["M",i[0],i[1]],["A",n,n,0,D,0,m[0],m[1]],["L",m[0],m[1]]],stroke:a.color||d?.attr("stroke")||D3[s%D3.length],lineWidth:u};return d?d.attr(O):e.shapeMap["".concat(Iy).concat(s)]=e.addShape("path",{attrs:O,name:"".concat(Iy).concat(s),draggable:!0}),{beginAngle:_,arcBegin:m,shape:e.shapeMap["".concat(Iy).concat(s)],shouldEnd:f||g>.999}},nae=function(e,t,n){var i=e.donutAttrs,o=e.donutColorMap,a=void 0===o?{}:o,s={},u=t.getContainer();if(i){var l=T3(i,a),c=l.configs,f=l.totalValue;if(f)for(var h=I3(n),d=h.lineWidth,g=h.arcR,m=[g,0],_=0,D=0;D<c.length;D++){var L="".concat(Iy).concat(D),O=jC(u,{arcR:g,arcBegin:m,beginAngle:_,config:c[D],fanIndex:D,lineWidth:d,totalValue:f,drawWhole:1===c.length,updateShape:u.shapeMap[L]});if(O.shape&&(s[L]=!0),O.shouldEnd)break;m=O.arcBegin,_=O.beginAngle}}Object.keys(u.shapeMap).filter(function(le){return le.includes(Iy)}).forEach(function(le){s[le]||(u.shapeMap[le].remove(!0),delete u.shapeMap[le])})},T3=function(e,t){var n=0,i=[];return Object.keys(e).forEach(function(o){var a=+e[o];isNaN(a)||(i.push({key:o,value:a,color:t[o]}),n+=a)}),{totalValue:n,configs:i}},I3=function(e){var t=e.attr("r"),n=.6*t;return{lineWidth:t-n,arcR:(t+n)/2}},Zw=function(e){var t=e.x,n=e.y;return{x:t,y:n,centerX:t,centerY:n,minX:t,minY:n,maxX:t,maxY:n,height:0,width:0}},zC=function(e){for(var t=[],n={},o=e.length-1;o>=0;o--){var a=e[o];a.id="".concat(a.x,"|||").concat(a.y),n[a.id]||(n[a.id]=a,t.push(a))}return t},O3=function(e){return zC(e)},Qw=function(e,t){return e.width||e.height?{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}:e},GC=function(e,t,n){var i=function(e,t){var n=Math.abs(e.x-t.centerX),i=Math.abs(e.y-t.centerY);return 0===n&&0===i?0:n/t.width>i/t.height}(t,e);if(0===i){var o=e.centerX,a=e.centerY;return n.y<t.y?a=e.minY:n.x>t.x?o=e.maxX:n.x<t.x?o=e.minX:n.x===t.x&&(a=e.maxY),{x:o,y:a}}return i?{x:t.x>e.centerX?e.maxX:e.minX,y:t.y}:{x:t.x,y:t.y>e.centerY?e.maxY:e.minY}},P3=function(e,t){var n=Math.min(e.minX,t.minX),i=Math.min(e.minY,t.minY),o=Math.max(e.maxX,t.maxX),a=Math.max(e.maxY,t.maxY);return{centerX:(n+o)/2,centerY:(i+a)/2,minX:n,minY:i,maxX:o,maxY:a,height:a-i,width:o-n}},UC=function(e){return[{x:e.minX,y:e.minY},{x:e.maxX,y:e.minY},{x:e.maxX,y:e.maxY},{x:e.minX,y:e.maxY}]},Jw=function(e,t){var n=e.x,i=e.y;return n<t.minX||n>t.maxX||i<t.minY||i>t.maxY},Oy=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},N3=function(e,t,n,i,o){return Oy(e,t)+Oy(e,n)+function(e,t){var i=0;return t.forEach(function(o){o&&(e.x===o.x&&(i+=-2),e.y===o.y&&(i+=-2))}),i}(e,[t,n,i,o])},lae=function r(e,t,n,i,o){void 0===o&&(o=0),e.unshift(t[i]),n[i]&&n[i]!==i&&o<=100&&r(e,t,n,n[i],o+1)},ex=function(e,t,n,i){var o=n.x-e.x,a=n.y-e.y,s=i.x-e.x,u=i.y-e.y,l=n.x-t.x,c=n.y-t.y,f=i.x-t.x,h=i.y-t.y;return(o*u-a*s)*(l*h-c*f)<=0&&(o*c-a*l)*(s*h-u*f)<=0},VC=function(e,t,n){if(n.width||n.height){var i=UC(n),o=i[0],a=i[1],s=i[2],u=i[3];return ex(e,t,o,a)||ex(e,t,o,u)||ex(e,t,a,s)||ex(e,t,s,u)}return!1},cae=function(e,t,n,i){var o=[];return e.forEach(function(a){if(a!==t&&(a.x===t.x||a.y===t.y)){if(VC(a,t,n)||VC(a,t,i))return;o.push(a)}}),zC(o)},L3=function(e,t){var n=[],i=e[0];return n.push("M".concat(i.x," ").concat(i.y)),e.forEach(function(o,a){var s=e[a+1],u=e[a+2];if(s&&u)if(function(e,t,n){return!(e.x===t.x&&t.x===n.x||e.y===t.y&&t.y===n.y)}(o,s,u)){var l=function(e,t,n,i){var o=Oy(e,t),a=Oy(n,t);return o<i&&(i=o),a<i&&(i=a),[{x:t.x-i/o*(t.x-e.x),y:t.y-i/o*(t.y-e.y)},{x:t.x-i/a*(t.x-n.x),y:t.y-i/a*(t.y-n.y)}]}(o,s,u,t),c=l[0],f=l[1];n.push("L".concat(c.x," ").concat(c.y)),n.push("Q".concat(s.x," ").concat(s.y," ").concat(f.x," ").concat(f.y)),n.push("L".concat(f.x," ").concat(f.y))}else n.push("L".concat(s.x," ").concat(s.y));else s&&n.push("L".concat(s.x," ").concat(s.y))}),n.join("")},k3=function(e,t,n,i,o){var a,s;if(n&&n.getType())if("combo"===n.getType()){var u=n.getKeyShape().getBBox();if(u){var l=n.getModel(),c=l.x,f=l.y;(a={x:c,y:f,width:u.width,height:u.height,minX:u.minX+c,maxX:u.maxX+c,minY:u.minY+f,maxY:u.maxY+f}).centerX=(a.minX+a.maxX)/2,a.centerY=(a.minY+a.maxY)/2}else a=Zw(e)}else a=n&&n.getBBox();else a=Zw(e);if(i&&i.getType())if("combo"===i.getType()){var h=i.getKeyShape().getBBox();if(h){var d=i.getModel(),g=d.x,m=d.y;(s={x:g,y:m,width:h.width,height:h.height,minX:h.minX+g,maxX:h.maxX+g,minY:h.minY+m,maxY:h.maxY+m}).centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2}else s=Zw(t)}else s=i&&i.getBBox();else s=Zw(t);var _=Qw(a,o),D=Qw(s,o),L=GC(_,e,t),O=GC(D,t,e),Z=function(e){void 0===e&&(e=[]);var t=[],n=[];e.forEach(function(u){t.push(u.x),n.push(u.y)});var i=Math.min.apply(Math,t),o=Math.max.apply(Math,t),a=Math.min.apply(Math,n),s=Math.max.apply(Math,n);return{centerX:(i+o)/2,centerY:(a+s)/2,maxX:o,maxY:s,minX:i,minY:a,height:s-a,width:o-i}}([L,O]),le=P3(_,Z),pe=P3(D,Z),Ee=[];Ee=Ee.concat(UC(le)).concat(UC(pe));var Re={x:(e.x+t.x)/2,y:(e.y+t.y)/2};[Z,le,pe].forEach(function(Ue){Ee=Ee.concat(function(e,t){return function(e,t){return t<e.minX||t>e.maxX?[]:[{x:t,y:e.minY},{x:t,y:e.maxY}]}(e,t.x).concat(function(e,t){return t<e.minY||t>e.maxY?[]:[{x:e.minX,y:t},{x:e.maxX,y:t}]}(e,t.y))}(Ue,Re).filter(function(at){return Jw(at,_)&&Jw(at,D)}))}),[{x:L.x,y:O.y},{x:O.x,y:L.y}].forEach(function(Ue){Jw(Ue,_)&&Jw(Ue,D)&&Ee.push(Ue)}),Ee.unshift(L),Ee.push(O);var Ve=function(e,t,n,i,o,a,s){var u,l=[],c=((u={})[t.id]=t,u),f={},h={},d={};h[t.id]=0,d[t.id]=N3(t,n,t);var g=new R3;g.add({id:t.id,value:d[t.id]});var _,m={};for(e.forEach(function(le){m[le.id]=le});Object.keys(c).length;){var D=g.minId(!1);if(!D)break;if((_=c[D])===n){var L=[];return lae(L,m,f,n.id),L}delete c[_.id],g.remove(_.id),l.push(_),cae(e,_,i,o).forEach(function(Ee){if(-1===l.indexOf(Ee)){var Re=Ee.id;c[Re]||(c[Re]=Ee);var Ve=d[_.id]+Oy(_,Ee);if(h[Re]&&Ve>=h[Re])return void g.add({id:Re,value:d[Re]});f[Re]=_.id,h[Re]=Ve,d[Re]=h[Re]+N3(Ee,n,t,a,s),g.add({id:Re,value:d[Re]})}})}return[t,n]}(Ee=zC(Ee),L,O,a,s,e,t);return Ve.unshift(e),Ve.push(t),O3(Ve)},R3=function(){function r(){this.arr=[],this.map={},this.arr=[],this.map={}}return r.prototype._innerAdd=function(e,t){for(var n=[0,t-1];n[1]-n[0]>1;){var i=Math.floor((n[0]+n[1])/2);if(this.arr[i].value>e.value)n[1]=i;else{if(!(this.arr[i].value<e.value))return this.arr.splice(i,0,e),void(this.map[e.id]=!0);n[0]=i}}this.arr.splice(n[1],0,e),this.map[e.id]=!0},r.prototype.add=function(e){delete this.map[e.id];var t=this.arr.length;return t?this.arr[t-1].value<e.value?(this.arr.push(e),void(this.map[e.id]=!0)):void this._innerAdd(e,t):(this.arr.push(e),void(this.map[e.id]=!0))},r.prototype.remove=function(e){!this.map[e]||delete this.map[e]},r.prototype._clearAndGetMinId=function(){for(var e,t=this.arr.length-1;t>=0;t--)this.map[this.arr[t].id]?e=this.arr[t].id:this.arr.splice(t,1);return e},r.prototype._findFirstId=function(){for(;this.arr.length;){var e=this.arr.shift();if(this.map[e.id])return e.id}},r.prototype.minId=function(e){return e?this._clearAndGetMinId():this._findFirstId()},r}(),bae={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},fallbackRoute:function(e,t,n,i,o){return O3(k3(e,t,n,i,o.offset))}},Bh=(Math,function(e,t){var n=Math.round(Math.abs(e/t));return n<0?0:(e<0?-1:1)*n}),HC=function(e,t){var n=t.x-e.x,i=t.y-e.y;return n||i?Math.atan2(i,n):0},F3=function(e,t){var n=Math.abs(e-t);return n>Math.PI?2*Math.PI-n:n},B3=function(e,t,n){for(var i=1/0,o=0,a=t.length;o<a;o++){var s=n(e,t[o]);s<i&&(i=s)}return i},j3=function(e,t,n,i,o){var a=[];if(!n)return[e];var s=o.directions,u=o.offset,l=n.getBBox(),c=t.x>l.minX&&t.x<l.maxX&&t.y>l.minY&&t.y<l.maxY,f=Qw(l,u);for(var h in f)f[h]=Bh(f[h],o.gridSize);if(c){for(var d=0,g=s;d<g.length;d++){var m=g[d],_=[[{x:f.minX,y:f.minY},{x:f.maxX,y:f.minY}],[{x:f.minX,y:f.minY},{x:f.minX,y:f.maxY}],[{x:f.maxX,y:f.minY},{x:f.maxX,y:f.maxY}],[{x:f.minX,y:f.maxY},{x:f.maxX,y:f.maxY}]];for(h=0;h<4;h++){var D=_[h],L=su.getLineIntersect(e,{x:e.x+m.stepX*f.width,y:e.y+m.stepY*f.height},D[0],D[1]);L&&!VC(e,L,l)&&(L.id="".concat(L.x,"|||").concat(L.y),a.push(L))}}return a}var O=GC(f,e,i);return O.id="".concat(O.x,"|||").concat(O.y),[O]},WC=function(e,t,n,i){var o=HC(e,t),a=n[e.id];if(!a){var s=HC(i,e);return F3(s,o)}var u=HC({x:a.x,y:a.y},e);return F3(u,o)},xae=function(e,t,n,i,o,a,s){var u=[i],l=i,c=e.id,f=e.x,h=e.y,d={x:f,y:h,id:c};WC(d,a,t,n)&&u.unshift(l={x:a.x===i.x?i.x:d.x*s,y:a.y===i.y?i.y:d.y*s});for(var g=t[c];g&&g.id!==c;){var m={x:f,y:h,id:c},_={x:g.x,y:g.y,id:g.id};WC(_,m,t,n)&&u.unshift(l={x:_.x===m.x?l.x:_.x*s,y:_.y===m.y?l.y:_.y*s}),f=_.x,h=_.y,g=t[c=_.id]}return u[0].x=f===n.x?o.x:l.x,u[0].y=h===n.y?o.y:l.y,u.unshift(o),u};NF("polyline",{options:{color:pr.defaultEdge.color,size:pr.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:pr.defaultEdge.style.stroke,lineAppendWidth:pr.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:pr.edgeLabel.style.fill,fontSize:pr.edgeLabel.style.fontSize,fontFamily:pr.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:(0,De.__assign)({},pr.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(e,t){var n=this.getShapeStyle(e);0===n.radius&&delete n.radius;var i=t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:n});return t.shapeMap["edge-shape"]=i,i},getShapeStyle:function(e){var i=(0,ue.mix)({},this.options.style,{stroke:e.color},e.style);e=this.getPathPoints(e),this.radius=i.radius,this.offset=i.offset;var o=e.startPoint,a=e.endPoint,s=this.getControlPoints(e),u=[o];s&&(u=u.concat(s)),u.push(a);var l=e.sourceNode,c=e.targetNode,f=i.radius,d=(0,ue.mix)({},this.options.routeCfg,e.routeCfg);d.offset=i.offset;var g=this.getPath(u,l,c,f,d,!Boolean(s));return((0,ue.isArray)(g)&&g.length<=1||(0,ue.isString)(g)&&-1===g.indexOf("L"))&&(g="M0 0, L0 0"),(isNaN(o.x)||isNaN(o.y)||isNaN(a.x)||isNaN(a.y))&&(g="M0 0, L0 0"),(0,ue.mix)({},pr.defaultEdge.style,i,{lineWidth:e.size,path:g})},updateShapeStyle:function(e,t){var n=t.getContainer();if(t.isVisible()){var i={stroke:e.color},o=n.shapeMap["edge-shape"]||n.find(function(Z){return"edge-shape"===Z.get("className")})||t.getKeyShape(),a=e.size,s=(e=this.getPathPoints(e)).startPoint,u=e.endPoint,l=this.getControlPoints(e),c=[s];l&&(c=c.concat(l)),c.push(u);var f=o.attr(),h=(0,ue.mix)({},i,f,e.style),d=e.sourceNode,g=e.targetNode,m=h.radius,D=(0,ue.mix)({},this.options.routeCfg,e.routeCfg);D.offset=h.offset;var L=this.getPath(c,d,g,m,D,!Boolean(l));((0,ue.isArray)(L)&&L.length<=1||(0,ue.isString)(L)&&-1===L.indexOf("L"))&&(L="M0 0, L0 0"),(isNaN(s.x)||isNaN(s.y)||isNaN(u.x)||isNaN(u.y))&&(L="M0 0, L0 0"),f.endArrow&&!1===h.endArrow&&(e.style.endArrow={path:""}),f.startArrow&&!1===h.startArrow&&(e.style.startArrow={path:""});var O=(0,ue.mix)(i,o.attr(),{lineWidth:a,path:L},e.style);o&&o.attr(O)}},getPath:function(e,t,n,i,o,a){var s=o.offset,u=o.obstacles,l=o.simple;if(!s||e.length>2||!1===a){if(i)return L3(e,i);var c=[];return(0,ue.each)(e,function(g,m){c.push(0===m?["M",g.x,g.y]:["L",g.x,g.y])}),c}!1!==l&&!u?.length&&(l=!0);var f=l?k3(e[e.length-1],e[0],n,t,s):function(e,t,n,i,o){if(isNaN(e.x)||isNaN(t.x))return[];var a=(0,ue.deepMix)(bae,o);a.obstacles=a.obstacles||[];var s=a.penalties,u=a.gridSize,l=function(e,t,n){var i={};return e.forEach(function(o){if(o)for(var a=Qw(o.getBBox(),n),s=Bh(a.minX,t);s<=Bh(a.maxX,t);s+=1)for(var u=Bh(a.minY,t);u<=Bh(a.maxY,t);u+=1)i["".concat(s,"|||").concat(u)]=!0}),i}(a.obstacles.concat([n,i]),u,a.offset),c={x:Bh(e.x,u),y:Bh(e.y,u)},f={x:Bh(t.x,u),y:Bh(t.y,u)};e.id="".concat(c.x,"|||").concat(c.y),t.id="".concat(f.x,"|||").concat(f.y);var h=j3(c,e,n,f,a),d=j3(f,t,i,c,a);h.forEach(function(mn){delete l[mn.id]}),d.forEach(function(mn){delete l[mn.id]});for(var g={},m={},_={},D={},L={},O=new R3,Z=0;Z<h.length;Z++){var le=h[Z];g[le.id]=le,D[le.id]=0,L[le.id]=B3(le,d,a.distFunc),O.add({id:le.id,value:L[le.id]})}var Ee,Re,Ve,Ue,at,_t,pe=a.maximumLoops,vn=1/0,Cn={};for(d.forEach(function(mn){Cn["".concat(mn.x,"|||").concat(mn.y)]=!0}),Object.keys(g).forEach(function(mn){var On=g[mn].id;L[On]<=vn&&(vn=L[On],Ee=g[On])});Object.keys(g).length>0&&pe>0;){var Tt=O.minId((pe+1)%30==0);if(!Tt)break;if(Cn["".concat((Ee=g[Tt]).x,"|||").concat(Ee.y)])return xae(Ee,_,c,t,e,f,u);for(delete g[Ee.id],O.remove(Ee.id),m[Ee.id]=!0,Z=0;Z<a.directions.length;Z++){Re=a.directions[Z];var kt="".concat(Math.round(Ee.x)+Re.stepX,"|||").concat(Math.round(Ee.y)+Re.stepY);if(Ve={x:Ee.x+Re.stepX,y:Ee.y+Re.stepY,id:kt},!(m[kt]||(_t=WC(Ee,Ve,_,c),_t>a.maxAllowedDirectionChange||l[kt]))){g[kt]||(g[kt]=Ve);var Ln=s[_t];Ue=a.distFunc(Ee,Ve)+(isNaN(Ln)?u:Ln),at=D[Ee.id]+Ue;var Kn=D[kt];Kn&&at>=Kn||(_[kt]=Ee,D[kt]=at,L[kt]=at+B3(Ve,d,a.distFunc),O.add({id:kt,value:L[kt]}))}}pe-=1}return a.fallbackRoute(e,t,n,i,a)}(e[0],e[e.length-1],t,n,o);return f&&f.length?i?L3(f,i):(f=function(e){if(!e?.length)return e;for(var t=e[e.length-1],n={x:t.x,y:t.y},i=[t],o=[t],a=e.length-2;a>=0;a--){var u,s=e[a];s.x===n.x?i.push(s):(i=[s],n.x=s.x),s.y===n.y?o.push(s):(o=[s],n.y=s.y),i.length>2?(u=e.indexOf(i[1]))>-1&&e.splice(u,1):o.length>2&&(u=e.indexOf(o[1]))>-1&&e.splice(u,1)}return e}(f),su.pointsToPolygon(f)):"M0 0, L0 0"}},"single-edge");var z3=kh.cloneEvent,G3=kh.isNaN,U3=Math.abs,Sae=["shift","ctrl","alt","control"];const Mae={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{mousedown:"onMouseDown",drag:"onDragMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(e){var t=this.origin,n=+e.clientX,i=+e.clientY;if(!G3(n)&&!G3(i)){var o=n-t.x,a=i-t.y;"x"===this.get("direction")?a=0:"y"===this.get("direction")&&(o=0),this.origin={x:n,y:i};var s=this.graph.get("width"),u=this.graph.get("height"),l=this.graph.get("canvas").getCanvasBBox(),c=this.scalableRange,f=this.scalableRange;c<1&&c>-1&&(c*=s,f*=u),(l.minX<=s+c&&l.minX+o>s+c||l.maxX+c>=0&&l.maxX+c+o<0)&&(o=0),(l.minY<=u+f&&l.minY+a>u+f||l.maxY+f>=0&&l.maxY+f+a<0)&&(a=0),this.graph.translate(o,a)}},onTouchStart:function(e){var n=e.originalEvent.touches;n[0]&&n[1]||(e.preventDefault(),this.mousedown=!0,this.onDragStart(e))},onMouseDown:function(e){this.mousedown=!0},onDragMove:function(e){!this.mousedown||(this.dragstart?this.onDrag(e):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this,n=e.originalEvent;if((!n||"touchstart"===e.name||0===n.button)&&(!("touchstart"!==e.name&&typeof window<"u"&&window.event)||window.event.buttons||window.event.button)&&this.shouldBegin(e,this)&&!t.keydown&&this.allowDrag(e)){if(t.origin={x:e.clientX,y:e.clientY},t.dragging=!1,this.enableOptimize){for(var i=this.graph,o=i.getEdges(),a=0,s=o.length;a<s;a++){var u=o[a].get("group").get("children");!u||u.forEach(function(O){O.set("ori-visibility",O.get("ori-visibility")||O.get("visible")),O.hide()})}for(var l=i.getNodes(),c=0,f=l.length;c<f;c++)for(var g=0,m=l[c].getContainer().get("children");g<m.length;g++){var _=m[g];_.get("isKeyShape")||(_.set("ori-visibility",_.get("ori-visibility")||_.get("visible")),_.hide())}}if(typeof window<"u"){var L=this;this.handleDOMContextMenu=function(O){return L.onMouseUp(O)},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}},onTouchMove:function(e){var n=e.originalEvent.touches;n[0]&&n[1]?this.onMouseUp(e):(e.preventDefault(),this.onDrag(e))},onDrag:function(e){if(this.mousedown){var t=this.graph;if(!this.keydown&&this.allowDrag(e)&&(e=z3(e),this.origin)){if(this.dragging)e.type="drag",t.emit("canvas:drag",e);else{if(U3(this.origin.x-e.clientX)+U3(this.origin.y-e.clientY)<10)return;this.shouldBegin(e,this)&&(e.type="dragstart",t.emit("canvas:dragstart",e),this.originPosition={x:e.clientX,y:e.clientY},this.dragging=!0)}this.shouldUpdate(e,this)&&this.updateViewport(e)}}},onMouseUp:function(e){var t,n;this.mousedown=!1,this.dragstart=!1;var i=this.graph;if(!this.keydown){var o=i.getZoom(),a=i.get("modeController"),s=null===(n=null===(t=a?.modes[a.mode])||void 0===t?void 0:t.filter(function(Ee){return"zoom-canvas"===Ee.type}))||void 0===n?void 0:n[0],u=s?s.optimizeZoom||.1:0;if(this.enableOptimize){for(var l=i.getEdges(),c=0,f=l.length;c<f;c++){var h=l[c].get("group").get("children");!h||h.forEach(function(Ee){var Re=Ee.get("ori-visibility");Ee.set("ori-visibility",void 0),Re&&Ee.show()})}if(o>u)for(var d=i.getNodes(),g=0,m=d.length;g<m;g++)for(var L=0,O=d[g].getContainer().get("children");L<O.length;L++){var Z=O[L];if(!Z.get("isKeyShape")){var pe=Z.get("ori-visibility");Z.set("ori-visibility",void 0),pe&&Z.show()}}}if(!this.dragging)return void(this.origin=null);e=z3(e),this.shouldEnd(e,this)&&this.updateViewport(e),e.type="dragend",e.dx=e.clientX-this.originPosition.x,e.dy=e.clientY-this.originPosition.y,i.emit("canvas:dragend",e),this.endDrag(),typeof window<"u"&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1,this.mousedown=!1,this.dragstart=!1},onKeyDown:function(e){var n=e.key;!n||(this.keydown=Sae.indexOf(n.toLowerCase())>-1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1},allowDrag:function(e){var t,n,i=e.target,o=i&&i.isCanvas&&i.isCanvas();if((0,ue.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!o)return!1;if((0,ue.isObject)(this.allowDragOnItem)){var a=this.allowDragOnItem,s=a.node,u=a.edge,l=a.combo,c=null===(n=null===(t=e.item)||void 0===t?void 0:t.getType)||void 0===n?void 0:n.call(t);if(!s&&"node"===c||!u&&"edge"===c||!l&&"combo"===c)return!1}return!0}},Cae={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:mousedown":"onMouseDown",drag:"onDragMove",dragend:"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd",afterchangedata:"onDragEnd"}},validationCombo:function(e){return!(!this.origin||!e||e.destroyed)&&"combo"===e.getType()},onTouchStart:function(e){if(e.item){try{var n=e.originalEvent.touches;if(n[0]&&n[1])return;e.preventDefault()}catch{console.warn("Touch original event not exist!")}this.mousedown={item:e.item,target:e.target},this.dragstart=!0,this.onDragStart(e)}},onTouchMove:function(e){try{var n=e.originalEvent.touches;if(n[0]&&n[1])return void this.onDragEnd(e);e.preventDefault()}catch{console.warn("Touch original event not exist!")}this.onDrag(e)},onMouseDown:function(e){this.mousedown={item:e.item,target:e.target}},onDragMove:function(e){var t,n;"node"===(null===(n=null===(t=e.item)||void 0===t?void 0:t.getType)||void 0===n?void 0:n.call(t))?!this.mousedown||(this.dragstart?this.onDrag((0,De.__assign)((0,De.__assign)({},e),this.mousedown)):(this.dragstart=!0,this.onDragStart(e))):this.onDragEnd()},onDragStart:function(e){var t=this;if(this.currentShouldEnd=!0,this.shouldBegin((0,De.__assign)((0,De.__assign)({},e),this.mousedown),this)){var n=this.mousedown,i=n.item,o=n.target;if(i&&!i.destroyed&&!i.hasLocked()){if(i.getContainer().set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(i),o&&o.get("isAnchorPoint"))return;var u=this.graph;this.targets=[],this.targetCombo=null;var l=u.findAllByState("node",this.selectedState),c=i.get("id");if(0===l.filter(function(g){var m=g.get("id");return c===m}).length?this.targets.push(i):l.length>1?l.forEach(function(g){g.hasLocked()||t.targets.push(g)}):this.targets.push(i),this.graph.get("enabledStack")&&this.enableStack){var h=[];this.targets.forEach(function(g){var m=g.getModel();h.push({x:m.x,y:m.y,id:m.id})}),this.set("beforeDragNodes",h)}if(this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(g){g.getEdges().forEach(function(_){!_.isVisible()||(t.hidenEdge[_.getID()]=!0,_.hide())})}),this.origin={x:e.x,y:e.y},this.point={},this.originPoint={},typeof window<"u"){var d=this;this.handleDOMContextMenu=function(){return d.onDragEnd()},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}}},onDrag:function(e){var t=this;if(this.mousedown&&this.origin&&this.shouldUpdate(e,this))if(this.get("enableDelegate"))this.updateDelegate(e);else if(this.enableDebounce)this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos});else{var n={};this.targets.map(function(i){t.update(i,e);var o=i.getModel().comboId;o&&(n[o]=t.graph.findById(o))}),this.onlyChangeComboSize&&this.updateParentCombos()}},onDragEnd:function(e){var n,t=this;if(this.mousedown=!1,this.dragstart=!1,this.origin){null===(n=this.cachedCaptureItems)||void 0===n||n.forEach(function(a){a.getContainer().set("capture",!0)}),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(a){a.getEdges().forEach(function(u){t.hidenEdge[u.getID()]&&u.show(),u.refresh()})}),this.hidenEdge={};var i=this.graph;if(i.get("enabledStack")&&this.enableStack){var o={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach(function(a){o.before.nodes.push(a)}),this.targets.forEach(function(a){var s=a.getModel();o.after.nodes.push({x:s.x,y:s.y,id:s.id})}),i.pushStack("update",(0,ue.clone)(o))}i.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null,typeof window<"u"&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)}},onDropCombo:function(e){var t=e.item;if(this.currentShouldEnd=this.shouldEnd(e,t,this),this.updatePositions(e,!this.currentShouldEnd),this.currentShouldEnd&&this.validationCombo(t)){var n=this.graph;if(this.comboActiveState&&n.setItemState(t,this.comboActiveState,!1),this.targetCombo=t,this.onlyChangeComboSize)n.updateCombos();else{var i=t.getModel();this.targets.map(function(o){o.getModel().comboId!==i.id&&n.updateComboTree(o,i.id)}),n.updateCombo(t)}n.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(e){var t=this.graph;this.currentShouldEnd=this.shouldEnd(e,void 0,this),this.updatePositions(e,!this.currentShouldEnd),this.targets&&0!==this.targets.length&&this.currentShouldEnd&&(this.onlyChangeComboSize?this.updateParentCombos():this.targets.map(function(n){n.getModel().comboId&&t.updateComboTree(n)}))},onDropNode:function(e){if(this.targets&&0!==this.targets.length){var t=this,n=e.item,i=t.graph,o=n.getModel().comboId,a=o?i.findById(o):void 0;if(this.currentShouldEnd=this.shouldEnd(e,a,this),this.updatePositions(e,!this.currentShouldEnd),this.currentShouldEnd){if(this.onlyChangeComboSize)this.updateParentCombos();else if(o){var s=i.findById(o);t.comboActiveState&&i.setItemState(s,t.comboActiveState,!1),this.targets.map(function(u){var l=u.getModel();o!==l.comboId&&i.updateComboTree(u,o)}),i.updateCombo(s)}else this.targets.map(function(u){u.getModel().comboId&&i.updateComboTree(u)});i.emit("dragnodeend",{items:this.targets,targetItem:n})}}},onDragEnter:function(e){var t=e.item;this.validationCombo(t)&&this.comboActiveState&&this.graph.setItemState(t,this.comboActiveState,!0)},onDragLeave:function(e){var t=e.item;this.validationCombo(t)&&this.comboActiveState&&this.graph.setItemState(t,this.comboActiveState,!1)},updatePositions:function(e,t){var n=this;!this.targets||0===this.targets.length||(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos}):t||this.targets.map(function(i){return n.update(i,e)}):this.targets.map(function(i){return n.update(i,e,t)}))},update:function(e,t,n){var i=this.origin,o=e.get("model"),a=e.get("id");this.point[a]||(this.point[a]={x:o.x||0,y:o.y||0});var s=t.x-i.x+this.point[a].x,u=t.y-i.y+this.point[a].y;n&&(s+=i.x-t.x,u+=i.y-t.y);var l={x:s,y:u};this.get("updateEdge")?this.graph.updateItem(e,l,!1):e.updatePosition(l)},debounceUpdate:(0,ue.debounce)(function(r){var e=r.targets,t=r.graph,n=r.point,i=r.origin,o=r.evt,a=r.updateEdge,s=r.onlyChangeComboSize,u=r.updateParentCombos;e.map(function(l){var c=l.get("model"),f=l.get("id");n[f]||(n[f]={x:c.x||0,y:c.y||0});var g={x:o.x-i.x+n[f].x,y:o.y-i.y+n[f].y};a?t.updateItem(l,g,!1):l.updatePosition(g)}),s&&u(t,e)},50,!0),updateDelegate:function(e){var t=this.graph;if(this.delegateRect)this.delegateRect.attr({x:e.x-this.origin.x+this.originPoint.minX,y:e.y-this.origin.y+this.originPoint.minY});else{var n=t.get("group"),i=(0,ue.deepMix)({},tp.delegateStyle,this.delegateStyle),o=this.calculationGroupPosition(e),a=o.x,s=o.y,u=o.width,l=o.height;this.originPoint={x:a,y:s,width:u,height:l,minX:o.minX,minY:o.minY},this.delegateRect=n.addShape("rect",{attrs:(0,De.__assign)({width:u,height:l,x:a,y:s},i),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(e){var t=this.targets;0===t.length&&t.push(e.item);for(var n=1/0,i=-1/0,o=1/0,a=-1/0,s=0;s<t.length;s++){var l=t[s].getBBox(),c=l.minX,f=l.minY,h=l.maxX,d=l.maxY;c<n&&(n=c),f<o&&(o=f),h>i&&(i=h),d>a&&(a=d)}return{x:Math.floor(n),y:Math.floor(o),width:Math.ceil(i)-Math.floor(n),height:Math.ceil(a)-Math.floor(o),minX:n,minY:o}},updateParentCombos:function(e,t){var n=e||this.graph,o={};(t||this.targets)?.forEach(function(a){var s=a.getModel().comboId;s&&(o[s]=n.findById(s))}),Object.values(o).forEach(function(a){a&&n.updateCombo(a)})}},Aae={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return"mouseenter"===this.get("trigger")?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(e){try{var n=e.originalEvent.touches;if(n[0]&&n[1])return;e.preventDefault()}catch{console.warn("Touch original event not exist!")}this.setAllItemStates(e)},clearOnTouchStart:function(e){try{var n=e.originalEvent.touches;if(n[0]&&n[1])return;e.preventDefault()}catch{console.warn("Touch original event not exist!")}this.clearActiveState(e)},setAllItemStates:function(e){clearTimeout(this.timer),this.throttleSetAllItemStates(e,this)},clearActiveState:function(e){var t=this;this.timer=setTimeout(function(){t.throttleClearActiveState(e,t)},50)},throttleSetAllItemStates:(0,ue.throttle)(function(r,e){var t=r.item,n=e.graph;if(n&&!n.destroyed&&(e.item=t,e.shouldUpdate(r.item,{event:r,action:"activate"},e))){for(var i=e.activeState,o=e.inactiveState,a=n.getNodes(),s=n.getCombos(),u=n.getEdges(),l=n.get("vedges"),c=a.length,f=s.length,h=u.length,d=l.length,g=e.inactiveItems||{},m=e.activeItems||{},_=0;_<c;_++){var D=a[_],L=D.getID(),O=D.hasState("selected");e.resetSelected&&O&&n.setItemState(D,"selected",!1),m[L]&&(n.setItemState(D,i,!1),delete m[L]),o&&!g[L]&&(n.setItemState(D,o,!0),g[L]=D)}for(_=0;_<f;_++){var Z=s[_],le=Z.getID();O=Z.hasState("selected"),e.resetSelected&&O&&n.setItemState(Z,"selected",!1),m[le]&&(n.setItemState(Z,i,!1),delete m[le]),o&&!g[le]&&(n.setItemState(Z,o,!0),g[le]=Z)}for(_=0;_<h;_++)m[Ee=(pe=u[_]).getID()]&&(n.setItemState(pe,i,!1),delete m[Ee]),o&&!g[Ee]&&(n.setItemState(pe,o,!0),g[Ee]=pe);for(_=0;_<d;_++){var Re=l[_],Ve=Re.getID();m[Ve]&&(n.setItemState(Re,i,!1),delete m[Ve]),o&&!g[Ve]&&(n.setItemState(Re,o,!0),g[Ve]=Re)}if(t&&!t.destroyed){o&&(n.setItemState(t,o,!1),delete g[t.getID()]),m[t.getID()]||(n.setItemState(t,i,!0),m[t.getID()]=t);var Ue=t.getEdges(),at=Ue.length;for(_=0;_<at;_++){var pe,Ee=(pe=Ue[_]).getID(),_t=void 0,vn=(_t=pe.getSource()===t?pe.getTarget():pe.getSource()).getID();o&&g[vn]&&(n.setItemState(_t,o,!1),delete g[vn]),m[vn]||(n.setItemState(_t,i,!0),m[vn]=_t),g[Ee]&&(n.setItemState(pe,o,!1),delete g[Ee]),m[Ee]||(n.setItemState(pe,i,!0),m[Ee]=pe),pe.toFront()}}e.activeItems=m,e.inactiveItems=g,n.emit("afteractivaterelations",{item:r.item,action:"activate"})}},50,{trailing:!0,leading:!0}),throttleClearActiveState:(0,ue.throttle)(function(r,e){var t=e.get("graph");if(t&&!t.destroyed&&e.shouldUpdate(r.item,{event:r,action:"deactivate"},e)){var n=e.activeState,i=e.inactiveState,a=e.inactiveItems||{};Object.values(e.activeItems||{}).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,n)}),Object.values(a).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,i)}),e.activeItems={},e.inactiveItems={},t.emit("afteractivaterelations",{item:r.item||e.get("item"),action:"deactivate"})}},50,{trailing:!0,leading:!0})};var tx=Math.min,V3=Math.max,H3=Math.abs,Dae=["drag","shift","ctrl","alt","control"];const Tae={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:"shift",includeEdges:!0,includeCombos:!1,selectedEdges:[],selectedNodes:[],selectedCombos:[]}},getEvents:function(){return Dae.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior brush-select \u7684 trigger \u53c2\u6570\u4e0d\u5408\u6cd5\uff0c\u8bf7\u8f93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),"drag"===this.trigger?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(e){var n=this.brush;e.item||"drag"!==this.trigger&&!this.keydown||(this.selectedNodes&&0!==this.selectedNodes.length&&this.clearStates(),n||(n=this.createBrush()),this.originPoint={x:e.canvasX,y:e.canvasY},n.attr({width:0,height:0}),n.show(),this.dragging=!0)},onMouseMove:function(e){!this.dragging||"drag"!==this.trigger&&!this.keydown||this.updateBrush(e)},onMouseUp:function(e){!this.brush&&!this.dragging||"drag"!==this.trigger&&!this.keydown||(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(e),this.dragging=!1)},clearStates:function(){var t=this.graph,n=this.selectedState,i=t.findAllByState("node",n),o=t.findAllByState("edge",n),a=t.findAllByState("combo",n);i.forEach(function(s){return t.setItemState(s,n,!1)}),o.forEach(function(s){return t.setItemState(s,n,!1)}),a.forEach(function(s){return t.setItemState(s,n,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.selectedCombos=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges,this.selectedCombos),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},isBBoxCenterInRect:function(e,t,n,i,o){var a=e.getBBox();return a.centerX>=t&&a.centerX<=n&&a.centerY>=i&&a.centerY<=o},getSelectedNodes:function(e){var t=this,n=this,i=n.graph,o=n.originPoint,a=n.shouldUpdate,s=n.isBBoxCenterInRect,u=this.selectedState,l={x:e.x,y:e.y},c=i.getPointByCanvas(o.x,o.y),f=tx(l.x,c.x),h=V3(l.x,c.x),d=tx(l.y,c.y),g=V3(l.y,c.y),m=[],_=[];i.getNodes().forEach(function(O){if(O.isVisible()&&s(O,f,h,d,g)&&a(O,"select",t)){m.push(O);var Z=O.getModel();_.push(Z.id),i.setItemState(O,u,!0)}});var D=[];this.includeEdges&&m.forEach(function(O){O.getOutEdges().forEach(function(le){if(le.isVisible()){var pe=le.getModel(),Re=pe.target;_.includes(pe.source)&&_.includes(Re)&&a(le,"select",t)&&(D.push(le),i.setItemState(le,t.selectedState,!0))}})});var L=[];this.includeCombos&&i.getCombos().forEach(function(O){if(O.isVisible()&&s(O,f,h,d,g)&&a(O,"select",t)){L.push(O);var Z=O.getModel();_.push(Z.id),i.setItemState(O,u,!0)}}),this.selectedEdges=D,this.selectedNodes=m,this.selectedCombos=L,this.onSelect&&this.onSelect(m,D,L),i.emit("nodeselectchange",{selectedItems:{nodes:m,edges:D,combos:L},select:!0})},createBrush:function(){var t=this.graph.get("canvas").addShape("rect",{attrs:this.brushStyle,capture:!1,name:"brush-shape"});return this.brush=t,this.delegate=t,t},updateBrush:function(e){var t=this.originPoint;this.brush.attr({width:H3(e.canvasX-t.x),height:H3(e.canvasY-t.y),x:tx(e.canvasX,t.x),y:tx(e.canvasY,t.y)})},onKeyDown:function(e){var t=e.key;if(t){var n=this.trigger.toLowerCase(),i=t.toLowerCase();this.keydown=i===n||"control"===i&&"ctrl"===n||"ctrl"===i&&"control"===n}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}};var Iae=["shift","ctrl","alt","control"];const Oae={getDefaultCfg:function(){return{multiple:!0,trigger:"shift",selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0}},getEvents:function(){var e=this;return Iae.indexOf(e.trigger.toLowerCase())>-1||(e.trigger="shift",console.warn("Behavior click-select \u7684 trigger \u53c2\u6570\u4e0d\u5408\u6cd5\uff0c\u8bf7\u8f93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),e.multiple?{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(e){var t=this,n=e.item;if(n&&!n.destroyed){var i=n.getType(),o=t.graph,a=t.keydown,s=t.multiple,u=t.shouldUpdate;if((0,t.shouldBegin)(e,t)){if(!a||!s){var c=o.findAllByState("node",t.selectedState).concat(o.findAllByState("edge",t.selectedState)).concat(o.findAllByState("combo",t.selectedState));(0,ue.each)(c,function(m){m!==n&&o.setItemState(m,t.selectedState,!1)})}if(!function(){switch(i){case"node":return t.selectNode;case"edge":return t.selectEdge;case"combo":return t.selectCombo;default:return!1}}()){var h=o.findAllByState("node",t.selectedState),d=o.findAllByState("edge",t.selectedState),g=o.findAllByState("combo",t.selectedState);return void o.emit("nodeselectchange",{selectedItems:{nodes:h,edges:d,combos:g},select:!1})}n.hasState(t.selectedState)?(u(e,t)&&o.setItemState(n,t.selectedState,!1),h=o.findAllByState("node",t.selectedState),d=o.findAllByState("edge",t.selectedState),g=o.findAllByState("combo",t.selectedState),o.emit("nodeselectchange",{target:n,selectedItems:{nodes:h,edges:d,combos:g},select:!1})):(u(e,t)&&o.setItemState(n,t.selectedState,!0),h=o.findAllByState("node",t.selectedState),d=o.findAllByState("edge",t.selectedState),g=o.findAllByState("combo",t.selectedState),o.emit("nodeselectchange",{target:n,selectedItems:{nodes:h,edges:d,combos:g},select:!0}))}}},onCanvasClick:function(e){var t=this,i=this.graph;if((0,this.shouldBegin)(e,this)){var a=i.findAllByState("node",this.selectedState);(0,ue.each)(a,function(l){i.setItemState(l,t.selectedState,!1)});var s=i.findAllByState("edge",this.selectedState);(0,ue.each)(s,function(l){i.setItemState(l,t.selectedState,!1)});var u=i.findAllByState("combo",this.selectedState);(0,ue.each)(u,function(l){i.setItemState(l,t.selectedState,!1)}),i.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})}},onKeyDown:function(e){var n=e.key;!n||(this.keydown=n.toLowerCase()===this.trigger.toLowerCase()||"control"===n.toLowerCase())},onKeyUp:function(){this.keydown=!1}};var Pae=Nl;const Nae={getDefaultCfg:function(){return{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},animate:!1,animateCfg:{duration:500}}},getEvents:function(){var e=this.fixSelectedItems;return e.fixState||(e.fixState="selected"),e.fixAll&&(e.fixLineWidth=!0,e.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(e){var t=e.originalEvent.touches,n=t[0],i=t[1];e.preventDefault(),i&&(this.shouldBegin&&!this.shouldBegin(e,this)||(this.startPoint={pageX:n.pageX,pageY:n.pageY},this.moveable=!0,i&&(this.endPoint={pageX:i.pageX,pageY:i.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(e){if(this.moveable){e.preventDefault();var t=e.originalEvent.touches,n=t[0],i=t[1];if(i){this.endPoint||(this.endPoint={pageX:i.pageX,pageY:i.pageY});var o=function(m,_){return Math.hypot(_.x-m.x,_.y-m.y)},a=o({x:n.pageX,y:n.pageY},{x:i.pageX,y:i.pageY})/o({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),s=this.originScale*a;this.currentScale=s;var u=this.get("minZoom")||this.graph.get("minZoom");if(!(s>(this.get("maxZoom")||this.graph.get("maxZoom"))||s<u)){var c=this.get("animate"),f=this.get("animateCfg"),d=this.graph.get("canvas").getPointByClient(e.clientX,e.clientY);this.graph.zoomTo(s,{x:d.x,y:d.y},c,f),this.graph.emit("wheelzoom",e)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(e){var t=this,i=this.graph,o=this.fixSelectedItems;if((!this.shouldBegin||this.shouldBegin(e,this))&&this.shouldUpdate(e,this)){e.preventDefault();var s=i.get("canvas").getPointByClient(e.clientX,e.clientY),u=this.get("sensitivity"),l=i.getZoom(),f=l;f=l*(e.wheelDelta<0?1-.05*u:1/(1-.05*u));var h=this.get("minZoom")||i.get("minZoom"),d=this.get("maxZoom")||i.get("maxZoom");if(f>d?f=d:f<h&&(f=h),this.get("enableOptimize")){var m=this.get("optimizeZoom"),_=this.get("optimized"),D=i.getNodes(),L=i.getEdges(),O=D.length,Z=L.length;if(!_){for(var le=0;le<O;le++)if(!(pe=D[le]).destroyed)for(var Re=(Ee=pe.get("group").get("children")).length,Ve=0;Ve<Re;Ve++)!(Ue=Ee[Ve]).destoryed&&!Ue.get("isKeyShape")&&(Ue.set("ori-visibility",Ue.get("ori-visibility")||Ue.get("visible")),Ue.hide());for(var at=0;at<Z;at++)for(Re=(Ee=(_t=L[at]).get("group").get("children")).length,Ve=0;Ve<Re;Ve++)(Ue=Ee[Ve]).set("ori-visibility",Ue.get("ori-visibility")||Ue.get("visible")),Ue.hide();this.set("optimized",!0)}clearTimeout(this.get("timeout"));var vn=setTimeout(function(){var zi=i.getZoom();if(t.get("optimized")){t.set("optimized",!1);for(var Pi=0;Pi<O;Pi++){var wo=D[Pi],Yr=(Oo=wo.get("group").get("children")).length;if(zi<m){var qi=($i=wo.getKeyShape()).get("ori-visibility");$i.set("ori-visibility",void 0),qi&&$i.show()}else for(var Po=0;Po<Yr;Po++)qi=(Ji=Oo[Po]).get("ori-visibility"),Ji.set("ori-visibility",void 0),!Ji.get("visible")&&qi&&qi&&Ji.show()}for(var vo=0;vo<Z;vo++){var Oo,$i,ga=L[vo];if(Yr=(Oo=ga.get("group").get("children")).length,zi<m)qi=($i=ga.getKeyShape()).get("ori-visibility"),$i.set("ori-visibility",void 0),qi&&$i.show();else for(Po=0;Po<Yr;Po++){var Ji;(Ji=Oo[Po]).get("visible")||(qi=Ji.get("ori-visibility"),Ji.set("ori-visibility",void 0),qi&&Ji.show())}}}},100);this.set("timeout",vn)}if(l<=1){var Cn=void 0,Tt=void 0;if(o.fixAll||o.fixLineWidth||o.fixLabel){Cn=i.findAllByState("node",o.fixState),Tt=i.findAllByState("edge",o.fixState);for(var kt=l/f,Ln=Cn.length,Kn=0;Kn<Ln;Kn++){var pe,mn=(pe=Cn[Kn]).getContainer(),On=pe.getModel(),Vn=pe.getOriginStyle(),rr=pe.getStateStyle(o.fixState),vr=pe.get("shapeFactory").getShape(On.type).getStateStyle(o.fixState,pe)[o.fixState];if(o.fixAll){if(f<=1){var Sr=(0,ue.clone)(mn.getMatrix());Sr||(Sr=[1,0,0,0,1,0,0,0,1]);var Zr=pe.getModel(),ni=Zr.x,ji=Zr.y;Sr=Pae(Sr,[["t",-ni,-ji],["s",kt,kt],["t",ni,ji]]),mn.setMatrix(Sr)}}else for(Re=(Ee=mn.get("children")).length,Ve=0;Ve<Re;Ve++){var Ue=Ee[Ve],Wi=void 0,po=void 0;if(o.fixLabel&&"text"===Ue.get("type")){Wi=Ue.attr("fontSize")||12;var Xo=rr[Ue.get("name")],Ja=(Ro=vr[Ue.get("name")])?Ro.fontSize:12,Xl=(Xo?Xo.fontSize:12)||Ja||12;if(f<=1&&Ue.attr("fontSize",Xl/f),po)break}if(o.fixLineWidth&&Ue.get("isKeyShape")){po=Ue.attr("lineWidth")||0;var es=rr.lineWidth||vr.lineWidth||Vn.lineWidth||0;if(f<=1&&Ue.attr("lineWidth",es/f),Wi)break}}}for(var ts=Tt.length,hl=0;hl<ts;hl++){var _t,Ee=(mn=(_t=Tt[hl]).getContainer()).get("children");for(On=_t.getModel(),rr=_t.getStateStyle(o.fixState),vr=_t.get("shapeFactory").getShape(On.type).getStateStyle(o.fixState,_t)[o.fixState],Re=Ee.length,Ve=0;Ve<Re;Ve++){var Ro;if(Ue=Ee[Ve],Wi=void 0,po=void 0,(o.fixLabel||o.fixAll)&&"text"===Ue.get("type"))if(Wi=Ue.attr("fontSize")||12,Xo=rr[Ue.get("name")],Ja=(Ro=vr[Ue.get("name")])?Ro.fontSize:12,Xl=(Xo?Xo.fontSize:12)||Ja||12,f<=1&&Ue.attr("fontSize",Xl/f),po)break;if((o.fixLineWidth||o.fixAll)&&Ue.get("isKeyShape")&&(po=Ue.attr("lineWidth")||0,es=rr.lineWidth||vr.lineWidth||1,f<=1&&Ue.attr("lineWidth",es/f),Wi))break}}}}var Ys=this.get("animate"),Su=this.get("animateCfg");i.zoomTo(f,{x:s.x,y:s.y},Ys,Su),i.emit("wheelzoom",e)}}},X3={onMouseEnter:function(e){this.currentTarget=e.item,this.showTooltip(e),this.graph.emit("tooltipchange",{item:e.item,action:"show"})},onMouseMove:function(e){this.shouldUpdate(e,this)?!this.currentTarget||e.item!==this.currentTarget||this.updatePosition(e):this.hideTooltip()},onMouseLeave:function(e){!this.shouldEnd(e,this)||(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(e){var t=this.container;if(e.item&&!e.item.destroyed){t||(t=this.createTooltip(this.graph.get("canvas")),this.container=t);var n=this.formatText(e.item.get("model"),e);t.innerHTML=n,Fi(this.container,{visibility:"visible"}),this.updatePosition(e)}},hideTooltip:function(){Fi(this.container,{visibility:"hidden"})},updatePosition:function(e){var t=this.get("shouldBegin"),n=this,i=n.width,o=n.height,a=n.container,s=n.graph;if(t(e,this)){var u=s.getPointByClient(e.clientX,e.clientY),l=s.getCanvasByPoint(u.x,u.y),c=l.x,f=l.y,h=a.getBoundingClientRect();c>i/2?c-=h.width:c+=this.offset,f>o/2?f-=h.height:f+=this.offset;var d="".concat(c,"px"),g="".concat(f,"px");Fi(this.container,{left:d,top:g,visibility:"visible"})}else Fi(a,{visibility:"hidden"})},createTooltip:function(e){var t=e.get("el");t.style.position="relative";var n=ra('<div class="g6-tooltip g6-'.concat(this.item,'-tooltip"></div>'));return t.parentNode.appendChild(n),Fi(n,{position:"absolute",visibility:"visible"}),this.width=e.get("width"),this.height=e.get("height"),this.container=n,this.graph.get("tooltips").push(n),n}},Lae=(0,De.__assign)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(t){return t.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},X3),kae=(0,De.__assign)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(t){return"source: ".concat(t.source," target: ").concat(t.target)}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},X3);var Rae=["click","dblclick"];const Fae={getDefaultCfg:function(){return{trigger:"click",onChange:function(){}}},getEvents:function(){var e,t;return Rae.includes(this.trigger)?t=this.trigger:(t="click",console.warn("Behavior collapse-expand \u7684 trigger \u53c2\u6570\u4e0d\u5408\u6cd5\uff0c\u8bf7\u8f93\u5165 'click' \u6216 'dblclick'")),(e={})["node:".concat(t)]="onNodeClick",e.touchstart="onNodeClick",e},onNodeClick:function(e){var t=e.item;if(t){var n=this.graph.findDataById(t.get("id"));if(n){var i=n.children;if(i&&0!==i.length){var o=!n.collapsed;!this.shouldBegin(e,o,this)||(n.collapsed=o,t.getModel().collapsed=o,this.graph.emit("itemcollapsed",{item:e.item,collapsed:o}),this.shouldUpdate(e,o,this)&&(this.onChange(t,o,this),this.graph.layout()))}}}}};var Bae=kh.calculationItemsBBox,jae=function r(e,t){if(!1!==t(e)&&e){var n=e.get("combos");if(0===n.length)return!1;(0,ue.each)(n,function(i){r(i,t)})}};const zae={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected",enableStack:!0}},getEvents:function(){return{"combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(e){var t=e.item;return!(!t||t.destroyed||!this.shouldUpdate(e,this))&&"combo"===t.getType()},onDragStart:function(e){var t=this,n=this.graph,i=e.item;if(this.currentShouldEnd=!0,this.validationCombo(e)){this.targets=[];var o=n.findAllByState("combo",this.selectedState),a=i.get("id");0===o.filter(function(l){var c=l.get("id");return a===c}).length?this.targets.push(i):this.targets=o;var u=[];this.targets.forEach(function(l){var c=l.getModel();u.push({x:c.x,y:c.y,id:c.id})}),this.set("beforeDragItems",u),this.activeState&&this.targets.map(function(l){var c=l.getModel();if(c.parentId){var f=n.findById(c.parentId);f&&n.setItemState(f,t.activeState,!0)}}),this.point={},this.originPoint={},this.origin={x:e.x,y:e.y},this.currentItemChildCombos=[],jae(i,function(l){if(l.destroyed)return!1;var c=l.getModel();return t.currentItemChildCombos.push(c.id),!0})}},onDrag:function(e){var t=this;if(this.origin&&this.validationCombo(e))if(this.enableDelegate)this.updateDelegate(e);else{if(this.activeState){var n=this.graph,i=e.item,o=i.getModel(),a=n.getCombos(),s=i.getBBox(),u=s.centerX,l=s.centerY,c=s.width;a.filter(function(h){var d=h.getModel();return d.id!==o.id&&!t.currentItemChildCombos.includes(d.id)}).map(function(h){var d=h.getBBox(),_=d.width,D=u-d.centerX,L=l-d.centerY,O=2*Math.sqrt(D*D+L*L);n.setItemState(h,t.activeState,c+_-O>.8*c)})}(0,ue.each)(this.targets,function(h){t.updateCombo(h,e)}),this.onlyChangeComboSize&&this.updateParentCombos()}},updatePositions:function(e,t){var n=this;(this.enableDelegate||t)&&(0,ue.each)(this.targets,function(i){n.updateCombo(i,e,t)})},onDrop:function(e){var t=this,n=e.item;if(this.currentShouldEnd=this.shouldEnd(e,n,this),this.updatePositions(e,!this.currentShouldEnd),this.currentShouldEnd&&n&&this.targets&&!n.destroyed){var i=this.graph,o=n.getModel();this.targets.map(function(a){a.getModel().parentId!==o.id?(t.activeState&&i.setItemState(n,t.activeState,!1),t.onlyChangeComboSize?i.updateCombo(a):i.updateComboTree(a,o.id,!1)):i.updateCombo(n)}),this.end(n,e),this.endComparison=!0}},onNodeDrop:function(e){var t=this;if(this.targets&&0!==this.targets.length){var n=this.graph,o=e.item.getModel().comboId,a=o?n.findById(o):void 0;if(this.currentShouldEnd=this.shouldEnd(e,a,this),this.updatePositions(e,!this.currentShouldEnd),this.currentShouldEnd){var s;if(o){if(this.activeState){var u=n.findById(o);n.setItemState(u,this.activeState,!1)}this.targets.map(function(l){t.onlyChangeComboSize?n.updateCombo(l):o!==l.getID()&&(s=n.findById(o),o!==l.getModel().parentId&&n.updateComboTree(l,o,!1))})}else this.targets.map(function(l){t.onlyChangeComboSize?n.updateCombo(l):l.getModel().comboId&&n.updateComboTree(l,void 0,!1)});this.endComparison=!0,this.end(s,e)}}},onDragEnter:function(e){this.origin&&this.validationCombo(e)&&this.activeState&&this.graph.setItemState(e.item,this.activeState,!0)},onDragLeave:function(e){this.origin&&this.validationCombo(e)&&this.activeState&&this.graph.setItemState(e.item,this.activeState,!1)},onDragEnd:function(e){if(this.targets&&0!==this.targets.length){var t=e.item;this.currentShouldEnd&&this.updatePositions(e);var n=this.getParentCombo(t.getModel().parentId);n&&this.activeState&&this.graph.setItemState(n,this.activeState,!1),this.end(void 0,e)}},end:function(e,t){var n=this;if(this.origin){var i=this.graph;if(this.delegateShape&&(i.get("delegateGroup").clear(),this.delegateShape=null),e&&this.activeState&&i.setItemState(e,this.activeState,!1),!e){var a=i.get("enabledStack")&&this.enableStack,s={before:{nodes:[],edges:[],combos:[].concat(this.get("beforeDragItems"))},after:{nodes:[],edges:[],combos:[]}};this.targets.map(function(u){if(n.onlyChangeComboSize){i.updateCombo(u);var l=u.getModel();s.after.combos.push({x:l.x,y:l.y,id:l.id}),i.pushStack("update",s)}else i.updateComboTree(u,void 0,a)})}this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(e,t,n){var i=this;if(void 0===n&&(n={}),!1!==t(e,n)&&e){var o=e.get("combos");(0,ue.each)(o,function(s){i.traverse(s,t,n)});var a=e.get("nodes");(0,ue.each)(a,function(s){i.traverse(s,t,n)})}},updateCombo:function(e,t,n){this.updateSingleItem(e,t,n);var i={};this.traverse(e,function(o,a){return!o.destroyed&&(o.getEdges().forEach(function(s){return a[s.getID()]=s}),!0)},i),Object.values(i).forEach(function(o){return o.refresh()})},updateSingleItem:function(e,t,n){var i=this.origin,o=this.graph,a=e.getModel(),s=e.get("id");this.point[s]||(this.point[s]={x:a.x,y:a.y});var u=t.x-i.x+this.point[s].x,l=t.y-i.y+this.point[s].y;n&&(u+=i.x-t.x,l+=i.y-t.y),o.updateItem(e,{x:u,y:l},!1)},getParentCombo:function(e){if(e){var n=this.graph.findById(e);if(n)return n}},updateDelegate:function(e){var t=this.graph;if(this.delegateShape)this.delegateShape.attr({x:e.x-this.origin.x+this.originPoint.minX,y:e.y-this.origin.y+this.originPoint.minY});else{var i,n=t.get("delegateGroup");i=this.targets.length>1?Bae(this.targets):this.targets[0].getBBox(),this.originPoint={x:i.x,y:i.y,width:i.width,height:i.height,minX:i.minX,minY:i.minY};var f=(0,De.__assign)((0,De.__assign)({},tp.delegateStyle),this.delegateStyle);this.delegateShape=n.addShape("rect",{attrs:(0,De.__assign)({width:i.width,height:i.height,x:i.x,y:i.y},f),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}},updateParentCombos:function(){var t=this.graph,i={};this.targets?.forEach(function(o){var a=o.getModel().parentId;a&&(i[a]=t.findById(a))}),Object.values(i).forEach(function(o){o&&t.updateCombo(o)})}};var K3="dblclick",Gae=["click","dblclick"];const Uae={getDefaultCfg:function(){return{trigger:K3,relayout:!0}},getEvents:function(){var e,t;return Gae.includes(this.trigger)?t=this.trigger:(t=K3,console.warn("Behavior collapse-expand-group \u7684 trigger \u53c2\u6570\u4e0d\u5408\u6cd5\uff0c\u8bf7\u8f93\u5165 'click' \u6216 'dblclick'")),(e={})["combo:".concat(t)]="onComboClick",e},onComboClick:function(e){var t=e.item,i=this.graph,o=this.relayout;if(t&&!t.destroyed&&"combo"===t.getType()){var s=t.getModel().id;!s||(i.collapseExpandCombo(s),o&&i.get("layout")?i.layout():i.refreshPositions())}}};var Vae=kh.isPolygonsIntersect,Hae=kh.pathToPoints,Wae=["drag","shift","ctrl","alt","control"];const Yae={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},shouldDeselect:void 0,selectedState:"selected",trigger:"shift",includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return Wae.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior lasso-select \u7684 trigger \u53c2\u6570\u4e0d\u5408\u6cd5\uff0c\u8bf7\u8f93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),"drag"===this.trigger?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(e){var t=this.lasso;e.item||"drag"!==this.trigger&&!this.keydown||(this.selectedNodes&&0!==this.selectedNodes.length&&this.clearStates("dragstart"),t||(t=this.createLasso()),this.dragging=!0,this.originPoint={x:e.x,y:e.y},this.points.push(this.originPoint),t.show())},onDragMove:function(e){!this.dragging||"drag"!==this.trigger&&!this.keydown||(this.points.push({x:e.x,y:e.y}),this.updateLasso(e))},onDragEnd:function(e){!this.lasso&&!this.dragging||"drag"!==this.trigger&&!this.keydown||(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var e=this.points,t=[];return e.length&&(e.forEach(function(n,i){t.push(0===i?["M",n.x,n.y]:["L",n.x,n.y])}),t.push(["L",e[0].x,e[0].y])),t},clearStates:function(e){void 0===e&&(e="canvas:click");var t=this,n=t.graph,i=t.selectedState,o=t.shouldDeselect,a=n.findAllByState("node",i),s=n.findAllByState("edge",i);(!o||o({action:e,nodes:a,edges:s}))&&(a.forEach(function(u){return n.setItemState(u,i,!1)}),s.forEach(function(u){return n.setItemState(u,i,!1)})),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var e=this,n=this.graph,i=this.shouldUpdate,o=this.points.map(function(c){return[n.getCanvasByPoint(c.x,c.y).x,n.getCanvasByPoint(c.x,c.y).y]}),a=this.selectedState,s=[],u=[];n.getNodes().forEach(function(c){if(c.isVisible()&&function(e,t){var n,i=e.getKeyShape();if("path"===e.get("type"))n=Hae(i.attr("path"));else{var o=i.getCanvasBBox();n=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return Vae(t,n)}(c,o)&&i(c,"select",e)){s.push(c);var f=c.getModel();u.push(f.id),n.setItemState(c,a,!0)}});var l=[];this.includeEdges&&s.forEach(function(c){c.getOutEdges().forEach(function(h){if(h.isVisible()){var d=h.getModel(),m=d.target;u.includes(d.source)&&u.includes(m)&&i(h,"select",e)&&(l.push(h),n.setItemState(h,e.selectedState,!0))}})}),this.selectedEdges=l,this.selectedNodes=s,this.onSelect&&this.onSelect(s,l),n.emit("nodeselectchange",{selectedItems:{nodes:s,edges:l},select:!0})},createLasso:function(){var t=this.graph.get("delegateGroup").addShape("path",{attrs:(0,De.__assign)({path:[]},this.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=t,this.delegate=t,this.points=[],t},updateLasso:function(e){this.lasso.attr({path:this.getLassoPath()})},onKeyDown:function(e){var t=e.key;!t||(this.keydown=t.toLowerCase()===this.trigger.toLowerCase())},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}};var Xae=["click","drag"],qae=["shift","ctrl","control","alt","meta",void 0];const Kae={getDefaultCfg:function(){return{trigger:"click",key:void 0,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var t,e=this;return Xae.indexOf(e.trigger.toLowerCase())>-1||(e.trigger="click",console.warn("Behavior create-edge \u7684 trigger \u53c2\u6570\u4e0d\u5408\u6cd5\uff0c\u8bf7\u8f93\u5165 'click'\uff0c'drag'")),e.key&&-1===qae.indexOf(e.key.toLowerCase())&&(e.trigger=void 0,console.warn("Behavior create-edge \u7684 key \u53c2\u6570\u4e0d\u5408\u6cd5\uff0c\u8bf7\u8f93\u5165 'shift'\uff0c'ctrl'\uff0c'alt'\uff0c'control'\uff0c\u6216 undefined")),"drag"===e.trigger?t={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:"click"===e.trigger&&(t={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),e.key&&(t.keydown="onKeyDown",t.keyup="onKeyUp"),t},onDragEnd:function(e){var t=this;if(!t.key||t.keydown){var n=e.item;(!n||n.getID()===t.source||"node"!==n.getType())&&t.cancelCreating({item:t.edge,x:e.x,y:e.y})}},onClick:function(e){var t=this;if(!t.key||t.keydown){var i=t.graph,o=e.item.getModel(),a=t.getEdgeConfig;if(t.addingEdge&&t.edge){if(!t.shouldEnd(e,t))return;var s=void 0;s=a&&(0,ue.isFunction)(a)?a({source:t.source,target:o.id},t):t.edgeConfig;var u=(0,De.__assign)({target:o.id},s);if(t.source===o.id&&(u.type="loop"),i.emit("beforecreateedge",{}),i.updateItem(t.edge,u,!1),i.get("enabledStack")){var l=(0,De.__assign)((0,De.__assign)({},t.edge.getModel()),{itemType:"edge"}),c={};c.edges=[l],i.pushStack("add",{before:{},after:c})}i.emit("aftercreateedge",{edge:t.edge}),t.edge.getKeyShape().set("capture",!0),t.edge=null,t.addingEdge=!1}else{if(!t.shouldBegin(e,t))return;s=void 0,s=a&&(0,ue.isFunction)(a)?a({source:o.id,target:o.id},t):t.edgeConfig,t.edge=i.addItem("edge",(0,De.__assign)({source:o.id,target:o.id},s),!1),t.source=o.id,t.addingEdge=!0,t.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(e){var t=this;if(!t.key||t.keydown){t.edge&&t.edge.destroyed&&t.cancelCreating({item:t.edge});var n={x:e.x,y:e.y};if(!t.graph.findById(t.source))return void(t.addingEdge=!1);t.addingEdge&&t.edge&&t.graph.updateItem(t.edge,{target:n},!1)}},cancelCreating:function(e){var t,n,i=this;if(!i.key||i.keydown){var o=i.graph;if(i.addingEdge&&(i.edge===e.item||(null===(n=null===(t=e.target)||void 0===t?void 0:t.isCanvas)||void 0===n?void 0:n.call(t))))return i.edge&&!i.edge.destroyed&&o.removeItem(i.edge,!1),i.edge=null,void(i.addingEdge=!1)}},onKeyDown:function(e){var n=e.key;!n||(this.keydown=n.toLowerCase()===this.key.toLowerCase())},onKeyUp:function(){var e=this;e.addingEdge&&e.edge&&(e.graph.removeItem(e.edge,!1),e.addingEdge=!1,e.edge=null),this.keydown=!1}};var Zae=["shift","ctrl","alt","control"];const Jae={getDefaultCfg:function(){return{trigger:"ctrl",combinedKey:"1",functionName:"fitView",functionParams:[]}},getEvents:function(){return Zae.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="ctrl",console.warn("Behavior shortcuts-fit-view \u7684 trigger \u53c2\u6570 '".concat(this.trigger,"' \u4e0d\u5408\u6cd5\uff0c\u8bf7\u8f93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'"))),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(e){var t=e.key;if(t){var n=this.trigger.toLowerCase(),i=t.toLowerCase();this.triggerKeydown||(this.triggerKeydown=i===n||"control"===i&&"ctrl"===n||"ctrl"===i&&"control"===n);var o=this.graph;if(!o[this.functionName])return console.warn("Behavior shortcuts-fit-view \u7684 functionName \u53c2\u6570 '".concat(this.functionName,"' \u4e0d\u5408\u6cd5\uff0c\u5b83\u4e0d\u662f Graph \u7684\u4e00\u4e2a\u51fd\u6570\u540d")),{};if(this.triggerKeydown&&!this.combinedKey)return void(this.functionParams&&this.functionParams.length?o[this.functionName].apply(o,this.functionParams):o[this.functionName]());var a=this.combinedKey.toLowerCase();this.triggerKeydown&&(i===a||"control"===i&&"ctrl"===a||"ctrl"===i&&"control"===a)&&(this.functionParams&&this.functionParams.length?o[this.functionName].apply(o,this.functionParams):o[this.functionName]())}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}};var ese=["shift","ctrl","alt","control","meta"],tse={"drag-canvas":Mae,"zoom-canvas":Nae,"drag-node":Cae,"activate-relations":Aae,"brush-select":Tae,"click-select":Oae,"lasso-select":Yae,tooltip:Lae,"edge-tooltip":kae,"collapse-expand":Fae,"drag-combo":zae,"collapse-expand-combo":Uae,"create-edge":Kae,"shortcuts-call":Jae,"scroll-canvas":{getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0,allowDragOnItem:!0}},getEvents:function(){return(!this.zoomKey||-1===ese.indexOf(this.zoomKey))&&(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(e){var t=this;if(this.allowDrag(e)){var n=this.graph,i=Array.isArray(this.zoomKey)?[].concat(this.zoomKey):[this.zoomKey];if(i.includes("control")&&i.push("ctrl"),i.some(function(On){return e["".concat(On,"Key")]})){var s=n.get("canvas").getPointByClient(e.clientX,e.clientY),u=n.getZoom();e.wheelDelta>0?u+=.05*u:u-=.05*u,n.zoomTo(u,{x:s.x,y:s.y})}else{var l=e.deltaX||e.movementX,c=e.deltaY||e.movementY;!c&&navigator.userAgent.indexOf("Firefox")>-1&&(c=125*-e.wheelDelta/3);var f=this.graph.get("width"),h=this.graph.get("height"),d=this.graph.get("canvas").getCanvasBBox(),g=this.scalableRange,m=this.scalableRange;g<1&&g>-1&&(g*=f,m*=h);var _=d.minX,D=d.maxX,L=d.minY,O=d.maxY;l>0?D<-g?l=0:D-l<-g&&(l=D+g):l<0&&(_>f+g?l=0:_-l>f+g&&(l=_-(f+g))),c>0?O<-m?c=0:O-c<-m&&(c=O+m):c<0&&(L>h+m?c=0:L-c>h+m&&(c=L-(h+m))),"x"===this.get("direction")?c=0:"y"===this.get("direction")&&(l=0),n.translate(-l,-c)}if(e.preventDefault(),this.get("enableOptimize")){var le=this.get("optimizeZoom"),pe=this.get("optimized"),Ee=n.getNodes(),Re=n.getEdges(),Ve=Ee.length,Ue=Re.length;if(!pe){for(var at=0;at<Ve;at++){var _t=Ee[at];if(!_t.destroyed)for(var Cn=(vn=_t.get("group").get("children")).length,Tt=0;Tt<Cn;Tt++)!(kt=vn[Tt]).destoryed&&!kt.get("isKeyShape")&&(kt.set("ori-visibility",kt.get("ori-visibility")||kt.get("visible")),kt.hide())}for(var Ln=0;Ln<Ue;Ln++){var vn;for(Cn=(vn=Re[Ln].get("group").get("children")).length,Tt=0;Tt<Cn;Tt++){var kt;(kt=vn[Tt]).set("ori-visibility",kt.get("ori-visibility")||kt.get("visible")),kt.hide()}}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var mn=setTimeout(function(){var On=n.getZoom();if(t.get("optimized")){t.set("optimized",!1);for(var rr=0;rr<Ve;rr++){var vr=Ee[rr],Zr=(Sr=vr.get("group").get("children")).length;if(On<le)(ji=(ni=vr.getKeyShape()).get("ori-visibility"))&&ni.show();else for(var Wi=0;Wi<Zr;Wi++){var ji=(po=Sr[Wi]).get("ori-visibility");!po.get("visible")&&ji&&ji&&po.show()}}for(var io=0;io<Ue;io++){var Sr,ni,Xo=Re[io];if(Zr=(Sr=Xo.get("group").get("children")).length,On<le)(ji=(ni=Xo.getKeyShape()).get("ori-visibility"))&&ni.show();else for(Wi=0;Wi<Zr;Wi++){var po;(po=Sr[Wi]).get("visible")||(ji=po.get("ori-visibility"))&&po.show()}}}},100);this.set("timeout",mn)}}},allowDrag:function(e){var t,n,i=e.target,o=i&&i.isCanvas&&i.isCanvas();if((0,ue.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!o)return!1;if((0,ue.isObject)(this.allowDragOnItem)){var a=this.allowDragOnItem,s=a.node,u=a.edge,l=a.combo,c=null===(n=null===(t=e.item)||void 0===t?void 0:t.getType)||void 0===n?void 0:n.call(t);if(!s&&"node"===c||!u&&"edge"===c||!l&&"combo"===c)return!1}return!0}}};(0,ue.each)(tse,function(r,e){LF(e,r)});var nse=(0,De.__assign)((0,De.__assign)({},B),ZJ);const t5={version:"4.8.6",Graph:PB,TreeGraph:ire,Util:kh,Layout:Xi.Layouts,TreeLayout:Bne,registerLayout:function(e,t){t.isCustomLayout=!0,Xi.Layouts[e]=(0,Xi.registerLayout)(e,t)},Global:tp,registerBehavior:LF,registerCombo:KJ,registerEdge:NF,registerNode:Ph,Minimap:Ka.Minimap,Grid:Ka.Grid,Bundling:Ka.Bundling,Menu:Ka.Menu,ToolBar:Ka.ToolBar,Tooltip:Ka.Tooltip,Legend:Ka.Legend,TimeBar:Ka.TimeBar,SnapLine:Ka.SnapLine,Fisheye:Ka.Fisheye,ImageMinimap:Ka.ImageMinimap,EdgeFilterLens:Ka.EdgeFilterLens,Annotation:Ka.Annotation,Algorithm:nse,Arrow:{triangle:function(e,t,n){void 0===e&&(e=10),void 0===t&&(t=15),void 0===n&&(n=0);var i=2*n;return"M ".concat(i,",0 L ").concat(i+t,",-").concat(e/2," L ").concat(i+t,",").concat(e/2," Z")},vee:function(e,t,n){void 0===e&&(e=15),void 0===t&&(t=20),void 0===n&&(n=0);var i=2*n;return"M ".concat(i,",0 L ").concat(i+t,",-").concat(e/2,"\n        L ").concat(i+2*t/3,",0 L ").concat(i+t,",").concat(e/2," Z")},circle:function(e,t){return void 0===e&&(e=5),void 0===t&&(t=0),"M ".concat(2*t,", 0\n            a ").concat(e,",").concat(e," 0 1,0 ").concat(2*e,",0\n            a ").concat(e,",").concat(e," 0 1,0 ").concat(2*-e,",0")},rect:function(e,t,n){void 0===e&&(e=10),void 0===t&&(t=10),void 0===n&&(n=0);var i=2*n;return"M ".concat(i,",").concat(-e/2," \n        L ").concat(i+t,",").concat(-e/2," \n        L ").concat(i+t,",").concat(e/2," \n        L ").concat(i,",").concat(e/2," Z")},diamond:function(e,t,n){void 0===e&&(e=15),void 0===t&&(t=15),void 0===n&&(n=0);var i=2*n;return"M ".concat(i,",0 \n        L ").concat(i+t/2,",").concat(-e/2," \n        L ").concat(i+t,",0 \n        L ").concat(i+t/2,",").concat(e/2," Z")},triangleRect:function(e,t,n,i,o,a){void 0===e&&(e=15),void 0===t&&(t=15),void 0===n&&(n=15),void 0===i&&(i=3),void 0===o&&(o=5),void 0===a&&(a=0);var s=2*a,u=s+t+o;return"M ".concat(s,",0 L ").concat(s+t,",-").concat(e/2," L ").concat(s+t,",").concat(e/2," Z\n            M ").concat(u,", -").concat(n/2,"\n            L ").concat(u+i," -").concat(n/2,"\n            L ").concat(u+i," ").concat(n/2,"\n            L ").concat(u," ").concat(n/2,"\n            Z")}},Marker:TF,Shape:Nd},n5=t5;var lse=Math.floor,cse=Math.random;const Zv=function dse(r,e){return r===e||r!=r&&e!=e},r5="object"==typeof global&&global&&global.Object===Object&&global;var pse="object"==typeof self&&self&&self.Object===Object&&self;const Fc=r5||pse||Function("return this")(),zl=Fc.Symbol;var i5=Object.prototype,yse=i5.hasOwnProperty,bse=i5.toString,Py=zl?zl.toStringTag:void 0;var _se=Object.prototype.toString;var o5=zl?zl.toStringTag:void 0;const Gd=function Dse(r){return null==r?void 0===r?"[object Undefined]":"[object Null]":o5&&o5 in Object(r)?function wse(r){var e=yse.call(r,Py),t=r[Py];try{r[Py]=void 0;var n=!0}catch{}var i=bse.call(r);return n&&(e?r[Py]=t:delete r[Py]),i}(r):function Sse(r){return _se.call(r)}(r)},Ba=function Tse(r){var e=typeof r;return null!=r&&("object"==e||"function"==e)},$C=function Lse(r){if(!Ba(r))return!1;var e=Gd(r);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},YC=function Rse(r){return"number"==typeof r&&r>-1&&r%1==0&&r<=9007199254740991},sp=function Fse(r){return null!=r&&YC(r.length)&&!$C(r)};var jse=/^(?:0|[1-9]\d*)$/;const nx=function zse(r,e){var t=typeof r;return!!(e=e??9007199254740991)&&("number"==t||"symbol"!=t&&jse.test(r))&&r>-1&&r%1==0&&r<e},Ny=function Gse(r,e,t){if(!Ba(t))return!1;var n=typeof e;return!!("number"==n?sp(t)&&nx(e,t.length):"string"==n&&e in t)&&Zv(t[e],r)};var Use=/\s/;var Wse=/^\s+/;const Yse=function $se(r){return r&&r.slice(0,function Vse(r){for(var e=r.length;e--&&Use.test(r.charAt(e)););return e}(r)+1).replace(Wse,"")},Bc=function Xse(r){return null!=r&&"object"==typeof r},Uf=function Kse(r){return"symbol"==typeof r||Bc(r)&&"[object Symbol]"==Gd(r)};var Zse=/^[-+]0x[0-9a-f]+$/i,Qse=/^0b[01]+$/i,Jse=/^0o[0-7]+$/i,eue=parseInt;const Qv=function tue(r){if("number"==typeof r)return r;if(Uf(r))return NaN;if(Ba(r)){var e="function"==typeof r.valueOf?r.valueOf():r;r=Ba(e)?e+"":e}if("string"!=typeof r)return 0===r?r:+r;r=Yse(r);var t=Qse.test(r);return t||Jse.test(r)?eue(r.slice(2),t?2:8):Zse.test(r)?NaN:+r},u5=function rue(r){return r?1/0===(r=Qv(r))||-1/0===r?17976931348623157e292*(r<0?-1:1):r==r?r:0:0===r?r:0};var iue=parseFloat,oue=Math.min,aue=Math.random;const rx=function sue(r,e,t){if(t&&"boolean"!=typeof t&&Ny(r,e,t)&&(e=t=void 0),void 0===t&&("boolean"==typeof e?(t=e,e=void 0):"boolean"==typeof r&&(t=r,r=void 0)),void 0===r&&void 0===e?(r=0,e=1):(r=u5(r),void 0===e?(e=r,r=0):e=u5(e)),r>e){var n=r;r=e,e=n}if(t||r%1||e%1){var i=aue();return oue(r+i*(e-r+iue("1e-"+((i+"").length-1))),e)}return function fse(r,e){return r+lse(cse()*(e-r+1))}(r,e)},uue=["container"];let lue=(()=>{class r{constructor(){this.data={nodes:[]},this.idCount=0}addNode(){const t=this.getBaiscNode();this.data.nodes.push(t),this.render()}addBatch(t){const n=new Array(t).fill(null).map(()=>this.getBaiscNode());this.data.nodes.push(...n),this.render()}removeBatch(t){0!==this.data.nodes.length&&(new Array(t).fill(null).forEach(()=>this.data.nodes.pop()),this.idCount-=t,this.idCount<0&&(this.idCount=0),this.render())}render(){this.graph.data(this.data),this.graph.render()}getBaiscNode(){const t=rx(0,1e3),n=rx(0,600);return{id:""+ ++this.idCount,label:`${this.idCount}`,x:t,y:n,description:"ant_type_name_...",color:"#2196f3",meta:{creatorName:"a_creator"},type:"rect-jsx"}}ngAfterViewInit(){this.graph=new n5.Graph({container:this.container.nativeElement,width:1e3,height:600,renderer:"svg",modes:{default:["drag-canvas","drag-node"]},defaultNode:{type:"circle",size:[60],labelCfg:{position:"bottom"}}}),n5.registerNode("rect-jsx",t=>`\n        <group>\n          <rect>\n            <rect style={{\n              width: 120,\n              height: 20,\n              fill: ${t.color},\n              radius: [6, 6, 0, 0],\n              cursor: 'move'\uff0c\n              stroke: ${t.color}\n            }} draggable="true">\n              <text style={{\n                marginTop: 2,\n                marginLeft: 58,\n                textAlign: 'center',\n                fontWeight: 'bold',\n                fill: '#fff' }}>{{label}}</text>\n            </rect>\n            <rect style={{\n              width: 120,\n              height: 20,\n              stroke: ${t.color},\n              fill: #ffffff,\n              radius: [0, 0, 6, 6],\n            }}>\n              <text style={{ marginTop: 5, fill: '#333', marginLeft: 38 }}>\u6027\u80fd\u6d4b\u8bd5</text>\n            </rect>\n          </rect>\n        </group>`)}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=_s({type:r,selectors:[["app-g6"]],viewQuery:function(t,n){if(1&t&&$b(uue,5),2&t){let i;Av(i=Dv())&&(n.container=i.first)}},decls:26,vars:1,consts:[[1,"header"],["type","button",3,"click"],[1,"count"],[1,"graph-container"],["id","container"],["container",""]],template:function(t,n){1&t&&(Qi(0,"section",0)(1,"table")(2,"tr")(3,"th"),yo(4,"\u4ecb\u7ecd"),co(),Qi(5,"th"),yo(6,"\u64cd\u4f5c"),co()(),Qi(7,"tr")(8,"td"),yo(9,"\u589e\u52a0\u8282\u70b9"),co(),Qi(10,"td")(11,"button",1),Us("click",function(){return n.addNode()}),yo(12,"\u589e\u52a0 HTML \u8282\u70b9"),co()()(),Qi(13,"tr")(14,"td"),yo(15,"\u6279\u91cf\u64cd\u4f5c(HTML)"),co(),Qi(16,"td")(17,"button",1),Us("click",function(){return n.addBatch(50)}),yo(18,"\u589e\u52a050\u4e2a\u8282\u70b9"),co(),Qi(19,"button",1),Us("click",function(){return n.removeBatch(50)}),yo(20,"\u51cf\u5c1150\u4e2a\u8282\u70b9"),co(),Qi(21,"span",2),yo(22),co()()()()(),Qi(23,"div",3),kg(24,"div",4,5),co()),2&t&&(Pg(22),Rg("\u8282\u70b9\u603b\u6570: ",n.idCount,""))},styles:[".header[_ngcontent-%COMP%]{display:flex;justify-content:center}.header[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border:1px solid #000}.header[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:8px;border:1px solid #000}.header[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:4px}.header[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-of-type, .header[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-of-type{margin-right:0}.header[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{margin-left:4px}.graph-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.graph-container[_ngcontent-%COMP%]   #container[_ngcontent-%COMP%]{background-color:#f2f7fa;width:1000px;height:600px}.template-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border:2px solid #000;height:100%;width:100%}.template-container[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:gray}"]}),r})();G(5460);class Ud{get disposed(){return!0===this._disposed}dispose(){this._disposed=!0}}!function(r){r.dispose=function e(){return(t,n,i)=>{const o=i.value,a=t.__proto__;i.value=function(){this.disposed||(o.call(this),a.dispose.call(this))}}}}(Ud||(Ud={}));class l5{constructor(){this.isDisposed=!1,this.items=new Set}get disposed(){return this.isDisposed}dispose(){this.isDisposed||(this.isDisposed=!0,this.items.forEach(e=>{e.dispose()}),this.items.clear())}contains(e){return this.items.has(e)}add(e){this.items.add(e)}remove(e){this.items.delete(e)}clear(){this.items.clear()}}!function(r){r.from=function e(t){const n=new r;return t.forEach(i=>{n.add(i)}),n}}(l5||(l5={}));const XC=function(){return Fc.Date.now()};var hue=Math.max,due=Math.min;function c5(r,e,t){if(t)switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2]);case 4:return r.call(e,t[0],t[1],t[2],t[3]);case 5:return r.call(e,t[0],t[1],t[2],t[3],t[4]);case 6:return r.call(e,t[0],t[1],t[2],t[3],t[4],t[5]);default:return r.apply(e,t)}return r.call(e)}function Ti(r,e,...t){return c5(r,e,t)}function f5(r){return null!=r&&(r instanceof Promise||function vue(r){return"object"==typeof r&&r.then&&"function"==typeof r.then}(r))}function qC(...r){const e=[];if(r.forEach(n=>{Array.isArray(n)?e.push(...n):e.push(n)}),e.some(n=>f5(n))){const n=e.map(i=>f5(i)?i:Promise.resolve(!1!==i));return Promise.all(n).then(i=>i.reduce((o,a)=>!1!==a&&o,!0))}return e.every(n=>!1!==n)}function KC(r,e){const t=[];for(let n=0;n<r.length;n+=2){const s=c5(r[n],r[n+1],Array.isArray(e)?e:[e]);t.push(s)}return qC(t)}var bue=Object.prototype.hasOwnProperty;const xue=function wue(r,e){return null!=r&&bue.call(r,e)},lu=Array.isArray;var _ue=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Sue=/^\w*$/;const ZC=function Mue(r,e){if(lu(r))return!1;var t=typeof r;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=r&&!Uf(r))||Sue.test(r)||!_ue.test(r)||null!=e&&r in Object(e)},QC=Fc["__core-js_shared__"];var h5=function(){var r=/[^.]+$/.exec(QC&&QC.keys&&QC.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();var Iue=Function.prototype.toString;const up=function Oue(r){if(null!=r){try{return Iue.call(r)}catch{}try{return r+""}catch{}}return""};var Nue=/^\[object .+?Constructor\]$/,Bue=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const zue=function jue(r){return!(!Ba(r)||function Aue(r){return!!h5&&h5 in r}(r))&&($C(r)?Bue:Nue).test(up(r))},lp=function Vue(r,e){var t=function Gue(r,e){return r?.[e]}(r,e);return zue(t)?t:void 0},Ly=lp(Object,"create");var Zue=Object.prototype.hasOwnProperty;var tle=Object.prototype.hasOwnProperty;function Jv(r){var e=-1,t=null==r?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Jv.prototype.clear=function Wue(){this.__data__=Ly?Ly(null):{},this.size=0},Jv.prototype.delete=function Yue(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e},Jv.prototype.get=function Que(r){var e=this.__data__;if(Ly){var t=e[r];return"__lodash_hash_undefined__"===t?void 0:t}return Zue.call(e,r)?e[r]:void 0},Jv.prototype.has=function nle(r){var e=this.__data__;return Ly?void 0!==e[r]:tle.call(e,r)},Jv.prototype.set=function ole(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=Ly&&void 0===e?"__lodash_hash_undefined__":e,this};const d5=Jv,ix=function lle(r,e){for(var t=r.length;t--;)if(Zv(r[t][0],e))return t;return-1};var fle=Array.prototype.splice;function e0(r){var e=-1,t=null==r?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}e0.prototype.clear=function sle(){this.__data__=[],this.size=0},e0.prototype.delete=function hle(r){var e=this.__data__,t=ix(e,r);return!(t<0||(t==e.length-1?e.pop():fle.call(e,t,1),--this.size,0))},e0.prototype.get=function gle(r){var e=this.__data__,t=ix(e,r);return t<0?void 0:e[t][1]},e0.prototype.has=function vle(r){return ix(this.__data__,r)>-1},e0.prototype.set=function yle(r,e){var t=this.__data__,n=ix(t,r);return n<0?(++this.size,t.push([r,e])):t[n][1]=e,this};const ox=e0,ky=lp(Fc,"Map"),ax=function Mle(r,e){var t=r.__data__;return function _le(r){var e=typeof r;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==r:null===r}(e)?t["string"==typeof e?"string":"hash"]:t.map};function t0(r){var e=-1,t=null==r?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}t0.prototype.clear=function xle(){this.size=0,this.__data__={hash:new d5,map:new(ky||ox),string:new d5}},t0.prototype.delete=function Cle(r){var e=ax(this,r).delete(r);return this.size-=e?1:0,e},t0.prototype.get=function Dle(r){return ax(this,r).get(r)},t0.prototype.has=function Ile(r){return ax(this,r).has(r)},t0.prototype.set=function Ple(r,e){var t=ax(this,r),n=t.size;return t.set(r,e),this.size+=t.size==n?0:1,this};const sx=t0;function JC(r,e){if("function"!=typeof r||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var t=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=t.cache;if(o.has(i))return o.get(i);var a=r.apply(this,n);return t.cache=o.set(i,a)||o,a};return t.cache=new(JC.Cache||sx),t}JC.Cache=sx;const kle=JC;var jle=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zle=/\\(\\)?/g,Gle=function Fle(r){var e=kle(r,function(n){return 500===t.size&&t.clear(),n}),t=e.cache;return e}(function(r){var e=[];return 46===r.charCodeAt(0)&&e.push(""),r.replace(jle,function(t,n,i,o){e.push(i?o.replace(zle,"$1"):n||t)}),e});const Ule=Gle,Ry=function Vle(r,e){for(var t=-1,n=null==r?0:r.length,i=Array(n);++t<n;)i[t]=e(r[t],t,r);return i};var g5=zl?zl.prototype:void 0,p5=g5?g5.toString:void 0;const Wle=function v5(r){if("string"==typeof r)return r;if(lu(r))return Ry(r,v5)+"";if(Uf(r))return p5?p5.call(r):"";var e=r+"";return"0"==e&&1/r==-1/0?"-0":e},n0=function $le(r){return null==r?"":Wle(r)},ux=function Yle(r,e){return lu(r)?r:ZC(r,e)?[r]:Ule(n0(r))},m5=function qle(r){return Bc(r)&&"[object Arguments]"==Gd(r)};var y5=Object.prototype,Kle=y5.hasOwnProperty,Zle=y5.propertyIsEnumerable,Qle=m5(function(){return arguments}())?m5:function(r){return Bc(r)&&Kle.call(r,"callee")&&!Zle.call(r,"callee")};const r0=Qle,Fy=function ece(r){if("string"==typeof r||Uf(r))return r;var e=r+"";return"0"==e&&1/r==-1/0?"-0":e},b5=function tce(r,e,t){for(var n=-1,i=(e=ux(e,r)).length,o=!1;++n<i;){var a=Fy(e[n]);if(!(o=null!=r&&t(r,a)))break;r=r[a]}return o||++n!=i?o:!!(i=null==r?0:r.length)&&YC(i)&&nx(a,i)&&(lu(r)||r0(r))},lx=function nce(r,e){return null!=r&&b5(r,e,xue)},cx=function rce(r,e){for(var t=0,n=(e=ux(e,r)).length;null!=r&&t<n;)r=r[Fy(e[t++])];return t&&t==n?r:void 0};var ice=function(){try{var r=lp(Object,"defineProperty");return r({},"",{}),r}catch{}}();const fx=ice,hx=function oce(r,e,t){"__proto__"==e&&fx?fx(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t};var sce=Object.prototype.hasOwnProperty;const eA=function uce(r,e,t){var n=r[e];(!sce.call(r,e)||!Zv(n,t)||void 0===t&&!(e in r))&&hx(r,e,t)},cce=function lce(r,e,t,n){if(!Ba(r))return r;for(var i=-1,o=(e=ux(e,r)).length,a=o-1,s=r;null!=s&&++i<o;){var u=Fy(e[i]),l=t;if("__proto__"===u||"constructor"===u||"prototype"===u)return r;if(i!=a){var c=s[u];void 0===(l=n?n(c,u,s):void 0)&&(l=Ba(c)?c:nx(e[i+1])?[]:{})}eA(s,u,l),s=s[u]}return r},gce=function dce(r,e){return null!=r&&e in Object(r)},w5=function pce(r,e){return null!=r&&b5(r,e,gce)},mce=function vce(r,e){return function fce(r,e,t){for(var n=-1,i=e.length,o={};++n<i;){var a=e[n],s=cx(r,a);t(s,a)&&cce(o,ux(a,r),s)}return o}(r,e,function(t,n){return w5(r,n)})},tA=function yce(r,e){for(var t=-1,n=e.length,i=r.length;++t<n;)r[i+t]=e[t];return r};var x5=zl?zl.isConcatSpreadable:void 0;const wce=function bce(r){return lu(r)||r0(r)||!!(x5&&r&&r[x5])},dx=function E5(r,e,t,n,i){var o=-1,a=r.length;for(t||(t=wce),i||(i=[]);++o<a;){var s=r[o];e>0&&t(s)?e>1?E5(s,e-1,t,n,i):tA(i,s):n||(i[i.length]=s)}return i},Ece=function xce(r){return null!=r&&r.length?dx(r,1):[]},_5=function _ce(r,e,t){switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2])}return r.apply(e,t)};var S5=Math.max;const M5=function Sce(r,e,t){return e=S5(void 0===e?r.length-1:e,0),function(){for(var n=arguments,i=-1,o=S5(n.length-e,0),a=Array(o);++i<o;)a[i]=n[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=n[i];return s[e]=t(a),_5(r,this,s)}},Cce=function Mce(r){return function(){return r}},o0=function Ace(r){return r};var Dce=fx?function(r,e){return fx(r,"toString",{configurable:!0,enumerable:!1,value:Cce(e),writable:!0})}:o0,Pce=Date.now,Lce=function Nce(r){var e=0,t=0;return function(){var n=Pce(),i=16-(n-t);if(t=n,i>0){if(++e>=800)return arguments[0]}else e=0;return r.apply(void 0,arguments)}}(Dce);const C5=Lce;!function kce(r){C5(M5(r,void 0,Ece),r+"")}(function(r,e){return null==r?{}:mce(r,e)});function a0(r){var e=this.__data__=new ox(r);this.size=e.size}a0.prototype.clear=function Fce(){this.__data__=new ox,this.size=0},a0.prototype.delete=function jce(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t},a0.prototype.get=function Gce(r){return this.__data__.get(r)},a0.prototype.has=function Vce(r){return this.__data__.has(r)},a0.prototype.set=function $ce(r,e){var t=this.__data__;if(t instanceof ox){var n=t.__data__;if(!ky||n.length<199)return n.push([r,e]),this.size=++t.size,this;t=this.__data__=new sx(n)}return t.set(r,e),this.size=t.size,this};const s0=a0,nA=function Xce(r,e,t){(void 0!==t&&!Zv(r[e],t)||void 0===t&&!(e in r))&&hx(r,e,t)};var Kce=function qce(r){return function(e,t,n){for(var i=-1,o=Object(e),a=n(e),s=a.length;s--;){var u=a[r?s:++i];if(!1===t(o[u],u,o))break}return e}}();const A5=Kce;var D5="object"==typeof exports&&exports&&!exports.nodeType&&exports,T5=D5&&"object"==typeof module&&module&&!module.nodeType&&module,I5=T5&&T5.exports===D5?Fc.Buffer:void 0,O5=I5?I5.allocUnsafe:void 0;const P5=function Qce(r,e){if(e)return r.slice();var t=r.length,n=O5?O5(t):new r.constructor(t);return r.copy(n),n},gx=Fc.Uint8Array,rA=function efe(r){var e=new r.constructor(r.byteLength);return new gx(e).set(new gx(r)),e},N5=function tfe(r,e){var t=e?rA(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.length)},L5=function nfe(r,e){var t=-1,n=r.length;for(e||(e=Array(n));++t<n;)e[t]=r[t];return e};var k5=Object.create,rfe=function(){function r(){}return function(e){if(!Ba(e))return{};if(k5)return k5(e);r.prototype=e;var t=new r;return r.prototype=void 0,t}}();const ife=rfe,R5=function ofe(r,e){return function(t){return r(e(t))}},iA=R5(Object.getPrototypeOf,Object);var sfe=Object.prototype;const px=function ufe(r){var e=r&&r.constructor;return r===("function"==typeof e&&e.prototype||sfe)},F5=function lfe(r){return"function"!=typeof r.constructor||px(r)?{}:ife(iA(r))},vx=function cfe(r){return Bc(r)&&sp(r)};var B5="object"==typeof exports&&exports&&!exports.nodeType&&exports,j5=B5&&"object"==typeof module&&module&&!module.nodeType&&module,z5=j5&&j5.exports===B5?Fc.Buffer:void 0;const u0=(z5?z5.isBuffer:void 0)||function ffe(){return!1};var G5=Function.prototype.toString,bfe=Object.prototype.hasOwnProperty,wfe=G5.call(Object);const Vf=function xfe(r){if(!Bc(r)||"[object Object]"!=Gd(r))return!1;var e=iA(r);if(null===e)return!0;var t=bfe.call(e,"constructor")&&e.constructor;return"function"==typeof t&&t instanceof t&&G5.call(t)==wfe};var da={};da["[object Float32Array]"]=da["[object Float64Array]"]=da["[object Int8Array]"]=da["[object Int16Array]"]=da["[object Int32Array]"]=da["[object Uint8Array]"]=da["[object Uint8ClampedArray]"]=da["[object Uint16Array]"]=da["[object Uint32Array]"]=!0,da["[object Arguments]"]=da["[object Array]"]=da["[object ArrayBuffer]"]=da["[object Boolean]"]=da["[object DataView]"]=da["[object Date]"]=da["[object Error]"]=da["[object Function]"]=da["[object Map]"]=da["[object Number]"]=da["[object Object]"]=da["[object RegExp]"]=da["[object Set]"]=da["[object String]"]=da["[object WeakMap]"]=!1;const By=function Xfe(r){return function(e){return r(e)}};var U5="object"==typeof exports&&exports&&!exports.nodeType&&exports,jy=U5&&"object"==typeof module&&module&&!module.nodeType&&module,oA=jy&&jy.exports===U5&&r5.process;const l0=function(){try{return jy&&jy.require&&jy.require("util").types||oA&&oA.binding&&oA.binding("util")}catch{}}();var V5=l0&&l0.isTypedArray;const mx=V5?By(V5):function $fe(r){return Bc(r)&&YC(r.length)&&!!da[Gd(r)]},aA=function Qfe(r,e){if(("constructor"!==e||"function"!=typeof r[e])&&"__proto__"!=e)return r[e]},zy=function Jfe(r,e,t,n){var i=!t;t||(t={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=n?n(t[s],r[s],s,t,r):void 0;void 0===u&&(u=r[s]),i?hx(t,s,u):eA(t,s,u)}return t};var rhe=Object.prototype.hasOwnProperty;const H5=function ihe(r,e){var t=lu(r),n=!t&&r0(r),i=!t&&!n&&u0(r),o=!t&&!n&&!i&&mx(r),a=t||n||i||o,s=a?function ehe(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}(r.length,String):[],u=s.length;for(var l in r)(e||rhe.call(r,l))&&(!a||!("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||nx(l,u)))&&s.push(l);return s};var uhe=Object.prototype.hasOwnProperty;const che=function lhe(r){if(!Ba(r))return function ohe(r){var e=[];if(null!=r)for(var t in Object(r))e.push(t);return e}(r);var e=px(r),t=[];for(var n in r)"constructor"==n&&(e||!uhe.call(r,n))||t.push(n);return t},c0=function fhe(r){return sp(r)?H5(r,!0):che(r)},phe=function ghe(r,e,t,n,i,o,a){var s=aA(r,t),u=aA(e,t),l=a.get(u);if(l)nA(r,t,l);else{var c=o?o(s,u,t+"",r,e,a):void 0,f=void 0===c;if(f){var h=lu(u),d=!h&&u0(u),g=!h&&!d&&mx(u);c=u,h||d||g?lu(s)?c=s:vx(s)?c=L5(s):d?(f=!1,c=P5(u,!0)):g?(f=!1,c=N5(u,!0)):c=[]:Vf(u)||r0(u)?(c=s,r0(s)?c=function hhe(r){return zy(r,c0(r))}(s):(!Ba(s)||$C(s))&&(c=F5(u))):f=!1}f&&(a.set(u,c),i(c,u,n,o,a),a.delete(u)),nA(r,t,c)}},sA=function W5(r,e,t,n,i){r!==e&&A5(e,function(o,a){if(i||(i=new s0),Ba(o))phe(r,e,a,t,W5,n,i);else{var s=n?n(aA(r,a),o,a+"",r,e,i):void 0;void 0===s&&(s=o),nA(r,a,s)}},c0)},f0=function vhe(r,e){return C5(M5(r,e,o0),r+"")},$5=function mhe(r){return f0(function(e,t){var n=-1,i=t.length,o=i>1?t[i-1]:void 0,a=i>2?t[2]:void 0;for(o=r.length>3&&"function"==typeof o?(i--,o):void 0,a&&Ny(t[0],t[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++n<i;){var s=t[n];s&&r(e,s,n,o)}return e})};var yhe=$5(function(r,e,t){sA(r,e,t)});const ja=yhe;function yx(r){var e=-1,t=null==r?0:r.length;for(this.__data__=new sx;++e<t;)this.add(r[e])}yx.prototype.add=yx.prototype.push=function whe(r){return this.__data__.set(r,"__lodash_hash_undefined__"),this},yx.prototype.has=function Ehe(r){return this.__data__.has(r)};const uA=yx,Mhe=function She(r,e){for(var t=-1,n=null==r?0:r.length;++t<n;)if(e(r[t],t,r))return!0;return!1},lA=function Che(r,e){return r.has(e)},Y5=function The(r,e,t,n,i,o){var a=1&t,s=r.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var l=o.get(r),c=o.get(e);if(l&&c)return l==e&&c==r;var f=-1,h=!0,d=2&t?new uA:void 0;for(o.set(r,e),o.set(e,r);++f<s;){var g=r[f],m=e[f];if(n)var _=a?n(m,g,f,e,r,o):n(g,m,f,r,e,o);if(void 0!==_){if(_)continue;h=!1;break}if(d){if(!Mhe(e,function(D,L){if(!lA(d,L)&&(g===D||i(g,D,t,n,o)))return d.push(L)})){h=!1;break}}else if(g!==m&&!i(g,m,t,n,o)){h=!1;break}}return o.delete(r),o.delete(e),h},Ohe=function Ihe(r){var e=-1,t=Array(r.size);return r.forEach(function(n,i){t[++e]=[i,n]}),t},cA=function Phe(r){var e=-1,t=Array(r.size);return r.forEach(function(n){t[++e]=n}),t};var X5=zl?zl.prototype:void 0,fA=X5?X5.valueOf:void 0;const q5=function Xhe(r,e,t){var n=e(r);return lu(r)?n:tA(n,t(r))},K5=function Zhe(){return[]};var Jhe=Object.prototype.propertyIsEnumerable,Z5=Object.getOwnPropertySymbols,ede=Z5?function(r){return null==r?[]:(r=Object(r),function qhe(r,e){for(var t=-1,n=null==r?0:r.length,i=0,o=[];++t<n;){var a=r[t];e(a,t,r)&&(o[i++]=a)}return o}(Z5(r),function(e){return Jhe.call(r,e)}))}:K5;const hA=ede,nde=R5(Object.keys,Object);var ide=Object.prototype.hasOwnProperty;const Q5=function ode(r){if(!px(r))return nde(r);var e=[];for(var t in Object(r))ide.call(r,t)&&"constructor"!=t&&e.push(t);return e},Gy=function ade(r){return sp(r)?H5(r):Q5(r)},dA=function sde(r){return q5(r,Gy,hA)};var cde=Object.prototype.hasOwnProperty;const gA=lp(Fc,"DataView"),pA=lp(Fc,"Promise"),h0=lp(Fc,"Set"),vA=lp(Fc,"WeakMap");var J5="[object Map]",ej="[object Promise]",tj="[object Set]",nj="[object WeakMap]",rj="[object DataView]",yde=up(gA),bde=up(ky),wde=up(pA),xde=up(h0),Ede=up(vA),cp=Gd;(gA&&cp(new gA(new ArrayBuffer(1)))!=rj||ky&&cp(new ky)!=J5||pA&&cp(pA.resolve())!=ej||h0&&cp(new h0)!=tj||vA&&cp(new vA)!=nj)&&(cp=function(r){var e=Gd(r),t="[object Object]"==e?r.constructor:void 0,n=t?up(t):"";if(n)switch(n){case yde:return rj;case bde:return J5;case wde:return ej;case xde:return tj;case Ede:return nj}return e});const d0=cp;var ij="[object Arguments]",oj="[object Array]",bx="[object Object]",aj=Object.prototype.hasOwnProperty;const Cde=function Mde(r,e,t,n,i,o){var a=lu(r),s=lu(e),u=a?oj:d0(r),l=s?oj:d0(e),c=(u=u==ij?bx:u)==bx,f=(l=l==ij?bx:l)==bx,h=u==l;if(h&&u0(r)){if(!u0(e))return!1;a=!0,c=!1}if(h&&!c)return o||(o=new s0),a||mx(r)?Y5(r,e,t,n,i,o):function $he(r,e,t,n,i,o,a){switch(t){case"[object DataView]":if(r.byteLength!=e.byteLength||r.byteOffset!=e.byteOffset)return!1;r=r.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(r.byteLength!=e.byteLength||!o(new gx(r),new gx(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Zv(+r,+e);case"[object Error]":return r.name==e.name&&r.message==e.message;case"[object RegExp]":case"[object String]":return r==e+"";case"[object Map]":var s=Ohe;case"[object Set]":if(s||(s=cA),r.size!=e.size&&!(1&n))return!1;var l=a.get(r);if(l)return l==e;n|=2,a.set(r,e);var c=Y5(s(r),s(e),n,i,o,a);return a.delete(r),c;case"[object Symbol]":if(fA)return fA.call(r)==fA.call(e)}return!1}(r,e,u,t,n,i,o);if(!(1&t)){var d=c&&aj.call(r,"__wrapped__"),g=f&&aj.call(e,"__wrapped__");if(d||g){var m=d?r.value():r,_=g?e.value():e;return o||(o=new s0),i(m,_,t,n,o)}}return!!h&&(o||(o=new s0),function fde(r,e,t,n,i,o){var a=1&t,s=dA(r),u=s.length;if(u!=dA(e).length&&!a)return!1;for(var f=u;f--;){var h=s[f];if(!(a?h in e:cde.call(e,h)))return!1}var d=o.get(r),g=o.get(e);if(d&&g)return d==e&&g==r;var m=!0;o.set(r,e),o.set(e,r);for(var _=a;++f<u;){var D=r[h=s[f]],L=e[h];if(n)var O=a?n(L,D,h,e,r,o):n(D,L,h,r,e,o);if(!(void 0===O?D===L||i(D,L,t,n,o):O)){m=!1;break}_||(_="constructor"==h)}if(m&&!_){var Z=r.constructor,le=e.constructor;Z!=le&&"constructor"in r&&"constructor"in e&&!("function"==typeof Z&&Z instanceof Z&&"function"==typeof le&&le instanceof le)&&(m=!1)}return o.delete(r),o.delete(e),m}(r,e,t,n,i,o))},mA=function sj(r,e,t,n,i){return r===e||(null==r||null==e||!Bc(r)&&!Bc(e)?r!=r&&e!=e:Cde(r,e,t,n,sj,i))},jh=function Ade(r,e){return mA(r,e)};var Ode=Object.prototype.hasOwnProperty;const uj=function Pde(r){if(null==r)return!0;if(sp(r)&&(lu(r)||"string"==typeof r||"function"==typeof r.splice||u0(r)||mx(r)||r0(r)))return!r.length;var e=d0(r);if("[object Map]"==e||"[object Set]"==e)return!r.size;if(px(r))return!Q5(r).length;for(var t in r)if(Ode.call(r,t))return!1;return!0};var Ude=Object.getOwnPropertySymbols?function(r){for(var e=[];r;)tA(e,hA(r)),r=iA(r);return e}:K5;const lj=Ude,$de=function Wde(r){return q5(r,c0,lj)};var Xde=Object.prototype.hasOwnProperty;var Jde=/\w*$/;var cj=zl?zl.prototype:void 0,fj=cj?cj.valueOf:void 0;const Sge=function _ge(r,e,t){var n=r.constructor;switch(e){case"[object ArrayBuffer]":return rA(r);case"[object Boolean]":case"[object Date]":return new n(+r);case"[object DataView]":return function Zde(r,e){var t=e?rA(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.byteLength)}(r,t);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return N5(r,t);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(r);case"[object RegExp]":return function ege(r){var e=new r.constructor(r.source,Jde.exec(r));return e.lastIndex=r.lastIndex,e}(r);case"[object Symbol]":return function nge(r){return fj?Object(fj.call(r)):{}}(r)}};var hj=l0&&l0.isMap;const Tge=hj?By(hj):function Cge(r){return Bc(r)&&"[object Map]"==d0(r)};var dj=l0&&l0.isSet;const Lge=dj?By(dj):function Oge(r){return Bc(r)&&"[object Set]"==d0(r)};var gj="[object Arguments]",pj="[object Function]",vj="[object Object]",ia={};ia[gj]=ia["[object Array]"]=ia["[object ArrayBuffer]"]=ia["[object DataView]"]=ia["[object Boolean]"]=ia["[object Date]"]=ia["[object Float32Array]"]=ia["[object Float64Array]"]=ia["[object Int8Array]"]=ia["[object Int16Array]"]=ia["[object Int32Array]"]=ia["[object Map]"]=ia["[object Number]"]=ia[vj]=ia["[object RegExp]"]=ia["[object Set]"]=ia["[object String]"]=ia["[object Symbol]"]=ia["[object Uint8Array]"]=ia["[object Uint8ClampedArray]"]=ia["[object Uint16Array]"]=ia["[object Uint32Array]"]=!0,ia["[object Error]"]=ia[pj]=ia["[object WeakMap]"]=!1;const mj=function wx(r,e,t,n,i,o){var a,s=1&e,u=2&e,l=4&e;if(t&&(a=i?t(r,n,i,o):t(r)),void 0!==a)return a;if(!Ba(r))return r;var c=lu(r);if(c){if(a=function qde(r){var e=r.length,t=new r.constructor(e);return e&&"string"==typeof r[0]&&Xde.call(r,"index")&&(t.index=r.index,t.input=r.input),t}(r),!s)return L5(r,a)}else{var f=d0(r),h=f==pj||"[object GeneratorFunction]"==f;if(u0(r))return P5(r,s);if(f==vj||f==gj||h&&!i){if(a=u||h?{}:F5(r),!s)return u?function Vde(r,e){return zy(r,lj(r),e)}(r,function Fde(r,e){return r&&zy(e,c0(e),r)}(a,r)):function jde(r,e){return zy(r,hA(r),e)}(r,function kde(r,e){return r&&zy(e,Gy(e),r)}(a,r))}else{if(!ia[f])return i?r:{};a=Sge(r,f,s)}}o||(o=new s0);var d=o.get(r);if(d)return d;o.set(r,a),Lge(r)?r.forEach(function(_){a.add(wx(_,e,t,_,r,o))}):Tge(r)&&r.forEach(function(_,D){a.set(D,wx(_,e,t,D,r,o))});var m=c?void 0:(l?u?$de:dA:u?c0:Gy)(r);return function Nde(r,e){for(var t=-1,n=null==r?0:r.length;++t<n&&!1!==e(r[t],t,r););}(m||r,function(_,D){m&&(_=r[D=_]),eA(a,D,wx(_,e,t,D,r,o))}),a},yA=function upe(r){return mj(r,4)},Oa=function fpe(r){return mj(r,5)};var yj=Object.prototype,hpe=yj.hasOwnProperty,dpe=f0(function(r,e){r=Object(r);var t=-1,n=e.length,i=n>2?e[2]:void 0;for(i&&Ny(e[0],e[1],i)&&(n=1);++t<n;)for(var o=e[t],a=c0(o),s=-1,u=a.length;++s<u;){var l=a[s],c=r[l];(void 0===c||Zv(c,yj[l])&&!hpe.call(r,l))&&(r[l]=o[l])}return r});const gpe=dpe,ppe=function bj(r,e,t,n,i,o){return Ba(r)&&Ba(e)&&(o.set(e,r),sA(r,e,void 0,bj,o),o.delete(e)),r};var vpe=$5(function(r,e,t,n){sA(r,e,t,n)});const mpe=vpe;var ype=f0(function(r){return r.push(void 0,ppe),_5(mpe,void 0,r)});const wj=ype,wpe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])},_pe=/^\s*class\s+/.test(`${class Epe{}}`)||/^\s*class\s*\{/.test(`${class{}}`);function bA(r,e){let t;return _pe?t=class extends e{}:(t=function(){return e.apply(this,arguments)},function xpe(r,e){function t(){this.constructor=r}wpe(r,e),r.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(t,e)),Object.defineProperty(t,"name",{value:r}),t}function xj(r){return"__proto__"===r}function wA(r,e,t="/"){let n;const i=Array.isArray(e)?e:e.split(t);if(i.length)for(n=r;i.length;){const o=i.shift();if(Object(n)!==n||!o||!(o in n))return;n=n[o]}return n}function Uy(r,e,t,n="/"){const i=Array.isArray(e)?e:e.split(n),o=i.pop();if(o&&!xj(o)){let a=r;i.forEach(s=>{xj(s)||(null==a[s]&&(a[s]={}),a=a[s])}),a[o]=t}return r}function Ej(r,e,t="/"){const n=Array.isArray(e)?e.slice():e.split(t),i=n.pop();if(i)if(n.length>0){const o=wA(r,n);o&&delete o[i]}else delete r[i];return r}class Gl extends class mue{constructor(){this.listeners={}}on(e,t,n){return null==t||(this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t,n)),this}once(e,t,n){const i=(...o)=>(this.off(e,i),KC([t,n],o));return this.on(e,i,this)}off(e,t,n){if(!(e||t||n))return this.listeners={},this;const i=this.listeners;return(e?[e]:Object.keys(i)).forEach(a=>{const s=i[a];if(s){if(!t&&!n)return void delete i[a];for(let u=s.length-2;u>=0;u-=2)t&&s[u]!==t||n&&s[u+1]!==n||s.splice(u,2)}}),this}trigger(e,...t){let n=!0;if("*"!==e){const o=this.listeners[e];null!=o&&(n=KC([...o],t))}const i=this.listeners["*"];return null!=i?qC([n,KC([...i],[e,...t])]):n}emit(e,...t){return this.trigger(e,...t)}}{}(function(r){r.dispose=Ud.dispose})(Gl||(Gl={})),function bpe(r,...e){e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(n=>{"constructor"!==n&&Object.defineProperty(r.prototype,n,Object.getOwnPropertyDescriptor(t.prototype,n))})})}(Gl,Ud);const Tpe=function Dpe(r){return r!=r},_j=function Lpe(r,e){return!(null==r||!r.length)&&function Ppe(r,e,t){return e==e?function Ipe(r,e,t){for(var n=t-1,i=r.length;++n<i;)if(r[n]===e)return n;return-1}(r,e,t):function Cpe(r,e,t,n){for(var i=r.length,o=t+(n?1:-1);n?o--:++o<i;)if(e(r[o],o,r))return o;return-1}(r,Tpe,t)}(r,e,0)>-1},Sj=function kpe(r,e,t){for(var n=-1,i=null==r?0:r.length;++n<i;)if(t(e,r[n]))return!0;return!1};var jpe=h0&&1/cA(new h0([,-0]))[1]==1/0?function(r){return new h0(r)}:function Rpe(){};const zpe=jpe,Mj=function Upe(r,e,t){var n=-1,i=_j,o=r.length,a=!0,s=[],u=s;if(t)a=!1,i=Sj;else if(o>=200){var l=e?null:zpe(r);if(l)return cA(l);a=!1,i=lA,u=new uA}else u=e?[]:s;e:for(;++n<o;){var c=r[n],f=e?e(c):c;if(c=t||0!==c?c:0,a&&f==f){for(var h=u.length;h--;)if(u[h]===f)continue e;e&&u.push(f),s.push(c)}else i(u,f,t)||(u!==s&&u.push(f),s.push(c))}return s},Cj=function Vpe(r){return r&&r.length?Mj(r):[]};var Hpe=f0(function(r){return Mj(dx(r,1,vx,!0))});const Aj=Hpe;var Ype=Math.floor,Xpe=Math.min;const Dj=function qpe(r,e,t,n){var i=0,o=null==r?0:r.length;if(0===o)return 0;for(var a=(e=t(e))!=e,s=null===e,u=Uf(e),l=void 0===e;i<o;){var c=Ype((i+o)/2),f=t(r[c]),h=void 0!==f,d=null===f,g=f==f,m=Uf(f);if(a)var _=n||g;else _=l?g&&(n||h):s?g&&h&&(n||!d):u?g&&h&&!d&&(n||!m):!d&&!m&&(n?f<=e:f<e);_?i=c+1:o=c}return Xpe(o,4294967294)},tve=function eve(r,e){return function Qpe(r,e,t){var n=0,i=null==r?n:r.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;n<i;){var o=n+i>>>1,a=r[o];null!==a&&!Uf(a)&&(t?a<=e:a<e)?n=o+1:i=o}return i}return Dj(r,e,o0,t)}(r,e)},Tj=function ave(r){return r==r&&!Ba(r)},Ij=function lve(r,e){return function(t){return null!=t&&t[r]===e&&(void 0!==e||r in Object(t))}},fve=function cve(r){var e=function sve(r){for(var e=Gy(r),t=e.length;t--;){var n=e[t],i=r[n];e[t]=[n,i,Tj(i)]}return e}(r);return 1==e.length&&e[0][2]?Ij(e[0][0],e[0][1]):function(t){return t===r||function ive(r,e,t,n){var i=t.length,o=i,a=!n;if(null==r)return!o;for(r=Object(r);i--;){var s=t[i];if(a&&s[2]?s[1]!==r[s[0]]:!(s[0]in r))return!1}for(;++i<o;){var u=(s=t[i])[0],l=r[u],c=s[1];if(a&&s[2]){if(void 0===l&&!(u in r))return!1}else{var f=new s0;if(n)var h=n(l,c,u,r,e,f);if(!(void 0===h?mA(c,l,3,n,f):h))return!1}}return!0}(t,r,e)}},mve=function vve(r,e){return ZC(r)&&Tj(e)?Ij(Fy(r),e):function(t){var n=function hve(r,e,t){var n=null==r?void 0:cx(r,e);return void 0===n?t:n}(t,r);return void 0===n&&n===e?w5(t,r):mA(e,n,3)}},_ve=function Eve(r){return ZC(r)?function yve(r){return function(e){return e?.[r]}}(Fy(r)):function wve(r){return function(e){return cx(e,r)}}(r)},xA=function Sve(r){return"function"==typeof r?r:null==r?o0:"object"==typeof r?lu(r)?mve(r[0],r[1]):fve(r):_ve(r)};var Ive=function Tve(r,e){return function(t,n){if(null==t)return t;if(!sp(t))return r(t,n);for(var i=t.length,o=e?i:-1,a=Object(t);(e?o--:++o<i)&&!1!==n(a[o],o,a););return t}}(function Ave(r,e){return r&&A5(r,e,Gy)});const Oj=Ive,Rve=function kve(r,e){if(r!==e){var t=void 0!==r,n=null===r,i=r==r,o=Uf(r),a=void 0!==e,s=null===e,u=e==e,l=Uf(e);if(!s&&!l&&!o&&r>e||o&&a&&u&&!s&&!l||n&&a&&u||!t&&u||!i)return 1;if(!n&&!o&&!l&&r<e||l&&t&&i&&!n&&!o||s&&t&&i||!a&&i||!u)return-1}return 0},zve=function jve(r,e,t){e=e.length?Ry(e,function(o){return lu(o)?function(a){return cx(a,1===o.length?o[0]:o)}:o}):[o0];var n=-1;e=Ry(e,By(xA));var i=function Ove(r,e){var t=-1,n=sp(r)?Array(r.length):[];return Oj(r,function(i,o,a){n[++t]=e(i,o,a)}),n}(r,function(o,a,s){return{criteria:Ry(e,function(l){return l(o)}),index:++n,value:o}});return function Nve(r,e){var t=r.length;for(r.sort(e);t--;)r[t]=r[t].value;return r}(i,function(o,a){return function Fve(r,e,t){for(var n=-1,i=r.criteria,o=e.criteria,a=i.length,s=t.length;++n<a;){var u=Rve(i[n],o[n]);if(u)return n>=s?u:u*("desc"==t[n]?-1:1)}return r.index-e.index}(o,a,t)})};var Gve=f0(function(r,e){if(null==r)return[];var t=e.length;return t>1&&Ny(r,e[0],e[1])?e=[]:t>2&&Ny(e[0],e[1],e[2])&&(e=[e[0]]),zve(r,dx(e,1),[])});const Uve=Gve,Hve=function Vve(r,e,t,n){for(var i=-1,o=null==r?0:r.length;++i<o;){var a=r[i];e(n,a,t(a),r)}return n},$ve=function Wve(r,e,t,n){return Oj(r,function(i,o,a){e(n,i,t(i),a)}),n};var Kve=Object.prototype.hasOwnProperty,Zve=function Yve(r,e){return function(t,n){var i=lu(t)?Hve:$ve,o=e?e():{};return i(t,r,xA(n),o)}}(function(r,e,t){Kve.call(r,t)?r[t].push(e):hx(r,t,[e])});const Pj=Zve;var t0e=f0(function(r,e){return vx(r)?function Jve(r,e,t,n){var i=-1,o=_j,a=!0,s=r.length,u=[],l=e.length;if(!s)return u;t&&(e=Ry(e,By(t))),n?(o=Sj,a=!1):e.length>=200&&(o=lA,a=!1,e=new uA(e));e:for(;++i<s;){var c=r[i],f=null==t?c:t(c);if(c=n||0!==c?c:0,a&&f==f){for(var h=l;h--;)if(e[h]===f)continue e;u.push(c)}else o(e,f,n)||u.push(c)}return u}(r,dx(e,1,vx,!0)):[]});const n0e=t0e,a0e=function o0e(r,e){return r>e},u0e=function s0e(r){return r&&r.length?function r0e(r,e,t){for(var n=-1,i=r.length;++n<i;){var o=r[n],a=e(o);if(null!=a&&(void 0===s?a==a&&!Uf(a):t(a,s)))var s=a,u=o}return u}(r,o0,a0e):void 0},m0e=function d0e(r){return function(e){return r?.[e]}}({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"});var y0e=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,S0e=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var A0e=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var I0e=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var Nj="\\ud800-\\udfff",Lj="\\u2700-\\u27bf",kj="a-z\\xdf-\\xf6\\xf8-\\xff",Rj="A-Z\\xc0-\\xd6\\xd8-\\xde",Fj="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",jj="["+Fj+"]",zj="\\d+",V0e="["+Lj+"]",Gj="["+kj+"]",Uj="[^"+Nj+Fj+zj+Lj+kj+Rj+"]",Vj="(?:\\ud83c[\\udde6-\\uddff]){2}",Hj="[\\ud800-\\udbff][\\udc00-\\udfff]",g0="["+Rj+"]",Wj="(?:"+Gj+"|"+Uj+")",X0e="(?:"+g0+"|"+Uj+")",$j="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Yj="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Xj="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",qj="[\\ufe0e\\ufe0f]?",Q0e=qj+Xj+"(?:\\u200d(?:"+["[^"+Nj+"]",Vj,Hj].join("|")+")"+qj+Xj+")*",J0e="(?:"+[V0e,Vj,Hj].join("|")+")"+Q0e,eme=RegExp([g0+"?"+Gj+"+"+$j+"(?="+[jj,g0,"$"].join("|")+")",X0e+"+"+Yj+"(?="+[jj,g0+Wj,"$"].join("|")+")",g0+"?"+Wj+"+"+$j,g0+"+"+Yj,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",zj,J0e].join("|"),"g");const ime=function rme(r,e,t){return r=n0(r),void 0===(e=t?void 0:e)?function O0e(r){return I0e.test(r)}(r)?function tme(r){return r.match(eme)||[]}(r):function D0e(r){return r.match(A0e)||[]}(r):r.match(e)||[]};var ame=RegExp("['\u2019]","g");const xx=function sme(r){return function(e){return function f0e(r,e,t,n){var i=-1,o=null==r?0:r.length;for(n&&o&&(t=r[++i]);++i<o;)t=e(t,r[i],i,r);return t}(ime(function M0e(r){return(r=n0(r))&&r.replace(y0e,m0e).replace(S0e,"")}(e).replace(ame,"")),r,"")}},fme=function cme(r,e,t){var n=r.length;return t=void 0===t?n:t,!e&&t>=n?r:function ume(r,e,t){var n=-1,i=r.length;e<0&&(e=-e>i?0:i+e),(t=t>i?i:t)<0&&(t+=i),i=e>t?0:t-e>>>0,e>>>=0;for(var o=Array(i);++n<i;)o[n]=r[n+e];return o}(r,e,t)};var bme=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");const Kj=function wme(r){return bme.test(r)};var Zj="\\ud800-\\udfff",Dme="["+Zj+"]",EA="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",_A="\\ud83c[\\udffb-\\udfff]",Qj="[^"+Zj+"]",Jj="(?:\\ud83c[\\udde6-\\uddff]){2}",e4="[\\ud800-\\udbff][\\udc00-\\udfff]",t4="(?:"+EA+"|"+_A+")?",n4="[\\ufe0e\\ufe0f]?",Pme=n4+t4+"(?:\\u200d(?:"+[Qj,Jj,e4].join("|")+")"+n4+t4+")*",Nme="(?:"+[Qj+EA+"?",EA,Jj,e4,Dme].join("|")+")",Lme=RegExp(_A+"(?="+_A+")|"+Nme+Pme,"g");const Bme=function Fme(r){return Kj(r)?function kme(r){return r.match(Lme)||[]}(r):function xme(r){return r.split("")}(r)},r4=function jme(r){return function(e){e=n0(e);var t=Kj(e)?Bme(e):void 0,n=t?t[0]:e.charAt(0),i=t?fme(t,1).join(""):e.slice(1);return n[r]()+i}},Vy=r4("toUpperCase");var Gme=xx(function(r,e,t){return r+(t?" ":"")+Vy(e)});const i4=Gme;var Hme=xx(function(r,e,t){return e=e.toLowerCase(),r+(t?function Ume(r){return Vy(n0(r).toLowerCase())}(e):e)});const Hy=Hme;var Wme=xx(function(r,e,t){return r+(t?" ":"")+e.toUpperCase()});const $me=Wme;var Yme=xx(function(r,e,t){return r+(t?" ":"")+e.toLowerCase()});const SA=Yme,qme=r4("toLowerCase"),fp=r=>{const e=Object.create(null);return t=>e[t]||(e[t]=r(t))},o4=fp(r=>r.replace(/\B([A-Z])/g,"-$1").toLowerCase()),MA=fp(r=>i4(Hy(r)).replace(/ /g,""));function CA(r){let e=2166136261,t=!1,n=r;for(let i=0,o=n.length;i<o;i+=1){let a=n.charCodeAt(i);a>127&&!t&&(n=unescape(encodeURIComponent(n)),a=n.charCodeAt(i),t=!0),e^=a,e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24)}return e>>>0}function AA(){let r="";const e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";for(let t=0,n=e.length;t<n;t+=1){const i=e[t],o=16*Math.random()|0;r+=("x"===i?o:"y"===i?3&o|8:i).toString(16)}return r}function Zme(r,e,t){let n=new Array(e.length+1),i=new Array(e.length+1);const o=t+1;for(let s=0;s<=e.length;s+=1)n[s]=s;for(let s=1;s<=r.length;s+=1){const u=r.charCodeAt(s-1),l=s>t?s-t:1,c=e.length>t+s?t+s:e.length;i[0]=s;let f=s;for(let d=1;d<l;d+=1)i[d]=o;for(let d=l;d<=c;d+=1){const g=u===e.charCodeAt(d-1)?n[d-1]:Math.min(n[d]+1,i[d-1]+1,n[d-1]+2);i[d]=g,f=Math.min(f,g)}for(let d=c+1;d<=e.length;d+=1)i[d]=o;if(f>t)return;const h=n;n=i,i=h}const a=n[e.length];return a>t?void 0:a}fp(r=>$me(r).replace(/ /g,"_")),fp(r=>SA(r).replace(/ /g,".")),fp(r=>SA(r).replace(/ /g,"/")),fp(r=>Vy(SA(r))),fp(r=>i4(Hy(r)));const a4=function Jme(r){return"number"==typeof r||Bc(r)&&"[object Number]"==Gd(r)},Ul=function nye(r,e,t){return void 0===t&&(t=e,e=void 0),void 0!==t&&(t=(t=Qv(t))==t?t:0),void 0!==e&&(e=(e=Qv(e))==e?e:0),function eye(r,e,t){return r==r&&(void 0!==t&&(r=r<=t?r:t),void 0!==e&&(r=r>=e?r:e)),r}(Qv(r),e,t)};function zh(r){return"string"==typeof r&&"%"===r.slice(-1)}function Gh(r,e){if(null==r)return 0;let t;if("string"==typeof r){if(t=parseFloat(r),zh(r)&&(t/=100,Number.isFinite(t)))return t*e}else t=r;return Number.isFinite(t)?t>0&&t<1?t*e:t:0}function hp(r){if("object"==typeof r){let t=0,n=0,i=0,o=0;return null!=r.vertical&&Number.isFinite(r.vertical)&&(n=o=r.vertical),null!=r.horizontal&&Number.isFinite(r.horizontal)&&(i=t=r.horizontal),null!=r.left&&Number.isFinite(r.left)&&(t=r.left),null!=r.top&&Number.isFinite(r.top)&&(n=r.top),null!=r.right&&Number.isFinite(r.right)&&(i=r.right),null!=r.bottom&&Number.isFinite(r.bottom)&&(o=r.bottom),{top:n,right:i,bottom:o,left:t}}let e=0;return null!=r&&Number.isFinite(r)&&(e=r),{top:e,right:e,bottom:e,left:e}}let DA=!1,s4=!1,u4=!1,l4=!1,c4=!1,f4=!1,h4=!1,d4=!1,g4=!1,p4=!1,v4=!1,m4=!1,y4=!1,b4=!1,w4=!1,x4=!1;if("object"==typeof navigator){const r=navigator.userAgent;DA=r.indexOf("Macintosh")>=0,s4=!!r.match(/(iPad|iPhone|iPod)/g),u4=r.indexOf("Windows")>=0,l4=r.indexOf("MSIE")>=0,c4=!!r.match(/Trident\/7\./),f4=!!r.match(/Edge\//),h4=r.indexOf("Mozilla/")>=0&&r.indexOf("MSIE")<0&&r.indexOf("Edge/")<0,g4=r.indexOf("Chrome/")>=0&&r.indexOf("Edge/")<0,p4=r.indexOf("Opera/")>=0||r.indexOf("OPR/")>=0,v4=r.indexOf("Firefox/")>=0,m4=r.indexOf("AppleWebKit/")>=0&&r.indexOf("Chrome/")<0&&r.indexOf("Edge/")<0,"object"==typeof document&&(x4=!document.createElementNS||"[object SVGForeignObjectElement]"!=`${document.createElementNS("http://www.w3.org/2000/svg","foreignObject")}`||r.indexOf("Opera/")>=0)}if("object"==typeof window&&(d4=null!=window.chrome&&null!=window.chrome.app&&null!=window.chrome.app.runtime,b4=null!=window.PointerEvent&&!DA),"object"==typeof document){y4="ontouchstart"in document.documentElement;try{const r=Object.defineProperty({},"passive",{get(){w4=!0}}),e=document.createElement("div");e.addEventListener&&e.addEventListener("click",()=>{},r)}catch{}}var Vd;(function(r){r.IS_MAC=DA,r.IS_IOS=s4,r.IS_WINDOWS=u4,r.IS_IE=l4,r.IS_IE11=c4,r.IS_EDGE=f4,r.IS_NETSCAPE=h4,r.IS_CHROME_APP=d4,r.IS_CHROME=g4,r.IS_OPERA=p4,r.IS_FIREFOX=v4,r.IS_SAFARI=m4,r.SUPPORT_TOUCH=y4,r.SUPPORT_POINTER=b4,r.SUPPORT_PASSIVE=w4,r.NO_FOREIGNOBJECT=x4,r.SUPPORT_FOREIGNOBJECT=!r.NO_FOREIGNOBJECT})(Vd||(Vd={})),function(r){function e(){const o=window.module;return null!=o&&null!=o.hot&&null!=o.hot.status?o.hot.status():"unkonwn"}r.getHMRStatus=e,r.isApplyingHMR=function t(){return"apply"===e()};const n={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};r.isEventSupported=function i(o){const a=document.createElement(n[o]||"div"),s=`on${o}`;let u=s in a;return u||(a.setAttribute(s,"return;"),u="function"==typeof a[s]),u}}(Vd||(Vd={}));const TA=/[\t\r\n\f]/g,IA=/\S+/g,p0=r=>` ${r} `;function v0(r){return r&&r.getAttribute&&r.getAttribute("class")||""}function dp(r,e){if(null==r||null==e)return!1;const t=p0(v0(r)),n=p0(e);return 1===r.nodeType&&t.replace(TA," ").includes(n)}function Mo(r,e){if(null!=r&&null!=e){if("function"==typeof e)return Mo(r,e(v0(r)));if("string"==typeof e&&1===r.nodeType){const t=e.match(IA)||[],n=p0(v0(r)).replace(TA," ");let i=t.reduce((o,a)=>o.indexOf(p0(a))<0?`${o}${a} `:o,n);i=i.trim(),n!==i&&r.setAttribute("class",i)}}}function Vl(r,e){if(null!=r){if("function"==typeof e)return Vl(r,e(v0(r)));if((!e||"string"==typeof e)&&1===r.nodeType){const t=(e||"").match(IA)||[],n=p0(v0(r)).replace(TA," ");let i=t.reduce((o,a)=>{const s=p0(a);return o.indexOf(s)>-1?o.replace(s," "):o},n);i=e?i.trim():"",n!==i&&r.setAttribute("class",i)}}}function E4(r,e,t){if(null!=r&&null!=e){if(null!=t&&"string"==typeof e)return void(t?Mo(r,e):Vl(r,e));if("function"==typeof e)return E4(r,e(v0(r),t),t);"string"==typeof e&&(e.match(IA)||[]).forEach(i=>{dp(r,i)?Vl(r,i):Mo(r,i)})}}let _4=0;function OA(r){return(null==r.id||""===r.id)&&(r.id=function rye(){return _4+=1,`v${_4}`}()),r.id}function Hd(r){return null!=r&&"function"==typeof r.getScreenCTM&&r instanceof SVGElement}const Ps={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"};function M4(r,e=document){return e.createElement(r)}function PA(r,e=Ps.xhtml,t=document){return t.createElementNS(e,r)}function Uh(r,e=document){return PA(r,Ps.svg,e)}function Ex(r){if(r){const t=`<svg xmlns="${Ps.svg}" xmlns:xlink="${Ps.xlink}" version="1.1">${r}</svg>`,{documentElement:n}=function iye(r,e={}){let t;try{const n=new DOMParser;null!=e.async&&(n.async=e.async),t=n.parseFromString(r,e.mimeType||"text/xml")}catch{t=void 0}if(!t||t.getElementsByTagName("parsererror").length)throw new Error(`Invalid XML: ${r}`);return t}(t,{async:!1});return n}const e=document.createElementNS(Ps.svg,"svg");return e.setAttributeNS(Ps.xmlns,"xmlns:xlink",Ps.xlink),e.setAttribute("version","1.1"),e}function NA(r){let e=0,t=r.previousSibling;for(;t;)1===t.nodeType&&(e+=1),t=t.previousSibling;return e}function C4(r,e,t){const n=r.ownerSVGElement;let i=r.parentNode;for(;i&&i!==t&&i!==n;){if(dp(i,e))return i;i=i.parentNode}return null}function A4(r,e){const t=e&&e.parentNode;return r===t||!!(t&&1===t.nodeType&&16&r.compareDocumentPosition(t))}function m0(r){r&&(Array.isArray(r)?r:[r]).forEach(t=>{t.parentNode&&t.parentNode.removeChild(t)})}function Wy(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function $y(r,e){(Array.isArray(e)?e:[e]).forEach(n=>{null!=n&&r.appendChild(n)})}function LA(r,e){const t=r.parentNode;t&&(Array.isArray(e)?e:[e]).forEach(i=>{null!=i&&t.insertBefore(i,r)})}function D4(r){try{return r instanceof HTMLElement}catch{return"object"==typeof r&&1===r.nodeType&&"object"==typeof r.style&&"object"==typeof r.ownerDocument}}const T4=["viewBox","attributeName","attributeType","repeatCount"];function I4(r,e){const t=P4(e);t.ns?r.hasAttributeNS(t.ns,t.local)&&r.removeAttributeNS(t.ns,t.local):r.hasAttribute(e)&&r.removeAttribute(e)}function kA(r,e,t){if(null==t)return I4(r,e);const n=P4(e);n.ns&&"string"==typeof t?r.setAttributeNS(n.ns,e,t):"id"===e?r.id=`${t}`:r.setAttribute(e,`${t}`)}function O4(r,e){Object.keys(e).forEach(t=>{kA(r,t,e[t])})}function $o(r,e,t){if(null==e){const n=r.attributes,i={};for(let o=0;o<n.length;o+=1)i[n[o].name]=n[o].value;return i}if("string"==typeof e&&void 0===t)return r.getAttribute(e);"object"==typeof e?O4(r,e):kA(r,e,t)}function P4(r){if(-1!==r.indexOf(":")){const e=r.split(":");return{ns:Ps[e[0]],local:e[1]}}return{ns:null,local:r}}function Yy(r){const e={};return Object.keys(r).forEach(t=>{const n=T4.includes(t)?t:o4(t);e[n]=r[t]}),e}function _x(r){const e={};return r.split(";").forEach(n=>{const i=n.trim();if(i){const o=i.split("=");o.length&&(e[o[0].trim()]=o[1]?o[1].trim():"")}}),e}function RA(r,e){return Object.keys(e).forEach(t=>{if("class"===t)r[t]=r[t]?`${r[t]} ${e[t]}`:e[t];else if("style"===t){const n="object"==typeof r[t],i="object"==typeof e[t];let o,a;n&&i?(o=r[t],a=e[t]):n?(o=r[t],a=_x(e[t])):i?(o=_x(r[t]),a=e[t]):(o=_x(r[t]),a=_x(e[t])),r[t]=RA(o,a)}else r[t]=e[t]}),r}function hye(r,e,t={}){const n=t.offset||0,i=[],o=[];let a,s,u=null;for(let l=0;l<r.length;l+=1){a=o[l]=r[l];for(let c=0,f=e.length;c<f;c+=1){const h=e[c],g=h.end+n;l>=h.start+n&&l<g&&("string"==typeof a?a=o[l]={t:r[l],attrs:h.attrs}:a.attrs=RA(RA({},a.attrs),h.attrs),t.includeAnnotationIndices&&(null==a.annotations&&(a.annotations=[]),a.annotations.push(c)))}s=o[l-1],s?Ba(a)&&Ba(s)?JSON.stringify(a.attrs)===JSON.stringify(s.attrs)?u.t+=a.t:(i.push(u),u=a):Ba(a)||Ba(s)?(i.push(u),u=a):u=(u||"")+a:u=a}return null!=u&&i.push(u),i}var N4;let gp;!function(r){function e(l){const c="data:";return l.substr(0,c.length)===c}function n(l){let c=l.replace(/\s/g,"");c=decodeURIComponent(c);const f=c.indexOf(","),h=c.slice(0,f),d=h.split(":")[1].split(";")[0],g=c.slice(f+1);let m;m=h.indexOf("base64")>=0?atob(g):unescape(encodeURIComponent(g));const _=new Uint8Array(m.length);for(let D=0;D<m.length;D+=1)_[D]=m.charCodeAt(D);return new Blob([_],{type:d})}function i(l,c){const f=window.navigator.msSaveBlob;if(f)f(l,c);else{const h=window.URL.createObjectURL(l),d=document.createElement("a");d.href=h,d.download=c,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(h)}}function s(l){const c=parseFloat(l);return Number.isNaN(c)?null:c}r.isDataUrl=e,r.imageToDataUri=function t(l,c){if(!l||e(l))return void setTimeout(()=>c(null,l));const f=()=>{c(new Error(`Failed to load image: ${l}`))},h=window.FileReader?g=>{if(200===g.status){const m=new FileReader;m.onload=_=>{c(null,_.target.result)},m.onerror=f,m.readAsDataURL(g.response)}else f()}:g=>{if(200===g.status){let _=l.split(".").pop()||"png";"svg"===_&&(_="svg+xml");const D=`data:image/${_};base64,`,L=new Uint8Array(g.response),O=D+btoa((_=>{const L=[];for(let O=0;O<_.length;O+=32768)L.push(String.fromCharCode.apply(null,_.subarray(O,O+32768)));return L.join("")})(L));c(null,O)}else f()},d=new XMLHttpRequest;d.responseType=window.FileReader?"blob":"arraybuffer",d.open("GET",l,!0),d.addEventListener("error",f),d.addEventListener("load",()=>h(d)),d.send()},r.dataUriToBlob=n,r.downloadBlob=i,r.downloadDataUri=function o(l,c){i(n(l),c)},r.svgToDataUrl=function u(l,c={}){let f=null;const h=O=>(null==f&&(f=function a(l){const c=l.match(/<svg[^>]*viewBox\s*=\s*(["']?)(.+?)\1[^>]*>/i);return c&&c[2]?c[2].replace(/\s+/," ").split(" "):null}(l)),null!=f?s(f[O]):null),d=O=>{const Z=l.match(O);return Z&&Z[2]?s(Z[2]):null};let g=c.width;if(null==g&&(g=d(/<svg[^>]*width\s*=\s*(["']?)(.+?)\1[^>]*>/i)),null==g&&(g=h(2)),null==g)throw new Error("Can not parse width from svg string");let m=c.height;if(null==m&&(m=d(/<svg[^>]*height\s*=\s*(["']?)(.+?)\1[^>]*>/i)),null==m&&(m=h(3)),null==m)throw new Error("Can not parse height from svg string");return`data:image/svg+xml,${encodeURIComponent(l).replace(/'/g,"%27").replace(/"/g,"%22")}`}}(N4||(N4={}));const gye={px:r=>r,mm:r=>gp*r,cm:r=>gp*r*10,in:r=>gp*r*25.4,pt:r=>gp*(25.4*r/72),pc:r=>gp*(25.4*r/6)};var L4;!function(r){function e(n,i,o){const a=document.createElement("div"),s=a.style;s.display="inline-block",s.position="absolute",s.left="-15000px",s.top="-15000px",s.width=n+(o||"px"),s.height=i+(o||"px"),document.body.appendChild(a);const u=a.getBoundingClientRect(),l={width:u.width||0,height:u.height||0};return document.body.removeChild(a),l}r.measure=e,r.toPx=function t(n,i){null==gp&&(gp=e("1","1","mm").width);const o=i?gye[i]:null;return o?o(n):n}}(L4||(L4={}));const pye=/-(.)/g,FA={},k4=["webkit","ms","moz","o"],R4=document?document.createElement("div").style:{};function BA(r,e){const t=r.ownerDocument&&r.ownerDocument.defaultView&&r.ownerDocument.defaultView.opener?r.ownerDocument.defaultView.getComputedStyle(r,null):window.getComputedStyle(r,null);return t&&e?t.getPropertyValue(e)||t[e]:t}document.selection||window;const yye={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function Xy(r,e,t){if("string"!=typeof e)for(const n in e)Xy(r,n,e[n]);else{const n=function bye(r){return/^--/.test(r)}(e);if(n||(e=function F4(r){const e=function vye(r){return r.replace(pye,(e,t)=>t.toUpperCase())}(r);if(null==FA[e]){const t=e.charAt(0).toUpperCase()+e.slice(1);FA[e]=e in R4?e:function mye(r){for(let e=0;e<k4.length;e+=1){const t=k4[e]+r;if(t in R4)return t}return null}(t)}return FA[e]}(e)),void 0===t)return function Sx(r,e,t){const n=window.getComputedStyle(r,null);return t?n.getPropertyValue(e)||void 0:n[e]||r.style[e]}(r,e,n);n||(t=function wye(r,e){return yye[r]||"number"!=typeof e?e:`${e}px`}(e,t));const i=r.style;n?i.setProperty(e,t):i[e]=t}}const Cx=new WeakMap;function B4(r,e){const t=Hy(e),n=Cx.get(r);if(n)return n[t]}function pp(r,e,t){if(!e){const n={};return Object.keys(Cx).forEach(i=>{n[i]=B4(r,i)}),n}if("string"==typeof e)return void 0===t?B4(r,e):void function xye(r,e,t){const n=Hy(e),i=Cx.get(r);i?i[n]=t:Cx.set(r,{[n]:t})}(r,e,t);for(const n in e)pp(r,n,e[n])}class Ai{get[Symbol.toStringTag](){return Ai.toStringTag}get type(){return this.node.nodeName}get id(){return this.node.id}set id(e){this.node.id=e}constructor(e,t,n){if(!e)throw new TypeError("Invalid element to create vector");let i;if(Ai.isVector(e))i=e.node;else if("string"==typeof e)if("svg"===e.toLowerCase())i=Ex();else if("<"===e[0]){const o=Ex(e);i=document.importNode(o.firstChild,!0)}else i=document.createElementNS(Ps.svg,e);else i=e;this.node=i,t&&this.setAttributes(t),n&&this.append(n)}transform(e,t){return null==e?b0(this.node):(b0(this.node,e,t),this)}translate(e,t=0,n={}){return null==e?Y4(this.node):(Y4(this.node,e,t,n),this)}rotate(e,t,n,i={}){return null==e?GA(this.node):(GA(this.node,e,t,n,i),this)}scale(e,t){return null==e?UA(this.node):(UA(this.node,e,t),this)}getTransformToElement(e){const t=Ai.toNode(e);return Qy(this.node,t)}removeAttribute(e){return I4(this.node,e),this}getAttribute(e){return function fye(r,e){return r.getAttribute(e)}(this.node,e)}setAttribute(e,t){return kA(this.node,e,t),this}setAttributes(e){return O4(this.node,e),this}attr(e,t){return null==e?$o(this.node):"string"==typeof e&&void 0===t?$o(this.node,e):("object"==typeof e?$o(this.node,e):$o(this.node,e,t),this)}svg(){return this.node instanceof SVGSVGElement?this:Ai.create(this.node.ownerSVGElement)}defs(){const e=this.svg()||this,t=e.node.getElementsByTagName("defs")[0];return t?Ai.create(t):Ai.create("defs").appendTo(e)}text(e,t={}){return G4(this.node,e,t),this}tagName(){return function oye(r,e=!0){const t=r.nodeName;return e?t.toLowerCase():t.toUpperCase()}(this.node)}clone(){return Ai.create(this.node.cloneNode(!0))}remove(){return m0(this.node),this}empty(){return Wy(this.node),this}append(e){return $y(this.node,Ai.toNodes(e)),this}appendTo(e){return function lye(r,e){e?.appendChild(r)}(this.node,Ai.isVector(e)?e.node:e),this}prepend(e){return function uye(r,e){const t=r.firstChild;t?LA(t,e):$y(r,e)}(this.node,Ai.toNodes(e)),this}before(e){return LA(this.node,Ai.toNodes(e)),this}replace(e){return this.node.parentNode&&this.node.parentNode.replaceChild(Ai.toNode(e),this.node),Ai.create(e)}first(){return this.node.firstChild?Ai.create(this.node.firstChild):null}last(){return this.node.lastChild?Ai.create(this.node.lastChild):null}get(e){const t=this.node.childNodes[e];return t?Ai.create(t):null}indexOf(e){return Array.prototype.slice.call(this.node.childNodes).indexOf(Ai.toNode(e))}find(e){const t=[],n=function aye(r,e){return r.querySelectorAll(e)}(this.node,e);if(n)for(let i=0,o=n.length;i<o;i+=1)t.push(Ai.create(n[i]));return t}findOne(e){const t=function sye(r,e){return r.querySelector(e)}(this.node,e);return t?Ai.create(t):null}findParentByClass(e,t){const n=C4(this.node,e,t);return n?Ai.create(n):null}matches(e){const t=this.node,i=t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector||null;return i&&i.call(t,e)}contains(e){return A4(this.node,Ai.isVector(e)?e.node:e)}wrap(e){const t=Ai.create(e);return this.node.parentNode?.insertBefore(t.node,this.node),t.append(this)}parent(e){let t=this;if(null==t.node.parentNode)return null;if(t=Ai.create(t.node.parentNode),null==e)return t;do{if("string"==typeof e?t.matches(e):t instanceof e)return t}while(t=Ai.create(t.node.parentNode));return t}children(){const e=this.node.childNodes,t=[];for(let n=0;n<e.length;n+=1)1===e[n].nodeType&&t.push(Ai.create(e[n]));return t}eachChild(e,t){const n=this.children();for(let i=0,o=n.length;i<o;i+=1)e.call(n[i],n[i],i,n),t&&n[i].eachChild(e,t);return this}index(){return NA(this.node)}hasClass(e){return dp(this.node,e)}addClass(e){return Mo(this.node,e),this}removeClass(e){return Vl(this.node,e),this}toggleClass(e,t){return E4(this.node,e,t),this}toLocalPoint(e,t){return function Hye(r,e,t){const n=r instanceof SVGSVGElement?r:r.ownerSVGElement,i=n.createSVGPoint();i.x=e,i.y=t;try{const o=n.getScreenCTM(),a=i.matrixTransform(o.inverse()),s=Qy(r,n).inverse();return a.matrixTransform(s)}catch{return i}}(this.node,e,t)}sample(e=1){return this.node instanceof SVGPathElement?function Dye(r,e=1){const t=r.getTotalLength(),n=[];let o,i=0;for(;i<t;)o=r.getPointAtLength(i),n.push({distance:i,x:o.x,y:o.y}),i+=e;return n}(this.node,e):[]}toPath(){return Ai.create(function kye(r){const e=Uh("path");$o(e,$o(r));const t=W4(r);return t&&e.setAttribute("d",t),e}(this.node))}toPathData(){return W4(this.node)}}!function(r){function e(a){if(null==a)return!1;if(a instanceof r)return!0;const s=a[Symbol.toStringTag];return(null==s||s===r.toStringTag)&&a.node instanceof SVGElement&&"function"==typeof a.sample&&"function"==typeof a.toPath}function t(a,s,u){return new r(a,s,u)}function i(a){return e(a)?a.node:a}r.toStringTag=`X6.${r.name}`,r.isVector=e,r.create=t,r.createVectors=function n(a){if("<"===a[0]){const s=Ex(a),u=[];for(let l=0,c=s.childNodes.length;l<c;l+=1)u.push(t(document.importNode(s.childNodes[l],!0)));return u}return[t(a)]},r.toNode=i,r.toNodes=function o(a){return Array.isArray(a)?a.map(s=>i(s)):[i(a)]}}(Ai||(Ai={}));const j4=document.createElement("canvas").getContext("2d");function Mye(r,e,t){const n=t.eol,i=t.baseSize,o=t.lineHeight;let s,a=0;const u={},l=e.length-1;for(let c=0;c<=l;c+=1){let f=e[c],h=null;if("object"==typeof f){const d=f.attrs,g=Ai.create("tspan",d);s=g.node;let m=f.t;n&&c===l&&(m+=n),s.textContent=m;const _=d.class;_&&g.addClass(_),t.includeAnnotationIndices&&g.attr("annotations",f.annotations.join(",")),h=parseFloat(d["font-size"]),void 0===h&&(h=i),h&&h>a&&(a=h)}else n&&c===l&&(f+=n),s=document.createTextNode(f||" "),i&&i>a&&(a=i);r.appendChild(s)}return a&&(u.maxFontSize=a),o?u.lineHeight=o:a&&(u.lineHeight=1.2*a),u}const z4=/em$/;function Ax(r,e){const t=parseFloat(r);return z4.test(r)?t*e:t}function G4(r,e,t={}){e=function dye(r){return r.replace(/ /g,"\xa0")}(e);const n=t.eol;let i=t.textPath;const o=t.textVerticalAnchor,a="middle"===o||"bottom"===o||"top"===o;let s=t.x;void 0===s&&(s=r.getAttribute("x")||0);const u=t.includeAnnotationIndices;let l=t.annotations;l&&!Array.isArray(l)&&(l=[l]);const c=t.lineHeight,f="auto"===c,h=f?"1.5em":c||"1em";let d=!0;const g=r.children;1===g.length&&"TITLE"===g[0].tagName.toUpperCase()&&(d=!1),d&&Wy(r),$o(r,{"xml:space":"preserve",display:e||t.displayEmpty?null:"none"});const m=$o(r,"font-size");let D,_=parseFloat(m);_||(_=16,(a||l)&&!m&&$o(r,"font-size",`${_}`)),i?("string"==typeof i&&(i={d:i}),D=function Sye(r,e){const t=Ai.create(e),n=Ai.create("textPath"),i=r.d;if(i&&void 0===r["xlink:href"]){const o=Ai.create("path").attr("d",i).appendTo(t.defs());n.attr("xlink:href",`#${o.id}`)}return"object"==typeof r&&n.attr(r),n.node}(i,r)):D=document.createDocumentFragment();let L,Z,O=0;const le=e.split("\n"),pe=[],Ee=le.length-1;for(let Ve=0;Ve<=Ee;Ve+=1){L=h;let Ue="v-line";const at=Uh("tspan");let _t,vn=le[Ve];if(vn)if(l){_t=Mye(at,hye(vn,l,{offset:-O,includeAnnotationIndices:u}),{eol:Ve!==Ee&&n,baseSize:_,lineHeight:f?null:h,includeAnnotationIndices:u});const Tt=_t.lineHeight;Tt&&f&&0!==Ve&&(L=Tt),0===Ve&&(Z=.8*_t.maxFontSize)}else n&&Ve!==Ee&&(vn+=n),at.textContent=vn;else{at.textContent="-",Ue+=" v-empty-line";const Cn=at.style;Cn.fillOpacity=0,Cn.strokeOpacity=0,l&&(_t={})}_t&&pe.push(_t),Ve>0&&at.setAttribute("dy",L),(Ve>0||i)&&at.setAttribute("x",s),at.className.baseVal=Ue,D.appendChild(at),O+=vn.length+1}if(a)if(l)L=function Cye(r,e,t,n){if(!Array.isArray(e))return 0;const i=e.length;if(!i)return 0;let o=e[0];const a=Ax(o.maxFontSize,t)||t;let s=0;const u=Ax(n,t);for(let f=1;f<i;f+=1)o=e[f],s+=Ax(o.lineHeight,t)||u;const l=Ax(o.maxFontSize,t)||t;let c;switch(r){case"middle":c=a/2-.15*l-s/2;break;case"bottom":c=-.25*l-s;break;default:c=.8*a}return c}(o,pe,_,h);else if("top"===o)L="0.8em";else{let Ve;switch(Ee>0?(Ve=parseFloat(h)||1,Ve*=Ee,z4.test(h)||(Ve/=_)):Ve=0,o){case"middle":L=.3-Ve/2+"em";break;case"bottom":L=-Ve-.3+"em"}}else 0===o?L="0em":o?L=o:(L=0,null==r.getAttribute("y")&&r.setAttribute("y",`${Z||"0.8em"}`));D.firstChild.setAttribute("dy",L),r.appendChild(D)}function qy(r,e={}){if(!r)return{width:0};const t=[],n=e["font-size"]?`${parseFloat(e["font-size"])}px`:"14px";return t.push(e["font-style"]||"normal"),t.push(e["font-variant"]||"normal"),t.push(e["font-weight"]||400),t.push(n),t.push(e["font-family"]||"sans-serif"),j4.font=t.join(" "),j4.measureText(r)}function U4(r,e,t,n={}){if(e>=t)return[r,""];const i=r.length,o={};let a=Math.round(e/t*i-1);for(a<0&&(a=0);a>=0&&a<i;){const s=r.slice(0,a),u=o[s]||qy(s,n).width,l=r.slice(0,a+1),c=o[l]||qy(l,n).width;if(o[s]=u,o[l]=c,u>e)a-=1;else{if(!(c<=e))break;a+=1}}return[r.slice(0,a),r.slice(a)]}const jA=.551784;function Ws(r,e,t=NaN){const n=r.getAttribute(e);if(null==n)return t;const i=parseFloat(n);return Number.isNaN(i)?t:i}function V4(r){return`M ${r.map(t=>`${t.x} ${t.y}`).join(" L")}`}function Dx(r){const e=[],t=r.points;if(t)for(let n=0,i=t.numberOfItems;n<i;n+=1)e.push(t.getItem(n));return e}function H4(r){let e;const t=r.x,n=r.y,i=r.width,o=r.height,a=Math.min(r.rx||r["top-rx"]||0,i/2),s=Math.min(r.rx||r["bottom-rx"]||0,i/2),u=Math.min(r.ry||r["top-ry"]||0,o/2),l=Math.min(r.ry||r["bottom-ry"]||0,o/2);return e=a||s||u||l?["M",t,n+u,"v",o-u-l,"a",s,l,0,0,0,s,l,"h",i-2*s,"a",s,l,0,0,0,s,-l,"v",-(o-l-u),"a",a,u,0,0,0,-a,-u,"h",-(i-2*a),"a",a,u,0,0,0,-a,u,"Z"]:["M",t,n,"H",t+i,"V",n+o,"H",t,"V",n,"Z"],e.join(" ")}function W4(r){const e=r.tagName.toLowerCase();switch(e){case"path":return r.getAttribute("d");case"line":return function Tye(r){return["M",Ws(r,"x1"),Ws(r,"y1"),"L",Ws(r,"x2"),Ws(r,"y2")].join(" ")}(r);case"polygon":return function Iye(r){const e=Dx(r);return 0===e.length?null:`${V4(e)} Z`}(r);case"polyline":return function Oye(r){const e=Dx(r);return 0===e.length?null:V4(e)}(r);case"ellipse":return function Nye(r){const e=Ws(r,"cx",0),t=Ws(r,"cy",0),n=Ws(r,"rx"),i=Ws(r,"ry")||n,o=n*jA,a=i*jA;return["M",e,t-i,"C",e+o,t-i,e+n,t-a,e+n,t,"C",e+n,t+a,e+o,t+i,e,t+i,"C",e-o,t+i,e-n,t+a,e-n,t,"C",e-n,t-a,e-o,t-i,e,t-i,"Z"].join(" ")}(r);case"circle":return function Pye(r){const e=Ws(r,"cx",0),t=Ws(r,"cy",0),n=Ws(r,"r"),i=n*jA;return["M",e,t-n,"C",e+i,t-n,e+n,t-i,e+n,t,"C",e+n,t+i,e+i,t+n,e,t+n,"C",e-i,t+n,e-n,t+i,e-n,t,"C",e-n,t-i,e-i,t-n,e,t-n,"Z"].join(" ")}(r);case"rect":return function Lye(r){return H4({x:Ws(r,"x",0),y:Ws(r,"y",0),width:Ws(r,"width",0),height:Ws(r,"height",0),rx:Ws(r,"rx",0),ry:Ws(r,"ry",0)})}(r)}throw new Error(`"${e}" cannot be converted to svg path element.`)}const Tx=Uh("svg"),Rye=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,$4=/[ ,]+/,Fye=/^(\w+)\((.*)\)/;function Ns(r){const e=Tx.createSVGMatrix();if(null!=r){const t=r,n=e;for(const i in t)n[i]=t[i]}return e}function Ky(r){return null!=r?(r instanceof DOMMatrix||(r=Ns(r)),Tx.createSVGTransformFromMatrix(r)):Tx.createSVGTransform()}function Zy(r){let e=Ns();const t=null!=r&&r.match(Rye);if(!t)return e;for(let n=0,i=t.length;n<i;n+=1){const a=t[n].match(Fye);if(a){let s,u,l,c,f,h=Ns();const d=a[2].split($4);switch(a[1].toLowerCase()){case"scale":s=parseFloat(d[0]),u=void 0===d[1]?s:parseFloat(d[1]),h=h.scaleNonUniform(s,u);break;case"translate":l=parseFloat(d[0]),c=parseFloat(d[1]),h=h.translate(l,c);break;case"rotate":f=parseFloat(d[0]),l=parseFloat(d[1])||0,c=parseFloat(d[2])||0,h=0!==l||0!==c?h.translate(l,c).rotate(f).translate(-l,-c):h.rotate(f);break;case"skewx":f=parseFloat(d[0]),h=h.skewX(f);break;case"skewy":f=parseFloat(d[0]),h=h.skewY(f);break;case"matrix":h.a=parseFloat(d[0]),h.b=parseFloat(d[1]),h.c=parseFloat(d[2]),h.d=parseFloat(d[3]),h.e=parseFloat(d[4]),h.f=parseFloat(d[5]);break;default:continue}e=e.multiply(h)}}return e}function y0(r){const e=r||{};return`matrix(${null!=e.a?e.a:1},${null!=e.b?e.b:0},${null!=e.c?e.c:0},${null!=e.d?e.d:1},${null!=e.e?e.e:0},${null!=e.f?e.f:0})`}function Ix(r){let e,t,n;if(r){const o=$4;if(r.trim().indexOf("matrix")>=0){const s=function jye(r){const e=zA(r,{x:0,y:1}),t=zA(r,{x:1,y:0}),n=180/Math.PI*Math.atan2(e.y,e.x)-90;return{skewX:n,skewY:180/Math.PI*Math.atan2(t.y,t.x),translateX:r.e,translateY:r.f,scaleX:Math.sqrt(r.a*r.a+r.b*r.b),scaleY:Math.sqrt(r.c*r.c+r.d*r.d),rotation:n}}(Zy(r));e=[s.translateX,s.translateY],t=[s.rotation],n=[s.scaleX,s.scaleY];const u=[];(0!==e[0]||0!==e[1])&&u.push(`translate(${e.join(",")})`),(1!==n[0]||1!==n[1])&&u.push(`scale(${n.join(",")})`),0!==t[0]&&u.push(`rotate(${t[0]})`),r=u.join(" ")}else{const a=r.match(/translate\((.*?)\)/);a&&(e=a[1].split(o));const s=r.match(/rotate\((.*?)\)/);s&&(t=s[1].split(o));const u=r.match(/scale\((.*?)\)/);u&&(n=u[1].split(o))}}const i=n&&n[0]?parseFloat(n[0]):1;return{raw:r||"",translation:{tx:e&&e[0]?parseInt(e[0],10):0,ty:e&&e[1]?parseInt(e[1],10):0},rotation:{angle:t&&t[0]?parseInt(t[0],10):0,cx:t&&t[1]?parseInt(t[1],10):void 0,cy:t&&t[2]?parseInt(t[2],10):void 0},scale:{sx:i,sy:n&&n[1]?parseFloat(n[1]):i}}}function zA(r,e){return{x:e.x*r.a+e.y*r.c+0,y:e.x*r.b+e.y*r.d+0}}function b0(r,e,t={}){if(null==e)return Zy($o(r,"transform"));if(t.absolute)return void r.setAttribute("transform",y0(e));const n=r.transform,i=Ky(e);n.baseVal.appendItem(i)}function Y4(r,e,t=0,n={}){let i=$o(r,"transform");const o=Ix(i);if(null==e)return o.translation;i=o.raw,i=i.replace(/translate\([^)]*\)/g,"").trim(),r.setAttribute("transform",`translate(${n.absolute?e:o.translation.tx+e},${n.absolute?t:o.translation.ty+t}) ${i}`.trim())}function GA(r,e,t,n,i={}){let o=$o(r,"transform");const a=Ix(o);if(null==e)return a.rotation;o=a.raw,o=o.replace(/rotate\([^)]*\)/g,"").trim(),e%=360,r.setAttribute("transform",`${o} rotate(${i.absolute?e:a.rotation.angle+e}${null!=t&&null!=n?`,${t},${n}`:""})`.trim())}function UA(r,e,t){let n=$o(r,"transform");const i=Ix(n);if(null==e)return i.scale;t=t??e,n=i.raw,n=n.replace(/scale\([^)]*\)/g,"").trim(),r.setAttribute("transform",`${n} scale(${e},${t})`.trim())}function Qy(r,e){if(Hd(e)&&Hd(r)){const t=e.getScreenCTM(),n=r.getScreenCTM();if(t&&n)return t.inverse().multiply(n)}return Ns()}var Hl,vp,Bi,w0,Jy,_u,eb;!function(r){const e={};r.get=function t(o){return e[o]||{}},r.register=function n(o,a){e[o]=a},r.unregister=function i(o){delete e[o]}}(Hl||(Hl={})),function(r){const e=new WeakMap;r.ensure=function t(o){return e.has(o)||e.set(o,{events:Object.create(null)}),e.get(o)},r.get=function n(o){return e.get(o)},r.remove=function i(o){return e.delete(o)}}(vp||(vp={})),function(r){r.returnTrue=()=>!0,r.returnFalse=()=>!1,r.stopPropagationCallback=function e(i){i.stopPropagation()},r.addEventListener=function t(i,o,a){null!=i.addEventListener&&i.addEventListener(o,a)},r.removeEventListener=function n(i,o,a){null!=i.removeEventListener&&i.removeEventListener(o,a)}}(Bi||(Bi={})),function(r){const e=/[^\x20\t\r\n\f]+/g,t=/^([^.]*)(?:\.(.+)|)/;r.splitType=function n(s){return(s||"").match(e)||[""]},r.normalizeType=function i(s){const u=t.exec(s)||[];return{originType:u[1]?u[1].trim():u[1],namespaces:u[2]?u[2].split(".").map(l=>l.trim()).sort():[]}},r.isValidTarget=function o(s){return 1===s.nodeType||9===s.nodeType||!+s.nodeType},r.isValidSelector=function a(s,u){if(u){const l=s;return null!=l.querySelector&&null!=l.querySelector(u)}return!0}}(Bi||(Bi={})),function(r){let e=0;const t=new WeakMap;r.ensureHandlerId=function n(s){return t.has(s)||(t.set(s,e),e+=1),t.get(s)},r.getHandlerId=function i(s){return t.get(s)},r.removeHandlerId=function o(s){return t.delete(s)},r.setHandlerId=function a(s,u){return t.set(s,u)}}(Bi||(Bi={})),function(r){r.getHandlerQueue=function e(t,n){const i=[],o=vp.get(t),a=o&&o.events&&o.events[n.type],s=a&&a.handlers||[],u=a?a.delegateCount:0;if(u>0&&!("click"===n.type&&"number"==typeof n.button&&n.button>=1))for(let l=n.target;l!==t;l=l.parentNode||t)if(1===l.nodeType&&("click"!==n.type||!0!==l.disabled)){const c=[],f={};for(let h=0;h<u;h+=1){const d=s[h],g=d.selector;if(null!=g&&null==f[g]){const _=[];t.querySelectorAll(g).forEach(D=>{_.push(D)}),f[g]=_.includes(l)}f[g]&&c.push(d)}c.length&&i.push({elem:l,handlers:c})}return u<s.length&&i.push({elem:t,handlers:s.slice(u)}),i}}(Bi||(Bi={})),function(r){r.isWindow=function e(t){return null!=t&&t===t.window}}(Bi||(Bi={})),function(r){r.contains=function e(t,n){const i=9===t.nodeType?t.documentElement:t,o=n&&n.parentNode;return t===o||!(!o||1!==o.nodeType||!(i.contains?i.contains(o):t.compareDocumentPosition&&16&t.compareDocumentPosition(o)))}}(Bi||(Bi={}));class Hf{constructor(e,t){this.isDefaultPrevented=Bi.returnFalse,this.isPropagationStopped=Bi.returnFalse,this.isImmediatePropagationStopped=Bi.returnFalse,this.isSimulated=!1,"string"==typeof e?this.type=e:e.type&&(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?Bi.returnTrue:Bi.returnFalse,this.target=e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget,this.timeStamp=e.timeStamp),t&&Object.assign(this,t),this.timeStamp||(this.timeStamp=Date.now())}preventDefault(){const e=this.originalEvent;this.isDefaultPrevented=Bi.returnTrue,e&&!this.isSimulated&&e.preventDefault()}stopPropagation(){const e=this.originalEvent;this.isPropagationStopped=Bi.returnTrue,e&&!this.isSimulated&&e.stopPropagation()}stopImmediatePropagation(){const e=this.originalEvent;this.isImmediatePropagationStopped=Bi.returnTrue,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}}(function(r){r.create=function e(t){return t instanceof r?t:new r(t)}})(Hf||(Hf={})),function(r){r.addProperty=function e(t,n){Object.defineProperty(r.prototype,t,{enumerable:!0,configurable:!0,get:"function"==typeof n?function(){if(this.originalEvent)return n(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set(i){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:i})}})}}(Hf||(Hf={})),function(r){const e={bubbles:!0,cancelable:!0,eventPhase:!0,detail:!0,view:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pageX:!0,pageY:!0,screenX:!0,screenY:!0,toElement:!0,pointerId:!0,pointerType:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,touches:!0,changedTouches:!0,targetTouches:!0,which:!0,altKey:!0,ctrlKey:!0,metaKey:!0,shiftKey:!0};Object.keys(e).forEach(t=>r.addProperty(t,e[t]))}(Hf||(Hf={})),w0||(w0={}),Hl.register("load",{noBubble:!0}),w0||(w0={}),Hl.register("beforeunload",{postDispatch(e,t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}),w0||(w0={}),Hl.register("mouseenter",{delegateType:"mouseover",bindType:"mouseover",handle(e,t){let n;const i=t.relatedTarget,o=t.handleObj;return(!i||i!==e&&!Bi.contains(e,i))&&(t.type=o.originType,n=o.handler.call(e,t),t.type="mouseover"),n}}),Hl.register("mouseleave",{delegateType:"mouseout",bindType:"mouseout",handle(e,t){let n;const i=t.relatedTarget,o=t.handleObj;return(!i||i!==e&&!Bi.contains(e,i))&&(t.type=o.originType,n=o.handler.call(e,t),t.type="mouseout"),n}}),function(r){let e;function i(a,s,...u){const l=Hf.create(s);l.delegateTarget=a;const c=Hl.get(l.type);if(c.preDispatch&&!1===c.preDispatch(a,l))return;const f=Bi.getHandlerQueue(a,l);for(let h=0,d=f.length;h<d&&!l.isPropagationStopped();h+=1){const g=f[h];l.currentTarget=g.elem;for(let m=0,_=g.handlers.length;m<_&&!l.isImmediatePropagationStopped();m+=1){const D=g.handlers[m];if(null==l.rnamespace||D.namespace&&l.rnamespace.test(D.namespace)){l.handleObj=D,l.data=D.data;const L=Hl.get(D.originType).handle,O=L?L(g.elem,l,...u):D.handler.call(g.elem,l,...u);void 0!==O&&(l.result=O,!1===O&&(l.preventDefault(),l.stopPropagation()))}}}return c.postDispatch&&c.postDispatch(a,l),l.result}r.on=function t(a,s,u,l,c){if(!Bi.isValidTarget(a))return;let f;if("function"!=typeof u){const{handler:m,selector:_}=u,D=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(u,["handler","selector"]);u=m,c=_,f=D}const h=vp.ensure(a);let d=h.handler;null==d&&(d=h.handler=function(m,..._){return e!==m.type?i(a,m,..._):void 0});const g=Bi.ensureHandlerId(u);Bi.splitType(s).forEach(m=>{const{originType:_,namespaces:D}=Bi.normalizeType(m);if(!_)return;let L=_,O=Hl.get(L);L=(c?O.delegateType:O.bindType)||L,O=Hl.get(L);const Z=Object.assign({type:L,originType:_,data:l,selector:c,guid:g,handler:u,namespace:D.join(".")},f),le=h.events;let pe=le[L];pe||(pe=le[L]={handlers:[],delegateCount:0},(!O.setup||!1===O.setup(a,l,D,d))&&Bi.addEventListener(a,L,d)),O.add&&(Bi.removeHandlerId(Z.handler),O.add(a,Z),Bi.setHandlerId(Z.handler,g)),c?(pe.handlers.splice(pe.delegateCount,0,Z),pe.delegateCount+=1):pe.handlers.push(Z)})},r.off=function n(a,s,u,l,c){const f=vp.get(a);if(!f)return;const h=f.events;!h||(Bi.splitType(s).forEach(d=>{const{originType:g,namespaces:m}=Bi.normalizeType(d);if(!g)return void Object.keys(h).forEach(le=>{n(a,le+d,u,l,!0)});let _=g;const D=Hl.get(_);_=(l?D.delegateType:D.bindType)||_;const L=h[_]||{},O=m.length>0?new RegExp(`(^|\\.)${m.join("\\.(?:.*\\.|)")}(\\.|$)`):null,Z=L.handlers.length;for(let le=L.handlers.length-1;le>=0;le-=1){const pe=L.handlers[le];(c||g===pe.originType)&&(!u||Bi.getHandlerId(u)===pe.guid)&&(null==O||pe.namespace&&O.test(pe.namespace))&&(null==l||l===pe.selector||"**"===l&&pe.selector)&&(L.handlers.splice(le,1),pe.selector&&(L.delegateCount-=1),D.remove&&D.remove(a,pe))}Z&&0===L.handlers.length&&((!D.teardown||!1===D.teardown(a,m,f.handler))&&Bi.removeEventListener(a,_,f.handler),delete h[_])}),0===Object.keys(h).length&&vp.remove(a))},r.dispatch=i,r.trigger=function o(a,s,u,l){let c=a,f="string"==typeof a?a:a.type,h="string"==typeof a||null==c.namespace?[]:c.namespace.split(".");const d=u;if(3===d.nodeType||8===d.nodeType)return;f.indexOf(".")>-1&&(h=f.split("."),f=h.shift(),h.sort());const g=f.indexOf(":")<0&&`on${f}`;c=a instanceof Hf?a:new Hf(f,"object"==typeof a?a:null),c.namespace=h.join("."),c.rnamespace=c.namespace?new RegExp(`(^|\\.)${h.join("\\.(?:.*\\.|)")}(\\.|$)`):null,c.result=void 0,c.target||(c.target=d);const m=[c];Array.isArray(s)?m.push(...s):m.push(s);const _=Hl.get(f);if(!l&&_.trigger&&!1===_.trigger(d,c,s))return;let D;const L=[d];if(!l&&!_.noBubble&&!Bi.isWindow(d)){D=_.delegateType||f;let Z=d,le=d.parentNode;for(;null!=le;)L.push(le),Z=le,le=le.parentNode;if(Z===(d.ownerDocument||document)){const Ee=Z.defaultView||Z.parentWindow||window;L.push(Ee)}}let O=d;for(let Z=0,le=L.length;Z<le&&!c.isPropagationStopped();Z+=1){const pe=L[Z];O=pe,c.type=Z>1?D:_.bindType||f;const Ee=vp.get(pe);Ee&&Ee.events[c.type]&&Ee.handler&&Ee.handler.call(pe,...m);const Re=g&&pe[g]||null;Re&&Bi.isValidTarget(pe)&&(c.result=Re.call(pe,...m),!1===c.result&&c.preventDefault())}if(c.type=f,!l&&!c.isDefaultPrevented()){const Z=_.preventDefault;if((null==Z||!1===Z(L.pop(),c,s))&&Bi.isValidTarget(d)&&g&&"function"==typeof d[f]&&!Bi.isWindow(d)){const le=d[g];le&&(d[g]=null),e=f,c.isPropagationStopped()&&O.addEventListener(f,Bi.stopPropagationCallback),d[f](),c.isPropagationStopped()&&O.removeEventListener(f,Bi.stopPropagationCallback),e=void 0,le&&(d[g]=le)}}return c.result}}(Jy||(Jy={})),function(r){r.on=function e(o,a,s,u,l){return eb.on(o,a,s,u,l),o},r.once=function t(o,a,s,u,l){return eb.on(o,a,s,u,l,!0),o},r.off=function n(o,a,s,u){return eb.off(o,a,s,u),o},r.trigger=function i(o,a,s,u){return Jy.trigger(a,s,o,u),o}}(_u||(_u={})),function(r){r.on=function e(n,i,o,a,s,u){if("object"==typeof i)return"string"!=typeof o&&(a=a||o,o=void 0),void Object.keys(i).forEach(l=>e(n,l,o,a,i[l],u));if(null==a&&null==s?(s=o,a=o=void 0):null==s&&("string"==typeof o?(s=a,a=void 0):(s=a,a=o,o=void 0)),!1===s)s=Bi.returnFalse;else if(!s)return;if(u){const l=s;Bi.setHandlerId(s=function(c,...f){return r.off(n,c),l.call(this,c,...f)},Bi.ensureHandlerId(l))}Jy.on(n,i,s,a,o)},r.off=function t(n,i,o,a){if(i&&null!=i.preventDefault&&null!=i.handleObj){const u=i.handleObj;t(i.delegateTarget,u.namespace?`${u.originType}.${u.namespace}`:u.originType,u.selector,u.handler)}else if("object"!=typeof i)(!1===o||"function"==typeof o)&&(a=o,o=void 0),!1===a&&(a=Bi.returnFalse),Jy.off(n,i,a,o);else{const u=i;Object.keys(u).forEach(l=>t(n,l,o,u[l]))}}}(eb||(eb={}));class X4{constructor(e,t,n){this.animationFrameId=0,this.deltaX=0,this.deltaY=0,this.eventName=Vd.isEventSupported("wheel")?"wheel":"mousewheel",this.target=e,this.onWheelCallback=t,this.onWheelGuard=n,this.onWheel=this.onWheel.bind(this),this.didWheel=this.didWheel.bind(this)}enable(){this.target.addEventListener(this.eventName,this.onWheel,{passive:!1})}disable(){this.target.removeEventListener(this.eventName,this.onWheel)}onWheel(e){if(null!=this.onWheelGuard&&!this.onWheelGuard(e))return;let t;this.deltaX+=e.deltaX,this.deltaY+=e.deltaY,e.preventDefault(),(0!==this.deltaX||0!==this.deltaY)&&(e.stopPropagation(),t=!0),!0===t&&0===this.animationFrameId&&(this.animationFrameId=requestAnimationFrame(()=>{this.didWheel(e)}))}didWheel(e){this.animationFrameId=0,this.onWheelCallback(e,this.deltaX,this.deltaY),this.deltaX=0,this.deltaY=0}}function K4(r,e=60){let t=null;return(...n)=>{t&&clearTimeout(t),t=window.setTimeout(()=>{r.apply(this,n)},e)}}const Xye=typeof ResizeObserver<"u"?function Yye(r){let e=null,t=[];const n=K4(()=>{t.forEach(u=>{u(r)})}),a=()=>{e&&(e.disconnect(),t=[],e=null)};return{element:r,bind:u=>{e||(e=(()=>{const u=new ResizeObserver(n);return u.observe(r),n(),u})()),-1===t.indexOf(u)&&t.push(u)},destroy:a,unbind:u=>{const l=t.indexOf(u);-1!==l&&t.splice(l,1),0===t.length&&e&&a()}}}:function $ye(r){let e=null,t=[];const i=K4(()=>{t.forEach(u=>u(r))}),a=()=>{e&&e.parentNode&&(e.contentDocument&&e.contentDocument.defaultView.removeEventListener("resize",i),e.parentNode.removeChild(e),e=null,t=[])};return{element:r,bind:u=>{e||(e=(()=>{"static"===getComputedStyle(r).position&&(r.style.position="relative");const u=document.createElement("object");return u.onload=()=>{u.contentDocument.defaultView.addEventListener("resize",i),i()},u.style.display="block",u.style.position="absolute",u.style.top="0",u.style.left="0",u.style.height="100%",u.style.width="100%",u.style.overflow="hidden",u.style.pointerEvents="none",u.style.zIndex="-1",u.style.opacity="0",u.setAttribute("tabindex","-1"),u.type="text/html",r.appendChild(u),u.data="about:blank",u})()),-1===t.indexOf(u)&&t.push(u)},destroy:a,unbind:u=>{const l=t.indexOf(u);-1!==l&&t.splice(l,1),0===t.length&&e&&a()}}};var Ox,VA,nb;!function(r){const e=new WeakMap;function t(i){let o=e.get(i);return o||(o=Xye(i),e.set(i,o),o)}r.bind=(i,o)=>{const a=t(i);return a.bind(o),()=>a.unbind(o)},r.clear=i=>{!function n(i){i.destroy(),e.delete(i.element)}(t(i))}}(Ox||(Ox={}));class tb{constructor(e={}){this.comparator=e.comparator||tb.defaultComparator,this.index={},this.data=e.data||[],this.heapify()}isEmpty(){return 0===this.data.length}insert(e,t,n){const i={priority:e,value:t},o=this.data.length;return n&&(i.id=n,this.index[n]=o),this.data.push(i),this.bubbleUp(o),this}peek(){return this.data[0]?this.data[0].value:null}peekPriority(){return this.data[0]?this.data[0].priority:null}updatePriority(e,t){const n=this.index[e];if(typeof n>"u")throw new Error(`Node with id '${e}' was not found in the heap.`);const i=this.data,a=this.comparator(t,i[n].priority);a<0?(i[n].priority=t,this.bubbleUp(n)):a>0&&(i[n].priority=t,this.bubbleDown(n))}remove(){const e=this.data,t=e[0],n=e.pop();return t.id&&delete this.index[t.id],e.length>0&&(e[0]=n,n.id&&(this.index[n.id]=0),this.bubbleDown(0)),t?t.value:null}heapify(){for(let e=0;e<this.data.length;e+=1)this.bubbleUp(e)}bubbleUp(e){const t=this.data;let n,i,o=e;for(;o>0&&(i=o-1>>>1,this.comparator(t[o].priority,t[i].priority)<0);){n=t[i],t[i]=t[o];let a=t[o].id;null!=a&&(this.index[a]=i),t[o]=n,a=t[o].id,null!=a&&(this.index[a]=o),o=i}}bubbleDown(e){const t=this.data,n=t.length-1;let i=e;for(;;){const o=1+(i<<1),a=o+1;let s=i;if(o<=n&&this.comparator(t[o].priority,t[s].priority)<0&&(s=o),a<=n&&this.comparator(t[a].priority,t[s].priority)<0&&(s=a),s===i)break;{const u=t[s];t[s]=t[i];let l=t[i].id;null!=l&&(this.index[l]=s),t[i]=u,l=t[i].id,null!=l&&(this.index[l]=i),i=s}}}}!function(r){r.defaultComparator=(e,t)=>e-t}(tb||(tb={})),function(r){r.run=function e(t,n,i=((o,a)=>1)){const o={},a={},s={},u=new tb;for(o[n]=0,Object.keys(t).forEach(l=>{l!==n&&(o[l]=1/0),u.insert(o[l],l,l)});!u.isEmpty();){const l=u.remove();s[l]=!0;const c=t[l]||[];for(let f=0;f<c.length;f+=1){const h=c[f];if(!s[h]){const d=o[l]+i(l,h);d<o[h]&&(o[h]=d,a[h]=l,u.updatePriority(h,d))}}}return a}}(VA||(VA={}));class Vh{constructor(e,t,n,i){return null==e?this.set(255,255,255,1):"number"==typeof e?this.set(e,t,n,i):"string"==typeof e?Vh.fromString(e)||this:Array.isArray(e)?this.set(e):void this.set(e.r,e.g,e.b,e.a??1)}blend(e,t,n){this.set(e.r+(t.r-e.r)*n,e.g+(t.g-e.g)*n,e.b+(t.b-e.b)*n,e.a+(t.a-e.a)*n)}lighten(e){const t=Vh.lighten(this.toArray(),e);this.r=t[0],this.g=t[1],this.b=t[2],this.a=t[3]}darken(e){this.lighten(-e)}set(e,t,n,i){const o=Array.isArray(e)?e[0]:e,a=Array.isArray(e)?e[1]:t,s=Array.isArray(e)?e[2]:n,u=Array.isArray(e)?e[3]:i;return this.r=Math.round(Ul(o,0,255)),this.g=Math.round(Ul(a,0,255)),this.b=Math.round(Ul(s,0,255)),this.a=null==u?1:Ul(u,0,1),this}toHex(){return`#${["r","g","b"].map(t=>{const n=this[t].toString(16);return n.length<2?`0${n}`:n}).join("")}`}toRGBA(){return this.toArray()}toHSLA(){return Vh.rgba2hsla(this.r,this.g,this.b,this.a)}toCSS(e){const t=`${this.r},${this.g},${this.b},`;return e?`rgb(${t})`:`rgba(${t},${this.a})`}toGrey(){return Vh.makeGrey(Math.round((this.r+this.g+this.b)/3),this.a)}toArray(){return[this.r,this.g,this.b,this.a]}toString(){return this.toCSS()}}(function(r){function t(O){return new r([...g(O),1])}function n(O){const Z=O.toLowerCase().match(/^rgba?\(([\s.,0-9]+)\)/);if(Z){const le=Z[1].split(/\s*,\s*/).map(pe=>parseInt(pe,10));return new r(le)}return null}function i(O,Z,le){le<0&&++le,le>1&&--le;const pe=6*le;return pe<1?O+(Z-O)*pe:2*le<1?Z:3*le<2?O+(Z-O)*(2/3-le)*6:O}function o(O){const Z=O.toLowerCase().match(/^hsla?\(([\s.,0-9]+)\)/);if(Z){const le=Z[2].split(/\s*,\s*/),pe=(parseFloat(le[0])%360+360)%360/360,Ee=parseFloat(le[1])/100,Re=parseFloat(le[2])/100,Ve=null==le[3]?1:parseInt(le[3],10);return new r(l(pe,Ee,Re,Ve))}return null}function l(O,Z,le,pe){const Ee=Array.isArray(O)?O[0]:O,Re=Array.isArray(O)?O[1]:Z,Ve=Array.isArray(O)?O[2]:le,Ue=Array.isArray(O)?O[3]:pe,at=Ve<=.5?Ve*(Re+1):Ve+Re-Ve*Re,_t=2*Ve-at;return[256*i(_t,at,Ee+1/3),256*i(_t,at,Ee),256*i(_t,at,Ee-1/3),Ue??1]}function c(O){return new r(Math.round(256*Math.random()),Math.round(256*Math.random()),Math.round(256*Math.random()),O?void 0:parseFloat(Math.random().toFixed(2)))}function g(O){const Z=0===O.indexOf("#")?O:`#${O}`;let le=Number(`0x${Z.substr(1)}`);if(4!==Z.length&&7!==Z.length||Number.isNaN(le))throw new Error("Invalid hex color.");const pe=4===Z.length?4:8,Ee=(1<<pe)-1,Re=["b","g","r"].map(()=>{const Ve=le&Ee;return le>>=pe,4===pe?17*Ve:Ve});return[Re[2],Re[1],Re[0]]}function m(O,Z,le){const pe=Ee=>Ee.length<2?`0${Ee}`:Ee;return`${pe(O.toString(16))}${pe(Z.toString(16))}${pe(le.toString(16))}`}function L(O,Z){if("string"==typeof O){const Ee="#"===O[0],Re=parseInt(Ee?O.substr(1):O,16),Ve=Ul((Re>>16)+Z,0,255),Ue=Ul((Re>>8&255)+Z,0,255);return`${Ee?"#":""}${(Ul((255&Re)+Z,0,255)|Ue<<8|Ve<<16).toString(16)}`}const pe=g(L(m(O[0],O[1],O[2]),Z));return[pe[0],pe[1],pe[2],O[3]]}r.fromArray=function e(O){return new r(O)},r.fromHex=t,r.fromRGBA=n,r.fromHSLA=o,r.fromString=function a(O){if(O.startsWith("#"))return t(O);if(O.startsWith("rgb"))return n(O);const Z=r.named[O];return Z?t(Z):o(O)},r.makeGrey=function s(O,Z){return r.fromArray([O,O,O,Z])},r.rgba2hsla=function u(O,Z,le,pe){const Ee=Array.isArray(O)?O[0]:O,Re=Array.isArray(O)?O[1]:Z,Ve=Array.isArray(O)?O[2]:le,Ue=Array.isArray(O)?O[3]:pe,at=Math.max(Ee,Re,Ve),_t=Math.min(Ee,Re,Ve),vn=(at+_t)/2;let Cn=0,Tt=0;if(_t!==at){const kt=at-_t;switch(Tt=vn>.5?kt/(2-at-_t):kt/(at+_t),at){case Ee:Cn=(Re-Ve)/kt+(Re<Ve?6:0);break;case Re:Cn=(Ve-Ee)/kt+2;break;case Ve:Cn=(Ee-Re)/kt+4}Cn/=6}return[Cn,Tt,vn,Ue??1]},r.hsla2rgba=l,r.random=c,r.randomHex=function f(){let Z="#";for(let le=0;le<6;le+=1)Z+="0123456789ABCDEF"[Math.floor(16*Math.random())];return Z},r.randomRGBA=function h(O){return c(O).toString()},r.invert=function d(O,Z){if("string"==typeof O){const Ve="#"===O[0],[Ue,at,_t]=g(O);return Z?.299*Ue+.587*at+.114*_t>186?"#000000":"#ffffff":`${Ve?"#":""}${m(255-Ue,255-at,255-_t)}`}const le=O[0],pe=O[1],Ee=O[2],Re=O[3];return Z?.299*le+.587*pe+.114*Ee>186?[0,0,0,Re]:[255,255,255,Re]:[255-le,255-pe,255-Ee,Re]},r.lighten=function _(O,Z){return L(O,Z)},r.darken=function D(O,Z){return L(O,-Z)}})(Vh||(Vh={})),function(r){r.named={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",burntsienna:"#ea7e5d",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}(Vh||(Vh={}));class HA{constructor(){this.clear()}clear(){this.map=new WeakMap,this.arr=[]}has(e){return this.map.has(e)}get(e){return this.map.get(e)}set(e,t){this.map.set(e,t),this.arr.push(e)}delete(e){const t=this.arr.indexOf(e);t>=0&&this.arr.splice(t,1);const n=this.map.get(e);return this.map.delete(e),n}each(e){this.arr.forEach(t=>{const n=this.map.get(t);e(n,t)})}dispose(){this.clear()}}!function(r){function e(i){const o=[],a=[];return Array.isArray(i)?o.push(...i):i.split("|").forEach(s=>{-1===s.indexOf("&")?o.push(s):a.push(...s.split("&"))}),{or:o,and:a}}r.parse=e,r.equals=function t(i,o){if(null!=i&&null!=o){const a=e(i),s=e(o),u=a.or.sort(),l=s.or.sort(),c=a.and.sort(),f=s.and.sort(),h=(d,g)=>d.length===g.length&&(0===d.length||d.every((m,_)=>m===g[_]));return h(u,l)&&h(c,f)}return null==i&&null==o},r.isMatch=function n(i,o,a){if(null==o||Array.isArray(o)&&0===o.length)return!a||!0!==i.altKey&&!0!==i.ctrlKey&&!0!==i.metaKey&&!0!==i.shiftKey;const{or:s,and:u}=e(o),l=c=>{const f=`${c.toLowerCase()}Key`;return!0===i[f]};return s.some(c=>l(c))&&u.every(c=>l(c))}}(nb||(nb={}));var Wd=(()=>(function(r){r.linear=e=>e,r.quad=e=>e*e,r.cubic=e=>e*e*e,r.inout=e=>{if(e<=0)return 0;if(e>=1)return 1;const t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)},r.exponential=e=>Math.pow(2,10*(e-1)),r.bounce=e=>{for(let t=0,n=1;;t+=n,n/=2)if(e>=(7-4*t)/11){const i=(11-6*t-11*e)/4;return-i*i+n*n}}}(Wd||(Wd={})),Wd))();(function(r){r.decorators={reverse:e=>t=>1-e(1-t),reflect:e=>t=>.5*(t<.5?e(2*t):2-e(2-2*t)),clamp:(e,t=0,n=1)=>i=>{const o=e(i);return o<t?t:o>n?n:o},back:(e=1.70158)=>t=>t*t*((e+1)*t-e),elastic:(e=1.5)=>t=>Math.pow(2,10*(t-1))*Math.cos(20*Math.PI*e/3*t)}})(Wd||(Wd={})),function(r){function _t(Tt){const kt=Tt/1;if(kt<1/2.75)return 7.5625*kt*kt;if(kt<2/2.75){const Ln=kt-.5454545454545454;return 7.5625*Ln*Ln+.75}if(kt<2.5/2.75){const Ln=kt-.8181818181818182;return 7.5625*Ln*Ln+.9375}{const Ln=kt-.9545454545454546;return 7.5625*Ln*Ln+.984375}}function vn(Tt){return 1-_t(1-Tt)}r.easeInSine=function e(Tt){return-1*Math.cos(Tt*(Math.PI/2))+1},r.easeOutSine=function t(Tt){return Math.sin(Tt*(Math.PI/2))},r.easeInOutSine=function n(Tt){return-.5*(Math.cos(Math.PI*Tt)-1)},r.easeInQuad=function i(Tt){return Tt*Tt},r.easeOutQuad=function o(Tt){return Tt*(2-Tt)},r.easeInOutQuad=function a(Tt){return Tt<.5?2*Tt*Tt:(4-2*Tt)*Tt-1},r.easeInCubic=function s(Tt){return Tt*Tt*Tt},r.easeOutCubic=function u(Tt){const kt=Tt-1;return kt*kt*kt+1},r.easeInOutCubic=function l(Tt){return Tt<.5?4*Tt*Tt*Tt:(Tt-1)*(2*Tt-2)*(2*Tt-2)+1},r.easeInQuart=function c(Tt){return Tt*Tt*Tt*Tt},r.easeOutQuart=function f(Tt){const kt=Tt-1;return 1-kt*kt*kt*kt},r.easeInOutQuart=function h(Tt){const kt=Tt-1;return Tt<.5?8*Tt*Tt*Tt*Tt:1-8*kt*kt*kt*kt},r.easeInQuint=function d(Tt){return Tt*Tt*Tt*Tt*Tt},r.easeOutQuint=function g(Tt){const kt=Tt-1;return 1+kt*kt*kt*kt*kt},r.easeInOutQuint=function m(Tt){const kt=Tt-1;return Tt<.5?16*Tt*Tt*Tt*Tt*Tt:1+16*kt*kt*kt*kt*kt},r.easeInExpo=function _(Tt){return 0===Tt?0:Math.pow(2,10*(Tt-1))},r.easeOutExpo=function D(Tt){return 1===Tt?1:1-Math.pow(2,-10*Tt)},r.easeInOutExpo=function L(Tt){if(0===Tt||1===Tt)return Tt;const kt=2*Tt,Ln=kt-1;return kt<1?.5*Math.pow(2,10*Ln):.5*(2-Math.pow(2,-10*Ln))},r.easeInCirc=function O(Tt){return-1*(Math.sqrt(1-Tt/1*Tt)-1)},r.easeOutCirc=function Z(Tt){const kt=Tt-1;return Math.sqrt(1-kt*kt)},r.easeInOutCirc=function le(Tt){const kt=2*Tt,Ln=kt-2;return kt<1?-.5*(Math.sqrt(1-kt*kt)-1):.5*(Math.sqrt(1-Ln*Ln)+1)},r.easeInBack=function pe(Tt,kt=1.70158){return Tt*Tt*((kt+1)*Tt-kt)},r.easeOutBack=function Ee(Tt,kt=1.70158){const Ln=Tt/1-1;return Ln*Ln*((kt+1)*Ln+kt)+1},r.easeInOutBack=function Re(Tt,kt=1.70158){const Ln=2*Tt,Kn=Ln-2,mn=1.525*kt;return Ln<1?.5*Ln*Ln*((mn+1)*Ln-mn):.5*(Kn*Kn*((mn+1)*Kn+mn)+2)},r.easeInElastic=function Ve(Tt,kt=.7){if(0===Tt||1===Tt)return Tt;const Kn=Tt/1-1,mn=1-kt,On=mn/(2*Math.PI)*Math.asin(1);return-Math.pow(2,10*Kn)*Math.sin((Kn-On)*(2*Math.PI)/mn)},r.easeOutElastic=function Ue(Tt,kt=.7){const Ln=1-kt,Kn=2*Tt;if(0===Tt||1===Tt)return Tt;const mn=Ln/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*Kn)*Math.sin((Kn-mn)*(2*Math.PI)/Ln)+1},r.easeInOutElastic=function at(Tt,kt=.65){const Ln=1-kt;if(0===Tt||1===Tt)return Tt;const Kn=2*Tt,mn=Kn-1,On=Ln/(2*Math.PI)*Math.asin(1);return Kn<1?Math.pow(2,10*mn)*Math.sin((mn-On)*(2*Math.PI)/Ln)*-.5:Math.pow(2,-10*mn)*Math.sin((mn-On)*(2*Math.PI)/Ln)*.5+1},r.easeOutBounce=_t,r.easeInBounce=vn,r.easeInOutBounce=function Cn(Tt){return Tt<.5?.5*vn(2*Tt):.5*_t(2*Tt-1)+.5}}(Wd||(Wd={}));var $d=(()=>(function(r){r.number=(e,t)=>{const n=t-e;return i=>e+n*i},r.object=(e,t)=>{const n=Object.keys(e);return i=>{const o={};for(let a=n.length-1;-1!==a;a-=1){const s=n[a];o[s]=e[s]+(t[s]-e[s])*i}return o}},r.unit=(e,t)=>{const n=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,i=n.exec(e),o=n.exec(t),a=o?o[1]:"",s=i?+i[1]:0,u=o?+o[1]:0,l=a.indexOf("."),c=l>0?a[1].length-l-1:0,f=u-s,h=i?i[2]:"";return d=>(s+f*d).toFixed(c)+h},r.color=(e,t)=>{const n=parseInt(e.slice(1),16),i=parseInt(t.slice(1),16),o=255&n,a=(255&i)-o,s=65280&n,u=(65280&i)-s,l=16711680&n,c=(16711680&i)-l;return f=>`#${(1<<24|o+a*f&255|s+u*f&65280|l+c*f&16711680).toString(16).slice(1)}`}}($d||($d={})),$d))();const rb=[];var oa,Yo;!function(r){r.toDeg=function e(n){return 180*n/Math.PI%360},r.toRad=function(n,i=!1){return(i?n:n%360)*Math.PI/180},r.normalize=function t(n){return n%360+(n<0?360:0)}}(oa||(oa={})),function(r){r.round=function e(s,u=0){return Number.isInteger(s)?s:+s.toFixed(u)},r.random=function t(s,u){let l,c;if(null==u?(c=s??1,l=0):(c=u,l=s??0),c<l){const f=l;l=c,c=f}return Math.floor(Math.random()*(c-l+1)+l)},r.clamp=function n(s,u,l){return Number.isNaN(s)?NaN:Number.isNaN(u)||Number.isNaN(l)?0:u<l?s<u?u:s>l?l:s:s<l?l:s>u?u:s},r.snapToGrid=function i(s,u){return u*Math.round(s/u)},r.containsPoint=function o(s,u){return null!=u&&null!=s&&u.x>=s.x&&u.x<=s.x+s.width&&u.y>=s.y&&u.y<=s.y+s.height},r.squaredLength=function a(s,u){const l=s.x-u.x,c=s.y-u.y;return l*l+c*c}}(Yo||(Yo={}));class Yd{valueOf(){return this.toJSON()}toString(){return JSON.stringify(this.toJSON())}}class Vt extends Yd{constructor(e,t){super(),this.x=e??0,this.y=t??0}round(e=0){return this.x=Yo.round(this.x,e),this.y=Yo.round(this.y,e),this}add(e,t){const n=Vt.create(e,t);return this.x+=n.x,this.y+=n.y,this}update(e,t){const n=Vt.create(e,t);return this.x=n.x,this.y=n.y,this}translate(e,t){const n=Vt.create(e,t);return this.x+=n.x,this.y+=n.y,this}rotate(e,t){const n=Vt.rotate(this,e,t);return this.x=n.x,this.y=n.y,this}scale(e,t,n=new Vt){const i=Vt.create(n);return this.x=i.x+e*(this.x-i.x),this.y=i.y+t*(this.y-i.y),this}closest(e){if(1===e.length)return Vt.create(e[0]);let t=null,n=1/0;return e.forEach(i=>{const o=this.squaredDistance(i);o<n&&(t=i,n=o)}),t?Vt.create(t):null}distance(e){return Math.sqrt(this.squaredDistance(e))}squaredDistance(e){const t=Vt.create(e),n=this.x-t.x,i=this.y-t.y;return n*n+i*i}manhattanDistance(e){const t=Vt.create(e);return Math.abs(t.x-this.x)+Math.abs(t.y-this.y)}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)||.01}theta(e=new Vt){const t=Vt.create(e);let o=Math.atan2(-(t.y-this.y),t.x-this.x);return o<0&&(o=2*Math.PI+o),180*o/Math.PI}angleBetween(e,t){if(this.equals(e)||this.equals(t))return NaN;let n=this.theta(t)-this.theta(e);return n<0&&(n+=360),n}vectorAngle(e){return new Vt(0,0).angleBetween(this,e)}toPolar(e){return this.update(Vt.toPolar(this,e)),this}changeInAngle(e,t,n=new Vt){return this.clone().translate(-e,-t).theta(n)-this.theta(n)}adhereToRect(e){return Yo.containsPoint(e,this)||(this.x=Math.min(Math.max(this.x,e.x),e.x+e.width),this.y=Math.min(Math.max(this.y,e.y),e.y+e.height)),this}bearing(e){const t=Vt.create(e),n=oa.toRad(this.y),i=oa.toRad(t.y),s=oa.toRad(t.x-this.x),u=Math.sin(s)*Math.cos(i),l=Math.cos(n)*Math.sin(i)-Math.sin(n)*Math.cos(i)*Math.cos(s);let h=oa.toDeg(Math.atan2(u,l))-22.5;return h<0&&(h+=360),h=parseInt(h/45,10),["NE","E","SE","S","SW","W","NW","N"][h]}cross(e,t){if(null!=e&&null!=t){const n=Vt.create(e),i=Vt.create(t);return(i.x-this.x)*(n.y-this.y)-(i.y-this.y)*(n.x-this.x)}return NaN}dot(e){const t=Vt.create(e);return this.x*t.x+this.y*t.y}diff(e,t){if("number"==typeof e)return new Vt(this.x-e,this.y-t);const n=Vt.create(e);return new Vt(this.x-n.x,this.y-n.y)}lerp(e,t){const n=Vt.create(e);return new Vt((1-t)*this.x+t*n.x,(1-t)*this.y+t*n.y)}normalize(e=1){const t=e/this.magnitude();return this.scale(t,t)}move(e,t){const n=Vt.create(e),i=oa.toRad(n.theta(this));return this.translate(Math.cos(i)*t,-Math.sin(i)*t)}reflection(e){return Vt.create(e).move(this,this.distance(e))}snapToGrid(e,t){return this.x=Yo.snapToGrid(this.x,e),this.y=Yo.snapToGrid(this.y,t??e),this}equals(e){const t=Vt.create(e);return null!=t&&t.x===this.x&&t.y===this.y}clone(){return Vt.clone(this)}toJSON(){return Vt.toJSON(this)}serialize(){return`${this.x} ${this.y}`}}(function(r){r.isPoint=function e(t){return null!=t&&t instanceof r}})(Vt||(Vt={})),function(r){r.isPointLike=function e(n){return null!=n&&"object"==typeof n&&"number"==typeof n.x&&"number"==typeof n.y},r.isPointData=function t(n){return null!=n&&Array.isArray(n)&&2===n.length&&"number"==typeof n[0]&&"number"==typeof n[1]}}(Vt||(Vt={})),function(r){function t(f){return r.isPoint(f)?new r(f.x,f.y):Array.isArray(f)?new r(f[0],f[1]):new r(f.x,f.y)}function a(f,h){return f===h||null!=f&&null!=h&&f.x===h.x&&f.y===h.y}function c(f,h,d,g=new r){const m=t(f),_=t(g),D=m.x-_.x,L=m.y-_.y;return new r(D*h-L*d+_.x,L*h+D*d+_.y)}r.create=function e(f,h){return null==f||"number"==typeof f?new r(f,h):t(f)},r.clone=t,r.toJSON=function n(f){return r.isPoint(f)?{x:f.x,y:f.y}:Array.isArray(f)?{x:f[0],y:f[1]}:{x:f.x,y:f.y}},r.fromPolar=function i(f,h,d=new r){let g=Math.abs(f*Math.cos(h)),m=Math.abs(f*Math.sin(h));const _=t(d),D=oa.normalize(oa.toDeg(h));return D<90?m=-m:D<180?(g=-g,m=-m):D<270&&(g=-g),new r(_.x+g,_.y+m)},r.toPolar=function o(f,h=new r){const d=t(f),g=t(h),m=d.x-g.x,_=d.y-g.y;return new r(Math.sqrt(m*m+_*_),oa.toRad(g.theta(d)))},r.equals=a,r.equalPoints=function s(f,h){if(null==f&&null!=h||null!=f&&null==h||null!=f&&null!=h&&f.length!==h.length)return!1;if(null!=f&&null!=h)for(let d=0,g=f.length;d<g;d+=1)if(!a(f[d],h[d]))return!1;return!0},r.random=function u(f,h,d,g){return new r(Yo.random(f,h),Yo.random(d,g))},r.rotate=function l(f,h,d){const g=oa.toRad(oa.normalize(-h)),m=Math.sin(g);return c(f,Math.cos(g),m,d)},r.rotateEx=c}(Vt||(Vt={}));class _r extends Yd{get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get origin(){return new Vt(this.x,this.y)}get topLeft(){return new Vt(this.x,this.y)}get topCenter(){return new Vt(this.x+this.width/2,this.y)}get topRight(){return new Vt(this.x+this.width,this.y)}get center(){return new Vt(this.x+this.width/2,this.y+this.height/2)}get bottomLeft(){return new Vt(this.x,this.y+this.height)}get bottomCenter(){return new Vt(this.x+this.width/2,this.y+this.height)}get bottomRight(){return new Vt(this.x+this.width,this.y+this.height)}get corner(){return new Vt(this.x+this.width,this.y+this.height)}get rightMiddle(){return new Vt(this.x+this.width,this.y+this.height/2)}get leftMiddle(){return new Vt(this.x,this.y+this.height/2)}get topLine(){return new zr(this.topLeft,this.topRight)}get rightLine(){return new zr(this.topRight,this.bottomRight)}get bottomLine(){return new zr(this.bottomLeft,this.bottomRight)}get leftLine(){return new zr(this.topLeft,this.bottomLeft)}constructor(e,t,n,i){super(),this.x=e??0,this.y=t??0,this.width=n??0,this.height=i??0}getOrigin(){return this.origin}getTopLeft(){return this.topLeft}getTopCenter(){return this.topCenter}getTopRight(){return this.topRight}getCenter(){return this.center}getCenterX(){return this.x+this.width/2}getCenterY(){return this.y+this.height/2}getBottomLeft(){return this.bottomLeft}getBottomCenter(){return this.bottomCenter}getBottomRight(){return this.bottomRight}getCorner(){return this.corner}getRightMiddle(){return this.rightMiddle}getLeftMiddle(){return this.leftMiddle}getTopLine(){return this.topLine}getRightLine(){return this.rightLine}getBottomLine(){return this.bottomLine}getLeftLine(){return this.leftLine}bbox(e){if(!e)return this.clone();const t=oa.toRad(e),n=Math.abs(Math.sin(t)),i=Math.abs(Math.cos(t)),o=this.width*i+this.height*n,a=this.width*n+this.height*i;return new _r(this.x+(this.width-o)/2,this.y+(this.height-a)/2,o,a)}round(e=0){return this.x=Yo.round(this.x,e),this.y=Yo.round(this.y,e),this.width=Yo.round(this.width,e),this.height=Yo.round(this.height,e),this}add(e,t,n,i){const o=_r.create(e,t,n,i),a=Math.min(this.x,o.x),s=Math.min(this.y,o.y),u=Math.max(this.x+this.width,o.x+o.width),l=Math.max(this.y+this.height,o.y+o.height);return this.x=a,this.y=s,this.width=u-a,this.height=l-s,this}update(e,t,n,i){const o=_r.create(e,t,n,i);return this.x=o.x,this.y=o.y,this.width=o.width,this.height=o.height,this}inflate(e,t){const n=e,i=t??e;return this.x-=n,this.y-=i,this.width+=2*n,this.height+=2*i,this}snapToGrid(e,t){const n=this.origin.snapToGrid(e,t),i=this.corner.snapToGrid(e,t);return this.x=n.x,this.y=n.y,this.width=i.x-n.x,this.height=i.y-n.y,this}translate(e,t){const n=Vt.create(e,t);return this.x+=n.x,this.y+=n.y,this}scale(e,t,n=new Vt){const i=this.origin.scale(e,t,n);return this.x=i.x,this.y=i.y,this.width*=e,this.height*=t,this}rotate(e,t=this.getCenter()){if(0!==e){const n=oa.toRad(e),i=Math.cos(n),o=Math.sin(n);let a=this.getOrigin(),s=this.getTopRight(),u=this.getBottomRight(),l=this.getBottomLeft();a=Vt.rotateEx(a,i,o,t),s=Vt.rotateEx(s,i,o,t),u=Vt.rotateEx(u,i,o,t),l=Vt.rotateEx(l,i,o,t);const c=new _r(a.x,a.y,0,0);c.add(s.x,s.y,0,0),c.add(u.x,u.y,0,0),c.add(l.x,l.y,0,0),this.update(c)}return this}rotate90(){const e=(this.width-this.height)/2;this.x+=e,this.y-=e;const t=this.width;return this.width=this.height,this.height=t,this}moveAndExpand(e){const t=_r.clone(e);return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this}getMaxScaleToFit(e,t=this.center){const n=_r.clone(e),i=t.x,o=t.y;let a=1/0,s=1/0,u=1/0,l=1/0,c=1/0,f=1/0,h=1/0,d=1/0;const g=n.topLeft;g.x<i&&(a=(this.x-i)/(g.x-i)),g.y<o&&(c=(this.y-o)/(g.y-o));const m=n.bottomRight;m.x>i&&(s=(this.x+this.width-i)/(m.x-i)),m.y>o&&(f=(this.y+this.height-o)/(m.y-o));const _=n.topRight;_.x>i&&(u=(this.x+this.width-i)/(_.x-i)),_.y<o&&(h=(this.y-o)/(_.y-o));const D=n.bottomLeft;return D.x<i&&(l=(this.x-i)/(D.x-i)),D.y>o&&(d=(this.y+this.height-o)/(D.y-o)),{sx:Math.min(a,s,u,l),sy:Math.min(c,f,h,d)}}getMaxUniformScaleToFit(e,t=this.center){const n=this.getMaxScaleToFit(e,t);return Math.min(n.sx,n.sy)}containsPoint(e,t){return Yo.containsPoint(this,Vt.create(e,t))}containsRect(e,t,n,i){const o=_r.create(e,t,n,i),a=this.x,s=this.y,u=this.width,l=this.height,c=o.x,f=o.y,h=o.width,d=o.height;return 0!==u&&0!==l&&0!==h&&0!==d&&c>=a&&f>=s&&c+h<=a+u&&f+d<=s+l}intersectsWithLine(e){const n=[],i=[];return[this.topLine,this.rightLine,this.bottomLine,this.leftLine].forEach(o=>{const a=e.intersectsWithLine(o);null!==a&&i.indexOf(a.toString())<0&&(n.push(a),i.push(a.toString()))}),n.length>0?n:null}intersectsWithLineFromCenterToPoint(e,t){const n=Vt.clone(e),i=this.center;let o=null;null!=t&&0!==t&&n.rotate(t,i);const a=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],s=new zr(i,n);for(let u=a.length-1;u>=0;u-=1){const l=a[u].intersectsWithLine(s);if(null!==l){o=l;break}}return o&&null!=t&&0!==t&&o.rotate(-t,i),o}intersectsWithRect(e,t,n,i){const o=_r.create(e,t,n,i);if(!this.isIntersectWithRect(o))return null;const a=this.origin,s=this.corner,u=o.origin,l=o.corner,c=Math.max(a.x,u.x),f=Math.max(a.y,u.y);return new _r(c,f,Math.min(s.x,l.x)-c,Math.min(s.y,l.y)-f)}isIntersectWithRect(e,t,n,i){const o=_r.create(e,t,n,i),a=this.origin,s=this.corner,u=o.origin,l=o.corner;return!(l.x<=a.x||l.y<=a.y||u.x>=s.x||u.y>=s.y)}normalize(){let e=this.x,t=this.y,n=this.width,i=this.height;return this.width<0&&(e=this.x+this.width,n=-this.width),this.height<0&&(t=this.y+this.height,i=-this.height),this.x=e,this.y=t,this.width=n,this.height=i,this}union(e){const t=_r.clone(e),n=this.origin,i=this.corner,o=t.origin,a=t.corner,s=Math.min(n.x,o.x),u=Math.min(n.y,o.y),l=Math.max(i.x,a.x),c=Math.max(i.y,a.y);return new _r(s,u,l-s,c-u)}getNearestSideToPoint(e){const t=Vt.clone(e),i=this.x+this.width-t.x,o=t.y-this.y;let s=t.x-this.x,u="left";return i<s&&(s=i,u="right"),o<s&&(s=o,u="top"),this.y+this.height-t.y<s&&(u="bottom"),u}getNearestPointToPoint(e){const t=Vt.clone(e);if(this.containsPoint(t)){const n=this.getNearestSideToPoint(t);if("left"===n)return new Vt(this.x,t.y);if("top"===n)return new Vt(t.x,this.y);if("right"===n)return new Vt(this.x+this.width,t.y);if("bottom"===n)return new Vt(t.x,this.y+this.height)}return t.adhereToRect(this)}equals(e){return null!=e&&e.x===this.x&&e.y===this.y&&e.width===this.width&&e.height===this.height}clone(){return new _r(this.x,this.y,this.width,this.height)}toJSON(){return{x:this.x,y:this.y,width:this.width,height:this.height}}serialize(){return`${this.x} ${this.y} ${this.width} ${this.height}`}}(function(r){r.isRectangle=function e(t){return null!=t&&t instanceof r}})(_r||(_r={})),function(r){r.isRectangleLike=function e(t){return null!=t&&"object"==typeof t&&"number"==typeof t.x&&"number"==typeof t.y&&"number"==typeof t.width&&"number"==typeof t.height}}(_r||(_r={})),function(r){function t(a){return r.isRectangle(a)?a.clone():Array.isArray(a)?new r(a[0],a[1],a[2],a[3]):new r(a.x,a.y,a.width,a.height)}r.create=function e(a,s,u,l){return null==a||"number"==typeof a?new r(a,s,u,l):t(a)},r.clone=t,r.fromEllipse=function n(a){return new r(a.x-a.a,a.y-a.b,2*a.a,2*a.b)},r.fromSize=function i(a){return new r(0,0,a.width,a.height)},r.fromPositionAndSize=function o(a,s){return new r(a.x,a.y,s.width,s.height)}}(_r||(_r={}));class zr extends Yd{get center(){return new Vt((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}constructor(e,t,n,i){super(),"number"==typeof e&&"number"==typeof t?(this.start=new Vt(e,t),this.end=new Vt(n,i)):(this.start=Vt.create(e),this.end=Vt.create(t))}getCenter(){return this.center}round(e=0){return this.start.round(e),this.end.round(e),this}translate(e,t){return"number"==typeof e?(this.start.translate(e,t),this.end.translate(e,t)):(this.start.translate(e),this.end.translate(e)),this}rotate(e,t){return this.start.rotate(e,t),this.end.rotate(e,t),this}scale(e,t,n){return this.start.scale(e,t,n),this.end.scale(e,t,n),this}length(){return Math.sqrt(this.squaredLength())}squaredLength(){const e=this.start.x-this.end.x,t=this.start.y-this.end.y;return e*e+t*t}setLength(e){const t=this.length();if(!t)return this;const n=e/t;return this.scale(n,n,this.start)}parallel(e){const t=this.clone();if(!t.isDifferentiable())return t;const{start:n,end:i}=t,o=n.clone().rotate(270,i),a=i.clone().rotate(90,n);return n.move(a,e),i.move(o,e),t}vector(){return new Vt(this.end.x-this.start.x,this.end.y-this.start.y)}angle(){const e=new Vt(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,e)}bbox(){const e=Math.min(this.start.x,this.end.x),t=Math.min(this.start.y,this.end.y),n=Math.max(this.start.x,this.end.x),i=Math.max(this.start.y,this.end.y);return new _r(e,t,n-e,i-t)}bearing(){return this.start.bearing(this.end)}closestPoint(e){return this.pointAt(this.closestPointNormalizedLength(e))}closestPointLength(e){return this.closestPointNormalizedLength(e)*this.length()}closestPointTangent(e){return this.tangentAt(this.closestPointNormalizedLength(e))}closestPointNormalizedLength(e){const t=this.vector().dot(new zr(this.start,e).vector()),n=Math.min(1,Math.max(0,t/this.squaredLength()));return Number.isNaN(n)?0:n}pointAt(e){const t=this.start,n=this.end;return e<=0?t.clone():e>=1?n.clone():t.lerp(n,e)}pointAtLength(e){const t=this.start,n=this.end;let i=!0;e<0&&(i=!1,e=-e);const o=this.length();return e>=o?i?n.clone():t.clone():this.pointAt((i?e:o-e)/o)}divideAt(e){const t=this.pointAt(e);return[new zr(this.start,t),new zr(t,this.end)]}divideAtLength(e){const t=this.pointAtLength(e);return[new zr(this.start,t),new zr(t,this.end)]}containsPoint(e){const t=this.start,n=this.end;if(0!==t.cross(e,n))return!1;const i=this.length();return!(new zr(t,e).length()>i||new zr(e,n).length()>i)}intersect(e,t){const n=e.intersectsWithLine(this,t);return n?Array.isArray(n)?n:[n]:null}intersectsWithLine(e){const t=new Vt(this.end.x-this.start.x,this.end.y-this.start.y),n=new Vt(e.end.x-e.start.x,e.end.y-e.start.y),i=t.x*n.y-t.y*n.x,o=new Vt(e.start.x-this.start.x,e.start.y-this.start.y),a=o.x*n.y-o.y*n.x,s=o.x*t.y-o.y*t.x;if(0===i||a*i<0||s*i<0)return null;if(i>0){if(a>i||s>i)return null}else if(a<i||s<i)return null;return new Vt(this.start.x+a*t.x/i,this.start.y+a*t.y/i)}isDifferentiable(){return!this.start.equals(this.end)}pointOffset(e){const t=Vt.clone(e),n=this.start,i=this.end;return((i.x-n.x)*(t.y-n.y)-(i.y-n.y)*(t.x-n.x))/this.length()}pointSquaredDistance(e,t){const n=Vt.create(e,t);return this.closestPoint(n).squaredDistance(n)}pointDistance(e,t){const n=Vt.create(e,t);return this.closestPoint(n).distance(n)}tangentAt(e){if(!this.isDifferentiable())return null;const t=this.start,n=this.end,i=this.pointAt(e),o=new zr(t,n);return o.translate(i.x-t.x,i.y-t.y),o}tangentAtLength(e){if(!this.isDifferentiable())return null;const t=this.start,n=this.end,i=this.pointAtLength(e),o=new zr(t,n);return o.translate(i.x-t.x,i.y-t.y),o}relativeCcw(e,t){const n=Vt.create(e,t);let i=n.x-this.start.x,o=n.y-this.start.y;const a=this.end.x-this.start.x,s=this.end.y-this.start.y;let u=i*s-o*a;return 0===u&&(u=i*a+o*s,u>0&&(i-=a,o-=s,u=i*a+o*s,u<0&&(u=0))),u<0?-1:u>0?1:0}equals(e){return null!=e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.end.x===e.end.x&&this.end.y===e.end.y}clone(){return new zr(this.start,this.end)}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){return[this.start.serialize(),this.end.serialize()].join(" ")}}!function(r){r.isLine=function e(t){return null!=t&&t instanceof r}}(zr||(zr={}));class jc extends Yd{get center(){return new Vt(this.x,this.y)}constructor(e,t,n,i){super(),this.x=e??0,this.y=t??0,this.a=n??0,this.b=i??0}bbox(){return _r.fromEllipse(this)}getCenter(){return this.center}inflate(e,t){const i=t??e;return this.a+=2*e,this.b+=2*i,this}normalizedDistance(e,t){const n=Vt.create(e,t),i=n.x-this.x,o=n.y-this.y,a=this.a,s=this.b;return i*i/(a*a)+o*o/(s*s)}containsPoint(e,t){return this.normalizedDistance(e,t)<=1}intersectsWithLine(e){const t=[],n=this.a,i=this.b,o=e.start,a=e.end,s=e.vector(),u=o.diff(new Vt(this.x,this.y)),l=new Vt(s.x/(n*n),s.y/(i*i)),c=new Vt(u.x/(n*n),u.y/(i*i)),f=s.dot(l),h=s.dot(c),g=h*h-f*(u.dot(c)-1);if(g<0)return null;if(g>0){const m=Math.sqrt(g),_=(-h-m)/f,D=(-h+m)/f;if((_<0||_>1)&&(D<0||D>1))return null;_>=0&&_<=1&&t.push(o.lerp(a,_)),D>=0&&D<=1&&t.push(o.lerp(a,D))}else{const m=-h/f;if(!(m>=0&&m<=1))return null;t.push(o.lerp(a,m))}return t}intersectsWithLineFromCenterToPoint(e,t=0){const n=Vt.clone(e);t&&n.rotate(t,this.getCenter());const i=n.x-this.x,o=n.y-this.y;let a;if(0===i)return a=this.bbox().getNearestPointToPoint(n),t?a.rotate(-t,this.getCenter()):a;const s=o/i;let f=Math.sqrt(1/(1/(this.a*this.a)+s*s/(this.b*this.b)));return f=i<0?-f:f,a=new Vt(this.x+f,this.y+s*f),t?a.rotate(-t,this.getCenter()):a}tangentTheta(e){const t=Vt.clone(e),n=t.x,i=t.y,o=this.a,a=this.b,s=this.bbox().center,u=s.x,l=s.y;let d,g;return n>s.x+o/2||n<s.x-o/2?(g=n>s.x?i-30:i+30,d=o*o/(n-u)-o*o*(i-l)*(g-l)/(a*a*(n-u))+u):(d=i>s.y?n+30:n-30,g=a*a/(i-l)-a*a*(n-u)*(d-u)/(o*o*(i-l))+l),new Vt(d,g).theta(t)}scale(e,t){return this.a*=e,this.b*=t,this}rotate(e,t){const n=_r.fromEllipse(this);n.rotate(e,t);const i=jc.fromRect(n);return this.a=i.a,this.b=i.b,this.x=i.x,this.y=i.y,this}translate(e,t){const n=Vt.create(e,t);return this.x+=n.x,this.y+=n.y,this}equals(e){return null!=e&&e.x===this.x&&e.y===this.y&&e.a===this.a&&e.b===this.b}clone(){return new jc(this.x,this.y,this.a,this.b)}toJSON(){return{x:this.x,y:this.y,a:this.a,b:this.b}}serialize(){return`${this.x} ${this.y} ${this.a} ${this.b}`}}(function(r){r.isEllipse=function e(t){return null!=t&&t instanceof r}})(jc||(jc={})),function(r){function t(i){return r.isEllipse(i)?i.clone():Array.isArray(i)?new r(i[0],i[1],i[2],i[3]):new r(i.x,i.y,i.a,i.b)}r.create=function e(i,o,a,s){return null==i||"number"==typeof i?new r(i,o,a,s):t(i)},r.parse=t,r.fromRect=function n(i){const o=i.center;return new r(o.x,o.y,i.width/2,i.height/2)}}(jc||(jc={}));const Zye=new RegExp("^[\\s\\dLMCZz,.]*$");function Qye(r){return"string"==typeof r&&Zye.test(r)}function WA(r,e){return(r%e+e)%e}function Z4(r,e={}){const t=[];return r&&r.length&&r.forEach(n=>{Array.isArray(n)?t.push({x:n[0],y:n[1]}):t.push({x:n.x,y:n.y})}),function Jye(r,e,t,n,i){const o=[],a=r[r.length-1],s=null!=e&&e>0,u=e||0;if(n&&s){const f=(r=r.slice())[0],h=new Vt(a.x+(f.x-a.x)/2,a.y+(f.y-a.y)/2);r.splice(0,0,h)}let l=r[0],c=1;for(o.push(t?"M":"L",l.x,l.y);c<(n?r.length:r.length-1);){let f=r[WA(c,r.length)],h=l.x-f.x,d=l.y-f.y;if(s&&(0!==h||0!==d)&&(null==i||i.indexOf(c-1)<0)){let g=Math.sqrt(h*h+d*d);const m=h*Math.min(u,g/2)/g,_=d*Math.min(u,g/2)/g;o.push("L",f.x+m,f.y+_);let O=r[WA(c+1,r.length)];for(;c<r.length-2&&0===Math.round(O.x-f.x)&&0===Math.round(O.y-f.y);)O=r[WA(c+2,r.length)],c+=1;h=O.x-f.x,d=O.y-f.y,g=Math.max(1,Math.sqrt(h*h+d*d));const Z=h*Math.min(u,g/2)/g,le=d*Math.min(u,g/2)/g,pe=f.x+Z,Ee=f.y+le;o.push("Q",f.x,f.y,pe,Ee),f=new Vt(pe,Ee)}else o.push("L",f.x,f.y);l=f,c+=1}return n?o.push("Z"):o.push("L",a.x,a.y),o.map(f=>"string"==typeof f?f:+f.toFixed(3)).join(" ")}(t,e.round,null==e.initialMove||e.initialMove,e.close,e.exclude)}function Px(r,e,t,n,i=0,o=0,a=0,s,u){if(0===t||0===n)return[];s-=r,u-=e,t=Math.abs(t),n=Math.abs(n);const l=-s/2,c=-u/2,f=Math.cos(i*Math.PI/180),h=Math.sin(i*Math.PI/180),d=f*l+h*c,g=-1*h*l+f*c,m=d*d,_=g*g,D=t*t,L=n*n,O=m/D+_/L;let Z;if(O>1)t=Math.sqrt(O)*t,n=Math.sqrt(O)*n,Z=0;else{let ji=1;o===a&&(ji=-1),Z=ji*Math.sqrt((D*L-D*_-L*m)/(D*_+L*m))}const le=Z*t*g/n,pe=-1*Z*n*d/t,Ee=f*le-h*pe+s/2,Re=h*le+f*pe+u/2;let Ve=Math.atan2((g-pe)/n,(d-le)/t)-Math.atan2(0,1),Ue=Ve>=0?Ve:2*Math.PI+Ve;Ve=Math.atan2((-g-pe)/n,(-d-le)/t)-Math.atan2((g-pe)/n,(d-le)/t);let at=Ve>=0?Ve:2*Math.PI+Ve;0===a&&at>0?at-=2*Math.PI:0!==a&&at<0&&(at+=2*Math.PI);const _t=2*at/Math.PI,vn=Math.ceil(_t<0?-1*_t:_t),Cn=at/vn,Tt=8/3*Math.sin(Cn/4)*Math.sin(Cn/4)/Math.sin(Cn/2),kt=f*t,Ln=f*n,Kn=h*t,mn=h*n;let On=Math.cos(Ue),Vn=Math.sin(Ue),rr=-Tt*(kt*Vn+mn*On),vr=-Tt*(Kn*Vn-Ln*On),Sr=0,Zr=0;const ni=[];for(let ji=0;ji<vn;ji+=1){Ue+=Cn,On=Math.cos(Ue),Vn=Math.sin(Ue),Sr=kt*On-mn*Vn+Ee,Zr=Kn*On+Ln*Vn+Re;const Wi=-Tt*(kt*Vn+mn*On),po=-Tt*(Kn*Vn-Ln*On),io=6*ji;ni[io]=Number(rr+r),ni[io+1]=Number(vr+e),ni[io+2]=Number(Sr-Wi+r),ni[io+3]=Number(Zr-po+e),ni[io+4]=Number(Sr+r),ni[io+5]=Number(Zr+e),rr=Sr+Wi,vr=Zr+po}return ni.map(ji=>+ji.toFixed(2))}function ebe(r,e,t,n,i=0,o=0,a=0,s,u){const l=[],c=Px(r,e,t,n,i,o,a,s,u);if(null!=c)for(let f=0,h=c.length;f<h;f+=6)l.push("C",c[f],c[f+1],c[f+2],c[f+3],c[f+4],c[f+5]);return l.join(" ")}class za extends Yd{get start(){return this.points[0]||null}get end(){return this.points[this.points.length-1]||null}constructor(e){if(super(),null!=e){if("string"==typeof e)return za.parse(e);this.points=e.map(t=>Vt.create(t))}else this.points=[]}scale(e,t,n=new Vt){return this.points.forEach(i=>i.scale(e,t,n)),this}rotate(e,t){return this.points.forEach(n=>n.rotate(e,t)),this}translate(e,t){const n=Vt.create(e,t);return this.points.forEach(i=>i.translate(n.x,n.y)),this}round(e=0){return this.points.forEach(t=>t.round(e)),this}bbox(){if(0===this.points.length)return new _r;let e=1/0,t=-1/0,n=1/0,i=-1/0;const o=this.points;for(let a=0,s=o.length;a<s;a+=1){const u=o[a],l=u.x,c=u.y;l<e&&(e=l),l>t&&(t=l),c<n&&(n=c),c>i&&(i=c)}return new _r(e,n,t-e,i-n)}closestPoint(e){const t=this.closestPointLength(e);return this.pointAtLength(t)}closestPointLength(e){const t=this.points,n=t.length;if(0===n||1===n)return 0;let i=0,o=0,a=1/0;for(let s=0,u=n-1;s<u;s+=1){const l=new zr(t[s],t[s+1]),c=l.length(),f=l.closestPointNormalizedLength(e),d=l.pointAt(f).squaredDistance(e);d<a&&(a=d,o=i+f*c),i+=c}return o}closestPointNormalizedLength(e){const t=this.length();return 0===t?0:this.closestPointLength(e)/t}closestPointTangent(e){const t=this.closestPointLength(e);return this.tangentAtLength(t)}containsPoint(e){if(0===this.points.length)return!1;const t=Vt.clone(e),n=t.x,i=t.y,o=this.points,a=o.length;let s=a-1,u=0;for(let l=0;l<a;l+=1){const c=o[s],f=o[l];if(t.equals(c))return!0;const h=new zr(c,f);if(h.containsPoint(e))return!0;if(i<=c.y&&i>f.y||i>c.y&&i<=f.y){const d=c.x-n>f.x-n?c.x-n:f.x-n;if(d>=0){const g=new Vt(n+d,i),m=new zr(e,g);h.intersectsWithLine(m)&&(u+=1)}}s=l}return u%2==1}intersectsWithLine(e){const t=[];for(let n=0,i=this.points.length-1;n<i;n+=1){const s=e.intersectsWithLine(new zr(this.points[n],this.points[n+1]));s&&t.push(s)}return t.length>0?t:null}isDifferentiable(){for(let e=0,t=this.points.length-1;e<t;e+=1)if(new zr(this.points[e],this.points[e+1]).isDifferentiable())return!0;return!1}length(){let e=0;for(let t=0,n=this.points.length-1;t<n;t+=1)e+=this.points[t].distance(this.points[t+1]);return e}pointAt(e){const t=this.points,n=t.length;if(0===n)return null;if(1===n||e<=0)return t[0].clone();if(e>=1)return t[n-1].clone();const o=this.length()*e;return this.pointAtLength(o)}pointAtLength(e){const t=this.points,n=t.length;if(0===n)return null;if(1===n)return t[0].clone();let i=!0;e<0&&(i=!1,e=-e);let o=0;for(let s=0,u=n-1;s<u;s+=1){const l=i?s:u-1-s,c=t[l],f=t[l+1],h=new zr(c,f),d=c.distance(f);if(e<=o+d)return h.pointAtLength((i?1:-1)*(e-o));o+=d}return(i?t[n-1]:t[0]).clone()}tangentAt(e){const n=this.points.length;if(0===n||1===n)return null;e<0&&(e=0),e>1&&(e=1);const o=this.length()*e;return this.tangentAtLength(o)}tangentAtLength(e){const t=this.points,n=t.length;if(0===n||1===n)return null;let i=!0;e<0&&(i=!1,e=-e);let o,a=0;for(let s=0,u=n-1;s<u;s+=1){const l=i?s:u-1-s,c=t[l],f=t[l+1],h=new zr(c,f),d=c.distance(f);if(h.isDifferentiable()){if(e<=a+d)return h.tangentAtLength((i?1:-1)*(e-a));o=h}a+=d}return o?o.tangentAt(i?1:0):null}simplify(e={}){const t=this.points;if(t.length<3)return this;const n=e.threshold||0;let i=0;for(;t[i+2];){const a=i+1,l=t[a];new zr(t[i],t[i+2]).closestPoint(l).distance(l)<=n?t.splice(a,1):i+=1}return this}toHull(){const e=this.points,t=e.length;if(0===t)return new za;let n=e[0];for(let h=1;h<t;h+=1)(e[h].y<n.y||e[h].y===n.y&&e[h].x>n.x)&&(n=e[h]);const i=[];for(let h=0;h<t;h+=1){let d=n.theta(e[h]);0===d&&(d=360),i.push([e[h],h,d])}i.sort((h,d)=>{let g=h[2]-d[2];return 0===g&&(g=d[1]-h[1]),g}),i.length>2&&i.unshift(i[i.length-1]);const o={},a=[],s=h=>`${h[0].toString()}@${h[1]}`;for(;0!==i.length;){const h=i.pop(),d=h[0];if(o[s(h)])continue;let g=!1;for(;!g;)if(a.length<2)a.push(h),g=!0;else{const m=a.pop(),_=m[0],D=a.pop(),L=D[0],O=L.cross(_,d);if(O<0)a.push(D),a.push(m),a.push(h),g=!0;else if(0===O){const le=_.angleBetween(L,d);Math.abs(le-180)<1e-10||_.equals(d)||L.equals(_)?(o[s(m)]=_,a.push(D)):Math.abs((le+1)%360-1)<1e-10&&(a.push(D),i.push(m))}else o[s(m)]=_,a.push(D)}}a.length>2&&a.pop();let u,l=-1;for(let h=0,d=a.length;h<d;h+=1){const g=a[h][1];(void 0===u||g<u)&&(u=g,l=h)}let c=[];if(l>0){const h=a.slice(l),d=a.slice(0,l);c=h.concat(d)}else c=a;const f=[];for(let h=0,d=c.length;h<d;h+=1)f.push(c[h][0]);return new za(f)}equals(e){return null!=e&&e.points.length===this.points.length&&e.points.every((t,n)=>t.equals(this.points[n]))}clone(){return new za(this.points.map(e=>e.clone()))}toJSON(){return this.points.map(e=>e.toJSON())}serialize(){return this.points.map(e=>`${e.serialize()}`).join(" ")}}(function(r){r.isPolyline=function e(t){return null!=t&&t instanceof r}})(za||(za={})),function(r){r.parse=function e(t){const n=t.trim();if(""===n)return new r;const i=[],o=n.split(/\s*,\s*|\s+/);for(let a=0,s=o.length;a<s;a+=2)i.push({x:+o[a],y:+o[a+1]});return new r(i)}}(za||(za={}));class Pa extends Yd{constructor(e,t,n,i){super(),this.PRECISION=3,this.start=Vt.create(e),this.controlPoint1=Vt.create(t),this.controlPoint2=Vt.create(n),this.end=Vt.create(i)}bbox(){const e=this.start,t=this.controlPoint1,n=this.controlPoint2,i=this.end,o=e.x,a=e.y,s=t.x,u=t.y,l=n.x,c=n.y,f=i.x,h=i.y,d=[],g=[],m=[[],[]];let _,D,L,O,Z,le,pe,Ee;for(let Ln=0;Ln<2;Ln+=1)if(0===Ln?(D=6*o-12*s+6*l,_=-3*o+9*s-9*l+3*f,L=3*s-3*o):(D=6*a-12*u+6*c,_=-3*a+9*u-9*c+3*h,L=3*u-3*a),Math.abs(_)<1e-12){if(Math.abs(D)<1e-12)continue;O=-L/D,O>0&&O<1&&g.push(O)}else pe=D*D-4*L*_,Ee=Math.sqrt(pe),!(pe<0)&&(Z=(-D+Ee)/(2*_),Z>0&&Z<1&&g.push(Z),le=(-D-Ee)/(2*_),le>0&&le<1&&g.push(le));let Re,Ve,Ue,at=g.length;const _t=at;for(;at;)at-=1,O=g[at],Ue=1-O,Re=Ue*Ue*Ue*o+3*Ue*Ue*O*s+3*Ue*O*O*l+O*O*O*f,m[0][at]=Re,Ve=Ue*Ue*Ue*a+3*Ue*Ue*O*u+3*Ue*O*O*c+O*O*O*h,m[1][at]=Ve,d[at]={X:Re,Y:Ve};g[_t]=0,g[_t+1]=1,d[_t]={X:o,Y:a},d[_t+1]={X:f,Y:h},m[0][_t]=o,m[1][_t]=a,m[0][_t+1]=f,m[1][_t+1]=h,g.length=_t+2,m[0].length=_t+2,m[1].length=_t+2,d.length=_t+2;const vn=Math.min.apply(null,m[0]),Cn=Math.min.apply(null,m[1]),Tt=Math.max.apply(null,m[0]),kt=Math.max.apply(null,m[1]);return new _r(vn,Cn,Tt-vn,kt-Cn)}closestPoint(e,t={}){return this.pointAtT(this.closestPointT(e,t))}closestPointLength(e,t={}){const n=this.getOptions(t);return this.lengthAtT(this.closestPointT(e,n),n)}closestPointNormalizedLength(e,t={}){const n=this.getOptions(t),i=this.closestPointLength(e,n);if(!i)return 0;const o=this.length(n);return 0===o?0:i/o}closestPointT(e,t={}){const n=this.getPrecision(t),i=this.getDivisions(t),o=Math.pow(10,-n);let a=null,s=0,u=0,l=0,c=0,f=0,h=null;const d=i.length;let g=d>0?1/d:0;for(i.forEach((m,_)=>{const D=m.start.distance(e),L=m.end.distance(e),O=D+L;(null==h||O<h)&&(a=m,s=_*g,u=(_+1)*g,l=D,c=L,h=O,f=m.endpointDistance())});;){const m=l?Math.abs(l-c)/l:0,_=null!=c?Math.abs(l-c)/c:0,L=!l||l<f*o,O=!c||c<f*o;if(m<o||_<o||L||O)return l<=c?s:u;const le=a.divide(.5);g/=2;const pe=le[0].start.distance(e),Ee=le[0].end.distance(e),Re=pe+Ee,Ve=le[1].start.distance(e),Ue=le[1].end.distance(e);Re<=Ve+Ue?(a=le[0],u-=g,l=pe,c=Ee):(a=le[1],s+=g,l=Ve,c=Ue)}}closestPointTangent(e,t={}){return this.tangentAtT(this.closestPointT(e,t))}containsPoint(e,t={}){return this.toPolyline(t).containsPoint(e)}divideAt(e,t={}){if(e<=0)return this.divideAtT(0);if(e>=1)return this.divideAtT(1);const n=this.tAt(e,t);return this.divideAtT(n)}divideAtLength(e,t={}){const n=this.tAtLength(e,t);return this.divideAtT(n)}divide(e){return this.divideAtT(e)}divideAtT(e){const t=this.start,n=this.controlPoint1,i=this.controlPoint2,o=this.end;if(e<=0)return[new Pa(t,t,t,t),new Pa(t,n,i,o)];if(e>=1)return[new Pa(t,n,i,o),new Pa(o,o,o,o)];const a=this.getSkeletonPoints(e),l=a.divider,c=a.dividerControlPoint1,f=a.dividerControlPoint2;return[new Pa(t,a.startControlPoint1,a.startControlPoint2,l),new Pa(l,c,f,o)]}endpointDistance(){return this.start.distance(this.end)}getSkeletonPoints(e){const t=this.start,n=this.controlPoint1,i=this.controlPoint2,o=this.end;if(e<=0)return{startControlPoint1:t.clone(),startControlPoint2:t.clone(),divider:t.clone(),dividerControlPoint1:n.clone(),dividerControlPoint2:i.clone()};if(e>=1)return{startControlPoint1:n.clone(),startControlPoint2:i.clone(),divider:o.clone(),dividerControlPoint1:o.clone(),dividerControlPoint2:o.clone()};const a=new zr(t,n).pointAt(e),s=new zr(n,i).pointAt(e),u=new zr(i,o).pointAt(e),l=new zr(a,s).pointAt(e),c=new zr(s,u).pointAt(e);return{startControlPoint1:a,startControlPoint2:l,divider:new zr(l,c).pointAt(e),dividerControlPoint1:c,dividerControlPoint2:u}}getSubdivisions(e={}){const t=this.getPrecision(e);let n=[new Pa(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(0===t)return n;let i=this.endpointDistance();const o=Math.pow(10,-t);let a=0;for(;;){a+=1;const s=[];n.forEach(c=>{const f=c.divide(.5);s.push(f[0],f[1])});const u=s.reduce((c,f)=>c+f.endpointDistance(),0),l=0!==u?(u-i)/u:0;if(a>1&&l<o)return s;n=s,i=u}}length(e={}){return this.getDivisions(e).reduce((n,i)=>n+i.endpointDistance(),0)}lengthAtT(e,t={}){if(e<=0)return 0;const n=void 0===t.precision?this.PRECISION:t.precision;return this.divide(e)[0].length({precision:n})}pointAt(e,t={}){if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();const n=this.tAt(e,t);return this.pointAtT(n)}pointAtLength(e,t={}){const n=this.tAtLength(e,t);return this.pointAtT(n)}pointAtT(e){return e<=0?this.start.clone():e>=1?this.end.clone():this.getSkeletonPoints(e).divider}isDifferentiable(){const t=this.controlPoint1,n=this.controlPoint2,i=this.end;return!(this.start.equals(t)&&t.equals(n)&&n.equals(i))}tangentAt(e,t={}){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);const n=this.tAt(e,t);return this.tangentAtT(n)}tangentAtLength(e,t={}){if(!this.isDifferentiable())return null;const n=this.tAtLength(e,t);return this.tangentAtT(n)}tangentAtT(e){if(!this.isDifferentiable())return null;e<0&&(e=0),e>1&&(e=1);const t=this.getSkeletonPoints(e),n=t.startControlPoint2,o=t.divider,a=new zr(n,t.dividerControlPoint1);return a.translate(o.x-n.x,o.y-n.y),a}getPrecision(e={}){return e.precision??this.PRECISION}getDivisions(e={}){if(null!=e.subdivisions)return e.subdivisions;const t=this.getPrecision(e);return this.getSubdivisions({precision:t})}getOptions(e={}){return{precision:this.getPrecision(e),subdivisions:this.getDivisions(e)}}tAt(e,t={}){if(e<=0)return 0;if(e>=1)return 1;const n=this.getOptions(t),o=this.length(n)*e;return this.tAtLength(o,n)}tAtLength(e,t={}){let n=!0;e<0&&(n=!1,e=-e);const i=this.getPrecision(t),o=this.getDivisions(t),a={precision:i,subdivisions:o};let u,l,s=null,c=0,f=0,h=0;const d=o.length;let g=d>0?1/d:0;for(let D=0;D<d;D+=1){const L=n?D:d-1-D,O=o[D],Z=O.endpointDistance();if(e<=h+Z){s=O,u=L*g,l=(L+1)*g,c=n?e-h:Z+h-e,f=n?Z+h-e:e-h;break}h+=Z}if(null==s)return n?1:0;const m=this.length(a),_=Math.pow(10,-i);for(;;){let D,L,O;if(D=0!==m?c/m:0,D<_)return u;if(D=0!==m?f/m:0,D<_)return l;const Z=s.divide(.5);g/=2;const le=Z[0].endpointDistance(),pe=Z[1].endpointDistance();c<=le?(s=Z[0],l-=g,L=c,O=le-L):(s=Z[1],u+=g,L=c-le,O=pe-L),c=L,f=O}}toPoints(e={}){const t=this.getDivisions(e),n=[t[0].start.clone()];return t.forEach(i=>n.push(i.end.clone())),n}toPolyline(e={}){return new za(this.toPoints(e))}scale(e,t,n){return this.start.scale(e,t,n),this.controlPoint1.scale(e,t,n),this.controlPoint2.scale(e,t,n),this.end.scale(e,t,n),this}rotate(e,t){return this.start.rotate(e,t),this.controlPoint1.rotate(e,t),this.controlPoint2.rotate(e,t),this.end.rotate(e,t),this}translate(e,t){return"number"==typeof e?(this.start.translate(e,t),this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t)):(this.start.translate(e),this.controlPoint1.translate(e),this.controlPoint2.translate(e),this.end.translate(e)),this}equals(e){return null!=e&&this.start.equals(e.start)&&this.controlPoint1.equals(e.controlPoint1)&&this.controlPoint2.equals(e.controlPoint2)&&this.end.equals(e.end)}clone(){return new Pa(this.start,this.controlPoint1,this.controlPoint2,this.end)}toJSON(){return{start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}serialize(){return[this.start.serialize(),this.controlPoint1.serialize(),this.controlPoint2.serialize(),this.end.serialize()].join(" ")}}(function(r){r.isCurve=function e(t){return null!=t&&t instanceof r}})(Pa||(Pa={})),function(r){function e(i){const o=i.length,a=[],s=[];let u=2;a[0]=i[0]/u;for(let l=1;l<o;l+=1)s[l]=1/u,u=(l<o-1?4:3.5)-s[l],a[l]=(i[l]-a[l-1])/u;for(let l=1;l<o;l+=1)a[o-l-1]-=s[o-l]*a[o-l];return a}r.throughPoints=function n(i){if(null==i||Array.isArray(i)&&i.length<2)throw new Error("At least 2 points are required");const o=function t(i){const o=i.map(h=>Vt.clone(h)),a=[],s=[],u=o.length-1;if(1===u)return a[0]=new Vt((2*o[0].x+o[1].x)/3,(2*o[0].y+o[1].y)/3),s[0]=new Vt(2*a[0].x-o[0].x,2*a[0].y-o[0].y),[a,s];const l=[];for(let h=1;h<u-1;h+=1)l[h]=4*o[h].x+2*o[h+1].x;l[0]=o[0].x+2*o[1].x,l[u-1]=(8*o[u-1].x+o[u].x)/2;const c=e(l);for(let h=1;h<u-1;h+=1)l[h]=4*o[h].y+2*o[h+1].y;l[0]=o[0].y+2*o[1].y,l[u-1]=(8*o[u-1].y+o[u].y)/2;const f=e(l);for(let h=0;h<u;h+=1)a.push(new Vt(c[h],f[h])),s.push(h<u-1?new Vt(2*o[h+1].x-c[h+1],2*o[h+1].y-f[h+1]):new Vt((o[u].x+c[u-1])/2,(o[u].y+f[u-1])/2));return[a,s]}(i),a=[];for(let s=0,u=o[0].length;s<u;s+=1){const l=new Vt(o[0][s].x,o[0][s].y),c=new Vt(o[1][s].x,o[1][s].y);a.push(new r(i[s],l,c,i[s+1]))}return a}}(Pa||(Pa={}));class Nx extends Yd{constructor(){super(...arguments),this.isVisible=!0,this.isSegment=!0,this.isSubpathStart=!1}get end(){return this.endPoint}get start(){if(null==this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path, or segment has not yet been added to a path.)");return this.previousSegment.end}closestPointT(e,t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(e);throw new Error("Neither `closestPointT` nor `closestPointNormalizedLength` method is implemented.")}lengthAtT(e,t){if(e<=0)return 0;const n=this.length();return e>=1?n:n*e}divideAtT(e){if(this.divideAt)return this.divideAt(e);throw new Error("Neither `divideAtT` nor `divideAt` method is implemented.")}pointAtT(e){if(this.pointAt)return this.pointAt(e);throw new Error("Neither `pointAtT` nor `pointAt` method is implemented.")}tangentAtT(e){if(this.tangentAt)return this.tangentAt(e);throw new Error("Neither `tangentAtT` nor `tangentAt` method is implemented.")}}class cu extends Nx{constructor(e,t){super(),this.endPoint=zr.isLine(e)?e.end.clone().round(2):Vt.create(e,t).round(2)}get type(){return"L"}get line(){return new zr(this.start,this.end)}bbox(){return this.line.bbox()}closestPoint(e){return this.line.closestPoint(e)}closestPointLength(e){return this.line.closestPointLength(e)}closestPointNormalizedLength(e){return this.line.closestPointNormalizedLength(e)}closestPointTangent(e){return this.line.closestPointTangent(e)}length(){return this.line.length()}divideAt(e){const t=this.line.divideAt(e);return[new cu(t[0]),new cu(t[1])]}divideAtLength(e){const t=this.line.divideAtLength(e);return[new cu(t[0]),new cu(t[1])]}getSubdivisions(){return[]}pointAt(e){return this.line.pointAt(e)}pointAtLength(e){return this.line.pointAtLength(e)}tangentAt(e){return this.line.tangentAt(e)}tangentAtLength(e){return this.line.tangentAtLength(e)}isDifferentiable(){return null!=this.previousSegment&&!this.start.equals(this.end)}clone(){return new cu(this.end)}scale(e,t,n){return this.end.scale(e,t,n),this}rotate(e,t){return this.end.rotate(e,t),this}translate(e,t){return"number"==typeof e?this.end.translate(e,t):this.end.translate(e),this}equals(e){return this.type===e.type&&this.start.equals(e.start)&&this.end.equals(e.end)}toJSON(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){const e=this.end;return`${this.type} ${e.x} ${e.y}`}}!function(r){r.create=function e(...t){const n=t.length,i=t[0];if(zr.isLine(i))return new r(i);if(Vt.isPointLike(i))return 1===n?new r(i):t.map(a=>new r(a));if(2===n)return new r(+t[0],+t[1]);const o=[];for(let a=0;a<n;a+=2)o.push(new r(+t[a],+t[a+1]));return o}}(cu||(cu={}));class x0 extends Nx{get end(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. MoveTo), or segment has not yet been added to a path.)");return this.subpathStartSegment.end}get type(){return"Z"}get line(){return new zr(this.start,this.end)}bbox(){return this.line.bbox()}closestPoint(e){return this.line.closestPoint(e)}closestPointLength(e){return this.line.closestPointLength(e)}closestPointNormalizedLength(e){return this.line.closestPointNormalizedLength(e)}closestPointTangent(e){return this.line.closestPointTangent(e)}length(){return this.line.length()}divideAt(e){const t=this.line.divideAt(e);return[t[1].isDifferentiable()?new cu(t[0]):this.clone(),new cu(t[1])]}divideAtLength(e){const t=this.line.divideAtLength(e);return[t[1].isDifferentiable()?new cu(t[0]):this.clone(),new cu(t[1])]}getSubdivisions(){return[]}pointAt(e){return this.line.pointAt(e)}pointAtLength(e){return this.line.pointAtLength(e)}tangentAt(e){return this.line.tangentAt(e)}tangentAtLength(e){return this.line.tangentAtLength(e)}isDifferentiable(){return!(!this.previousSegment||!this.subpathStartSegment||this.start.equals(this.end))}scale(){return this}rotate(){return this}translate(){return this}equals(e){return this.type===e.type&&this.start.equals(e.start)&&this.end.equals(e.end)}clone(){return new x0}toJSON(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){return this.type}}!function(r){r.create=function e(){return new r}}(x0||(x0={}));class E0 extends Nx{constructor(e,t){super(),this.isVisible=!1,this.isSubpathStart=!0,this.endPoint=zr.isLine(e)||Pa.isCurve(e)?e.end.clone().round(2):Vt.create(e,t).round(2)}get start(){throw new Error("Illegal access. Moveto segments should not need a start property.")}get type(){return"M"}bbox(){return null}closestPoint(){return this.end.clone()}closestPointLength(){return 0}closestPointNormalizedLength(){return 0}closestPointT(){return 1}closestPointTangent(){return null}length(){return 0}lengthAtT(){return 0}divideAt(){return[this.clone(),this.clone()]}divideAtLength(){return[this.clone(),this.clone()]}getSubdivisions(){return[]}pointAt(){return this.end.clone()}pointAtLength(){return this.end.clone()}pointAtT(){return this.end.clone()}tangentAt(){return null}tangentAtLength(){return null}tangentAtT(){return null}isDifferentiable(){return!1}scale(e,t,n){return this.end.scale(e,t,n),this}rotate(e,t){return this.end.rotate(e,t),this}translate(e,t){return"number"==typeof e?this.end.translate(e,t):this.end.translate(e),this}clone(){return new E0(this.end)}equals(e){return this.type===e.type&&this.end.equals(e.end)}toJSON(){return{type:this.type,end:this.end.toJSON()}}serialize(){const e=this.end;return`${this.type} ${e.x} ${e.y}`}}!function(r){r.create=function e(...t){const n=t.length,i=t[0];if(zr.isLine(i))return new r(i);if(Pa.isCurve(i))return new r(i);if(Vt.isPointLike(i)){if(1===n)return new r(i);const a=[];for(let s=0;s<n;s+=1)a.push(0===s?new r(t[s]):new cu(t[s]));return a}if(2===n)return new r(+t[0],+t[1]);const o=[];for(let a=0;a<n;a+=2){const s=+t[a],u=+t[a+1];o.push(0===a?new r(s,u):new cu(s,u))}return o}}(E0||(E0={}));class Wl extends Nx{constructor(e,t,n,i,o,a){super(),Pa.isCurve(e)?(this.controlPoint1=e.controlPoint1.clone().round(2),this.controlPoint2=e.controlPoint2.clone().round(2),this.endPoint=e.end.clone().round(2)):"number"==typeof e?(this.controlPoint1=new Vt(e,t).round(2),this.controlPoint2=new Vt(n,i).round(2),this.endPoint=new Vt(o,a).round(2)):(this.controlPoint1=Vt.create(e).round(2),this.controlPoint2=Vt.create(t).round(2),this.endPoint=Vt.create(n).round(2))}get type(){return"C"}get curve(){return new Pa(this.start,this.controlPoint1,this.controlPoint2,this.end)}bbox(){return this.curve.bbox()}closestPoint(e){return this.curve.closestPoint(e)}closestPointLength(e){return this.curve.closestPointLength(e)}closestPointNormalizedLength(e){return this.curve.closestPointNormalizedLength(e)}closestPointTangent(e){return this.curve.closestPointTangent(e)}length(){return this.curve.length()}divideAt(e,t={}){const n=this.curve.divideAt(e,t);return[new Wl(n[0]),new Wl(n[1])]}divideAtLength(e,t={}){const n=this.curve.divideAtLength(e,t);return[new Wl(n[0]),new Wl(n[1])]}divideAtT(e){const t=this.curve.divideAtT(e);return[new Wl(t[0]),new Wl(t[1])]}getSubdivisions(){return[]}pointAt(e){return this.curve.pointAt(e)}pointAtLength(e){return this.curve.pointAtLength(e)}tangentAt(e){return this.curve.tangentAt(e)}tangentAtLength(e){return this.curve.tangentAtLength(e)}isDifferentiable(){if(!this.previousSegment)return!1;const t=this.controlPoint1,n=this.controlPoint2,i=this.end;return!(this.start.equals(t)&&t.equals(n)&&n.equals(i))}scale(e,t,n){return this.controlPoint1.scale(e,t,n),this.controlPoint2.scale(e,t,n),this.end.scale(e,t,n),this}rotate(e,t){return this.controlPoint1.rotate(e,t),this.controlPoint2.rotate(e,t),this.end.rotate(e,t),this}translate(e,t){return"number"==typeof e?(this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t)):(this.controlPoint1.translate(e),this.controlPoint2.translate(e),this.end.translate(e)),this}equals(e){return this.start.equals(e.start)&&this.end.equals(e.end)&&this.controlPoint1.equals(e.controlPoint1)&&this.controlPoint2.equals(e.controlPoint2)}clone(){return new Wl(this.controlPoint1,this.controlPoint2,this.end)}toJSON(){return{type:this.type,start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}serialize(){const e=this.controlPoint1,t=this.controlPoint2,n=this.end;return[this.type,e.x,e.y,t.x,t.y,n.x,n.y].join(" ")}}function Lx(r,e,t){return{x:r*Math.cos(t)-e*Math.sin(t),y:r*Math.sin(t)+e*Math.cos(t)}}function Q4(r,e,t,n,i,o){const a=.3333333333333333,s=2/3;return[a*r+s*t,a*e+s*n,a*i+s*t,a*o+s*n,i,o]}function J4(r,e,t,n,i,o,a,s,u,l){const c=120*Math.PI/180,f=Math.PI/180*(+i||0);let d,g,m,_,D,h=[];if(l)g=l[0],m=l[1],_=l[2],D=l[3];else{d=Lx(r,e,-f),r=d.x,e=d.y,d=Lx(s,u,-f);const Cn=(r-(s=d.x))/2,Tt=(e-(u=d.y))/2;let kt=Cn*Cn/(t*t)+Tt*Tt/(n*n);kt>1&&(kt=Math.sqrt(kt),t*=kt,n*=kt);const Ln=t*t,Kn=n*n,mn=(o===a?-1:1)*Math.sqrt(Math.abs((Ln*Kn-Ln*Tt*Tt-Kn*Cn*Cn)/(Ln*Tt*Tt+Kn*Cn*Cn)));_=mn*t*Tt/n+(r+s)/2,D=mn*-n*Cn/t+(e+u)/2,g=Math.asin((e-D)/n),m=Math.asin((u-D)/n),g=r<_?Math.PI-g:g,m=s<_?Math.PI-m:m,g<0&&(g=2*Math.PI+g),m<0&&(m=2*Math.PI+m),a&&g>m&&(g-=2*Math.PI),!a&&m>g&&(m-=2*Math.PI)}let L=m-g;if(Math.abs(L)>c){const Cn=m,Tt=s,kt=u;m=g+c*(a&&m>g?1:-1),h=J4(s=_+t*Math.cos(m),u=D+n*Math.sin(m),t,n,i,0,a,Tt,kt,[m,Cn,_,D])}L=m-g;const O=Math.cos(g),Z=Math.sin(g),le=Math.cos(m),pe=Math.sin(m),Ee=Math.tan(L/4),Re=4/3*(t*Ee),Ve=4/3*(n*Ee),Ue=[r,e],at=[r+Re*Z,e-Ve*O],_t=[s+Re*pe,u-Ve*le],vn=[s,u];if(at[0]=2*Ue[0]-at[0],at[1]=2*Ue[1]-at[1],l)return[at,_t,vn].concat(h);{h=[at,_t,vn].concat(h).join().split(",");const Cn=[],Tt=h.length;for(let kt=0;kt<Tt;kt+=1)Cn[kt]=kt%2?Lx(+h[kt-1],+h[kt],f).y:Lx(+h[kt],+h[kt+1],f).x;return Cn}}function rbe(r){const e=function nbe(r){const e=function tbe(r){if(!r)return null;const e="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029",t=new RegExp(`([a-z])[${e},]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[${e}]*,?[${e}]*)+)`,"ig"),n=new RegExp(`(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[${e}]*,?[${e}]*`,"ig"),i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},o=[];return r.replace(t,(a,s,u)=>{const l=[];let c=s.toLowerCase();u.replace(n,(h,d)=>(d&&l.push(+d),h)),"m"===c&&l.length>2&&(o.push([s,...l.splice(0,2)]),c="l",s="m"===s?"l":"L");const f=i[c];for(;l.length>=f&&(o.push([s,...l.splice(0,f)]),f););return a}),o}(r);if(!e||!e.length)return[["M",0,0]];let t=0,n=0,i=0,o=0;const a=[];for(let s=0,u=e.length;s<u;s+=1){const l=[];a.push(l);const c=e[s],f=c[0];if(f!==f.toUpperCase())switch(l[0]=f.toUpperCase(),l[0]){case"A":l[1]=c[1],l[2]=c[2],l[3]=c[3],l[4]=c[4],l[5]=c[5],l[6]=+c[6]+t,l[7]=+c[7]+n;break;case"V":l[1]=+c[1]+n;break;case"H":l[1]=+c[1]+t;break;case"M":i=+c[1]+t,o=+c[2]+n;for(let h=1,d=c.length;h<d;h+=1)l[h]=+c[h]+(h%2?t:n);break;default:for(let h=1,d=c.length;h<d;h+=1)l[h]=+c[h]+(h%2?t:n)}else for(let h=0,d=c.length;h<d;h+=1)l[h]=c[h];switch(l[0]){case"Z":t=+i,n=+o;break;case"H":t=l[1];break;case"V":n=l[1];break;case"M":i=l[l.length-2],o=l[l.length-1],t=l[l.length-2],n=l[l.length-1];break;default:t=l[l.length-2],n=l[l.length-1]}}return a}(r),t={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function n(u,l,c){let f,h;if(!u)return["C",l.x,l.y,l.x,l.y,l.x,l.y];switch(u[0]in{T:1,Q:1}||(l.qx=null,l.qy=null),u[0]){case"M":l.X=u[1],l.Y=u[2];break;case"A":return 0===parseFloat(u[1])||0===parseFloat(u[2])?["L",u[6],u[7]]:["C"].concat(J4.apply(0,[l.x,l.y].concat(u.slice(1))));case"S":return"C"===c||"S"===c?(f=2*l.x-l.bx,h=2*l.y-l.by):(f=l.x,h=l.y),["C",f,h].concat(u.slice(1));case"T":return"Q"===c||"T"===c?(l.qx=2*l.x-l.qx,l.qy=2*l.y-l.qy):(l.qx=l.x,l.qy=l.y),["C"].concat(Q4(l.x,l.y,l.qx,l.qy,u[1],u[2]));case"Q":return l.qx=u[1],l.qy=u[2],["C"].concat(Q4(l.x,l.y,u[1],u[2],u[3],u[4]));case"H":return["L"].concat(u[1],l.y);case"V":return["L"].concat(l.x,u[1])}return u}function i(u,l){if(u[l].length>7){u[l].shift();const c=u[l];for(;c.length;)o[l]="A",u.splice(l+=1,0,["C"].concat(c.splice(0,6)));u.splice(l,1),s=e.length}}const o=[];let a="",s=e.length;for(let u=0;u<s;u+=1){let l="";e[u]&&(l=e[u][0]),"C"!==l&&(o[u]=l,u>0&&(a=o[u-1])),e[u]=n(e[u],t,a),"A"!==o[u]&&"C"===l&&(o[u]="C"),i(e,u);const c=e[u],f=c.length;t.x=c[f-2],t.y=c[f-1],t.bx=parseFloat(c[f-4])||t.x,t.by=parseFloat(c[f-3])||t.y}return(!e[0][0]||"M"!==e[0][0])&&e.unshift(["M",0,0]),e}function ibe(r){return rbe(r).map(e=>e.map(t=>"string"==typeof t?t:Yo.round(t,2))).join(",").split(",").join(" ")}!function(r){r.create=function e(...t){const n=t.length,i=t[0];if(Pa.isCurve(i))return new r(i);if(Vt.isPointLike(i)){if(3===n)return new r(t[0],t[1],t[2]);const a=[];for(let s=0;s<n;s+=3)a.push(new r(t[s],t[s+1],t[s+2]));return a}if(6===n)return new r(t[0],t[1],t[2],t[3],t[4],t[5]);const o=[];for(let a=0;a<n;a+=6)o.push(new r(t[a],t[a+1],t[a+2],t[a+3],t[a+4],t[a+5]));return o}}(Wl||(Wl={}));class oi extends Yd{constructor(e){if(super(),this.PRECISION=3,this.segments=[],Array.isArray(e))if(zr.isLine(e[0])||Pa.isCurve(e[0])){let t=null;e.forEach((i,o)=>{0===o&&this.appendSegment(oi.createSegment("M",i.start)),null!=t&&!t.end.equals(i.start)&&this.appendSegment(oi.createSegment("M",i.start)),zr.isLine(i)?this.appendSegment(oi.createSegment("L",i.end)):Pa.isCurve(i)&&this.appendSegment(oi.createSegment("C",i.controlPoint1,i.controlPoint2,i.end)),t=i})}else e.forEach(n=>{n.isSegment&&this.appendSegment(n)});else null!=e&&(zr.isLine(e)?(this.appendSegment(oi.createSegment("M",e.start)),this.appendSegment(oi.createSegment("L",e.end))):Pa.isCurve(e)?(this.appendSegment(oi.createSegment("M",e.start)),this.appendSegment(oi.createSegment("C",e.controlPoint1,e.controlPoint2,e.end))):za.isPolyline(e)?e.points&&e.points.length&&e.points.forEach((t,n)=>{const i=oi.createSegment(0===n?"M":"L",t);this.appendSegment(i)}):e.isSegment&&this.appendSegment(e))}get start(){const e=this.segments,t=e.length;if(0===t)return null;for(let n=0;n<t;n+=1){const i=e[n];if(i.isVisible)return i.start}return e[t-1].end}get end(){const e=this.segments,t=e.length;if(0===t)return null;for(let n=t-1;n>=0;n-=1){const i=e[n];if(i.isVisible)return i.end}return e[t-1].end}moveTo(...e){return this.appendSegment(E0.create.call(null,...e))}lineTo(...e){return this.appendSegment(cu.create.call(null,...e))}curveTo(...e){return this.appendSegment(Wl.create.call(null,...e))}arcTo(e,t,n,i,o,a,s){const u=this.end||new Vt,l="number"==typeof a?Px(u.x,u.y,e,t,n,i,o,a,s):Px(u.x,u.y,e,t,n,i,o,a.x,a.y);if(null!=l)for(let c=0,f=l.length;c<f;c+=6)this.curveTo(l[c],l[c+1],l[c+2],l[c+3],l[c+4],l[c+5]);return this}quadTo(e,t,n,i){const o=this.end||new Vt,a=["M",o.x,o.y];"number"==typeof e?a.push("Q",e,t,n,i):a.push("Q",e.x,e.y,t.x,t.y);const s=oi.parse(a.join(" "));return this.appendSegment(s.segments.slice(1)),this}close(){return this.appendSegment(x0.create())}drawPoints(e,t={}){const n=Z4(e,t),i=oi.parse(n);i&&i.segments&&this.appendSegment(i.segments)}bbox(){const e=this.segments,t=e.length;if(0===t)return null;let n;for(let o=0;o<t;o+=1){const a=e[o];if(a.isVisible){const s=a.bbox();null!=s&&(n=n?n.union(s):s)}}if(null!=n)return n;const i=e[t-1];return new _r(i.end.x,i.end.y,0,0)}appendSegment(e){const t=this.segments.length;let i,n=0!==t?this.segments[t-1]:null;if(Array.isArray(e))for(let a=0,s=e.length;a<s;a+=1)i=this.prepareSegment(e[a],n,null),this.segments.push(i),n=i;else null!=e&&e.isSegment&&(i=this.prepareSegment(e,n,null),this.segments.push(i));return this}insertSegment(e,t){const n=this.segments.length;if(e<0&&(e=n+e+1),e>n||e<0)throw new Error("Index out of range.");let i,o=null,a=null;if(0!==n&&(e>=1?(o=this.segments[e-1],a=o.nextSegment):(o=null,a=this.segments[0])),Array.isArray(t))for(let s=0,u=t.length;s<u;s+=1)i=this.prepareSegment(t[s],o,a),this.segments.splice(e+s,0,i),o=i;else i=this.prepareSegment(t,o,a),this.segments.splice(e,0,i);return this}removeSegment(e){const t=this.fixIndex(e),n=this.segments.splice(t,1)[0],i=n.previousSegment,o=n.nextSegment;return i&&(i.nextSegment=o),o&&(o.previousSegment=i),n.isSubpathStart&&o&&this.updateSubpathStartSegment(o),n}replaceSegment(e,t){const n=this.fixIndex(e);let i;const o=this.segments[n];let a=o.previousSegment;const s=o.nextSegment;let u=o.isSubpathStart;if(Array.isArray(t)){this.segments.splice(e,1);for(let l=0,c=t.length;l<c;l+=1)i=this.prepareSegment(t[l],a,s),this.segments.splice(e+l,0,i),a=i,u&&i.isSubpathStart&&(u=!1)}else i=this.prepareSegment(t,a,s),this.segments.splice(n,1,i),u&&i.isSubpathStart&&(u=!1);u&&s&&this.updateSubpathStartSegment(s)}getSegment(e){const t=this.fixIndex(e);return this.segments[t]}fixIndex(e){const t=this.segments.length;if(0===t)throw new Error("Path has no segments.");let n=e;for(;n<0;)n=t+n;if(n>=t||n<0)throw new Error("Index out of range.");return n}segmentAt(e,t={}){const n=this.segmentIndexAt(e,t);return n?this.getSegment(n):null}segmentAtLength(e,t={}){const n=this.segmentIndexAtLength(e,t);return n?this.getSegment(n):null}segmentIndexAt(e,t={}){if(0===this.segments.length)return null;const n=Yo.clamp(e,0,1),i=this.getOptions(t),a=this.length(i)*n;return this.segmentIndexAtLength(a,i)}segmentIndexAtLength(e,t={}){const n=this.segments.length;if(0===n)return null;let i=!0;e<0&&(i=!1,e=-e);const o=this.getPrecision(t),a=this.getSubdivisions(t);let s=0,u=null;for(let l=0;l<n;l+=1){const c=i?l:n-1-l,f=this.segments[c],d=f.length({precision:o,subdivisions:a[c]});if(f.isVisible){if(e<=s+d)return c;u=c}s+=d}return u}getSegmentSubdivisions(e={}){const t=this.getPrecision(e),n=[];for(let i=0,o=this.segments.length;i<o;i+=1){const s=this.segments[i].getSubdivisions({precision:t});n.push(s)}return n}updateSubpathStartSegment(e){let t=e.previousSegment,n=e;for(;n&&!n.isSubpathStart;)n.subpathStartSegment=null!=t?t.subpathStartSegment:null,t=n,n=n.nextSegment}prepareSegment(e,t,n){e.previousSegment=t,e.nextSegment=n,null!=t&&(t.nextSegment=e),null!=n&&(n.previousSegment=e);let i=e;return e.isSubpathStart&&(e.subpathStartSegment=e,i=n),null!=i&&this.updateSubpathStartSegment(i),e}closestPoint(e,t={}){const n=this.closestPointT(e,t);return n?this.pointAtT(n):null}closestPointLength(e,t={}){const n=this.getOptions(t),i=this.closestPointT(e,n);return i?this.lengthAtT(i,n):0}closestPointNormalizedLength(e,t={}){const n=this.getOptions(t),i=this.closestPointLength(e,n);if(0===i)return 0;const o=this.length(n);return 0===o?0:i/o}closestPointT(e,t={}){if(0===this.segments.length)return null;const n=this.getPrecision(t),i=this.getSubdivisions(t);let o,a=1/0;for(let s=0,u=this.segments.length;s<u;s+=1){const l=this.segments[s],c=i[s];if(l.isVisible){const f=l.closestPointT(e,{precision:n,subdivisions:c}),h=l.pointAtT(f),d=Yo.squaredLength(h,e);d<a&&(o={segmentIndex:s,value:f},a=d)}}return o||{segmentIndex:this.segments.length-1,value:1}}closestPointTangent(e,t={}){if(0===this.segments.length)return null;const n=this.getPrecision(t),i=this.getSubdivisions(t);let o,a=1/0;for(let s=0,u=this.segments.length;s<u;s+=1){const l=this.segments[s],c=i[s];if(l.isDifferentiable()){const f=l.closestPointT(e,{precision:n,subdivisions:c}),h=l.pointAtT(f),d=Yo.squaredLength(h,e);d<a&&(o=l.tangentAtT(f),a=d)}}return o||null}containsPoint(e,t={}){const n=this.toPolylines(t);if(!n)return!1;let i=0;for(let o=0,a=n.length;o<a;o+=1)n[o].containsPoint(e)&&(i+=1);return i%2==1}pointAt(e,t={}){if(0===this.segments.length)return null;if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();const n=this.getOptions(t),o=this.length(n)*e;return this.pointAtLength(o,n)}pointAtLength(e,t={}){if(0===this.segments.length)return null;if(0===e)return this.start.clone();let n=!0;e<0&&(n=!1,e=-e);const i=this.getPrecision(t),o=this.getSubdivisions(t);let a,s=0;for(let l=0,c=this.segments.length;l<c;l+=1){const f=n?l:c-1-l,h=this.segments[f],d=o[f],g=h.length({precision:i,subdivisions:d});if(h.isVisible){if(e<=s+g)return h.pointAtLength((n?1:-1)*(e-s),{precision:i,subdivisions:d});a=h}s+=g}return a?n?a.end:a.start:this.segments[this.segments.length-1].end.clone()}pointAtT(e){const t=this.segments,n=t.length;if(0===n)return null;const i=e.segmentIndex;if(i<0)return t[0].pointAtT(0);if(i>=n)return t[n-1].pointAtT(1);const o=Yo.clamp(e.value,0,1);return t[i].pointAtT(o)}divideAt(e,t={}){if(0===this.segments.length)return null;const n=Yo.clamp(e,0,1),i=this.getOptions(t),a=this.length(i)*n;return this.divideAtLength(a,i)}divideAtLength(e,t={}){if(0===this.segments.length)return null;let n=!0;e<0&&(n=!1,e=-e);const i=this.getPrecision(t),o=this.getSubdivisions(t);let s,u,l,c,f,a=0;for(let le=0,pe=this.segments.length;le<pe;le+=1){const Ee=n?le:pe-1-le,Re=this.getSegment(Ee),Ue={precision:i,subdivisions:o[Ee]},at=Re.length(Ue);if(Re.isDifferentiable()&&(l=Re,c=Ee,e<=a+at)){u=Ee,s=Re.divideAtLength((n?1:-1)*(e-a),Ue);break}a+=at}if(!l)return null;s||(u=c,f=n?1:0,s=l.divideAtT(f));const h=this.clone(),d=u;h.replaceSegment(d,s);const g=d;let m=d+1,_=d+2;s[0].isDifferentiable()||(h.removeSegment(g),m-=1,_-=1);const D=h.getSegment(m).start;h.insertSegment(m,oi.createSegment("M",D)),_+=1,s[1].isDifferentiable()||(h.removeSegment(_-1),_-=1);const L=_-g-1;for(let le=_,pe=h.segments.length;le<pe;le+=1){const Ee=this.getSegment(le-L),Re=h.getSegment(le);if("Z"===Re.type&&!Ee.subpathStartSegment.end.equals(Re.subpathStartSegment.end)){const Ve=oi.createSegment("L",Ee.end);h.replaceSegment(le,Ve)}}return[new oi(h.segments.slice(0,m)),new oi(h.segments.slice(m))]}intersectsWithLine(e,t={}){const n=this.toPolylines(t);if(null==n)return null;let i=null;for(let o=0,a=n.length;o<a;o+=1){const u=e.intersect(n[o]);u&&(null==i&&(i=[]),Array.isArray(u)?i.push(...u):i.push(u))}return i}isDifferentiable(){for(let e=0,t=this.segments.length;e<t;e+=1)if(this.segments[e].isDifferentiable())return!0;return!1}isValid(){const e=this.segments;return 0===e.length||"M"===e[0].type}length(e={}){if(0===this.segments.length)return 0;const t=this.getSubdivisions(e);let n=0;for(let i=0,o=this.segments.length;i<o;i+=1)n+=this.segments[i].length({subdivisions:t[i]});return n}lengthAtT(e,t={}){const n=this.segments.length;if(0===n)return 0;let i=e.segmentIndex;if(i<0)return 0;let o=Yo.clamp(e.value,0,1);i>=n&&(i=n-1,o=1);const a=this.getPrecision(t),s=this.getSubdivisions(t);let u=0;for(let f=0;f<i;f+=1)u+=this.segments[f].length({precision:a,subdivisions:s[f]});return u+=this.segments[i].lengthAtT(o,{precision:a,subdivisions:s[i]}),u}tangentAt(e,t={}){if(0===this.segments.length)return null;const n=Yo.clamp(e,0,1),i=this.getOptions(t),a=this.length(i)*n;return this.tangentAtLength(a,i)}tangentAtLength(e,t={}){if(0===this.segments.length)return null;let n=!0;e<0&&(n=!1,e=-e);const i=this.getPrecision(t),o=this.getSubdivisions(t);let a,s=0;for(let u=0,l=this.segments.length;u<l;u+=1){const c=n?u:l-1-u,f=this.segments[c],h=o[c],d=f.length({precision:i,subdivisions:h});if(f.isDifferentiable()){if(e<=s+d)return f.tangentAtLength((n?1:-1)*(e-s),{precision:i,subdivisions:h});a=f}s+=d}return a?a.tangentAtT(n?1:0):null}tangentAtT(e){const t=this.segments.length;if(0===t)return null;const n=e.segmentIndex;if(n<0)return this.segments[0].tangentAtT(0);if(n>=t)return this.segments[t-1].tangentAtT(1);const i=Yo.clamp(e.value,0,1);return this.segments[n].tangentAtT(i)}getPrecision(e={}){return e.precision??this.PRECISION}getSubdivisions(e={}){if(null==e.segmentSubdivisions){const t=this.getPrecision(e);return this.getSegmentSubdivisions({precision:t})}return e.segmentSubdivisions}getOptions(e={}){return{precision:this.getPrecision(e),segmentSubdivisions:this.getSubdivisions(e)}}toPoints(e={}){const t=this.segments,n=t.length;if(0===n)return null;const i=this.getSubdivisions(e),o=[];let a=[];for(let s=0;s<n;s+=1){const u=t[s];if(u.isVisible){const l=i[s];l.length>0?l.forEach(c=>a.push(c.start)):a.push(u.start)}else a.length>0&&(a.push(t[s-1].end),o.push(a),a=[])}return a.length>0&&(a.push(this.end),o.push(a)),o}toPolylines(e={}){const t=this.toPoints(e);return t?t.map(n=>new za(n)):null}scale(e,t,n){return this.segments.forEach(i=>i.scale(e,t,n)),this}rotate(e,t){return this.segments.forEach(n=>n.rotate(e,t)),this}translate(e,t){return this.segments.forEach("number"==typeof e?n=>n.translate(e,t):n=>n.translate(e)),this}clone(){const e=new oi;return this.segments.forEach(t=>e.appendSegment(t.clone())),e}equals(e){if(null==e)return!1;const t=this.segments,n=e.segments,i=t.length;if(n.length!==i)return!1;for(let o=0;o<i;o+=1){const a=t[o],s=n[o];if(a.type!==s.type||!a.equals(s))return!1}return!0}toJSON(){return this.segments.map(e=>e.toJSON())}serialize(){if(!this.isValid())throw new Error("Invalid path segments.");return this.segments.map(e=>e.serialize()).join(" ")}toString(){return this.serialize()}}(function(r){r.isPath=function e(t){return null!=t&&t instanceof r}})(oi||(oi={})),function(r){function t(n,...i){if("M"===n)return E0.create.call(null,...i);if("L"===n)return cu.create.call(null,...i);if("C"===n)return Wl.create.call(null,...i);if("z"===n||"Z"===n)return x0.create();throw new Error(`Invalid path segment type "${n}"`)}r.parse=function e(n){if(!n)return new r;const i=new r,a=r.normalize(n).match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g);if(null!=a)for(let s=0,u=a.length;s<u;s+=1){const f=a[s].match(/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g);if(null!=f){const h=f[0],d=f.slice(1).map(m=>+m),g=t.call(null,h,...d);i.appendSegment(g)}}return i},r.createSegment=t}(oi||(oi={})),function(r){r.normalize=ibe,r.isValid=Qye,r.drawArc=ebe,r.drawPoints=Z4,r.arcToCurves=Px}(oi||(oi={}));class Ga{constructor(e){this.options=Object.assign({},e),this.data=this.options.data||{},this.register=this.register.bind(this),this.unregister=this.unregister.bind(this)}get names(){return Object.keys(this.data)}register(e,t,n=!1){if("object"==typeof e)return void Object.keys(e).forEach(a=>{this.register(a,e[a],t)});this.exist(e)&&!n&&!Vd.isApplyingHMR()&&this.onDuplicated(e);const i=this.options.process,o=i?Ti(i,this,e,t):t;return this.data[e]=o,o}unregister(e){const t=e?this.data[e]:null;return delete this.data[e],t}get(e){return e?this.data[e]:null}exist(e){return!!e&&null!=this.data[e]}onDuplicated(e){try{throw this.options.onConflict&&Ti(this.options.onConflict,this,e),new Error(`${Vy(this.options.type)} with name '${e}' already registered.`)}catch(t){throw t}}onNotFound(e,t){throw new Error(this.getSpellingSuggestion(e,t))}getSpellingSuggestion(e,t){const n=this.getSpellingSuggestionForName(e),i=t?`${t} ${qme(this.options.type)}`:this.options.type;return`${Vy(i)} with name '${e}' does not exist.${n?` Did you mean '${n}'?`:""}`}getSpellingSuggestionForName(e){return function Kme(r,e,t){const n=Math.min(2,Math.floor(.34*r.length));let o,i=Math.floor(.4*r.length)+1,a=!1;const s=r.toLowerCase();for(const u of e){const l=t(u);if(void 0!==l&&Math.abs(l.length-s.length)<=n){const c=l.toLowerCase();if(c===s){if(l===r)continue;return u}if(a||l.length<3)continue;const f=Zme(s,c,i-1);if(void 0===f)continue;f<3?(a=!0,o=u):(i=f,o=u)}}return o}(e,Object.keys(this.data),t=>t)}}!function(r){r.create=function e(t){return new r(t)}}(Ga||(Ga={}));const obe={color:"#aaaaaa",thickness:1,markup:"rect",update(r,e){const t=e.thickness*e.sx,n=e.thickness*e.sy;$o(r,{width:t,height:n,rx:t,ry:n,fill:e.color})}},abe={color:"#aaaaaa",thickness:1,markup:"rect",update(r,e){const t=e.sx<=1?e.thickness*e.sx:e.thickness;$o(r,{width:t,height:t,rx:t,ry:t,fill:e.color})}},sbe={color:"rgba(224,224,224,1)",thickness:1,markup:"path",update(r,e){let t;const n=e.width,i=e.height,o=e.thickness;t=n-o>=0&&i-o>=0?["M",n,0,"H0 M0 0 V0",i].join(" "):"M 0 0 0 0",$o(r,{d:t,stroke:e.color,"stroke-width":e.thickness})}},ube=[{color:"rgba(224,224,224,1)",thickness:1,markup:"path",update(r,e){let t;const n=e.width,i=e.height,o=e.thickness;t=n-o>=0&&i-o>=0?["M",n,0,"H0 M0 0 V0",i].join(" "):"M 0 0 0 0",$o(r,{d:t,stroke:e.color,"stroke-width":e.thickness})}},{color:"rgba(224,224,224,0.2)",thickness:3,factor:4,markup:"path",update(r,e){let t;const n=e.factor||1,i=e.width*n,o=e.height*n,a=e.thickness;t=i-a>=0&&o-a>=0?["M",i,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",e.width=i,e.height=o,$o(r,{d:t,stroke:e.color,"stroke-width":e.thickness})}}];class Xd{constructor(){this.patterns={},this.root=Ai.create(Ex(),{width:"100%",height:"100%"},[Uh("defs")]).node}add(e,t){const n=this.root.childNodes[0];n&&n.appendChild(t),this.patterns[e]=t,Ai.create("rect",{width:"100%",height:"100%",fill:`url(#${e})`}).appendTo(this.root)}get(e){return this.patterns[e]}has(e){return null!=this.patterns[e]}}!function(r){r.presets=U,r.registry=Ga.create({type:"grid"}),r.registry.register(r.presets,!0)}(Xd||(Xd={}));const e6=function(r){const e=document.createElement("canvas"),t=r.width,n=r.height;e.width=2*t,e.height=n;const i=e.getContext("2d");return i.drawImage(r,0,0,t,n),i.translate(2*t,0),i.scale(-1,1),i.drawImage(r,0,0,t,n),e},t6=function(r){const e=document.createElement("canvas"),t=r.width,n=r.height;e.width=t,e.height=2*n;const i=e.getContext("2d");return i.drawImage(r,0,0,t,n),i.translate(0,2*n),i.scale(1,-1),i.drawImage(r,0,0,t,n),e},n6=function(r){const e=document.createElement("canvas"),t=r.width,n=r.height;e.width=2*t,e.height=2*n;const i=e.getContext("2d");return i.drawImage(r,0,0,t,n),i.setTransform(-1,0,0,-1,e.width,e.height),i.drawImage(r,0,0,t,n),i.setTransform(-1,0,0,1,e.width,0),i.drawImage(r,0,0,t,n),i.setTransform(1,0,0,-1,0,e.height),i.drawImage(r,0,0,t,n),e},lbe=function(r,e){const t=r.width,n=r.height,i=document.createElement("canvas");i.width=3*t,i.height=3*n;const o=i.getContext("2d"),s=oa.toRad(null!=e.angle?-e.angle:-20),u=i.width/4,l=i.height/4;for(let c=0;c<4;c+=1)for(let f=0;f<4;f+=1)(c+f)%2>0&&(o.setTransform(1,0,0,1,(2*c-1)*u,(2*f-1)*l),o.rotate(s),o.drawImage(r,-t/2,-n/2,t,n));return i};var ib,_0;function $A(r,e){return r??e}function Ls(r,e){return null!=r&&Number.isFinite(r)?r:e}function cbe(r={}){const e=$A(r.color,"blue"),t=Ls(r.width,1),n=Ls(r.margin,2);return`\n    <filter>\n      <feFlood flood-color="${e}" flood-opacity="${Ls(r.opacity,1)}" result="colored"/>\n      <feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${n+t}" />\n      <feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${n}" />\n      <feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/>\n      <feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/>\n      <feMerge>\n        <feMergeNode in="outline"/>\n        <feMergeNode in="SourceGraphic"/>\n      </feMerge>\n    </filter>\n  `.trim()}function fbe(r={}){const e=$A(r.color,"red"),t=Ls(r.blur,0),n=Ls(r.width,1);return`\n      <filter>\n        <feFlood flood-color="${e}" flood-opacity="${Ls(r.opacity,1)}" result="colored"/>\n        <feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${n}"/>\n        <feComposite result="composed" in="colored" in2="morphed" operator="in"/>\n        <feGaussianBlur result="blured" in="composed" stdDeviation="${t}"/>\n        <feBlend in="SourceGraphic" in2="blured" mode="normal"/>\n      </filter>\n    `.trim()}function hbe(r={}){const e=Ls(r.x,2);return`\n    <filter>\n      <feGaussianBlur stdDeviation="${null!=r.y&&Number.isFinite(r.y)?[e,r.y]:e}"/>\n    </filter>\n  `.trim()}function dbe(r={}){const e=Ls(r.dx,0),t=Ls(r.dy,0),n=$A(r.color,"black"),i=Ls(r.blur,4),o=Ls(r.opacity,1);return"SVGFEDropShadowElement"in window?`<filter>\n         <feDropShadow stdDeviation="${i}" dx="${e}" dy="${t}" flood-color="${n}" flood-opacity="${o}" />\n       </filter>`.trim():`<filter>\n         <feGaussianBlur in="SourceAlpha" stdDeviation="${i}" />\n         <feOffset dx="${e}" dy="${t}" result="offsetblur" />\n         <feFlood flood-color="${n}" />\n         <feComposite in2="offsetblur" operator="in" />\n         <feComponentTransfer>\n           <feFuncA type="linear" slope="${o}" />\n         </feComponentTransfer>\n         <feMerge>\n           <feMergeNode/>\n           <feMergeNode in="SourceGraphic"/>\n         </feMerge>\n       </filter>`.trim()}function gbe(r={}){const e=Ls(r.amount,1),n=.7152-.7152*(1-e);return`\n    <filter>\n      <feColorMatrix type="matrix" values="${.2126+.7874*(1-e)} ${n} ${.0722-.0722*(1-e)} 0 0 ${.2126-.2126*(1-e)} ${.7152+.2848*(1-e)} ${.0722-.0722*(1-e)} 0 0 ${.2126-.2126*(1-e)} ${n} ${.0722+.9278*(1-e)} 0 0 0 0 0 1 0"/>\n    </filter>\n  `.trim()}function pbe(r={}){const e=Ls(r.amount,1);return`\n      <filter>\n        <feColorMatrix type="matrix" values="${.393+.607*(1-e)} ${.769-.769*(1-e)} ${.189-.189*(1-e)} 0 0 ${.349-.349*(1-e)} ${.686+.314*(1-e)} ${.168-.168*(1-e)} 0 0 ${.272-.272*(1-e)} ${.534-.534*(1-e)} ${.131+.869*(1-e)} 0 0 0 0 0 1 0"/>\n      </filter>\n    `.trim()}function vbe(r={}){return`\n      <filter>\n        <feColorMatrix type="saturate" values="${1-Ls(r.amount,1)}"/>\n      </filter>\n    `.trim()}function mbe(r={}){return`\n      <filter>\n        <feColorMatrix type="hueRotate" values="${Ls(r.angle,0)}"/>\n      </filter>\n    `.trim()}function ybe(r={}){const e=Ls(r.amount,1),t=1-e;return`\n      <filter>\n        <feComponentTransfer>\n          <feFuncR type="table" tableValues="${e} ${t}"/>\n          <feFuncG type="table" tableValues="${e} ${t}"/>\n          <feFuncB type="table" tableValues="${e} ${t}"/>\n        </feComponentTransfer>\n      </filter>\n    `.trim()}function bbe(r={}){const e=Ls(r.amount,1);return`\n    <filter>\n      <feComponentTransfer>\n        <feFuncR type="linear" slope="${e}"/>\n        <feFuncG type="linear" slope="${e}"/>\n        <feFuncB type="linear" slope="${e}"/>\n      </feComponentTransfer>\n    </filter>\n  `.trim()}function wbe(r={}){const e=Ls(r.amount,1),t=.5-e/2;return`\n    <filter>\n     <feComponentTransfer>\n        <feFuncR type="linear" slope="${e}" intercept="${t}"/>\n        <feFuncG type="linear" slope="${e}" intercept="${t}"/>\n        <feFuncB type="linear" slope="${e}" intercept="${t}"/>\n      </feComponentTransfer>\n    </filter>\n  `.trim()}!function(r){r.presets=Object.assign({},z),r.presets["flip-x"]=e6,r.presets["flip-y"]=t6,r.presets["flip-xy"]=n6,r.registry=Ga.create({type:"background pattern"}),r.registry.register(r.presets,!0)}(ib||(ib={})),function(r){r.presets=ie,r.registry=Ga.create({type:"filter"}),r.registry.register(r.presets,!0)}(_0||(_0={}));const xbe={xlinkHref:"xlink:href",xlinkShow:"xlink:show",xlinkRole:"xlink:role",xlinkType:"xlink:type",xlinkArcrole:"xlink:arcrole",xlinkTitle:"xlink:title",xlinkActuate:"xlink:actuate",xmlSpace:"xml:space",xmlBase:"xml:base",xmlLang:"xml:lang",preserveAspectRatio:"preserveAspectRatio",requiredExtension:"requiredExtension",requiredFeatures:"requiredFeatures",systemLanguage:"systemLanguage",externalResourcesRequired:"externalResourceRequired"},Ebe={},r6={position:kx("x","width","origin")},i6={position:kx("y","height","origin")},_be={position:kx("x","width","corner")},Sbe={position:kx("y","height","corner")},o6={set:qd("width","width")},a6={set:qd("height","height")},Mbe={set:qd("rx","width")},Cbe={set:qd("ry","height")},s6={set:(r=>{const e=qd("r","width"),t=qd("r","height");return function(n,i){const o=i.refBBox;return Ti(o.height>o.width?e:t,this,n,i)}})()},Abe={set(r,{refBBox:e}){let t=parseFloat(r);const n=zh(r);n&&(t/=100);const i=Math.sqrt(e.height*e.height+e.width*e.width);let o;return Number.isFinite(t)&&(o=n||t>=0&&t<=1?t*i:Math.max(t+i,0)),{r:o}}},Dbe={set:qd("cx","width")},Tbe={set:qd("cy","height")},u6={set:f6({resetOffset:!0})},Ibe={set:f6({resetOffset:!1})},l6={set:h6({resetOffset:!0})},Obe={set:h6({resetOffset:!1})},Pbe=s6,Nbe=u6,Lbe=l6,kbe=r6,Rbe=i6,Fbe=o6,Bbe=a6;function kx(r,e,t){return(n,{refBBox:i})=>{if(null==n)return null;let o=parseFloat(n);const a=zh(n);let s;if(a&&(o/=100),Number.isFinite(o)){const l=i[t];s=a||o>0&&o<1?l[r]+i[e]*o:l[r]+o}const u=new Vt;return u[r]=s||0,u}}function qd(r,e){return function(t,{refBBox:n}){let i=parseFloat(t);const o=zh(t);o&&(i/=100);const a={};if(Number.isFinite(i)){const s=o||i>=0&&i<=1?i*n[e]:Math.max(i+n[e],0);a[r]=s}return a}}function c6(r,e){const t="x6-shape",n=e&&e.resetOffset;return function(i,{elem:o,refBBox:a}){let s=pp(o,t);if(!s||s.value!==i){const m=r(i);s={value:i,shape:m,shapeBBox:m.bbox()},pp(o,t,s)}const u=s.shape.clone(),l=s.shapeBBox.clone(),c=l.getOrigin(),f=a.getOrigin();l.x=f.x,l.y=f.y;const h=a.getMaxScaleToFit(l,f);return u.scale(0===l.width||0===a.width?1:h.sx,0===l.height||0===a.height?1:h.sy,c),n&&u.translate(-c.x,-c.y),u}}function f6(r){const t=c6(function e(n){return oi.parse(n)},r);return(n,i)=>({d:t(n,i).serialize()})}function h6(r){const e=c6(t=>new za(t),r);return(t,n)=>({points:e(t,n).serialize()})}const jbe={qualify:Vf,set:(r,{view:e})=>`url(#${e.graph.defineGradient(r)})`},zbe={qualify:Vf,set(r,{view:e}){const t=e.cell,n=Object.assign({},r);if(t.isEdge()&&"linearGradient"===n.type){const o=e.sourcePoint,a=e.targetPoint;n.id=`gradient-${n.type}-${t.id}`,n.attrs=Object.assign(Object.assign({},n.attrs),{x1:o.x,y1:o.y,x2:a.x,y2:a.y,gradientUnits:"userSpaceOnUse"}),e.graph.defs.remove(n.id)}return`url(#${e.graph.defineGradient(n)})`}},d6={qualify:(r,{attrs:e})=>null==e.textWrap||!Vf(e.textWrap),set(r,{view:e,elem:t,attrs:n}){const i="x6-text",o=pp(t,i),a=c=>{try{return JSON.parse(c)}catch{return c}},s={x:n.x,eol:n.eol,annotations:a(n.annotations),textPath:a(n["text-path"]||n.textPath),textVerticalAnchor:n["text-vertical-anchor"]||n.textVerticalAnchor,displayEmpty:"true"===(n["display-empty"]||n.displayEmpty),lineHeight:n["line-height"]||n.lineHeight},u=n["font-size"]||n.fontSize,l=JSON.stringify([r,s]);if(u&&t.setAttribute("font-size",u),null==o||o!==l){const c=s.textPath;if(null!=c&&"object"==typeof c){const f=c.selector;if("string"==typeof f){const h=e.find(f)[0];h instanceof SVGPathElement&&(OA(h),s.textPath=Object.assign({"xlink:href":`#${h.id}`},c))}}G4(t,`${r}`,s),pp(t,i,l)}}},Gbe={qualify:Vf,set(r,{view:e,elem:t,attrs:n,refBBox:i}){const o=r,a=o.width||0;zh(a)?i.width*=parseFloat(a)/100:a<=0?i.width+=a:i.width=a;const s=o.height||0;zh(s)?i.height*=parseFloat(s)/100:s<=0?i.height+=s:i.height=s;let u,l=o.text;null==l&&(l=n.text),u=null!=l?function Aye(r,e,t={},n={}){const i=e.width,o=e.height,a=n.eol||"\n",{width:s}=qy(r,t);if(s<i)return r;const u=[],l=t.fontSize||14,c=t.lineHeight?parseFloat(t.lineHeight):Math.ceil(1.4*l),f=Math.floor(o/c);let h=r,d=s,g=n.ellipsis,m=0;g&&("string"!=typeof g&&(g="\u2026"),m=qy(g,t).width);for(let _=0;_<f;_+=1){if(!(d>i)){u.push(h);break}if(_===f-1){const[L]=U4(h,i-m,d,t);u.push(g?`${L}${g}`:L)}else{const[L,O]=U4(h,i,d,t);u.push(L),h=O,d=qy(h,t).width}}return u.join(a)}(`${l}`,i,{"font-weight":n["font-weight"]||n.fontWeight,"font-size":n["font-size"]||n.fontSize,"font-family":n["font-family"]||n.fontFamily,lineHeight:n.lineHeight},{ellipsis:o.ellipsis}):"",Ti(d6.set,this,u,{view:e,elem:t,attrs:n,refBBox:i,cell:e.cell})}},S0=(r,{attrs:e})=>void 0!==e.text,Ube={qualify:S0},Vbe={qualify:S0},Hbe={qualify:S0},Wbe={qualify:S0},$be={qualify:S0},Ybe={qualify:S0},Xbe={qualify:(r,{elem:e})=>e instanceof SVGElement,set(r,{elem:e}){const t="x6-title",n=`${r}`,i=pp(e,t);if(null==i||i!==n){pp(e,t,n);const o=e.firstChild;if(o&&"TITLE"===o.tagName.toUpperCase())o.textContent=n;else{const a=document.createElementNS(e.namespaceURI,"title");a.textContent=n,e.insertBefore(a,o)}}}},qbe={offset:g6("x","width","right")},Kbe={offset:g6("y","height","bottom")},Zbe={offset:(r,{refBBox:e})=>r?{x:-e.x,y:-e.y}:{x:0,y:0}};function g6(r,e,t){return(n,{refBBox:i})=>{const o=new Vt;let a;return a="middle"===n?i[e]/2:n===t?i[e]:"number"==typeof n&&Number.isFinite(n)?n>-1&&n<1?-i[e]*n:-n:zh(n)?i[e]*parseFloat(n)/100:0,o[r]=-(i[r]+a),o}}const Qbe={qualify:Vf,set(r,{elem:e}){Xy(e,r)}},Jbe={set(r,{elem:e}){e.innerHTML=`${r}`}},e1e={qualify:Vf,set:(r,{view:e})=>`url(#${e.graph.defineFilter(r)})`},t1e={set:r=>null!=r&&"object"==typeof r&&r.id?r.id:r};function mp(r,e,t){let n,i;"object"==typeof e?(n=e.x,i=e.y):(n=e,i=t);const o=oi.parse(r),a=o.bbox();if(a){let s=-a.height/2-a.y,u=-a.width/2-a.x;"number"==typeof n&&(u-=n),"number"==typeof i&&(s-=i),o.translate(u,s)}return o.serialize()}var p6=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t};const n1e=r=>{var{size:e,width:t,height:n,offset:i,open:o}=r;return v6({size:e,width:t,height:n,offset:i},!0===o,!0,void 0,p6(r,["size","width","height","offset","open"]))},r1e=r=>{var{size:e,width:t,height:n,offset:i,factor:o}=r;return v6({size:e,width:t,height:n,offset:i},!1,!1,o,p6(r,["size","width","height","offset","factor"]))};function v6(r,e,t,n=3/4,i={}){const o=r.size||10,a=r.width||o,s=r.height||o,u=new oi,l={};if(e)u.moveTo(a,0).lineTo(0,s/2).lineTo(a,s),l.fill="none";else{if(u.moveTo(0,s/2),u.lineTo(a,0),!t){const c=Ul(n,0,1);u.lineTo(a*c,s/2)}u.lineTo(a,s),u.close()}return Object.assign(Object.assign(Object.assign({},l),i),{tagName:"path",d:mp(u.serialize(),{x:null!=r.offset?r.offset:-a/2})})}const o1e=r=>{var{size:e,width:t,height:n,offset:i}=r,o=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(r,["size","width","height","offset"]);const a=e||10,s=t||a,u=n||a,l=new oi;return l.moveTo(0,u/2).lineTo(s/2,0).lineTo(s,u/2).lineTo(s/2,u).close(),Object.assign(Object.assign({},o),{tagName:"path",d:mp(l.serialize(),i??-s/2)})},s1e=r=>{var{d:e,offsetX:t,offsetY:n}=r,i=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(r,["d","offsetX","offsetY"]);return Object.assign(Object.assign({},i),{tagName:"path",d:mp(e,t,n)})},l1e=r=>{var{size:e,width:t,height:n,offset:i}=r,o=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(r,["size","width","height","offset"]);const a=e||10,s=t||a,u=n||a,l=new oi;return l.moveTo(0,0).lineTo(s,u).moveTo(0,u).lineTo(s,0),Object.assign(Object.assign({},o),{tagName:"path",fill:"none",d:mp(l.serialize(),i||-s/2)})},f1e=r=>{var{width:e,height:t,offset:n,open:i,flip:o}=r,a=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(r,["width","height","offset","open","flip"]);let s=t||6;const u=e||10,l=!0===i,c=!0===o,f=Object.assign(Object.assign({},a),{tagName:"path"});c&&(s=-s);const h=new oi;return h.moveTo(0,s).lineTo(u,0),l?f.fill="none":(h.lineTo(u,s),h.close()),f.d=mp(h.serialize(),{x:n||-u/2,y:s/2}),f};var m6=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t};const y6=r=>{var{r:e}=r,t=m6(r,["r"]);const n=e||5;return Object.assign(Object.assign({cx:n},t),{tagName:"circle",r:n})},h1e=r=>{var{r:e}=r,t=m6(r,["r"]);const n=e||5,i=new oi;return i.moveTo(n,0).lineTo(n,2*n),i.moveTo(0,n).lineTo(2*n,n),{children:[Object.assign(Object.assign({},y6({r:n})),{fill:"none"}),Object.assign(Object.assign({},t),{tagName:"path",d:mp(i.serialize(),-n)})]}},g1e=r=>{var{rx:e,ry:t}=r,n=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(r,["rx","ry"]);const i=e||5,o=t||5;return Object.assign(Object.assign({cx:i},n),{tagName:"ellipse",rx:i,ry:o})};var Kd;function YA(r){return"string"==typeof r||Vf(r)}(function(r){r.presets=ne,r.registry=Ga.create({type:"marker"}),r.registry.register(r.presets,!0)})(Kd||(Kd={})),function(r){r.normalize=mp}(Kd||(Kd={}));const v1e={qualify:YA,set:(r,{view:e,attrs:t})=>XA("marker-start",r,e,t)},m1e={qualify:YA,set:(r,{view:e,attrs:t})=>XA("marker-end",r,e,t,{transform:"rotate(180)"})},y1e={qualify:YA,set:(r,{view:e,attrs:t})=>XA("marker-mid",r,e,t)};function XA(r,e,t,n,i={}){const o="string"==typeof e?{name:e}:e,{name:a,args:s}=o,u=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(o,["name","args"]);let l=u;if(a&&"string"==typeof a){const f=Kd.registry.get(a);if(!f)return Kd.registry.onNotFound(a);l=f(Object.assign(Object.assign({},u),s))}const c=Object.assign(Object.assign(Object.assign({},function b1e(r,e){const t={},n=r.stroke;"string"==typeof n&&(t.stroke=n,t.fill=n);let i=r.strokeOpacity;if(null==i&&(i=r["stroke-opacity"]),null==i&&(i=r.opacity),null!=i&&(t["stroke-opacity"]=i,t["fill-opacity"]=i),"marker-mid"!==e){const o=parseFloat(r.strokeWidth||r["stroke-width"]);if(Number.isFinite(o)&&o>1){const a=Math.ceil(o/2);t.refX="marker-start"===e?a:-a}}return t}(n,r)),i),l);return{[r]:`url(#${t.graph.defineMarker(c)})`}}const ob=(r,{view:e})=>e.cell.isEdge(),w1e={qualify:ob,set(r,e){var t,n,i,o;const a=e.view,s=r.reverse||!1,u=r.stubs||0;let l;if(Number.isFinite(u)&&0!==u)if(s){let c,f;const h=a.getConnectionLength()||0;u<0?(c=(h+u)/2,f=-u):(c=u,f=h-2*u),l=null===(o=null===(i=null===(n=null===(t=a.getConnection()?.divideAtLength(c))||void 0===t?void 0:t[1])||void 0===n?void 0:n.divideAtLength(f))||void 0===i?void 0:i[0])||void 0===o?void 0:o.serialize()}else{let c;c=u<0?((a.getConnectionLength()||0)+u)/2:u;const f=a.getConnection();if(f){const h=f.divideAtLength(c),d=f.divideAtLength(-c);h&&d&&(l=`${h[0].serialize()} ${d[1].serialize()}`)}}return{d:l||a.getConnectionPathData()}}},b6={qualify:ob,set:Rx("getTangentAtLength",{rotate:!0})},x1e={qualify:ob,set:Rx("getTangentAtLength",{rotate:!1})},w6={qualify:ob,set:Rx("getTangentAtRatio",{rotate:!0})},E1e={qualify:ob,set:Rx("getTangentAtRatio",{rotate:!1})},_1e=b6,S1e=w6;function Rx(r,e){const t={x:1,y:0};return(n,i)=>{let o,a;const s=i.view,u=s[r](Number(n));return u?(a=e.rotate?u.vector().vectorAngle(t):0,o=u.start):(o=s.path.start,a=0),0===a?{transform:`translate(${o.x},${o.y}')`}:{transform:`translate(${o.x},${o.y}') rotate(${a})`}}}var Wf;(function(r){r.isValidDefinition=function e(t,n,i){return!(null==t||"string"!=typeof t&&"function"==typeof t.qualify&&!Ti(t.qualify,this,n,i))}})(Wf||(Wf={})),function(r){r.presets=Object.assign(Object.assign({},xbe),q),r.registry=Ga.create({type:"attribute definition"}),r.registry.register(r.presets,!0)}(Wf||(Wf={}));const $s={prefixCls:"x6",autoInsertCSS:!0,useCSSSelector:!0,prefix:r=>`${$s.prefixCls}-${r}`},x6=$s.prefix("highlighted"),M1e={highlight(r,e,t){Mo(e,t&&t.className||x6)},unhighlight(r,e,t){Vl(e,t&&t.className||x6)}},E6=$s.prefix("highlight-opacity"),C1e={highlight(r,e){Mo(e,E6)},unhighlight(r,e){Vl(e,E6)}};var Io;!function(r){const e=Uh("svg");function t(d,g){const m=function Bye(r,e){const t=Tx.createSVGPoint();return t.x=r,t.y=e,t}(d.x,d.y).matrixTransform(g);return new Vt(m.x,m.y)}function o(d,g){const m=e.createSVGPoint();m.x=d.x,m.y=d.y;const _=m.matrixTransform(g);m.x=d.x+d.width,m.y=d.y;const D=m.matrixTransform(g);m.x=d.x+d.width,m.y=d.y+d.height;const L=m.matrixTransform(g);m.x=d.x,m.y=d.y+d.height;const O=m.matrixTransform(g),Z=Math.min(_.x,D.x,L.x,O.x),le=Math.max(_.x,D.x,L.x,O.x),pe=Math.min(_.y,D.y,L.y,O.y),Ee=Math.max(_.y,D.y,L.y,O.y);return new _r(Z,pe,le-Z,Ee-pe)}function s(d,g={}){let m;if(!d.ownerSVGElement||!Hd(d)){if(D4(d)){const{left:O,top:Z,width:le,height:pe}=u(d);return new _r(O,Z,le,pe)}return new _r(0,0,0,0)}let D=g.target;if(!g.recursive){try{m=d.getBBox()}catch{m={x:d.clientLeft,y:d.clientTop,width:d.clientWidth,height:d.clientHeight}}return D?o(m,Qy(d,D)):_r.create(m)}{const O=d.childNodes,Z=O.length;if(0===Z)return s(d,{target:D});D||(D=d);for(let le=0;le<Z;le+=1){const pe=O[le];let Ee;Ee=s(pe,0===pe.childNodes.length?{target:D}:{target:D,recursive:!0}),m=m?m.union(Ee):Ee}return m}}function u(d){let g=0,m=0,_=0,D=0;if(d){let L=d;for(;L;)g+=L.offsetLeft,m+=L.offsetTop,L=L.offsetParent,L&&(g+=parseInt(BA(L,"borderLeft"),10),m+=parseInt(BA(L,"borderTop"),10));_=d.offsetWidth,D=d.offsetHeight}return{left:g,top:m,width:_,height:D}}function l(d){const g=m=>{const _=d.getAttribute(m),D=_?parseFloat(_):0;return Number.isNaN(D)?0:D};switch(d instanceof SVGElement&&d.nodeName.toLowerCase()){case"rect":return new _r(g("x"),g("y"),g("width"),g("height"));case"circle":return new jc(g("cx"),g("cy"),g("r"),g("r"));case"ellipse":return new jc(g("cx"),g("cy"),g("rx"),g("ry"));case"polyline":{const m=Dx(d);return new za(m)}case"polygon":{const m=Dx(d);return m.length>1&&m.push(m[0]),new za(m)}case"path":{let m=d.getAttribute("d");return oi.isValid(m)||(m=oi.normalize(m)),oi.parse(m)}case"line":return new zr(g("x1"),g("y1"),g("x2"),g("y2"))}return s(d)}function f(d){if(null==d)return null;let g=d;do{let m=g.tagName;if("string"!=typeof m)return null;if(m=m.toUpperCase(),dp(g,"x6-port"))g=g.nextElementSibling;else if("G"===m)g=g.firstElementChild;else{if("TITLE"!==m)break;g=g.nextElementSibling}}while(g);return g}r.transformPoint=t,r.transformLine=function n(d,g){return new zr(t(d.start,g),t(d.end,g))},r.transformPolyline=function i(d,g){let m=d instanceof za?d.points:d;return Array.isArray(m)||(m=[]),new za(m.map(_=>t(_,g)))},r.transformRectangle=o,r.bbox=function a(d,g,m){let _;const D=d.ownerSVGElement;if(!D)return new _r(0,0,0,0);try{_=d.getBBox()}catch{_={x:d.clientLeft,y:d.clientTop,width:d.clientWidth,height:d.clientHeight}}return g?_r.create(_):o(_,Qy(d,m||D))},r.getBBox=s,r.getBoundingOffsetRect=u,r.toGeometryShape=l,r.translateAndAutoOrient=function c(d,g,m,_){const D=Vt.create(g),L=Vt.create(m);_||(_=d instanceof SVGSVGElement?d:d.ownerSVGElement);const O=UA(d);d.setAttribute("transform","");const Z=s(d,{target:_}).scale(O.sx,O.sy),le=Ky();le.setTranslate(-Z.x-Z.width/2,-Z.y-Z.height/2);const pe=Ky(),Ee=D.angleBetween(L,D.clone().translate(1,0));Ee&&pe.setRotate(Ee,0,0);const Re=Ky(),Ve=D.clone().move(L,Z.width/2);Re.setTranslate(2*D.x-Ve.x,2*D.y-Ve.y);const Ue=Qy(d,_),at=Ky();at.setMatrix(Re.matrix.multiply(pe.matrix.multiply(le.matrix.multiply(Ue.scale(O.sx,O.sy))))),d.setAttribute("transform",y0(at.matrix))},r.findShapeNode=f,r.getBBoxV2=function h(d){const g=f(d);if(!Hd(g)){if(D4(d)){const{left:_,top:D,width:L,height:O}=u(d);return new _r(_,D,L,O)}return new _r(0,0,0,0)}return l(g).bbox()||_r.create()}}(Io||(Io={}));const A1e={padding:3,rx:0,ry:0,attrs:{"stroke-width":3,stroke:"#FEB663"}},D1e={highlight(r,e,t){const n=Zd.getHighlighterId(e,t);if(Zd.hasCache(n))return;t=wj({},t,A1e);const i=Ai.create(e);let o,a;try{o=i.toPathData()}catch{a=Io.bbox(i.node,!0),o=H4(Object.assign(Object.assign({},t),a))}const s=Uh("path");if($o(s,Object.assign({d:o,"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},t.attrs?Yy(t.attrs):null)),r.isEdgeElement(e))$o(s,"d",r.getConnectionPathData());else{let c=i.getTransformToElement(r.container);const f=t.padding;if(f){null==a&&(a=Io.bbox(i.node,!0));const h=a.x+a.width/2,d=a.y+a.height/2;a=Io.transformRectangle(a,c);const g=Math.max(a.width,1),m=Math.max(a.height,1),_=(g+f)/g,D=(m+f)/m,L=Ns({a:_,b:0,c:0,d:D,e:h-_*h,f:d-D*d});c=c.multiply(L)}b0(s,c)}Mo(s,$s.prefix("highlight-stroke"));const u=r.cell,l=()=>Zd.removeHighlighter(n);u.on("removed",l),u.model&&u.model.on("reseted",l),r.container.appendChild(s),Zd.setCache(n,s)},unhighlight(r,e,t){Zd.removeHighlighter(Zd.getHighlighterId(e,t))}};var Zd,Hh;function qA(r,e={}){return new Vt(Gh(e.x,r.width),Gh(e.y,r.height))}function KA(r,e,t){return Object.assign({angle:e,position:r.toJSON()},t)}!function(r){r.getHighlighterId=function e(a,s){return OA(a),a.id+JSON.stringify(s)};const t={};r.setCache=function n(a,s){t[a]=s},r.hasCache=function i(a){return null!=t[a]},r.removeHighlighter=function o(a){const s=t[a];s&&(m0(s),delete t[a])}}(Zd||(Zd={})),function(r){r.check=function e(t,n){if("function"!=typeof n.highlight)throw new Error(`Highlighter '${t}' is missing required \`highlight()\` method`);if("function"!=typeof n.unhighlight)throw new Error(`Highlighter '${t}' is missing required \`unhighlight()\` method`)}}(Hh||(Hh={})),function(r){r.presets=K,r.registry=Ga.create({type:"highlighter"}),r.registry.register(r.presets,!0)}(Hh||(Hh={}));const T1e=(r,e)=>r.map(({x:t,y:n,angle:i})=>KA(qA(e,{x:t,y:n}),i||0)),I1e=(r,e,t)=>{const i=t.step||20;return _6(r,e,t.start||0,(o,a)=>(o+.5-a/2)*i)},O1e=(r,e,t)=>{const i=t.step||360/r.length;return _6(r,e,t.start||0,o=>o*i)};function _6(r,e,t,n){const i=e.getCenter(),o=e.getTopCenter(),a=e.width/e.height,s=jc.fromRect(e),u=r.length;return r.map((l,c)=>{const f=t+n(c,u),h=o.clone().rotate(-f,i).scale(a,1,i),d=l.compensateRotate?-s.tangentTheta(h):0;return(l.dx||l.dy)&&h.translate(l.dx||0,l.dy||0),l.dr&&h.move(i,l.dr),KA(h.round(),d,l)})}const N1e=(r,e,t)=>ab(r,qA(e,t.start||e.getOrigin()),qA(e,t.end||e.getCorner()),t),L1e=(r,e,t)=>ab(r,e.getTopLeft(),e.getBottomLeft(),t),k1e=(r,e,t)=>ab(r,e.getTopRight(),e.getBottomRight(),t),R1e=(r,e,t)=>ab(r,e.getTopLeft(),e.getTopRight(),t),F1e=(r,e,t)=>ab(r,e.getBottomLeft(),e.getBottomRight(),t);function ab(r,e,t,n){const i=new zr(e,t),o=r.length;return r.map((a,s)=>{var{strict:u}=a,l=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(a,["strict"]);const f=i.pointAt(u||n.strict?(s+1)/(o+1):(s+.5)/o);return(l.dx||l.dy)&&f.translate(l.dx||0,l.dy||0),KA(f.round(),0,l)})}var yp;!function(r){r.presets=ee,r.registry=Ga.create({type:"port layout"}),r.registry.register(r.presets,!0)}(yp||(yp={}));const B1e={position:{x:0,y:0},angle:0,attrs:{".":{y:"0","text-anchor":"start"}}};function Qd(r,e){const{x:t,y:n,angle:i,attrs:o}=e||{};return wj({},{angle:i,attrs:o,position:{x:t,y:n}},r,B1e)}const j1e=(r,e,t)=>Qd({position:e.getTopLeft()},t),z1e=(r,e,t)=>Qd({position:{x:-15,y:0},attrs:{".":{y:".3em","text-anchor":"end"}}},t),G1e=(r,e,t)=>Qd({position:{x:15,y:0},attrs:{".":{y:".3em","text-anchor":"start"}}},t),U1e=(r,e,t)=>Qd({position:{x:0,y:-15},attrs:{".":{"text-anchor":"middle"}}},t),V1e=(r,e,t)=>Qd({position:{x:0,y:15},attrs:{".":{y:".6em","text-anchor":"middle"}}},t),H1e=(r,e,t)=>S6(r,e,!1,t),W1e=(r,e,t)=>S6(r,e,!0,t),$1e=(r,e,t)=>M6(r,e,!1,t),Y1e=(r,e,t)=>M6(r,e,!0,t);function S6(r,e,t,n){const i=null!=n.offset?n.offset:15,o=e.getCenter().theta(r),a=C6(e);let s,u,l,c,f=0;return o<a[1]||o>a[2]?(s=".3em",u=i,l=0,c="start"):o<a[0]?(s="0",u=0,l=-i,t?(f=-90,c="start"):c="middle"):o<a[3]?(s=".3em",u=-i,l=0,c="end"):(s=".6em",u=0,l=i,t?(f=90,c="start"):c="middle"),Qd({position:{x:Math.round(u),y:Math.round(l)},angle:f,attrs:{".":{y:s,"text-anchor":c}}},n)}function M6(r,e,t,n){const i=null!=n.offset?n.offset:15,o=e.getCenter().theta(r),a=C6(e);let s,u,l,c,f=0;return o<a[1]||o>a[2]?(s=".3em",u=-i,l=0,c="end"):o<a[0]?(s=".6em",u=0,l=i,t?(f=90,c="start"):c="middle"):o<a[3]?(s=".3em",u=i,l=0,c="start"):(s="0em",u=0,l=-i,t?(f=-90,c="start"):c="middle"),Qd({position:{x:Math.round(u),y:Math.round(l)},angle:f,attrs:{".":{y:s,"text-anchor":c}}},n)}function C6(r){const e=r.getCenter(),t=e.theta(r.getTopLeft()),n=e.theta(r.getBottomLeft()),i=e.theta(r.getBottomRight());return[t,e.theta(r.getTopRight()),i,n]}const X1e=(r,e,t)=>A6(r.diff(e.getCenter()),!1,t),q1e=(r,e,t)=>A6(r.diff(e.getCenter()),!0,t);function A6(r,e,t){const n=null!=t.offset?t.offset:20,i=new Vt(0,0),o=-r.theta(i);let u,s=".3em",l=o;return(o+90)%180==0?(u=e?"end":"middle",!e&&-270===o&&(s="0em")):o>-270&&o<-90?(u="start",l=o-180):u="end",Qd({position:r.clone().move(i,n).diff(r).round().round().toJSON(),angle:e?l:0,attrs:{".":{y:s,"text-anchor":u}}},t)}var M0,ZA,aa;!function(r){r.presets=X,r.registry=Ga.create({type:"port label layout"}),r.registry.register(r.presets,!0)}(M0||(M0={}));class Aa extends Gl{get priority(){return 2}constructor(){super(),this.cid=ZA.uniqueId(),Aa.views[this.cid]=this}confirmUpdate(e,t){return 0}empty(e=this.container){return Wy(e),this}unmount(e=this.container){return m0(e),this}remove(e=this.container){return e===this.container&&(this.removeEventListeners(document),this.onRemove(),delete Aa.views[this.cid]),this.unmount(e),this}onRemove(){}setClass(e,t=this.container){t.classList.value=Array.isArray(e)?e.join(" "):e}addClass(e,t=this.container){return Mo(t,Array.isArray(e)?e.join(" "):e),this}removeClass(e,t=this.container){return Vl(t,Array.isArray(e)?e.join(" "):e),this}setStyle(e,t=this.container){return Xy(t,e),this}setAttrs(e,t=this.container){return null!=e&&null!=t&&$o(t,e),this}findAttr(e,t=this.container){let n=t;for(;n&&1===n.nodeType;){const i=n.getAttribute(e);if(null!=i)return i;if(n===this.container)return null;n=n.parentNode}return null}find(e,t=this.container,n=this.selectors){return Aa.find(e,t,n).elems}findOne(e,t=this.container,n=this.selectors){const i=this.find(e,t,n);return i.length>0?i[0]:null}findByAttr(e,t=this.container){let n=t;for(;n&&n.getAttribute;){const i=n.getAttribute(e);if((null!=i||n===this.container)&&"false"!==i)return n;n=n.parentNode}return null}getSelector(e,t){let n;if(e===this.container)return"string"==typeof t&&(n=`> ${t}`),n;if(e){const i=NA(e)+1;n=`${e.tagName.toLowerCase()}:nth-child(${i})`,t&&(n+=` > ${t}`),n=this.getSelector(e.parentNode,n)}return n}prefixClassName(e){return $s.prefix(e)}delegateEvents(e,t){if(null==e)return this;t||this.undelegateEvents();const n=/^(\S+)\s*(.*)$/;return Object.keys(e).forEach(i=>{const o=i.match(n);if(null==o)return;const a=this.getEventHandler(e[i]);"function"==typeof a&&this.delegateEvent(o[1],o[2],a)}),this}undelegateEvents(){return _u.off(this.container,this.getEventNamespace()),this}delegateDocumentEvents(e,t){return this.addEventListeners(document,e,t),this}undelegateDocumentEvents(){return this.removeEventListeners(document),this}delegateEvent(e,t,n){return _u.on(this.container,e+this.getEventNamespace(),t,n),this}undelegateEvent(e,t,n){const i=e+this.getEventNamespace();return null==t?_u.off(this.container,i):"string"==typeof t?_u.off(this.container,i,t,n):_u.off(this.container,i,t),this}addEventListeners(e,t,n){if(null==t)return this;const i=this.getEventNamespace();return Object.keys(t).forEach(o=>{const a=this.getEventHandler(t[o]);"function"==typeof a&&_u.on(e,o+i,n,a)}),this}removeEventListeners(e){return null!=e&&_u.off(e,this.getEventNamespace()),this}getEventNamespace(){return`.${$s.prefixCls}-event-${this.cid}`}getEventHandler(e){let t;if("string"==typeof e){const n=this[e];"function"==typeof n&&(t=(...i)=>n.call(this,...i))}else t=(...n)=>e.call(this,...n);return t}getEventTarget(e,t={}){const{target:n,type:i,clientX:o=0,clientY:a=0}=e;return t.fromPoint||"touchmove"===i||"touchend"===i?document.elementFromPoint(o,a):n}stopPropagation(e){return this.setEventData(e,{propagationStopped:!0}),this}isPropagationStopped(e){return!0===this.getEventData(e).propagationStopped}getEventData(e){return this.eventData(e)}setEventData(e,t){return this.eventData(e,t)}eventData(e,t){if(null==e)throw new TypeError("Event object required");let n=e.data;const i=`__${this.cid}__`;return null==t?null==n?{}:n[i]||{}:(null==n&&(n=e.data={}),n[i]=Object.assign(null==n[i]?{}:Object.assign({},n[i]),t),n[i])}normalizeEvent(e){return Aa.normalizeEvent(e)}}(function(r){r.createElement=function e(i,o){return o?Uh(i||"g"):PA(i||"div")},r.find=function t(i,o,a){if(!i||"."===i)return{elems:[o]};if(a){const s=a[i];if(s)return{elems:Array.isArray(s)?s:[s]}}if($s.useCSSSelector){const s=i.includes(">")?`:scope ${i}`:i;return{isCSSSelector:!0,elems:Array.prototype.slice.call(o.querySelectorAll(s))}}return{elems:[]}},r.normalizeEvent=function n(i){let o=i;const a=i.originalEvent,s=a&&a.changedTouches&&a.changedTouches[0];if(s){for(const l in i)void 0===s[l]&&(s[l]=i[l]);o=s}const u=o.target;if(u){const l=u.correspondingUseElement;l&&(o.target=l)}return o}})(Aa||(Aa={})),function(r){r.views={},r.getView=function e(t){return r.views[t]||null}}(Aa||(Aa={})),function(r){let e=0;r.uniqueId=function t(){const n=`v${e}`;return e+=1,n}}(ZA||(ZA={}));class K1e{constructor(e){this.view=e,this.clean()}clean(){this.elemCache&&this.elemCache.dispose(),this.elemCache=new HA,this.pathCache={}}get(e){return this.elemCache.has(e)||this.elemCache.set(e,{}),this.elemCache.get(e)}getData(e){const t=this.get(e);return t.data||(t.data={}),t.data}getMatrix(e){const t=this.get(e);return null==t.matrix&&(t.matrix=function Vye(r,e){let t=Ns();if(Hd(e)&&Hd(r)){let n=r;const i=[];for(;n&&n!==e;){const a=Zy(n.getAttribute("transform")||null);i.push(a),n=n.parentNode}i.reverse().forEach(o=>{t=t.multiply(o)})}return t}(e,this.view.container)),Ns(t.matrix)}getShape(e){const t=this.get(e);return null==t.shape&&(t.shape=Io.toGeometryShape(e)),t.shape.clone()}getBoundingRect(e){const t=this.get(e);return null==t.boundingRect&&(t.boundingRect=Io.getBBoxV2(e)),t.boundingRect.clone()}}(function(r){function t(l){return null!=l&&"string"==typeof l}function o(l,c={ns:Ps.svg}){const f=document.createDocumentFragment(),h={},d={},g=[{markup:Array.isArray(l)?l:[l],parent:f,ns:c.ns}];for(;g.length>0;){const m=g.pop();let _=m.ns||Ps.svg;const L=m.parent;m.markup.forEach(O=>{const Z=O.tagName;if(!Z)throw new TypeError("Invalid tagName");O.ns&&(_=O.ns);const le=_?PA(Z,_):M4(Z),pe=O.attrs;pe&&$o(le,Yy(pe));const Ee=O.style;Ee&&Xy(le,Ee);const Re=O.className;null!=Re&&le.setAttribute("class",Array.isArray(Re)?Re.join(" "):Re),O.textContent&&(le.textContent=O.textContent);const Ve=O.selector;if(null!=Ve){if(d[Ve])throw new TypeError("Selector must be unique");d[Ve]=le}if(O.groupSelector){let at=O.groupSelector;Array.isArray(at)||(at=[at]),at.forEach(_t=>{h[_t]||(h[_t]=[]),h[_t].push(le)})}L.appendChild(le);const Ue=O.children;Array.isArray(Ue)&&g.push({ns:_,markup:Ue,parent:le})})}return Object.keys(h).forEach(m=>{if(d[m])throw new Error("Ambiguous group selector");d[m]=h[m]}),{fragment:f,selectors:d,groups:h}}function a(l){return l instanceof SVGElement?Uh("g"):M4("div")}r.isJSONMarkup=function e(l){return null!=l&&!t(l)},r.isStringMarkup=t,r.clone=function n(l){return null==l||t(l)?l:Oa(l)},r.sanitize=function i(l){return`${l}`.trim().replace(/[\r|\n]/g," ").replace(/>\s+</g,"><")},r.parseJSONMarkup=o,r.renderMarkup=function s(l){if(t(l)){const d=Ai.createVectors(l),g=d.length;if(1===g)return{elem:d[0].node};if(g>1){const m=a(d[0].node);return d.forEach(_=>{m.appendChild(_.node)}),{elem:m}}return{}}const c=o(l),f=c.fragment;let h=null;return f.childNodes.length>1?(h=a(f.firstChild),h.appendChild(f)):h=f.firstChild,{elem:h,selectors:c.selectors}},r.parseLabelStringMarkup=function u(l){const c=Ai.createVectors(l),f=document.createDocumentFragment();for(let h=0,d=c.length;h<d;h+=1)f.appendChild(c[h].node);return{fragment:f,selectors:{}}}})(aa||(aa={})),function(r){r.getSelector=function e(t,n,i){if(null!=t){let o;const a=t.tagName.toLowerCase();if(t===n)return o="string"==typeof i?`> ${a} > ${i}`:`> ${a}`,o;const s=t.parentNode;return o=s&&s.childNodes.length>1?`${a}:nth-child(${NA(t)+1})`:a,i&&(o+=` > ${i}`),e(t.parentNode,n,o)}return i}}(aa||(aa={})),function(r){r.getPortContainerMarkup=function e(){return"g"},r.getPortMarkup=function t(){return{tagName:"circle",selector:"circle",attrs:{r:10,fill:"#FFFFFF",stroke:"#000000"}}},r.getPortLabelMarkup=function n(){return{tagName:"text",selector:"text",attrs:{fill:"#000000"}}}}(aa||(aa={})),function(r){r.getEdgeMarkup=function e(){return[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}]}}(aa||(aa={})),function(r){r.getForeignObjectMarkup=function e(t=!1){return{tagName:"foreignObject",selector:"fo",children:[{ns:Ps.xhtml,tagName:"body",selector:"foBody",attrs:{xmlns:Ps.xhtml},style:{width:"100%",height:"100%",background:"transparent"},children:t?[]:[{tagName:"div",selector:"foContent",style:{width:"100%",height:"100%"}}]}]}}}(aa||(aa={}));class D6{constructor(e){this.view=e}get cell(){return this.view.cell}getDefinition(e){return this.cell.getAttrDefinition(e)}processAttrs(e,t){let n,i,o,a;const s=[];return Object.keys(t).forEach(u=>{const l=t[u],c=this.getDefinition(u),f=Ti(Wf.isValidDefinition,this.view,c,l,{elem:e,attrs:t,cell:this.cell,view:this.view});if(c&&f)"string"==typeof c?(null==n&&(n={}),n[c]=l):null!==l&&s.push({name:u,definition:c});else{null==n&&(n={});const h=T4.includes(u)?u:o4(u);n[h]=l}}),s.forEach(({name:u,definition:l})=>{const c=t[u];"function"==typeof l.set&&(null==i&&(i={}),i[u]=c),"function"==typeof l.offset&&(null==o&&(o={}),o[u]=c),"function"==typeof l.position&&(null==a&&(a={}),a[u]=c)}),{raw:t,normal:n,set:i,offset:o,position:a}}mergeProcessedAttrs(e,t){e.set=Object.assign(Object.assign({},e.set),t.set),e.position=Object.assign(Object.assign({},e.position),t.position),e.offset=Object.assign(Object.assign({},e.offset),t.offset);const n=e.normal&&e.normal.transform;null!=n&&t.normal&&(t.normal.transform=n),e.normal=t.normal}findAttrs(e,t,n,i){const o=[],a=new HA;return Object.keys(e).forEach(s=>{const u=e[s];if(!Vf(u))return;const{isCSSSelector:l,elems:c}=Aa.find(s,t,i);n[s]=c;for(let f=0,h=c.length;f<h;f+=1){const d=c[f],g=i&&i[s]===d,m=a.get(d);if(m){m.array||(o.push(d),m.array=!0,m.attrs=[m.attrs],m.priority=[m.priority]);const _=m.attrs,D=m.priority;if(g)_.unshift(u),D.unshift(-1);else{const L=tve(D,l?-1:h);_.splice(L,0,u),D.splice(L,0,h)}}else a.set(d,{elem:d,attrs:u,priority:g?-1:h,array:!1})}}),o.forEach(s=>{const u=a.get(s);u.attrs=u.attrs.reduceRight((c,f)=>ja(c,f),{})}),a}updateRelativeAttrs(e,t,n){const i=t.raw||{};let o=t.normal||{};const a=t.set,s=t.position,u=t.offset,l=()=>({elem:e,cell:this.cell,view:this.view,attrs:i,refBBox:n.clone()});if(null!=a&&Object.keys(a).forEach(_=>{const D=a[_],L=this.getDefinition(_);if(null!=L){const O=Ti(L.set,this.view,D,l());"object"==typeof O?o=Object.assign(Object.assign({},o),O):null!=O&&(o[_]=O)}}),e instanceof HTMLElement)return void this.view.setAttrs(o,e);const c=o.transform,h=Zy(c?`${c}`:null),d=new Vt(h.e,h.f);c&&(delete o.transform,h.e=0,h.f=0);let g=!1;null!=s&&Object.keys(s).forEach(_=>{const D=s[_],L=this.getDefinition(_);if(null!=L){const O=Ti(L.position,this.view,D,l());null!=O&&(g=!0,d.translate(Vt.create(O)))}}),this.view.setAttrs(o,e);let m=!1;if(null!=u){const _=this.view.getBoundingRectOfElement(e);if(_.width>0&&_.height>0){const D=Io.transformRectangle(_,h);Object.keys(u).forEach(L=>{const O=u[L],Z=this.getDefinition(L);if(null!=Z){const le=Ti(Z.offset,this.view,O,{elem:e,cell:this.cell,view:this.view,attrs:i,refBBox:D});null!=le&&(m=!0,d.translate(Vt.create(le)))}})}}(null!=c||g||m)&&(d.round(1),h.e=d.x,h.f=d.y,e.setAttribute("transform",y0(h)))}update(e,t,n){const i={},o=this.findAttrs(n.attrs||t,e,i,n.selectors),a=n.attrs?this.findAttrs(t,e,i,n.selectors):o,s=[];o.each(c=>{const f=c.elem,h=c.attrs,d=this.processAttrs(f,h);if(null==d.set&&null==d.position&&null==d.offset)this.view.setAttrs(d.normal,f);else{const g=a.get(f),m=g?g.attrs:null,_=m&&null==h.ref?m.ref:h.ref;let D;if(_){if(D=(i[_]||this.view.find(_,e,n.selectors))[0],!D)throw new Error(`"${_}" reference does not exist.`)}else D=null;const L={node:f,refNode:D,attributes:m,processedAttributes:d},O=s.findIndex(Z=>Z.refNode===f);O>-1?s.splice(O,0,L):s.push(L)}});const u=new HA;let l;s.forEach(c=>{const f=c.node,h=c.refNode;let d;const g=null!=h&&null!=n.rotatableNode&&A4(n.rotatableNode,h);if(h&&(d=u.get(h)),!d){const D=g?n.rotatableNode:e;d=h?Io.getBBox(h,{target:D}):n.rootBBox,h&&u.set(h,d)}let m;n.attrs&&c.attributes?(m=this.processAttrs(f,c.attributes),this.mergeProcessedAttrs(m,c.processedAttributes)):m=c.processedAttributes;let _=d;g&&null!=n.rotatableNode&&!n.rotatableNode.contains(f)&&(l||(l=Zy($o(n.rotatableNode,"transform"))),_=Io.transformRectangle(d,l)),this.updateRelativeAttrs(f,m,_)})}}class T6{get cell(){return this.view.cell}constructor(e,t,n=[]){this.view=e;const i={},o={};let a=0;Object.keys(t).forEach(u=>{let l=t[u];Array.isArray(l)||(l=[l]),l.forEach(c=>{let f=i[c];f||(a+=1,f=i[c]=1<<a),o[u]|=f})});let s=n;if(Array.isArray(s)||(s=[s]),s.forEach(u=>{i[u]||(a+=1,i[u]=1<<a)}),a>25)throw new Error("Maximum number of flags exceeded.");this.flags=i,this.attrs=o,this.bootstrap=n}getFlag(e){const t=this.flags;return null==t?0:Array.isArray(e)?e.reduce((n,i)=>n|t[i],0):0|t[e]}hasAction(e,t){return e&this.getFlag(t)}removeAction(e,t){return e^e&this.getFlag(t)}getBootstrapFlag(){return this.getFlag(this.bootstrap)}getChangedFlag(){let e=0;return this.attrs&&Object.keys(this.attrs).forEach(t=>{this.cell.hasChanged(t)&&(e|=this.attrs[t])}),e}}let fu=(()=>{class r extends Aa{static getDefaults(){return this.defaults}static config(t){this.defaults=this.getOptions(t)}static getOptions(t){const n=(c,f)=>null!=f?Cj([...Array.isArray(c)?c:[c],...Array.isArray(f)?f:[f]]):Array.isArray(c)?[...c]:[c],i=Oa(this.getDefaults()),{bootstrap:o,actions:a,events:s,documentEvents:u}=t,l=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(t,["bootstrap","actions","events","documentEvents"]);return o&&(i.bootstrap=n(i.bootstrap,o)),a&&Object.keys(a).forEach(c=>{const f=a[c],h=i.actions[c];f&&h?i.actions[c]=n(h,f):f&&(i.actions[c]=n(f))}),s&&(i.events=Object.assign(Object.assign({},i.events),s)),t.documentEvents&&(i.documentEvents=Object.assign(Object.assign({},i.documentEvents),u)),ja(i,l)}get[Symbol.toStringTag](){return r.toStringTag}constructor(t,n={}){super(),this.cell=t,this.options=this.ensureOptions(n),this.graph=this.options.graph,this.attr=new D6(this),this.flag=new T6(this,this.options.actions,this.options.bootstrap),this.cache=new K1e(this),this.setContainer(this.ensureContainer()),this.setup(),this.init()}init(){}onRemove(){this.removeTools()}get priority(){return this.options.priority}get rootSelector(){return this.options.rootSelector}getConstructor(){return this.constructor}ensureOptions(t){return this.getConstructor().getOptions(t)}getContainerTagName(){return this.options.isSvgElement?"g":"div"}getContainerStyle(){}getContainerAttrs(){return{"data-cell-id":this.cell.id,"data-shape":this.cell.shape}}getContainerClassName(){return this.prefixClassName("cell")}ensureContainer(){return Aa.createElement(this.getContainerTagName(),this.options.isSvgElement)}setContainer(t){if(this.container!==t){this.undelegateEvents(),this.container=t,null!=this.options.events&&this.delegateEvents(this.options.events);const n=this.getContainerAttrs();null!=n&&this.setAttrs(n,t);const i=this.getContainerStyle();null!=i&&this.setStyle(i,t);const o=this.getContainerClassName();null!=o&&this.addClass(o,t)}return this}isNodeView(){return!1}isEdgeView(){return!1}render(){return this}confirmUpdate(t,n={}){return 0}getBootstrapFlag(){return this.flag.getBootstrapFlag()}getFlag(t){return this.flag.getFlag(t)}hasAction(t,n){return this.flag.hasAction(t,n)}removeAction(t,n){return this.flag.removeAction(t,n)}handleAction(t,n,i,o){if(this.hasAction(t,n)){i();const a=[n];return o&&("string"==typeof o?a.push(o):a.push(...o)),this.removeAction(t,a)}return t}setup(){this.cell.on("changed",({options:t})=>this.onAttrsChange(t))}onAttrsChange(t){let n=this.flag.getChangedFlag();t.updated||!n||(t.dirty&&this.hasAction(n,"update")&&(n|=this.getFlag("render")),t.toolId&&(t.async=!1),null!=this.graph&&this.graph.renderer.requestViewUpdate(this,n,t))}parseJSONMarkup(t,n){const i=aa.parseJSONMarkup(t),o=i.selectors,a=this.rootSelector;if(n&&a){if(o[a])throw new Error("Invalid root selector");o[a]=n}return i}can(t){let n=this.graph.options.interacting;if("function"==typeof n&&(n=Ti(n,this.graph,this)),"object"==typeof n){let i=n[t];return"function"==typeof i&&(i=Ti(i,this.graph,this)),!1!==i}return"boolean"==typeof n&&n}cleanCache(){return this.cache.clean(),this}getCache(t){return this.cache.get(t)}getDataOfElement(t){return this.cache.getData(t)}getMatrixOfElement(t){return this.cache.getMatrix(t)}getShapeOfElement(t){return this.cache.getShape(t)}getBoundingRectOfElement(t){return this.cache.getBoundingRect(t)}getBBoxOfElement(t){const n=this.getBoundingRectOfElement(t),i=this.getMatrixOfElement(t),o=this.getRootRotatedMatrix(),a=this.getRootTranslatedMatrix();return Io.transformRectangle(n,a.multiply(o).multiply(i))}getUnrotatedBBoxOfElement(t){const n=this.getBoundingRectOfElement(t),i=this.getMatrixOfElement(t),o=this.getRootTranslatedMatrix();return Io.transformRectangle(n,o.multiply(i))}getBBox(t={}){let n;if(t.useCellGeometry){const i=this.cell,o=i.isNode()?i.getAngle():0;n=i.getBBox().bbox(o)}else n=this.getBBoxOfElement(this.container);return this.graph.coord.localToGraphRect(n)}getRootTranslatedMatrix(){const t=this.cell,n=t.isNode()?t.getPosition():{x:0,y:0};return Ns().translate(n.x,n.y)}getRootRotatedMatrix(){let t=Ns();const n=this.cell,i=n.isNode()?n.getAngle():0;if(i){const o=n.getBBox(),a=o.width/2,s=o.height/2;t=t.translate(a,s).rotate(i).translate(-a,-s)}return t}findMagnet(t=this.container){return this.findByAttr("magnet",t)}updateAttrs(t,n,i={}){null==i.rootBBox&&(i.rootBBox=new _r),null==i.selectors&&(i.selectors=this.selectors),this.attr.update(t,n,i)}isEdgeElement(t){return this.cell.isEdge()&&(null==t||t===this.container)}prepareHighlight(t,n={}){const i=t||this.container;return n.partial=i===this.container,i}highlight(t,n={}){const i=this.prepareHighlight(t,n);return this.notify("cell:highlight",{magnet:i,options:n,view:this,cell:this.cell}),this.isEdgeView()?this.notify("edge:highlight",{magnet:i,options:n,view:this,edge:this.cell,cell:this.cell}):this.isNodeView()&&this.notify("node:highlight",{magnet:i,options:n,view:this,node:this.cell,cell:this.cell}),this}unhighlight(t,n={}){const i=this.prepareHighlight(t,n);return this.notify("cell:unhighlight",{magnet:i,options:n,view:this,cell:this.cell}),this.isNodeView()?this.notify("node:unhighlight",{magnet:i,options:n,view:this,node:this.cell,cell:this.cell}):this.isEdgeView()&&this.notify("edge:unhighlight",{magnet:i,options:n,view:this,edge:this.cell,cell:this.cell}),this}notifyUnhighlight(t,n){}getEdgeTerminal(t,n,i,o,a){const s=this.cell,u=this.findAttr("port",t),l=t.getAttribute("data-selector"),c={cell:s.id};return null!=l&&(c.magnet=l),null!=u?(c.port=u,s.isNode()&&!s.hasPort(u)&&null==l&&(c.selector=this.getSelector(t))):null==l&&this.container!==t&&(c.selector=this.getSelector(t)),c}getMagnetFromEdgeTerminal(t){const n=this.cell,i=this.container,o=t.port;let s,a=t.magnet;return null!=o&&n.isNode()&&n.hasPort(o)?s=this.findPortElem(o,a)||i:(a||(a=t.selector),!a&&null!=o&&(a=`[port="${o}"]`),s=this.findOne(a,i,this.selectors)),s}hasTools(t){const n=this.tools;return null!=n&&(null==t||n.name===t)}addTools(t){if(!this.can("toolsAddable"))return this;if(this.removeTools(),t){const n=Za.isToolsView(t)?t:new Za(t);this.tools=n,n.config({view:this}),n.mount()}return this}updateTools(t={}){return this.tools&&this.tools.update(t),this}removeTools(){return this.tools&&(this.tools.remove(),this.tools=null),this}hideTools(){return this.tools&&this.tools.hide(),this}showTools(){return this.tools&&this.tools.show(),this}renderTools(){const t=this.cell.getTools();return this.addTools(t),this}notify(t,n){return this.trigger(t,n),this.graph.trigger(t,n),this}getEventArgs(t,n,i){const o=this,a=o.cell;return null==n||null==i?{e:t,view:o,cell:a}:{e:t,x:n,y:i,view:o,cell:a}}onClick(t,n,i){this.notify("cell:click",this.getEventArgs(t,n,i))}onDblClick(t,n,i){this.notify("cell:dblclick",this.getEventArgs(t,n,i))}onContextMenu(t,n,i){this.notify("cell:contextmenu",this.getEventArgs(t,n,i))}onMouseDown(t,n,i){this.cell.model&&(this.cachedModelForMouseEvent=this.cell.model,this.cachedModelForMouseEvent.startBatch("mouse")),this.notify("cell:mousedown",this.getEventArgs(t,n,i))}onMouseUp(t,n,i){this.notify("cell:mouseup",this.getEventArgs(t,n,i)),this.cachedModelForMouseEvent&&(this.cachedModelForMouseEvent.stopBatch("mouse",{cell:this.cell}),this.cachedModelForMouseEvent=null)}onMouseMove(t,n,i){this.notify("cell:mousemove",this.getEventArgs(t,n,i))}onMouseOver(t){this.notify("cell:mouseover",this.getEventArgs(t))}onMouseOut(t){this.notify("cell:mouseout",this.getEventArgs(t))}onMouseEnter(t){this.notify("cell:mouseenter",this.getEventArgs(t))}onMouseLeave(t){this.notify("cell:mouseleave",this.getEventArgs(t))}onMouseWheel(t,n,i,o){this.notify("cell:mousewheel",Object.assign({delta:o},this.getEventArgs(t,n,i)))}onCustomEvent(t,n,i,o){this.notify("cell:customevent",Object.assign({name:n},this.getEventArgs(t,i,o))),this.notify(n,Object.assign({},this.getEventArgs(t,i,o)))}onMagnetMouseDown(t,n,i,o){}onMagnetDblClick(t,n,i,o){}onMagnetContextMenu(t,n,i,o){}onLabelMouseDown(t,n,i){}checkMouseleave(t){const n=this.getEventTarget(t,{fromPoint:!0}),i=this.graph.findViewByElem(n);i!==this&&(this.onMouseLeave(t),i&&i.onMouseEnter(t))}}return r.defaults={isSvgElement:!0,rootSelector:"root",priority:0,bootstrap:[],actions:{}},r})();(function(r){r.Flag=T6,r.Attr=D6})(fu||(fu={})),function(r){r.toStringTag=`X6.${r.name}`,r.isCellView=function e(t){if(null==t)return!1;if(t instanceof r)return!0;const n=t[Symbol.toStringTag];return(null==n||n===r.toStringTag)&&"function"==typeof t.isNodeView&&"function"==typeof t.isEdgeView&&"function"==typeof t.confirmUpdate}}(fu||(fu={})),function(r){r.priority=function e(n){return function(i){i.config({priority:n})}},r.bootstrap=function t(n){return function(i){i.config({bootstrap:n})}}}(fu||(fu={})),function(r){r.registry=Ga.create({type:"view"})}(fu||(fu={}));class Za extends Aa{get name(){return this.options.name}get graph(){return this.cellView.graph}get cell(){return this.cellView.cell}get[Symbol.toStringTag](){return Za.toStringTag}constructor(e={}){super(),this.svgContainer=this.createContainer(!0,e),this.htmlContainer=this.createContainer(!1,e),this.config(e)}createContainer(e,t){const n=e?Aa.createElement("g",!0):Aa.createElement("div",!1);return Mo(n,this.prefixClassName("cell-tools")),t.className&&Mo(n,t.className),n}config(e){if(this.options=Object.assign(Object.assign({},this.options),e),!fu.isCellView(e.view)||e.view===this.cellView)return this;this.cellView=e.view,this.cell.isEdge()?(Mo(this.svgContainer,this.prefixClassName("edge-tools")),Mo(this.htmlContainer,this.prefixClassName("edge-tools"))):this.cell.isNode()&&(Mo(this.svgContainer,this.prefixClassName("node-tools")),Mo(this.htmlContainer,this.prefixClassName("node-tools"))),this.svgContainer.setAttribute("data-cell-id",this.cell.id),this.htmlContainer.setAttribute("data-cell-id",this.cell.id),this.name&&(this.svgContainer.setAttribute("data-tools-name",this.name),this.htmlContainer.setAttribute("data-tools-name",this.name));const t=this.options.items;if(!Array.isArray(t))return this;this.tools=[];const n=[];t.forEach(i=>{Za.ToolItem.isToolItem(i)?"vertices"===i.name?n.unshift(i):n.push(i):"vertices"===("object"==typeof i?i.name:i)?n.unshift(i):n.push(i)});for(let i=0;i<n.length;i+=1){const o=n[i];let a;if(Za.ToolItem.isToolItem(o))a=o;else{const s="object"==typeof o?o.name:o,u="object"==typeof o&&o.args||{};if(s)if(this.cell.isNode()){const l=A0.registry.get(s);if(!l)return A0.registry.onNotFound(s);a=new l(u)}else if(this.cell.isEdge()){const l=D0.registry.get(s);if(!l)return D0.registry.onNotFound(s);a=new l(u)}}a&&(a.config(this.cellView,this),a.render(),(!1!==a.options.isSVGElement?this.svgContainer:this.htmlContainer).appendChild(a.container),this.tools.push(a))}return this}update(e={}){const t=this.tools;return t&&t.forEach(n=>{e.toolId!==n.cid&&n.isVisible()&&n.update()}),this}focus(e){const t=this.tools;return t&&t.forEach(n=>{e===n?n.show():n.hide()}),this}blur(e){const t=this.tools;return t&&t.forEach(n=>{n!==e&&!n.isVisible()&&(n.show(),n.update())}),this}hide(){return this.focus(null)}show(){return this.blur(null)}remove(){const e=this.tools;return e&&(e.forEach(t=>t.remove()),this.tools=null),m0(this.svgContainer),m0(this.htmlContainer),super.remove()}mount(){const e=this.tools,t=this.cellView;if(t&&e){const n=e.some(o=>!1!==o.options.isSVGElement),i=e.some(o=>!1===o.options.isSVGElement);n&&(this.options.local?t.container:t.graph.view.decorator).appendChild(this.svgContainer),i&&this.graph.container.appendChild(this.htmlContainer)}return this}}(function(r){r.toStringTag=`X6.${r.name}`,r.isToolsView=function e(t){if(null==t)return!1;if(t instanceof r)return!0;const n=t[Symbol.toStringTag];return(null==n||n===r.toStringTag)&&null!=t.graph&&null!=t.cell&&"function"==typeof t.config&&"function"==typeof t.update&&"function"==typeof t.focus&&"function"==typeof t.blur&&"function"==typeof t.show&&"function"==typeof t.hide}})(Za||(Za={})),function(r){let e=(()=>{class t extends Aa{static getDefaults(){return this.defaults}static config(i){this.defaults=this.getOptions(i)}static getOptions(i){return ja(Oa(this.getDefaults()),i)}get graph(){return this.cellView.graph}get cell(){return this.cellView.cell}get name(){return this.options.name}get[Symbol.toStringTag](){return t.toStringTag}constructor(i={}){super(),this.visible=!0,this.options=this.getOptions(i),this.container=Aa.createElement(this.options.tagName||"g",!1!==this.options.isSVGElement),Mo(this.container,this.prefixClassName("cell-tool")),"string"==typeof this.options.className&&Mo(this.container,this.options.className),this.init()}init(){}getOptions(i){return this.constructor.getOptions(i)}delegateEvents(){return this.options.events&&super.delegateEvents(this.options.events),this}config(i,o){return this.cellView=i,this.parent=o,this.stamp(this.container),this.cell.isEdge()?Mo(this.container,this.prefixClassName("edge-tool")):this.cell.isNode()&&Mo(this.container,this.prefixClassName("node-tool")),this.name&&this.container.setAttribute("data-tool-name",this.name),this.delegateEvents(),this}render(){this.empty();const i=this.options.markup;if(i){const o=aa.parseJSONMarkup(i);this.container.appendChild(o.fragment),this.childNodes=o.selectors}return this.onRender(),this}onRender(){}update(){return this}stamp(i){i&&i.setAttribute("data-cell-id",this.cellView.cell.id)}show(){return this.container.style.display="",this.visible=!0,this}hide(){return this.container.style.display="none",this.visible=!1,this}isVisible(){return this.visible}focus(){const i=this.options.focusOpacity;return null!=i&&Number.isFinite(i)&&(this.container.style.opacity=`${i}`),this.parent.focus(this),this}blur(){return this.container.style.opacity="",this.parent.blur(this),this}guard(i){return null==this.graph||null==this.cellView||this.graph.view.guard(i,this.cellView)}}return t.defaults={isSVGElement:!0,tagName:"g"},t})();r.ToolItem=e,function(t){let n=0;t.define=function o(a){const s=bA(function i(a){return a?MA(a):(n+=1,`CustomTool${n}`)}(a.name),this);return s.config(a),s}}(e=r.ToolItem||(r.ToolItem={})),function(t){t.toStringTag=`X6.${t.name}`,t.isToolItem=function n(i){if(null==i)return!1;if(i instanceof t)return!0;const o=i[Symbol.toStringTag];return(null==o||o===t.toStringTag)&&null!=i.graph&&null!=i.cell&&"function"==typeof i.config&&"function"==typeof i.update&&"function"==typeof i.focus&&"function"==typeof i.blur&&"function"==typeof i.show&&"function"==typeof i.hide&&"function"==typeof i.isVisible}}(e=r.ToolItem||(r.ToolItem={}))}(Za||(Za={}));const Q1e=r=>r;function I6(r,e){return 0===e?"0%":`${Math.round(r/e*100)}%`}function O6(r){return(t,n,i,o)=>n.isEdgeElement(i)?function ewe(r,e,t,n,i){const o=t.getConnection();if(!o)return e;const a=o.closestPointLength(i);if(r){const s=o.length();e.anchor={name:"ratio",args:{ratio:a/s}}}else e.anchor={name:"length",args:{length:a}};return e}(r,t,n,0,o):function J1e(r,e,t,n,i){const o=t.cell,a=o.getAngle(),s=t.getUnrotatedBBoxOfElement(n),u=o.getBBox().getCenter(),l=Vt.create(i).rotate(a,u);let c=l.x-s.x,f=l.y-s.y;return r&&(c=I6(c,s.width),f=I6(f,s.height)),e.anchor={name:"topLeft",args:{dx:c,dy:f,rotate:!0}},e}(r,t,n,i,o)}const twe=O6(!0),nwe=O6(!1);var QA;function P6(r,e,t,n){return Ti(QA.presets.pinRelative,this.graph,{},e,t,r,this.cell,n,{}).anchor}function N6(r,e){return e?r.cell.getBBox():r.cell.isEdge()?r.getConnection().bbox():r.getUnrotatedBBoxOfElement(r.container)}!function(r){r.presets=ae,r.registry=Ga.create({type:"connection strategy"}),r.registry.register(r.presets,!0)}(QA||(QA={}));class Jd extends Za.ToolItem{onRender(){Mo(this.container,this.prefixClassName("cell-tool-button")),this.update()}update(){return this.updatePosition(),this}updatePosition(){const t=this.cellView.cell.isEdge()?this.getEdgeMatrix():this.getNodeMatrix();b0(this.container,t,{absolute:!0})}getNodeMatrix(){const e=this.cellView,t=this.options;let{x:n=0,y:i=0}=t;const{offset:o,useCellGeometry:a,rotate:s}=t;let u=N6(e,a);const l=e.cell.getAngle();s||(u=u.bbox(l));let c=0,f=0;"number"==typeof o?(c=o,f=o):"object"==typeof o&&(c=o.x,f=o.y),n=Gh(n,u.width),i=Gh(i,u.height);let h=Ns().translate(u.x+u.width/2,u.y+u.height/2);return s&&(h=h.rotate(l)),h=h.translate(n+c-u.width/2,i+f-u.height/2),h}getEdgeMatrix(){const e=this.cellView,t=this.options,{offset:n=0,distance:i=0,rotate:o}=t;let a,s,u;const l=Gh(i,1);a=l>=0&&l<=1?e.getTangentAtRatio(l):e.getTangentAtLength(l),a?(s=a.start,u=a.vector().vectorAngle(new Vt(1,0))||0):(s=e.getConnection().start,u=0);let c=Ns().translate(s.x,s.y).rotate(u);return c="object"==typeof n?c.translate(n.x||0,n.y||0):c.translate(0,n),o||(c=c.rotate(-u)),c}onMouseDown(e){if(this.guard(e))return;e.stopPropagation(),e.preventDefault();const t=this.options.onClick;"function"==typeof t&&Ti(t,this.cellView,{e,view:this.cellView,cell:this.cellView.cell,btn:this})}}(function(r){r.config({name:"button",useCellGeometry:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"}})})(Jd||(Jd={})),function(r){r.Remove=r.define({name:"button-remove",markup:[{tagName:"circle",selector:"button",attrs:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attrs:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],distance:60,offset:0,useCellGeometry:!0,onClick({view:e,btn:t}){t.parent.remove(),e.cell.remove({ui:!0,toolId:t.cid})}})}(Jd||(Jd={}));class Fx extends Za.ToolItem{onRender(){if(Mo(this.container,this.prefixClassName("cell-tool-boundary")),this.options.attrs){const e=this.options.attrs,{class:t}=e,n=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(e,["class"]);$o(this.container,Yy(n)),t&&Mo(this.container,t)}this.update()}update(){const e=this.cellView,t=this.options,{useCellGeometry:n,rotate:i}=t,o=hp(t.padding);let a=N6(e,n).moveAndExpand({x:-o.left,y:-o.top,width:o.left+o.right,height:o.top+o.bottom});const s=e.cell;if(s.isNode()){const u=s.getAngle();if(u)if(i){const l=s.getBBox().getCenter();GA(this.container,u,l.x,l.y,{absolute:!0})}else a=a.bbox(u)}return $o(this.container,a.toJSON()),this}}!function(r){r.config({name:"boundary",tagName:"rect",padding:10,useCellGeometry:!0,attrs:{fill:"none",stroke:"#333","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"}})}(Fx||(Fx={}));class sb extends Za.ToolItem{constructor(){super(...arguments),this.handles=[]}get vertices(){return this.cellView.cell.getVertices()}onRender(){return this.addClass(this.prefixClassName("edge-tool-vertices")),this.options.addable&&this.updatePath(),this.resetHandles(),this.renderHandles(),this}update(){return this.vertices.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.addable&&this.updatePath(),this}resetHandles(){const e=this.handles;this.handles=[],e&&e.forEach(t=>{this.stopHandleListening(t),t.remove()})}renderHandles(){const e=this.vertices;for(let t=0,n=e.length;t<n;t+=1){const i=e[t],a=this.options.processHandle,s=(0,this.options.createHandle)({index:t,graph:this.graph,guard:u=>this.guard(u),attrs:this.options.attrs||{}});a&&a(s),s.updatePosition(i.x,i.y),this.stamp(s.container),this.container.appendChild(s.container),this.handles.push(s),this.startHandleListening(s)}}updateHandles(){const e=this.vertices;for(let t=0,n=e.length;t<n;t+=1){const i=e[t],o=this.handles[t];o&&o.updatePosition(i.x,i.y)}}updatePath(){const e=this.childNodes.connection;e&&e.setAttribute("d",this.cellView.getConnectionPathData())}startHandleListening(e){const t=this.cellView;t.can("vertexMovable")&&(e.on("change",this.onHandleChange,this),e.on("changing",this.onHandleChanging,this),e.on("changed",this.onHandleChanged,this)),t.can("vertexDeletable")&&e.on("remove",this.onHandleRemove,this)}stopHandleListening(e){const t=this.cellView;t.can("vertexMovable")&&(e.off("change",this.onHandleChange,this),e.off("changing",this.onHandleChanging,this),e.off("changed",this.onHandleChanged,this)),t.can("vertexDeletable")&&e.off("remove",this.onHandleRemove,this)}getNeighborPoints(e){const t=this.cellView,n=this.vertices,o=e<n.length-1?n[e+1]:t.targetAnchor;return{prev:Vt.create(e>0?n[e-1]:t.sourceAnchor),next:Vt.create(o)}}getMouseEventArgs(e){const t=this.normalizeEvent(e),{x:n,y:i}=this.graph.snapToGrid(t.clientX,t.clientY);return{e:t,x:n,y:i}}onHandleChange({e}){this.focus();const t=this.cellView;if(t.cell.startBatch("move-vertex",{ui:!0,toolId:this.cid}),!this.options.stopPropagation){const{e:n,x:i,y:o}=this.getMouseEventArgs(e);t.notifyMouseDown(n,i,o)}}onHandleChanging({handle:e,e:t}){const n=this.cellView,i=e.options.index,{e:o,x:a,y:s}=this.getMouseEventArgs(t),u={x:a,y:s};this.snapVertex(u,i),n.cell.setVertexAt(i,u,{ui:!0,toolId:this.cid}),e.updatePosition(u.x,u.y),this.options.stopPropagation||n.notifyMouseMove(o,a,s)}onHandleChanged({e}){const t=this.options,n=this.cellView;if(t.addable&&this.updatePath(),!t.removeRedundancies)return;n.removeRedundantLinearVertices({ui:!0,toolId:this.cid})&&this.render(),this.blur(),n.cell.stopBatch("move-vertex",{ui:!0,toolId:this.cid}),this.eventData(e).vertexAdded&&n.cell.stopBatch("add-vertex",{ui:!0,toolId:this.cid});const{e:o,x:a,y:s}=this.getMouseEventArgs(e);this.options.stopPropagation||n.notifyMouseUp(o,a,s),n.checkMouseleave(o),t.onChanged&&t.onChanged({edge:n.cell,edgeView:n})}snapVertex(e,t){const n=this.options.snapRadius||0;if(n>0){const i=this.getNeighborPoints(t),o=i.prev,a=i.next;Math.abs(e.x-o.x)<n?e.x=o.x:Math.abs(e.x-a.x)<n&&(e.x=a.x),Math.abs(e.y-o.y)<n?e.y=i.prev.y:Math.abs(e.y-a.y)<n&&(e.y=a.y)}}onHandleRemove({handle:e,e:t}){if(this.options.removable){const i=this.cellView;i.cell.removeVertexAt(e.options.index,{ui:!0}),this.options.addable&&this.updatePath(),i.checkMouseleave(this.normalizeEvent(t))}}onPathMouseDown(e){const t=this.cellView;if(this.guard(e)||!this.options.addable||!t.can("vertexAddable"))return;e.stopPropagation(),e.preventDefault();const n=this.normalizeEvent(e),i=this.graph.snapToGrid(n.clientX,n.clientY).toJSON();t.cell.startBatch("add-vertex",{ui:!0,toolId:this.cid});const o=t.getVertexIndex(i.x,i.y);this.snapVertex(i,o),t.cell.insertVertex(i,o,{ui:!0,toolId:this.cid}),this.render();const a=this.handles[o];this.eventData(n,{vertexAdded:!0}),a.onMouseDown(n)}onRemove(){this.resetHandles()}}(function(r){r.Handle=class e extends Aa{get graph(){return this.options.graph}constructor(n){super(),this.options=n,this.render(),this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDoubleClick"})}render(){this.container=Aa.createElement("circle",!0);const n=this.options.attrs;if("function"==typeof n){const i=r.getDefaults();this.setAttrs(Object.assign(Object.assign({},i.attrs),n(this)))}else this.setAttrs(n);this.addClass(this.prefixClassName("edge-tool-vertex"))}updatePosition(n,i){this.setAttrs({cx:n,cy:i})}onMouseDown(n){this.options.guard(n)||(n.stopPropagation(),n.preventDefault(),this.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},n.data),this.emit("change",{e:n,handle:this}))}onMouseMove(n){this.emit("changing",{e:n,handle:this})}onMouseUp(n){this.emit("changed",{e:n,handle:this}),this.undelegateDocumentEvents(),this.graph.view.delegateEvents()}onDoubleClick(n){this.emit("remove",{e:n,handle:this})}}})(sb||(sb={})),function(r){const e=$s.prefix("edge-tool-vertex-path");r.config({name:"vertices",snapRadius:20,addable:!0,removable:!0,removeRedundancies:!0,stopPropagation:!0,attrs:{r:6,fill:"#333",stroke:"#fff",cursor:"move","stroke-width":2},createHandle:t=>new r.Handle(t),markup:[{tagName:"path",selector:"connection",className:e,attrs:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"pointer"}}],events:{[`mousedown .${e}`]:"onPathMouseDown",[`touchstart .${e}`]:"onPathMouseDown"}})}(sb||(sb={}));class ub extends Za.ToolItem{constructor(){super(...arguments),this.handles=[]}get vertices(){return this.cellView.cell.getVertices()}update(){return this.render(),this}onRender(){Mo(this.container,this.prefixClassName("edge-tool-segments")),this.resetHandles();const e=this.cellView,t=[...this.vertices];t.unshift(e.sourcePoint),t.push(e.targetPoint);for(let n=0,i=t.length;n<i-1;n+=1){const s=this.renderHandle(t[n],t[n+1],n);this.stamp(s.container),this.handles.push(s)}return this}renderHandle(e,t,n){const i=this.options.createHandle({index:n,graph:this.graph,guard:o=>this.guard(o),attrs:this.options.attrs||{}});return this.options.processHandle&&this.options.processHandle(i),this.updateHandle(i,e,t),this.container.appendChild(i.container),this.startHandleListening(i),i}startHandleListening(e){e.on("change",this.onHandleChange,this),e.on("changing",this.onHandleChanging,this),e.on("changed",this.onHandleChanged,this)}stopHandleListening(e){e.off("change",this.onHandleChange,this),e.off("changing",this.onHandleChanging,this),e.off("changed",this.onHandleChanged,this)}resetHandles(){const e=this.handles;this.handles=[],e&&e.forEach(t=>{this.stopHandleListening(t),t.remove()})}shiftHandleIndexes(e){const t=this.handles;for(let n=0,i=t.length;n<i;n+=1)t[n].options.index+=e}resetAnchor(e,t){const n=this.cellView.cell,i={ui:!0,toolId:this.cid};t?n.prop([e,"anchor"],t,i):n.removeProp([e,"anchor"],i)}snapHandle(e,t,n){const i=e.options.axis,o=e.options.index,u=this.cellView.cell.getVertices(),l=u[o-2]||n.sourceAnchor,c=u[o+1]||n.targetAnchor,f=this.options.snapRadius;return Math.abs(t[i]-l[i])<f?t[i]=l[i]:Math.abs(t[i]-c[i])<f&&(t[i]=c[i]),t}onHandleChanging({handle:e,e:t}){const n=this.graph,i=this.options,o=this.cellView,a=i.anchor,s=e.options.axis,u=e.options.index-1,l=this.getEventData(t),c=this.normalizeEvent(t),f=n.snapToGrid(c.clientX,c.clientY),h=this.snapHandle(e,f.clone(),l),d=Oa(this.vertices);let g=d[u],m=d[u+1];const _=o.sourceView,D=o.sourceBBox;let L=!1,O=!1;if(g?0===u?D.containsPoint(g)?(d.shift(),this.shiftHandleIndexes(-1),L=!0):(g[s]=h[s],O=!0):g[s]=h[s]:(g=o.sourceAnchor.toJSON(),g[s]=h[s],D.containsPoint(g)?L=!0:(d.unshift(g),this.shiftHandleIndexes(1),O=!0)),"function"==typeof a&&_){if(L){const Re=l.sourceAnchor.clone();Re[s]=h[s];const Ve=Ti(a,o,Re,_,o.sourceMagnet||_.container,"source",o,this);this.resetAnchor("source",Ve)}O&&this.resetAnchor("source",l.sourceAnchorDef)}const Z=o.targetView,le=o.targetBBox;let pe=!1,Ee=!1;if(m?u===d.length-2?le.containsPoint(m)?(d.pop(),pe=!0):(m[s]=h[s],Ee=!0):m[s]=h[s]:(m=o.targetAnchor.toJSON(),m[s]=h[s],le.containsPoint(m)?pe=!0:(d.push(m),Ee=!0)),"function"==typeof a&&Z){if(pe){const Re=l.targetAnchor.clone();Re[s]=h[s];const Ve=Ti(a,o,Re,Z,o.targetMagnet||Z.container,"target",o,this);this.resetAnchor("target",Ve)}Ee&&this.resetAnchor("target",l.targetAnchorDef)}Vt.equalPoints(d,this.vertices)||this.cellView.cell.setVertices(d,{ui:!0,toolId:this.cid}),this.updateHandle(e,g,m,0),i.stopPropagation||o.notifyMouseMove(c,f.x,f.y)}onHandleChange({handle:e,e:t}){const n=this.options,i=this.handles,o=this.cellView,a=e.options.index;if(Array.isArray(i)){for(let s=0,u=i.length;s<u;s+=1)s!==a&&i[s].hide();if(this.focus(),this.setEventData(t,{sourceAnchor:o.sourceAnchor.clone(),targetAnchor:o.targetAnchor.clone(),sourceAnchorDef:Oa(this.cell.prop(["source","anchor"])),targetAnchorDef:Oa(this.cell.prop(["target","anchor"]))}),this.cell.startBatch("move-segment",{ui:!0,toolId:this.cid}),!n.stopPropagation){const s=this.normalizeEvent(t),u=this.graph.snapToGrid(s.clientX,s.clientY);o.notifyMouseDown(s,u.x,u.y)}}}onHandleChanged({e}){const t=this.options,n=this.cellView;t.removeRedundancies&&n.removeRedundantLinearVertices({ui:!0,toolId:this.cid});const i=this.normalizeEvent(e),o=this.graph.snapToGrid(i.clientX,i.clientY);this.render(),this.blur(),this.cell.stopBatch("move-segment",{ui:!0,toolId:this.cid}),t.stopPropagation||n.notifyMouseUp(i,o.x,o.y),n.checkMouseleave(i),t.onChanged&&t.onChanged({edge:n.cell,edgeView:n})}updateHandle(e,t,n,i=0){const o=this.options.precision||0,a=Math.abs(t.x-n.x)<o,s=Math.abs(t.y-n.y)<o;if(a||s){const u=new zr(t,n);if(u.length()<this.options.threshold)e.hide();else{const c=u.getCenter(),f=a?"x":"y";c[f]+=i||0;const h=u.vector().vectorAngle(new Vt(1,0));e.updatePosition(c.x,c.y,h,this.cellView),e.show(),e.options.axis=f}}else e.hide()}onRemove(){this.resetHandles()}}(function(r){r.Handle=class e extends Aa{constructor(n){super(),this.options=n,this.render(),this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"})}render(){this.container=Aa.createElement("rect",!0);const n=this.options.attrs;if("function"==typeof n){const i=r.getDefaults();this.setAttrs(Object.assign(Object.assign({},i.attrs),n(this)))}else this.setAttrs(n);this.addClass(this.prefixClassName("edge-tool-segment"))}updatePosition(n,i,o,a){const s=a.getClosestPoint(new Vt(n,i))||new Vt(n,i);let u=Ns().translate(s.x,s.y);if(s.equals({x:n,y:i}))u=u.rotate(o);else{let c=new zr(n,i,s.x,s.y).vector().vectorAngle(new Vt(1,0));0!==c&&(c+=90),u=u.rotate(c)}this.setAttrs({transform:y0(u),cursor:o%180==0?"row-resize":"col-resize"})}onMouseDown(n){this.options.guard(n)||(this.trigger("change",{e:n,handle:this}),n.stopPropagation(),n.preventDefault(),this.options.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},n.data))}onMouseMove(n){this.emit("changing",{e:n,handle:this})}onMouseUp(n){this.emit("changed",{e:n,handle:this}),this.undelegateDocumentEvents(),this.options.graph.view.delegateEvents()}show(){this.container.style.display=""}hide(){this.container.style.display="none"}}})(ub||(ub={})),function(r){r.config({name:"segments",precision:.5,threshold:40,snapRadius:10,stopPropagation:!0,removeRedundancies:!0,attrs:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#333",stroke:"#fff","stroke-width":2},createHandle:e=>new r.Handle(e),anchor:P6})}(ub||(ub={}));class Bx extends Za.ToolItem{get type(){return this.options.type}onRender(){Mo(this.container,this.prefixClassName(`edge-tool-${this.type}-anchor`)),this.toggleArea(!1),this.update()}update(){return this.cellView.getTerminalView(this.type)?(this.updateAnchor(),this.updateArea(),this.container.style.display=""):this.container.style.display="none",this}updateAnchor(){const e=this.childNodes;if(!e)return;const t=e.anchor;if(!t)return;const n=this.type,i=this.cellView,o=this.options,a=i.getTerminalAnchor(n),s=i.cell.prop([n,"anchor"]);t.setAttribute("transform",`translate(${a.x}, ${a.y})`);const u=s?o.customAnchorAttrs:o.defaultAnchorAttrs;u&&Object.keys(u).forEach(l=>{t.setAttribute(l,u[l])})}updateArea(){const e=this.childNodes;if(!e)return;const t=e.area;if(!t)return;const n=this.type,i=this.cellView,o=i.getTerminalView(n);if(o){const a=o.cell,s=i.getTerminalMagnet(n);let l,c,f,u=this.options.areaPadding||0;Number.isFinite(u)||(u=0),o.isEdgeElement(s)?(l=o.getBBox(),c=0,f=l.getCenter()):(l=o.getUnrotatedBBoxOfElement(s),c=a.getAngle(),f=l.getCenter(),c&&f.rotate(-c,a.getBBox().getCenter())),l.inflate(u),$o(t,{x:-l.width/2,y:-l.height/2,width:l.width,height:l.height,transform:`translate(${f.x}, ${f.y}) rotate(${c})`})}}toggleArea(e){if(this.childNodes){const t=this.childNodes.area;t&&(t.style.display=e?"":"none")}}onMouseDown(e){this.guard(e)||(e.stopPropagation(),e.preventDefault(),this.graph.view.undelegateEvents(),this.options.documentEvents&&this.delegateDocumentEvents(this.options.documentEvents),this.focus(),this.toggleArea(this.options.restrictArea),this.cell.startBatch("move-anchor",{ui:!0,toolId:this.cid}))}resetAnchor(e){const t=this.type,n=this.cell;e?n.prop([t,"anchor"],e,{rewrite:!0,ui:!0,toolId:this.cid}):n.removeProp([t,"anchor"],{ui:!0,toolId:this.cid})}onMouseMove(e){const t=this.type,n=this.cellView,i=n.getTerminalView(t);if(null==i)return;const o=this.normalizeEvent(e),a=i.cell,s=n.getTerminalMagnet(t);let u=this.graph.coord.clientToLocalPoint(o.clientX,o.clientY);const l=this.options.snap;if("function"==typeof l){const h=Ti(l,n,u,i,s,t,n,this);u=Vt.create(h)}if(this.options.restrictArea)if(i.isEdgeElement(s)){const h=i.getClosestPoint(u);h&&(u=h)}else{const h=i.getUnrotatedBBoxOfElement(s),d=a.getAngle(),g=a.getBBox().getCenter(),m=u.clone().rotate(d,g);h.containsPoint(m)||(u=h.getNearestPointToPoint(m).rotate(-d,g))}let c;const f=this.options.anchor;"function"==typeof f&&(c=Ti(f,n,u,i,s,t,n,this)),this.resetAnchor(c),this.update()}onMouseUp(e){this.graph.view.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1),this.options.removeRedundancies&&this.cellView.removeRedundantLinearVertices({ui:!0,toolId:this.cid}),this.cell.stopBatch("move-anchor",{ui:!0,toolId:this.cid})}onDblClick(){const e=this.options.resetAnchor;e&&this.resetAnchor(!0===e?void 0:e),this.update()}}!function(r){r.config({tagName:"g",markup:[{tagName:"circle",selector:"anchor",attrs:{cursor:"pointer"}},{tagName:"rect",selector:"area",attrs:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDblClick"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},customAnchorAttrs:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttrs:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,resetAnchor:!0,restrictArea:!0,removeRedundancies:!0,anchor:P6,snap(e,t,n,i,o,a){const s=a.options.snapRadius||0,u="source"===i,c=this.cell.getVertexAt(u?0:-1)||this.getTerminalAnchor(u?"target":"source");return c&&(Math.abs(c.x-e.x)<s&&(e.x=c.x),Math.abs(c.y-e.y)<s&&(e.y=c.y)),e}})}(Bx||(Bx={}));const iwe=Bx.define({name:"source-anchor",type:"source"}),owe=Bx.define({name:"target-anchor",type:"target"});class jx extends Za.ToolItem{get type(){return this.options.type}get ratio(){return this.options.ratio}init(){if(this.options.attrs){const e=this.options.attrs,{class:t}=e,n=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(e,["class"]);this.setAttrs(n,this.container),t&&Mo(this.container,t)}}onRender(){Mo(this.container,this.prefixClassName(`edge-tool-${this.type}-arrowhead`)),this.update()}update(){const e=this.ratio,t=this.cellView,n=t.getTangentAtRatio(e),i=n?n.start:t.getPointAtRatio(e),o=n&&n.vector().vectorAngle(new Vt(1,0))||0;if(!i)return this;const a=Ns().translate(i.x,i.y).rotate(o);return b0(this.container,a,{absolute:!0}),this}onMouseDown(e){if(this.guard(e))return;e.stopPropagation(),e.preventDefault();const t=this.cellView;if(t.can("arrowheadMovable")){t.cell.startBatch("move-arrowhead",{ui:!0,toolId:this.cid});const n=this.graph.snapToGrid(e.clientX,e.clientY),i=t.prepareArrowheadDragging(this.type,{x:n.x,y:n.y,options:Object.assign(Object.assign({},this.options),{toolId:this.cid})});this.cellView.setEventData(e,i),this.delegateDocumentEvents(this.options.documentEvents,e.data),t.graph.view.undelegateEvents(),this.container.style.pointerEvents="none"}this.focus()}onMouseMove(e){const t=this.normalizeEvent(e),n=this.graph.snapToGrid(t.clientX,t.clientY);this.cellView.onMouseMove(t,n.x,n.y),this.update()}onMouseUp(e){this.undelegateDocumentEvents();const t=this.normalizeEvent(e),n=this.cellView,i=this.graph.snapToGrid(t.clientX,t.clientY);n.onMouseUp(t,i.x,i.y),this.graph.view.delegateEvents(),this.blur(),this.container.style.pointerEvents="",n.cell.stopBatch("move-arrowhead",{ui:!0,toolId:this.cid})}}!function(r){r.config({tagName:"path",isSVGElement:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}})}(jx||(jx={}));const swe=jx.define({name:"source-arrowhead",type:"source",ratio:0,attrs:{d:"M 10 -8 -10 0 10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),uwe=jx.define({name:"target-arrowhead",type:"target",ratio:1,attrs:{d:"M -10 -8 10 0 -10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}});class C0 extends Za.ToolItem{constructor(){super(...arguments),this.labelIndex=-1,this.distance=.5}render(){return this.createElement(),this.updateEditor(),this.autoFocus(),this.delegateDocumentEvents(this.options.documentEvents),this}createElement(){const{cell:e}=this,t=[this.prefixClassName((e.isEdge()?"edge":"node")+"-tool-editor"),this.prefixClassName("cell-tool-editor")];this.editor=Za.createElement("div",!1),this.addClass(t,this.editor),this.editor.contentEditable="true",this.container.appendChild(this.editor)}updateEditor(){const{graph:e,cell:t,editor:n}=this,i=n.style;let o=new Vt,a=20;if(t.isNode())o=t.getBBox().center,a=t.size().width-4;else if(t.isEdge()){const f=this.options.event,h=f.target,d=h.parentElement;if(d&&dp(d,this.prefixClassName("edge-label"))){const m=d.getAttribute("data-index")||"0";this.labelIndex=parseInt(m,10);const _=d.getAttribute("transform"),{translation:D}=Ix(_);o=new Vt(D.tx,D.ty),a=Io.getBBox(h).width}else{if(!this.options.labelAddable)return this;o=e.clientToLocal(Vt.create(f.clientX,f.clientY));const _=this.cellView.path.closestPointLength(o);this.distance=_}}o=e.localToGraph(o),i.left=`${o.x}px`,i.top=`${o.y}px`,i.minWidth=`${a}px`;const s=e.scale();i.transform=`scale(${s.sx}, ${s.sy}) translate(-50%, -50%)`;const u=this.options.attrs;i.fontSize=`${u.fontSize}px`,i.fontFamily=u.fontFamily,i.color=u.color,i.backgroundColor=u.backgroundColor;const l=this.options.getText;let c;return"function"==typeof l&&(c=Ti(l,this.cellView,{cell:this.cell,index:this.labelIndex})),n.innerText=c||"",this.setCellText(""),this}onDocumentMouseDown(e){if(e.target!==this.editor){const t=this.cell,n=this.editor.innerText.replace(/\n$/,"")||"";this.setCellText(n),t.removeTool(t.isEdge()?"edge-editor":"node-editor"),this.undelegateDocumentEvents()}}onDblClick(e){e.stopPropagation()}onMouseDown(e){e.stopPropagation()}autoFocus(){setTimeout(()=>{this.editor.focus(),this.selectText()})}selectText(){if(window.getSelection){const e=document.createRange(),t=window.getSelection();e.selectNodeContents(this.editor),t.removeAllRanges(),t.addRange(e)}}setCellText(e){const t=this.options.setText;"function"==typeof t&&Ti(t,this.cellView,{cell:this.cell,value:e,index:this.labelIndex,distance:this.distance})}}(function(r){r.config({tagName:"div",isSVGElement:!1,events:{dblclick:"onDblClick",mousedown:"onMouseDown"},documentEvents:{mousedown:"onDocumentMouseDown"}})})(C0||(C0={})),function(r){r.NodeEditor=r.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},getText:({cell:e})=>e.attr("text/text"),setText({cell:e,value:t}){e.attr("text/text",t)}}),r.EdgeEditor=r.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},labelAddable:!0,getText:({cell:e,index:t})=>-1===t?"":e.prop(`labels/${t}/attrs/label/text`),setText({cell:e,value:t,index:n,distance:i}){const o=e;-1===n?o.appendLabel({position:{distance:i},attrs:{label:{text:t}}}):t?o.prop(`labels/${n}/attrs/label/text`,t):"number"==typeof n&&o.removeLabelAt(n)}})}(C0||(C0={}));var A0,D0,L6=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t};!function(r){r.presets={boundary:Fx,button:Jd,"button-remove":Jd.Remove,"node-editor":C0.NodeEditor},r.registry=Ga.create({type:"node tool",process(e,t){if("function"==typeof t)return t;let n=Za.ToolItem;const{inherit:i}=t,o=L6(t,["inherit"]);if(i){const a=this.get(i);null==a?this.onNotFound(i,"inherited"):n=a}return null==o.name&&(o.name=e),n.define.call(n,o)}}),r.registry.register(r.presets,!0)}(A0||(A0={})),function(r){r.presets={boundary:Fx,vertices:sb,segments:ub,button:Jd,"button-remove":Jd.Remove,"source-anchor":iwe,"target-anchor":owe,"source-arrowhead":swe,"target-arrowhead":uwe,"edge-editor":C0.EdgeEditor},r.registry=Ga.create({type:"edge tool",process(e,t){if("function"==typeof t)return t;let n=Za.ToolItem;const{inherit:i}=t,o=L6(t,["inherit"]);if(i){const a=this.get(i);null==a?this.onNotFound(i,"inherited"):n=a}return null==o.name&&(o.name=e),n.define.call(n,o)}}),r.registry.register(r.presets,!0)}(D0||(D0={}));const lwe=Wh("center"),cwe=Wh("topCenter"),fwe=Wh("bottomCenter"),hwe=Wh("leftMiddle"),dwe=Wh("rightMiddle"),gwe=Wh("topLeft"),pwe=Wh("topRight"),vwe=Wh("bottomLeft"),mwe=Wh("bottomRight");function Wh(r){return function(e,t,n,i={}){const o=i.rotate?e.getUnrotatedBBoxOfElement(t):e.getBBoxOfElement(t),a=o[r];a.x+=Gh(i.dx,o.width),a.y+=Gh(i.dy,o.height);const s=e.cell;return i.rotate?a.rotate(-s.getAngle(),s.getBBox().getCenter()):a}}function zx(r){return function(e,t,n,i){if(n instanceof Element){const o=this.graph.findViewByElem(n);let a;return a=o?o.isEdgeElement(n)?k6(o,null!=i.fixedAt?i.fixedAt:"50%"):o.getBBoxOfElement(n).getCenter():new Vt,r.call(this,e,t,a,i)}return r.apply(this,arguments)}}function k6(r,e){const t=zh(e),n="string"==typeof e?parseFloat(e):e;return t?r.getPointAtRatio(n/100):r.getPointAtLength(n)}const ywe=zx(function(r,e,t,n){const i=r.cell.getAngle(),o=r.getBBoxOfElement(e),a=o.getCenter(),s=o.getTopLeft(),u=o.getBottomRight();let l=n.padding;if(Number.isFinite(l)||(l=0),s.y+l<=t.y&&t.y<=u.y-l){const c=t.y-a.y;a.x+=0===i||180===i?0:1*c/Math.tan(oa.toRad(i)),a.y+=c}else if(s.x+l<=t.x&&t.x<=u.x-l){const c=t.x-a.x;a.y+=90===i||270===i?0:c*Math.tan(oa.toRad(i)),a.x+=c}return a}),bwe=function(r,e,t,n,i){const o=r.cell.getConnectionPoint(this.cell,i);return(n.dx||n.dy)&&o.translate(n.dx||0,n.dy||0),o},wwe=zx(function(r,e,t,n){let i,a,o=0;const s=r.cell;n.rotate?(i=r.getUnrotatedBBoxOfElement(e),a=s.getBBox().getCenter(),o=s.getAngle()):i=r.getBBoxOfElement(e);const u=n.padding;null!=u&&Number.isFinite(u)&&i.inflate(u),n.rotate&&t.rotate(o,a);const l=i.getNearestSideToPoint(t);let c;switch(l){case"left":c=i.getLeftMiddle();break;case"right":c=i.getRightMiddle();break;case"top":c=i.getTopCenter();break;case"bottom":c=i.getBottomCenter()}const f=n.direction;return"H"===f?("top"===l||"bottom"===l)&&(c=t.x<=i.x+i.width?i.getLeftMiddle():i.getRightMiddle()):"V"===f&&(c=t.y<=i.y+i.height?i.getTopCenter():i.getBottomCenter()),n.rotate?c.rotate(-o,a):c});var T0;!function(r){r.presets=re,r.registry=Ga.create({type:"node endpoint"}),r.registry.register(r.presets,!0)}(T0||(T0={}));const xwe=function(r,e,t,n){let i=null!=n.ratio?n.ratio:.5;return i>1&&(i/=100),r.getPointAtRatio(i)},Ewe=function(r,e,t,n){return r.getPointAtLength(null!=n.length?n.length:20)},R6=function(r,e,t,n){return r.getClosestPoint(t)??new Vt},_we=zx(R6),Swe=zx(function(r,e,t,n){const o=r.getConnection(),a=r.getConnectionSubdivisions(),s=new zr(t.clone().translate(0,1e6),t.clone().translate(0,-1e6)),u=new zr(t.clone().translate(1e6,0),t.clone().translate(-1e6,0)),l=s.intersect(o,{segmentSubdivisions:a}),c=u.intersect(o,{segmentSubdivisions:a}),f=[];return l&&f.push(...l),c&&f.push(...c),f.length>0?t.closest(f):null!=n.fallbackAt?k6(r,n.fallbackAt):Ti(R6,this,r,e,t,n)});var I0;function Gx(r,e,t){let n;if("object"==typeof t){if(Number.isFinite(t.y)){const o=new zr(e,r),{start:a,end:s}=o.parallel(t.y);e=a,r=s}n=t.x}else n=t;if(null==n||!Number.isFinite(n))return r;const i=r.distance(e);return 0===n&&i>0?r:r.move(e,-Math.min(n,i-1))}function Ux(r){const e=r.getAttribute("stroke-width");return null===e?0:parseFloat(e)||0}!function(r){r.presets=oe,r.registry=Ga.create({type:"edge endpoint"}),r.registry.register(r.presets,!0)}(I0||(I0={}));const F6=function(r,e,t,n){const i=e.getBBoxOfElement(t);n.stroked&&i.inflate(Ux(t)/2);const o=r.intersect(i);return Gx(o&&o.length?r.start.closest(o):r.end,r.start,n.offset)},Cwe=function(r,e,t,n,i){const o=e.cell,a=o.isNode()?o.getAngle():0;if(0===a)return Ti(F6,this,r,e,t,n,i);const s=e.getUnrotatedBBoxOfElement(t);n.stroked&&s.inflate(Ux(t)/2);const u=s.getCenter(),l=r.clone().rotate(a,u),c=l.setLength(1e6).intersect(s);return Gx(c&&c.length?l.start.closest(c).rotate(-a,u):r.end,r.start,n.offset)},Awe=function(r,e,t,n){let i,o;const a=r.end,s=n.selector;if(i="string"==typeof s?e.findOne(s):Array.isArray(s)?wA(t,s):function Mwe(r){if(null==r)return null;let e=r;do{let t=e.tagName;if("string"!=typeof t)return null;if(t=t.toUpperCase(),"G"===t)e=e.firstElementChild;else{if("TITLE"!==t)break;e=e.nextElementSibling}}while(e);return e}(t),!Hd(i)){if(i===t||!Hd(t))return a;i=t}const u=e.getShapeOfElement(i),l=e.getMatrixOfElement(i),c=e.getRootTranslatedMatrix(),f=e.getRootRotatedMatrix(),h=c.multiply(f).multiply(l),d=h.inverse(),g=Io.transformLine(r,d),m=g.start.clone(),_=e.getDataOfElement(i);if(!1===n.insideout){null==_.shapeBBox&&(_.shapeBBox=u.bbox());const Z=_.shapeBBox;if(null!=Z&&Z.containsPoint(m))return a}let D;if(!0===n.extrapolate&&g.setLength(1e6),oi.isPath(u)){const Z=n.precision||2;null==_.segmentSubdivisions&&(_.segmentSubdivisions=u.getSegmentSubdivisions({precision:Z})),D={precision:Z,segmentSubdivisions:_.segmentSubdivisions},o=g.intersect(u,D)}else o=g.intersect(u);o?Array.isArray(o)&&(o=m.closest(o)):!0===n.sticky&&(o=_r.isRectangle(u)?u.getNearestPointToPoint(m):jc.isEllipse(u)?u.intersectsWithLineFromCenterToPoint(m):u.closestPoint(m,D));const L=o?Io.transformPoint(o,h):a;let O=n.offset||0;return!1!==n.stroked&&("object"==typeof O?(O=Object.assign({},O),null==O.x&&(O.x=0),O.x+=Ux(i)/2):O+=Ux(i)/2),Gx(L,r.start,O)},Twe=function(r,e,t,n){const{alignOffset:i,align:o}=n;return o&&function Dwe(r,e,t=0){const{start:n,end:i}=r;let o,a,s,u;switch(e){case"left":u="x",o=i,a=n,s=-1;break;case"right":u="x",o=n,a=i,s=1;break;case"top":u="y",o=i,a=n,s=-1;break;case"bottom":u="y",o=n,a=i,s=1;break;default:return}n[u]<i[u]?o[u]=a[u]:a[u]=o[u],Number.isFinite(t)&&(o[u]+=s*t,a[u]+=s*t)}(r,o,i),Gx(r.end,r.start,n.offset)};var O0;!function(r){r.presets=ve,r.registry=Ga.create({type:"connection point"}),r.registry.register(r.presets,!0)}(O0||(O0={}));const Iwe=function(r){return[...r]},Owe=function(r,e,t){const n=e.side||"bottom",i=hp(e.padding||40),o=t.sourceBBox,a=t.targetBBox,s=o.getCenter(),u=a.getCenter();let l,c,f;switch(n){case"top":f=-1,l="y",c="height";break;case"left":f=-1,l="x",c="width";break;case"right":f=1,l="x",c="width";break;default:f=1,l="y",c="height"}return s[l]+=f*(o[c]/2+i[n]),u[l]+=f*(a[c]/2+i[n]),f*(s[l]-u[l])>0?u[l]=s[l]:s[l]=u[l],[s.toJSON(),...r,u.toJSON()]};function Vx(r){return new _r(r.x,r.y,0,0)}function Hx(r={}){const e=hp(r.padding||20);return{x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}function B6(r,e={}){return r.sourceBBox.clone().moveAndExpand(Hx(e))}function j6(r,e={}){return r.targetBBox.clone().moveAndExpand(Hx(e))}const z6=function(r,e,t){let n=B6(t,e),i=j6(t,e);const o=function Pwe(r,e={}){return r.sourceAnchor?r.sourceAnchor:B6(r,e).getCenter()}(t,e),a=function Nwe(r,e={}){return r.targetAnchor?r.targetAnchor:j6(r,e).getCenter()}(t,e);n=n.union(Vx(o)),i=i.union(Vx(a));const s=r.map(c=>Vt.create(c));s.unshift(o),s.push(a);let u=null;const l=[];for(let c=0,f=s.length-1;c<f;c+=1){let h=null;const d=s[c],g=s[c+1],m=null!=$l.getBearing(d,g);if(0===c)c+1===f?n.intersectsWithRect(i.clone().inflate(1))?h=$l.insideNode(d,g,n,i):m||(h=$l.nodeToNode(d,g,n,i)):n.containsPoint(g)?h=$l.insideNode(d,g,n,Vx(g).moveAndExpand(Hx(e))):m||(h=$l.nodeToVertex(d,g,n));else if(c+1===f){const _=m&&$l.getBearing(g,d)===u;i.containsPoint(d)||_?h=$l.insideNode(d,g,Vx(d).moveAndExpand(Hx(e)),i,u):m||(h=$l.vertexToNode(d,g,i,u))}else m||(h=$l.vertexToVertex(d,g,u));h?(l.push(...h.points),u=h.direction):u=$l.getBearing(d,g),c+1<f&&l.push(g)}return l};var $l;!function(r){const e={N:"S",S:"N",E:"W",W:"E"},t={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function n(f,h,d){let g=new Vt(f.x,h.y);return d.containsPoint(g)&&(g=new Vt(h.x,f.y)),g}function i(f,h){return f["W"===h||"E"===h?"width":"height"]}function o(f,h){return f.x===h.x?f.y>h.y?"N":"S":f.y===h.y?f.x>h.x?"W":"E":null}function a(f,h,d){const g=new Vt(f.x,h.y),m=new Vt(h.x,f.y),_=o(f,g),D=o(f,m),L=d?e[d]:null,O=_===d||_!==L&&(D===L||D!==d)?g:m;return{points:[O],direction:o(O,h)}}function s(f,h,d){const g=n(f,h,d);return{points:[g],direction:o(g,h)}}r.getBBoxSize=i,r.getBearing=o,r.vertexToVertex=a,r.nodeToVertex=s,r.vertexToNode=function u(f,h,d,g){const m=[new Vt(f.x,h.y),new Vt(h.x,f.y)],_=m.filter(O=>!d.containsPoint(O)),D=_.filter(O=>o(O,f)!==g);let L;if(D.length>0)return L=D.filter(O=>o(f,O)===g).pop(),L=L||D[0],{points:[L],direction:o(L,h)};{L=n0e(m,_)[0];const O=Vt.create(h).move(L,-i(d,g)/2);return{points:[n(O,f,d),O],direction:o(O,h)}}},r.nodeToNode=function l(f,h,d,g){let m=s(h,f,g);const _=m.points[0];if(d.containsPoint(_)){m=s(f,h,d);const D=m.points[0];if(g.containsPoint(D)){const L=Vt.create(f).move(D,-i(d,o(f,D))/2),O=Vt.create(h).move(_,-i(g,o(h,_))/2),Z=new zr(L,O).getCenter(),le=s(f,Z,d),pe=a(Z,h,le.direction);m.points=[le.points[0],pe.points[0]],m.direction=pe.direction}}return m},r.insideNode=function c(f,h,d,g,m){const _=d.union(g).inflate(1),D=_.getCenter(),L=D.distance(h)>D.distance(f),O=L?h:f,Z=L?f:h;let le,pe,Ee,Re;return m?(le=Vt.fromPolar(_.width+_.height,t[m],O),le=_.getNearestPointToPoint(le).move(le,-1)):le=_.getNearestPointToPoint(O).move(O,1),pe=n(le,Z,_),le.round().equals(pe.round())?(pe=Vt.fromPolar(_.width+_.height,oa.toRad(le.theta(O))+Math.PI/2,Z),pe=_.getNearestPointToPoint(pe).move(Z,1).round(),Ee=n(le,pe,_),Re=L?[pe,Ee,le]:[le,Ee,pe]):Re=L?[pe,le]:[le,pe],{points:Re,direction:o(L?le:pe,h)}}}($l||($l={}));const Lwe={step:10,maxLoopCount:2e3,precision:1,maxDirectionChange:90,perpendicular:!0,excludeTerminals:[],excludeNodes:[],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost(){return eg(this.step,this)},directions(){const r=eg(this.step,this),e=eg(this.cost,this);return[{cost:e,offsetX:r,offsetY:0},{cost:e,offsetX:-r,offsetY:0},{cost:e,offsetX:0,offsetY:r},{cost:e,offsetX:0,offsetY:-r}]},penalties(){const r=eg(this.step,this);return{0:0,45:r/2,90:r/2}},paddingBox(){const r=eg(this.step,this);return{x:-r,y:-r,width:2*r,height:2*r}},fallbackRouter:z6,draggingRouter:null,snapToGrid:!0};function eg(r,e){return"function"==typeof r?r.call(e):r}class Rwe{constructor(){this.items=[],this.hash={},this.values={}}add(e,t){this.hash[e]?this.items.splice(this.items.indexOf(e),1):this.hash[e]=1,this.values[e]=t;const n=function Mve(r,e,t){return Dj(r,e,xA(t))}(this.items,e,i=>this.values[i]);this.items.splice(n,0,e)}pop(){const e=this.items.shift();return e&&(this.hash[e]=2),e}isOpen(e){return 1===this.hash[e]}isClose(e){return 2===this.hash[e]}isEmpty(){return 0===this.items.length}}class Fwe{constructor(e){this.options=e,this.mapGridSize=100,this.map={}}build(e,t){const n=this.options,i=n.excludeTerminals.reduce((l,c)=>{const f=t[c];if(f){const h=e.getCell(f.cell);h&&l.push(h)}return l},[]);let o=[];const a=e.getCell(t.getSourceCellId());a&&(o=Aj(o,a.getAncestors().map(l=>l.id)));const s=e.getCell(t.getTargetCellId());s&&(o=Aj(o,s.getAncestors().map(l=>l.id)));const u=this.mapGridSize;return e.getNodes().reduce((l,c)=>{const f=i.some(m=>m.id===c.id),h=n.excludeNodes.some(m=>"string"==typeof m?c.id===m:m===c),d=o.includes(c.id);if(!(f||h||d)){const m=c.getBBox().moveAndExpand(n.paddingBox),_=m.getOrigin().snapToGrid(u),D=m.getCorner().snapToGrid(u);for(let L=_.x;L<=D.x;L+=u)for(let O=_.y;O<=D.y;O+=u){const Z=new Vt(L,O).toString();null==l[Z]&&(l[Z]=[]),l[Z].push(m)}}return l},this.map),this}isAccessible(e){const t=e.clone().snapToGrid(this.mapGridSize).toString(),n=this.map[t];return!n||n.every(i=>!i.containsPoint(e))}}function V6(r,e){const t=r.sourceBBox.clone();return e&&e.paddingBox?t.moveAndExpand(e.paddingBox):t}function H6(r,e){const t=r.targetBBox.clone();return e&&e.paddingBox?t.moveAndExpand(e.paddingBox):t}function W6(r,e){return r.sourceAnchor?r.sourceAnchor:V6(r,e).getCenter()}function JA(r,e,t,n,i){const o=360/t,a=r.theta(function jwe(r,e,t,n){const i=n.step;return new Vt(r.x+(e.x-r.x)/t.x*i,r.y+(e.y-r.y)/t.y*i)}(r,e,n,i)),s=oa.normalize(a+o/2);return o*Math.floor(s/o)}function $6(r,e){const t=Math.abs(r-e);return t>180?360-t:t}function Y6(r,e){if(!r)return e;const t=Math.abs(r),n=Math.round(t/e);return n?e+(t-n*e)/n:t}function lb(r,e){return r.round(e)}function Wx(r,e,t){return lb(function Uwe(r,e){const t=e.source,n=Yo.snapToGrid(r.x-t.x,e.x)+t.x,i=Yo.snapToGrid(r.y-t.y,e.y)+t.y;return new Vt(n,i)}(r.clone(),e),t)}function cb(r){return r.toString()}function eD(r){return new Vt(0===r.x?0:Math.abs(r.x)/r.x,0===r.y?0:Math.abs(r.y)/r.y)}function X6(r,e){let t=1/0;for(let n=0,i=e.length;n<i;n+=1){const o=r.manhattanDistance(e[n]);o<t&&(t=o)}return t}function q6(r,e,t,n,i){const o=i.precision,a=i.directionMap,s=r.diff(e.getCenter()),u=Object.keys(a).reduce((l,c)=>{if(t.includes(c)){const f=a[c],h=new Vt(r.x+f.x*(Math.abs(s.x)+e.width),r.y+f.y*(Math.abs(s.y)+e.height)),g=new zr(r,h).intersect(e)||[];let m,_=null;for(let D=0;D<g.length;D+=1){const L=g[D],O=r.squaredDistance(L);(null==m||O>m)&&(m=O,_=L)}if(_){let D=Wx(_,n,o);e.containsPoint(D)&&(D=Wx(D.translate(f.x*n.x,f.y*n.y),n,o)),l.push(D)}}return l},[]);return e.containsPoint(r)||u.push(Wx(r,n,o)),u}function Vwe(r,e,t,n,i){const o=[];let l,a=eD(i.diff(t)),s=cb(t),u=r[s];for(;u;){l=e[s];const h=eD(l.diff(u));h.equals(a)||(o.unshift(l),a=h),s=cb(u),u=r[s]}const c=e[s];return eD(c.diff(n)).equals(a)||o.unshift(c),o}function Hwe(r,e,t,n,i){const o=i.precision;let a,s;a=_r.isRectangle(e)?lb(W6(r,i).clone(),o):lb(e.clone(),o),s=_r.isRectangle(t)?lb(function Bwe(r,e){return r.targetAnchor?r.targetAnchor:H6(r,e).getCenter()}(r,i).clone(),o):lb(t.clone(),o);const u=function Gwe(r,e,t){return{source:e.clone(),x:Y6(t.x-e.x,r),y:Y6(t.y-e.y,r)}}(i.step,a,s),l=a,c=s;let f,h;if(f=_r.isRectangle(e)?q6(l,e,i.startDirections,u,i):[l],h=_r.isRectangle(t)?q6(s,t,i.endDirections,u,i):[c],f=f.filter(d=>n.isAccessible(d)),h=h.filter(d=>n.isAccessible(d)),f.length>0&&h.length>0){const d=new Rwe,g={},m={},_={};for(let Ue=0,at=f.length;Ue<at;Ue+=1){const _t=f[Ue],vn=cb(_t);d.add(vn,X6(_t,h)),g[vn]=_t,_[vn]=0}const D=i.previousDirectionAngle,L=void 0===D;let O,Z;const le=function zwe(r,e){const t=e.step;return e.directions.forEach(n=>{n.gridOffsetX=n.offsetX/t*r.x,n.gridOffsetY=n.offsetY/t*r.y}),e.directions}(u,i),pe=le.length,Ee=h.reduce((Ue,at)=>{const _t=cb(at);return Ue.push(_t),Ue},[]),Re=Vt.equalPoints(f,h);let Ve=i.maxLoopCount;for(;!d.isEmpty()&&Ve>0;){const Ue=d.pop(),at=g[Ue],_t=m[Ue],vn=_[Ue],Cn=at.equals(l),Tt=null==_t;let kt;if(kt=Tt?L?Cn?null:JA(l,at,pe,u,i):D:JA(_t,at,pe,u,i),(!Tt||!Re)&&Ee.indexOf(Ue)>=0)return i.previousDirectionAngle=kt,Vwe(m,g,at,l,c);for(let Kn=0;Kn<pe;Kn+=1){O=le[Kn];const mn=O.angle;if(Z=$6(kt,mn),(!L||!Cn)&&Z>i.maxDirectionChange)continue;const On=Wx(at.clone().translate(O.gridOffsetX||0,O.gridOffsetY||0),u,o),Vn=cb(On);if(d.isClose(Vn)||!n.isAccessible(On))continue;if(Ee.indexOf(Vn)>=0&&!On.equals(c)&&$6(mn,JA(On,c,pe,u,i))>i.maxDirectionChange)continue;const Sr=vn+O.cost+(Cn?0:i.penalties[Z]);(!d.isOpen(Vn)||Sr<_[Vn])&&(g[Vn]=On,m[Vn]=at,_[Vn]=Sr,d.add(Vn,Sr+X6(On,h)))}Ve-=1}}return i.fallbackRoute?Ti(i.fallbackRoute,this,l,c,i):null}const $we=function(r,e,t){const n=function kwe(r){const e=Object.keys(r).reduce((t,n)=>(t[n]="fallbackRouter"===n||"draggingRouter"===n||"fallbackRoute"===n?r[n]:eg(r[n],r),t),{});if(e.padding){const t=hp(e.padding);e.paddingBox={x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}return e.directions.forEach(t=>{const n=new Vt(0,0),i=new Vt(t.offsetX,t.offsetY);t.angle=oa.normalize(n.theta(i))}),e}(e),i=V6(t,n),o=H6(t,n),a=W6(t,n),s=new Fwe(n).build(t.graph.model,t.cell),u=r.map(d=>Vt.create(d)),l=[];let f,h,c=a;for(let d=0,g=u.length;d<=g;d+=1){let m=null;if(f=h||i,h=u[d],null==h){h=o;const D=t.cell;if((null==D.getSourceCellId()||null==D.getTargetCellId())&&"function"==typeof n.draggingRouter){const O=f===i?a:f,Z=h.getOrigin();m=Ti(n.draggingRouter,t,O,Z,n)}}if(null==m&&(m=Hwe(t,f,h,s,n)),null===m)return console.warn("Unable to execute manhattan algorithm, use orth instead"),Ti(n.fallbackRouter,this,r,n,t);const _=m[0];_&&_.equals(c)&&m.shift(),c=m[m.length-1]||c,l.push(...m)}return n.snapToGrid?function Wwe(r,e=10){if(r.length<=1)return r;for(let t=0,n=r.length;t<n-1;t+=1){const i=r[t],o=r[t+1];if(i.x===o.x){const a=e*Math.round(i.x/e);i.x!==a&&(i.x=a,o.x=a)}else if(i.y===o.y){const a=e*Math.round(i.y/e);i.y!==a&&(i.y=a,o.y=a)}}return r}(l,t.graph.grid.getGridSize()):l},K6=function(r,e,t){return Ti($we,this,r,Object.assign(Object.assign({},Lwe),e),t)},Ywe={maxDirectionChange:45,directions(){const r=eg(this.step,this),e=eg(this.cost,this),t=Math.ceil(Math.sqrt(r*r<<1));return[{cost:e,offsetX:r,offsetY:0},{cost:t,offsetX:r,offsetY:r},{cost:e,offsetX:0,offsetY:r},{cost:t,offsetX:-r,offsetY:r},{cost:e,offsetX:-r,offsetY:0},{cost:t,offsetX:-r,offsetY:-r},{cost:e,offsetX:0,offsetY:-r},{cost:t,offsetX:r,offsetY:-r}]},fallbackRoute(r,e,t){const n=r.theta(e),i=[];let o={x:e.x,y:r.y},a={x:r.x,y:e.y};if(n%180>90){const O=o;o=a,a=O}const s=n%90<45?o:a,u=new zr(r,s),l=90*Math.ceil(n/90),c=Vt.fromPolar(u.squaredLength(),oa.toRad(l+135),s),f=new zr(e,c),h=u.intersectsWithLine(f),d=h||e,m=360/t.directions.length,_=(h?d:r).theta(e),D=oa.normalize(_+m/2),L=m*Math.floor(D/m);return t.previousDirectionAngle=L,d&&i.push(d.round()),i.push(e),i}},Xwe=function(r,e,t){return Ti(K6,this,r,Object.assign(Object.assign({},Ywe),e),t)},qwe=function(r,e,t){const n=e.offset||32,i=e.min??16;let o=0,a=e.direction;const s=t.sourceBBox,u=t.targetBBox,l=s.getCenter(),c=u.getCenter();if("number"==typeof n&&(o=n),null==a){let D=u.left-s.right,L=u.top-s.bottom;D>=0&&L>=0?a=D>=L?"L":"T":D<=0&&L>=0?(D=s.left-u.right,a=D>=0&&D>=L?"R":"T"):D>=0&&L<=0?(L=s.top-u.bottom,a=L>=0?D>=L?"L":"B":"L"):(D=s.left-u.right,L=s.top-u.bottom,a=D>=0&&L>=0?D>=L?"R":"B":D<=0&&L>=0?"B":D>=0&&L<=0||Math.abs(D)>Math.abs(L)?"R":"B")}let f,h,d;"H"===a?a=c.x-l.x>=0?"L":"R":"V"===a&&(a=c.y-l.y>=0?"T":"B"),"center"===n&&("L"===a?o=(u.left-s.right)/2:"R"===a?o=(s.left-u.right)/2:"T"===a?o=(u.top-s.bottom)/2:"B"===a&&(o=(s.top-u.bottom)/2));const g="L"===a||"R"===a;if(g){if(c.y===l.y)return[...r];d="L"===a?1:-1,f="x",h="width"}else{if(c.x===l.x)return[...r];d="T"===a?1:-1,f="y",h="height"}const m=l.clone(),_=c.clone();if(m[f]+=d*(s[h]/2+o),_[f]-=d*(u[h]/2+o),g){const D=m.x,L=_.x,O=s.width/2+i,Z=u.width/2+i;c.x>l.x?L<=D&&(m.x=Math.max(L,l.x+O),_.x=Math.min(D,c.x-Z)):L>=D&&(m.x=Math.min(L,l.x-O),_.x=Math.max(D,c.x+Z))}else{const D=m.y,L=_.y,O=s.height/2+i,Z=u.height/2+i;c.y>l.y?L<=D&&(m.y=Math.max(L,l.y+O),_.y=Math.min(D,c.y-Z)):L>=D&&(m.y=Math.min(L,l.y-O),_.y=Math.max(D,c.y+Z))}return[m.toJSON(),...r,_.toJSON()]};function P0(r,e){if(null!=e&&!1!==e){const t="boolean"==typeof e?0:e;if(t>0){const n=Vt.create(r[1]).move(r[2],t),i=Vt.create(r[1]).move(r[0],t);return[n.toJSON(),...r,i.toJSON()]}{const n=r[1];return[Object.assign({},n),...r,Object.assign({},n)]}}return r}const Kwe=function(r,e,t){const n=e.width||50,o=(e.height||80)/2,a=e.angle||"auto",s=t.sourceAnchor,u=t.targetAnchor,l=t.sourceBBox,c=t.targetBBox;if(s.equals(u)){const f=D=>{const L=oa.toRad(D),O=Math.sin(L),Z=Math.cos(L),le=new Vt(s.x+Z*n,s.y+O*n),pe=new Vt(le.x-Z*o,le.y-O*o),Ee=pe.clone().rotate(-90,le),Re=pe.clone().rotate(90,le);return[Ee.toJSON(),le.toJSON(),Re.toJSON()]},h=D=>{const L=s.clone().move(D,-1),O=new zr(L,D);return!l.containsPoint(D)&&!l.intersectsWithLine(O)},d=[0,90,180,270,45,135,225,315];if("number"==typeof a)return P0(f(a),e.merge);const g=l.getCenter();if(g.equals(s))return P0(f(0),e.merge);const m=g.angleBetween(s,g.clone().translate(1,0));let _=f(m);if(h(_[1]))return P0(_,e.merge);for(let D=1,L=d.length;D<L;D+=1)if(_=f(m+d[D]),h(_[1]))return P0(_,e.merge);return P0(_,e.merge)}{const f=new zr(s,u);let h=f.parallel(-n),d=h.getCenter(),g=h.start.clone().move(h.end,o),m=h.end.clone().move(h.start,o);const _=f.parallel(-1),D=new zr(_.start,d),L=new zr(_.end,d);if((l.containsPoint(d)||c.containsPoint(d)||l.intersectsWithLine(D)||l.intersectsWithLine(L)||c.intersectsWithLine(D)||c.intersectsWithLine(L))&&(h=f.parallel(n),d=h.getCenter(),g=h.start.clone().move(h.end,o),m=h.end.clone().move(h.start,o)),e.merge){const O=new zr(s,u),Z=new zr(d,O.center).setLength(Number.MAX_SAFE_INTEGER),le=l.intersectsWithLine(Z),pe=c.intersectsWithLine(Z),Ee=le?Array.isArray(le)?le:[le]:[];pe&&(Array.isArray(pe)?Ee.push(...pe):Ee.push(pe));const Re=O.center.closest(Ee);Re?(t.sourceAnchor=Re.clone(),t.targetAnchor=Re.clone()):(t.sourceAnchor=O.center.clone(),t.targetAnchor=O.center.clone())}return P0([g.toJSON(),d.toJSON(),m.toJSON()],e.merge)}};var tg;!function(r){r.presets=we,r.registry=Ga.create({type:"router"}),r.registry.register(r.presets,!0)}(tg||(tg={}));const Zwe=function(r,e,t,n={}){const i=[r,...t,e],o=new za(i),a=new oi(o);return n.raw?a:a.serialize()},Qwe=function(r,e,t,n={}){const i=3===t.length?0:1,o=Vt.create(t[0+i]),a=Vt.create(t[2+i]),s=Vt.create(t[1+i]);if(!Vt.equals(r,e)){const l=new Vt((r.x+e.x)/2,(r.y+e.y)/2),c=l.angleBetween(Vt.create(r).rotate(90,l),s);c>1&&(o.rotate(180-c,l),a.rotate(180-c,l),s.rotate(180-c,l))}const u=`\n     M ${r.x} ${r.y}\n     Q ${o.x} ${o.y} ${s.x} ${s.y}\n     Q ${a.x} ${a.y} ${e.x} ${e.y}\n  `;return n.raw?oi.parse(u):u},Jwe=function(r,e,t,n={}){const i=new oi;i.appendSegment(oi.createSegment("M",r));const o=1/3,a=2/3,s=n.radius||10;let u,l;for(let c=0,f=t.length;c<f;c+=1){const h=Vt.create(t[c]),d=t[c-1]||r,g=t[c+1]||e;u=l||h.distance(d)/2,l=h.distance(g)/2;const m=-Math.min(s,u),_=-Math.min(s,l),D=h.clone().move(d,m).round(),L=h.clone().move(g,_).round(),O=new Vt(o*D.x+a*h.x,a*h.y+o*D.y),Z=new Vt(o*L.x+a*h.x,a*h.y+o*L.y);i.appendSegment(oi.createSegment("L",D)),i.appendSegment(oi.createSegment("C",O,Z,L))}return i.appendSegment(oi.createSegment("L",e)),n.raw?i:i.serialize()},exe=function(r,e,t,n={}){let i,o=n.direction;if(t&&0!==t.length){const a=[r,...t,e],s=Pa.throughPoints(a);i=new oi(s)}else if(i=new oi,i.appendSegment(oi.createSegment("M",r)),o||(o=Math.abs(r.x-e.x)>=Math.abs(r.y-e.y)?"H":"V"),"H"===o){const a=(r.x+e.x)/2;i.appendSegment(oi.createSegment("C",a,r.y,a,e.y,e.x,e.y))}else{const a=(r.y+e.y)/2;i.appendSegment(oi.createSegment("C",r.x,a,e.x,a,e.x,e.y))}return n.raw?i:i.serialize()},$x=1/3,Yx=2/3;function tD(r,e,t=[]){const n=[r,...t,e],i=[];return n.forEach((o,a)=>{const s=n[a+1];null!=s&&i.push(new zr(o,s))}),i}function Q6(r,e){return new zr(r,e).squaredLength()}function J6(r,e,t,n){const i=new oi;let o;return o=oi.createSegment("M",r[0].start),i.appendSegment(o),r.forEach((a,s)=>{if(fb.includes(a)){let u,l,c,f;if("arc"===t){u=-90,l=a.start.diff(a.end),(l.x<0||0===l.x&&l.y<0)&&(u+=180);const d=a.getCenter(),g=new zr(d,a.end).rotate(u,d);let m;m=new zr(a.start,d),c=m.pointAt(2/3).rotate(u,a.start),f=g.pointAt(1/3).rotate(-u,g.end),o=oi.createSegment("C",c,f,g.end),i.appendSegment(o),m=new zr(d,a.end),c=g.pointAt(1/3).rotate(u,g.end),f=m.pointAt(1/3).rotate(-u,a.end),o=oi.createSegment("C",c,f,a.end),i.appendSegment(o)}else if("gap"===t)o=oi.createSegment("M",a.end),i.appendSegment(o);else if("cubic"===t){u=a.start.theta(a.end);const h=.6*e;let d=1.35*e;l=a.start.diff(a.end),(l.x<0||0===l.x&&l.y<0)&&(d*=-1),c=new Vt(a.start.x+h,a.start.y+d).rotate(u,a.start),f=new Vt(a.end.x-h,a.end.y+d).rotate(u,a.end),o=oi.createSegment("C",c,f,a.end),i.appendSegment(o)}}else{const u=r[s+1];0===n||!u||fb.includes(u)?(o=oi.createSegment("L",a.end),i.appendSegment(o)):function ixe(r,e,t,n,i){const o=t.distance(n)/2,a=t.distance(i)/2,s=-Math.min(r,o),u=-Math.min(r,a),l=t.clone().move(n,s).round(),c=t.clone().move(i,u).round(),f=new Vt($x*l.x+Yx*t.x,Yx*t.y+$x*l.y),h=new Vt($x*c.x+Yx*t.x,Yx*t.y+$x*c.y);let d;d=oi.createSegment("L",l),e.appendSegment(d),d=oi.createSegment("C",f,h,c),e.appendSegment(d)}(n,i,a.end,a.start,u.end)}}),i}let fb,Xx;const oxe=function(r,e,t,n={}){fb=[],Xx=[],function txe(r){let e=r.graph._jumpOverUpdateList;if(null==e&&(e=r.graph._jumpOverUpdateList=[],r.graph.on("cell:mouseup",()=>{const t=r.graph._jumpOverUpdateList;for(let n=0;n<t.length;n+=1)t[n].update()}),r.graph.on("model:reseted",()=>{e=r.graph._jumpOverUpdateList=[]})),e.indexOf(r)<0){e.push(r);const t=()=>e.splice(e.indexOf(r),1);r.cell.once("change:connector",t),r.cell.once("removed",t)}}(this);const i=n.size||5,o=n.type||"arc",a=n.radius||0,s=n.ignoreConnectors||["smooth"],u=this.graph,c=u.model.getEdges();if(1===c.length)return J6(tD(r,e,t),i,o,a);const f=this.cell,h=c.indexOf(f),d=u.options.connecting.connector||{},g=c.filter((Z,le)=>{const pe=Z.getConnector()||d;return!(s.includes(pe.name)||le>h&&"jumpover"===pe.name)}),m=g.map(Z=>u.findViewByCell(Z)),_=tD(r,e,t),D=m.map(Z=>null==Z?[]:Z===this?_:tD(Z.sourcePoint,Z.targetPoint,Z.routePoints)),L=[];_.forEach(Z=>{const le=g.reduce((pe,Ee,Re)=>{if(Ee!==f){const Ve=function nxe(r,e){const t=[];return e.forEach(n=>{const i=r.intersectsWithLine(n);i&&t.push(i)}),t}(Z,D[Re]);pe.push(...Ve)}return pe},[]).sort((pe,Ee)=>Q6(Z.start,pe)-Q6(Z.start,Ee));le.length>0?L.push(...function rxe(r,e,t){return e.reduce((n,i,o)=>{if(Xx.includes(i))return n;const a=n.pop()||r,s=Vt.create(i).move(a.start,-t);let u=Vt.create(i).move(a.start,+t);const l=e[o+1];if(null!=l){const h=u.distance(l);h<=t&&(u=l.move(a.start,h),Xx.push(l))}else if(s.distance(a.end)<2*t+1)return n.push(a),n;if(u.distance(a.start)<2*t+1)return n.push(a),n;const f=new zr(s,u);return fb.push(f),n.push(new zr(a.start,s),f,new zr(u,a.end)),n},[])}(Z,le,i)):L.push(Z)});const O=J6(L,i,o,a);return fb=[],Xx=[],n.raw?O:O.serialize()};var bp;!function(r){r.presets=_e,r.registry=Ga.create({type:"connector"}),r.registry.register(r.presets,!0)}(bp||(bp={}));class ez extends Gl{constructor(e={}){super(),this.pending=!1,this.changing=!1,this.data={},this.mutate(Oa(e)),this.changed={}}mutate(e,t={}){const n=!0===t.unset,i=!0===t.silent,o=[],a=this.changing;this.changing=!0,a||(this.previous=Oa(this.data),this.changed={});const s=this.data,u=this.previous,l=this.changed;if(Object.keys(e).forEach(c=>{const f=c,h=e[f];jh(s[f],h)||o.push(f),jh(u[f],h)?delete l[f]:l[f]=h,n?delete s[f]:s[f]=h}),!i&&o.length>0&&(this.pending=!0,this.pendingOptions=t,o.forEach(c=>{this.emit("change:*",{key:c,options:t,store:this,current:s[c],previous:u[c]})})),a)return this;if(!i)for(;this.pending;)this.pending=!1,this.emit("changed",{current:s,previous:u,store:this,options:this.pendingOptions});return this.pending=!1,this.changing=!1,this.pendingOptions=null,this}get(e,t){return null==e?this.data:this.data[e]??t}getPrevious(e){if(this.previous)return this.previous[e]??void 0}set(e,t,n){return null!=e&&("object"==typeof e?this.mutate(e,t):this.mutate({[e]:t},n)),this}remove(e,t){const i={};let o;if("string"==typeof e)i[e]=void 0,o=t;else if(Array.isArray(e))e.forEach(a=>i[a]=void 0),o=t;else{for(const a in this.data)i[a]=void 0;o=e}return this.mutate(i,Object.assign(Object.assign({},o),{unset:!0})),this}getByPath(e){return wA(this.data,e,"/")}setByPath(e,t,n={}){const i="/",o=Array.isArray(e)?[...e]:e.split(i),a=Array.isArray(e)?e.join(i):e,s=o[0],u=o.length;if(n.propertyPath=a,n.propertyValue=t,n.propertyPathArray=o,1===u)this.set(s,t,n);else{const l={};let c=l,f=s;for(let g=1;g<u;g+=1){const m=o[g],_=Number.isFinite(Number(m));c=c[f]=_?[]:{},f=m}Uy(l,o,t,i);const h=Oa(this.data);n.rewrite&&Ej(h,e,i);const d=ja(h,l);this.set(s,d[s],n)}return this}removeByPath(e,t){const n=Array.isArray(e)?e:e.split("/"),i=n[0];if(1===n.length)this.remove(i,t);else{const o=n.slice(1),a=Oa(this.get(i));a&&Ej(a,o),this.set(i,a,t)}return this}hasChanged(e){return null==e?Object.keys(this.changed).length>0:e in this.changed}getChanges(e){if(null==e)return this.hasChanged()?Oa(this.changed):null;const t=this.changing?this.previous:this.data,n={};let i;for(const o in e){const a=e[o];jh(t[o],a)||(n[o]=a,i=!0)}return i?Oa(n):null}toJSON(){return Oa(this.data)}clone(){return new(0,this.constructor)(this.data)}dispose(){this.off(),this.data={},this.previous={},this.changed={},this.pending=!1,this.changing=!1,this.pendingOptions=null,this.trigger("disposed",{store:this})}}!function(r,e,t,n){var a,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);i>3&&o&&Object.defineProperty(e,t,o)}([Gl.dispose()],ez.prototype,"dispose",null);class hb{constructor(e){this.cell=e,this.ids={},this.cache={}}get(){return Object.keys(this.ids)}start(e,t,n={},i="/"){const o=this.cell.getPropByPath(e),a=gpe(n,hb.defaultOptions),s=this.getTiming(a.timing),u=this.getInterp(a.interp,o,t);let l=0;const c=Array.isArray(e)?e.join(i):e,f=Array.isArray(e)?e:e.split(i),h=()=>{const d=(new Date).getTime();0===l&&(l=d);let m=(d-l)/a.duration;m<1?this.ids[c]=requestAnimationFrame(h):m=1;const _=u(s(m));this.cell.setPropByPath(f,_),n.progress&&n.progress(Object.assign({progress:m,currentValue:_},this.getArgs(c))),1===m&&(this.cell.notify("transition:complete",this.getArgs(c)),n.complete&&n.complete(this.getArgs(c)),this.cell.notify("transition:finish",this.getArgs(c)),n.finish&&n.finish(this.getArgs(c)),this.clean(c))};return setTimeout(()=>{this.stop(e,void 0,i),this.cache[c]={startValue:o,targetValue:t,options:a},this.ids[c]=requestAnimationFrame(h),this.cell.notify("transition:start",this.getArgs(c)),n.start&&n.start(this.getArgs(c))},n.delay),this.stop.bind(this,e,i,n)}stop(e,t={},n="/"){const i=Array.isArray(e)?e:e.split(n);return Object.keys(this.ids).filter(o=>jh(i,o.split(n).slice(0,i.length))).forEach(o=>{cancelAnimationFrame(this.ids[o]);const a=this.cache[o],s=this.getArgs(o),u=Object.assign(Object.assign({},a.options),t),l=u.jumpedToEnd;l&&null!=a.targetValue&&(this.cell.setPropByPath(o,a.targetValue),this.cell.notify("transition:end",Object.assign({},s)),this.cell.notify("transition:complete",Object.assign({},s)),u.complete&&u.complete(Object.assign({},s)));const c=Object.assign({jumpedToEnd:l},s);this.cell.notify("transition:stop",Object.assign({},c)),u.stop&&u.stop(Object.assign({},c)),this.cell.notify("transition:finish",Object.assign({},s)),u.finish&&u.finish(Object.assign({},s)),this.clean(o)}),this}clean(e){delete this.ids[e],delete this.cache[e]}getTiming(e){return"string"==typeof e?Wd[e]:e}getInterp(e,t,n){return e?e(t,n):"number"==typeof n?$d.number(t,n):"string"==typeof n?"#"===n[0]?$d.color(t,n):$d.unit(t,n):$d.object(t,n)}getArgs(e){const t=this.cache[e];return{path:e,startValue:t.startValue,targetValue:t.targetValue,cell:this.cell}}}!function(r){r.defaultOptions={delay:10,duration:100,timing:"linear"}}(hb||(hb={}));var N0,tz=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t};class go extends Gl{static config(e){const{markup:t,propHooks:n,attrHooks:i}=e,o=tz(e,["markup","propHooks","attrHooks"]);null!=t&&(this.markup=t),n&&(this.propHooks=this.propHooks.slice(),Array.isArray(n)?this.propHooks.push(...n):"function"==typeof n?this.propHooks.push(n):Object.keys(n).forEach(a=>{const s=n[a];"function"==typeof s&&this.propHooks.push(s)})),i&&(this.attrHooks=Object.assign(Object.assign({},this.attrHooks),i)),this.defaults=ja({},this.defaults,o)}static getMarkup(){return this.markup}static getDefaults(e){return e?this.defaults:Oa(this.defaults)}static getAttrHooks(){return this.attrHooks}static applyPropHooks(e,t){return this.propHooks.reduce((n,i)=>i?Ti(i,e,n):n,t)}get[Symbol.toStringTag](){return go.toStringTag}constructor(e={}){super();const n=this.constructor.getDefaults(!0),i=ja({},this.preprocess(n),this.preprocess(e));this.id=i.id||AA(),this.store=new ez(i),this.animation=new hb(this),this.setup(),this.init(),this.postprocess(e)}init(){}get model(){return this._model}set model(e){this._model!==e&&(this._model=e)}preprocess(e,t){const n=e.id,o=this.constructor.applyPropHooks(this,e);return null==n&&!0!==t&&(o.id=AA()),o}postprocess(e){}setup(){this.store.on("change:*",e=>{const{key:t,current:n,previous:i,options:o}=e;this.notify("change:*",{key:t,options:o,current:n,previous:i,cell:this}),this.notify(`change:${t}`,{options:o,current:n,previous:i,cell:this}),("source"===t||"target"===t)&&this.notify("change:terminal",{type:t,current:n,previous:i,options:o,cell:this})}),this.store.on("changed",({options:e})=>this.notify("changed",{options:e,cell:this}))}notify(e,t){this.trigger(e,t);const n=this.model;return n&&(n.notify(`cell:${e}`,t),this.isNode()?n.notify(`node:${e}`,Object.assign(Object.assign({},t),{node:this})):this.isEdge()&&n.notify(`edge:${e}`,Object.assign(Object.assign({},t),{edge:this}))),this}isNode(){return!1}isEdge(){return!1}isSameStore(e){return this.store===e.store}get view(){return this.store.get("view")}get shape(){return this.store.get("shape","")}getProp(e,t){return null==e?this.store.get():this.store.get(e,t)}setProp(e,t,n){if("string"==typeof e)this.store.set(e,t,n);else{const i=this.preprocess(e,!0);this.store.set(ja({},this.getProp(),i),t),this.postprocess(e)}return this}removeProp(e,t){return"string"==typeof e||Array.isArray(e)?this.store.removeByPath(e,t):this.store.remove(t),this}hasChanged(e){return null==e?this.store.hasChanged():this.store.hasChanged(e)}getPropByPath(e){return this.store.getByPath(e)}setPropByPath(e,t,n={}){return this.model&&("children"===e?this._children=t?t.map(i=>this.model.getCell(i)).filter(i=>null!=i):null:"parent"===e&&(this._parent=t?this.model.getCell(t):null)),this.store.setByPath(e,t,n),this}removePropByPath(e,t={}){const n=Array.isArray(e)?e:e.split("/");return"attrs"===n[0]&&(t.dirty=!0),this.store.removeByPath(n,t),this}prop(e,t,n){return null==e?this.getProp():"string"==typeof e||Array.isArray(e)?1===arguments.length?this.getPropByPath(e):null==t?this.removePropByPath(e,n||{}):this.setPropByPath(e,t,n||{}):this.setProp(e,t||{})}previous(e){return this.store.getPrevious(e)}get zIndex(){return this.getZIndex()}set zIndex(e){null==e?this.removeZIndex():this.setZIndex(e)}getZIndex(){return this.store.get("zIndex")}setZIndex(e,t={}){return this.store.set("zIndex",e,t),this}removeZIndex(e={}){return this.store.remove("zIndex",e),this}toFront(e={}){const t=this.model;if(t){let i,n=t.getMaxZIndex();e.deep?(i=this.getDescendants({deep:!0,breadthFirst:!0}),i.unshift(this)):i=[this],n=n-i.length+1;const o=t.total();let a=t.indexOf(this)!==o-i.length;a||(a=i.some((s,u)=>s.getZIndex()!==n+u)),a&&this.batchUpdate("to-front",()=>{n+=i.length,i.forEach((s,u)=>{s.setZIndex(n+u,e)})})}return this}toBack(e={}){const t=this.model;if(t){let i,n=t.getMinZIndex();e.deep?(i=this.getDescendants({deep:!0,breadthFirst:!0}),i.unshift(this)):i=[this];let o=0!==t.indexOf(this);o||(o=i.some((a,s)=>a.getZIndex()!==n+s)),o&&this.batchUpdate("to-back",()=>{n-=i.length,i.forEach((a,s)=>{a.setZIndex(n+s,e)})})}return this}get markup(){return this.getMarkup()}set markup(e){null==e?this.removeMarkup():this.setMarkup(e)}getMarkup(){let e=this.store.get("markup");return null==e&&(e=this.constructor.getMarkup()),e}setMarkup(e,t={}){return this.store.set("markup",e,t),this}removeMarkup(e={}){return this.store.remove("markup",e),this}get attrs(){return this.getAttrs()}set attrs(e){null==e?this.removeAttrs():this.setAttrs(e)}getAttrs(){const e=this.store.get("attrs");return e?Object.assign({},e):{}}setAttrs(e,t={}){if(null==e)this.removeAttrs(t);else{const n=i=>this.store.set("attrs",i,t);if(!0===t.overwrite)n(e);else{const i=this.getAttrs();n(!1===t.deep?Object.assign(Object.assign({},i),e):ja({},i,e))}}return this}replaceAttrs(e,t={}){return this.setAttrs(e,Object.assign(Object.assign({},t),{overwrite:!0}))}updateAttrs(e,t={}){return this.setAttrs(e,Object.assign(Object.assign({},t),{deep:!1}))}removeAttrs(e={}){return this.store.remove("attrs",e),this}getAttrDefinition(e){if(!e)return null;const n=this.constructor.getAttrHooks()||{};let i=n[e]||Wf.registry.get(e);if(!i){const o=Hy(e);i=n[o]||Wf.registry.get(o)}return i||null}getAttrByPath(e){return null==e||""===e?this.getAttrs():this.getPropByPath(this.prefixAttrPath(e))}setAttrByPath(e,t,n={}){return this.setPropByPath(this.prefixAttrPath(e),t,n),this}removeAttrByPath(e,t={}){return this.removePropByPath(this.prefixAttrPath(e),t),this}prefixAttrPath(e){return Array.isArray(e)?["attrs"].concat(e):`attrs/${e}`}attr(e,t,n){return null==e?this.getAttrByPath():"string"==typeof e||Array.isArray(e)?1===arguments.length?this.getAttrByPath(e):null==t?this.removeAttrByPath(e,n||{}):this.setAttrByPath(e,t,n||{}):this.setAttrs(e,t||{})}get visible(){return this.isVisible()}set visible(e){this.setVisible(e)}setVisible(e,t={}){return this.store.set("visible",e,t),this}isVisible(){return!1!==this.store.get("visible")}show(e={}){return this.isVisible()||this.setVisible(!0,e),this}hide(e={}){return this.isVisible()&&this.setVisible(!1,e),this}toggleVisible(e,t={}){const i="boolean"==typeof e?t:e;return("boolean"==typeof e?e:!this.isVisible())?this.show(i):this.hide(i),this}get data(){return this.getData()}set data(e){this.setData(e)}getData(){return this.store.get("data")}setData(e,t={}){if(null==e)this.removeData(t);else{const n=i=>this.store.set("data",i,t);if(!0===t.overwrite)n(e);else{const i=this.getData();n(!1===t.deep?"object"==typeof e?Object.assign(Object.assign({},i),e):e:ja({},i,e))}}return this}replaceData(e,t={}){return this.setData(e,Object.assign(Object.assign({},t),{overwrite:!0}))}updateData(e,t={}){return this.setData(e,Object.assign(Object.assign({},t),{deep:!1}))}removeData(e={}){return this.store.remove("data",e),this}get parent(){return this.getParent()}get children(){return this.getChildren()}getParentId(){return this.store.get("parent")}getParent(){const e=this.getParentId();if(e&&this.model){const t=this.model.getCell(e);return this._parent=t,t}return null}getChildren(){const e=this.store.get("children");if(e&&e.length&&this.model){const t=e.map(n=>{var i;return null===(i=this.model)||void 0===i?void 0:i.getCell(n)}).filter(n=>null!=n);return this._children=t,[...t]}return null}hasParent(){return null!=this.parent}isParentOf(e){return null!=e&&e.getParent()===this}isChildOf(e){return null!=e&&this.getParent()===e}eachChild(e,t){return this.children&&this.children.forEach(e,t),this}filterChild(e,t){return this.children?this.children.filter(e,t):[]}getChildCount(){return null==this.children?0:this.children.length}getChildIndex(e){return null==this.children?-1:this.children.indexOf(e)}getChildAt(e){return null!=this.children&&e>=0?this.children[e]:null}getAncestors(e={}){const t=[];let n=this.getParent();for(;n;)t.push(n),n=!1!==e.deep?n.getParent():null;return t}getDescendants(e={}){if(!1!==e.deep){if(e.breadthFirst){const t=[],n=this.getChildren()||[];for(;n.length>0;){const i=n.shift(),o=i.getChildren();t.push(i),o&&n.push(...o)}return t}{const t=this.getChildren()||[];return t.forEach(n=>{t.push(...n.getDescendants(e))}),t}}return this.getChildren()||[]}isDescendantOf(e,t={}){if(null==e)return!1;if(!1!==t.deep){let n=this.getParent();for(;n;){if(n===e)return!0;n=n.getParent()}return!1}return this.isChildOf(e)}isAncestorOf(e,t={}){return null!=e&&e.isDescendantOf(this,t)}contains(e){return this.isAncestorOf(e)}getCommonAncestor(...e){return go.getCommonAncestor(this,...e)}setParent(e,t={}){return this._parent=e,e?this.store.set("parent",e.id,t):this.store.remove("parent",t),this}setChildren(e,t={}){return this._children=e,null!=e?this.store.set("children",e.map(n=>n.id),t):this.store.remove("children",t),this}unembed(e,t={}){const n=this.children;if(null!=n&&null!=e){const i=this.getChildIndex(e);-1!==i&&(n.splice(i,1),e.setParent(null,t),this.setChildren(n,t))}return this}embed(e,t={}){return e.addTo(this,t),this}addTo(e,t={}){return go.isCell(e)?e.addChild(this,t):e.addCell(this,t),this}insertTo(e,t,n={}){return e.insertChild(this,t,n),this}addChild(e,t={}){return this.insertChild(e,void 0,t)}insertChild(e,t,n={}){if(null!=e&&e!==this){const i=e.getParent(),o=this!==i;let a=t;if(null==a&&(a=this.getChildCount(),o||(a-=1)),i){const u=i.getChildren();if(u){const l=u.indexOf(e);l>=0&&(e.setParent(null,n),u.splice(l,1),i.setChildren(u,n))}}let s=this.children;if(null==s?(s=[],s.push(e)):s.splice(a,0,e),e.setParent(this,n),this.setChildren(s,n),o&&this.model){const u=this.model.getIncomingEdges(this),l=this.model.getOutgoingEdges(this);u&&u.forEach(c=>c.updateParent(n)),l&&l.forEach(c=>c.updateParent(n))}this.model&&this.model.addCell(e,n)}return this}removeFromParent(e={}){const t=this.getParent();if(null!=t){const n=t.getChildIndex(this);t.removeChildAt(n,e)}return this}removeChild(e,t={}){const n=this.getChildIndex(e);return this.removeChildAt(n,t)}removeChildAt(e,t={}){const n=this.getChildAt(e);return null!=this.children&&null!=n&&(this.unembed(n,t),n.remove(t)),n}remove(e={}){return this.batchUpdate("remove",()=>{const t=this.getParent();t&&t.removeChild(this,e),!1!==e.deep&&this.eachChild(n=>n.remove(e)),this.model&&this.model.removeCell(this,e)}),this}transition(e,t,n={},i="/"){return this.animation.start(e,t,n,i)}stopTransition(e,t,n="/"){return this.animation.stop(e,t,n),this}getTransitions(){return this.animation.get()}translate(e,t,n){return this}scale(e,t,n,i){return this}addTools(e,t,n){const i=Array.isArray(e)?e:[e],o="string"==typeof t?t:null,a="object"==typeof t?t:"object"==typeof n?n:{};if(a.reset)return this.setTools({name:o,items:i,local:a.local},a);let s=Oa(this.getTools());return null==s||null==o||s.name===o?(null==s&&(s={}),s.items||(s.items=[]),s.name=o,s.items=[...s.items,...i],this.setTools(Object.assign({},s),a)):void 0}setTools(e,t={}){return null==e?this.removeTools():this.store.set("tools",go.normalizeTools(e),t),this}getTools(){return this.store.get("tools")}removeTools(e={}){return this.store.remove("tools",e),this}hasTools(e){const t=this.getTools();return null!=t&&(null==e||t.name===e)}hasTool(e){const t=this.getTools();return null!=t&&t.items.some(n=>"string"==typeof n?n===e:n.name===e)}removeTool(e,t={}){const n=Oa(this.getTools());if(n){let i=!1;const o=n.items.slice(),a=s=>{o.splice(s,1),i=!0};if("number"==typeof e)a(e);else for(let s=o.length-1;s>=0;s-=1){const u=o[s];("string"==typeof u?u===e:u.name===e)&&a(s)}i&&(n.items=o,this.setTools(n,t))}return this}getBBox(e){return new _r}getConnectionPoint(e,t){return new Vt}toJSON(e={}){const t=Object.assign({},this.store.get()),n=Object.prototype.toString,i=this.isNode()?"node":this.isEdge()?"edge":"cell";if(!t.shape){const g=this.constructor;throw new Error(`Unable to serialize ${i} missing "shape" prop, check the ${i} "${g.name||n.call(g)}"`)}const a=!0===e.diff,s=t.attrs||{},u=this.constructor.getDefaults(!0),l=a?this.preprocess(u,!0):u,c=l.attrs||{},f={};Object.keys(t).forEach(g=>{const m=t[g];if(null!=m&&!Array.isArray(m)&&"object"==typeof m&&!Vf(m))throw new Error(`Can only serialize ${i} with plain-object props, but got a "${n.call(m)}" type of key "${g}" on ${i} "${this.id}"`);"attrs"!==g&&"shape"!==g&&a&&jh(m,l[g])&&delete t[g]}),Object.keys(s).forEach(g=>{const m=s[g],_=c[g];Object.keys(m).forEach(D=>{const L=m[D],O=_?_[D]:null;null==L||"object"!=typeof L||Array.isArray(L)?(null==_||!jh(O,L))&&(null==f[g]&&(f[g]={}),f[g][D]=L):Object.keys(L).forEach(Z=>{const le=L[Z];null!=_&&null!=O&&Ba(O)&&jh(O[Z],le)||(null==f[g]&&(f[g]={}),null==f[g][D]&&(f[g][D]={}),f[g][D][Z]=le)})})});const h=Object.assign(Object.assign({},t),{attrs:uj(f)?void 0:f});null==h.attrs&&delete h.attrs;const d=h;return 0===d.angle&&delete d.angle,Oa(d)}clone(e={}){if(!e.deep){const n=Object.assign({},this.store.get());return e.keepId||delete n.id,delete n.parent,delete n.children,new(0,this.constructor)(n)}return go.deepClone(this)[this.id]}findView(e){return e.findViewByCell(this)}startBatch(e,t={},n=this.model){return this.notify("batch:start",{name:e,data:t,cell:this}),n&&n.startBatch(e,Object.assign(Object.assign({},t),{cell:this})),this}stopBatch(e,t={},n=this.model){return n&&n.stopBatch(e,Object.assign(Object.assign({},t),{cell:this})),this.notify("batch:stop",{name:e,data:t,cell:this}),this}batchUpdate(e,t,n){const i=this.model;this.startBatch(e,n,i);const o=t();return this.stopBatch(e,n,i),o}dispose(){this.removeFromParent(),this.store.dispose()}}go.defaults={},go.attrHooks={},go.propHooks=[],function(r,e,t,n){var a,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);i>3&&o&&Object.defineProperty(e,t,o)}([Gl.dispose()],go.prototype,"dispose",null),function(r){r.normalizeTools=function e(t){return"string"==typeof t?{items:[t]}:Array.isArray(t)?{items:t}:t.items?t:{items:[t]}}}(go||(go={})),function(r){r.toStringTag=`X6.${r.name}`,r.isCell=function e(t){if(null==t)return!1;if(t instanceof r)return!0;const n=t[Symbol.toStringTag];return(null==n||n===r.toStringTag)&&"function"==typeof t.isNode&&"function"==typeof t.isEdge&&"function"==typeof t.prop&&"function"==typeof t.attr}}(go||(go={})),function(r){r.getCommonAncestor=function e(...o){const a=o.filter(u=>null!=u).map(u=>u.getAncestors()).sort((u,l)=>u.length-l.length);return a.shift().find(u=>a.every(l=>l.includes(u)))||null},r.getCellsBBox=function t(o,a={}){let s=null;for(let u=0,l=o.length;u<l;u+=1){const c=o[u];let f=c.getBBox(a);if(f){if(c.isNode()){const h=c.getAngle();null!=h&&0!==h&&(f=f.bbox(h))}s=null==s?f:s.union(f)}}return s},r.deepClone=function n(o){const a=[o,...o.getDescendants({deep:!0})];return r.cloneCells(a)},r.cloneCells=function i(o){const a=Cj(o),s=a.reduce((u,l)=>(u[l.id]=l.clone(),u),{});return a.forEach(u=>{const l=s[u.id];if(l.isEdge()){const h=l.getSourceCellId(),d=l.getTargetCellId();h&&s[h]&&l.setSource(Object.assign(Object.assign({},l.getSource()),{cell:s[h].id})),d&&s[d]&&l.setTarget(Object.assign(Object.assign({},l.getTarget()),{cell:s[d].id}))}const c=u.getParent();c&&s[c.id]&&l.setParent(s[c.id]);const f=u.getChildren();if(f&&f.length){const h=f.reduce((d,g)=>(s[g.id]&&d.push(s[g.id]),d),[]);h.length>0&&l.setChildren(h)}}),s}}(go||(go={})),function(r){r.config({propHooks(e){var{tools:t}=e,n=tz(e,["tools"]);return t&&(n.tools=r.normalizeTools(t)),n}})}(go||(go={})),function(r){let e,t;r.exist=function n(a,s){return s?null!=e&&e.exist(a):null!=t&&t.exist(a)},r.setEdgeRegistry=function i(a){e=a},r.setNodeRegistry=function o(a){t=a}}(N0||(N0={}));class uxe{constructor(e){this.ports=[],this.groups={},this.init(Oa(e))}getPorts(){return this.ports}getGroup(e){return null!=e?this.groups[e]:null}getPortsByGroup(e){return this.ports.filter(t=>t.group===e||null==t.group&&null==e)}getPortsLayoutByGroup(e,t){const n=this.getPortsByGroup(e),i=e?this.getGroup(e):null,o=i?i.position:null,a=o?o.name:null;let s;if(null!=a){const f=yp.registry.get(a);if(null==f)return yp.registry.onNotFound(a);s=f}else s=yp.presets.left;return s(n.map(f=>f&&f.position&&f.position.args||{}),t,o&&o.args||{}).map((f,h)=>{const d=n[h];return{portLayout:f,portId:d.id,portSize:d.size,portAttrs:d.attrs,labelSize:d.label.size,labelLayout:this.getPortLabelLayout(d,Vt.create(f.position),t)}})}init(e){const{groups:t,items:n}=e;null!=t&&Object.keys(t).forEach(i=>{this.groups[i]=this.parseGroup(t[i])}),Array.isArray(n)&&n.forEach(i=>{this.ports.push(this.parsePort(i))})}parseGroup(e){return Object.assign(Object.assign({},e),{label:this.getLabel(e,!0),position:this.getPortPosition(e.position,!0)})}parsePort(e){const t=Object.assign({},e),n=this.getGroup(e.group)||{};return t.markup=t.markup||n.markup,t.attrs=ja({},n.attrs,t.attrs),t.position=this.createPosition(n,t),t.label=ja({},n.label,this.getLabel(t)),t.zIndex=this.getZIndex(n,t),t.size=Object.assign(Object.assign({},n.size),t.size),t}getZIndex(e,t){return"number"==typeof t.zIndex?t.zIndex:"number"==typeof e.zIndex||"auto"===e.zIndex?e.zIndex:"auto"}createPosition(e,t){return ja({name:"left",args:{}},e.position,{args:t.args})}getPortPosition(e,t=!1){if(null==e){if(t)return{name:"left",args:{}}}else{if("string"==typeof e)return{name:e,args:{}};if(Array.isArray(e))return{name:"absolute",args:{x:e[0],y:e[1]}};if("object"==typeof e)return e}return{args:{}}}getPortLabelPosition(e,t=!1){if(null==e){if(t)return{name:"left",args:{}}}else{if("string"==typeof e)return{name:e,args:{}};if("object"==typeof e)return e}return{args:{}}}getLabel(e,t=!1){const n=e.label||{};return n.position=this.getPortLabelPosition(n.position,t),n}getPortLabelLayout(e,t,n){const o=e.label.position.args||{},a=M0.registry.get(e.label.position.name||"left")||M0.presets.left;return a?a(t,n,o):null}}var qx=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t};let Qa=(()=>{class r extends go{get[Symbol.toStringTag](){return r.toStringTag}constructor(t={}){super(t),this.initPorts()}preprocess(t,n){const{x:i,y:o,width:a,height:s}=t,u=qx(t,["x","y","width","height"]);if(null!=i||null!=o){const l=u.position;u.position=Object.assign(Object.assign({},l),{x:i??(l?l.x:0),y:o??(l?l.y:0)})}if(null!=a||null!=s){const l=u.size;u.size=Object.assign(Object.assign({},l),{width:a??(l?l.width:0),height:s??(l?l.height:0)})}return super.preprocess(u,n)}isNode(){return!0}size(t,n,i){return void 0===t?this.getSize():"number"==typeof t?this.setSize(t,n,i):this.setSize(t,n)}getSize(){const t=this.store.get("size");return t?Object.assign({},t):{width:1,height:1}}setSize(t,n,i){return"object"==typeof t?this.resize(t.width,t.height,n):this.resize(t,n,i),this}resize(t,n,i={}){this.startBatch("resize",i);const o=i.direction;if(o){const a=this.getSize();switch(o){case"left":case"right":n=a.height;break;case"top":case"bottom":t=a.width}let u={right:0,"top-right":0,top:1,"top-left":1,left:2,"bottom-left":2,bottom:3,"bottom-right":3}[o];const l=oa.normalize(this.getAngle()||0);i.absolute&&(u+=Math.floor((l+45)/90),u%=4);const c=this.getBBox();let f;f=0===u?c.getBottomLeft():1===u?c.getCorner():2===u?c.getTopRight():c.getOrigin();const h=f.clone().rotate(-l,c.getCenter()),d=Math.sqrt(t*t+n*n)/2;let g=u*Math.PI/2;g+=Math.atan(u%2==0?n/t:t/n),g-=oa.toRad(l);const _=Vt.fromPolar(d,g,h).clone().translate(t/-2,n/-2);this.store.set("size",{width:t,height:n},i),this.setPosition(_.x,_.y,i)}else this.store.set("size",{width:t,height:n},i);return this.stopBatch("resize",i),this}scale(t,n,i,o={}){const a=this.getBBox().scale(t,n,i??void 0);return this.startBatch("scale",o),this.setPosition(a.x,a.y,o),this.resize(a.width,a.height,o),this.stopBatch("scale"),this}position(t,n,i){return"number"==typeof t?this.setPosition(t,n,i):this.getPosition(t)}getPosition(t={}){if(t.relative){const i=this.getParent();if(null!=i&&i.isNode()){const o=this.getPosition(),a=i.getPosition();return{x:o.x-a.x,y:o.y-a.y}}}const n=this.store.get("position");return n?Object.assign({},n):{x:0,y:0}}setPosition(t,n,i={}){let o,a,s;if("object"==typeof t?(o=t.x,a=t.y,s=n||{}):(o=t,a=n,s=i||{}),s.relative){const u=this.getParent();if(null!=u&&u.isNode()){const l=u.getPosition();o+=l.x,a+=l.y}}if(s.deep){const u=this.getPosition();this.translate(o-u.x,a-u.y,s)}else this.store.set("position",{x:o,y:a},s);return this}translate(t=0,n=0,i={}){if(0===t&&0===n)return this;i.translateBy=i.translateBy||this.id;const o=this.getPosition();if(null!=i.restrict&&i.translateBy===this.id){const s=this.getBBox({deep:!0}),u=i.restrict,l=o.x-s.x,c=o.y-s.y,f=Math.max(u.x+l,Math.min(u.x+u.width+l-s.width,o.x+t)),h=Math.max(u.y+c,Math.min(u.y+u.height+c-s.height,o.y+n));t=f-o.x,n=h-o.y}const a={x:o.x+t,y:o.y+n};return i.tx=t,i.ty=n,i.transition?("object"!=typeof i.transition&&(i.transition={}),this.transition("position",a,Object.assign(Object.assign({},i.transition),{interp:$d.object})),this.eachChild(s=>{var u;(null===(u=i.exclude)||void 0===u?void 0:u.includes(s))||s.translate(t,n,i)})):(this.startBatch("translate",i),this.store.set("position",a,i),this.eachChild(s=>{var u;(null===(u=i.exclude)||void 0===u?void 0:u.includes(s))||s.translate(t,n,i)}),this.stopBatch("translate",i)),this}angle(t,n){return null==t?this.getAngle():this.rotate(t,n)}getAngle(){return this.store.get("angle",0)}rotate(t,n={}){const i=this.getAngle();if(n.center){const o=this.getSize(),a=this.getPosition(),s=this.getBBox().getCenter();s.rotate(i-t,n.center);const u=s.x-o.width/2-a.x,l=s.y-o.height/2-a.y;this.startBatch("rotate",{angle:t,options:n}),this.setPosition(a.x+u,a.y+l,n),this.rotate(t,Object.assign(Object.assign({},n),{center:null})),this.stopBatch("rotate")}else this.store.set("angle",n.absolute?t:(i+t)%360,n);return this}getBBox(t={}){if(t.deep){const n=this.getDescendants({deep:!0,breadthFirst:!0});return n.push(this),go.getCellsBBox(n)}return _r.fromPositionAndSize(this.getPosition(),this.getSize())}getConnectionPoint(t,n){const i=this.getBBox(),o=i.getCenter(),a=t.getTerminal(n);if(null==a)return o;const s=a.port;if(!s||!this.hasPort(s))return o;const u=this.getPort(s);if(!u||!u.group)return o;const c=this.getPortsPosition(u.group)[s].position,f=Vt.create(c).translate(i.getOrigin()),h=this.getAngle();return h&&f.rotate(-h,o),f}fit(t={}){const i=(this.getChildren()||[]).filter(c=>c.isNode());if(0===i.length)return this;this.startBatch("fit-embeds",t),t.deep&&i.forEach(c=>c.fit(t));let{x:o,y:a,width:s,height:u}=go.getCellsBBox(i);const l=hp(t.padding);return o-=l.left,a-=l.top,s+=l.left+l.right,u+=l.bottom+l.top,this.store.set({position:{x:o,y:a},size:{width:s,height:u}},t),this.stopBatch("fit-embeds"),this}get portContainerMarkup(){return this.getPortContainerMarkup()}set portContainerMarkup(t){this.setPortContainerMarkup(t)}getDefaultPortContainerMarkup(){return this.store.get("defaultPortContainerMarkup")||aa.getPortContainerMarkup()}getPortContainerMarkup(){return this.store.get("portContainerMarkup")||this.getDefaultPortContainerMarkup()}setPortContainerMarkup(t,n={}){return this.store.set("portContainerMarkup",aa.clone(t),n),this}get portMarkup(){return this.getPortMarkup()}set portMarkup(t){this.setPortMarkup(t)}getDefaultPortMarkup(){return this.store.get("defaultPortMarkup")||aa.getPortMarkup()}getPortMarkup(){return this.store.get("portMarkup")||this.getDefaultPortMarkup()}setPortMarkup(t,n={}){return this.store.set("portMarkup",aa.clone(t),n),this}get portLabelMarkup(){return this.getPortLabelMarkup()}set portLabelMarkup(t){this.setPortLabelMarkup(t)}getDefaultPortLabelMarkup(){return this.store.get("defaultPortLabelMarkup")||aa.getPortLabelMarkup()}getPortLabelMarkup(){return this.store.get("portLabelMarkup")||this.getDefaultPortLabelMarkup()}setPortLabelMarkup(t,n={}){return this.store.set("portLabelMarkup",aa.clone(t),n),this}get ports(){const t=this.store.get("ports",{items:[]});return null==t.items&&(t.items=[]),t}getPorts(){return Oa(this.ports.items)}getPortsByGroup(t){return this.getPorts().filter(n=>n.group===t)}getPort(t){return Oa(this.ports.items.find(n=>n.id&&n.id===t))}getPortAt(t){return this.ports.items[t]||null}hasPorts(){return this.ports.items.length>0}hasPort(t){return-1!==this.getPortIndex(t)}getPortIndex(t){const n="string"==typeof t?t:t.id;return null!=n?this.ports.items.findIndex(i=>i.id===n):-1}getPortsPosition(t){const n=this.getSize();return this.port.getPortsLayoutByGroup(t,new _r(0,0,n.width,n.height)).reduce((o,a)=>{const s=a.portLayout;return o[a.portId]={position:Object.assign({},s.position),angle:s.angle||0},o},{})}getPortProp(t,n){return this.getPropByPath(this.prefixPortPath(t,n))}setPortProp(t,n,i,o){if("string"==typeof n||Array.isArray(n)){const u=this.prefixPortPath(t,n);return this.setPropByPath(u,i,o)}const a=this.prefixPortPath(t);return this.setPropByPath(a,n,i)}removePortProp(t,n,i){return"string"==typeof n||Array.isArray(n)?this.removePropByPath(this.prefixPortPath(t,n),i):this.removePropByPath(this.prefixPortPath(t),n)}portProp(t,n,i,o){return null==n?this.getPortProp(t):"string"==typeof n||Array.isArray(n)?2===arguments.length?this.getPortProp(t,n):null==i?this.removePortProp(t,n,o):this.setPortProp(t,n,i,o):this.setPortProp(t,n,i)}prefixPortPath(t,n){const i=this.getPortIndex(t);if(-1===i)throw new Error(`Unable to find port with id: "${t}"`);return null==n||""===n?["ports","items",`${i}`]:Array.isArray(n)?["ports","items",`${i}`,...n]:`ports/items/${i}/${n}`}addPort(t,n){const i=[...this.ports.items];return i.push(t),this.setPropByPath("ports/items",i,n),this}addPorts(t,n){return this.setPropByPath("ports/items",[...this.ports.items,...t],n),this}insertPort(t,n,i){const o=[...this.ports.items];return o.splice(t,0,n),this.setPropByPath("ports/items",o,i),this}removePort(t,n={}){return this.removePortAt(this.getPortIndex(t),n)}removePortAt(t,n={}){if(t>=0){const i=[...this.ports.items];i.splice(t,1),n.rewrite=!0,this.setPropByPath("ports/items",i,n)}return this}removePorts(t,n){let i;if(Array.isArray(t)){if(i=n||{},t.length){i.rewrite=!0;const a=[...this.ports.items].filter(s=>!t.some(u=>s.id===("string"==typeof u?u:u.id)));this.setPropByPath("ports/items",a,i)}}else i=t||{},i.rewrite=!0,this.setPropByPath("ports/items",[],i);return this}getParsedPorts(){return this.port.getPorts()}getParsedGroups(){return this.port.groups}getPortsLayoutByGroup(t,n){return this.port.getPortsLayoutByGroup(t,n)}initPorts(){this.updatePortData(),this.on("change:ports",()=>{this.processRemovedPort(),this.updatePortData()})}processRemovedPort(){const n={};this.ports.items.forEach(s=>{s.id&&(n[s.id]=!0)});const i={};(this.store.getPrevious("ports")||{items:[]}).items.forEach(s=>{s.id&&!n[s.id]&&(i[s.id]=!0)});const a=this.model;a&&!uj(i)&&(a.getConnectedEdges(this,{incoming:!0}).forEach(l=>{const c=l.getTargetPortId();c&&i[c]&&l.remove()}),a.getConnectedEdges(this,{outgoing:!0}).forEach(l=>{const c=l.getSourcePortId();c&&i[c]&&l.remove()}))}validatePorts(){const t={},n=[];return this.ports.items.forEach(i=>{"object"!=typeof i&&n.push(`Invalid port ${i}.`),null==i.id&&(i.id=this.generatePortId()),t[i.id]&&n.push("Duplicitied port id."),t[i.id]=!0}),n}generatePortId(){return AA()}updatePortData(){const t=this.validatePorts();if(t.length>0)throw this.store.set("ports",this.store.getPrevious("ports")),new Error(t.join(" "));const n=this.port?this.port.getPorts():null;this.port=new uxe(this.ports);const i=this.port.getPorts(),o=n?i.filter(s=>n.find(u=>u.id===s.id)?null:s):[...i],a=n?n.filter(s=>i.find(u=>u.id===s.id)?null:s):[];o.length>0&&this.notify("ports:added",{added:o,cell:this,node:this}),a.length>0&&this.notify("ports:removed",{removed:a,cell:this,node:this})}}return r.defaults={angle:0,position:{x:0,y:0},size:{width:1,height:1}},r})();(function(r){r.toStringTag=`X6.${r.name}`,r.isNode=function e(t){if(null==t)return!1;if(t instanceof r)return!0;const n=t[Symbol.toStringTag];return(null==n||n===r.toStringTag)&&"function"==typeof t.isNode&&"function"==typeof t.isEdge&&"function"==typeof t.prop&&"function"==typeof t.attr&&"function"==typeof t.size&&"function"==typeof t.position}})(Qa||(Qa={})),function(r){r.config({propHooks(e){var{ports:t}=e,n=qx(e,["ports"]);return t&&(n.ports=Array.isArray(t)?{items:t}:t),n}})}(Qa||(Qa={})),function(r){r.registry=Ga.create({type:"node",process(e,t){if(N0.exist(e,!0))throw new Error(`Node with name '${e}' was registered by anthor Edge`);if("function"==typeof t)return t.config({shape:e}),t;let n=r;const{inherit:i}=t,o=qx(t,["inherit"]);if(i)if("string"==typeof i){const s=this.get(i);null==s?this.onNotFound(i,"inherited"):n=s}else n=i;null==o.constructorName&&(o.constructorName=e);const a=n.define.call(n,o);return a.config({shape:e}),a}}),N0.setNodeRegistry(r.registry)}(Qa||(Qa={})),function(r){let e=0;r.define=function n(o){const{constructorName:a,overwrite:s}=o,u=qx(o,["constructorName","overwrite"]),l=bA(function t(o){return o?MA(o):(e+=1,`CustomNode${e}`)}(a||u.shape),this);return l.config(u),u.shape&&r.registry.register(u.shape,l,s),l},r.create=function i(o){const a=o.shape||"rect",s=r.registry.get(a);return s?new s(o):r.registry.onNotFound(a)}}(Qa||(Qa={}));var Kx=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t};let Ua=(()=>{class r extends go{get[Symbol.toStringTag](){return r.toStringTag}constructor(t={}){super(t)}preprocess(t,n){const{source:i,sourceCell:o,sourcePort:a,sourcePoint:s,target:u,targetCell:l,targetPort:c,targetPoint:f}=t,d=Kx(t,["source","sourceCell","sourcePort","sourcePoint","target","targetCell","targetPort","targetPoint"]),g=m=>"string"==typeof m||"number"==typeof m;if(null!=i)if(go.isCell(i))d.source={cell:i.id};else if(g(i))d.source={cell:i};else if(Vt.isPoint(i))d.source=i.toJSON();else if(Array.isArray(i))d.source={x:i[0],y:i[1]};else{const m=i.cell;d.source=go.isCell(m)?Object.assign(Object.assign({},i),{cell:m.id}):i}if(null!=o||null!=a){let m=d.source;if(null!=o){const _=g(o)?o:o.id;m?m.cell=_:m=d.source={cell:_}}null!=a&&m&&(m.port=a)}else null!=s&&(d.source=Vt.create(s).toJSON());if(null!=u)if(go.isCell(u))d.target={cell:u.id};else if(g(u))d.target={cell:u};else if(Vt.isPoint(u))d.target=u.toJSON();else if(Array.isArray(u))d.target={x:u[0],y:u[1]};else{const m=u.cell;d.target=go.isCell(m)?Object.assign(Object.assign({},u),{cell:m.id}):u}if(null!=l||null!=c){let m=d.target;if(null!=l){const _=g(l)?l:l.id;m?m.cell=_:m=d.target={cell:_}}null!=c&&m&&(m.port=c)}else null!=f&&(d.target=Vt.create(f).toJSON());return super.preprocess(d,n)}setup(){super.setup(),this.on("change:labels",t=>this.onLabelsChanged(t)),this.on("change:vertices",t=>this.onVertexsChanged(t))}isEdge(){return!0}disconnect(t={}){return this.store.set({source:{x:0,y:0},target:{x:0,y:0}},t),this}get source(){return this.getSource()}set source(t){this.setSource(t)}getSource(){return this.getTerminal("source")}getSourceCellId(){return this.source.cell}getSourcePortId(){return this.source.port}setSource(t,n,i={}){return this.setTerminal("source",t,n,i)}get target(){return this.getTarget()}set target(t){this.setTarget(t)}getTarget(){return this.getTerminal("target")}getTargetCellId(){return this.target.cell}getTargetPortId(){return this.target.port}setTarget(t,n,i={}){return this.setTerminal("target",t,n,i)}getTerminal(t){return Object.assign({},this.store.get(t))}setTerminal(t,n,i,o={}){if(go.isCell(n))return this.store.set(t,ja({},i,{cell:n.id}),o),this;const a=n;return Vt.isPoint(n)||null!=a.x&&null!=a.y?(this.store.set(t,ja({},i,{x:a.x,y:a.y}),o),this):(this.store.set(t,Oa(n),o),this)}getSourcePoint(){return this.getTerminalPoint("source")}getTargetPoint(){return this.getTerminalPoint("target")}getTerminalPoint(t){const n=this[t];if(Vt.isPointLike(n))return Vt.create(n);const i=this.getTerminalCell(t);return i?i.getConnectionPoint(this,t):new Vt}getSourceCell(){return this.getTerminalCell("source")}getTargetCell(){return this.getTerminalCell("target")}getTerminalCell(t){if(this.model){const n="source"===t?this.getSourceCellId():this.getTargetCellId();if(n)return this.model.getCell(n)}return null}getSourceNode(){return this.getTerminalNode("source")}getTargetNode(){return this.getTerminalNode("target")}getTerminalNode(t){let n=this;const i={};for(;n&&n.isEdge();){if(i[n.id])return null;i[n.id]=!0,n=n.getTerminalCell(t)}return n&&n.isNode()?n:null}get router(){return this.getRouter()}set router(t){null==t?this.removeRouter():this.setRouter(t)}getRouter(){return this.store.get("router")}setRouter(t,n,i){return"object"==typeof t?this.store.set("router",t,n):this.store.set("router",{name:t,args:n},i),this}removeRouter(t={}){return this.store.remove("router",t),this}get connector(){return this.getConnector()}set connector(t){null==t?this.removeConnector():this.setConnector(t)}getConnector(){return this.store.get("connector")}setConnector(t,n,i){return"object"==typeof t?this.store.set("connector",t,n):this.store.set("connector",{name:t,args:n},i),this}removeConnector(t={}){return this.store.remove("connector",t)}getDefaultLabel(){const t=this.constructor,n=this.store.get("defaultLabel")||t.defaultLabel||{};return Oa(n)}get labels(){return this.getLabels()}set labels(t){this.setLabels(t)}getLabels(){return[...this.store.get("labels",[])].map(t=>this.parseLabel(t))}setLabels(t,n={}){return this.store.set("labels",Array.isArray(t)?t:[t],n),this}insertLabel(t,n,i={}){const o=this.getLabels(),a=o.length;let s=null!=n&&Number.isFinite(n)?n:a;return s<0&&(s=a+s+1),o.splice(s,0,this.parseLabel(t)),this.setLabels(o,i)}appendLabel(t,n={}){return this.insertLabel(t,-1,n)}getLabelAt(t){const n=this.getLabels();return null!=t&&Number.isFinite(t)?this.parseLabel(n[t]):null}setLabelAt(t,n,i={}){if(null!=t&&Number.isFinite(t)){const o=this.getLabels();o[t]=this.parseLabel(n),this.setLabels(o,i)}return this}removeLabelAt(t,n={}){const i=this.getLabels(),o=null!=t&&Number.isFinite(t)?t:-1,a=i.splice(o,1);return this.setLabels(i,n),a.length?a[0]:null}parseLabel(t){return"string"==typeof t?this.constructor.parseStringLabel(t):t}onLabelsChanged({previous:t,current:n}){const i=t&&n?n.filter(a=>t.find(s=>a===s||jh(a,s))?null:a):n?[...n]:[],o=t&&n?t.filter(a=>n.find(s=>a===s||jh(a,s))?null:a):t?[...t]:[];i.length>0&&this.notify("labels:added",{added:i,cell:this,edge:this}),o.length>0&&this.notify("labels:removed",{removed:o,cell:this,edge:this})}get vertices(){return this.getVertices()}set vertices(t){this.setVertices(t)}getVertices(){return[...this.store.get("vertices",[])]}setVertices(t,n={}){const i=Array.isArray(t)?t:[t];return this.store.set("vertices",i.map(o=>Vt.toJSON(o)),n),this}insertVertex(t,n,i={}){const o=this.getVertices(),a=o.length;let s=null!=n&&Number.isFinite(n)?n:a;return s<0&&(s=a+s+1),o.splice(s,0,Vt.toJSON(t)),this.setVertices(o,i)}appendVertex(t,n={}){return this.insertVertex(t,-1,n)}getVertexAt(t){return null!=t&&Number.isFinite(t)?this.getVertices()[t]:null}setVertexAt(t,n,i={}){if(null!=t&&Number.isFinite(t)){const o=this.getVertices();o[t]=n,this.setVertices(o,i)}return this}removeVertexAt(t,n={}){const i=this.getVertices(),o=null!=t&&Number.isFinite(t)?t:-1;return i.splice(o,1),this.setVertices(i,n)}onVertexsChanged({previous:t,current:n}){const i=t&&n?n.filter(a=>t.find(s=>Vt.equals(a,s))?null:a):n?[...n]:[],o=t&&n?t.filter(a=>n.find(s=>Vt.equals(a,s))?null:a):t?[...t]:[];i.length>0&&this.notify("vertexs:added",{added:i,cell:this,edge:this}),o.length>0&&this.notify("vertexs:removed",{removed:o,cell:this,edge:this})}getDefaultMarkup(){return this.store.get("defaultMarkup")||aa.getEdgeMarkup()}getMarkup(){return super.getMarkup()||this.getDefaultMarkup()}translate(t,n,i={}){return i.translateBy=i.translateBy||this.id,i.tx=t,i.ty=n,this.applyToPoints(o=>({x:(o.x||0)+t,y:(o.y||0)+n}),i)}scale(t,n,i,o={}){return this.applyToPoints(a=>Vt.create(a).scale(t,n,i).toJSON(),o)}applyToPoints(t,n={}){const i={},o=this.getSource(),a=this.getTarget();Vt.isPointLike(o)&&(i.source=t(o)),Vt.isPointLike(a)&&(i.target=t(a));const s=this.getVertices();return s.length>0&&(i.vertices=s.map(t)),this.store.set(i,n),this}getBBox(){return this.getPolyline().bbox()}getConnectionPoint(){return this.getPolyline().pointAt(.5)}getPolyline(){const t=[this.getSourcePoint(),...this.getVertices().map(n=>Vt.create(n)),this.getTargetPoint()];return new za(t)}updateParent(t){let n=null;const i=this.getSourceCell(),o=this.getTargetCell(),a=this.getParent();return i&&o&&(n=i===o||i.isDescendantOf(o)?o:o.isDescendantOf(i)?i:go.getCommonAncestor(i,o)),a&&(!n||n.id!==a.id)&&a.unembed(this,t),n&&n.embed(this,t),n}hasLoop(t={}){const n=this.getSource(),i=this.getTarget(),o=n.cell,a=i.cell;if(!o||!a)return!1;let s=o===a;if(!s&&t.deep&&this._model){const u=this.getSourceCell(),l=this.getTargetCell();u&&l&&(s=u.isAncestorOf(l,t)||l.isAncestorOf(u,t))}return s}getFragmentAncestor(){const t=[this,this.getSourceNode(),this.getTargetNode()].filter(n=>null!=n);return this.getCommonAncestor(...t)}isFragmentDescendantOf(t){const n=this.getFragmentAncestor();return!!n&&(n.id===t.id||n.isDescendantOf(t))}}return r.defaults={},r})();(function(r){r.equalTerminals=function e(t,n){return t.cell===n.cell&&(t.port===n.port||null==t.port&&null==n.port)}})(Ua||(Ua={})),function(r){r.defaultLabel={markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}],attrs:{text:{fill:"#000",fontSize:14,textAnchor:"middle",textVerticalAnchor:"middle",pointerEvents:"none"},rect:{ref:"label",fill:"#fff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}},r.parseStringLabel=function e(t){return{attrs:{label:{text:t}}}}}(Ua||(Ua={})),function(r){r.toStringTag=`X6.${r.name}`,r.isEdge=function e(t){if(null==t)return!1;if(t instanceof r)return!0;const n=t[Symbol.toStringTag];return(null==n||n===r.toStringTag)&&"function"==typeof t.isNode&&"function"==typeof t.isEdge&&"function"==typeof t.prop&&"function"==typeof t.attr&&"function"==typeof t.disconnect&&"function"==typeof t.getSource&&"function"==typeof t.getTarget}}(Ua||(Ua={})),function(r){r.registry=Ga.create({type:"edge",process(e,t){if(N0.exist(e,!1))throw new Error(`Edge with name '${e}' was registered by anthor Node`);if("function"==typeof t)return t.config({shape:e}),t;let n=r;const{inherit:i="edge"}=t,o=Kx(t,["inherit"]);if("string"==typeof i){const s=this.get(i||"edge");null==s&&i?this.onNotFound(i,"inherited"):n=s}else n=i;null==o.constructorName&&(o.constructorName=e);const a=n.define.call(n,o);return a.config({shape:e}),a}}),N0.setEdgeRegistry(r.registry)}(Ua||(Ua={})),function(r){let e=0;r.define=function n(o){const{constructorName:a,overwrite:s}=o,u=Kx(o,["constructorName","overwrite"]),l=bA(function t(o){return o?MA(o):(e+=1,`CustomEdge${e}`)}(a||u.shape),this);return l.config(u),u.shape&&r.registry.register(u.shape,l,s),l},r.create=function i(o){const a=o.shape||"edge",s=r.registry.get(a);return s?new s(o):r.registry.onNotFound(a)}}(Ua||(Ua={})),function(r){const e="basic.edge";r.config({shape:e,propHooks(t){const{label:n,vertices:i}=t,o=Kx(t,["label","vertices"]);if(n){null==o.labels&&(o.labels=[]);const a="string"==typeof n?r.parseStringLabel(n):n;o.labels.push(a)}return i&&Array.isArray(i)&&(o.vertices=i.map(a=>Vt.create(a).toJSON())),o}}),r.registry.register(e,r)}(Ua||(Ua={}));class lxe extends Gl{constructor(e,t={}){super(),this.length=0,this.comparator=t.comparator||"zIndex",this.clean(),e&&this.reset(e,{silent:!0})}toJSON(){return this.cells.map(e=>e.toJSON())}add(e,t,n){let i,o;"number"==typeof t?(i=t,o=Object.assign({merge:!1},n)):(i=this.length,o=Object.assign({merge:!1},t)),i>this.length&&(i=this.length),i<0&&(i+=this.length+1);const a=Array.isArray(e)?e:[e],s=this.comparator&&"number"!=typeof t&&!1!==o.sort,u=this.comparator||null;let l=!1;const c=[],f=[];return a.forEach(h=>{const d=this.get(h);d?o.merge&&!h.isSameStore(d)&&(d.setProp(h.getProp(),n),f.push(d),s&&!l&&(l=null==u||"function"==typeof u?d.hasChanged():"string"==typeof u?d.hasChanged(u):u.some(g=>d.hasChanged(g)))):(c.push(h),this.reference(h))}),c.length&&(s&&(l=!0),this.cells.splice(i,0,...c),this.length=this.cells.length),l&&this.sort({silent:!0}),o.silent||(c.forEach((h,d)=>{const g={cell:h,index:i+d,options:o};this.trigger("added",g),o.dryrun||h.notify("added",Object.assign({},g))}),l&&this.trigger("sorted"),(c.length||f.length)&&this.trigger("updated",{added:c,merged:f,removed:[],options:o})),this}remove(e,t={}){const n=Array.isArray(e)?e:[e],i=this.removeCells(n,t);return!t.silent&&i.length>0&&this.trigger("updated",{options:t,removed:i,added:[],merged:[]}),Array.isArray(e)?i:i[0]}removeCells(e,t){const n=[];for(let i=0;i<e.length;i+=1){const o=this.get(e[i]);if(null==o)continue;const a=this.cells.indexOf(o);this.cells.splice(a,1),this.length-=1,delete this.map[o.id],n.push(o),this.unreference(o),t.dryrun||o.remove(),t.silent||(this.trigger("removed",{cell:o,index:a,options:t}),t.dryrun||o.notify("removed",{cell:o,index:a,options:t}))}return n}reset(e,t={}){const n=this.cells.slice();if(n.forEach(i=>this.unreference(i)),this.clean(),this.add(e,Object.assign({silent:!0},t)),!t.silent){const i=this.cells.slice();this.trigger("reseted",{options:t,previous:n,current:i});const o=[],a=[];i.forEach(s=>{n.some(l=>l.id===s.id)||o.push(s)}),n.forEach(s=>{i.some(l=>l.id===s.id)||a.push(s)}),this.trigger("updated",{options:t,added:o,removed:a,merged:[]})}return this}push(e,t){return this.add(e,this.length,t)}pop(e){const t=this.at(this.length-1);return this.remove(t,e)}unshift(e,t){return this.add(e,0,t)}shift(e){const t=this.at(0);return this.remove(t,e)}get(e){return null==e?null:this.map["string"==typeof e||"number"==typeof e?e:e.id]||null}has(e){return null!=this.get(e)}at(e){return e<0&&(e+=this.length),this.cells[e]||null}first(){return this.at(0)}last(){return this.at(-1)}indexOf(e){return this.cells.indexOf(e)}toArray(){return this.cells.slice()}sort(e={}){return null!=this.comparator&&(this.cells=Uve(this.cells,this.comparator),e.silent||this.trigger("sorted")),this}clone(){return new(0,this.constructor)(this.cells.slice(),{comparator:this.comparator})}reference(e){this.map[e.id]=e,e.on("*",this.notifyCellEvent,this)}unreference(e){e.off("*",this.notifyCellEvent,this),delete this.map[e.id]}notifyCellEvent(e,t){const n=t.cell;this.trigger(`cell:${e}`,t),n&&(n.isNode()?this.trigger(`node:${e}`,Object.assign(Object.assign({},t),{node:n})):n.isEdge()&&this.trigger(`edge:${e}`,Object.assign(Object.assign({},t),{edge:n})))}clean(){this.length=0,this.cells=[],this.map={}}}class $h extends Gl{get[Symbol.toStringTag](){return $h.toStringTag}constructor(e=[]){super(),this.batches={},this.addings=new WeakMap,this.nodes={},this.edges={},this.outgoings={},this.incomings={},this.collection=new lxe(e),this.setup()}notify(e,t){this.trigger(e,t);const n=this.graph;return n&&n.trigger("sorted"===e||"reseted"===e||"updated"===e?`model:${e}`:e,t),this}setup(){const e=this.collection;e.on("sorted",()=>this.notify("sorted",null)),e.on("updated",t=>this.notify("updated",t)),e.on("cell:change:zIndex",()=>this.sortOnChangeZ()),e.on("added",({cell:t})=>{this.onCellAdded(t)}),e.on("removed",t=>{const n=t.cell;this.onCellRemoved(n,t.options),this.notify("cell:removed",t),n.isNode()?this.notify("node:removed",Object.assign(Object.assign({},t),{node:n})):n.isEdge()&&this.notify("edge:removed",Object.assign(Object.assign({},t),{edge:n}))}),e.on("reseted",t=>{this.onReset(t.current),this.notify("reseted",t)}),e.on("edge:change:source",({edge:t})=>this.onEdgeTerminalChanged(t,"source")),e.on("edge:change:target",({edge:t})=>{this.onEdgeTerminalChanged(t,"target")})}sortOnChangeZ(){this.collection.sort()}onCellAdded(e){const t=e.id;e.isEdge()?(e.updateParent(),this.edges[t]=!0,this.onEdgeTerminalChanged(e,"source"),this.onEdgeTerminalChanged(e,"target")):this.nodes[t]=!0}onCellRemoved(e,t){const n=e.id;if(e.isEdge()){delete this.edges[n];const i=e.getSource(),o=e.getTarget();if(i&&i.cell){const a=this.outgoings[i.cell],s=a?a.indexOf(n):-1;s>=0&&(a.splice(s,1),0===a.length&&delete this.outgoings[i.cell])}if(o&&o.cell){const a=this.incomings[o.cell],s=a?a.indexOf(n):-1;s>=0&&(a.splice(s,1),0===a.length&&delete this.incomings[o.cell])}}else delete this.nodes[n];t.clear||(t.disconnectEdges?this.disconnectConnectedEdges(e,t):this.removeConnectedEdges(e,t)),e.model===this&&(e.model=null)}onReset(e){this.nodes={},this.edges={},this.outgoings={},this.incomings={},e.forEach(t=>this.onCellAdded(t))}onEdgeTerminalChanged(e,t){const n="source"===t?this.outgoings:this.incomings,i=e.previous(t);if(i&&i.cell){const a=go.isCell(i.cell)?i.cell.id:i.cell,s=n[a],u=s?s.indexOf(e.id):-1;u>=0&&(s.splice(u,1),0===s.length&&delete n[a])}const o=e.getTerminal(t);if(o&&o.cell){const a=go.isCell(o.cell)?o.cell.id:o.cell,s=n[a]||[];-1===s.indexOf(e.id)&&s.push(e.id),n[a]=s}}prepareCell(e,t){return!e.model&&(!t||!t.dryrun)&&(e.model=this),null==e.zIndex&&e.setZIndex(this.getMaxZIndex()+1,{silent:!0}),e}resetCells(e,t={}){return e.map(n=>this.prepareCell(n,Object.assign(Object.assign({},t),{dryrun:!0}))),this.collection.reset(e,t),e.map(n=>this.prepareCell(n,{options:t})),this}clear(e={}){const t=this.getCells();if(0===t.length)return this;const n=Object.assign(Object.assign({},e),{clear:!0});return this.batchUpdate("clear",()=>{const i=t.sort((o,a)=>(o.isEdge()?1:2)-(a.isEdge()?1:2));for(;i.length>0;){const o=i.shift();o&&o.remove(n)}},n),this}addNode(e,t={}){const n=Qa.isNode(e)?e:this.createNode(e);return this.addCell(n,t),n}updateNode(e,t={}){const n=this.createNode(e),i=n.getProp();return n.dispose(),this.updateCell(i,t)}createNode(e){return Qa.create(e)}addEdge(e,t={}){const n=Ua.isEdge(e)?e:this.createEdge(e);return this.addCell(n,t),n}createEdge(e){return Ua.create(e)}updateEdge(e,t={}){const n=this.createEdge(e),i=n.getProp();return n.dispose(),this.updateCell(i,t)}addCell(e,t={}){return Array.isArray(e)?this.addCells(e,t):(!this.collection.has(e)&&!this.addings.has(e)&&(this.addings.set(e,!0),this.collection.add(this.prepareCell(e,t),t),e.eachChild(n=>this.addCell(n,t)),this.addings.delete(e)),this)}addCells(e,t={}){const n=e.length;if(0===n)return this;const i=Object.assign(Object.assign({},t),{position:n-1,maxPosition:n-1});return this.startBatch("add",Object.assign(Object.assign({},i),{cells:e})),e.forEach(o=>{this.addCell(o,i),i.position-=1}),this.stopBatch("add",Object.assign(Object.assign({},i),{cells:e})),this}updateCell(e,t={}){const n=e.id&&this.getCell(e.id);return!!n&&this.batchUpdate("update",()=>(Object.keys(e).forEach(i=>n.setProp(i,e[i],t)),!0),e)}removeCell(e,t={}){const n="string"==typeof e?this.getCell(e):e;return n&&this.has(n)?this.collection.remove(n,t):null}updateCellId(e,t){this.startBatch("update",{id:t}),e.prop("id",t);const n=e.clone({keepId:!0});return this.addCell(n),this.getConnectedEdges(e).forEach(o=>{const a=o.getSourceCell(),s=o.getTargetCell();a===e&&o.setSource(Object.assign(Object.assign({},o.getSource()),{cell:t})),s===e&&o.setTarget(Object.assign(Object.assign({},o.getTarget()),{cell:t}))}),this.removeCell(e),this.stopBatch("update",{id:t}),n}removeCells(e,t={}){return e.length?this.batchUpdate("remove",()=>e.map(n=>this.removeCell(n,t))):[]}removeConnectedEdges(e,t={}){const n=this.getConnectedEdges(e);return n.forEach(i=>{i.remove(t)}),n}disconnectConnectedEdges(e,t={}){const n="string"==typeof e?e:e.id;this.getConnectedEdges(e).forEach(i=>{const o=i.getSourceCellId(),a=i.getTargetCellId();o===n&&i.setSource({x:0,y:0},t),a===n&&i.setTarget({x:0,y:0},t)})}has(e){return this.collection.has(e)}total(){return this.collection.length}indexOf(e){return this.collection.indexOf(e)}getCell(e){return this.collection.get(e)}getCells(){return this.collection.toArray()}getFirstCell(){return this.collection.first()}getLastCell(){return this.collection.last()}getMinZIndex(){const e=this.collection.first();return e&&e.getZIndex()||0}getMaxZIndex(){const e=this.collection.last();return e&&e.getZIndex()||0}getCellsFromCache(e){return e?Object.keys(e).map(t=>this.getCell(t)).filter(t=>null!=t):[]}getNodes(){return this.getCellsFromCache(this.nodes)}getEdges(){return this.getCellsFromCache(this.edges)}getOutgoingEdges(e){const n=this.outgoings["string"==typeof e?e:e.id];return n?n.map(i=>this.getCell(i)).filter(i=>i&&i.isEdge()):null}getIncomingEdges(e){const n=this.incomings["string"==typeof e?e:e.id];return n?n.map(i=>this.getCell(i)).filter(i=>i&&i.isEdge()):null}getConnectedEdges(e,t={}){const n=[],i="string"==typeof e?this.getCell(e):e;if(null==i)return n;const o={},a=t.indirect;let s=t.incoming,u=t.outgoing;null==s&&null==u&&(s=u=!0);const l=(c,f)=>{if((f?this.getOutgoingEdges(c):this.getIncomingEdges(c))?.forEach(d=>{o[d.id]||(n.push(d),o[d.id]=!0,a&&(s&&l(d,!1),u&&l(d,!0)))}),a&&c.isEdge()){const d=f?c.getTargetCell():c.getSourceCell();d&&d.isEdge()&&(o[d.id]||(n.push(d),l(d,f)))}};if(u&&l(i,!0),s&&l(i,!1),t.deep){const c=i.getDescendants({deep:!0}),f={};c.forEach(d=>{d.isNode()&&(f[d.id]=!0)});const h=(d,g)=>{(g?this.getOutgoingEdges(d.id):this.getIncomingEdges(d.id))?.forEach(_=>{if(!o[_.id]){const D=_.getSourceCell(),L=_.getTargetCell();if(!t.enclosed&&D&&f[D.id]&&L&&f[L.id])return;n.push(_),o[_.id]=!0}})};c.forEach(d=>{d.isEdge()||(u&&h(d,!0),s&&h(d,!1))})}return n}isBoundary(e,t){const n="string"==typeof e?this.getCell(e):e,i=t?this.getIncomingEdges(n):this.getOutgoingEdges(n);return null==i||0===i.length}getBoundaryNodes(e){const t=[];return Object.keys(this.nodes).forEach(n=>{if(this.isBoundary(n,e)){const i=this.getCell(n);i&&t.push(i)}}),t}getRoots(){return this.getBoundaryNodes(!0)}getLeafs(){return this.getBoundaryNodes(!1)}isRoot(e){return this.isBoundary(e,!0)}isLeaf(e){return this.isBoundary(e,!1)}getNeighbors(e,t={}){let n=t.incoming,i=t.outgoing;null==n&&null==i&&(n=i=!0);const a=this.getConnectedEdges(e,t).reduce((s,u)=>{const l=u.hasLoop(t),c=u.getSourceCell(),f=u.getTargetCell();return n&&c&&c.isNode()&&!s[c.id]&&(l||c!==e&&(!t.deep||!c.isDescendantOf(e)))&&(s[c.id]=c),i&&f&&f.isNode()&&!s[f.id]&&(l||f!==e&&(!t.deep||!f.isDescendantOf(e)))&&(s[f.id]=f),s},{});if(e.isEdge()){if(n){const s=e.getSourceCell();s&&s.isNode()&&!a[s.id]&&(a[s.id]=s)}if(i){const s=e.getTargetCell();s&&s.isNode()&&!a[s.id]&&(a[s.id]=s)}}return Object.keys(a).map(s=>a[s])}isNeighbor(e,t,n={}){let i=n.incoming,o=n.outgoing;return null==i&&null==o&&(i=o=!0),this.getConnectedEdges(e,n).some(a=>{const s=a.getSourceCell(),u=a.getTargetCell();return!!(i&&s&&s.id===t.id||o&&u&&u.id===t.id)})}getSuccessors(e,t={}){const n=[];return this.search(e,(i,o)=>{i!==e&&this.matchDistance(o,t.distance)&&n.push(i)},Object.assign(Object.assign({},t),{outgoing:!0})),n}isSuccessor(e,t,n={}){let i=!1;return this.search(e,(o,a)=>{if(o===t&&o!==e&&this.matchDistance(a,n.distance))return i=!0,!1},Object.assign(Object.assign({},n),{outgoing:!0})),i}getPredecessors(e,t={}){const n=[];return this.search(e,(i,o)=>{i!==e&&this.matchDistance(o,t.distance)&&n.push(i)},Object.assign(Object.assign({},t),{incoming:!0})),n}isPredecessor(e,t,n={}){let i=!1;return this.search(e,(o,a)=>{if(o===t&&o!==e&&this.matchDistance(a,n.distance))return i=!0,!1},Object.assign(Object.assign({},n),{incoming:!0})),i}matchDistance(e,t){return null==t||("function"==typeof t?t(e):!(!Array.isArray(t)||!t.includes(e))||e===t)}getCommonAncestor(...e){const t=[];return e.forEach(n=>{n&&(Array.isArray(n)?t.push(...n):t.push(n))}),go.getCommonAncestor(...t)}getSubGraph(e,t={}){const n=[],i={},o=[],a=[],s=u=>{i[u.id]||(n.push(u),i[u.id]=u,u.isEdge()&&a.push(u),u.isNode()&&o.push(u))};return e.forEach(u=>{s(u),t.deep&&u.getDescendants({deep:!0}).forEach(c=>s(c))}),a.forEach(u=>{const l=u.getSourceCell(),c=u.getTargetCell();l&&!i[l.id]&&(n.push(l),i[l.id]=l,l.isNode()&&o.push(l)),c&&!i[c.id]&&(n.push(c),i[c.id]=c,c.isNode()&&o.push(c))}),o.forEach(u=>{this.getConnectedEdges(u,t).forEach(c=>{const f=c.getSourceCell(),h=c.getTargetCell();!i[c.id]&&f&&i[f.id]&&h&&i[h.id]&&(n.push(c),i[c.id]=c)})}),n}cloneSubGraph(e,t={}){const n=this.getSubGraph(e,t);return this.cloneCells(n)}cloneCells(e){return go.cloneCells(e)}getNodesFromPoint(e,t){const n="number"==typeof e?{x:e,y:t||0}:e;return this.getNodes().filter(i=>i.getBBox().containsPoint(n))}getNodesInArea(e,t,n,i,o){const a="number"==typeof e?new _r(e,t,n,i):_r.create(e),s="number"==typeof e?o:t,u=s&&s.strict;return this.getNodes().filter(l=>{const c=l.getBBox();return u?a.containsRect(c):a.isIntersectWithRect(c)})}getEdgesInArea(e,t,n,i,o){const a="number"==typeof e?new _r(e,t,n,i):_r.create(e),s="number"==typeof e?o:t,u=s&&s.strict;return this.getEdges().filter(l=>{const c=l.getBBox();return 0===c.width?c.inflate(1,0):0===c.height&&c.inflate(0,1),u?a.containsRect(c):a.isIntersectWithRect(c)})}getNodesUnderNode(e,t={}){const n=e.getBBox();return(null==t.by||"bbox"===t.by?this.getNodesInArea(n):this.getNodesFromPoint(n[t.by])).filter(o=>e.id!==o.id&&!o.isDescendantOf(e))}getAllCellsBBox(){return this.getCellsBBox(this.getCells())}getCellsBBox(e,t={}){return go.getCellsBBox(e,t)}search(e,t,n={}){n.breadthFirst?this.breadthFirstSearch(e,t,n):this.depthFirstSearch(e,t,n)}breadthFirstSearch(e,t,n={}){const i=[],o={},a={};for(i.push(e),a[e.id]=0;i.length>0;){const s=i.shift();null==s||o[s.id]||(o[s.id]=!0,!1===Ti(t,this,s,a[s.id]))||this.getNeighbors(s,n).forEach(l=>{a[l.id]=a[s.id]+1,i.push(l)})}}depthFirstSearch(e,t,n={}){const i=[],o={},a={};for(i.push(e),a[e.id]=0;i.length>0;){const s=i.pop();if(null==s||o[s.id]||(o[s.id]=!0,!1===Ti(t,this,s,a[s.id])))continue;const u=this.getNeighbors(s,n),l=i.length;u.forEach(c=>{a[c.id]=a[s.id]+1,i.splice(l,0,c)})}}getShortestPath(e,t,n={}){const i={};this.getEdges().forEach(l=>{const c=l.getSourceCellId(),f=l.getTargetCellId();c&&f&&(i[c]||(i[c]=[]),i[f]||(i[f]=[]),i[c].push(f),n.directed||i[f].push(c))});const a=VA.run(i,"string"==typeof e?e:e.id,n.weight),s=[];let u="string"==typeof t?t:t.id;for(a[u]&&s.push(u);u=a[u];)s.unshift(u);return s}translate(e,t,n){return this.getCells().filter(i=>!i.hasParent()).forEach(i=>i.translate(e,t,n)),this}resize(e,t,n){return this.resizeCells(e,t,this.getCells(),n)}resizeCells(e,t,n,i={}){const o=this.getCellsBBox(n);if(o){const a=Math.max(e/o.width,0),s=Math.max(t/o.height,0),u=o.getOrigin();n.forEach(l=>l.scale(a,s,u,i))}return this}toJSON(e={}){return $h.toJSON(this.getCells(),e)}parseJSON(e){return $h.fromJSON(e)}fromJSON(e,t={}){const n=this.parseJSON(e);return this.resetCells(n,t),this}startBatch(e,t={}){return this.batches[e]=(this.batches[e]||0)+1,this.notify("batch:start",{name:e,data:t}),this}stopBatch(e,t={}){return this.batches[e]=(this.batches[e]||0)-1,this.notify("batch:stop",{name:e,data:t}),this}batchUpdate(e,t,n={}){this.startBatch(e,n);const i=t();return this.stopBatch(e,n),i}hasActiveBatch(e=Object.keys(this.batches)){return(Array.isArray(e)?e:[e]).some(n=>this.batches[n]>0)}}(function(r){r.toStringTag=`X6.${r.name}`,r.isModel=function e(t){if(null==t)return!1;if(t instanceof r)return!0;const n=t[Symbol.toStringTag];return(null==n||n===r.toStringTag)&&"function"==typeof t.addNode&&"function"==typeof t.addEdge&&null!=t.collection}})($h||($h={})),function(r){r.toJSON=function e(n,i={}){return{cells:n.map(o=>o.toJSON(i))}},r.fromJSON=function t(n){const i=[];return Array.isArray(n)?i.push(...n):(n.cells&&i.push(...n.cells),n.nodes&&n.nodes.forEach(o=>{null==o.shape&&(o.shape="rect"),i.push(o)}),n.edges&&n.edges.forEach(o=>{null==o.shape&&(o.shape="edge"),i.push(o)})),i.map(o=>{const a=o.shape;if(a){if(Qa.registry.exist(a))return Qa.create(o);if(Ua.registry.exist(a))return Ua.create(o)}throw new Error("The `shape` should be specified when creating a node/edge instance")})}}($h||($h={}));class ng extends Qa{get label(){return this.getLabel()}set label(e){this.setLabel(e)}getLabel(){return this.getAttrByPath("text/text")}setLabel(e,t){return null==e?this.removeLabel():this.setAttrByPath("text/text",e,t),this}removeLabel(){return this.removeAttrByPath("text/text"),this}}function hxe(r,e="body"){return[{tagName:r,selector:e},{tagName:"text",selector:"label"}]}function L0(r,e,t={}){const n={constructorName:r,markup:hxe(r,t.selector),attrs:{[r]:Object.assign({},ng.bodyAttr)}};return(t.parent||ng).define(ja(n,e,{shape:r}))}!function(r){r.bodyAttr={fill:"#ffffff",stroke:"#333333",strokeWidth:2},r.labelAttr={fontSize:14,fill:"#000000",refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontFamily:"Arial, helvetica, sans-serif"},r.config({attrs:{text:Object.assign({},r.labelAttr)},propHooks(e){const{label:t}=e,n=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(e,["label"]);return t&&Uy(n,"attrs/text/text",t),n},visible:!0})}(ng||(ng={})),L0("rect",{attrs:{body:{refWidth:"100%",refHeight:"100%"}}});const gxe=Ua.define({shape:"edge",markup:[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}],attrs:{lines:{connection:!0,strokeLinejoin:"round"},wrap:{strokeWidth:10},line:{stroke:"#333",strokeWidth:2,targetMarker:"classic"}}});L0("ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}}});class k0 extends ng{get points(){return this.getPoints()}set points(e){this.setPoints(e)}getPoints(){return this.getAttrByPath("body/refPoints")}setPoints(e,t){return null==e?this.removePoints():this.setAttrByPath("body/refPoints",k0.pointsToString(e),t),this}removePoints(){return this.removeAttrByPath("body/refPoints"),this}}!function(r){function e(t){return"string"==typeof t?t:t.map(n=>Array.isArray(n)?n.join(","):Vt.isPointLike(n)?`${n.x}, ${n.y}`:"").join(" ")}r.pointsToString=e,r.config({propHooks(t){const{points:n}=t,i=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(t,["points"]);if(n){const o=e(n);o&&Uy(i,"attrs/body/refPoints",o)}return i}})}(k0||(k0={})),L0("polygon",{},{parent:k0}),L0("polyline",{},{parent:k0}),ng.define({shape:"path",markup:[{tagName:"rect",selector:"bg"},{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}],attrs:{bg:{refWidth:"100%",refHeight:"100%",fill:"none",stroke:"none",pointerEvents:"all"},body:{fill:"none",stroke:"#000",strokeWidth:2}},propHooks(r){const{path:e}=r,t=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(r,["path"]);return e&&Uy(t,"attrs/body/refD",e),t}}),ng.define({shape:"text-block",markup:[{tagName:"rect",selector:"body"},Vd.SUPPORT_FOREIGNOBJECT?{tagName:"foreignObject",selector:"foreignObject",children:[{tagName:"div",ns:Ps.xhtml,selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attrs:{textAnchor:"middle"}}],attrs:{body:Object.assign(Object.assign({},ng.bodyAttr),{refWidth:"100%",refHeight:"100%"}),foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}},propHooks(r){const{text:e}=r,t=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(r,["text"]);return e&&Uy(t,"attrs/label/text",e),t},attrHooks:{text:{set(r,{cell:e,view:t,refBBox:n,elem:i,attrs:o}){if(!(i instanceof HTMLElement)){const a=o.style||{},s={text:r,width:-5,height:"100%"},u=Object.assign({textVerticalAnchor:"middle"},a);return Ti(Wf.presets.textWrap.set,this,s,{cell:e,view:t,elem:i,refBBox:n,attrs:u}),{fill:a.color||null}}i.textContent=r},position(r,{refBBox:e,elem:t}){if(t instanceof SVGElement)return e.getCenter()}}}}),L0("image",{attrs:{image:{refWidth:"100%",refHeight:"100%"}},propHooks:function dxe(r="xlink:href"){return t=>{const{imageUrl:n,imageWidth:i,imageHeight:o}=t,a=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(t,["imageUrl","imageWidth","imageHeight"]);if(null!=n||null!=i||null!=o){const s=()=>{if(a.attrs){const u=a.attrs.image;null!=n&&(u[r]=n),null!=i&&(u.width=i),null!=o&&(u.height=o),a.attrs.image=u}};a.attrs?(null==a.attrs.image&&(a.attrs.image={}),s()):(a.attrs={image:{}},s())}return a}}()},{selector:"image"}),L0("circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%"}}});class fl extends fu{constructor(){super(...arguments),this.portsCache={}}get[Symbol.toStringTag](){return fl.toStringTag}getContainerClassName(){const e=[super.getContainerClassName(),this.prefixClassName("node")];return this.can("nodeMovable")||e.push(this.prefixClassName("node-immovable")),e.join(" ")}updateClassName(e){const t=e.target;if(t.hasAttribute("magnet")){const n=this.prefixClassName("port-unconnectable");this.can("magnetConnectable")?Vl(t,n):Mo(t,n)}else{const n=this.prefixClassName("node-immovable");this.can("nodeMovable")?this.removeClass(n):this.addClass(n)}}isNodeView(){return!0}confirmUpdate(e){let t=e;return this.hasAction(t,"ports")&&(this.removePorts(),this.cleanPortsCache()),this.hasAction(t,"render")?(this.render(),t=this.removeAction(t,["render","update","resize","translate","rotate","ports","tools"])):(t=this.handleAction(t,"resize",()=>this.resize(),"update"),t=this.handleAction(t,"update",()=>this.update(),$s.useCSSSelector?"ports":null),t=this.handleAction(t,"translate",()=>this.translate()),t=this.handleAction(t,"rotate",()=>this.rotate()),t=this.handleAction(t,"ports",()=>this.renderPorts()),t=this.handleAction(t,"tools",()=>this.renderTools())),t}update(e){this.cleanCache(),$s.useCSSSelector&&this.removePorts();const t=this.cell,n=t.getSize(),i=t.getAttrs();this.updateAttrs(this.container,i,{attrs:e===i?null:e,rootBBox:new _r(0,0,n.width,n.height),selectors:this.selectors}),$s.useCSSSelector&&this.renderPorts()}renderMarkup(){const e=this.cell.markup;if(e){if("string"==typeof e)throw new TypeError("Not support string markup.");return this.renderJSONMarkup(e)}throw new TypeError("Invalid node markup.")}renderJSONMarkup(e){const t=this.parseJSONMarkup(e,this.container);this.selectors=t.selectors,this.container.appendChild(t.fragment)}render(){return this.empty(),this.renderMarkup(),this.resize(),this.updateTransform(),$s.useCSSSelector||this.renderPorts(),this.renderTools(),this}resize(){this.cell.getAngle()&&this.rotate(),this.update()}translate(){this.updateTransform()}rotate(){this.updateTransform()}getTranslationString(){const e=this.cell.getPosition();return`translate(${e.x},${e.y})`}getRotationString(){const e=this.cell.getAngle();if(e){const t=this.cell.getSize();return`rotate(${e},${t.width/2},${t.height/2})`}}updateTransform(){let e=this.getTranslationString();const t=this.getRotationString();t&&(e+=` ${t}`),this.container.setAttribute("transform",e)}findPortElem(e,t){const n=e?this.portsCache[e]:null;return n?this.findOne(t,n.portContentElement,n.portContentSelectors||{}):null}cleanPortsCache(){this.portsCache={}}removePorts(){Object.keys(this.portsCache).forEach(e=>{m0(this.portsCache[e].portElement)})}renderPorts(){const e=this.container,t=[];e.childNodes.forEach(a=>{t.push(a)});const n=this.cell.getParsedPorts(),i=Pj(n,"zIndex"),o="auto";i[o]&&i[o].forEach(a=>{const s=this.getPortElement(a);e.append(s),t.push(s)}),Object.keys(i).forEach(a=>{if(a!==o){const s=parseInt(a,10);this.appendPorts(i[a],s,t)}}),this.updatePorts()}appendPorts(e,t,n){const i=e.map(o=>this.getPortElement(o));n[t]||t<0?LA(n[Math.max(t,0)],i):$y(this.container,i)}getPortElement(e){const t=this.portsCache[e.id];return t?t.portElement:this.createPortElement(e)}createPortElement(e){let t=aa.renderMarkup(this.cell.getPortContainerMarkup());const n=t.elem;if(null==n)throw new Error("Invalid port container markup.");t=aa.renderMarkup(this.getPortMarkup(e));const i=t.elem,o=t.selectors;if(null==i)throw new Error("Invalid port markup.");this.setAttrs({port:e.id,"port-group":e.group},i);let a="x6-port";e.group&&(a+=` x6-port-${e.group}`),Mo(n,a),Mo(n,"x6-port"),Mo(i,"x6-port-body"),n.appendChild(i);let u,l,s=o;if(this.existPortLabel(e)){if(t=aa.renderMarkup(this.getPortLabelMarkup(e.label)),u=t.elem,l=t.selectors,null==u)throw new Error("Invalid port label markup.");if(o&&l){for(const f in l)if(o[f]&&f!==this.rootSelector)throw new Error("Selectors within port must be unique.");s=Object.assign(Object.assign({},o),l)}Mo(u,"x6-port-label"),n.appendChild(u)}return this.portsCache[e.id]={portElement:n,portSelectors:s,portLabelElement:u,portLabelSelectors:l,portContentElement:i,portContentSelectors:o},this.graph.options.onPortRendered&&this.graph.options.onPortRendered({port:e,node:this.cell,container:n,selectors:s,labelContainer:u,labelSelectors:l,contentContainer:i,contentSelectors:o}),n}updatePorts(){const e=this.cell.getParsedGroups(),t=Object.keys(e);0===t.length?this.updatePortGroup():t.forEach(n=>this.updatePortGroup(n))}updatePortGroup(e){const t=_r.fromSize(this.cell.getSize()),n=this.cell.getPortsLayoutByGroup(e,t);for(let i=0,o=n.length;i<o;i+=1){const a=n[i],u=this.portsCache[a.portId]||{},l=a.portLayout;if(this.applyPortTransform(u.portElement,l),null!=a.portAttrs){const f={selectors:u.portSelectors||{}};a.portSize&&(f.rootBBox=_r.fromSize(a.portSize)),this.updateAttrs(u.portElement,a.portAttrs,f)}const c=a.labelLayout;if(c&&u.portLabelElement&&(this.applyPortTransform(u.portLabelElement,c,-(l.angle||0)),c.attrs)){const f={selectors:u.portLabelSelectors||{}};a.labelSize&&(f.rootBBox=_r.fromSize(a.labelSize)),this.updateAttrs(u.portLabelElement,c.attrs,f)}}}applyPortTransform(e,t,n=0){const i=t.angle,o=t.position;b0(e,Ns().rotate(n).translate(o.x||0,o.y||0).rotate(i||0),{absolute:!0})}getPortMarkup(e){return e.markup||this.cell.portMarkup}getPortLabelMarkup(e){return e.markup||this.cell.portLabelMarkup}existPortLabel(e){return e.attrs&&e.attrs.text}getEventArgs(e,t,n){const i=this,o=i.cell;return null==t||null==n?{e,view:i,node:o,cell:o}:{e,x:t,y:n,view:i,node:o,cell:o}}getPortEventArgs(e,t,n){const i=this,o=i.cell;return n?{e,x:n.x,y:n.y,view:i,node:o,cell:o,port:t}:{e,view:i,node:o,cell:o,port:t}}notifyMouseDown(e,t,n){super.onMouseDown(e,t,n),this.notify("node:mousedown",this.getEventArgs(e,t,n))}notifyMouseMove(e,t,n){super.onMouseMove(e,t,n),this.notify("node:mousemove",this.getEventArgs(e,t,n))}notifyMouseUp(e,t,n){super.onMouseUp(e,t,n),this.notify("node:mouseup",this.getEventArgs(e,t,n))}notifyPortEvent(e,t,n){const i=this.findAttr("port",t.target);i&&this.notify(e,this.getPortEventArgs(t,i,n))}onClick(e,t,n){super.onClick(e,t,n),this.notify("node:click",this.getEventArgs(e,t,n)),this.notifyPortEvent("node:port:click",e,{x:t,y:n})}onDblClick(e,t,n){super.onDblClick(e,t,n),this.notify("node:dblclick",this.getEventArgs(e,t,n)),this.notifyPortEvent("node:port:dblclick",e,{x:t,y:n})}onContextMenu(e,t,n){super.onContextMenu(e,t,n),this.notify("node:contextmenu",this.getEventArgs(e,t,n)),this.notifyPortEvent("node:port:contextmenu",e,{x:t,y:n})}onMouseDown(e,t,n){this.isPropagationStopped(e)||(this.notifyMouseDown(e,t,n),this.notifyPortEvent("node:port:mousedown",e,{x:t,y:n}),this.startNodeDragging(e,t,n))}onMouseMove(e,t,n){const i=this.getEventData(e),o=i.action;if("magnet"===o)this.dragMagnet(e,t,n);else{if("move"===o){const s=i.targetView||this;s.dragNode(e,t,n),s.notify("node:moving",{e,x:t,y:n,view:s,cell:s.cell,node:s.cell})}this.notifyMouseMove(e,t,n),this.notifyPortEvent("node:port:mousemove",e,{x:t,y:n})}this.setEventData(e,i)}onMouseUp(e,t,n){const i=this.getEventData(e),o=i.action;"magnet"===o?this.stopMagnetDragging(e,t,n):(this.notifyMouseUp(e,t,n),this.notifyPortEvent("node:port:mouseup",e,{x:t,y:n}),"move"===o&&(i.targetView||this).stopNodeDragging(e,t,n));const a=i.targetMagnet;a&&this.onMagnetClick(e,a,t,n),this.checkMouseleave(e)}onMouseOver(e){super.onMouseOver(e),this.notify("node:mouseover",this.getEventArgs(e)),this.notifyPortEvent("node:port:mouseover",e)}onMouseOut(e){super.onMouseOut(e),this.notify("node:mouseout",this.getEventArgs(e)),this.notifyPortEvent("node:port:mouseout",e)}onMouseEnter(e){this.updateClassName(e),super.onMouseEnter(e),this.notify("node:mouseenter",this.getEventArgs(e)),this.notifyPortEvent("node:port:mouseenter",e)}onMouseLeave(e){super.onMouseLeave(e),this.notify("node:mouseleave",this.getEventArgs(e)),this.notifyPortEvent("node:port:mouseleave",e)}onMouseWheel(e,t,n,i){super.onMouseWheel(e,t,n,i),this.notify("node:mousewheel",Object.assign({delta:i},this.getEventArgs(e,t,n)))}onMagnetClick(e,t,n,i){const o=this.graph;o.view.getMouseMovedCount(e)>o.options.clickThreshold||this.notify("node:magnet:click",Object.assign({magnet:t},this.getEventArgs(e,n,i)))}onMagnetDblClick(e,t,n,i){this.notify("node:magnet:dblclick",Object.assign({magnet:t},this.getEventArgs(e,n,i)))}onMagnetContextMenu(e,t,n,i){this.notify("node:magnet:contextmenu",Object.assign({magnet:t},this.getEventArgs(e,n,i)))}onMagnetMouseDown(e,t,n,i){this.startMagnetDragging(e,n,i)}onCustomEvent(e,t,n,i){this.notify("node:customevent",Object.assign({name:t},this.getEventArgs(e,n,i))),super.onCustomEvent(e,t,n,i)}prepareEmbedding(e){const t=this.graph,i=this.getEventData(e).cell||this.cell,o=t.findViewByCell(i),a=t.snapToGrid(e.clientX,e.clientY);this.notify("node:embed",{e,node:i,view:o,cell:i,x:a.x,y:a.y,currentParent:i.getParent()})}processEmbedding(e,t){const n=t.cell||this.cell,i=t.graph||this.graph,o=i.options.embedding,a=o.findParent;let s="function"==typeof a?Ti(a,i,{view:this,node:this.cell}).filter(h=>go.isCell(h)&&this.cell.id!==h.id&&!h.isDescendantOf(this.cell)):i.model.getNodesUnderNode(n,{by:a});if(o.frontOnly&&s.length>0){const h=Pj(s,"zIndex"),d=u0e(Object.keys(h));d&&(s=h[d])}s=s.filter(h=>h.visible);let u=null;const l=t.candidateEmbedView,c=o.validate;for(let h=s.length-1;h>=0;h-=1){const d=s[h];if(l&&l.cell.id===d.id){u=l;break}{const g=d.findView(i);if(Ti(c,i,{child:this.cell,parent:g.cell,childView:this,parentView:g})){u=g;break}}}this.clearEmbedding(t),u&&u.highlight(null,{type:"embedding"}),t.candidateEmbedView=u;const f=i.snapToGrid(e.clientX,e.clientY);this.notify("node:embedding",{e,cell:n,node:n,view:i.findViewByCell(n),x:f.x,y:f.y,currentParent:n.getParent(),candidateParent:u?u.cell:null})}clearEmbedding(e){const t=e.candidateEmbedView;t&&(t.unhighlight(null,{type:"embedding"}),e.candidateEmbedView=null)}finalizeEmbedding(e,t){this.graph.startBatch("embedding");const n=t.cell||this.cell,i=t.graph||this.graph,o=i.findViewByCell(n),a=n.getParent(),s=t.candidateEmbedView;if(s?(s.unhighlight(null,{type:"embedding"}),t.candidateEmbedView=null,(null==a||a.id!==s.cell.id)&&s.cell.insertChild(n,void 0,{ui:!0})):a&&a.unembed(n,{ui:!0}),i.model.getConnectedEdges(n,{deep:!0}).forEach(u=>{u.updateParent({ui:!0})}),o&&s){const u=i.snapToGrid(e.clientX,e.clientY);o.notify("node:embedded",{e,cell:n,x:u.x,y:u.y,node:n,view:i.findViewByCell(n),previousParent:a,currentParent:n.getParent()})}this.graph.stopBatch("embedding")}getDelegatedView(){let e=this.cell,t=this;for(;t&&!e.isEdge();){if(!e.hasParent()||t.can("stopDelegateOnDragging"))return t;e=e.getParent(),t=this.graph.findViewByCell(e)}return null}validateMagnet(e,t,n){if("passive"!==t.getAttribute("magnet")){const i=this.graph.options.connecting.validateMagnet;return!i||Ti(i,this.graph,{e:n,magnet:t,view:e,cell:e.cell})}return!1}startMagnetDragging(e,t,n){if(!this.can("magnetConnectable"))return;e.stopPropagation();const i=e.currentTarget,o=this.graph;this.setEventData(e,{targetMagnet:i}),this.validateMagnet(this,i,e)?(o.options.magnetThreshold<=0&&this.startConnectting(e,i,t,n),this.setEventData(e,{action:"magnet"}),this.stopPropagation(e)):((dp(i,"x6-port-body")||!!i.closest(".x6-port-body"))&&this.stopPropagation(e),this.onMouseDown(e,t,n)),o.view.delegateDragEvents(e,this)}startConnectting(e,t,n,i){this.graph.model.startBatch("add-edge");const o=this.createEdgeFromMagnet(t,n,i);o.setEventData(e,o.prepareArrowheadDragging("target",{x:n,y:i,isNewEdge:!0,fallbackAction:"remove"})),this.setEventData(e,{edgeView:o}),o.notifyMouseDown(e,n,i)}getDefaultEdge(e,t){let n;const i=this.graph.options.connecting.createEdge;return i&&(n=Ti(i,this.graph,{sourceMagnet:t,sourceView:e,sourceCell:e.cell})),n}createEdgeFromMagnet(e,t,n){const i=this.graph,o=i.model,a=this.getDefaultEdge(this,e);return a.setSource(Object.assign(Object.assign({},a.getSource()),this.getEdgeTerminal(e,t,n,a,"source"))),a.setTarget(Object.assign(Object.assign({},a.getTarget()),{x:t,y:n})),a.addTo(o,{async:!1,ui:!0}),a.findView(i)}dragMagnet(e,t,n){const i=this.getEventData(e),o=i.edgeView;if(o)o.onMouseMove(e,t,n),this.autoScrollGraph(e.clientX,e.clientY);else{const a=this.graph,s=a.options.magnetThreshold,u=this.getEventTarget(e),l=i.targetMagnet;if("onleave"===s){if(l===u||l.contains(u))return}else if(a.view.getMouseMovedCount(e)<=s)return;this.startConnectting(e,l,t,n)}}stopMagnetDragging(e,t,n){const o=this.eventData(e).edgeView;o&&(o.onMouseUp(e,t,n),this.graph.model.stopBatch("add-edge"))}notifyUnhandledMouseDown(e,t,n){this.notify("node:unhandled:mousedown",{e,x:t,y:n,view:this,cell:this.cell,node:this.cell})}notifyNodeMove(e,t,n,i,o){let a=[o];const s=this.graph.getPlugin("selection");if(s&&s.isSelectionMovable()){const u=s.getSelectedCells();u.includes(o)&&(a=u.filter(l=>l.isNode()))}a.forEach(u=>{this.notify(e,{e:t,x:n,y:i,cell:u,node:u,view:u.findView(this.graph)})})}getRestrictArea(e){const t=this.graph.options.translating.restrict,n="function"==typeof t?Ti(t,this.graph,e):t;return"number"==typeof n?this.graph.transform.getGraphArea().inflate(n):!0===n?this.graph.transform.getGraphArea():n||null}startNodeDragging(e,t,n){const i=this.getDelegatedView();if(null==i||!i.can("nodeMovable"))return this.notifyUnhandledMouseDown(e,t,n);this.setEventData(e,{targetView:i,action:"move"});const o=Vt.create(i.cell.getPosition());i.setEventData(e,{moving:!1,offset:o.diff(t,n),restrict:this.getRestrictArea(i)})}dragNode(e,t,n){const i=this.cell,o=this.graph,a=o.getGridSize(),s=this.getEventData(e),u=s.offset,l=s.restrict;s.moving||(s.moving=!0,this.addClass("node-moving"),this.notifyNodeMove("node:move",e,t,n,this.cell)),this.autoScrollGraph(e.clientX,e.clientY);const c=Yo.snapToGrid(t+u.x,a),f=Yo.snapToGrid(n+u.y,a);i.setPosition(c,f,{restrict:l,deep:!0,ui:!0}),o.options.embedding.enabled&&(s.embedding||(this.prepareEmbedding(e),s.embedding=!0),this.processEmbedding(e,s))}stopNodeDragging(e,t,n){const i=this.getEventData(e);i.embedding&&this.finalizeEmbedding(e,i),i.moving&&(this.removeClass("node-moving"),this.notifyNodeMove("node:moved",e,t,n,this.cell)),i.moving=!1,i.embedding=!1}autoScrollGraph(e,t){const n=this.graph.getPlugin("scroller");n&&n.autoScroll(e,t)}}(function(r){r.toStringTag=`X6.${r.name}`,r.isNodeView=function e(t){if(null==t)return!1;if(t instanceof r)return!0;const n=t[Symbol.toStringTag];return(null==n||n===r.toStringTag)&&"function"==typeof t.isNodeView&&"function"==typeof t.isEdgeView&&"function"==typeof t.confirmUpdate&&"function"==typeof t.update&&"function"==typeof t.findPortElem&&"function"==typeof t.resize&&"function"==typeof t.rotate&&"function"==typeof t.translate}})(fl||(fl={})),fl.config({isSvgElement:!0,priority:0,bootstrap:["render"],actions:{view:["render"],markup:["render"],attrs:["update"],size:["resize","ports","tools"],angle:["rotate","tools"],position:["translate","tools"],ports:["ports"],tools:["tools"]}}),fl.registry.register("node",fl,!0);class Yh extends fu{constructor(){super(...arguments),this.POINT_ROUNDING=2}get[Symbol.toStringTag](){return Yh.toStringTag}getContainerClassName(){return[super.getContainerClassName(),this.prefixClassName("edge")].join(" ")}get sourceBBox(){const e=this.sourceView;if(!e){const n=this.cell.getSource();return new _r(n.x,n.y)}const t=this.sourceMagnet;return e.isEdgeElement(t)?new _r(this.sourceAnchor.x,this.sourceAnchor.y):e.getBBoxOfElement(t||e.container)}get targetBBox(){const e=this.targetView;if(!e){const n=this.cell.getTarget();return new _r(n.x,n.y)}const t=this.targetMagnet;return e.isEdgeElement(t)?new _r(this.targetAnchor.x,this.targetAnchor.y):e.getBBoxOfElement(t||e.container)}isEdgeView(){return!0}confirmUpdate(e,t={}){let n=e;if(this.hasAction(n,"source")){if(!this.updateTerminalProperties("source"))return n;n=this.removeAction(n,"source")}if(this.hasAction(n,"target")){if(!this.updateTerminalProperties("target"))return n;n=this.removeAction(n,"target")}const i=this.graph,o=this.sourceView,a=this.targetView;return i&&(o&&!i.renderer.isViewMounted(o)||a&&!i.renderer.isViewMounted(a))?n:this.hasAction(n,"render")?(this.render(),n=this.removeAction(n,["render","update","labels","tools"]),n):(n=this.handleAction(n,"update",()=>this.update(t)),n=this.handleAction(n,"labels",()=>this.onLabelsChange(t)),n=this.handleAction(n,"tools",()=>this.renderTools()),n)}render(){return this.empty(),this.renderMarkup(),this.labelContainer=null,this.renderLabels(),this.update(),this.renderTools(),this}renderMarkup(){const e=this.cell.markup;if(e){if("string"==typeof e)throw new TypeError("Not support string markup.");return this.renderJSONMarkup(e)}throw new TypeError("Invalid edge markup.")}renderJSONMarkup(e){const t=this.parseJSONMarkup(e,this.container);this.selectors=t.selectors,this.container.append(t.fragment)}customizeLabels(){if(this.labelContainer){const e=this.cell,t=e.labels;for(let n=0,i=t.length;n<i;n+=1){const o=t[n],a=this.labelCache[n],s=this.labelSelectors[n],u=this.graph.options.onEdgeLabelRendered;u&&u({edge:e,label:o,container:a,selectors:s})}}}renderLabels(){const e=this.cell,t=e.getLabels(),n=t.length;let i=this.labelContainer;if(this.labelCache={},this.labelSelectors={},n<=0)return i&&i.parentNode&&i.parentNode.removeChild(i),this;i?this.empty(i):(i=Uh("g"),this.addClass(this.prefixClassName("edge-labels"),i),this.labelContainer=i);for(let o=0,a=t.length;o<a;o+=1){const u=this.normalizeLabelMarkup(this.parseLabelMarkup(t[o].markup));let l,c;if(u)l=u.node,c=u.selectors;else{const h=e.getDefaultLabel(),d=this.normalizeLabelMarkup(this.parseLabelMarkup(h.markup));l=d.node,c=d.selectors}l.setAttribute("data-index",`${o}`),i.appendChild(l);const f=this.rootSelector;if(c[f])throw new Error("Ambiguous label root selector.");c[f]=l,this.labelCache[o]=l,this.labelSelectors[o]=c}return null==i.parentNode&&this.container.appendChild(i),this.updateLabels(),this.customizeLabels(),this}onLabelsChange(e={}){this.shouldRerenderLabels(e)?this.renderLabels():this.updateLabels(),this.updateLabelPositions()}shouldRerenderLabels(e={}){const t=this.cell.previous("labels");if(null==t)return!0;if("propertyPathArray"in e&&"propertyValue"in e){const n=e.propertyPathArray||[],i=n.length;if(i>1&&t[n[1]]){if(2===i)return"object"==typeof e.propertyValue&&lx(e.propertyValue,"markup");if("markup"!==n[2])return!1}}return!0}parseLabelMarkup(e){return e?"string"==typeof e?this.parseLabelStringMarkup(e):this.parseJSONMarkup(e):null}parseLabelStringMarkup(e){const t=Ai.createVectors(e),n=document.createDocumentFragment();for(let i=0,o=t.length;i<o;i+=1)n.appendChild(t[i].node);return{fragment:n,selectors:{}}}normalizeLabelMarkup(e){if(null==e)return;const t=e.fragment;if(!(t instanceof DocumentFragment&&t.hasChildNodes()))throw new Error("Invalid label markup.");let n;const i=t.childNodes;return n=i.length>1||"G"!==i[0].nodeName.toUpperCase()?Ai.create("g").append(t):Ai.create(i[0]),n.addClass(this.prefixClassName("edge-label")),{node:n.node,selectors:e.selectors}}updateLabels(){if(this.labelContainer){const e=this.cell,t=e.labels,n=this.can("edgeLabelMovable"),i=e.getDefaultLabel();for(let o=0,a=t.length;o<a;o+=1){const s=this.labelCache[o],u=this.labelSelectors[o];s.setAttribute("cursor",n?"move":"default");const l=t[o],c=ja({},i.attrs,l.attrs);this.updateAttrs(s,c,{selectors:u,rootBBox:l.size?_r.fromSize(l.size):void 0})}}}renderTools(){const e=this.cell.getTools();return this.addTools(e),this}update(e={}){this.cleanCache(),this.updateConnection(e);const t=this.cell.getAttrs();return null!=t&&this.updateAttrs(this.container,t,{selectors:this.selectors}),this.updateLabelPositions(),this.updateTools(e),this}removeRedundantLinearVertices(e={}){const t=this.cell,n=t.getVertices(),i=[this.sourceAnchor,...n,this.targetAnchor],o=i.length,a=new za(i);a.simplify({threshold:.01});const s=a.points.map(l=>l.toJSON()),u=s.length;return o===u?0:(t.setVertices(s.slice(1,u-1),e),o-u)}getTerminalView(e){switch(e){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error(`Unknown terminal type '${e}'`)}}getTerminalAnchor(e){switch(e){case"source":return Vt.create(this.sourceAnchor);case"target":return Vt.create(this.targetAnchor);default:throw new Error(`Unknown terminal type '${e}'`)}}getTerminalConnectionPoint(e){switch(e){case"source":return Vt.create(this.sourcePoint);case"target":return Vt.create(this.targetPoint);default:throw new Error(`Unknown terminal type '${e}'`)}}getTerminalMagnet(e,t={}){switch(e){case"source":{if(t.raw)return this.sourceMagnet;const n=this.sourceView;return n?this.sourceMagnet||n.container:null}case"target":{if(t.raw)return this.targetMagnet;const n=this.targetView;return n?this.targetMagnet||n.container:null}default:throw new Error(`Unknown terminal type '${e}'`)}}updateConnection(e={}){const t=this.cell;if(e.translateBy&&t.isFragmentDescendantOf(e.translateBy)){const n=e.tx||0,i=e.ty||0;this.routePoints=new za(this.routePoints).translate(n,i).points,this.translateConnectionPoints(n,i),this.path.translate(n,i)}else{const n=t.getVertices(),i=this.findAnchors(n);this.sourceAnchor=i.source,this.targetAnchor=i.target,this.routePoints=this.findRoutePoints(n);const o=this.findConnectionPoints(this.routePoints,this.sourceAnchor,this.targetAnchor);this.sourcePoint=o.source,this.targetPoint=o.target;const a=this.findMarkerPoints(this.routePoints,this.sourcePoint,this.targetPoint);this.path=this.findPath(this.routePoints,a.source||this.sourcePoint,a.target||this.targetPoint)}this.cleanCache()}findAnchors(e){const t=this.cell,o=e[0],a=e[e.length-1];return t.target.priority&&!t.source.priority?this.findAnchorsOrdered("target",a,"source",o):this.findAnchorsOrdered("source",o,"target",a)}findAnchorsOrdered(e,t,n,i){let o,a;const s=this.cell,u=s[e],l=s[n],c=this.getTerminalView(e),f=this.getTerminalView(n),h=this.getTerminalMagnet(e),d=this.getTerminalMagnet(n);if(c){let g;g=t?Vt.create(t):f?d:Vt.create(l),o=this.getAnchor(u.anchor,c,h,g,e)}else o=Vt.create(u);if(f){const g=Vt.create(i||o);a=this.getAnchor(l.anchor,f,d,g,n)}else a=Vt.isPointLike(l)?Vt.create(l):new Vt;return{[e]:o,[n]:a}}getAnchor(e,t,n,i,o){const a=t.isEdgeElement(n),s=this.graph.options.connecting;let l,u="string"==typeof e?{name:e}:e;if(!u){const f=a?("source"===o?s.sourceEdgeAnchor:s.targetEdgeAnchor)||s.edgeAnchor:("source"===o?s.sourceAnchor:s.targetAnchor)||s.anchor;u="string"==typeof f?{name:f}:f}if(!u)throw new Error("Anchor should be specified.");const c=u.name;if(a){const f=I0.registry.get(c);if("function"!=typeof f)return I0.registry.onNotFound(c);l=Ti(f,this,t,n,i,u.args||{},o)}else{const f=T0.registry.get(c);if("function"!=typeof f)return T0.registry.onNotFound(c);l=Ti(f,this,t,n,i,u.args||{},o)}return l?l.round(this.POINT_ROUNDING):new Vt}findRoutePoints(e=[]){const t=this.graph.options.connecting.router||tg.presets.normal,n=this.cell.getRouter()||t;let i;if("function"==typeof n)i=Ti(n,this,e,{},this);else{const o="string"==typeof n?n:n.name,a="string"==typeof n?{}:n.args||{},s=o?tg.registry.get(o):tg.presets.normal;if("function"!=typeof s)return tg.registry.onNotFound(o);i=Ti(s,this,e,a,this)}return null==i?e.map(o=>Vt.create(o)):i.map(o=>Vt.create(o))}findConnectionPoints(e,t,n){const i=this.cell,o=this.graph.options.connecting,a=i.getSource(),s=i.getTarget(),u=this.sourceView,l=this.targetView,c=e[0],f=e[e.length-1];let h,d;if(u&&!u.isEdgeElement(this.sourceMagnet)){const g=this.sourceMagnet||u.container,_=new zr(c||n,t);h=this.getConnectionPoint(a.connectionPoint||o.sourceConnectionPoint||o.connectionPoint,u,g,_,"source")}else h=t;if(l&&!l.isEdgeElement(this.targetMagnet)){const g=this.targetMagnet||l.container,m=s.connectionPoint||o.targetConnectionPoint||o.connectionPoint,D=new zr(f||t,n);d=this.getConnectionPoint(m,l,g,D,"target")}else d=n;return{source:h,target:d}}getConnectionPoint(e,t,n,i,o){const a=i.end;if(null==e)return a;const s="string"==typeof e?e:e.name,u="string"==typeof e?{}:e.args,l=O0.registry.get(s);if("function"!=typeof l)return O0.registry.onNotFound(s);const c=Ti(l,this,i,t,n,u||{},o);return c?c.round(this.POINT_ROUNDING):a}findMarkerPoints(e,t,n){const i=f=>{const h=this.cell.getAttrs(),d=Object.keys(h);for(let g=0,m=d.length;g<m;g+=1){const _=h[d[g]];if(_[`${f}Marker`]||_[`${f}-marker`]){const D=_.strokeWidth||_["stroke-width"];if(D)return parseFloat(D);break}}return null},o=e[0],a=e[e.length-1];let s,u;const l=i("source");l&&(s=t.clone().move(o||n,-l));const c=i("target");return c&&(u=n.clone().move(a||t,-c)),this.sourceMarkerPoint=s||t.clone(),this.targetMarkerPoint=u||n.clone(),{source:s,target:u}}findPath(e,t,n){const i=this.cell.getConnector()||this.graph.options.connecting.connector;let o,a,s;if("string"==typeof i?o=i:(o=i.name,a=i.args),o){const l=bp.registry.get(o);if("function"!=typeof l)return bp.registry.onNotFound(o);s=l}else s=bp.presets.normal;const u=Ti(s,this,t,n,e,Object.assign(Object.assign({},a),{raw:!0}),this);return"string"==typeof u?oi.parse(u):u}translateConnectionPoints(e,t){this.sourcePoint.translate(e,t),this.targetPoint.translate(e,t),this.sourceAnchor.translate(e,t),this.targetAnchor.translate(e,t),this.sourceMarkerPoint.translate(e,t),this.targetMarkerPoint.translate(e,t)}updateLabelPositions(){if(null==this.labelContainer)return this;if(!this.path)return this;const t=this.cell,n=t.getLabels();if(0===n.length)return this;const i=t.getDefaultLabel(),o=this.normalizeLabelPosition(i.position);for(let a=0,s=n.length;a<s;a+=1){const l=this.normalizeLabelPosition(n[a].position),c=ja({},o,l),f=this.getLabelTransformationMatrix(c);this.labelCache[a].setAttribute("transform",y0(f))}return this}updateTerminalProperties(e){const n=this.graph,i=this.cell[e],o=i&&i.cell,a=`${e}View`;if(!o)return this[a]=null,this.updateTerminalMagnet(e),!0;const s=n.getCellById(o);if(!s)throw new Error(`Edge's ${e} node with id "${o}" not exists`);const u=s.findView(n);return!!u&&(this[a]=u,this.updateTerminalMagnet(e),!0)}updateTerminalMagnet(e){const t=`${e}Magnet`,n=this.getTerminalView(e);if(n){let i=n.getMagnetFromEdgeTerminal(this.cell[e]);i===n.container&&(i=null),this[t]=i}else this[t]=null}getLabelPositionAngle(e){const t=this.cell.getLabelAt(e);return t&&t.position&&"object"==typeof t.position&&t.position.angle||0}getLabelPositionArgs(e){const t=this.cell.getLabelAt(e);if(t&&t.position&&"object"==typeof t.position)return t.position.options}getDefaultLabelPositionArgs(){const e=this.cell.getDefaultLabel();if(e&&e.position&&"object"==typeof e.position)return e.position.options}mergeLabelPositionArgs(e,t){return null===e?null:void 0===e?null===t?null:t:ja({},t,e)}getConnection(){return null!=this.path?this.path.clone():null}getConnectionPathData(){if(null==this.path)return"";const e=this.cache.pathCache;return lx(e,"data")||(e.data=this.path.serialize()),e.data||""}getConnectionSubdivisions(){if(null==this.path)return null;const e=this.cache.pathCache;return lx(e,"segmentSubdivisions")||(e.segmentSubdivisions=this.path.getSegmentSubdivisions()),e.segmentSubdivisions}getConnectionLength(){if(null==this.path)return 0;const e=this.cache.pathCache;return lx(e,"length")||(e.length=this.path.length({segmentSubdivisions:this.getConnectionSubdivisions()})),e.length}getPointAtLength(e){return null==this.path?null:this.path.pointAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getPointAtRatio(e){return null==this.path?null:(zh(e)&&(e=parseFloat(e)/100),this.path.pointAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()}))}getTangentAtLength(e){return null==this.path?null:this.path.tangentAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getTangentAtRatio(e){return null==this.path?null:this.path.tangentAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPoint(e){return null==this.path?null:this.path.closestPoint(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPointLength(e){return null==this.path?null:this.path.closestPointLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPointRatio(e){return null==this.path?null:this.path.closestPointNormalizedLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getLabelPosition(e,t,n,i){const o={distance:0};let s,a=0;"number"==typeof n?(a=n,s=i):s=n,null!=s&&(o.options=s);const u=s&&s.absoluteOffset,l=!(s&&s.absoluteDistance),c=s&&s.absoluteDistance&&s.reverseDistance,f=this.path,h={segmentSubdivisions:this.getConnectionSubdivisions()},d=new Vt(e,t),g=f.closestPointT(d,h),m=this.getConnectionLength()||0;let D,L,_=f.lengthAtT(g,h);if(l&&(_=m>0?_/m:0),c&&(_=-1*(m-_)||1),o.distance=_,u||(D=f.tangentAtT(g)),D)L=D.pointOffset(d);else{const O=f.pointAtT(g),Z=d.diff(O);L={x:Z.x,y:Z.y}}return o.offset=L,o.angle=a,o}normalizeLabelPosition(e){return"number"==typeof e?{distance:e}:e}getLabelTransformationMatrix(e){const t=this.normalizeLabelPosition(e),n=t.options||{},i=t.angle||0,o=t.distance,a=o>0&&o<=1;let s=0;const u={x:0,y:0},l=t.offset;l&&("number"==typeof l?s=l:(null!=l.x&&(u.x=l.x),null!=l.y&&(u.y=l.y)));const c=0!==u.x||0!==u.y||0===s,f=n.keepGradient,h=n.ensureLegibility,d=this.path,g={segmentSubdivisions:this.getConnectionSubdivisions()},m=a?o*this.getConnectionLength():o,_=d.tangentAtLength(m,g);let D,L=i;if(_){if(c)D=_.start,D.translate(u);else{const O=_.clone();O.rotate(-90,_.start),O.setLength(s),D=O.end}f&&(L=_.angle()+i,h&&(L=oa.normalize((L+90)%180-90)))}else D=d.start,c&&D.translate(u);return Ns().translate(D.x,D.y).rotate(L)}getVertexIndex(e,t){const i=this.cell.getVertices(),o=this.getClosestPointLength(new Vt(e,t));let a=0;if(null!=o)for(const s=i.length;a<s;a+=1){const l=this.getClosestPointLength(i[a]);if(null!=l&&o<l)break}return a}getEventArgs(e,t,n){const i=this,o=i.cell;return null==t||null==n?{e,view:i,edge:o,cell:o}:{e,x:t,y:n,view:i,edge:o,cell:o}}notifyUnhandledMouseDown(e,t,n){this.notify("edge:unhandled:mousedown",{e,x:t,y:n,view:this,cell:this.cell,edge:this.cell})}notifyMouseDown(e,t,n){super.onMouseDown(e,t,n),this.notify("edge:mousedown",this.getEventArgs(e,t,n))}notifyMouseMove(e,t,n){super.onMouseMove(e,t,n),this.notify("edge:mousemove",this.getEventArgs(e,t,n))}notifyMouseUp(e,t,n){super.onMouseUp(e,t,n),this.notify("edge:mouseup",this.getEventArgs(e,t,n))}onClick(e,t,n){super.onClick(e,t,n),this.notify("edge:click",this.getEventArgs(e,t,n))}onDblClick(e,t,n){super.onDblClick(e,t,n),this.notify("edge:dblclick",this.getEventArgs(e,t,n))}onContextMenu(e,t,n){super.onContextMenu(e,t,n),this.notify("edge:contextmenu",this.getEventArgs(e,t,n))}onMouseDown(e,t,n){this.notifyMouseDown(e,t,n),this.startEdgeDragging(e,t,n)}onMouseMove(e,t,n){const i=this.getEventData(e);switch(i.action){case"drag-label":this.dragLabel(e,t,n);break;case"drag-arrowhead":this.dragArrowhead(e,t,n);break;case"drag-edge":this.dragEdge(e,t,n)}return this.notifyMouseMove(e,t,n),i}onMouseUp(e,t,n){const i=this.getEventData(e);switch(i.action){case"drag-label":this.stopLabelDragging(e,t,n);break;case"drag-arrowhead":this.stopArrowheadDragging(e,t,n);break;case"drag-edge":this.stopEdgeDragging(e,t,n)}return this.notifyMouseUp(e,t,n),this.checkMouseleave(e),i}onMouseOver(e){super.onMouseOver(e),this.notify("edge:mouseover",this.getEventArgs(e))}onMouseOut(e){super.onMouseOut(e),this.notify("edge:mouseout",this.getEventArgs(e))}onMouseEnter(e){super.onMouseEnter(e),this.notify("edge:mouseenter",this.getEventArgs(e))}onMouseLeave(e){super.onMouseLeave(e),this.notify("edge:mouseleave",this.getEventArgs(e))}onMouseWheel(e,t,n,i){super.onMouseWheel(e,t,n,i),this.notify("edge:mousewheel",Object.assign({delta:i},this.getEventArgs(e,t,n)))}onCustomEvent(e,t,n,i){if(C4(e.target,"edge-tool",this.container)){if(e.stopPropagation(),this.can("useEdgeTools")){if("edge:remove"===t)return void this.cell.remove({ui:!0});this.notify("edge:customevent",Object.assign({name:t},this.getEventArgs(e,n,i)))}this.notifyMouseDown(e,n,i)}else this.notify("edge:customevent",Object.assign({name:t},this.getEventArgs(e,n,i))),super.onCustomEvent(e,t,n,i)}onLabelMouseDown(e,t,n){this.notifyMouseDown(e,t,n),this.startLabelDragging(e,t,n),this.getEventData(e).stopPropagation&&e.stopPropagation()}startEdgeDragging(e,t,n){this.can("edgeMovable")?this.setEventData(e,{x:t,y:n,moving:!1,action:"drag-edge"}):this.notifyUnhandledMouseDown(e,t,n)}dragEdge(e,t,n){const i=this.getEventData(e);i.moving||(i.moving=!0,this.addClass("edge-moving"),this.notify("edge:move",{e,x:t,y:n,view:this,cell:this.cell,edge:this.cell})),this.cell.translate(t-i.x,n-i.y,{ui:!0}),this.setEventData(e,{x:t,y:n}),this.notify("edge:moving",{e,x:t,y:n,view:this,cell:this.cell,edge:this.cell})}stopEdgeDragging(e,t,n){const i=this.getEventData(e);i.moving&&(this.removeClass("edge-moving"),this.notify("edge:moved",{e,x:t,y:n,view:this,cell:this.cell,edge:this.cell})),i.moving=!1}prepareArrowheadDragging(e,t){const n=this.getTerminalMagnet(e),i={action:"drag-arrowhead",x:t.x,y:t.y,isNewEdge:!0===t.isNewEdge,terminalType:e,initialMagnet:n,initialTerminal:yA(this.cell[e]),fallbackAction:t.fallbackAction||"revert",getValidateConnectionArgs:this.createValidateConnectionArgs(e),options:t.options};return this.beforeArrowheadDragging(i),i}createValidateConnectionArgs(e){const t=[];t[4]=e,t[5]=this;let n,i=0,o=0;"source"===e?(i=2,n="target"):(o=2,n="source");const a=this.cell[n],s=a.cell;if(s){let u;const l=t[i]=this.graph.findViewByCell(s);l&&(u=l.getMagnetFromEdgeTerminal(a),u===l.container&&(u=void 0)),t[i+1]=u}return(u,l)=>(t[o]=u,t[o+1]=u.container===l?void 0:l,t)}beforeArrowheadDragging(e){e.zIndex=this.cell.zIndex,this.cell.toFront();const t=this.container.style;e.pointerEvents=t.pointerEvents,t.pointerEvents="none",this.graph.options.connecting.highlight&&this.highlightAvailableMagnets(e)}afterArrowheadDragging(e){null!=e.zIndex&&(this.cell.setZIndex(e.zIndex,{ui:!0}),e.zIndex=null),this.container.style.pointerEvents=e.pointerEvents||"",this.graph.options.connecting.highlight&&this.unhighlightAvailableMagnets(e)}validateConnection(e,t,n,i,o,a,s){const u=this.graph.options.connecting,l=u.allowLoop,c=u.allowNode,f=u.allowEdge,h=u.allowPort,d=u.allowMulti,g=u.validateConnection,m=a?a.cell:null,_="target"===o?n:e,D="target"===o?i:t;let L=!0;const O=Z=>{const le="source"===o?s?s.port:null:m?m.getSourcePortId():null,pe="target"===o?s?s.port:null:m?m.getTargetPortId():null;return Ti(Z,this.graph,{edge:m,edgeView:a,sourceView:e,targetView:n,sourcePort:le,targetPort:pe,sourceMagnet:t,targetMagnet:i,sourceCell:e?e.cell:null,targetCell:n?n.cell:null,type:o})};if(null!=l&&("boolean"==typeof l?!l&&e===n&&(L=!1):L=O(l)),L&&null!=h&&("boolean"==typeof h?!h&&D&&(L=!1):L=O(h)),L&&null!=f&&("boolean"==typeof f?!f&&Yh.isEdgeView(_)&&(L=!1):L=O(f)),L&&null!=c&&null==D&&("boolean"==typeof c?!c&&fl.isNodeView(_)&&(L=!1):L=O(c)),L&&null!=d&&a){const Z=a.cell,le="source"===o?s:Z.getSource(),pe="target"===o?s:Z.getTarget(),Ee=s?this.graph.getCellById(s.cell):null;if(le&&pe&&le.cell&&pe.cell&&Ee)if("function"==typeof d)L=O(d);else{const Re=this.graph.model.getConnectedEdges(Ee,{outgoing:"source"===o,incoming:"target"===o});Re.length&&("withPort"===d?Re.some(Ue=>{const at=Ue.getSource(),_t=Ue.getTarget();return at&&_t&&at.cell===le.cell&&_t.cell===pe.cell&&null!=at.port&&at.port===le.port&&null!=_t.port&&_t.port===pe.port})&&(L=!1):d||Re.some(Ue=>{const at=Ue.getSource(),_t=Ue.getTarget();return at&&_t&&at.cell===le.cell&&_t.cell===pe.cell})&&(L=!1))}}return L&&null!=g&&(L=O(g)),L}allowConnectToBlank(e){const t=this.graph,i=t.options.connecting.allowBlank;if("function"!=typeof i)return!!i;const o=t.findViewByCell(e),a=e.getSourceCell(),s=e.getTargetCell(),u=t.findViewByCell(a),l=t.findViewByCell(s);return Ti(i,t,{edge:e,edgeView:o,sourceCell:a,targetCell:s,sourceView:u,targetView:l,sourcePort:e.getSourcePortId(),targetPort:e.getTargetPortId(),sourceMagnet:o.sourceMagnet,targetMagnet:o.targetMagnet})}validateEdge(e,t,n){const i=this.graph;if(!this.allowConnectToBlank(e)){const a=e.getSourceCellId(),s=e.getTargetCellId();if(!a||!s)return!1}const o=i.options.connecting.validateEdge;return!o||Ti(o,i,{edge:e,type:t,previous:n})}arrowheadDragging(e,t,n,i){i.x=t,i.y=n,i.currentTarget!==e&&(i.currentMagnet&&i.currentView&&i.currentView.unhighlight(i.currentMagnet,{type:"magnetAdsorbed"}),i.currentView=this.graph.findViewByElem(e),i.currentView?(i.currentMagnet=i.currentView.findMagnet(e),i.currentMagnet&&this.validateConnection(...i.getValidateConnectionArgs(i.currentView,i.currentMagnet),i.currentView.getEdgeTerminal(i.currentMagnet,t,n,this.cell,i.terminalType))?i.currentView.highlight(i.currentMagnet,{type:"magnetAdsorbed"}):i.currentMagnet=null):i.currentMagnet=null),i.currentTarget=e,this.cell.prop(i.terminalType,{x:t,y:n},Object.assign(Object.assign({},i.options),{ui:!0}))}arrowheadDragged(e,t,n){const i=e.currentView,o=e.currentMagnet;if(!o||!i)return;i.unhighlight(o,{type:"magnetAdsorbed"});const a=e.terminalType,s=i.getEdgeTerminal(o,t,n,this.cell,a);this.cell.setTerminal(a,s,{ui:!0})}snapArrowhead(e,t,n){const i=this.graph,{snap:o,allowEdge:a}=i.options.connecting,s="object"==typeof o&&o.radius||50,u={x:e-s,y:t-s,width:2*s,height:2*s},l=i.renderer.findViewsInArea(u);if(a){const Z=i.renderer.findEdgeViewsInArea(u).filter(le=>le!==this);l.push(...Z)}const c=n.closestView||null,f=n.closestMagnet||null;n.closestView=null,n.closestMagnet=null;let h,d=Number.MAX_SAFE_INTEGER;const g=new Vt(e,t);let m;l.forEach(Z=>{"false"!==Z.container.getAttribute("magnet")&&(h=Z.cell.getBBox().getCenter().distance(g),h<s&&h<d&&(f===Z.container||this.validateConnection(...n.getValidateConnectionArgs(Z,null),Z.getEdgeTerminal(Z.container,e,t,this.cell,n.terminalType)))&&(d=h,n.closestView=Z,n.closestMagnet=Z.container)),Z.container.querySelectorAll("[magnet]").forEach(le=>{if("false"!==le.getAttribute("magnet")){const pe=Z.getBBoxOfElement(le);h=g.distance(pe.getCenter()),h<s&&h<d&&(f===le||this.validateConnection(...n.getValidateConnectionArgs(Z,le),Z.getEdgeTerminal(le,e,t,this.cell,n.terminalType)))&&(d=h,n.closestView=Z,n.closestMagnet=le)}})});const _=n.terminalType,D=n.closestView,L=n.closestMagnet,O=f!==L;if(c&&O&&c.unhighlight(f,{type:"magnetAdsorbed"}),D){if(!O)return;D.highlight(L,{type:"magnetAdsorbed"}),m=D.getEdgeTerminal(L,e,t,this.cell,_)}else m={x:e,y:t};this.cell.setTerminal(_,m,{},Object.assign(Object.assign({},n.options),{ui:!0}))}snapArrowheadEnd(e){const t=e.closestView,n=e.closestMagnet;t&&n&&(t.unhighlight(n,{type:"magnetAdsorbed"}),e.currentMagnet=t.findMagnet(n)),e.closestView=null,e.closestMagnet=null}finishEmbedding(e){this.graph.options.embedding.enabled&&this.cell.updateParent()&&(e.zIndex=null)}fallbackConnection(e){"remove"===e.fallbackAction?this.cell.remove({ui:!0}):this.cell.prop(e.terminalType,e.initialTerminal,{ui:!0})}notifyConnectionEvent(e,t){const n=e.terminalType,i=e.initialTerminal,o=this.cell[n];if(o&&!Ua.equalTerminals(i,o)){const s=this.graph,u=i,l=u.cell?s.getCellById(u.cell):null,c=u.port,f=l?s.findViewByCell(l):null,h=l||e.isNewEdge?null:Vt.create(i).toJSON(),d=o,g=d.cell?s.getCellById(d.cell):null,m=d.port,_=g?s.findViewByCell(g):null,D=g?null:Vt.create(o).toJSON();this.notify("edge:connected",{e:t,previousCell:l,previousPort:c,previousView:f,previousPoint:h,currentCell:g,currentView:_,currentPort:m,currentPoint:D,previousMagnet:e.initialMagnet,currentMagnet:e.currentMagnet,edge:this.cell,view:this,type:n,isNew:e.isNewEdge})}}highlightAvailableMagnets(e){const t=this.graph,n=t.model.getCells();e.marked={};for(let i=0,o=n.length;i<o;i+=1){const a=t.findViewByCell(n[i]);if(!a||a.cell.id===this.cell.id)continue;const s=Array.prototype.slice.call(a.container.querySelectorAll("[magnet]"));"false"!==a.container.getAttribute("magnet")&&s.push(a.container);const u=s.filter(l=>this.validateConnection(...e.getValidateConnectionArgs(a,l),a.getEdgeTerminal(l,e.x,e.y,this.cell,e.terminalType)));if(u.length>0){for(let l=0,c=u.length;l<c;l+=1)a.highlight(u[l],{type:"magnetAvailable"});a.highlight(null,{type:"nodeAvailable"}),e.marked[a.cell.id]=u}}}unhighlightAvailableMagnets(e){const t=e.marked||{};Object.keys(t).forEach(n=>{const i=this.graph.findViewByCell(n);i&&(t[n].forEach(a=>{i.unhighlight(a,{type:"magnetAvailable"})}),i.unhighlight(null,{type:"nodeAvailable"}))}),e.marked=null}startArrowheadDragging(e,t,n){if(!this.can("arrowheadMovable"))return void this.notifyUnhandledMouseDown(e,t,n);const o=e.target.getAttribute("data-terminal"),a=this.prepareArrowheadDragging(o,{x:t,y:n});this.setEventData(e,a)}dragArrowhead(e,t,n){const i=this.getEventData(e);this.graph.options.connecting.snap?this.snapArrowhead(t,n,i):this.arrowheadDragging(this.getEventTarget(e),t,n,i)}stopArrowheadDragging(e,t,n){const i=this.graph,o=this.getEventData(e);i.options.connecting.snap?this.snapArrowheadEnd(o):this.arrowheadDragged(o,t,n),this.validateEdge(this.cell,o.terminalType,o.initialTerminal)?(this.finishEmbedding(o),this.notifyConnectionEvent(o,e)):this.fallbackConnection(o),this.afterArrowheadDragging(o)}startLabelDragging(e,t,n){if(this.can("edgeLabelMovable")){const o=parseInt(e.currentTarget.getAttribute("data-index"),10),a=this.getLabelPositionAngle(o),s=this.getLabelPositionArgs(o),u=this.getDefaultLabelPositionArgs(),l=this.mergeLabelPositionArgs(s,u);this.setEventData(e,{index:o,positionAngle:a,positionArgs:l,stopPropagation:!0,action:"drag-label"})}else this.setEventData(e,{stopPropagation:!0});this.graph.view.delegateDragEvents(e,this)}dragLabel(e,t,n){const i=this.getEventData(e),o=this.cell.getLabelAt(i.index),a=ja({},o,{position:this.getLabelPosition(t,n,i.positionAngle,i.positionArgs)});this.cell.setLabelAt(i.index,a)}stopLabelDragging(e,t,n){}}(function(r){r.toStringTag=`X6.${r.name}`,r.isEdgeView=function e(t){if(null==t)return!1;if(t instanceof r)return!0;const n=t[Symbol.toStringTag];return(null==n||n===r.toStringTag)&&"function"==typeof t.isNodeView&&"function"==typeof t.isEdgeView&&"function"==typeof t.confirmUpdate&&"function"==typeof t.update&&"function"==typeof t.getConnection}})(Yh||(Yh={})),Yh.config({isSvgElement:!0,priority:1,bootstrap:["render","source","target"],actions:{view:["render"],markup:["render"],attrs:["update"],source:["source","update"],target:["target","update"],router:["update"],connector:["update"],labels:["labels"],defaultLabel:["labels"],tools:["tools"],vertices:["vertices","update"]}}),Yh.registry.register("edge",Yh,!0);class $f extends Aa{get options(){return this.graph.options}constructor(e){super(),this.graph=e;const{selectors:t,fragment:n}=aa.parseJSONMarkup($f.markup);this.background=t.background,this.grid=t.grid,this.svg=t.svg,this.defs=t.defs,this.viewport=t.viewport,this.primer=t.primer,this.stage=t.stage,this.decorator=t.decorator,this.overlay=t.overlay,this.container=this.options.container,this.restore=$f.snapshoot(this.container),Mo(this.container,this.prefixClassName("graph")),$y(this.container,n),this.delegateEvents()}delegateEvents(){return super.delegateEvents(this.constructor.events),this}guard(e,t){return!!("mousedown"===e.type&&2===e.button||this.options.guard&&this.options.guard(e,t))||(e.data&&void 0!==e.data.guarded?e.data.guarded:!(t&&t.cell&&go.isCell(t.cell)||this.svg===e.target||this.container===e.target||this.svg.contains(e.target)))}findView(e){return this.graph.findViewByElem(e)}onDblClick(e){this.options.preventDefaultDblClick&&e.preventDefault();const t=this.normalizeEvent(e),n=this.findView(t.target);if(this.guard(t,n))return;const i=this.graph.snapToGrid(t.clientX,t.clientY);n?n.onDblClick(t,i.x,i.y):this.graph.trigger("blank:dblclick",{e:t,x:i.x,y:i.y})}onClick(e){if(this.getMouseMovedCount(e)<=this.options.clickThreshold){const t=this.normalizeEvent(e),n=this.findView(t.target);if(this.guard(t,n))return;const i=this.graph.snapToGrid(t.clientX,t.clientY);n?n.onClick(t,i.x,i.y):this.graph.trigger("blank:click",{e:t,x:i.x,y:i.y})}}isPreventDefaultContextMenu(e){let t=this.options.preventDefaultContextMenu;return"function"==typeof t&&(t=Ti(t,this.graph,{view:e})),t}onContextMenu(e){const t=this.normalizeEvent(e),n=this.findView(t.target);if(this.isPreventDefaultContextMenu(n)&&e.preventDefault(),this.guard(t,n))return;const i=this.graph.snapToGrid(t.clientX,t.clientY);n?n.onContextMenu(t,i.x,i.y):this.graph.trigger("blank:contextmenu",{e:t,x:i.x,y:i.y})}delegateDragEvents(e,t){null==e.data&&(e.data={}),this.setEventData(e,{currentView:t||null,mouseMovedCount:0,startPosition:{x:e.clientX,y:e.clientY}}),this.delegateDocumentEvents(this.constructor.documentEvents,e.data),this.undelegateEvents()}getMouseMovedCount(e){return this.getEventData(e).mouseMovedCount||0}onMouseDown(e){const t=this.normalizeEvent(e),n=this.findView(t.target);if(this.guard(t,n))return;this.options.preventDefaultMouseDown&&e.preventDefault();const i=this.graph.snapToGrid(t.clientX,t.clientY);n?n.onMouseDown(t,i.x,i.y):(this.options.preventDefaultBlankAction&&["touchstart"].includes(t.type)&&e.preventDefault(),this.graph.trigger("blank:mousedown",{e:t,x:i.x,y:i.y})),this.delegateDragEvents(t,n)}onMouseMove(e){const t=this.getEventData(e),n=t.startPosition;if(n&&n.x===e.clientX&&n.y===e.clientY||(null==t.mouseMovedCount&&(t.mouseMovedCount=0),t.mouseMovedCount+=1,t.mouseMovedCount<=this.options.moveThreshold))return;const o=this.normalizeEvent(e),a=this.graph.snapToGrid(o.clientX,o.clientY),s=t.currentView;s?s.onMouseMove(o,a.x,a.y):this.graph.trigger("blank:mousemove",{e:o,x:a.x,y:a.y}),this.setEventData(o,t)}onMouseUp(e){this.undelegateDocumentEvents();const t=this.normalizeEvent(e),n=this.graph.snapToGrid(t.clientX,t.clientY),o=this.getEventData(e).currentView;if(o?o.onMouseUp(t,n.x,n.y):this.graph.trigger("blank:mouseup",{e:t,x:n.x,y:n.y}),!e.isPropagationStopped()){const a=new Hf(e,{type:"click",data:e.data});this.onClick(a)}e.stopImmediatePropagation(),this.delegateEvents()}onMouseOver(e){const t=this.normalizeEvent(e),n=this.findView(t.target);if(!this.guard(t,n))if(n)n.onMouseOver(t);else{if(this.container===t.target)return;this.graph.trigger("blank:mouseover",{e:t})}}onMouseOut(e){const t=this.normalizeEvent(e),n=this.findView(t.target);if(!this.guard(t,n))if(n)n.onMouseOut(t);else{if(this.container===t.target)return;this.graph.trigger("blank:mouseout",{e:t})}}onMouseEnter(e){const t=this.normalizeEvent(e),n=this.findView(t.target);if(this.guard(t,n))return;const i=this.graph.findViewByElem(t.relatedTarget);if(n){if(i===n)return;n.onMouseEnter(t)}else{if(i)return;this.graph.trigger("graph:mouseenter",{e:t})}}onMouseLeave(e){const t=this.normalizeEvent(e),n=this.findView(t.target);if(this.guard(t,n))return;const i=this.graph.findViewByElem(t.relatedTarget);if(n){if(i===n)return;n.onMouseLeave(t)}else{if(i)return;this.graph.trigger("graph:mouseleave",{e:t})}}onMouseWheel(e){const t=this.normalizeEvent(e),n=this.findView(t.target);if(this.guard(t,n))return;const i=t.originalEvent,o=this.graph.snapToGrid(i.clientX,i.clientY),a=Math.max(-1,Math.min(1,i.wheelDelta||-i.detail));n?n.onMouseWheel(t,o.x,o.y,a):this.graph.trigger("blank:mousewheel",{e:t,delta:a,x:o.x,y:o.y})}onCustomEvent(e){const t=e.currentTarget,n=t.getAttribute("event")||t.getAttribute("data-event");if(n){const i=this.findView(t);if(i){const o=this.normalizeEvent(e);if(this.guard(o,i))return;const a=this.graph.snapToGrid(o.clientX,o.clientY);i.onCustomEvent(o,n,a.x,a.y)}}}handleMagnetEvent(e,t){const n=e.currentTarget,i=n.getAttribute("magnet");if(i&&"false"!==i.toLowerCase()){const o=this.findView(n);if(o){const a=this.normalizeEvent(e);if(this.guard(a,o))return;const s=this.graph.snapToGrid(a.clientX,a.clientY);Ti(t,this.graph,o,a,n,s.x,s.y)}}}onMagnetMouseDown(e){this.handleMagnetEvent(e,(t,n,i,o,a)=>{t.onMagnetMouseDown(n,i,o,a)})}onMagnetDblClick(e){this.handleMagnetEvent(e,(t,n,i,o,a)=>{t.onMagnetDblClick(n,i,o,a)})}onMagnetContextMenu(e){const t=this.findView(e.target);this.isPreventDefaultContextMenu(t)&&e.preventDefault(),this.handleMagnetEvent(e,(n,i,o,a,s)=>{n.onMagnetContextMenu(i,o,a,s)})}onLabelMouseDown(e){const n=this.findView(e.currentTarget);if(n){const i=this.normalizeEvent(e);if(this.guard(i,n))return;const o=this.graph.snapToGrid(i.clientX,i.clientY);n.onLabelMouseDown(i,o.x,o.y)}}onImageDragStart(){return!1}dispose(){this.undelegateEvents(),this.undelegateDocumentEvents(),this.restore(),this.restore=()=>{}}}(function(r,e,t,n){var a,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);i>3&&o&&Object.defineProperty(e,t,o)})([Aa.dispose()],$f.prototype,"dispose",null),function(r){const e=`${$s.prefixCls}-graph`;r.markup=[{ns:Ps.xhtml,tagName:"div",selector:"background",className:`${e}-background`},{ns:Ps.xhtml,tagName:"div",selector:"grid",className:`${e}-grid`},{ns:Ps.svg,tagName:"svg",selector:"svg",className:`${e}-svg`,attrs:{width:"100%",height:"100%","xmlns:xlink":Ps.xlink},children:[{tagName:"defs",selector:"defs"},{tagName:"g",selector:"viewport",className:`${e}-svg-viewport`,children:[{tagName:"g",selector:"primer",className:`${e}-svg-primer`},{tagName:"g",selector:"stage",className:`${e}-svg-stage`},{tagName:"g",selector:"decorator",className:`${e}-svg-decorator`},{tagName:"g",selector:"overlay",className:`${e}-svg-overlay`}]}]}],r.snapshoot=function t(n){const i=n.cloneNode();return n.childNodes.forEach(o=>i.appendChild(o)),()=>{for(Wy(n);n.attributes.length>0;)n.removeAttribute(n.attributes[0].name);for(let o=0,a=i.attributes.length;o<a;o+=1){const s=i.attributes[o];n.setAttribute(s.name,s.value)}i.childNodes.forEach(o=>n.appendChild(o))}}}($f||($f={})),function(r){const e=$s.prefixCls;r.events={dblclick:"onDblClick",contextmenu:"onContextMenu",touchstart:"onMouseDown",mousedown:"onMouseDown",mouseover:"onMouseOver",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousewheel:"onMouseWheel",DOMMouseScroll:"onMouseWheel",[`mouseenter  .${e}-cell`]:"onMouseEnter",[`mouseleave  .${e}-cell`]:"onMouseLeave",[`mouseenter  .${e}-cell-tools`]:"onMouseEnter",[`mouseleave  .${e}-cell-tools`]:"onMouseLeave",[`mousedown   .${e}-cell [event]`]:"onCustomEvent",[`touchstart  .${e}-cell [event]`]:"onCustomEvent",[`mousedown   .${e}-cell [data-event]`]:"onCustomEvent",[`touchstart  .${e}-cell [data-event]`]:"onCustomEvent",[`dblclick    .${e}-cell [magnet]`]:"onMagnetDblClick",[`contextmenu .${e}-cell [magnet]`]:"onMagnetContextMenu",[`mousedown   .${e}-cell [magnet]`]:"onMagnetMouseDown",[`touchstart  .${e}-cell [magnet]`]:"onMagnetMouseDown",[`dblclick    .${e}-cell [data-magnet]`]:"onMagnetDblClick",[`contextmenu .${e}-cell [data-magnet]`]:"onMagnetContextMenu",[`mousedown   .${e}-cell [data-magnet]`]:"onMagnetMouseDown",[`touchstart  .${e}-cell [data-magnet]`]:"onMagnetMouseDown",[`dragstart   .${e}-cell image`]:"onImageDragStart",[`mousedown   .${e}-edge .${e}-edge-label`]:"onLabelMouseDown",[`touchstart  .${e}-edge .${e}-edge-label`]:"onLabelMouseDown"},r.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}}($f||($f={}));class ks extends Ud{get options(){return this.graph.options}get model(){return this.graph.model}get view(){return this.graph.view}constructor(e){super(),this.graph=e,this.init()}init(){}}class nD extends ks{init(){$s.autoInsertCSS&&function qye(r,e){const t=rb.find(n=>n.name===r);if(!(t&&(t.loadTimes+=1,t.loadTimes>1)||Vd.isApplyingHMR())){const n=document.createElement("style");n.setAttribute("type","text/css"),n.textContent=e;const i=document.querySelector("head");i&&i.insertBefore(n,i.firstChild),rb.push({name:r,loadTimes:1,styleElement:n})}}("core",".x6-graph {\n  position: relative;\n  outline: none;\n  touch-action: none;\n}\n.x6-graph-background,\n.x6-graph-grid,\n.x6-graph-svg {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.x6-graph-background-stage,\n.x6-graph-grid-stage,\n.x6-graph-svg-stage {\n  user-select: none;\n}\n.x6-graph.x6-graph-pannable {\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n.x6-graph.x6-graph-panning {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n  user-select: none;\n}\n.x6-node {\n  cursor: move;\n  /* stylelint-disable-next-line */\n}\n.x6-node.x6-node-immovable {\n  cursor: default;\n}\n.x6-node * {\n  -webkit-user-drag: none;\n}\n.x6-node .scalable * {\n  vector-effect: non-scaling-stroke;\n}\n.x6-node [magnet='true'] {\n  cursor: crosshair;\n  transition: opacity 0.3s;\n}\n.x6-node [magnet='true']:hover {\n  opacity: 0.7;\n}\n.x6-node foreignObject {\n  display: block;\n  overflow: visible;\n  background-color: transparent;\n}\n.x6-node foreignObject > body {\n  position: static;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  overflow: visible;\n  background-color: transparent;\n}\n.x6-edge .source-marker,\n.x6-edge .target-marker {\n  vector-effect: non-scaling-stroke;\n}\n.x6-edge .connection {\n  stroke-linejoin: round;\n  fill: none;\n}\n.x6-edge .connection-wrap {\n  cursor: move;\n  opacity: 0;\n  fill: none;\n  stroke: #000;\n  stroke-width: 15;\n  stroke-linecap: round;\n  stroke-linejoin: round;\n}\n.x6-edge .connection-wrap:hover {\n  opacity: 0.4;\n  stroke-opacity: 0.4;\n}\n.x6-edge .vertices {\n  cursor: move;\n  opacity: 0;\n}\n.x6-edge .vertices .vertex {\n  fill: #1abc9c;\n}\n.x6-edge .vertices .vertex :hover {\n  fill: #34495e;\n  stroke: none;\n}\n.x6-edge .vertices .vertex-remove {\n  cursor: pointer;\n  fill: #fff;\n}\n.x6-edge .vertices .vertex-remove-area {\n  cursor: pointer;\n  opacity: 0.1;\n}\n.x6-edge .vertices .vertex-group:hover .vertex-remove-area {\n  opacity: 1;\n}\n.x6-edge .arrowheads {\n  cursor: move;\n  opacity: 0;\n}\n.x6-edge .arrowheads .arrowhead {\n  fill: #1abc9c;\n}\n.x6-edge .arrowheads .arrowhead :hover {\n  fill: #f39c12;\n  stroke: none;\n}\n.x6-edge .tools {\n  cursor: pointer;\n  opacity: 0;\n}\n.x6-edge .tools .tool-options {\n  display: none;\n}\n.x6-edge .tools .tool-remove circle {\n  fill: #f00;\n}\n.x6-edge .tools .tool-remove path {\n  fill: #fff;\n}\n.x6-edge:hover .vertices,\n.x6-edge:hover .arrowheads,\n.x6-edge:hover .tools {\n  opacity: 1;\n}\n.x6-highlight-opacity {\n  opacity: 0.3;\n}\n.x6-cell-tool-editor {\n  position: relative;\n  display: inline-block;\n  min-height: 1em;\n  margin: 0;\n  padding: 0;\n  line-height: 1;\n  white-space: normal;\n  text-align: center;\n  vertical-align: top;\n  overflow-wrap: normal;\n  outline: none;\n  transform-origin: 0 0;\n  -webkit-user-drag: none;\n}\n.x6-edge-tool-editor {\n  border: 1px solid #275fc5;\n  border-radius: 2px;\n}\n")}dispose(){!function Kye(r){const e=rb.findIndex(t=>t.name===r);if(e>-1){const t=rb[e];if(t.loadTimes-=1,t.loadTimes>0)return;let n=t.styleElement;n&&n.parentNode&&n.parentNode.removeChild(n),n=null,rb.splice(e,1)}}("core")}}var db;!function(r,e,t,n){var a,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);i>3&&o&&Object.defineProperty(e,t,o)}([nD.dispose()],nD.prototype,"dispose",null),function(r){r.get=function e(t){const{grid:n}=t,s=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(t,["grid","panning","mousewheel","embedding"]),u=t.container;if(null==u)throw new Error("Ensure the container of the graph is specified and valid");null==s.width&&(s.width=u.clientWidth),null==s.height&&(s.height=u.clientHeight);const l=ja({},r.defaults,s);return l.grid="number"==typeof n?{size:n,visible:!1}:Object.assign(Object.assign({},{size:10,visible:!1}),"boolean"==typeof n?{visible:n}:n),["panning","mousewheel","embedding"].forEach(h=>{const d=t[h];"boolean"==typeof d?l[h].enabled=d:l[h]=Object.assign(Object.assign({},l[h]),d)}),l}}(db||(db={})),function(r){r.defaults={x:0,y:0,scaling:{min:.01,max:16},grid:{size:10,visible:!1},background:!1,panning:{enabled:!1,eventTypes:["leftMouseDown"]},mousewheel:{enabled:!1,factor:1.2,zoomAtMousePosition:!0},highlighting:{default:{name:"stroke",args:{padding:3}},nodeAvailable:{name:"className",args:{className:$s.prefix("available-node")}},magnetAvailable:{name:"className",args:{className:$s.prefix("available-magnet")}}},connecting:{snap:!1,allowLoop:!0,allowNode:!0,allowEdge:!1,allowPort:!0,highlight:!1,anchor:"center",edgeAnchor:"ratio",connectionPoint:"boundary",router:"normal",connector:"normal",validateConnection:({type:e,sourceView:t,targetView:n})=>null!=("target"===e?n:t),createEdge:()=>new gxe},translating:{restrict:!1},embedding:{enabled:!1,findParent:"bbox",frontOnly:!0,validate:()=>!0},moveThreshold:0,clickThreshold:0,magnetThreshold:0,preventDefaultDblClick:!0,preventDefaultMouseDown:!1,preventDefaultContextMenu:!0,preventDefaultBlankAction:!0,interacting:{edgeLabelMovable:!1},async:!0,virtual:!1,guard:()=>!1}}(db||(db={}));class rD extends ks{get elem(){return this.view.grid}get grid(){return this.options.grid}init(){this.startListening(),this.draw(this.grid)}startListening(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}stopListening(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}setVisible(e){this.grid.visible!==e&&(this.grid.visible=e,this.update())}getGridSize(){return this.grid.size}setGridSize(e){this.grid.size=Math.max(e,1),this.update()}show(){this.setVisible(!0),this.update()}hide(){this.setVisible(!1),this.update()}clear(){this.elem.style.backgroundImage=""}draw(e){this.clear(),this.instance=null,Object.assign(this.grid,e),this.patterns=this.resolveGrid(e),this.update()}update(e={}){const t=this.grid.size;if(t<=1||!this.grid.visible)return this.clear();const n=this.graph.matrix(),i=this.getInstance(),o=Array.isArray(e)?e:[e];this.patterns.forEach((u,l)=>{const c=`pattern_${l}`,f=n.a||1,h=n.d||1,{update:d,markup:g}=u,m=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(u,["update","markup"]),_=Object.assign(Object.assign(Object.assign({},m),o[l]),{sx:f,sy:h,ox:n.e||0,oy:n.f||0,width:t*f,height:t*h});i.has(c)||i.add(c,Ai.create("pattern",{id:c,patternUnits:"userSpaceOnUse"},Ai.createVectors(g)).node);const D=i.get(c);"function"==typeof d&&d(D.childNodes[0],_);let L=_.ox%_.width;L<0&&(L+=_.width);let O=_.oy%_.height;O<0&&(O+=_.height),$o(D,{x:L,y:O,width:_.width,height:_.height})});const a=(new XMLSerializer).serializeToString(i.root),s=`url(data:image/svg+xml;base64,${btoa(a)})`;this.elem.style.backgroundImage=s}getInstance(){return this.instance||(this.instance=new Xd),this.instance}resolveGrid(e){if(!e)return[];const t=e.type;if(null==t)return[Object.assign(Object.assign({},Xd.presets.dot),e.args)];const n=Xd.registry.get(t);if(n){let i=e.args||[];return Array.isArray(i)||(i=[i]),Array.isArray(n)?n.map((o,a)=>Object.assign(Object.assign({},o),i[a])):[Object.assign(Object.assign({},n),i[0])]}return Xd.registry.onNotFound(t)}dispose(){this.stopListening(),this.clear()}}!function(r,e,t,n){var a,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);i>3&&o&&Object.defineProperty(e,t,o)}([ks.dispose()],rD.prototype,"dispose",null);class nz extends ks{get container(){return this.graph.view.container}get viewport(){return this.graph.view.viewport}get stage(){return this.graph.view.stage}init(){this.resize()}getMatrix(){const e=this.viewport.getAttribute("transform");return e!==this.viewportTransformString&&(this.viewportMatrix=this.viewport.getCTM(),this.viewportTransformString=e),Ns(this.viewportMatrix)}setMatrix(e){const t=Ns(e),n=y0(t);this.viewport.setAttribute("transform",n),this.viewportMatrix=t,this.viewportTransformString=n}resize(e,t){let n=void 0===e?this.options.width:e,i=void 0===t?this.options.height:t;this.options.width=n,this.options.height=i,"number"==typeof n&&(n=Math.round(n)),"number"==typeof i&&(i=Math.round(i)),this.container.style.width=null==n?"":`${n}px`,this.container.style.height=null==i?"":`${i}px`;const o=this.getComputedSize();return this.graph.trigger("resize",Object.assign({},o)),this}getComputedSize(){let e=this.options.width,t=this.options.height;return a4(e)||(e=this.container.clientWidth),a4(t)||(t=this.container.clientHeight),{width:e,height:t}}getScale(){return function zye(r){let e,t,n,i;return r?(e=r.a??1,i=r.d??1,t=r.b,n=r.c):e=i=1,{sx:t?Math.sqrt(e*e+t*t):e,sy:n?Math.sqrt(n*n+i*i):i}}(this.getMatrix())}scale(e,t=e,n=0,i=0){if(e=this.clampScale(e),t=this.clampScale(t),n||i){const a=this.getTranslation(),s=a.tx-n*(e-1),u=a.ty-i*(t-1);(s!==a.tx||u!==a.ty)&&this.translate(s,u)}const o=this.getMatrix();return o.a=e,o.d=t,this.setMatrix(o),this.graph.trigger("scale",{sx:e,sy:t,ox:n,oy:i}),this}clampScale(e){const t=this.graph.options.scaling;return Ul(e,t.min||.01,t.max||16)}getZoom(){return this.getScale().sx}zoom(e,t){t=t||{};let n=e,i=e;const o=this.getScale(),a=this.getComputedSize();let s=a.width/2,u=a.height/2;if(t.absolute||(n+=o.sx,i+=o.sy),t.scaleGrid&&(n=Math.round(n/t.scaleGrid)*t.scaleGrid,i=Math.round(i/t.scaleGrid)*t.scaleGrid),t.maxScale&&(n=Math.min(t.maxScale,n),i=Math.min(t.maxScale,i)),t.minScale&&(n=Math.max(t.minScale,n),i=Math.max(t.minScale,i)),t.center&&(s=t.center.x,u=t.center.y),n=this.clampScale(n),i=this.clampScale(i),s||u){const l=this.getTranslation(),c=s-n/o.sx*(s-l.tx),f=u-i/o.sy*(u-l.ty);(c!==l.tx||f!==l.ty)&&this.translate(c,f)}return this.scale(n,i),this}getRotation(){return function Gye(r){let e={x:0,y:1};r&&(e=zA(r,e));const t=180*Math.atan2(e.y,e.x)/Math.PI%360-90;return{angle:t%360+(t<0?360:0)}}(this.getMatrix())}rotate(e,t,n){if(null==t||null==n){const o=Io.getBBox(this.stage);t=o.width/2,n=o.height/2}const i=this.getMatrix().translate(t,n).rotate(e).translate(-t,-n);return this.setMatrix(i),this}getTranslation(){return function Uye(r){return{tx:r&&r.e||0,ty:r&&r.f||0}}(this.getMatrix())}translate(e,t){const n=this.getMatrix();n.e=e||0,n.f=t||0,this.setMatrix(n);const i=this.getTranslation();return this.options.x=i.tx,this.options.y=i.ty,this.graph.trigger("translate",Object.assign({},i)),this}setOrigin(e,t){return this.translate(e||0,t||0)}fitToContent(e,t,n,i){if("object"==typeof e){const O=e;e=O.gridWidth||1,t=O.gridHeight||1,n=O.padding||0,i=O}else e=e||1,t=t||1,n=n||0,null==i&&(i={});const o=hp(n),a=i.border||0,s=i.contentArea?_r.create(i.contentArea):this.getContentArea(i);a>0&&s.inflate(a);const u=this.getScale(),l=this.getTranslation(),c=u.sx,f=u.sy;s.x*=c,s.y*=f,s.width*=c,s.height*=f;let h=Math.max(Math.ceil((s.width+s.x)/e),1)*e,d=Math.max(Math.ceil((s.height+s.y)/t),1)*t,g=0,m=0;("negative"===i.allowNewOrigin&&s.x<0||"positive"===i.allowNewOrigin&&s.x>=0||"any"===i.allowNewOrigin)&&(g=Math.ceil(-s.x/e)*e,g+=o.left,h+=g),("negative"===i.allowNewOrigin&&s.y<0||"positive"===i.allowNewOrigin&&s.y>=0||"any"===i.allowNewOrigin)&&(m=Math.ceil(-s.y/t)*t,m+=o.top,d+=m),h+=o.right,d+=o.bottom,h=Math.max(h,i.minWidth||0),d=Math.max(d,i.minHeight||0),h=Math.min(h,i.maxWidth||Number.MAX_SAFE_INTEGER),d=Math.min(d,i.maxHeight||Number.MAX_SAFE_INTEGER);const _=this.getComputedSize(),D=h!==_.width||d!==_.height;return(g!==l.tx||m!==l.ty)&&this.translate(g,m),D&&this.resize(h,d),new _r(-g/c,-m/f,h/c,d/f)}scaleContentToFit(e={}){this.scaleContentToFitImpl(e)}scaleContentToFitImpl(e={},t=!0){let n,i;if(e.contentArea){const D=e.contentArea;n=this.graph.localToGraph(D),i=Vt.create(D)}else n=this.getContentBBox(e),i=this.graph.graphToLocal(n);if(!n.width||!n.height)return;const o=hp(e.padding),a=e.minScale||0,s=e.maxScale||Number.MAX_SAFE_INTEGER,u=e.minScaleX||a,l=e.maxScaleX||s,c=e.minScaleY||a,f=e.maxScaleY||s;let h;if(e.viewportArea)h=e.viewportArea;else{const D=this.getComputedSize(),L=this.getTranslation();h={x:L.tx,y:L.ty,width:D.width,height:D.height}}h=_r.create(h).moveAndExpand({x:o.left,y:o.top,width:-o.left-o.right,height:-o.top-o.bottom});const d=this.getScale();let g=h.width/n.width*d.sx,m=h.height/n.height*d.sy;!1!==e.preserveAspectRatio&&(g=m=Math.min(g,m));const _=e.scaleGrid;if(_&&(g=_*Math.floor(g/_),m=_*Math.floor(m/_)),g=Ul(g,u,l),m=Ul(m,c,f),this.scale(g,m),t){const D=this.options;this.translate(h.x-i.x*g-D.x,h.y-i.y*m-D.y)}}getContentArea(e={}){return!1!==e.useCellGeometry?this.model.getAllCellsBBox()||new _r:Io.getBBox(this.stage)}getContentBBox(e={}){return this.graph.localToGraph(this.getContentArea(e))}getGraphArea(){const e=_r.fromSize(this.getComputedSize());return this.graph.graphToLocal(e)}zoomToRect(e,t={}){const n=_r.create(e),i=this.graph;t.contentArea=n,null==t.viewportArea&&(t.viewportArea={x:i.options.x,y:i.options.y,width:this.options.width,height:this.options.height}),this.scaleContentToFitImpl(t,!1);const o=n.getCenter();return this.centerPoint(o.x,o.y),this}zoomToFit(e={}){return this.zoomToRect(this.getContentArea(e),e)}centerPoint(e,t){const n=this.getComputedSize(),i=this.getScale(),o=this.getTranslation(),a=n.width/2,s=n.height/2;t=s-(t="number"==typeof t?t:s)*i.sy,(o.tx!==(e=a-(e="number"==typeof e?e:a)*i.sx)||o.ty!==t)&&this.translate(e,t)}centerContent(e){const n=this.graph.getContentArea(e).getCenter();this.centerPoint(n.x,n.y)}centerCell(e){return this.positionCell(e,"center")}positionPoint(e,t,n){const i=this.getComputedSize();(t=Gh(t,Math.max(0,i.width)))<0&&(t=i.width+t),(n=Gh(n,Math.max(0,i.height)))<0&&(n=i.height+n);const o=this.getTranslation(),a=this.getScale(),s=t-e.x*a.sx,u=n-e.y*a.sy;(o.tx!==s||o.ty!==u)&&this.translate(s,u)}positionRect(e,t){const n=_r.create(e);switch(t){case"center":return this.positionPoint(n.getCenter(),"50%","50%");case"top":return this.positionPoint(n.getTopCenter(),"50%",0);case"top-right":return this.positionPoint(n.getTopRight(),"100%",0);case"right":return this.positionPoint(n.getRightMiddle(),"100%","50%");case"bottom-right":return this.positionPoint(n.getBottomRight(),"100%","100%");case"bottom":return this.positionPoint(n.getBottomCenter(),"50%","100%");case"bottom-left":return this.positionPoint(n.getBottomLeft(),0,"100%");case"left":return this.positionPoint(n.getLeftMiddle(),0,"50%");case"top-left":return this.positionPoint(n.getTopLeft(),0,0);default:return this}}positionCell(e,t){const n=e.getBBox();return this.positionRect(n,t)}positionContent(e,t){const n=this.graph.getContentArea(t);return this.positionRect(n,e)}}class iD extends ks{get elem(){return this.view.background}init(){this.startListening(),this.options.background&&this.draw(this.options.background)}startListening(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}stopListening(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}updateBackgroundImage(e={}){let t=e.size||"auto auto",n=e.position||"center";const i=this.graph.transform.getScale(),o=this.graph.translate();"object"==typeof n&&(n=`${o.tx+i.sx*(n.x||0)}px ${o.ty+i.sy*(n.y||0)}px`),"object"==typeof t&&(t=_r.fromSize(t).scale(i.sx,i.sy),t=`${t.width}px ${t.height}px`),this.elem.style.backgroundSize=t,this.elem.style.backgroundPosition=n}drawBackgroundImage(e,t={}){if(!(e instanceof HTMLImageElement))return void(this.elem.style.backgroundImage="");const n=this.optionsCache;if(n&&n.image!==t.image)return;let i;const o=t.opacity,a=t.size;let s=t.repeat||"no-repeat";const u=ib.registry.get(s);if("function"==typeof u){const c=t.quality||1;e.width*=c,e.height*=c;const f=u(e,t);if(!(f instanceof HTMLCanvasElement))throw new Error("Background pattern must return an HTML Canvas instance");i=f.toDataURL("image/png"),s=t.repeat&&s!==t.repeat?t.repeat:"repeat","object"==typeof a?(a.width*=f.width/e.width,a.height*=f.height/e.height):void 0===a&&(t.size={width:f.width/c,height:f.height/c})}else i=e.src,void 0===a&&(t.size={width:e.width,height:e.height});null!=n&&"object"==typeof t.size&&t.image===n.image&&t.repeat===n.repeat&&t.quality===n.quality&&(n.size=yA(t.size));const l=this.elem.style;l.backgroundImage=`url(${i})`,l.backgroundRepeat=s,l.opacity=null==o||o>=1?"":`${o}`,this.updateBackgroundImage(t)}updateBackgroundColor(e){this.elem.style.backgroundColor=e||""}updateBackgroundOptions(e){this.graph.options.background=e}update(){this.optionsCache&&this.updateBackgroundImage(this.optionsCache)}draw(e){const t=e||{};if(this.updateBackgroundOptions(e),this.updateBackgroundColor(t.color),t.image){this.optionsCache=yA(t);const n=document.createElement("img");n.onload=()=>this.drawBackgroundImage(n,e),n.setAttribute("crossorigin","anonymous"),n.src=t.image}else this.drawBackgroundImage(null),this.optionsCache=null}clear(){this.draw()}dispose(){this.clear(),this.stopListening()}}!function(r,e,t,n){var a,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);i>3&&o&&Object.defineProperty(e,t,o)}([ks.dispose()],iD.prototype,"dispose",null);class rz extends ks{get widgetOptions(){return this.options.panning}get pannable(){return this.widgetOptions&&!0===this.widgetOptions.enabled}init(){this.startListening(),this.updateClassName()}startListening(){const e=this.widgetOptions.eventTypes;!e||(e.includes("leftMouseDown")&&(this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&(this.onRightMouseDown=this.onRightMouseDown.bind(this),_u.on(this.graph.container,"mousedown",this.onRightMouseDown)),e.includes("mouseWheel")&&(this.mousewheelHandle=new X4(this.graph.container,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.mousewheelHandle.enable()))}stopListening(){const e=this.widgetOptions.eventTypes;!e||(e.includes("leftMouseDown")&&(this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&_u.off(this.graph.container,"mousedown",this.onRightMouseDown),e.includes("mouseWheel")&&this.mousewheelHandle&&this.mousewheelHandle.disable())}preparePanning({e}){const t=this.graph.getPlugin("selection"),n=t&&t.allowRubberband(e,!0);(this.allowPanning(e,!0)||this.allowPanning(e)&&!n)&&this.startPanning(e)}allowPanning(e,t){return this.pannable&&nb.isMatch(e,this.widgetOptions.modifiers,t)}startPanning(e){const t=this.view.normalizeEvent(e);this.clientX=t.clientX,this.clientY=t.clientY,this.panning=!0,this.updateClassName(),_u.on(document.body,{"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),_u.on(window,"mouseup.panning",this.stopPanning.bind(this))}pan(e){const t=this.view.normalizeEvent(e),n=t.clientX-this.clientX,i=t.clientY-this.clientY;this.clientX=t.clientX,this.clientY=t.clientY,this.graph.translateBy(n,i)}stopPanning(e){this.panning=!1,this.updateClassName(),_u.off(document.body,".panning"),_u.off(window,".panning")}updateClassName(){const e=this.view.container,t=this.view.prefixClassName("graph-panning"),n=this.view.prefixClassName("graph-pannable");this.pannable?this.panning?(Mo(e,t),Vl(e,n)):(Vl(e,t),Mo(e,n)):(Vl(e,t),Vl(e,n))}onRightMouseDown(e){2===e.button&&this.allowPanning(e,!0)&&this.startPanning(e)}allowMouseWheel(e){return this.pannable&&!e.ctrlKey}onMouseWheel(e,t,n){e.ctrlKey||this.graph.translateBy(-t,-n)}autoPanning(e,t){const i=this.graph.getGraphArea();let o=0,a=0;e<=i.left+10&&(o=-10),t<=i.top+10&&(a=-10),e>=i.right-10&&(o=10),t>=i.bottom-10&&(a=10),(0!==o||0!==a)&&this.graph.translateBy(-o,-a)}enablePanning(){this.pannable||(this.widgetOptions.enabled=!0,this.updateClassName())}disablePanning(){this.pannable&&(this.widgetOptions.enabled=!1,this.updateClassName())}dispose(){this.stopListening()}}!function(r,e,t,n){var a,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);i>3&&o&&Object.defineProperty(e,t,o)}([ks.dispose()],rz.prototype,"dispose",null);class oD extends ks{constructor(){super(...arguments),this.cumulatedFactor=1}get widgetOptions(){return this.options.mousewheel}init(){this.container=this.graph.container,this.target=this.widgetOptions.global?document:this.container,this.mousewheelHandle=new X4(this.target,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.widgetOptions.enabled&&this.enable(!0)}get disabled(){return!0!==this.widgetOptions.enabled}enable(e){(this.disabled||e)&&(this.widgetOptions.enabled=!0,this.mousewheelHandle.enable())}disable(){this.disabled||(this.widgetOptions.enabled=!1,this.mousewheelHandle.disable())}allowMouseWheel(e){const t=this.widgetOptions.guard;return(null==t||t.call(e))&&nb.isMatch(e,this.widgetOptions.modifiers)}onMouseWheel(e){const t=this.widgetOptions.guard;if((null==t||t.call(e))&&nb.isMatch(e,this.widgetOptions.modifiers)){const n=this.widgetOptions.factor||1.2;null==this.currentScale&&(this.startPos={x:e.clientX,y:e.clientY},this.currentScale=this.graph.transform.getScale().sx),this.cumulatedFactor=e.deltaY<0?this.currentScale<.15?(this.currentScale+.01)/this.currentScale:Math.round(this.currentScale*n*20)/20/this.currentScale:this.currentScale<=.15?(this.currentScale-.01)/this.currentScale:Math.round(this.currentScale*(1/n)*20)/20/this.currentScale,this.cumulatedFactor=Math.max(.01,Math.min(this.currentScale*this.cumulatedFactor,160)/this.currentScale);const o=this.currentScale;let a=this.graph.transform.clampScale(o*this.cumulatedFactor);if(a=Ul(a,this.widgetOptions.minScale||Number.MIN_SAFE_INTEGER,this.widgetOptions.maxScale||Number.MAX_SAFE_INTEGER),a!==o)if(this.widgetOptions.zoomAtMousePosition){const c=this.graph.getPlugin("scroller")?this.graph.clientToLocal(this.startPos):this.graph.clientToGraph(this.startPos);this.graph.zoom(a,{absolute:!0,center:c.clone()})}else this.graph.zoom(a,{absolute:!0});this.currentScale=null,this.cumulatedFactor=1}}dispose(){this.disable()}}!function(r,e,t,n){var a,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);i>3&&o&&Object.defineProperty(e,t,o)}([Ud.dispose()],oD.prototype,"dispose",null);class iz extends ks{init(){this.resetRenderArea=function gue(r,e,t){var n,i,o,a,s,u,l=0,c=!1,f=!1,h=!0;if("function"!=typeof r)throw new TypeError("Expected a function");function d(pe){var Ee=n,Re=i;return n=i=void 0,l=pe,a=r.apply(Re,Ee)}function g(pe){return l=pe,s=setTimeout(D,e),c?d(pe):a}function _(pe){var Ee=pe-u;return void 0===u||Ee>=e||Ee<0||f&&pe-l>=o}function D(){var pe=XC();if(_(pe))return L(pe);s=setTimeout(D,function m(pe){var Ve=e-(pe-u);return f?due(Ve,o-(pe-l)):Ve}(pe))}function L(pe){return s=void 0,h&&n?d(pe):(n=i=void 0,a)}function le(){var pe=XC(),Ee=_(pe);if(n=arguments,i=this,u=pe,Ee){if(void 0===s)return g(u);if(f)return clearTimeout(s),s=setTimeout(D,e),d(u)}return void 0===s&&(s=setTimeout(D,e)),a}return e=Qv(e)||0,Ba(t)&&(c=!!t.leading,o=(f="maxWait"in t)?hue(Qv(t.maxWait)||0,e):o,h="trailing"in t?!!t.trailing:h),le.cancel=function O(){void 0!==s&&clearTimeout(s),l=0,n=u=i=s=void 0},le.flush=function Z(){return void 0===s?a:L(XC())},le}(this.resetRenderArea,200),this.resetRenderArea(),this.startListening()}startListening(){this.graph.on("translate",this.resetRenderArea,this),this.graph.on("scale",this.resetRenderArea,this),this.graph.on("resize",this.resetRenderArea,this)}stopListening(){this.graph.off("translate",this.resetRenderArea,this),this.graph.off("scale",this.resetRenderArea,this),this.graph.off("resize",this.resetRenderArea,this)}enableVirtualRender(){this.options.virtual=!0,this.resetRenderArea()}disableVirtualRender(){this.options.virtual=!1,this.graph.renderer.setRenderArea(void 0)}resetRenderArea(){if(this.options.virtual){const e=this.graph.getGraphArea();this.graph.renderer.setRenderArea(e)}}dispose(){this.stopListening()}}!function(r,e,t,n){var a,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);i>3&&o&&Object.defineProperty(e,t,o)}([ks.dispose()],iz.prototype,"dispose",null);class Dxe{constructor(){this.isFlushing=!1,this.isFlushPending=!1,this.scheduleId=0,this.queue=[],this.frameInterval=33,this.initialTime=Date.now()}queueJob(e){if(e.priority&Yf.PRIOR)e.cb();else{const t=this.findInsertionIndex(e);t>=0&&this.queue.splice(t,0,e)}}queueFlush(){!this.isFlushing&&!this.isFlushPending&&(this.isFlushPending=!0,this.scheduleJob())}queueFlushSync(){!this.isFlushing&&!this.isFlushPending&&(this.isFlushPending=!0,this.flushJobsSync())}clearJobs(){this.queue.length=0,this.isFlushing=!1,this.isFlushPending=!1,this.cancelScheduleJob()}flushJobs(){this.isFlushPending=!1,this.isFlushing=!0;const e=this.getCurrentTime();let t;for(;t=this.queue.shift();){try{t.cb()}catch{}if(this.getCurrentTime()-e>=this.frameInterval)break}this.isFlushing=!1,this.queue.length&&this.queueFlush()}flushJobsSync(){let e;for(this.isFlushPending=!1,this.isFlushing=!0;e=this.queue.shift();)try{e.cb()}catch(t){console.log(t)}this.isFlushing=!1}findInsertionIndex(e){let t=0,n=this.queue.length,i=n-1;const o=e.priority;for(;t<=i;){const a=(i-t>>1)+t;o<=this.queue[a].priority?t=a+1:(n=a,i=a-1)}return n}scheduleJob(){"requestIdleCallback"in window?(this.scheduleId&&this.cancelScheduleJob(),this.scheduleId=window.requestIdleCallback(this.flushJobs.bind(this),{timeout:100})):(this.scheduleId&&this.cancelScheduleJob(),this.scheduleId=window.setTimeout(this.flushJobs.bind(this)))}cancelScheduleJob(){"cancelIdleCallback"in window?(this.scheduleId&&window.cancelIdleCallback(this.scheduleId),this.scheduleId=0):(this.scheduleId&&clearTimeout(this.scheduleId),this.scheduleId=0)}getCurrentTime(){return"object"==typeof performance&&"function"==typeof performance.now?performance.now():Date.now()-this.initialTime}}var Yf=(()=>(function(r){r[r.RenderEdge=2]="RenderEdge",r[r.RenderNode=4]="RenderNode",r[r.Update=8]="Update",r[r.PRIOR=1048576]="PRIOR"}(Yf||(Yf={})),Yf))();class vs extends Ud{get model(){return this.graph.model}get container(){return this.graph.view.stage}constructor(e){super(),this.views={},this.willRemoveViews={},this.queue=new Dxe,this.graph=e,this.init()}init(){this.startListening()}startListening(){this.model.on("reseted",this.onModelReseted,this),this.model.on("cell:added",this.onCellAdded,this),this.model.on("cell:removed",this.onCellRemoved,this),this.model.on("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.on("cell:change:visible",this.onCellVisibleChanged,this)}stopListening(){this.model.off("reseted",this.onModelReseted,this),this.model.off("cell:added",this.onCellAdded,this),this.model.off("cell:removed",this.onCellRemoved,this),this.model.off("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.off("cell:change:visible",this.onCellVisibleChanged,this)}onModelReseted({options:e}){this.queue.clearJobs(),this.removeZPivots(),this.resetViews(),this.renderViews(this.model.getCells(),e)}onCellAdded({cell:e,options:t}){this.renderViews([e],t)}onCellRemoved({cell:e}){this.removeViews([e])}onCellZIndexChanged({cell:e,options:t}){const n=this.views[e.id];n&&this.requestViewUpdate(n.view,vs.FLAG_INSERT,t,Yf.Update,!0)}onCellVisibleChanged({cell:e,current:t}){this.toggleVisible(e,!!t)}requestViewUpdate(e,t,n={},i=Yf.Update,o=!0){const a=e.cell.id,s=this.views[a];if(!s)return;s.flag=t,s.options=n;const u=e.hasAction(t,["translate","resize","rotate"]);e.isNodeView()&&u&&(i=Yf.PRIOR,o=!1),this.queue.queueJob({id:a,priority:i,cb:()=>{this.renderViewInArea(e,t,n)}}),this.getEffectedEdges(e).forEach(c=>{this.requestViewUpdate(c.view,c.flag,n,i,!1)}),o&&this.flush()}setRenderArea(e){this.renderArea=e,this.flushWaittingViews()}isViewMounted(e){if(null==e)return!1;const t=this.views[e.cell.id];return!!t&&t.state===vs.ViewState.MOUNTED}renderViews(e,t={}){e.sort((n,i)=>n.isNode()&&i.isEdge()?-1:0),e.forEach(n=>{const i=n.id;let a=0,s=this.views[i];if(s)a=vs.FLAG_INSERT;else{const u=this.createCellView(n);u&&(u.graph=this.graph,a=vs.FLAG_INSERT|u.getBootstrapFlag(),s={view:u,flag:a,options:t,state:vs.ViewState.CREATED},this.views[i]=s)}s&&this.requestViewUpdate(s.view,a,t,this.getRenderPriority(s.view),!1)}),this.flush()}renderViewInArea(e,t,n={}){const i=e.cell,o=i.id,a=this.views[o];if(!a)return;let s=0;this.isInRenderArea(e)||a.state===vs.ViewState.MOUNTED?(s=this.updateView(e,t,n),a.flag=s):a.state=vs.ViewState.WAITTING,s&&i.isEdge()&&0==(s&e.getFlag(["source","target"]))&&this.queue.queueJob({id:o,priority:Yf.RenderEdge,cb:()=>{this.updateView(e,t,n)}})}removeViews(e){e.forEach(t=>{const n=t.id,i=this.views[n];i&&(this.willRemoveViews[n]=i,delete this.views[n],this.queue.queueJob({id:n,priority:this.getRenderPriority(i.view),cb:()=>{this.removeView(i.view)}}))}),this.flush()}flush(){this.graph.options.async?this.queue.queueFlush():this.queue.queueFlushSync()}flushWaittingViews(){const e=Object.keys(this.views);for(let t=0,n=e.length;t<n;t+=1){const i=this.views[e[t]];if(i&&i.state===vs.ViewState.WAITTING){const{view:o,flag:a,options:s}=i;this.requestViewUpdate(o,a,s,this.getRenderPriority(o),!1)}}this.flush()}updateView(e,t,n={}){if(null==e)return 0;if(fu.isCellView(e)){if(t&vs.FLAG_REMOVE)return this.removeView(e.cell),0;t&vs.FLAG_INSERT&&(this.insertView(e),t^=vs.FLAG_INSERT)}return t?e.confirmUpdate(t,n):0}insertView(e){const t=this.views[e.cell.id];if(t){const n=e.cell.getZIndex(),i=this.addZPivot(n);this.container.insertBefore(e.container,i),e.cell.isVisible()||this.toggleVisible(e.cell,!1),t.state=vs.ViewState.MOUNTED}}resetViews(){this.willRemoveViews=Object.assign({},this.views),Object.keys(this.willRemoveViews).forEach(e=>{const t=this.willRemoveViews[e];t&&this.removeView(t.view)}),this.views={},this.willRemoveViews={}}removeView(e){const t=e.cell;e&&(this.willRemoveViews[t.id].view.remove(),delete this.willRemoveViews[t.id])}toggleVisible(e,t){const n=this.model.getConnectedEdges(e);for(let o=0,a=n.length;o<a;o+=1){const s=n[o];if(t){const u=s.getSourceCell(),l=s.getTargetCell();if(u&&!u.isVisible()||l&&!l.isVisible())continue;this.toggleVisible(s,!0)}else this.toggleVisible(s,!1)}const i=this.views[e.id];i&&Xy(i.view.container,{display:t?"unset":"none"})}addZPivot(e=0){null==this.zPivots&&(this.zPivots={});const t=this.zPivots;let n=t[e];if(n)return n;n=t[e]=document.createComment(`z-index:${e+1}`);let i=-1/0;for(const a in t){const s=+a;s<e&&s>i&&(i=s)}const o=this.container;return o.insertBefore(n,i!==-1/0?t[i].nextSibling:o.firstChild),n}removeZPivots(){this.zPivots&&Object.keys(this.zPivots).forEach(e=>{const t=this.zPivots[e];t&&t.parentNode&&t.parentNode.removeChild(t)}),this.zPivots={}}createCellView(e){const t=this.graph.options.createCellView;if(t){const o=Ti(t,this.graph,e);if(o||null===o)return o}const n=e.view,i={graph:this.graph};if(null!=n&&"string"==typeof n){const o=fu.registry.get(n);return o?new o(e,i):fu.registry.onNotFound(n)}return e.isNode()?new fl(e,i):e.isEdge()?new Yh(e,i):null}getEffectedEdges(e){const t=[],n=e.cell,i=this.model.getConnectedEdges(n);for(let o=0,a=i.length;o<a;o+=1){const s=i[o],u=this.views[s.id];if(!u)continue;const l=u.view,c=["update"];s.getTargetCell()===n&&c.push("target"),s.getSourceCell()===n&&c.push("source"),t.push({id:s.id,view:l,flag:l.getFlag(c)})}return t}isInRenderArea(e){return!this.renderArea||this.renderArea.isIntersectWithRect(e.cell.getBBox())}getRenderPriority(e){return e.cell.isNode()?Yf.RenderNode:Yf.RenderEdge}dispose(){this.stopListening()}}(function(r,e,t,n){var a,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);i>3&&o&&Object.defineProperty(e,t,o)})([Ud.dispose()],vs.prototype,"dispose",null),function(r){r.FLAG_INSERT=1<<30,r.FLAG_REMOVE=1<<29,r.FLAG_RENDER=67108863}(vs||(vs={})),function(r){let e;!function(t){t[t.CREATED=0]="CREATED",t[t.MOUNTED=1]="MOUNTED",t[t.WAITTING=2]="WAITTING"}(e=r.ViewState||(r.ViewState={}))}(vs||(vs={}));class aD extends ks{constructor(){super(...arguments),this.schedule=new vs(this.graph)}requestViewUpdate(e,t,n={}){this.schedule.requestViewUpdate(e,t,n)}isViewMounted(e){return this.schedule.isViewMounted(e)}setRenderArea(e){this.schedule.setRenderArea(e)}findViewByElem(e){if(null==e)return null;const n="string"==typeof e?this.options.container.querySelector(e):e instanceof Element?e:e[0];if(n){const i=this.graph.view.findAttr("data-cell-id",n);if(i){const o=this.schedule.views;if(o[i])return o[i].view}}return null}findViewByCell(e){if(null==e)return null;const t=go.isCell(e)?e.id:e,n=this.schedule.views;return n[t]?n[t].view:null}findViewsFromPoint(e){const t={x:e.x,y:e.y};return this.model.getCells().map(n=>this.findViewByCell(n)).filter(n=>null!=n&&Io.getBBox(n.container,{target:this.view.stage}).containsPoint(t))}findViewsInArea(e,t={}){const n=_r.create(e);return this.model.getNodes().map(i=>this.findViewByCell(i)).filter(i=>{if(i){const o=Io.getBBox(i.container,{target:this.graph.view.stage});return t.strict?n.containsRect(o):n.isIntersectWithRect(o)}return!1})}findEdgeViewsInArea(e,t={}){const n=_r.create(e);return this.model.getEdges().map(i=>this.findViewByCell(i)).filter(i=>{if(i){const o=Io.getBBox(i.container,{target:this.view.stage});return 0===o.width?o.inflate(1,0):0===o.height&&o.inflate(0,1),t.strict?n.containsRect(o):n.isIntersectWithRect(o)}return!1})}dispose(){this.schedule.dispose()}}!function(r,e,t,n){var a,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);i>3&&o&&Object.defineProperty(e,t,o)}([ks.dispose()],aD.prototype,"dispose",null);var oz=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t};class az extends ks{get cid(){return this.graph.view.cid}get svg(){return this.view.svg}get defs(){return this.view.defs}isDefined(e){return null!=this.svg.getElementById(e)}filter(e){let t=e.id;const n=e.name;if(t||(t=`filter-${n}-${this.cid}-${CA(JSON.stringify(e))}`),!this.isDefined(t)){const i=_0.registry.get(n);if(null==i)return _0.registry.onNotFound(n);const o=i(e.args||{}),a=Object.assign(Object.assign({x:-1,y:-1,width:3,height:3,filterUnits:"objectBoundingBox"},e.attrs),{id:t});Ai.create(aa.sanitize(o),a).appendTo(this.defs)}return t}gradient(e){let t=e.id;const n=e.type;if(t||(t=`gradient-${n}-${this.cid}-${CA(JSON.stringify(e))}`),!this.isDefined(t)){const a=`<${n}>${e.stops.map(u=>{const l=null!=u.opacity&&Number.isFinite(u.opacity)?u.opacity:1;return`<stop offset="${u.offset}" stop-color="${u.color}" stop-opacity="${l}"/>`}).join("")}</${n}>`,s=Object.assign({id:t},e.attrs);Ai.create(a,s).appendTo(this.defs)}return t}marker(e){const{id:t,refX:n,refY:i,markerUnits:o,markerOrient:a,tagName:s,children:u}=e,l=oz(e,["id","refX","refY","markerUnits","markerOrient","tagName","children"]);let c=t;if(c||(c=`marker-${this.cid}-${CA(JSON.stringify(e))}`),!this.isDefined(c)){"path"!==s&&delete l.d;const f=Ai.create("marker",{refX:n,refY:i,id:c,overflow:"visible",orient:a??"auto",markerUnits:o||"userSpaceOnUse"},u?u.map(h=>{var{tagName:d}=h,g=oz(h,["tagName"]);return Ai.create(`${d}`||"path",Yy(Object.assign(Object.assign({},l),g)))}):[Ai.create(s||"path",Yy(l))]);this.defs.appendChild(f.node)}return c}remove(e){const t=this.svg.getElementById(e);t&&t.parentNode&&t.parentNode.removeChild(t)}}class sz extends ks{getClientMatrix(){return Ns(this.view.stage.getScreenCTM())}getClientOffset(){const e=this.view.svg.getBoundingClientRect();return new Vt(e.left,e.top)}getPageOffset(){return this.getClientOffset().translate(window.scrollX,window.scrollY)}snapToGrid(e,t){return("number"==typeof e?this.clientToLocalPoint(e,t):this.clientToLocalPoint(e.x,e.y)).snapToGrid(this.graph.getGridSize())}localToGraphPoint(e,t){const n=Vt.create(e,t);return Io.transformPoint(n,this.graph.matrix())}localToClientPoint(e,t){const n=Vt.create(e,t);return Io.transformPoint(n,this.getClientMatrix())}localToPagePoint(e,t){return("number"==typeof e?this.localToGraphPoint(e,t):this.localToGraphPoint(e)).translate(this.getPageOffset())}localToGraphRect(e,t,n,i){const o=_r.create(e,t,n,i);return Io.transformRectangle(o,this.graph.matrix())}localToClientRect(e,t,n,i){const o=_r.create(e,t,n,i);return Io.transformRectangle(o,this.getClientMatrix())}localToPageRect(e,t,n,i){return("number"==typeof e?this.localToGraphRect(e,t,n,i):this.localToGraphRect(e)).translate(this.getPageOffset())}graphToLocalPoint(e,t){const n=Vt.create(e,t);return Io.transformPoint(n,this.graph.matrix().inverse())}clientToLocalPoint(e,t){const n=Vt.create(e,t);return Io.transformPoint(n,this.getClientMatrix().inverse())}clientToGraphPoint(e,t){const n=Vt.create(e,t);return Io.transformPoint(n,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}pageToLocalPoint(e,t){const i=Vt.create(e,t).diff(this.getPageOffset());return this.graphToLocalPoint(i)}graphToLocalRect(e,t,n,i){const o=_r.create(e,t,n,i);return Io.transformRectangle(o,this.graph.matrix().inverse())}clientToLocalRect(e,t,n,i){const o=_r.create(e,t,n,i);return Io.transformRectangle(o,this.getClientMatrix().inverse())}clientToGraphRect(e,t,n,i){const o=_r.create(e,t,n,i);return Io.transformRectangle(o,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}pageToLocalRect(e,t,n,i){const o=_r.create(e,t,n,i),a=this.getPageOffset();return o.x-=a.x,o.y-=a.y,this.graphToLocalRect(o)}}class Zx extends ks{constructor(){super(...arguments),this.highlights={}}init(){this.startListening()}startListening(){this.graph.on("cell:highlight",this.onCellHighlight,this),this.graph.on("cell:unhighlight",this.onCellUnhighlight,this)}stopListening(){this.graph.off("cell:highlight",this.onCellHighlight,this),this.graph.off("cell:unhighlight",this.onCellUnhighlight,this)}onCellHighlight({view:e,magnet:t,options:n={}}){const i=this.resolveHighlighter(n);if(!i)return;const o=this.getHighlighterId(t,i);if(!this.highlights[o]){const a=i.highlighter;a.highlight(e,t,Object.assign({},i.args)),this.highlights[o]={cellView:e,magnet:t,highlighter:a,args:i.args}}}onCellUnhighlight({magnet:e,options:t={}}){const n=this.resolveHighlighter(t);if(!n)return;const i=this.getHighlighterId(e,n);this.unhighlight(i)}resolveHighlighter(e){const t=this.options;let n=e.highlighter;if(null==n){const s=e.type;n=s&&t.highlighting[s]||t.highlighting.default}if(null==n)return null;const i="string"==typeof n?{name:n}:n,o=i.name,a=Hh.registry.get(o);return null==a?Hh.registry.onNotFound(o):(Hh.check(o,a),{name:o,highlighter:a,args:i.args||{}})}getHighlighterId(e,t){return OA(e),t.name+e.id+JSON.stringify(t.args)}unhighlight(e){const t=this.highlights[e];t&&(t.highlighter.unhighlight(t.cellView,t.magnet,t.args),delete this.highlights[e])}dispose(){Object.keys(this.highlights).forEach(e=>this.unhighlight(e)),this.stopListening()}}!function(r,e,t,n){var a,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);i>3&&o&&Object.defineProperty(e,t,o)}([Zx.dispose()],Zx.prototype,"dispose",null);class uz extends ks{getScroller(){const e=this.graph.getPlugin("scroller");return e&&e.options.enabled?e:null}getContainer(){const e=this.getScroller();return e?e.container.parentElement:this.graph.container.parentElement}getSensorTarget(){const e=this.options.autoResize;if(e)return"boolean"==typeof e?this.getContainer():e}init(){if(this.options.autoResize){const t=this.getSensorTarget();t&&Ox.bind(t,()=>{this.resize(t.offsetWidth,t.offsetHeight)})}}resize(e,t){const n=this.getScroller();n?n.resize(e,t):this.graph.transform.resize(e,t)}dispose(){Ox.clear(this.graph.container)}}!function(r,e,t,n){var a,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);i>3&&o&&Object.defineProperty(e,t,o)}([ks.dispose()],uz.prototype,"dispose",null);class hu extends Gl{get container(){return this.options.container}get[Symbol.toStringTag](){return hu.toStringTag}constructor(e){super(),this.installedPlugins=new Set,this.options=db.get(e),this.css=new nD(this),this.view=new $f(this),this.defs=new az(this),this.coord=new sz(this),this.transform=new nz(this),this.highlight=new Zx(this),this.grid=new rD(this),this.background=new iD(this),this.options.model?this.model=this.options.model:(this.model=new $h,this.model.graph=this),this.renderer=new aD(this),this.panning=new rz(this),this.mousewheel=new oD(this),this.virtualRender=new iz(this),this.size=new uz(this)}isNode(e){return e.isNode()}isEdge(e){return e.isEdge()}resetCells(e,t={}){return this.model.resetCells(e,t),this}clearCells(e={}){return this.model.clear(e),this}toJSON(e={}){return this.model.toJSON(e)}parseJSON(e){return this.model.parseJSON(e)}fromJSON(e,t={}){return this.model.fromJSON(e,t),this}getCellById(e){return this.model.getCell(e)}addNode(e,t={}){return this.model.addNode(e,t)}addNodes(e,t={}){return this.addCell(e.map(n=>Qa.isNode(n)?n:this.createNode(n)),t)}createNode(e){return this.model.createNode(e)}removeNode(e,t={}){return this.model.removeCell(e,t)}addEdge(e,t={}){return this.model.addEdge(e,t)}addEdges(e,t={}){return this.addCell(e.map(n=>Ua.isEdge(n)?n:this.createEdge(n)),t)}removeEdge(e,t={}){return this.model.removeCell(e,t)}createEdge(e){return this.model.createEdge(e)}addCell(e,t={}){return this.model.addCell(e,t),this}removeCell(e,t={}){return this.model.removeCell(e,t)}removeCells(e,t={}){return this.model.removeCells(e,t)}removeConnectedEdges(e,t={}){return this.model.removeConnectedEdges(e,t)}disconnectConnectedEdges(e,t={}){return this.model.disconnectConnectedEdges(e,t),this}hasCell(e){return this.model.has(e)}getCells(){return this.model.getCells()}getCellCount(){return this.model.total()}getNodes(){return this.model.getNodes()}getEdges(){return this.model.getEdges()}getOutgoingEdges(e){return this.model.getOutgoingEdges(e)}getIncomingEdges(e){return this.model.getIncomingEdges(e)}getConnectedEdges(e,t={}){return this.model.getConnectedEdges(e,t)}getRootNodes(){return this.model.getRoots()}getLeafNodes(){return this.model.getLeafs()}isRootNode(e){return this.model.isRoot(e)}isLeafNode(e){return this.model.isLeaf(e)}getNeighbors(e,t={}){return this.model.getNeighbors(e,t)}isNeighbor(e,t,n={}){return this.model.isNeighbor(e,t,n)}getSuccessors(e,t={}){return this.model.getSuccessors(e,t)}isSuccessor(e,t,n={}){return this.model.isSuccessor(e,t,n)}getPredecessors(e,t={}){return this.model.getPredecessors(e,t)}isPredecessor(e,t,n={}){return this.model.isPredecessor(e,t,n)}getCommonAncestor(...e){return this.model.getCommonAncestor(...e)}getSubGraph(e,t={}){return this.model.getSubGraph(e,t)}cloneSubGraph(e,t={}){return this.model.cloneSubGraph(e,t)}cloneCells(e){return this.model.cloneCells(e)}getNodesFromPoint(e,t){return this.model.getNodesFromPoint(e,t)}getNodesInArea(e,t,n,i,o){return this.model.getNodesInArea(e,t,n,i,o)}getNodesUnderNode(e,t={}){return this.model.getNodesUnderNode(e,t)}searchCell(e,t,n={}){return this.model.search(e,t,n),this}getShortestPath(e,t,n={}){return this.model.getShortestPath(e,t,n)}getAllCellsBBox(){return this.model.getAllCellsBBox()}getCellsBBox(e,t={}){return this.model.getCellsBBox(e,t)}startBatch(e,t={}){this.model.startBatch(e,t)}stopBatch(e,t={}){this.model.stopBatch(e,t)}batchUpdate(e,t,n){const i="string"==typeof e?e:"update",o="string"==typeof e?t:e,a="function"==typeof t?n:t;this.startBatch(i,a);const s=o();return this.stopBatch(i,a),s}updateCellId(e,t){return this.model.updateCellId(e,t)}findView(e){return go.isCell(e)?this.findViewByCell(e):this.findViewByElem(e)}findViews(e){return _r.isRectangleLike(e)?this.findViewsInArea(e):Vt.isPointLike(e)?this.findViewsFromPoint(e):[]}findViewByCell(e){return this.renderer.findViewByCell(e)}findViewByElem(e){return this.renderer.findViewByElem(e)}findViewsFromPoint(e,t){return this.renderer.findViewsFromPoint("number"==typeof e?{x:e,y:t}:e)}findViewsInArea(e,t,n,i,o){return this.renderer.findViewsInArea("number"==typeof e?{x:e,y:t,width:n,height:i}:e,"number"==typeof e?o:t)}matrix(e){return typeof e>"u"?this.transform.getMatrix():(this.transform.setMatrix(e),this)}resize(e,t){const n=this.getPlugin("scroller");return n?n.resize(e,t):this.transform.resize(e,t),this}scale(e,t=e,n=0,i=0){return typeof e>"u"?this.transform.getScale():(this.transform.scale(e,t,n,i),this)}zoom(e,t){const n=this.getPlugin("scroller");if(n){if(typeof e>"u")return n.zoom();n.zoom(e,t)}else{if(typeof e>"u")return this.transform.getZoom();this.transform.zoom(e,t)}return this}zoomTo(e,t={}){const n=this.getPlugin("scroller");return n?n.zoom(e,Object.assign(Object.assign({},t),{absolute:!0})):this.transform.zoom(e,Object.assign(Object.assign({},t),{absolute:!0})),this}zoomToRect(e,t={}){const n=this.getPlugin("scroller");return n?n.zoomToRect(e,t):this.transform.zoomToRect(e,t),this}zoomToFit(e={}){const t=this.getPlugin("scroller");return t?t.zoomToFit(e):this.transform.zoomToFit(e),this}rotate(e,t,n){return typeof e>"u"?this.transform.getRotation():(this.transform.rotate(e,t,n),this)}translate(e,t){return typeof e>"u"?this.transform.getTranslation():(this.transform.translate(e,t),this)}translateBy(e,t){const n=this.translate();return this.translate(n.tx+e,n.ty+t)}getGraphArea(){return this.transform.getGraphArea()}getContentArea(e={}){return this.transform.getContentArea(e)}getContentBBox(e={}){return this.transform.getContentBBox(e)}fitToContent(e,t,n,i){return this.transform.fitToContent(e,t,n,i)}scaleContentToFit(e={}){return this.transform.scaleContentToFit(e),this}center(e){return this.centerPoint(e)}centerPoint(e,t,n){const i=this.getPlugin("scroller");return i?i.centerPoint(e,t,n):this.transform.centerPoint(e,t),this}centerContent(e){const t=this.getPlugin("scroller");return t?t.centerContent(e):this.transform.centerContent(e),this}centerCell(e,t){const n=this.getPlugin("scroller");return n?n.centerCell(e,t):this.transform.centerCell(e),this}positionPoint(e,t,n,i={}){const o=this.getPlugin("scroller");return o?o.positionPoint(e,t,n,i):this.transform.positionPoint(e,t,n),this}positionRect(e,t,n){const i=this.getPlugin("scroller");return i?i.positionRect(e,t,n):this.transform.positionRect(e,t),this}positionCell(e,t,n){const i=this.getPlugin("scroller");return i?i.positionCell(e,t,n):this.transform.positionCell(e,t),this}positionContent(e,t){const n=this.getPlugin("scroller");return n?n.positionContent(e,t):this.transform.positionContent(e,t),this}snapToGrid(e,t){return this.coord.snapToGrid(e,t)}pageToLocal(e,t,n,i){return _r.isRectangleLike(e)?this.coord.pageToLocalRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof i?this.coord.pageToLocalRect(e,t,n,i):this.coord.pageToLocalPoint(e,t)}localToPage(e,t,n,i){return _r.isRectangleLike(e)?this.coord.localToPageRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof i?this.coord.localToPageRect(e,t,n,i):this.coord.localToPagePoint(e,t)}clientToLocal(e,t,n,i){return _r.isRectangleLike(e)?this.coord.clientToLocalRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof i?this.coord.clientToLocalRect(e,t,n,i):this.coord.clientToLocalPoint(e,t)}localToClient(e,t,n,i){return _r.isRectangleLike(e)?this.coord.localToClientRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof i?this.coord.localToClientRect(e,t,n,i):this.coord.localToClientPoint(e,t)}localToGraph(e,t,n,i){return _r.isRectangleLike(e)?this.coord.localToGraphRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof i?this.coord.localToGraphRect(e,t,n,i):this.coord.localToGraphPoint(e,t)}graphToLocal(e,t,n,i){return _r.isRectangleLike(e)?this.coord.graphToLocalRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof i?this.coord.graphToLocalRect(e,t,n,i):this.coord.graphToLocalPoint(e,t)}clientToGraph(e,t,n,i){return _r.isRectangleLike(e)?this.coord.clientToGraphRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof i?this.coord.clientToGraphRect(e,t,n,i):this.coord.clientToGraphPoint(e,t)}defineFilter(e){return this.defs.filter(e)}defineGradient(e){return this.defs.gradient(e)}defineMarker(e){return this.defs.marker(e)}getGridSize(){return this.grid.getGridSize()}setGridSize(e){return this.grid.setGridSize(e),this}showGrid(){return this.grid.show(),this}hideGrid(){return this.grid.hide(),this}clearGrid(){return this.grid.clear(),this}drawGrid(e){return this.grid.draw(e),this}updateBackground(){return this.background.update(),this}drawBackground(e,t){const n=this.getPlugin("scroller");return null==n||null!=this.options.background&&t?this.background.draw(e):n.drawBackground(e,t),this}clearBackground(e){const t=this.getPlugin("scroller");return null==t||null!=this.options.background&&e?this.background.clear():t.clearBackground(e),this}enableVirtualRender(){return this.virtualRender.enableVirtualRender(),this}disableVirtualRender(){return this.virtualRender.disableVirtualRender(),this}isMouseWheelEnabled(){return!this.mousewheel.disabled}enableMouseWheel(){return this.mousewheel.enable(),this}disableMouseWheel(){return this.mousewheel.disable(),this}toggleMouseWheel(e){return null==e?this.isMouseWheelEnabled()?this.disableMouseWheel():this.enableMouseWheel():e?this.enableMouseWheel():this.disableMouseWheel(),this}isPannable(){const e=this.getPlugin("scroller");return e?e.isPannable():this.panning.pannable}enablePanning(){const e=this.getPlugin("scroller");return e?e.enablePanning():this.panning.enablePanning(),this}disablePanning(){const e=this.getPlugin("scroller");return e?e.disablePanning():this.panning.disablePanning(),this}togglePanning(e){return null==e?this.isPannable()?this.disablePanning():this.enablePanning():e!==this.isPannable()&&(e?this.enablePanning():this.disablePanning()),this}use(e,...t){return this.installedPlugins.has(e)||(this.installedPlugins.add(e),e.init(this,...t)),this}getPlugin(e){return Array.from(this.installedPlugins).find(t=>t.name===e)}getPlugins(e){return Array.from(this.installedPlugins).filter(t=>e.includes(t.name))}disablePlugins(e){let t=e;return Array.isArray(t)||(t=[t]),this.getPlugins(t)?.forEach(i=>{var o;null===(o=i?.disable)||void 0===o||o.call(i)}),this}enablePlugins(e){let t=e;return Array.isArray(t)||(t=[t]),this.getPlugins(t)?.forEach(i=>{var o;null===(o=i?.enable)||void 0===o||o.call(i)}),this}disposePlugins(e){let t=e;return Array.isArray(t)||(t=[t]),this.getPlugins(t)?.forEach(i=>{i.dispose()}),this}isPluginEnabled(e){var t;const n=this.getPlugin(e);return null===(t=n?.isEnabled)||void 0===t?void 0:t.call(n)}dispose(){this.clearCells(),this.off(),this.css.dispose(),this.defs.dispose(),this.grid.dispose(),this.coord.dispose(),this.transform.dispose(),this.highlight.dispose(),this.background.dispose(),this.mousewheel.dispose(),this.panning.dispose(),this.view.dispose(),this.renderer.dispose(),this.installedPlugins.forEach(e=>{e.dispose()})}}(function(r,e,t,n){var a,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);i>3&&o&&Object.defineProperty(e,t,o)})([Gl.dispose()],hu.prototype,"dispose",null),function(r){r.View=$f,r.Renderer=aD,r.MouseWheel=oD,r.DefsManager=az,r.GridManager=rD,r.CoordManager=sz,r.TransformManager=nz,r.HighlightManager=Zx,r.BackgroundManager=iD}(hu||(hu={})),function(r){r.toStringTag=`X6.${r.name}`,r.isGraph=function e(t){if(null==t)return!1;if(t instanceof r)return!0;const n=t[Symbol.toStringTag];return null==n||n===r.toStringTag}}(hu||(hu={})),function(r){r.render=function e(t,n){const i=t instanceof HTMLElement?new r({container:t}):new r(t);return null!=n&&i.fromJSON(n),i}}(hu||(hu={})),function(r){r.registerNode=Qa.registry.register,r.registerEdge=Ua.registry.register,r.registerView=fu.registry.register,r.registerAttr=Wf.registry.register,r.registerGrid=Xd.registry.register,r.registerFilter=_0.registry.register,r.registerNodeTool=A0.registry.register,r.registerEdgeTool=D0.registry.register,r.registerBackground=ib.registry.register,r.registerHighlighter=Hh.registry.register,r.registerPortLayout=yp.registry.register,r.registerPortLabelLayout=M0.registry.register,r.registerMarker=Kd.registry.register,r.registerRouter=tg.registry.register,r.registerConnector=bp.registry.register,r.registerAnchor=T0.registry.register,r.registerEdgeAnchor=I0.registry.register,r.registerConnectionPoint=O0.registry.register}(hu||(hu={})),function(r){r.unregisterNode=Qa.registry.unregister,r.unregisterEdge=Ua.registry.unregister,r.unregisterView=fu.registry.unregister,r.unregisterAttr=Wf.registry.unregister,r.unregisterGrid=Xd.registry.unregister,r.unregisterFilter=_0.registry.unregister,r.unregisterNodeTool=A0.registry.unregister,r.unregisterEdgeTool=D0.registry.unregister,r.unregisterBackground=ib.registry.unregister,r.unregisterHighlighter=Hh.registry.unregister,r.unregisterPortLayout=yp.registry.unregister,r.unregisterPortLabelLayout=M0.registry.unregister,r.unregisterMarker=Kd.registry.unregister,r.unregisterRouter=tg.registry.unregister,r.unregisterConnector=bp.registry.unregister,r.unregisterAnchor=T0.registry.unregister,r.unregisterEdgeAnchor=I0.registry.unregister,r.unregisterConnectionPoint=O0.registry.unregister}(hu||(hu={}));class wp extends Qa{}(function(r){class e extends fl{init(){super.init(),this.cell.on("change:*",({key:n})=>{const i=r.shapeMaps[this.cell.shape];if(i){const{effect:o}=i;(!o||o.includes(n))&&this.renderHTMLComponent()}})}confirmUpdate(n){const i=super.confirmUpdate(n);return this.handleAction(i,e.action,()=>this.renderHTMLComponent())}renderHTMLComponent(){const n=this.selectors&&this.selectors.foContent;if(n){Wy(n);const i=r.shapeMaps[this.cell.shape];if(!i)return;let{html:o}=i;"function"==typeof o&&(o=o(this.cell)),o&&("string"==typeof o?n.innerHTML=o:$y(n,o))}}}r.View=e,function(t){t.action="html",t.config({bootstrap:[t.action],actions:{html:t.action}}),fl.registry.register("html-view",t,!0)}(e=r.View||(r.View={}))})(wp||(wp={})),function(r){r.config({view:"html-view",markup:[{tagName:"rect",selector:"body"},Object.assign({},aa.getForeignObjectMarkup()),{tagName:"text",selector:"label"}],attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}}}),Qa.registry.register("html",r,!0)}(wp||(wp={})),function(r){r.shapeMaps={},r.register=function e(t){const{shape:n,html:i,effect:o,inherit:a}=t,s=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(t,["shape","html","effect","inherit"]);if(!n)throw new Error("should specify shape in config");r.shapeMaps[n]={html:i,effect:o},hu.registerNode(n,Object.assign({inherit:a||"html"},s),!0)}}(wp||(wp={}));let kxe=(()=>{class r{constructor(t){this.cdr=t,this.transition=!1}ngAfterViewInit(){setTimeout(()=>{this.transition=!0,this.cdr.detectChanges()},100)}ngOnChanges(t){}}return r.\u0275fac=function(t){return new(t||r)(ii(e1))},r.\u0275cmp=_s({type:r,selectors:[["app-node"]],inputs:{value:"value"},features:[ma],decls:4,vars:3,consts:[[1,"component-container"],[1,"value"]],template:function(t,n){1&t&&(Qi(0,"section",0),yo(1," component: "),Qi(2,"span",1),yo(3),co()()),2&t&&(o_("transition",n.transition),Pg(3),jb(n.value))},styles:[".component-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border:2px solid red;height:100%;width:100%;transition:all ease .5s;transform:scale(2)}.component-container.transition[_ngcontent-%COMP%]{border-color:#000;transform:scale(1)}.component-container[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:gray}"]}),r})();class lz extends Qa{}!function(r){function e(t){const n=[],i=aa.getForeignObjectMarkup();return t?n.push({tagName:t,selector:"body"},i):n.push(i),n}r.config({view:"angular-shape-view",markup:e(),attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}},propHooks(t){if(null==t.markup){const n=t.primer;if(n){t.markup=e(n);let i={};switch(n){case"circle":i={refCx:"50%",refCy:"50%",refR:"50%"};break;case"ellipse":i={refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}}t.attrs=ja({},{body:{refWidth:null,refHeight:null,...i}},t.attrs||{})}}return t}}),Qa.registry.register("angular-shape",r,!0)}(lz||(lz={}));const cz=new Map;function fz(r){const{shape:e,injector:t,content:n,...i}=r;cz.set(e,{injector:t,content:n}),hu.registerNode(e,{inherit:"angular-shape",...i},!0)}class Qx extends fl{getNodeContainer(){return this.selectors?.foContent}confirmUpdate(e){const t=super.confirmUpdate(e);return this.handleAction(t,Qx.action,()=>this.renderAngularContent())}getNgArguments(){return this.cell.data?.ngArguments||{}}setInstanceInput(e,t){const n=this.getNgArguments();if(e instanceof Ac)t.context={ngArguments:n};else{const i=t;Object.keys(n).forEach(o=>i.setInput(o,n[o])),i.changeDetectorRef.detectChanges()}}renderAngularContent(){this.unmountAngularContent();const e=this.getNodeContainer();if(e){const t=this.cell,{injector:n,content:i}=cz.get(t.shape),o=n.get(Tl);if(i instanceof Ac){const a=this.getNgArguments(),s=o.createEmbeddedView(i,{ngArguments:a});s.rootNodes.forEach(u=>e.appendChild(u)),s.detectChanges(),t.on("change:data",()=>this.setInstanceInput(i,s))}else{const a=o.createComponent(i);e.appendChild(a.hostView.rootNodes[0]),this.setInstanceInput(i,a),t.on("change:data",()=>this.setInstanceInput(i,a))}}}unmountAngularContent(){const e=this.getNodeContainer();return e.innerHTML="",e}onMouseDown(e,t,n){const i=e.target;if("input"===i.tagName.toLowerCase()){const a=i.getAttribute("type");if(null==a||["text","password","number","email","search","tel","url"].includes(a))return}super.onMouseDown(e,t,n)}unmount(){return this.unmountAngularContent(),super.unmount(),this}}!function(r){r.action="angular",r.config({bootstrap:[r.action],actions:{component:r.action}}),fl.registry.register("angular-shape-view",r,!0)}(Qx||(Qx={}));const R0=new Map([["component","custom-component-node"],["template","custom-template-node"],["html","custom-html-node"]]),Rxe=["container"],Fxe=["template"];function Bxe(r,e){if(1&r&&(Qi(0,"section",11),yo(1," template: "),Qi(2,"span",12),yo(3),co()()),2&r){const t=e.ngArguments;Pg(3),jb(t.value)}}const jxe=[{path:"",redirectTo:"x6",pathMatch:"full"},{path:"g6",component:lue},{path:"x6",component:(()=>{class r{constructor(t){this.injector=t,this.idCount=0,this.nodeCountMap=new Map([["component",0],["template",0],["html",0]])}addNode(t){const n=this.getBaiscNode(R0.get(t));this.graph.addNode(n),this.addNodeCount(t)}addBatchNode(t,n){const i=new Array(t).fill(null).map(()=>this.getBaiscNode(R0.get(n)));this.graph.addNodes(i),this.addNodeCount(n,i.length)}removeBatchNode(t,n){const i=this.graph.getCells(),o=[];for(let a=0;a<i.length;a++){const s=i[a];if(s.shape===R0.get(n)&&o.push(s),o.length===t)break}this.graph.removeCells(o),this.idCount-=o.length,this.addNodeCount(n,-o.length)}updateNodeValue(t,n){if(!t)return void alert("\u8bf7\u8f93\u5165\u9700\u8981\u67e5\u627e\u7684\u8282\u70b9id!");if(!n)return void alert("\u8bf7\u8f93\u5165\u9700\u8981\u66ff\u6362\u7684\u65b0\u6587\u672c!");const i=this.graph.getCellById(t);i?i.setData({ngArguments:{value:n}}):alert("\u672a\u67e5\u8be2\u5230\u8be5\u8282\u70b9!")}getBaiscNode(t){const n=rx(0,1e3),i=rx(0,600);return{id:""+ ++this.idCount,x:n,y:i,shape:t,data:{ngArguments:{value:`${this.idCount}`}}}}addNodeCount(t,n=1){const i=this.nodeCountMap.get(t);this.nodeCountMap.set(t,i+n)}ngAfterViewInit(){this.graph=new hu({container:this.container.nativeElement,width:1e3,height:600,background:{color:"#F2F7FA"}}),fz({shape:R0.get("component"),width:120,height:20,content:kxe,injector:this.injector}),fz({shape:R0.get("template"),width:120,height:20,content:this.template,injector:this.injector}),wp.register({shape:R0.get("html"),width:120,height:20,effect:["data"],html(t){const{ngArguments:n}=t.getData(),i=document.createElement("section");return i.style.display="flex",i.style.justifyContent="center",i.style.alignItems="center",i.style.border="2px solid #000",i.style.width="100%",i.style.height="100%",i.innerHTML=`\n          HTML: <span style="color: gray;">${n.value}</span>\n        `,i}})}}return r.\u0275fac=function(t){return new(t||r)(ii(Al))},r.\u0275cmp=_s({type:r,selectors:[["app-x6"]],viewQuery:function(t,n){if(1&t&&($b(Rxe,5),$b(Fxe,5)),2&t){let i;Av(i=Dv())&&(n.container=i.first),Av(i=Dv())&&(n.template=i.first)}},decls:62,vars:3,consts:[[1,"header"],["type","button",3,"click"],["type","text","placeholder","\u67e5\u627e\u7684\u8282\u70b9\u5e8f\u53f7"],["id",""],["type","text","placeholder","\u66ff\u6362\u7684\u65b0\u5185\u5bb9"],["text",""],[1,"count"],[1,"graph-container"],["id","container"],["container",""],["template",""],[1,"template-container"],[1,"value"]],template:function(t,n){if(1&t){const i=function Z2(){return nr()}();Qi(0,"section",0)(1,"table")(2,"tr")(3,"th"),yo(4,"\u4ecb\u7ecd"),co(),Qi(5,"th"),yo(6,"\u64cd\u4f5c"),co()(),Qi(7,"tr")(8,"td"),yo(9,"\u589e\u52a0\u8282\u70b9"),co(),Qi(10,"td")(11,"button",1),Us("click",function(){return n.addNode("component")}),yo(12,"\u589e\u52a0 Component \u8282\u70b9"),co(),Qi(13,"button",1),Us("click",function(){return n.addNode("template")}),yo(14,"\u589e\u52a0 Template \u8282\u70b9"),co(),Qi(15,"button",1),Us("click",function(){return n.addNode("html")}),yo(16,"\u589e\u52a0 HTML \u8282\u70b9"),co()()(),Qi(17,"tr")(18,"td"),yo(19,"\u66f4\u65b0\u8282\u70b9"),co(),Qi(20,"td"),kg(21,"input",2,3)(23,"input",4,5),Qi(25,"button",1),Us("click",function(){!function lg(r){return hi.lFrame.contextLView=r,r[8]}(i);const a=e_(22),s=e_(24);return function rh(r){return hi.lFrame.contextLView=null,r}(n.updateNodeValue(a.value,s.value))}),yo(26,"\u66f4\u65b0\u7ec4\u4ef6Input\u503c"),co()()(),Qi(27,"tr")(28,"td"),yo(29,"\u6279\u91cf\u64cd\u4f5c(Component)"),co(),Qi(30,"td")(31,"button",1),Us("click",function(){return n.addBatchNode(50,"component")}),yo(32,"\u589e\u52a050\u4e2a\u8282\u70b9"),co(),Qi(33,"button",1),Us("click",function(){return n.removeBatchNode(50,"component")}),yo(34,"\u51cf\u5c1150\u4e2a\u8282\u70b9"),co(),Qi(35,"span",6),yo(36),co()()(),Qi(37,"tr")(38,"td"),yo(39,"\u6279\u91cf\u64cd\u4f5c(Template)"),co(),Qi(40,"td")(41,"button",1),Us("click",function(){return n.addBatchNode(50,"template")}),yo(42,"\u589e\u52a050\u4e2a\u8282\u70b9"),co(),Qi(43,"button",1),Us("click",function(){return n.removeBatchNode(50,"template")}),yo(44,"\u51cf\u5c1150\u4e2a\u8282\u70b9"),co(),Qi(45,"span",6),yo(46),co()()(),Qi(47,"tr")(48,"td"),yo(49,"\u6279\u91cf\u64cd\u4f5c(HTML)"),co(),Qi(50,"td")(51,"button",1),Us("click",function(){return n.addBatchNode(50,"html")}),yo(52,"\u589e\u52a050\u4e2a\u8282\u70b9"),co(),Qi(53,"button",1),Us("click",function(){return n.removeBatchNode(50,"html")}),yo(54,"\u51cf\u5c1150\u4e2a\u8282\u70b9"),co(),Qi(55,"span",6),yo(56),co()()()()(),Qi(57,"div",7),kg(58,"div",8,9),co(),function X2(r,e,t,n,i,o,a,s){const u=nr(),l=to(),c=r+22,f=l.firstCreatePass?function e8(r,e,t,n,i,o,a,s,u){const l=e.consts,c=dv(e,r,4,a||null,Zu(l,s));HE(e,t,c,Zu(l,u)),sf(e,c);const f=c.tViews=VE(2,c,n,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l);return null!==e.queries&&(e.queries.template(e,c),f.queries=e.queries.embeddedTView(c)),c}(c,l,u,e,t,n,i,o,a):l.data[c];ls(f,!1);const h=u[11].createComment("");vb(l,u,h,f),ri(h,u),Ob(u,u[c]=O2(h,u,h,f)),ct(f)&&GE(l,u,f),null!=a&&UE(u,f,s)}(60,Bxe,4,1,"ng-template",null,10,UI)}2&t&&(Pg(36),Rg("\u8282\u70b9\u603b\u6570: ",n.nodeCountMap.get("component"),""),Pg(10),Rg("\u8282\u70b9\u603b\u6570: ",n.nodeCountMap.get("template"),""),Pg(10),Rg("\u8282\u70b9\u603b\u6570: ",n.nodeCountMap.get("html"),""))},styles:[".header[_ngcontent-%COMP%]{display:flex;justify-content:center}.header[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border:1px solid #000}.header[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:8px;border:1px solid #000}.header[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:4px}.header[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-of-type, .header[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-of-type{margin-right:0}.header[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{margin-left:4px}.graph-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.template-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border:2px solid #000;height:100%;width:100%}.template-container[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:gray}"]}),r})()},{path:"**",redirectTo:"x6"}];let zxe=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=is({type:r}),r.\u0275inj=ys({imports:[zN.forRoot(jxe),zN]}),r})(),Gxe=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=_s({type:r,selectors:[["app-root"]],decls:6,vars:0,consts:[[1,"router-container"],["routerLink","x6","routerLinkActive","active",1,"x6"],["routerLink","g6","routerLinkActive","active",1,"g6"]],template:function(t,n){1&t&&(Qi(0,"div",0)(1,"span",1),yo(2,"\u67e5\u770b X6 Demo"),co(),Qi(3,"span",2),yo(4,"\u67e5\u770b G6 Demo"),co()(),kg(5,"router-outlet"))},dependencies:[OS,j1,PN],styles:[".router-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.router-container[_ngcontent-%COMP%]   .x6[_ngcontent-%COMP%], .router-container[_ngcontent-%COMP%]   .g6[_ngcontent-%COMP%]{margin:10px;cursor:pointer}.router-container[_ngcontent-%COMP%]   .x6.active[_ngcontent-%COMP%], .router-container[_ngcontent-%COMP%]   .g6.active[_ngcontent-%COMP%]{color:#1890ff;text-shadow:0 0 .25px currentcolor}"]}),r})(),Uxe=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=is({type:r,bootstrap:[Gxe]}),r.\u0275inj=ys({providers:[{provide:xd,useClass:VO}],imports:[JW,zxe]}),r})();(function b7(){AO=!1})(),QW().bootstrapModule(Uxe).catch(r=>console.error(r))},94:(Qt,V,G)=>{var B=G(4126),Q={};for(var j in B)B.hasOwnProperty(j)&&(Q[B[j]]=j);var k=Qt.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var F in k)if(k.hasOwnProperty(F)){if(!("channels"in k[F]))throw new Error("missing channels property: "+F);if(!("labels"in k[F]))throw new Error("missing channel labels property: "+F);if(k[F].labels.length!==k[F].channels)throw new Error("channel and label counts mismatch: "+F);var I=k[F].channels,x=k[F].labels;delete k[F].channels,delete k[F].labels,Object.defineProperty(k[F],"channels",{value:I}),Object.defineProperty(k[F],"labels",{value:x})}function E(b,w){return Math.pow(b[0]-w[0],2)+Math.pow(b[1]-w[1],2)+Math.pow(b[2]-w[2],2)}k.rgb.hsl=function(b){var U,ie,w=b[0]/255,y=b[1]/255,A=b[2]/255,M=Math.min(w,y,A),S=Math.max(w,y,A),P=S-M;return S===M?U=0:w===S?U=(y-A)/P:y===S?U=2+(A-w)/P:A===S&&(U=4+(w-y)/P),(U=Math.min(60*U,360))<0&&(U+=360),ie=(M+S)/2,[U,100*(S===M?0:ie<=.5?P/(S+M):P/(2-S-M)),100*ie]},k.rgb.hsv=function(b){var w,y,A,M,S,P=b[0]/255,U=b[1]/255,z=b[2]/255,ie=Math.max(P,U,z),ne=ie-Math.min(P,U,z),q=function(K){return(ie-K)/6/ne+.5};return 0===ne?M=S=0:(S=ne/ie,w=q(P),y=q(U),A=q(z),P===ie?M=A-y:U===ie?M=1/3+w-A:z===ie&&(M=2/3+y-w),M<0?M+=1:M>1&&(M-=1)),[360*M,100*S,100*ie]},k.rgb.hwb=function(b){var w=b[0],y=b[1],A=b[2];return[k.rgb.hsl(b)[0],1/255*Math.min(w,Math.min(y,A))*100,100*(A=1-1/255*Math.max(w,Math.max(y,A)))]},k.rgb.cmyk=function(b){var U,w=b[0]/255,y=b[1]/255,A=b[2]/255;return[100*((1-w-(U=Math.min(1-w,1-y,1-A)))/(1-U)||0),100*((1-y-U)/(1-U)||0),100*((1-A-U)/(1-U)||0),100*U]},k.rgb.keyword=function(b){var w=Q[b];if(w)return w;var A,y=1/0;for(var M in B)if(B.hasOwnProperty(M)){var P=E(b,B[M]);P<y&&(y=P,A=M)}return A},k.keyword.rgb=function(b){return B[b]},k.rgb.xyz=function(b){var w=b[0]/255,y=b[1]/255,A=b[2]/255;return[100*(.4124*(w=w>.04045?Math.pow((w+.055)/1.055,2.4):w/12.92)+.3576*(y=y>.04045?Math.pow((y+.055)/1.055,2.4):y/12.92)+.1805*(A=A>.04045?Math.pow((A+.055)/1.055,2.4):A/12.92)),100*(.2126*w+.7152*y+.0722*A),100*(.0193*w+.1192*y+.9505*A)]},k.rgb.lab=function(b){var w=k.rgb.xyz(b),y=w[0],A=w[1],M=w[2];return A/=100,M/=108.883,y=(y/=95.047)>.008856?Math.pow(y,1/3):7.787*y+16/116,[116*(A=A>.008856?Math.pow(A,1/3):7.787*A+16/116)-16,500*(y-A),200*(A-(M=M>.008856?Math.pow(M,1/3):7.787*M+16/116))]},k.hsl.rgb=function(b){var M,S,P,U,z,w=b[0]/360,y=b[1]/100,A=b[2]/100;if(0===y)return[z=255*A,z,z];M=2*A-(S=A<.5?A*(1+y):A+y-A*y),U=[0,0,0];for(var ie=0;ie<3;ie++)(P=w+1/3*-(ie-1))<0&&P++,P>1&&P--,U[ie]=255*(z=6*P<1?M+6*(S-M)*P:2*P<1?S:3*P<2?M+(S-M)*(2/3-P)*6:M);return U},k.hsl.hsv=function(b){var w=b[0],y=b[1]/100,A=b[2]/100,M=y,S=Math.max(A,.01);return y*=(A*=2)<=1?A:2-A,M*=S<=1?S:2-S,[w,100*(0===A?2*M/(S+M):2*y/(A+y)),(A+y)/2*100]},k.hsv.rgb=function(b){var w=b[0]/60,y=b[1]/100,A=b[2]/100,M=Math.floor(w)%6,S=w-Math.floor(w),P=255*A*(1-y),U=255*A*(1-y*S),z=255*A*(1-y*(1-S));switch(A*=255,M){case 0:return[A,z,P];case 1:return[U,A,P];case 2:return[P,A,z];case 3:return[P,U,A];case 4:return[z,P,A];case 5:return[A,P,U]}},k.hsv.hsl=function(b){var S,P,U,w=b[0],y=b[1]/100,A=b[2]/100,M=Math.max(A,.01);return U=(2-y)*A,P=y*M,[w,100*(P=(P/=(S=(2-y)*M)<=1?S:2-S)||0),100*(U/=2)]},k.hwb.rgb=function(b){var S,P,U,z,ie,ne,q,w=b[0]/360,y=b[1]/100,A=b[2]/100,M=y+A;switch(M>1&&(y/=M,A/=M),U=6*w-(S=Math.floor(6*w)),0!=(1&S)&&(U=1-U),z=y+U*((P=1-A)-y),S){default:case 6:case 0:ie=P,ne=z,q=y;break;case 1:ie=z,ne=P,q=y;break;case 2:ie=y,ne=P,q=z;break;case 3:ie=y,ne=z,q=P;break;case 4:ie=z,ne=y,q=P;break;case 5:ie=P,ne=y,q=z}return[255*ie,255*ne,255*q]},k.cmyk.rgb=function(b){var y=b[1]/100,A=b[2]/100,M=b[3]/100;return[255*(1-Math.min(1,b[0]/100*(1-M)+M)),255*(1-Math.min(1,y*(1-M)+M)),255*(1-Math.min(1,A*(1-M)+M))]},k.xyz.rgb=function(b){var M,S,P,w=b[0]/100,y=b[1]/100,A=b[2]/100;return S=-.9689*w+1.8758*y+.0415*A,P=.0557*w+-.204*y+1.057*A,M=(M=3.2406*w+-1.5372*y+-.4986*A)>.0031308?1.055*Math.pow(M,1/2.4)-.055:12.92*M,S=S>.0031308?1.055*Math.pow(S,1/2.4)-.055:12.92*S,P=P>.0031308?1.055*Math.pow(P,1/2.4)-.055:12.92*P,[255*(M=Math.min(Math.max(0,M),1)),255*(S=Math.min(Math.max(0,S),1)),255*(P=Math.min(Math.max(0,P),1))]},k.xyz.lab=function(b){var w=b[0],y=b[1],A=b[2];return y/=100,A/=108.883,w=(w/=95.047)>.008856?Math.pow(w,1/3):7.787*w+16/116,[116*(y=y>.008856?Math.pow(y,1/3):7.787*y+16/116)-16,500*(w-y),200*(y-(A=A>.008856?Math.pow(A,1/3):7.787*A+16/116))]},k.lab.xyz=function(b){var M,S,P;M=b[1]/500+(S=(b[0]+16)/116),P=S-b[2]/200;var U=Math.pow(S,3),z=Math.pow(M,3),ie=Math.pow(P,3);return S=U>.008856?U:(S-16/116)/7.787,M=z>.008856?z:(M-16/116)/7.787,P=ie>.008856?ie:(P-16/116)/7.787,[M*=95.047,S*=100,P*=108.883]},k.lab.lch=function(b){var S,w=b[0],y=b[1],A=b[2];return(S=360*Math.atan2(A,y)/2/Math.PI)<0&&(S+=360),[w,Math.sqrt(y*y+A*A),S]},k.lch.lab=function(b){var P,y=b[1];return P=b[2]/360*2*Math.PI,[b[0],y*Math.cos(P),y*Math.sin(P)]},k.rgb.ansi16=function(b){var w=b[0],y=b[1],A=b[2],M=1 in arguments?arguments[1]:k.rgb.hsv(b)[2];if(0===(M=Math.round(M/50)))return 30;var S=30+(Math.round(A/255)<<2|Math.round(y/255)<<1|Math.round(w/255));return 2===M&&(S+=60),S},k.hsv.ansi16=function(b){return k.rgb.ansi16(k.hsv.rgb(b),b[2])},k.rgb.ansi256=function(b){var w=b[0],y=b[1],A=b[2];return w===y&&y===A?w<8?16:w>248?231:Math.round((w-8)/247*24)+232:16+36*Math.round(w/255*5)+6*Math.round(y/255*5)+Math.round(A/255*5)},k.ansi16.rgb=function(b){var w=b%10;if(0===w||7===w)return b>50&&(w+=3.5),[w=w/10.5*255,w,w];var y=.5*(1+~~(b>50));return[(1&w)*y*255,(w>>1&1)*y*255,(w>>2&1)*y*255]},k.ansi256.rgb=function(b){if(b>=232){var w=10*(b-232)+8;return[w,w,w]}var y;return b-=16,[Math.floor(b/36)/5*255,Math.floor((y=b%36)/6)/5*255,y%6/5*255]},k.rgb.hex=function(b){var y=(((255&Math.round(b[0]))<<16)+((255&Math.round(b[1]))<<8)+(255&Math.round(b[2]))).toString(16).toUpperCase();return"000000".substring(y.length)+y},k.hex.rgb=function(b){var w=b.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!w)return[0,0,0];var y=w[0];3===w[0].length&&(y=y.split("").map(function(U){return U+U}).join(""));var A=parseInt(y,16);return[A>>16&255,A>>8&255,255&A]},k.rgb.hcg=function(b){var z,w=b[0]/255,y=b[1]/255,A=b[2]/255,M=Math.max(Math.max(w,y),A),S=Math.min(Math.min(w,y),A),P=M-S;return z=P<=0?0:M===w?(y-A)/P%6:M===y?2+(A-w)/P:4+(w-y)/P+4,z/=6,[360*(z%=1),100*P,100*(P<1?S/(1-P):0)]},k.hsl.hcg=function(b){var A,w=b[1]/100,y=b[2]/100,M=0;return(A=y<.5?2*w*y:2*w*(1-y))<1&&(M=(y-.5*A)/(1-A)),[b[0],100*A,100*M]},k.hsv.hcg=function(b){var y=b[2]/100,A=b[1]/100*y,M=0;return A<1&&(M=(y-A)/(1-A)),[b[0],100*A,100*M]},k.hcg.rgb=function(b){var y=b[1]/100,A=b[2]/100;if(0===y)return[255*A,255*A,255*A];var z,M=[0,0,0],S=b[0]/360%1*6,P=S%1,U=1-P;switch(Math.floor(S)){case 0:M[0]=1,M[1]=P,M[2]=0;break;case 1:M[0]=U,M[1]=1,M[2]=0;break;case 2:M[0]=0,M[1]=1,M[2]=P;break;case 3:M[0]=0,M[1]=U,M[2]=1;break;case 4:M[0]=P,M[1]=0,M[2]=1;break;default:M[0]=1,M[1]=0,M[2]=U}return[255*(y*M[0]+(z=(1-y)*A)),255*(y*M[1]+z),255*(y*M[2]+z)]},k.hcg.hsv=function(b){var w=b[1]/100,A=w+b[2]/100*(1-w),M=0;return A>0&&(M=w/A),[b[0],100*M,100*A]},k.hcg.hsl=function(b){var w=b[1]/100,A=b[2]/100*(1-w)+.5*w,M=0;return A>0&&A<.5?M=w/(2*A):A>=.5&&A<1&&(M=w/(2*(1-A))),[b[0],100*M,100*A]},k.hcg.hwb=function(b){var w=b[1]/100,A=w+b[2]/100*(1-w);return[b[0],100*(A-w),100*(1-A)]},k.hwb.hcg=function(b){var A=1-b[2]/100,M=A-b[1]/100,S=0;return M<1&&(S=(A-M)/(1-M)),[b[0],100*M,100*S]},k.apple.rgb=function(b){return[b[0]/65535*255,b[1]/65535*255,b[2]/65535*255]},k.rgb.apple=function(b){return[b[0]/255*65535,b[1]/255*65535,b[2]/255*65535]},k.gray.rgb=function(b){return[b[0]/100*255,b[0]/100*255,b[0]/100*255]},k.gray.hsl=k.gray.hsv=function(b){return[0,0,b[0]]},k.gray.hwb=function(b){return[0,100,b[0]]},k.gray.cmyk=function(b){return[0,0,0,b[0]]},k.gray.lab=function(b){return[b[0],0,0]},k.gray.hex=function(b){var w=255&Math.round(b[0]/100*255),A=((w<<16)+(w<<8)+w).toString(16).toUpperCase();return"000000".substring(A.length)+A},k.rgb.gray=function(b){return[(b[0]+b[1]+b[2])/3/255*100]}},8754:(Qt,V,G)=>{var B=G(94),Q=G(4091),j={};Object.keys(B).forEach(function(x){j[x]={},Object.defineProperty(j[x],"channels",{value:B[x].channels}),Object.defineProperty(j[x],"labels",{value:B[x].labels});var E=Q(x);Object.keys(E).forEach(function(w){var y=E[w];j[x][w]=function I(x){var E=function(b){if(null==b)return b;arguments.length>1&&(b=Array.prototype.slice.call(arguments));var w=x(b);if("object"==typeof w)for(var y=w.length,A=0;A<y;A++)w[A]=Math.round(w[A]);return w};return"conversion"in x&&(E.conversion=x.conversion),E}(y),j[x][w].raw=function F(x){var E=function(b){return null==b?b:(arguments.length>1&&(b=Array.prototype.slice.call(arguments)),x(b))};return"conversion"in x&&(E.conversion=x.conversion),E}(y)})}),Qt.exports=j},4126:Qt=>{"use strict";Qt.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},4091:(Qt,V,G)=>{var B=G(94);function k(I,x){return function(E){return x(I(E))}}function F(I,x){for(var E=[x[I].parent,I],b=B[x[I].parent][I],w=x[I].parent;x[w].parent;)E.unshift(x[w].parent),b=k(B[x[w].parent][w],b),w=x[w].parent;return b.conversion=E,b}Qt.exports=function(I){for(var x=function j(I){var x=function Q(){for(var I={},x=Object.keys(B),E=x.length,b=0;b<E;b++)I[x[b]]={distance:-1,parent:null};return I}(),E=[I];for(x[I].distance=0;E.length;)for(var b=E.pop(),w=Object.keys(B[b]),y=w.length,A=0;A<y;A++){var M=w[A],S=x[M];-1===S.distance&&(S.distance=x[b].distance+1,S.parent=b,E.unshift(M))}return x}(I),E={},b=Object.keys(x),w=b.length,y=0;y<w;y++){var A=b[y];null!==x[A].parent&&(E[A]=F(A,x))}return E}},9914:Qt=>{"use strict";Qt.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},9655:(Qt,V,G)=>{var B=G(9914),Q=G(6931),j=Object.hasOwnProperty,k=Object.create(null);for(var F in B)j.call(B,F)&&(k[B[F]]=F);var I=Qt.exports={to:{},get:{}};function x(b,w,y){return Math.min(Math.max(w,b),y)}function E(b){var w=Math.round(b).toString(16).toUpperCase();return w.length<2?"0"+w:w}I.get=function(b){var y,A;switch(b.substring(0,3).toLowerCase()){case"hsl":y=I.get.hsl(b),A="hsl";break;case"hwb":y=I.get.hwb(b),A="hwb";break;default:y=I.get.rgb(b),A="rgb"}return y?{model:A,value:y}:null},I.get.rgb=function(b){if(!b)return null;var U,z,ie,P=[0,0,0,1];if(U=b.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(ie=U[2],U=U[1],z=0;z<3;z++){var ne=2*z;P[z]=parseInt(U.slice(ne,ne+2),16)}ie&&(P[3]=parseInt(ie,16)/255)}else if(U=b.match(/^#([a-f0-9]{3,4})$/i)){for(ie=(U=U[1])[3],z=0;z<3;z++)P[z]=parseInt(U[z]+U[z],16);ie&&(P[3]=parseInt(ie+ie,16)/255)}else if(U=b.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(z=0;z<3;z++)P[z]=parseInt(U[z+1],0);U[4]&&(P[3]=U[5]?.01*parseFloat(U[4]):parseFloat(U[4]))}else{if(!(U=b.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(U=b.match(/^(\w+)$/))?"transparent"===U[1]?[0,0,0,0]:j.call(B,U[1])?((P=B[U[1]])[3]=1,P):null:null;for(z=0;z<3;z++)P[z]=Math.round(2.55*parseFloat(U[z+1]));U[4]&&(P[3]=U[5]?.01*parseFloat(U[4]):parseFloat(U[4]))}for(z=0;z<3;z++)P[z]=x(P[z],0,255);return P[3]=x(P[3],0,1),P},I.get.hsl=function(b){if(!b)return null;var y=b.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(y){var A=parseFloat(y[4]);return[(parseFloat(y[1])%360+360)%360,x(parseFloat(y[2]),0,100),x(parseFloat(y[3]),0,100),x(isNaN(A)?1:A,0,1)]}return null},I.get.hwb=function(b){if(!b)return null;var y=b.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(y){var A=parseFloat(y[4]);return[(parseFloat(y[1])%360+360)%360,x(parseFloat(y[2]),0,100),x(parseFloat(y[3]),0,100),x(isNaN(A)?1:A,0,1)]}return null},I.to.hex=function(){var b=Q(arguments);return"#"+E(b[0])+E(b[1])+E(b[2])+(b[3]<1?E(Math.round(255*b[3])):"")},I.to.rgb=function(){var b=Q(arguments);return b.length<4||1===b[3]?"rgb("+Math.round(b[0])+", "+Math.round(b[1])+", "+Math.round(b[2])+")":"rgba("+Math.round(b[0])+", "+Math.round(b[1])+", "+Math.round(b[2])+", "+b[3]+")"},I.to.rgb.percent=function(){var b=Q(arguments),w=Math.round(b[0]/255*100),y=Math.round(b[1]/255*100),A=Math.round(b[2]/255*100);return b.length<4||1===b[3]?"rgb("+w+"%, "+y+"%, "+A+"%)":"rgba("+w+"%, "+y+"%, "+A+"%, "+b[3]+")"},I.to.hsl=function(){var b=Q(arguments);return b.length<4||1===b[3]?"hsl("+b[0]+", "+b[1]+"%, "+b[2]+"%)":"hsla("+b[0]+", "+b[1]+"%, "+b[2]+"%, "+b[3]+")"},I.to.hwb=function(){var b=Q(arguments),w="";return b.length>=4&&1!==b[3]&&(w=", "+b[3]),"hwb("+b[0]+", "+b[1]+"%, "+b[2]+"%"+w+")"},I.to.keyword=function(b){return k[b.slice(0,3)]}},3608:(Qt,V,G)=>{"use strict";var B=G(9655),Q=G(8754),j=[].slice,k=["keyword","gray","hex"],F={};Object.keys(Q).forEach(function(S){F[j.call(Q[S].labels).sort().join("")]=S});var I={};function x(S,P){if(!(this instanceof x))return new x(S,P);if(P&&P in k&&(P=null),P&&!(P in Q))throw new Error("Unknown model: "+P);var U,z;if(null==S)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(S instanceof x)this.model=S.model,this.color=S.color.slice(),this.valpha=S.valpha;else if("string"==typeof S){var ie=B.get(S);if(null===ie)throw new Error("Unable to parse color from string: "+S);this.model=ie.model,this.color=ie.value.slice(0,z=Q[this.model].channels),this.valpha="number"==typeof ie.value[z]?ie.value[z]:1}else if(S.length){this.model=P||"rgb";var ne=j.call(S,0,z=Q[this.model].channels);this.color=M(ne,z),this.valpha="number"==typeof S[z]?S[z]:1}else if("number"==typeof S)S&=16777215,this.model="rgb",this.color=[S>>16&255,S>>8&255,255&S],this.valpha=1;else{this.valpha=1;var q=Object.keys(S);"alpha"in S&&(q.splice(q.indexOf("alpha"),1),this.valpha="number"==typeof S.alpha?S.alpha:0);var K=q.sort().join("");if(!(K in F))throw new Error("Unable to parse color from object: "+JSON.stringify(S));this.model=F[K];var ee=Q[this.model].labels,X=[];for(U=0;U<ee.length;U++)X.push(S[ee[U]]);this.color=M(X)}if(I[this.model])for(z=Q[this.model].channels,U=0;U<z;U++){var ae=I[this.model][U];ae&&(this.color[U]=ae(this.color[U]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function w(S,P,U){return(S=Array.isArray(S)?S:[S]).forEach(function(z){(I[z]||(I[z]=[]))[P]=U}),S=S[0],function(z){var ie;return arguments.length?(U&&(z=U(z)),(ie=this[S]()).color[P]=z,ie):(ie=this[S]().color[P],U&&(ie=U(ie)),ie)}}function y(S){return function(P){return Math.max(0,Math.min(S,P))}}function A(S){return Array.isArray(S)?S:[S]}function M(S,P){for(var U=0;U<P;U++)"number"!=typeof S[U]&&(S[U]=0);return S}x.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(S){var P=this.model in B.to?this:this.rgb(),U=1===(P=P.round("number"==typeof S?S:1)).valpha?P.color:P.color.concat(this.valpha);return B.to[P.model](U)},percentString:function(S){var P=this.rgb().round("number"==typeof S?S:1),U=1===P.valpha?P.color:P.color.concat(this.valpha);return B.to.rgb.percent(U)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var S={},P=Q[this.model].channels,U=Q[this.model].labels,z=0;z<P;z++)S[U[z]]=this.color[z];return 1!==this.valpha&&(S.alpha=this.valpha),S},unitArray:function(){var S=this.rgb().color;return S[0]/=255,S[1]/=255,S[2]/=255,1!==this.valpha&&S.push(this.valpha),S},unitObject:function(){var S=this.rgb().object();return S.r/=255,S.g/=255,S.b/=255,1!==this.valpha&&(S.alpha=this.valpha),S},round:function(S){return S=Math.max(S||0,0),new x(this.color.map(function b(S){return function(P){return function E(S,P){return Number(S.toFixed(P))}(P,S)}}(S)).concat(this.valpha),this.model)},alpha:function(S){return arguments.length?new x(this.color.concat(Math.max(0,Math.min(1,S))),this.model):this.valpha},red:w("rgb",0,y(255)),green:w("rgb",1,y(255)),blue:w("rgb",2,y(255)),hue:w(["hsl","hsv","hsl","hwb","hcg"],0,function(S){return(S%360+360)%360}),saturationl:w("hsl",1,y(100)),lightness:w("hsl",2,y(100)),saturationv:w("hsv",1,y(100)),value:w("hsv",2,y(100)),chroma:w("hcg",1,y(100)),gray:w("hcg",2,y(100)),white:w("hwb",1,y(100)),wblack:w("hwb",2,y(100)),cyan:w("cmyk",0,y(100)),magenta:w("cmyk",1,y(100)),yellow:w("cmyk",2,y(100)),black:w("cmyk",3,y(100)),x:w("xyz",0,y(100)),y:w("xyz",1,y(100)),z:w("xyz",2,y(100)),l:w("lab",0,y(100)),a:w("lab",1),b:w("lab",2),keyword:function(S){return arguments.length?new x(S):Q[this.model].keyword(this.color)},hex:function(S){return arguments.length?new x(S):B.to.hex(this.rgb().round().color)},rgbNumber:function(){var S=this.rgb().color;return(255&S[0])<<16|(255&S[1])<<8|255&S[2]},luminosity:function(){for(var S=this.rgb().color,P=[],U=0;U<S.length;U++){var z=S[U]/255;P[U]=z<=.03928?z/12.92:Math.pow((z+.055)/1.055,2.4)}return.2126*P[0]+.7152*P[1]+.0722*P[2]},contrast:function(S){var P=this.luminosity(),U=S.luminosity();return P>U?(P+.05)/(U+.05):(U+.05)/(P+.05)},level:function(S){var P=this.contrast(S);return P>=7.1?"AAA":P>=4.5?"AA":""},isDark:function(){var S=this.rgb().color;return(299*S[0]+587*S[1]+114*S[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var S=this.rgb(),P=0;P<3;P++)S.color[P]=255-S.color[P];return S},lighten:function(S){var P=this.hsl();return P.color[2]+=P.color[2]*S,P},darken:function(S){var P=this.hsl();return P.color[2]-=P.color[2]*S,P},saturate:function(S){var P=this.hsl();return P.color[1]+=P.color[1]*S,P},desaturate:function(S){var P=this.hsl();return P.color[1]-=P.color[1]*S,P},whiten:function(S){var P=this.hwb();return P.color[1]+=P.color[1]*S,P},blacken:function(S){var P=this.hwb();return P.color[2]+=P.color[2]*S,P},grayscale:function(){var S=this.rgb().color,P=.3*S[0]+.59*S[1]+.11*S[2];return x.rgb(P,P,P)},fade:function(S){return this.alpha(this.valpha-this.valpha*S)},opaquer:function(S){return this.alpha(this.valpha+this.valpha*S)},rotate:function(S){var P=this.hsl(),U=P.color[0];return P.color[0]=U=(U=(U+S)%360)<0?360+U:U,P},mix:function(S,P){if(!S||!S.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof S);var U=S.rgb(),z=this.rgb(),ie=void 0===P?.5:P,ne=2*ie-1,q=U.alpha()-z.alpha(),K=((ne*q==-1?ne:(ne+q)/(1+ne*q))+1)/2,ee=1-K;return x.rgb(K*U.red()+ee*z.red(),K*U.green()+ee*z.green(),K*U.blue()+ee*z.blue(),U.alpha()*ie+z.alpha()*(1-ie))}},Object.keys(Q).forEach(function(S){if(-1===k.indexOf(S)){var P=Q[S].channels;x.prototype[S]=function(){if(this.model===S)return new x(this);if(arguments.length)return new x(arguments,S);var U="number"==typeof arguments[P]?P:this.valpha;return new x(A(Q[this.model][S].raw(this.color)).concat(U),S)},x[S]=function(U){return"number"==typeof U&&(U=M(j.call(arguments),P)),new x(U,S)}}}),Qt.exports=x},4188:(Qt,V,G)=>{"use strict";function B(Te,tt){var Mt,Wt=1;function un(){var Le,Xt,zt=Mt.length,Tn=0,gn=0;for(Le=0;Le<zt;++Le)Tn+=(Xt=Mt[Le]).x,gn+=Xt.y;for(Tn=(Tn/zt-Te)*Wt,gn=(gn/zt-tt)*Wt,Le=0;Le<zt;++Le)(Xt=Mt[Le]).x-=Tn,Xt.y-=gn}return null==Te&&(Te=0),null==tt&&(tt=0),un.initialize=function(Le){Mt=Le},un.x=function(Le){return arguments.length?(Te=+Le,un):Te},un.y=function(Le){return arguments.length?(tt=+Le,un):tt},un.strength=function(Le){return arguments.length?(Wt=+Le,un):Wt},un}G.r(V),G.d(V,{forceCenter:()=>B,forceCollide:()=>x,forceLink:()=>w,forceManyBody:()=>Fe,forceRadial:()=>ut,forceSimulation:()=>xt,forceX:()=>Ut,forceY:()=>$e});var Q=G(331);function j(Te){return function(){return Te}}function k(Te){return 1e-6*(Te()-.5)}function F(Te){return Te.x+Te.vx}function I(Te){return Te.y+Te.vy}function x(Te){var tt,Mt,Wt,un=1,Le=1;function zt(){for(var gn,ir,cr,Bn,xr,jn,Rn,kn=tt.length,er=0;er<Le;++er)for(ir=(0,Q.Z)(tt,F,I).visitAfter(Xt),gn=0;gn<kn;++gn)Rn=(jn=Mt[(cr=tt[gn]).index])*jn,Bn=cr.x+cr.vx,xr=cr.y+cr.vy,ir.visit(Mr);function Mr(yr,gr,Oi,Ir,De){var wi=yr.data,xo=yr.r,mr=jn+xo;if(!wi)return gr>Bn+mr||Ir<Bn-mr||Oi>xr+mr||De<xr-mr;if(wi.index>cr.index){var Wr=Bn-wi.x-wi.vx,Vr=xr-wi.y-wi.vy,Ae=Wr*Wr+Vr*Vr;Ae<mr*mr&&(0===Wr&&(Ae+=(Wr=k(Wt))*Wr),0===Vr&&(Ae+=(Vr=k(Wt))*Vr),Ae=(mr-(Ae=Math.sqrt(Ae)))/Ae*un,cr.vx+=(Wr*=Ae)*(mr=(xo*=xo)/(Rn+xo)),cr.vy+=(Vr*=Ae)*mr,wi.vx-=Wr*(mr=1-mr),wi.vy-=Vr*mr)}}}function Xt(gn){if(gn.data)return gn.r=Mt[gn.data.index];for(var kn=gn.r=0;kn<4;++kn)gn[kn]&&gn[kn].r>gn.r&&(gn.r=gn[kn].r)}function Tn(){if(tt){var gn,ir,kn=tt.length;for(Mt=new Array(kn),gn=0;gn<kn;++gn)Mt[(ir=tt[gn]).index]=+Te(ir,gn,tt)}}return"function"!=typeof Te&&(Te=j(null==Te?1:+Te)),zt.initialize=function(gn,kn){tt=gn,Wt=kn,Tn()},zt.iterations=function(gn){return arguments.length?(Le=+gn,zt):Le},zt.strength=function(gn){return arguments.length?(un=+gn,zt):un},zt.radius=function(gn){return arguments.length?(Te="function"==typeof gn?gn:j(+gn),Tn(),zt):Te},zt}function E(Te){return Te.index}function b(Te,tt){var Mt=Te.get(tt);if(!Mt)throw new Error("node not found: "+tt);return Mt}function w(Te){var Wt,Le,zt,Xt,Tn,gn,tt=E,Mt=function ir(Rn){return 1/Math.min(Xt[Rn.source.index],Xt[Rn.target.index])},un=j(30),kn=1;function cr(Rn){for(var er=0,Mr=Te.length;er<kn;++er)for(var gr,Oi,Ir,De,wi,xo,mr,yr=0;yr<Mr;++yr)De=(Ir=(gr=Te[yr]).target).x+Ir.vx-(Oi=gr.source).x-Oi.vx||k(gn),wi=Ir.y+Ir.vy-Oi.y-Oi.vy||k(gn),wi*=xo=((xo=Math.sqrt(De*De+wi*wi))-Le[yr])/xo*Rn*Wt[yr],Ir.vx-=(De*=xo)*(mr=Tn[yr]),Ir.vy-=wi*mr,Oi.vx+=De*(mr=1-mr),Oi.vy+=wi*mr}function Bn(){if(zt){var Rn,gr,er=zt.length,Mr=Te.length,yr=new Map(zt.map((Oi,Ir)=>[tt(Oi,Ir,zt),Oi]));for(Rn=0,Xt=new Array(er);Rn<Mr;++Rn)(gr=Te[Rn]).index=Rn,"object"!=typeof gr.source&&(gr.source=b(yr,gr.source)),"object"!=typeof gr.target&&(gr.target=b(yr,gr.target)),Xt[gr.source.index]=(Xt[gr.source.index]||0)+1,Xt[gr.target.index]=(Xt[gr.target.index]||0)+1;for(Rn=0,Tn=new Array(Mr);Rn<Mr;++Rn)Tn[Rn]=Xt[(gr=Te[Rn]).source.index]/(Xt[gr.source.index]+Xt[gr.target.index]);Wt=new Array(Mr),xr(),Le=new Array(Mr),jn()}}function xr(){if(zt)for(var Rn=0,er=Te.length;Rn<er;++Rn)Wt[Rn]=+Mt(Te[Rn],Rn,Te)}function jn(){if(zt)for(var Rn=0,er=Te.length;Rn<er;++Rn)Le[Rn]=+un(Te[Rn],Rn,Te)}return null==Te&&(Te=[]),cr.initialize=function(Rn,er){zt=Rn,gn=er,Bn()},cr.links=function(Rn){return arguments.length?(Te=Rn,Bn(),cr):Te},cr.id=function(Rn){return arguments.length?(tt=Rn,cr):tt},cr.iterations=function(Rn){return arguments.length?(kn=+Rn,cr):kn},cr.strength=function(Rn){return arguments.length?(Mt="function"==typeof Rn?Rn:j(+Rn),xr(),cr):Mt},cr.distance=function(Rn){return arguments.length?(un="function"==typeof Rn?Rn:j(+Rn),jn(),cr):un},cr}var y={value:()=>{}};function A(){for(var Wt,Te=0,tt=arguments.length,Mt={};Te<tt;++Te){if(!(Wt=arguments[Te]+"")||Wt in Mt||/[\s.]/.test(Wt))throw new Error("illegal type: "+Wt);Mt[Wt]=[]}return new M(Mt)}function M(Te){this._=Te}function S(Te,tt){return Te.trim().split(/^|\s+/).map(function(Mt){var Wt="",un=Mt.indexOf(".");if(un>=0&&(Wt=Mt.slice(un+1),Mt=Mt.slice(0,un)),Mt&&!tt.hasOwnProperty(Mt))throw new Error("unknown type: "+Mt);return{type:Mt,name:Wt}})}function P(Te,tt){for(var un,Mt=0,Wt=Te.length;Mt<Wt;++Mt)if((un=Te[Mt]).name===tt)return un.value}function U(Te,tt,Mt){for(var Wt=0,un=Te.length;Wt<un;++Wt)if(Te[Wt].name===tt){Te[Wt]=y,Te=Te.slice(0,Wt).concat(Te.slice(Wt+1));break}return null!=Mt&&Te.push({name:tt,value:Mt}),Te}M.prototype=A.prototype={constructor:M,on:function(Te,tt){var un,Mt=this._,Wt=S(Te+"",Mt),Le=-1,zt=Wt.length;if(!(arguments.length<2)){if(null!=tt&&"function"!=typeof tt)throw new Error("invalid callback: "+tt);for(;++Le<zt;)if(un=(Te=Wt[Le]).type)Mt[un]=U(Mt[un],Te.name,tt);else if(null==tt)for(un in Mt)Mt[un]=U(Mt[un],Te.name,null);return this}for(;++Le<zt;)if((un=(Te=Wt[Le]).type)&&(un=P(Mt[un],Te.name)))return un},copy:function(){var Te={},tt=this._;for(var Mt in tt)Te[Mt]=tt[Mt].slice();return new M(Te)},call:function(Te,tt){if((un=arguments.length-2)>0)for(var un,Le,Mt=new Array(un),Wt=0;Wt<un;++Wt)Mt[Wt]=arguments[Wt+2];if(!this._.hasOwnProperty(Te))throw new Error("unknown type: "+Te);for(Wt=0,un=(Le=this._[Te]).length;Wt<un;++Wt)Le[Wt].value.apply(tt,Mt)},apply:function(Te,tt,Mt){if(!this._.hasOwnProperty(Te))throw new Error("unknown type: "+Te);for(var Wt=this._[Te],un=0,Le=Wt.length;un<Le;++un)Wt[un].value.apply(tt,Mt)}};const z=A;var ee,X,ie=0,ne=0,q=0,ae=0,re=0,oe=0,ve="object"==typeof performance&&performance.now?performance:Date,we="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(Te){setTimeout(Te,17)};function _e(){return re||(we(me),re=ve.now()+oe)}function me(){re=0}function Ce(){this._call=this._time=this._next=null}function fe(Te,tt,Mt){var Wt=new Ce;return Wt.restart(Te,tt,Mt),Wt}function te(){re=(ae=ve.now())+oe,ie=ne=0;try{!function be(){_e(),++ie;for(var tt,Te=ee;Te;)(tt=re-Te._time)>=0&&Te._call.call(null,tt),Te=Te._next;--ie}()}finally{ie=0,function ke(){for(var Te,Mt,tt=ee,Wt=1/0;tt;)tt._call?(Wt>tt._time&&(Wt=tt._time),Te=tt,tt=tt._next):(Mt=tt._next,tt._next=null,tt=Te?Te._next=Mt:ee=Mt);X=Te,Ze(Wt)}(),re=0}}function de(){var Te=ve.now(),tt=Te-ae;tt>1e3&&(oe-=tt,ae=Te)}function Ze(Te){ie||(ne&&(ne=clearTimeout(ne)),Te-re>24?(Te<1/0&&(ne=setTimeout(te,Te-ve.now()-oe)),q&&(q=clearInterval(q))):(q||(ae=ve.now(),q=setInterval(de,1e3)),ie=1,we(te)))}Ce.prototype=fe.prototype={constructor:Ce,restart:function(Te,tt,Mt){if("function"!=typeof Te)throw new TypeError("callback is not a function");Mt=(null==Mt?_e():+Mt)+(null==tt?0:+tt),!this._next&&X!==this&&(X?X._next=this:ee=this,X=this),this._call=Te,this._time=Mt,Ze()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ze())}};const Ft=4294967296;function Xe(Te){return Te.x}function yt(Te){return Te.y}var pt=Math.PI*(3-Math.sqrt(5));function xt(Te){var tt,Mt=1,Wt=.001,un=1-Math.pow(Wt,1/300),Le=0,zt=.6,Xt=new Map,Tn=fe(ir),gn=z("tick","end"),kn=function Pt(){let Te=1;return()=>(Te=(1664525*Te+1013904223)%Ft)/Ft}();function ir(){cr(),gn.call("tick",tt),Mt<Wt&&(Tn.stop(),gn.call("end",tt))}function cr(jn){var Rn,Mr,er=Te.length;void 0===jn&&(jn=1);for(var yr=0;yr<jn;++yr)for(Mt+=(Le-Mt)*un,Xt.forEach(function(gr){gr(Mt)}),Rn=0;Rn<er;++Rn)null==(Mr=Te[Rn]).fx?Mr.x+=Mr.vx*=zt:(Mr.x=Mr.fx,Mr.vx=0),null==Mr.fy?Mr.y+=Mr.vy*=zt:(Mr.y=Mr.fy,Mr.vy=0);return tt}function Bn(){for(var er,jn=0,Rn=Te.length;jn<Rn;++jn){if((er=Te[jn]).index=jn,null!=er.fx&&(er.x=er.fx),null!=er.fy&&(er.y=er.fy),isNaN(er.x)||isNaN(er.y)){var Mr=10*Math.sqrt(.5+jn),yr=jn*pt;er.x=Mr*Math.cos(yr),er.y=Mr*Math.sin(yr)}(isNaN(er.vx)||isNaN(er.vy))&&(er.vx=er.vy=0)}}function xr(jn){return jn.initialize&&jn.initialize(Te,kn),jn}return null==Te&&(Te=[]),Bn(),tt={tick:cr,restart:function(){return Tn.restart(ir),tt},stop:function(){return Tn.stop(),tt},nodes:function(jn){return arguments.length?(Te=jn,Bn(),Xt.forEach(xr),tt):Te},alpha:function(jn){return arguments.length?(Mt=+jn,tt):Mt},alphaMin:function(jn){return arguments.length?(Wt=+jn,tt):Wt},alphaDecay:function(jn){return arguments.length?(un=+jn,tt):+un},alphaTarget:function(jn){return arguments.length?(Le=+jn,tt):Le},velocityDecay:function(jn){return arguments.length?(zt=1-jn,tt):1-zt},randomSource:function(jn){return arguments.length?(kn=jn,Xt.forEach(xr),tt):kn},force:function(jn,Rn){return arguments.length>1?(null==Rn?Xt.delete(jn):Xt.set(jn,xr(Rn)),tt):Xt.get(jn)},find:function(jn,Rn,er){var gr,Oi,Ir,De,wi,Mr=0,yr=Te.length;for(null==er?er=1/0:er*=er,Mr=0;Mr<yr;++Mr)(Ir=(gr=jn-(De=Te[Mr]).x)*gr+(Oi=Rn-De.y)*Oi)<er&&(wi=De,er=Ir);return wi},on:function(jn,Rn){return arguments.length>1?(gn.on(jn,Rn),tt):gn.on(jn)}}}function Fe(){var Te,tt,Mt,Wt,Le,un=j(-30),zt=1,Xt=1/0,Tn=.81;function gn(Bn){var xr,jn=Te.length,Rn=(0,Q.Z)(Te,Xe,yt).visitAfter(ir);for(Wt=Bn,xr=0;xr<jn;++xr)tt=Te[xr],Rn.visit(cr)}function kn(){if(Te){var Bn,jn,xr=Te.length;for(Le=new Array(xr),Bn=0;Bn<xr;++Bn)Le[(jn=Te[Bn]).index]=+un(jn,Bn,Te)}}function ir(Bn){var jn,Rn,Mr,yr,gr,xr=0,er=0;if(Bn.length){for(Mr=yr=gr=0;gr<4;++gr)(jn=Bn[gr])&&(Rn=Math.abs(jn.value))&&(xr+=jn.value,er+=Rn,Mr+=Rn*jn.x,yr+=Rn*jn.y);Bn.x=Mr/er,Bn.y=yr/er}else{(jn=Bn).x=jn.data.x,jn.y=jn.data.y;do{xr+=Le[jn.data.index]}while(jn=jn.next)}Bn.value=xr}function cr(Bn,xr,jn,Rn){if(!Bn.value)return!0;var er=Bn.x-tt.x,Mr=Bn.y-tt.y,yr=Rn-xr,gr=er*er+Mr*Mr;if(yr*yr/Tn<gr)return gr<Xt&&(0===er&&(gr+=(er=k(Mt))*er),0===Mr&&(gr+=(Mr=k(Mt))*Mr),gr<zt&&(gr=Math.sqrt(zt*gr)),tt.vx+=er*Bn.value*Wt/gr,tt.vy+=Mr*Bn.value*Wt/gr),!0;if(!(Bn.length||gr>=Xt)){(Bn.data!==tt||Bn.next)&&(0===er&&(gr+=(er=k(Mt))*er),0===Mr&&(gr+=(Mr=k(Mt))*Mr),gr<zt&&(gr=Math.sqrt(zt*gr)));do{Bn.data!==tt&&(tt.vx+=er*(yr=Le[Bn.data.index]*Wt/gr),tt.vy+=Mr*yr)}while(Bn=Bn.next)}}return gn.initialize=function(Bn,xr){Te=Bn,Mt=xr,kn()},gn.strength=function(Bn){return arguments.length?(un="function"==typeof Bn?Bn:j(+Bn),kn(),gn):un},gn.distanceMin=function(Bn){return arguments.length?(zt=Bn*Bn,gn):Math.sqrt(zt)},gn.distanceMax=function(Bn){return arguments.length?(Xt=Bn*Bn,gn):Math.sqrt(Xt)},gn.theta=function(Bn){return arguments.length?(Tn=Bn*Bn,gn):Math.sqrt(Tn)},gn}function ut(Te,tt,Mt){var Wt,Le,zt,un=j(.1);function Xt(gn){for(var kn=0,ir=Wt.length;kn<ir;++kn){var cr=Wt[kn],Bn=cr.x-tt||1e-6,xr=cr.y-Mt||1e-6,jn=Math.sqrt(Bn*Bn+xr*xr),Rn=(zt[kn]-jn)*Le[kn]*gn/jn;cr.vx+=Bn*Rn,cr.vy+=xr*Rn}}function Tn(){if(Wt){var gn,kn=Wt.length;for(Le=new Array(kn),zt=new Array(kn),gn=0;gn<kn;++gn)zt[gn]=+Te(Wt[gn],gn,Wt),Le[gn]=isNaN(zt[gn])?0:+un(Wt[gn],gn,Wt)}}return"function"!=typeof Te&&(Te=j(+Te)),null==tt&&(tt=0),null==Mt&&(Mt=0),Xt.initialize=function(gn){Wt=gn,Tn()},Xt.strength=function(gn){return arguments.length?(un="function"==typeof gn?gn:j(+gn),Tn(),Xt):un},Xt.radius=function(gn){return arguments.length?(Te="function"==typeof gn?gn:j(+gn),Tn(),Xt):Te},Xt.x=function(gn){return arguments.length?(tt=+gn,Xt):tt},Xt.y=function(gn){return arguments.length?(Mt=+gn,Xt):Mt},Xt}function Ut(Te){var Mt,Wt,un,tt=j(.1);function Le(Xt){for(var kn,Tn=0,gn=Mt.length;Tn<gn;++Tn)(kn=Mt[Tn]).vx+=(un[Tn]-kn.x)*Wt[Tn]*Xt}function zt(){if(Mt){var Xt,Tn=Mt.length;for(Wt=new Array(Tn),un=new Array(Tn),Xt=0;Xt<Tn;++Xt)Wt[Xt]=isNaN(un[Xt]=+Te(Mt[Xt],Xt,Mt))?0:+tt(Mt[Xt],Xt,Mt)}}return"function"!=typeof Te&&(Te=j(null==Te?0:+Te)),Le.initialize=function(Xt){Mt=Xt,zt()},Le.strength=function(Xt){return arguments.length?(tt="function"==typeof Xt?Xt:j(+Xt),zt(),Le):tt},Le.x=function(Xt){return arguments.length?(Te="function"==typeof Xt?Xt:j(+Xt),zt(),Le):Te},Le}function $e(Te){var Mt,Wt,un,tt=j(.1);function Le(Xt){for(var kn,Tn=0,gn=Mt.length;Tn<gn;++Tn)(kn=Mt[Tn]).vy+=(un[Tn]-kn.y)*Wt[Tn]*Xt}function zt(){if(Mt){var Xt,Tn=Mt.length;for(Wt=new Array(Tn),un=new Array(Tn),Xt=0;Xt<Tn;++Xt)Wt[Xt]=isNaN(un[Xt]=+Te(Mt[Xt],Xt,Mt))?0:+tt(Mt[Xt],Xt,Mt)}}return"function"!=typeof Te&&(Te=j(null==Te?0:+Te)),Le.initialize=function(Xt){Mt=Xt,zt()},Le.strength=function(Xt){return arguments.length?(tt="function"==typeof Xt?Xt:j(+Xt),zt(),Le):tt},Le.y=function(Xt){return arguments.length?(Te="function"==typeof Xt?Xt:j(+Xt),zt(),Le):Te},Le}},3248:(Qt,V,G)=>{"use strict";G.r(V),G.d(V,{quadtree:()=>B.Z});var B=G(331)},331:(Qt,V,G)=>{"use strict";function Q(X,ae,re,oe){if(isNaN(ae)||isNaN(re))return X;var ve,te,de,ke,Ze,We,bt,Ft,Pt,we=X._root,_e={data:oe},me=X._x0,Ce=X._y0,fe=X._x1,be=X._y1;if(!we)return X._root=_e,X;for(;we.length;)if((We=ae>=(te=(me+fe)/2))?me=te:fe=te,(bt=re>=(de=(Ce+be)/2))?Ce=de:be=de,ve=we,!(we=we[Ft=bt<<1|We]))return ve[Ft]=_e,X;if(ke=+X._x.call(null,we.data),Ze=+X._y.call(null,we.data),ae===ke&&re===Ze)return _e.next=we,ve?ve[Ft]=_e:X._root=_e,X;do{ve=ve?ve[Ft]=new Array(4):X._root=new Array(4),(We=ae>=(te=(me+fe)/2))?me=te:fe=te,(bt=re>=(de=(Ce+be)/2))?Ce=de:be=de}while((Ft=bt<<1|We)==(Pt=(Ze>=de)<<1|ke>=te));return ve[Pt]=we,ve[Ft]=_e,X}function x(X,ae,re,oe,ve){this.node=X,this.x0=ae,this.y0=re,this.x1=oe,this.y1=ve}function P(X){return X[0]}function z(X){return X[1]}function ne(X,ae,re){var oe=new q(ae??P,re??z,NaN,NaN,NaN,NaN);return null==X?oe:oe.addAll(X)}function q(X,ae,re,oe,ve,we){this._x=X,this._y=ae,this._x0=re,this._y0=oe,this._x1=ve,this._y1=we,this._root=void 0}function K(X){for(var ae={data:X.data},re=ae;X=X.next;)re=re.next={data:X.data};return ae}G.d(V,{Z:()=>ne});var ee=ne.prototype=q.prototype;ee.copy=function(){var re,oe,X=new q(this._x,this._y,this._x0,this._y0,this._x1,this._y1),ae=this._root;if(!ae)return X;if(!ae.length)return X._root=K(ae),X;for(re=[{source:ae,target:X._root=new Array(4)}];ae=re.pop();)for(var ve=0;ve<4;++ve)(oe=ae.source[ve])&&(oe.length?re.push({source:oe,target:ae.target[ve]=new Array(4)}):ae.target[ve]=K(oe));return X},ee.add=function B(X){const ae=+this._x.call(null,X),re=+this._y.call(null,X);return Q(this.cover(ae,re),ae,re,X)},ee.addAll=function j(X){var ae,re,ve,we,oe=X.length,_e=new Array(oe),me=new Array(oe),Ce=1/0,fe=1/0,be=-1/0,te=-1/0;for(re=0;re<oe;++re)isNaN(ve=+this._x.call(null,ae=X[re]))||isNaN(we=+this._y.call(null,ae))||(_e[re]=ve,me[re]=we,ve<Ce&&(Ce=ve),ve>be&&(be=ve),we<fe&&(fe=we),we>te&&(te=we));if(Ce>be||fe>te)return this;for(this.cover(Ce,fe).cover(be,te),re=0;re<oe;++re)Q(this,_e[re],me[re],X[re]);return this},ee.cover=function k(X,ae){if(isNaN(X=+X)||isNaN(ae=+ae))return this;var re=this._x0,oe=this._y0,ve=this._x1,we=this._y1;if(isNaN(re))ve=(re=Math.floor(X))+1,we=(oe=Math.floor(ae))+1;else{for(var Ce,fe,_e=ve-re||1,me=this._root;re>X||X>=ve||oe>ae||ae>=we;)switch(fe=(ae<oe)<<1|X<re,Ce=new Array(4),Ce[fe]=me,me=Ce,_e*=2,fe){case 0:ve=re+_e,we=oe+_e;break;case 1:re=ve-_e,we=oe+_e;break;case 2:ve=re+_e,oe=we-_e;break;case 3:re=ve-_e,oe=we-_e}this._root&&this._root.length&&(this._root=me)}return this._x0=re,this._y0=oe,this._x1=ve,this._y1=we,this},ee.data=function F(){var X=[];return this.visit(function(ae){if(!ae.length)do{X.push(ae.data)}while(ae=ae.next)}),X},ee.extent=function I(X){return arguments.length?this.cover(+X[0][0],+X[0][1]).cover(+X[1][0],+X[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},ee.find=function E(X,ae,re){var oe,_e,me,Ce,fe,Ze,We,ve=this._x0,we=this._y0,be=this._x1,te=this._y1,de=[],ke=this._root;for(ke&&de.push(new x(ke,ve,we,be,te)),null==re?re=1/0:(ve=X-re,we=ae-re,be=X+re,te=ae+re,re*=re);Ze=de.pop();)if(!(!(ke=Ze.node)||(_e=Ze.x0)>be||(me=Ze.y0)>te||(Ce=Ze.x1)<ve||(fe=Ze.y1)<we))if(ke.length){var bt=(_e+Ce)/2,Ft=(me+fe)/2;de.push(new x(ke[3],bt,Ft,Ce,fe),new x(ke[2],_e,Ft,bt,fe),new x(ke[1],bt,me,Ce,Ft),new x(ke[0],_e,me,bt,Ft)),(We=(ae>=Ft)<<1|X>=bt)&&(Ze=de[de.length-1],de[de.length-1]=de[de.length-1-We],de[de.length-1-We]=Ze)}else{var Pt=X-+this._x.call(null,ke.data),Xe=ae-+this._y.call(null,ke.data),yt=Pt*Pt+Xe*Xe;if(yt<re){var Ct=Math.sqrt(re=yt);ve=X-Ct,we=ae-Ct,be=X+Ct,te=ae+Ct,oe=ke.data}}return oe},ee.remove=function b(X){if(isNaN(be=+this._x.call(null,X))||isNaN(te=+this._y.call(null,X)))return this;var ae,oe,ve,we,be,te,de,ke,Ze,We,bt,Ft,re=this._root,_e=this._x0,me=this._y0,Ce=this._x1,fe=this._y1;if(!re)return this;if(re.length)for(;;){if((Ze=be>=(de=(_e+Ce)/2))?_e=de:Ce=de,(We=te>=(ke=(me+fe)/2))?me=ke:fe=ke,ae=re,!(re=re[bt=We<<1|Ze]))return this;if(!re.length)break;(ae[bt+1&3]||ae[bt+2&3]||ae[bt+3&3])&&(oe=ae,Ft=bt)}for(;re.data!==X;)if(ve=re,!(re=re.next))return this;return(we=re.next)&&delete re.next,ve?(we?ve.next=we:delete ve.next,this):ae?(we?ae[bt]=we:delete ae[bt],(re=ae[0]||ae[1]||ae[2]||ae[3])&&re===(ae[3]||ae[2]||ae[1]||ae[0])&&!re.length&&(oe?oe[Ft]=re:this._root=re),this):(this._root=we,this)},ee.removeAll=function w(X){for(var ae=0,re=X.length;ae<re;++ae)this.remove(X[ae]);return this},ee.root=function y(){return this._root},ee.size=function A(){var X=0;return this.visit(function(ae){if(!ae.length)do{++X}while(ae=ae.next)}),X},ee.visit=function M(X){var re,ve,we,_e,me,Ce,ae=[],oe=this._root;for(oe&&ae.push(new x(oe,this._x0,this._y0,this._x1,this._y1));re=ae.pop();)if(!X(oe=re.node,we=re.x0,_e=re.y0,me=re.x1,Ce=re.y1)&&oe.length){var fe=(we+me)/2,be=(_e+Ce)/2;(ve=oe[3])&&ae.push(new x(ve,fe,be,me,Ce)),(ve=oe[2])&&ae.push(new x(ve,we,be,fe,Ce)),(ve=oe[1])&&ae.push(new x(ve,fe,_e,me,be)),(ve=oe[0])&&ae.push(new x(ve,we,_e,fe,be))}return this},ee.visitAfter=function S(X){var oe,ae=[],re=[];for(this._root&&ae.push(new x(this._root,this._x0,this._y0,this._x1,this._y1));oe=ae.pop();){var ve=oe.node;if(ve.length){var we,_e=oe.x0,me=oe.y0,Ce=oe.x1,fe=oe.y1,be=(_e+Ce)/2,te=(me+fe)/2;(we=ve[0])&&ae.push(new x(we,_e,me,be,te)),(we=ve[1])&&ae.push(new x(we,be,me,Ce,te)),(we=ve[2])&&ae.push(new x(we,_e,te,be,fe)),(we=ve[3])&&ae.push(new x(we,be,te,Ce,fe))}re.push(oe)}for(;oe=re.pop();)X(oe.node,oe.x0,oe.y0,oe.x1,oe.y1);return this},ee.x=function U(X){return arguments.length?(this._x=X,this):this._x},ee.y=function ie(X){return arguments.length?(this._y=X,this):this._y}},7645:(Qt,V,G)=>{"use strict";G.r(V),G.d(V,{BRIDGE_GRAPH_NAME:()=>F,GraphType:()=>E,HierarchyNodeType:()=>b,InclusionType:()=>x,LAYOUT_CONFIG:()=>B,NodeType:()=>I,ROOT_NAME:()=>k,buildGraph:()=>wn,flatGraph:()=>Hn,getEdges:()=>Xn,mergeConfig:()=>Q});const B={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function Q(v={},C=B){var H,J,se,he;const ye=JSON.parse(JSON.stringify(C)),Se=(null===(H=v?.graph)||void 0===H?void 0:H.meta)||{},Ie=(null===(J=v?.subScene)||void 0===J?void 0:J.meta)||{},Be=(null===(se=v?.nodeSize)||void 0===se?void 0:se.meta)||{},nt=(null===(he=v?.nodeSize)||void 0===he?void 0:he.node)||{},Qe=ye.nodeSize.bridge;return{graph:{meta:Object.assign(ye.graph.meta,Se)},subScene:{meta:Object.assign(ye.subScene.meta,Ie)},nodeSize:{meta:Object.assign(ye.nodeSize.meta,Be),node:Object.assign(ye.nodeSize.node,nt),bridge:Qe}}}function j(v){return`\u25ec${v}\u25ec`}const k=j("ROOT"),F=j("BRIDGE_GRAPH");var I,x,E,b,v;(v=I||(I={}))[v.META=0]="META",v[v.NODE=1]="NODE",v[v.BRIDGE=2]="BRIDGE",function(v){v[v.INCLUDE=0]="INCLUDE",v[v.EXCLUDE=1]="EXCLUDE",v[v.UNSPECIFIED=2]="UNSPECIFIED"}(x||(x={})),function(v){v[v.META=0]="META",v[v.CORE=1]="CORE",v[v.BRIDGE=2]="BRIDGE"}(E||(E={})),function(v){v[v.META=0]="META",v[v.OP=1]="OP",v[v.SERIES=2]="SERIES"}(b||(b={}));var w=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function y(v,C){return v(C={exports:{}},C.exports),C.exports}var M=function(v,C){return v===C||v!=v&&C!=C},S=function(v,C){for(var H=v.length;H--;)if(M(v[H][0],C))return H;return-1},P=Array.prototype.splice;function q(v){var C=-1,H=null==v?0:v.length;for(this.clear();++C<H;){var J=v[C];this.set(J[0],J[1])}}q.prototype.clear=function(){this.__data__=[],this.size=0},q.prototype.delete=function(v){var C=this.__data__,H=S(C,v);return!(H<0||(H==C.length-1?C.pop():P.call(C,H,1),--this.size,0))},q.prototype.get=function(v){var C=this.__data__,H=S(C,v);return H<0?void 0:C[H][1]},q.prototype.has=function(v){return S(this.__data__,v)>-1},q.prototype.set=function(v,C){var H=this.__data__,J=S(H,v);return J<0?(++this.size,H.push([v,C])):H[J][1]=C,this};var Ft,K=q,oe="object"==typeof w&&w&&w.Object===Object&&w,ve="object"==typeof self&&self&&self.Object===Object&&self,we=oe||ve||Function("return this")(),_e=we.Symbol,me=Object.prototype,Ce=me.hasOwnProperty,fe=me.toString,be=_e?_e.toStringTag:void 0,de=Object.prototype.toString,Ze=_e?_e.toStringTag:void 0,We=function(v){return null==v?void 0===v?"[object Undefined]":"[object Null]":Ze&&Ze in Object(v)?function(v){var C=Ce.call(v,be),H=v[be];try{v[be]=void 0;var J=!0}catch{}var se=fe.call(v);return J&&(C?v[be]=H:delete v[be]),se}(v):function(v){return de.call(v)}(v)},bt=function(v){var C=typeof v;return null!=v&&("object"==C||"function"==C)},Pt=function(v){if(!bt(v))return!1;var C=We(v);return"[object Function]"==C||"[object GeneratorFunction]"==C||"[object AsyncFunction]"==C||"[object Proxy]"==C},Xe=we["__core-js_shared__"],yt=(Ft=/[^.]+$/.exec(Xe&&Xe.keys&&Xe.keys.IE_PROTO||""))?"Symbol(src)_1."+Ft:"",pt=Function.prototype.toString,xt=function(v){if(null!=v){try{return pt.call(v)}catch{}try{return v+""}catch{}}return""},Fe=/^\[object .+?Constructor\]$/,tt=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),un=function(v,C){var H=function(v,C){return v?.[C]}(v,C);return function(v){return!(!bt(v)||function(v){return!!yt&&yt in v}(v))&&(Pt(v)?tt:Fe).test(xt(v))}(H)?H:void 0},Le=un(we,"Map"),zt=un(Object,"create"),gn=Object.prototype.hasOwnProperty,ir=Object.prototype.hasOwnProperty;function xr(v){var C=-1,H=null==v?0:v.length;for(this.clear();++C<H;){var J=v[C];this.set(J[0],J[1])}}xr.prototype.clear=function(){this.__data__=zt?zt(null):{},this.size=0},xr.prototype.delete=function(v){var C=this.has(v)&&delete this.__data__[v];return this.size-=C?1:0,C},xr.prototype.get=function(v){var C=this.__data__;if(zt){var H=C[v];return"__lodash_hash_undefined__"===H?void 0:H}return gn.call(C,v)?C[v]:void 0},xr.prototype.has=function(v){var C=this.__data__;return zt?void 0!==C[v]:ir.call(C,v)},xr.prototype.set=function(v,C){var H=this.__data__;return this.size+=this.has(v)?0:1,H[v]=zt&&void 0===C?"__lodash_hash_undefined__":C,this};var jn=xr,Mr=function(v,C){var H=v.__data__;return function(v){var C=typeof v;return"string"==C||"number"==C||"symbol"==C||"boolean"==C?"__proto__"!==v:null===v}(C)?H["string"==typeof C?"string":"hash"]:H.map};function De(v){var C=-1,H=null==v?0:v.length;for(this.clear();++C<H;){var J=v[C];this.set(J[0],J[1])}}De.prototype.clear=function(){this.size=0,this.__data__={hash:new jn,map:new(Le||K),string:new jn}},De.prototype.delete=function(v){var C=Mr(this,v).delete(v);return this.size-=C?1:0,C},De.prototype.get=function(v){return Mr(this,v).get(v)},De.prototype.has=function(v){return Mr(this,v).has(v)},De.prototype.set=function(v,C){var H=Mr(this,v),J=H.size;return H.set(v,C),this.size+=H.size==J?0:1,this};var wi=De;function mr(v){var C=this.__data__=new K(v);this.size=C.size}mr.prototype.clear=function(){this.__data__=new K,this.size=0},mr.prototype.delete=function(v){var C=this.__data__,H=C.delete(v);return this.size=C.size,H},mr.prototype.get=function(v){return this.__data__.get(v)},mr.prototype.has=function(v){return this.__data__.has(v)},mr.prototype.set=function(v,C){var H=this.__data__;if(H instanceof K){var J=H.__data__;if(!Le||J.length<199)return J.push([v,C]),this.size=++H.size,this;H=this.__data__=new wi(J)}return H.set(v,C),this.size=H.size,this};var Wr=mr,Vr=function(v,C){for(var H=-1,J=null==v?0:v.length;++H<J&&!1!==C(v[H],H,v););return v},Ae=function(){try{var v=un(Object,"defineProperty");return v({},"",{}),v}catch{}}(),Y=function(v,C,H){"__proto__"==C&&Ae?Ae(v,C,{configurable:!0,enumerable:!0,value:H,writable:!0}):v[C]=H},W=Object.prototype.hasOwnProperty,T=function(v,C,H){var J=v[C];W.call(v,C)&&M(J,H)&&(void 0!==H||C in v)||Y(v,C,H)},$=function(v,C,H,J){var se=!H;H||(H={});for(var he=-1,ye=C.length;++he<ye;){var Se=C[he],Ie=J?J(H[Se],v[Se],Se,H,v):void 0;void 0===Ie&&(Ie=v[Se]),se?Y(H,Se,Ie):T(H,Se,Ie)}return H},je=function(v){return null!=v&&"object"==typeof v},Ge=function(v){return je(v)&&"[object Arguments]"==We(v)},rt=Object.prototype,it=rt.hasOwnProperty,$t=rt.propertyIsEnumerable,R=Ge(function(){return arguments}())?Ge:function(v){return je(v)&&it.call(v,"callee")&&!$t.call(v,"callee")},He=Array.isArray,ze=function(){return!1},Je=y(function(v,C){var H=C&&!C.nodeType&&C,J=H&&v&&!v.nodeType&&v,se=J&&J.exports===H?we.Buffer:void 0;v.exports=(se?se.isBuffer:void 0)||ze}),gt=/^(?:0|[1-9]\d*)$/,an=function(v,C){var H=typeof v;return!!(C=C??9007199254740991)&&("number"==H||"symbol"!=H&&gt.test(v))&&v>-1&&v%1==0&&v<C},Ke=function(v){return"number"==typeof v&&v>-1&&v%1==0&&v<=9007199254740991},qt={};qt["[object Float32Array]"]=qt["[object Float64Array]"]=qt["[object Int8Array]"]=qt["[object Int16Array]"]=qt["[object Int32Array]"]=qt["[object Uint8Array]"]=qt["[object Uint8ClampedArray]"]=qt["[object Uint16Array]"]=qt["[object Uint32Array]"]=!0,qt["[object Arguments]"]=qt["[object Array]"]=qt["[object ArrayBuffer]"]=qt["[object Boolean]"]=qt["[object DataView]"]=qt["[object Date]"]=qt["[object Error]"]=qt["[object Function]"]=qt["[object Map]"]=qt["[object Number]"]=qt["[object Object]"]=qt["[object RegExp]"]=qt["[object Set]"]=qt["[object String]"]=qt["[object WeakMap]"]=!1;var zn=function(v){return function(C){return v(C)}},Wn=y(function(v,C){var H=C&&!C.nodeType&&C,J=H&&v&&!v.nodeType&&v,se=J&&J.exports===H&&oe.process,he=function(){try{return J&&J.require&&J.require("util").types||se&&se.binding&&se.binding("util")}catch{}}();v.exports=he}),kr=Wn&&Wn.isTypedArray,$n=kr?zn(kr):function(v){return je(v)&&Ke(v.length)&&!!qt[We(v)]},Er=Object.prototype.hasOwnProperty,Xr=function(v,C){var H=He(v),J=!H&&R(v),se=!H&&!J&&Je(v),he=!H&&!J&&!se&&$n(v),ye=H||J||se||he,Se=ye?function(v,C){for(var H=-1,J=Array(v);++H<v;)J[H]=C(H);return J}(v.length,String):[],Ie=Se.length;for(var Be in v)!C&&!Er.call(v,Be)||ye&&("length"==Be||se&&("offset"==Be||"parent"==Be)||he&&("buffer"==Be||"byteLength"==Be||"byteOffset"==Be)||an(Be,Ie))||Se.push(Be);return Se},Di=Object.prototype,Kt=function(v){var C=v&&v.constructor;return v===("function"==typeof C&&C.prototype||Di)},Gn=function(v,C){return function(H){return v(C(H))}},hr=Gn(Object.keys,Object),Un=Object.prototype.hasOwnProperty,Gr=function(v){if(!Kt(v))return hr(v);var C=[];for(var H in Object(v))Un.call(v,H)&&"constructor"!=H&&C.push(H);return C},br=function(v){return null!=v&&Ke(v.length)&&!Pt(v)},Et=function(v){return br(v)?Xr(v):Gr(v)},Ot=Object.prototype.hasOwnProperty,It=function(v){return br(v)?Xr(v,!0):function(v){if(!bt(v))return function(v){var C=[];if(null!=v)for(var H in Object(v))C.push(H);return C}(v);var C=Kt(v),H=[];for(var J in v)("constructor"!=J||!C&&Ot.call(v,J))&&H.push(J);return H}(v)},fn=y(function(v,C){var H=C&&!C.nodeType&&C,J=H&&v&&!v.nodeType&&v,se=J&&J.exports===H?we.Buffer:void 0,he=se?se.allocUnsafe:void 0;v.exports=function(ye,Se){if(Se)return ye.slice();var Ie=ye.length,Be=he?he(Ie):new ye.constructor(Ie);return ye.copy(Be),Be}}),Fn=function(v,C){var H=-1,J=v.length;for(C||(C=Array(J));++H<J;)C[H]=v[H];return C},Or=function(v,C){for(var H=-1,J=null==v?0:v.length,se=0,he=[];++H<J;){var ye=v[H];C(ye,H,v)&&(he[se++]=ye)}return he},Dr=function(){return[]},Qn=Object.prototype.propertyIsEnumerable,xi=Object.getOwnPropertySymbols,eo=xi?function(v){return null==v?[]:(v=Object(v),Or(xi(v),function(C){return Qn.call(v,C)}))}:Dr,Eo=function(v,C){for(var H=-1,J=C.length,se=v.length;++H<J;)v[se+H]=C[H];return v},Br=Gn(Object.getPrototypeOf,Object),Ni=Object.getOwnPropertySymbols?function(v){for(var C=[];v;)Eo(C,eo(v)),v=Br(v);return C}:Dr,_a=function(v,C,H){var J=C(v);return He(v)?J:Eo(J,H(v))},Au=function(v){return _a(v,Et,eo)},Du=function(v){return _a(v,It,Ni)},pa=un(we,"DataView"),Kl=un(we,"Promise"),Xs=un(we,"Set"),Gc=un(we,"WeakMap"),Rs=xt(pa),Uc=xt(Le),Kh=xt(Kl),Zh=xt(Xs),Kf=xt(Gc),qs=We;(pa&&"[object DataView]"!=qs(new pa(new ArrayBuffer(1)))||Le&&"[object Map]"!=qs(new Le)||Kl&&"[object Promise]"!=qs(Kl.resolve())||Xs&&"[object Set]"!=qs(new Xs)||Gc&&"[object WeakMap]"!=qs(new Gc))&&(qs=function(v){var C=We(v),H="[object Object]"==C?v.constructor:void 0,J=H?xt(H):"";if(J)switch(J){case Rs:return"[object DataView]";case Uc:return"[object Map]";case Kh:return"[object Promise]";case Zh:return"[object Set]";case Kf:return"[object WeakMap]"}return C});var Tu=qs,Zf=Object.prototype.hasOwnProperty,ua=we.Uint8Array,Ii=function(v){var C=new v.constructor(v.byteLength);return new ua(C).set(new ua(v)),C},ed=/\w*$/,ci=_e?_e.prototype:void 0,Vc=ci?ci.valueOf:void 0,Hu=function(v,C){var H=C?Ii(v.buffer):v.buffer;return new v.constructor(H,v.byteOffset,v.length)},ns=Object.create,bs=function(){function v(){}return function(C){if(!bt(C))return{};if(ns)return ns(C);v.prototype=C;var H=new v;return v.prototype=void 0,H}}(),Iu=function(v){return"function"!=typeof v.constructor||Kt(v)?{}:bs(Br(v))},Pu=Wn&&Wn.isMap,pl=Pu?zn(Pu):function(v){return je(v)&&"[object Map]"==Tu(v)},Jl=Wn&&Wn.isSet,Qr=Jl?zn(Jl):function(v){return je(v)&&"[object Set]"==Tu(v)},uo={};uo["[object Arguments]"]=uo["[object Array]"]=uo["[object ArrayBuffer]"]=uo["[object DataView]"]=uo["[object Boolean]"]=uo["[object Date]"]=uo["[object Float32Array]"]=uo["[object Float64Array]"]=uo["[object Int8Array]"]=uo["[object Int16Array]"]=uo["[object Int32Array]"]=uo["[object Map]"]=uo["[object Number]"]=uo["[object Object]"]=uo["[object RegExp]"]=uo["[object Set]"]=uo["[object String]"]=uo["[object Symbol]"]=uo["[object Uint8Array]"]=uo["[object Uint8ClampedArray]"]=uo["[object Uint16Array]"]=uo["[object Uint32Array]"]=!0,uo["[object Error]"]=uo["[object Function]"]=uo["[object WeakMap]"]=!1;var Hc=function v(C,H,J,se,he,ye){var Se,Ie=1&H,Be=2&H,nt=4&H;if(J&&(Se=he?J(C,se,he,ye):J(C)),void 0!==Se)return Se;if(!bt(C))return C;var Qe=He(C);if(Qe){if(Se=function(v){var C=v.length,H=new v.constructor(C);return C&&"string"==typeof v[0]&&Zf.call(v,"index")&&(H.index=v.index,H.input=v.input),H}(C),!Ie)return Fn(C,Se)}else{var St=Tu(C),Yt="[object Function]"==St||"[object GeneratorFunction]"==St;if(Je(C))return fn(C,Ie);if("[object Object]"==St||"[object Arguments]"==St||Yt&&!he){if(Se=Be||Yt?{}:Iu(C),!Ie)return Be?function(v,C){return $(v,Ni(v),C)}(C,function(v,C){return v&&$(C,It(C),v)}(Se,C)):function(v,C){return $(v,eo(v),C)}(C,function(v,C){return v&&$(C,Et(C),v)}(Se,C))}else{if(!uo[St])return he?C:{};Se=function(v,C,H){var J=v.constructor;switch(C){case"[object ArrayBuffer]":return Ii(v);case"[object Boolean]":case"[object Date]":return new J(+v);case"[object DataView]":return function(v,C){var H=C?Ii(v.buffer):v.buffer;return new v.constructor(H,v.byteOffset,v.byteLength)}(v,H);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Hu(v,H);case"[object Map]":case"[object Set]":return new J;case"[object Number]":case"[object String]":return new J(v);case"[object RegExp]":return function(v){var C=new v.constructor(v.source,ed.exec(v));return C.lastIndex=v.lastIndex,C}(v);case"[object Symbol]":return function(v){return Vc?Object(Vc.call(v)):{}}(v)}}(C,St,Ie)}}ye||(ye=new Wr);var Mn=ye.get(C);if(Mn)return Mn;ye.set(C,Se),Qr(C)?C.forEach(function(rn){Se.add(v(rn,H,J,rn,C,ye))}):pl(C)&&C.forEach(function(rn,nn){Se.set(nn,v(rn,H,J,nn,C,ye))});var tn=Qe?void 0:(nt?Be?Du:Au:Be?It:Et)(C);return Vr(tn||C,function(rn,nn){tn&&(rn=C[nn=rn]),T(Se,nn,v(rn,H,J,nn,C,ye))}),Se},ws=function(v){return function(){return v}},Wc=function(C,H,J){for(var se=-1,he=Object(C),ye=J(C),Se=ye.length;Se--;){var Ie=ye[++se];if(!1===H(he[Ie],Ie,he))break}return C},xs=function(v,C){return v&&Wc(v,C,Et)},qo=function(v,C){return function(H,J){if(null==H)return H;if(!br(H))return v(H,J);for(var se=H.length,he=-1,ye=Object(H);++he<se&&!1!==J(ye[he],he,ye););return H}}(xs),Nu=function(v){return v},Ks=function(v){return"function"==typeof v?v:Nu},Wa=function(v,C){return(He(v)?Vr:qo)(v,Ks(C))},Gi=Wa,$c=function(v,C){var H=[];return qo(v,function(J,se,he){C(J,se,he)&&H.push(J)}),H};function Ui(v){var C=-1,H=null==v?0:v.length;for(this.__data__=new wi;++C<H;)this.add(v[C])}Ui.prototype.add=Ui.prototype.push=function(v){return this.__data__.set(v,"__lodash_hash_undefined__"),this},Ui.prototype.has=function(v){return this.__data__.has(v)};var gu=Ui,ec=function(v,C){for(var H=-1,J=null==v?0:v.length;++H<J;)if(C(v[H],H,v))return!0;return!1},pu=function(v,C){return v.has(C)},tc=function(v,C,H,J,se,he){var ye=1&H,Se=v.length,Ie=C.length;if(Se!=Ie&&!(ye&&Ie>Se))return!1;var Be=he.get(v),nt=he.get(C);if(Be&&nt)return Be==C&&nt==v;var Qe=-1,St=!0,Yt=2&H?new gu:void 0;for(he.set(v,C),he.set(C,v);++Qe<Se;){var Mn=v[Qe],tn=C[Qe];if(J)var rn=ye?J(tn,Mn,Qe,C,v,he):J(Mn,tn,Qe,v,C,he);if(void 0!==rn){if(rn)continue;St=!1;break}if(Yt){if(!ec(C,function(nn,qn){if(!pu(Yt,qn)&&(Mn===nn||se(Mn,nn,H,J,he)))return Yt.push(qn)})){St=!1;break}}else if(Mn!==tn&&!se(Mn,tn,H,J,he)){St=!1;break}}return he.delete(v),he.delete(C),St},rs=function(v){var C=-1,H=Array(v.size);return v.forEach(function(J,se){H[++C]=[se,J]}),H},Zs=function(v){var C=-1,H=Array(v.size);return v.forEach(function(J){H[++C]=J}),H},Co=_e?_e.prototype:void 0,_s=Co?Co.valueOf:void 0,Da=Object.prototype.hasOwnProperty,is=Object.prototype.hasOwnProperty,$u=function v(C,H,J,se,he){return C===H||(null==C||null==H||!je(C)&&!je(H)?C!=C&&H!=H:function(v,C,H,J,se,he){var ye=He(v),Se=He(C),Ie=ye?"[object Array]":Tu(v),Be=Se?"[object Array]":Tu(C),nt="[object Object]"==(Ie="[object Arguments]"==Ie?"[object Object]":Ie),Qe="[object Object]"==(Be="[object Arguments]"==Be?"[object Object]":Be),St=Ie==Be;if(St&&Je(v)){if(!Je(C))return!1;ye=!0,nt=!1}if(St&&!nt)return he||(he=new Wr),ye||$n(v)?tc(v,C,H,J,se,he):function(v,C,H,J,se,he,ye){switch(H){case"[object DataView]":if(v.byteLength!=C.byteLength||v.byteOffset!=C.byteOffset)return!1;v=v.buffer,C=C.buffer;case"[object ArrayBuffer]":return!(v.byteLength!=C.byteLength||!he(new ua(v),new ua(C)));case"[object Boolean]":case"[object Date]":case"[object Number]":return M(+v,+C);case"[object Error]":return v.name==C.name&&v.message==C.message;case"[object RegExp]":case"[object String]":return v==C+"";case"[object Map]":var Se=rs;case"[object Set]":if(Se||(Se=Zs),v.size!=C.size&&!(1&J))return!1;var Be=ye.get(v);if(Be)return Be==C;J|=2,ye.set(v,C);var nt=tc(Se(v),Se(C),J,se,he,ye);return ye.delete(v),nt;case"[object Symbol]":if(_s)return _s.call(v)==_s.call(C)}return!1}(v,C,Ie,H,J,se,he);if(!(1&H)){var Yt=nt&&is.call(v,"__wrapped__"),Mn=Qe&&is.call(C,"__wrapped__");if(Yt||Mn){var tn=Yt?v.value():v,rn=Mn?C.value():C;return he||(he=new Wr),se(tn,rn,H,J,he)}}return!!St&&(he||(he=new Wr),function(v,C,H,J,se,he){var ye=1&H,Se=Au(v),Ie=Se.length;if(Ie!=Au(C).length&&!ye)return!1;for(var Be=Ie;Be--;){var nt=Se[Be];if(!(ye?nt in C:Da.call(C,nt)))return!1}var Qe=he.get(v),St=he.get(C);if(Qe&&St)return Qe==C&&St==v;var Yt=!0;he.set(v,C),he.set(C,v);for(var Mn=ye;++Be<Ie;){var tn=v[nt=Se[Be]],rn=C[nt];if(J)var nn=ye?J(rn,tn,nt,C,v,he):J(tn,rn,nt,v,C,he);if(!(void 0===nn?tn===rn||se(tn,rn,H,J,he):nn)){Yt=!1;break}Mn||(Mn="constructor"==nt)}if(Yt&&!Mn){var qn=v.constructor,fr=C.constructor;qn==fr||!("constructor"in v)||!("constructor"in C)||"function"==typeof qn&&qn instanceof qn&&"function"==typeof fr&&fr instanceof fr||(Yt=!1)}return he.delete(v),he.delete(C),Yt}(v,C,H,J,se,he))}(C,H,J,se,v,he))},To=function(v){return v==v&&!bt(v)},la=function(v,C){return function(H){return null!=H&&H[v]===C&&(void 0!==C||v in Object(H))}},Na=function(v){return"symbol"==typeof v||je(v)&&"[object Symbol]"==We(v)},Ne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vt=/^\w*$/,mt=function(v,C){if(He(v))return!1;var H=typeof v;return!("number"!=H&&"symbol"!=H&&"boolean"!=H&&null!=v&&!Na(v))||vt.test(v)||!Ne.test(v)||null!=C&&v in Object(C)};function Gt(v,C){if("function"!=typeof v||null!=C&&"function"!=typeof C)throw new TypeError("Expected a function");var H=function(){var J=arguments,se=C?C.apply(this,J):J[0],he=H.cache;if(he.has(se))return he.get(se);var ye=v.apply(this,J);return H.cache=he.set(se,ye)||he,ye};return H.cache=new(Gt.Cache||wi),H}Gt.Cache=wi;var rc,C,H,or=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Nr=/\\(\\)?/g,ei=(C=Gt(function(v){var C=[];return 46===v.charCodeAt(0)&&C.push(""),v.replace(or,function(H,J,se,he){C.push(se?he.replace(Nr,"$1"):J||H)}),C},function(J){return 500===H.size&&H.clear(),J}),H=C.cache,C),oo=function(v,C){for(var H=-1,J=null==v?0:v.length,se=Array(J);++H<J;)se[H]=C(v[H],H,v);return se},ki=_e?_e.prototype:void 0,Zo=ki?ki.toString:void 0,Fs=function v(C){if("string"==typeof C)return C;if(He(C))return oo(C,v)+"";if(Na(C))return Zo?Zo.call(C):"";var H=C+"";return"0"==H&&1/C==-1/0?"-0":H},mi=function(v){return null==v?"":Fs(v)},Lu=function(v,C){return He(v)?v:mt(v,C)?[v]:ei(mi(v))},Ss=function(v){if("string"==typeof v||Na(v))return v;var C=v+"";return"0"==C&&1/v==-1/0?"-0":C},Yu=function(v,C){for(var H=0,J=(C=Lu(C,v)).length;null!=v&&H<J;)v=v[Ss(C[H++])];return H&&H==J?v:void 0},va=function(v,C){return null!=v&&C in Object(v)},Xu=function(v,C,H){for(var J=-1,se=(C=Lu(C,v)).length,he=!1;++J<se;){var ye=Ss(C[J]);if(!(he=null!=v&&H(v,ye)))break;v=v[ye]}return he||++J!=se?he:!!(se=null==v?0:v.length)&&Ke(se)&&an(ye,se)&&(He(v)||R(v))},Ru=function(v,C){return null!=v&&Xu(v,C,va)},os=function(v){return function(C){return C?.[v]}},as=function(v){return"function"==typeof v?v:null==v?Nu:"object"==typeof v?He(v)?function(v,C){return mt(v)&&To(C)?la(Ss(v),C):function(H){var J=function(v,C,H){var J=null==v?void 0:Yu(v,C);return void 0===J?void 0:J}(H,v);return void 0===J&&J===C?Ru(H,v):$u(C,J,3)}}(v[0],v[1]):function(v){var C=function(v){for(var C=Et(v),H=C.length;H--;){var J=C[H],se=v[J];C[H]=[J,se,To(se)]}return C}(v);return 1==C.length&&C[0][2]?la(C[0][0],C[0][1]):function(H){return H===v||function(v,C,H,J){var se=H.length,he=se;if(null==v)return!he;for(v=Object(v);se--;){var Se=H[se];if(Se[2]?Se[1]!==v[Se[0]]:!(Se[0]in v))return!1}for(;++se<he;){var Ie=(Se=H[se])[0],Be=v[Ie],nt=Se[1];if(Se[2]){if(void 0===Be&&!(Ie in v))return!1}else{var St,Qe=new Wr;if(!(void 0===St?$u(nt,Be,3,J,Qe):St))return!1}}return!0}(H,0,C)}}(v):function(v){return mt(v)?os(Ss(v)):function(v){return function(C){return Yu(C,v)}}(v)}(v)},td=function(v,C){return(He(v)?Or:$c)(v,as(C))},Xc=Object.prototype.hasOwnProperty,Jf=function(v,C){return null!=v&&Xc.call(v,C)},Fu=function(v,C){return null!=v&&Xu(v,C,Jf)},qc=Object.prototype.hasOwnProperty,N=function(v){return void 0===v},ge=function(v,C){var H=-1,J=br(v)?Array(v.length):[];return qo(v,function(se,he,ye){J[++H]=C(se,he,ye)}),J},Me=function(v,C){return(He(v)?oo:ge)(v,as(C))},Pe=function(v,C,H,J){var se=-1,he=null==v?0:v.length;for(J&&he&&(H=v[++se]);++se<he;)H=C(H,v[se],se,v);return H},Ye=function(v,C,H,J,se){return se(v,function(he,ye,Se){H=J?(J=!1,he):C(H,he,ye,Se)}),H},qe=function(v,C,H){var J=He(v)?Pe:Ye,se=arguments.length<3;return J(v,as(C),H,se,qo)},dt=os("length"),Nt=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),An="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",En="\\ud83c[\\udffb-\\udfff]",tr="[^\\ud800-\\udfff]",lr="(?:\\ud83c[\\udde6-\\uddff]){2}",Pn="[\\ud800-\\udbff][\\udc00-\\udfff]",Cr="(?:"+An+"|"+En+")?",yi="[\\ufe0e\\ufe0f]?"+Cr+"(?:\\u200d(?:"+[tr,lr,Pn].join("|")+")[\\ufe0e\\ufe0f]?"+Cr+")*",Ei="(?:"+[tr+An+"?",An,lr,Pn,"[\\ud800-\\udfff]"].join("|")+")",fi=RegExp(En+"(?="+En+")|"+Ei+yi,"g"),Bo=_e?_e.isConcatSpreadable:void 0,Vo=function(v){return He(v)||R(v)||!!(Bo&&v&&v[Bo])},No=function v(C,H,J,se,he){var ye=-1,Se=C.length;for(J||(J=Vo),he||(he=[]);++ye<Se;){var Ie=C[ye];H>0&&J(Ie)?H>1?v(Ie,H-1,J,se,he):Eo(he,Ie):se||(he[he.length]=Ie)}return he},jo=function(v,C,H){switch(H.length){case 0:return v.call(C);case 1:return v.call(C,H[0]);case 2:return v.call(C,H[0],H[1]);case 3:return v.call(C,H[0],H[1],H[2])}return v.apply(C,H)},Sa=Math.max,Vi=function(v,C,H){return C=Sa(void 0===C?v.length-1:C,0),function(){for(var J=arguments,se=-1,he=Sa(J.length-C,0),ye=Array(he);++se<he;)ye[se]=J[C+se];se=-1;for(var Se=Array(C+1);++se<C;)Se[se]=J[se];return Se[C]=H(ye),jo(v,this,Se)}},So=Ae?function(v,C){return Ae(v,"toString",{configurable:!0,enumerable:!1,value:ws(C),writable:!0})}:Nu,Cs=Date.now,qu=function(v){var C=0,H=0;return function(){var J=Cs(),se=16-(J-H);if(H=J,se>0){if(++C>=800)return arguments[0]}else C=0;return v.apply(void 0,arguments)}}(So),ma=function(v,C){return qu(Vi(v,C,Nu),v+"")},nc=function(v,C,H,J){for(var se=v.length,he=H+(J?1:-1);J?he--:++he<se;)if(C(v[he],he,v))return he;return-1},_p=function(v){return v!=v},Mp=function(v,C){return!(null==v||!v.length)&&function(v,C,H){return C==C?function(v,C,H){for(var J=-1,se=v.length;++J<se;)if(v[J]===C)return J;return-1}(v,C):nc(v,_p,0)}(v,C)>-1},Cp=Xs&&1/Zs(new Xs([,-0]))[1]==1/0?function(v){return new Xs(v)}:function(){},th=function(v){return je(v)&&br(v)},Ap=ma(function(v){return function(v,C,H){var J=-1,se=Mp,he=v.length,ye=!0,Se=[],Ie=Se;if(he>=200){var Be=Cp(v);if(Be)return Zs(Be);ye=!1,se=pu,Ie=new gu}else Ie=Se;e:for(;++J<he;){var nt=v[J],Qe=nt;if(nt=0!==nt?nt:0,ye&&Qe==Qe){for(var St=Ie.length;St--;)if(Ie[St]===Qe)continue e;Se.push(nt)}else se(Ie,Qe,H)||(Ie!==Se&&Ie.push(Qe),Se.push(nt))}return Se}(No(v,1,th,!0))}),z0=function(v){return null==v?[]:function(v,C){return oo(C,function(H){return v[H]})}(v,Et(v))};try{rc={clone:function(v){return Hc(v,4)},constant:ws,each:Gi,filter:td,has:Fu,isArray:He,isEmpty:function(v){if(null==v)return!0;if(br(v)&&(He(v)||"string"==typeof v||"function"==typeof v.splice||Je(v)||$n(v)||R(v)))return!v.length;var C=Tu(v);if("[object Map]"==C||"[object Set]"==C)return!v.size;if(Kt(v))return!Gr(v).length;for(var H in v)if(qc.call(v,H))return!1;return!0},isFunction:Pt,isUndefined:N,keys:Et,map:Me,reduce:qe,size:function(v){if(null==v)return 0;if(br(v))return function(v){return"string"==typeof v||!He(v)&&je(v)&&"[object String]"==We(v)}(v)?function(v){return function(v){return Nt.test(v)}(v)?function(v){for(var C=fi.lastIndex=0;fi.test(v);)++C;return C}(v):dt(v)}(v):v.length;var C=Tu(v);return"[object Map]"==C||"[object Set]"==C?v.size:Gr(v).length},transform:function(v,C,H){var J=He(v),se=J||Je(v)||$n(v);if(C=as(C),null==H){var he=v&&v.constructor;H=se?J?new he:[]:bt(v)&&Pt(he)?bs(Br(v)):{}}return(se?Vr:xs)(v,function(ye,Se,Ie){return C(H,ye,Se,Ie)}),H},union:Ap,values:z0}}catch{}rc||(rc=window._);var ur=rc,Kc=Hi;function Hi(v){this._isDirected=!ur.has(v,"directed")||v.directed,this._isMultigraph=!!ur.has(v,"multigraph")&&v.multigraph,this._isCompound=!!ur.has(v,"compound")&&v.compound,this._label=void 0,this._defaultNodeLabelFn=ur.constant(void 0),this._defaultEdgeLabelFn=ur.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function Zc(v,C){v[C]?v[C]++:v[C]=1}function ss(v,C){--v[C]||delete v[C]}function Qc(v,C,H,J){var se=""+C,he=""+H;if(!v&&se>he){var ye=se;se=he,he=ye}return se+"\x01"+he+"\x01"+(ur.isUndefined(J)?"\0":J)}function nd(v,C,H,J){var se=""+C,he=""+H;if(!v&&se>he){var ye=se;se=he,he=ye}var Se={v:se,w:he};return J&&(Se.name=J),Se}function Ku(v,C){return Qc(v,C.v,C.w,C.name)}Hi.prototype._nodeCount=0,Hi.prototype._edgeCount=0,Hi.prototype.isDirected=function(){return this._isDirected},Hi.prototype.isMultigraph=function(){return this._isMultigraph},Hi.prototype.isCompound=function(){return this._isCompound},Hi.prototype.setGraph=function(v){return this._label=v,this},Hi.prototype.graph=function(){return this._label},Hi.prototype.setDefaultNodeLabel=function(v){return ur.isFunction(v)||(v=ur.constant(v)),this._defaultNodeLabelFn=v,this},Hi.prototype.nodeCount=function(){return this._nodeCount},Hi.prototype.nodes=function(){return ur.keys(this._nodes)},Hi.prototype.sources=function(){var v=this;return ur.filter(this.nodes(),function(C){return ur.isEmpty(v._in[C])})},Hi.prototype.sinks=function(){var v=this;return ur.filter(this.nodes(),function(C){return ur.isEmpty(v._out[C])})},Hi.prototype.setNodes=function(v,C){var H=arguments,J=this;return ur.each(v,function(se){H.length>1?J.setNode(se,C):J.setNode(se)}),this},Hi.prototype.setNode=function(v,C){return ur.has(this._nodes,v)?(arguments.length>1&&(this._nodes[v]=C),this):(this._nodes[v]=arguments.length>1?C:this._defaultNodeLabelFn(v),this._isCompound&&(this._parent[v]="\0",this._children[v]={},this._children["\0"][v]=!0),this._in[v]={},this._preds[v]={},this._out[v]={},this._sucs[v]={},++this._nodeCount,this)},Hi.prototype.node=function(v){return this._nodes[v]},Hi.prototype.hasNode=function(v){return ur.has(this._nodes,v)},Hi.prototype.removeNode=function(v){var C=this;if(ur.has(this._nodes,v)){var H=function(J){C.removeEdge(C._edgeObjs[J])};delete this._nodes[v],this._isCompound&&(this._removeFromParentsChildList(v),delete this._parent[v],ur.each(this.children(v),function(J){C.setParent(J)}),delete this._children[v]),ur.each(ur.keys(this._in[v]),H),delete this._in[v],delete this._preds[v],ur.each(ur.keys(this._out[v]),H),delete this._out[v],delete this._sucs[v],--this._nodeCount}return this},Hi.prototype.setParent=function(v,C){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(ur.isUndefined(C))C="\0";else{for(var H=C+="";!ur.isUndefined(H);H=this.parent(H))if(H===v)throw new Error("Setting "+C+" as parent of "+v+" would create a cycle");this.setNode(C)}return this.setNode(v),this._removeFromParentsChildList(v),this._parent[v]=C,this._children[C][v]=!0,this},Hi.prototype._removeFromParentsChildList=function(v){delete this._children[this._parent[v]][v]},Hi.prototype.parent=function(v){if(this._isCompound){var C=this._parent[v];if("\0"!==C)return C}},Hi.prototype.children=function(v){if(ur.isUndefined(v)&&(v="\0"),this._isCompound){var C=this._children[v];if(C)return ur.keys(C)}else{if("\0"===v)return this.nodes();if(this.hasNode(v))return[]}},Hi.prototype.predecessors=function(v){var C=this._preds[v];if(C)return ur.keys(C)},Hi.prototype.successors=function(v){var C=this._sucs[v];if(C)return ur.keys(C)},Hi.prototype.neighbors=function(v){var C=this.predecessors(v);if(C)return ur.union(C,this.successors(v))},Hi.prototype.isLeaf=function(v){return 0===(this.isDirected()?this.successors(v):this.neighbors(v)).length},Hi.prototype.filterNodes=function(v){var C=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});C.setGraph(this.graph());var H=this;ur.each(this._nodes,function(he,ye){v(ye)&&C.setNode(ye,he)}),ur.each(this._edgeObjs,function(he){C.hasNode(he.v)&&C.hasNode(he.w)&&C.setEdge(he,H.edge(he))});var J={};function se(he){var ye=H.parent(he);return void 0===ye||C.hasNode(ye)?(J[he]=ye,ye):ye in J?J[ye]:se(ye)}return this._isCompound&&ur.each(C.nodes(),function(he){C.setParent(he,se(he))}),C},Hi.prototype.setDefaultEdgeLabel=function(v){return ur.isFunction(v)||(v=ur.constant(v)),this._defaultEdgeLabelFn=v,this},Hi.prototype.edgeCount=function(){return this._edgeCount},Hi.prototype.edges=function(){return ur.values(this._edgeObjs)},Hi.prototype.setPath=function(v,C){var H=this,J=arguments;return ur.reduce(v,function(se,he){return J.length>1?H.setEdge(se,he,C):H.setEdge(se,he),he}),this},Hi.prototype.setEdge=function(){var v,C,H,J,se=!1,he=arguments[0];"object"==typeof he&&null!==he&&"v"in he?(v=he.v,C=he.w,H=he.name,2===arguments.length&&(J=arguments[1],se=!0)):(v=he,C=arguments[1],H=arguments[3],arguments.length>2&&(J=arguments[2],se=!0)),v=""+v,C=""+C,ur.isUndefined(H)||(H=""+H);var ye=Qc(this._isDirected,v,C,H);if(ur.has(this._edgeLabels,ye))return se&&(this._edgeLabels[ye]=J),this;if(!ur.isUndefined(H)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(v),this.setNode(C),this._edgeLabels[ye]=se?J:this._defaultEdgeLabelFn(v,C,H);var Se=nd(this._isDirected,v,C,H);return v=Se.v,C=Se.w,Object.freeze(Se),this._edgeObjs[ye]=Se,Zc(this._preds[C],v),Zc(this._sucs[v],C),this._in[C][ye]=Se,this._out[v][ye]=Se,this._edgeCount++,this},Hi.prototype.edge=function(v,C,H){var J=1===arguments.length?Ku(this._isDirected,arguments[0]):Qc(this._isDirected,v,C,H);return this._edgeLabels[J]},Hi.prototype.hasEdge=function(v,C,H){var J=1===arguments.length?Ku(this._isDirected,arguments[0]):Qc(this._isDirected,v,C,H);return ur.has(this._edgeLabels,J)},Hi.prototype.removeEdge=function(v,C,H){var J=1===arguments.length?Ku(this._isDirected,arguments[0]):Qc(this._isDirected,v,C,H),se=this._edgeObjs[J];return se&&(v=se.v,C=se.w,delete this._edgeLabels[J],delete this._edgeObjs[J],ss(this._preds[C],v),ss(this._sucs[v],C),delete this._in[C][J],delete this._out[v][J],this._edgeCount--),this},Hi.prototype.inEdges=function(v,C){var H=this._in[v];if(H){var J=ur.values(H);return C?ur.filter(J,function(se){return se.v===C}):J}},Hi.prototype.outEdges=function(v,C){var H=this._out[v];if(H){var J=ur.values(H);return C?ur.filter(J,function(se){return se.w===C}):J}},Hi.prototype.nodeEdges=function(v,C){var H=this.inEdges(v,C);if(H)return H.concat(this.outEdges(v,C))};var us={Graph:Kc,version:"2.1.8"},Dp={write:function(v){var C={options:{directed:v.isDirected(),multigraph:v.isMultigraph(),compound:v.isCompound()},nodes:nh(v),edges:mu(v)};return ur.isUndefined(v.graph())||(C.value=ur.clone(v.graph())),C},read:function(v){var C=new Kc(v.options).setGraph(v.value);return ur.each(v.nodes,function(H){C.setNode(H.v,H.value),H.parent&&C.setParent(H.v,H.parent)}),ur.each(v.edges,function(H){C.setEdge({v:H.v,w:H.w,name:H.name},H.value)}),C}};function nh(v){return ur.map(v.nodes(),function(C){var H=v.node(C),J=v.parent(C),se={v:C};return ur.isUndefined(H)||(se.value=H),ur.isUndefined(J)||(se.parent=J),se})}function mu(v){return ur.map(v.edges(),function(C){var H=v.edge(C),J={v:C.v,w:C.w};return ur.isUndefined(C.name)||(J.name=C.name),ur.isUndefined(H)||(J.value=H),J})}var og=Jo;function Jo(){this._arr=[],this._keyIndices={}}Jo.prototype.size=function(){return this._arr.length},Jo.prototype.keys=function(){return this._arr.map(function(v){return v.key})},Jo.prototype.has=function(v){return ur.has(this._keyIndices,v)},Jo.prototype.priority=function(v){var C=this._keyIndices[v];if(void 0!==C)return this._arr[C].priority},Jo.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},Jo.prototype.add=function(v,C){var H=this._keyIndices;if(v=String(v),!ur.has(H,v)){var J=this._arr,se=J.length;return H[v]=se,J.push({key:v,priority:C}),this._decrease(se),!0}return!1},Jo.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var v=this._arr.pop();return delete this._keyIndices[v.key],this._heapify(0),v.key},Jo.prototype.decrease=function(v,C){var H=this._keyIndices[v];if(C>this._arr[H].priority)throw new Error("New priority is greater than current priority. Key: "+v+" Old: "+this._arr[H].priority+" New: "+C);this._arr[H].priority=C,this._decrease(H)},Jo.prototype._heapify=function(v){var C=this._arr,H=2*v,J=H+1,se=v;H<C.length&&(se=C[H].priority<C[se].priority?H:se,J<C.length&&(se=C[J].priority<C[se].priority?J:se),se!==v&&(this._swap(v,se),this._heapify(se)))},Jo.prototype._decrease=function(v){for(var C,H=this._arr,J=H[v].priority;0!==v&&!(H[C=v>>1].priority<J);)this._swap(v,C),v=C},Jo.prototype._swap=function(v,C){var H=this._arr,J=this._keyIndices,se=H[v],he=H[C];H[v]=he,H[C]=se,J[he.key]=v,J[se.key]=C};var hi=function(v,C,H,J){return function(se,he,ye,Se){var Ie,Be,nt={},Qe=new og,St=function(Yt){var Mn=Yt.v!==Ie?Yt.v:Yt.w,tn=nt[Mn],rn=ye(Yt),nn=Be.distance+rn;if(rn<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+Yt+" Weight: "+rn);nn<tn.distance&&(tn.distance=nn,tn.predecessor=Ie,Qe.decrease(Mn,nn))};for(se.nodes().forEach(function(Yt){var Mn=Yt===he?0:Number.POSITIVE_INFINITY;nt[Yt]={distance:Mn},Qe.add(Yt,Mn)});Qe.size()>0&&(Ie=Qe.removeMin(),(Be=nt[Ie]).distance!==Number.POSITIVE_INFINITY);)Se(Ie).forEach(St);return nt}(v,String(C),H||ml,J||function(se){return v.outEdges(se)})},ml=ur.constant(1),sg=function(v){var C=0,H=[],J={},se=[];function he(ye){var Se=J[ye]={onStack:!0,lowlink:C,index:C++};if(H.push(ye),v.successors(ye).forEach(function(nt){ur.has(J,nt)?J[nt].onStack&&(Se.lowlink=Math.min(Se.lowlink,J[nt].index)):(he(nt),Se.lowlink=Math.min(Se.lowlink,J[nt].lowlink))}),Se.lowlink===Se.index){var Ie,Be=[];do{Ie=H.pop(),J[Ie].onStack=!1,Be.push(Ie)}while(ye!==Ie);se.push(Be)}}return v.nodes().forEach(function(ye){ur.has(J,ye)||he(ye)}),se},ug=ur.constant(1),rd=Op;function Op(v){var C={},H={},J=[];if(ur.each(v.sinks(),function se(he){if(ur.has(H,he))throw new nr;ur.has(C,he)||(H[he]=!0,C[he]=!0,ur.each(v.predecessors(he),se),delete H[he],J.push(he))}),ur.size(C)!==v.nodeCount())throw new nr;return J}function nr(){}Op.CycleException=nr,nr.prototype=new Error;var to=function(v,C,H){ur.isArray(C)||(C=[C]);var J=(v.isDirected()?v.successors:v.neighbors).bind(v),se=[],he={};return ur.each(C,function(ye){if(!v.hasNode(ye))throw new Error("Graph does not have node: "+ye);lg(v,ye,"post"===H,he,J,se)}),se};function lg(v,C,H,J,se,he){ur.has(J,C)||(J[C]=!0,H||he.push(C),ur.each(se(C),function(ye){lg(v,ye,H,J,se,he)}),H&&he.push(C))}var rh,Ma={Graph:us.Graph,json:Dp,alg:{components:function(v){var C,H={},J=[];function se(he){ur.has(H,he)||(H[he]=!0,C.push(he),ur.each(v.successors(he),se),ur.each(v.predecessors(he),se))}return ur.each(v.nodes(),function(he){C=[],se(he),C.length&&J.push(C)}),J},dijkstra:hi,dijkstraAll:function(v,C,H){return ur.transform(v.nodes(),function(J,se){J[se]=hi(v,se,C,H)},{})},findCycles:function(v){return ur.filter(sg(v),function(C){return C.length>1||1===C.length&&v.hasEdge(C[0],C[0])})},floydWarshall:function(v,C,H){return se=C||ug,he=H||function(J){return v.outEdges(J)},ye={},(Se=v.nodes()).forEach(function(Ie){ye[Ie]={},ye[Ie][Ie]={distance:0},Se.forEach(function(Be){Ie!==Be&&(ye[Ie][Be]={distance:Number.POSITIVE_INFINITY})}),he(Ie).forEach(function(Be){var nt=Be.v===Ie?Be.w:Be.v,Qe=se(Be);ye[Ie][nt]={distance:Qe,predecessor:Ie}})}),Se.forEach(function(Ie){var Be=ye[Ie];Se.forEach(function(nt){var Qe=ye[nt];Se.forEach(function(St){var Mn=Be[St],tn=Qe[St],rn=Qe[Ie].distance+Mn.distance;rn<tn.distance&&(tn.distance=rn,tn.predecessor=Mn.predecessor)})})}),ye;var se,he,ye,Se},isAcyclic:function(v){try{rd(v)}catch(C){if(C instanceof rd.CycleException)return!1;throw C}return!0},postorder:function(v,C){return to(v,C,"post")},preorder:function(v,C){return to(v,C,"pre")},prim:function(v,C){var H,J=new Kc,se={},he=new og;function ye(Ie){var Be=Ie.v===H?Ie.w:Ie.v,nt=he.priority(Be);if(void 0!==nt){var Qe=C(Ie);Qe<nt&&(se[Be]=H,he.decrease(Be,Qe))}}if(0===v.nodeCount())return J;ur.each(v.nodes(),function(Ie){he.add(Ie,Number.POSITIVE_INFINITY),J.setNode(Ie)}),he.decrease(v.nodes()[0],0);for(var Se=!1;he.size()>0;){if(H=he.removeMin(),ur.has(se,H))J.setEdge(H,se[H]);else{if(Se)throw new Error("Input graph is not connected: "+v);Se=!0}v.nodeEdges(H).forEach(ye)}return J},tarjan:sg,topsort:rd},version:us.version};try{rh=Ma}catch{}rh||(rh=window.graphlib);var ad,Js=rh,ls=function(v,C,H){if(!bt(H))return!1;var J=typeof C;return!!("number"==J?br(H)&&an(C,H.length):"string"==J&&C in H)&&M(H[C],v)},id=Object.prototype,cg=id.hasOwnProperty,Pp=ma(function(v,C){v=Object(v);var H=-1,J=C.length,se=J>2?C[2]:void 0;for(se&&ls(C[0],C[1],se)&&(J=1);++H<J;)for(var he=C[H],ye=It(he),Se=-1,Ie=ye.length;++Se<Ie;){var Be=ye[Se],nt=v[Be];(void 0===nt||M(nt,id[Be])&&!cg.call(v,Be))&&(v[Be]=he[Be])}return v}),gb=/^\s+|\s+$/g,Np=/^[-+]0x[0-9a-f]+$/i,cs=/^0b[01]+$/i,Qu=/^0o[0-7]+$/i,Lp=parseInt,eu=function(v){return v?(v=function(v){if("number"==typeof v)return v;if(Na(v))return NaN;if(bt(v)){var C="function"==typeof v.valueOf?v.valueOf():v;v=bt(C)?C+"":C}if("string"!=typeof v)return 0===v?v:+v;v=v.replace(gb,"");var H=cs.test(v);return H||Qu.test(v)?Lp(v.slice(2),H?2:8):Np.test(v)?NaN:+v}(v))===1/0||v===-1/0?17976931348623157e292*(v<0?-1:1):v==v?v:0:0===v?v:0},kp=Math.max,U0=function(C,H,J){var se=Object(C);if(!br(C)){var he=as(H);C=Et(C),H=function(Se){return he(se[Se],Se,se)}}var ye=function(v,C,H){var J=null==v?0:v.length;if(!J)return-1;var se=null==H?0:function(v){var C=eu(v),H=C%1;return C==C?H?C-H:C:0}(H);return se<0&&(se=kp(J+se,0)),nc(v,as(C),se)}(C,H,J);return ye>-1?se[he?C[ye]:ye]:void 0},Rp=function(v){return null!=v&&v.length?No(v,1):[]},ef=function(v,C,H){for(var J=-1,se=v.length;++J<se;){var he=v[J],ye=C(he);if(null!=ye&&(void 0===Se?ye==ye&&!Na(ye):H(ye,Se)))var Se=ye,Ie=he}return Ie},hg=function(v,C){return v>C},tf=function(v,C,H){(void 0!==H&&!M(v[C],H)||void 0===H&&!(C in v))&&Y(v,C,H)},dg=Function.prototype.toString,Gp=Object.prototype.hasOwnProperty,gg=dg.call(Object),pg=function(v,C){if(("constructor"!==C||"function"!=typeof v[C])&&"__proto__"!=C)return v[C]},Ao=function v(C,H,J,se,he){C!==H&&Wc(H,function(ye,Se){if(he||(he=new Wr),bt(ye))!function(v,C,H,J,se,he,ye){var Se=pg(v,H),Ie=pg(C,H),Be=ye.get(Ie);if(Be)tf(v,H,Be);else{var nt=he?he(Se,Ie,H+"",v,C,ye):void 0,Qe=void 0===nt;if(Qe){var St=He(Ie),Yt=!St&&Je(Ie),Mn=!St&&!Yt&&$n(Ie);nt=Ie,St||Yt||Mn?He(Se)?nt=Se:th(Se)?nt=Fn(Se):Yt?(Qe=!1,nt=fn(Ie,!0)):Mn?(Qe=!1,nt=Hu(Ie,!0)):nt=[]:function(v){if(!je(v)||"[object Object]"!=We(v))return!1;var C=Br(v);if(null===C)return!0;var H=Gp.call(C,"constructor")&&C.constructor;return"function"==typeof H&&H instanceof H&&dg.call(H)==gg}(Ie)||R(Ie)?(nt=Se,R(Se)?nt=function(v){return $(v,It(v))}(Se):bt(Se)&&!Pt(Se)||(nt=Iu(Ie))):Qe=!1}Qe&&(ye.set(Ie,nt),se(nt,Ie,J,he,ye),ye.delete(Ie)),tf(v,H,nt)}}(C,H,Se,J,v,se,he);else{var Ie=se?se(pg(C,Se),ye,Se+"",C,H,he):void 0;void 0===Ie&&(Ie=ye),tf(C,Se,Ie)}},It)},nf=function(v){return ma(function(C,H){var J=-1,se=H.length,he=se>1?H[se-1]:void 0,ye=se>2?H[2]:void 0;for(he=v.length>3&&"function"==typeof he?(se--,he):void 0,ye&&ls(H[0],H[1],ye)&&(he=se<3?void 0:he,se=1),C=Object(C);++J<se;){var Se=H[J];Se&&v(C,Se,J)}return C})}(function(v,C,H){Ao(v,C,H)}),Up=function(v,C){return v<C},vg=function(v,C,H,J){if(!bt(v))return v;for(var se=-1,he=(C=Lu(C,v)).length,ye=he-1,Se=v;null!=Se&&++se<he;){var Ie=Ss(C[se]),Be=H;if("__proto__"===Ie||"constructor"===Ie||"prototype"===Ie)return v;if(se!=ye){var nt=Se[Ie];void 0===(Be=J?J(nt,Ie,Se):void 0)&&(Be=bt(nt)?nt:an(C[se+1])?[]:{})}T(Se,Ie,Be),Se=Se[Ie]}return v},lf=function(v){return qu(Vi(v,void 0,Rp),v+"")}(function(v,C){return null==v?{}:function(v,C){return function(v,C,H){for(var J=-1,se=C.length,he={};++J<se;){var ye=C[J],Se=Yu(v,ye);H(0,ye)&&vg(he,Lu(ye,v),Se)}return he}(v,C,function(H,J){return Ru(v,J)})}(v,C)}),oh=Math.ceil,ah=Math.max,Wp=function(v,C){if(v!==C){var H=void 0!==v,J=null===v,se=v==v,he=Na(v),ye=void 0!==C,Se=null===C,Ie=C==C,Be=Na(C);if(!Se&&!Be&&!he&&v>C||he&&ye&&Ie&&!Se&&!Be||J&&ye&&Ie||!H&&Ie||!se)return 1;if(!J&&!he&&!Be&&v<C||Be&&H&&se&&!J&&!he||Se&&H&&se||!ye&&se||!Ie)return-1}return 0},sh=ma(function(v,C){if(null==v)return[];var H=C.length;return H>1&&ls(v,C[0],C[1])?C=[]:H>2&&ls(C[0],C[1],C[2])&&(C=[C[0]]),function(v,C,H){C=C.length?oo(C,function(he){return He(he)?function(ye){return Yu(ye,1===he.length?he[0]:he)}:he}):[Nu];var J=-1;return C=oo(C,zn(as)),function(v,C){var H=v.length;for(v.sort(C);H--;)v[H]=v[H].value;return v}(ge(v,function(he,ye,Se){return{criteria:oo(C,function(Ie){return Ie(he)}),index:++J,value:he}}),function(he,ye){return function(v,C,H){for(var J=-1,se=v.criteria,he=C.criteria,ye=se.length,Se=H.length;++J<ye;){var Ie=Wp(se[J],he[J]);if(Ie)return J>=Se?Ie:Ie*("desc"==H[J]?-1:1)}return v.index-C.index}(he,ye,H)})}(v,No(C,1),[])}),Yp=0;try{ad={cloneDeep:function(v){return Hc(v,5)},constant:ws,defaults:Pp,each:Gi,filter:td,find:U0,flatten:Rp,forEach:Wa,forIn:function(v,C){return null==v?v:Wc(v,Ks(C),It)},has:Fu,isUndefined:N,last:function(v){var C=null==v?0:v.length;return C?v[C-1]:void 0},map:Me,mapValues:function(v,C){var H={};return C=as(C),xs(v,function(J,se,he){Y(H,se,C(J,se,he))}),H},max:function(v){return v&&v.length?ef(v,Nu,hg):void 0},merge:nf,min:function(v){return v&&v.length?ef(v,Nu,Up):void 0},minBy:function(v,C){return v&&v.length?ef(v,as(C),Up):void 0},now:function(){return we.Date.now()},pick:lf,range:function(C,H,J){return J&&"number"!=typeof J&&ls(C,H,J)&&(H=J=void 0),C=eu(C),void 0===H?(H=C,C=0):H=eu(H),function(v,C,H,J){for(var se=-1,he=ah(oh((C-v)/(H||1)),0),ye=Array(he);he--;)ye[++se]=v,v+=H;return ye}(C,H,J=void 0===J?C<H?1:-1:eu(J))},reduce:qe,sortBy:sh,uniqueId:function(v){var C=++Yp;return mi(v)+C},values:z0,zipObject:function(v,C){return function(v,C,H){for(var J=-1,se=v.length,he=C.length,ye={};++J<se;)H(ye,v[J],J<he?C[J]:void 0);return ye}(v||[],C||[],T)}}}catch{}ad||(ad=window._);var Rt=ad,mg=el;function el(){var v={};v._next=v._prev=v,this._sentinel=v}function uh(v){v._prev._next=v._next,v._next._prev=v._prev,delete v._next,delete v._prev}function yg(v,C){if("_next"!==v&&"_prev"!==v)return C}el.prototype.dequeue=function(){var v=this._sentinel,C=v._prev;if(C!==v)return uh(C),C},el.prototype.enqueue=function(v){var C=this._sentinel;v._prev&&v._next&&uh(v),v._next=C._next,C._next._prev=v,C._next=v,v._prev=C},el.prototype.toString=function(){for(var v=[],C=this._sentinel,H=C._prev;H!==C;)v.push(JSON.stringify(H,yg)),H=H._prev;return"["+v.join(", ")+"]"};var wl=Js.Graph,ac=Rt.constant(1);function sc(v,C,H,J,se){var he=se?[]:void 0;return Rt.forEach(v.inEdges(J.v),function(ye){var Se=v.edge(ye),Ie=v.node(ye.v);se&&he.push({v:ye.v,w:ye.w}),Ie.out-=Se,uc(C,H,Ie)}),Rt.forEach(v.outEdges(J.v),function(ye){var Se=v.edge(ye),Be=v.node(ye.w);Be.in-=Se,uc(C,H,Be)}),v.removeNode(J.v),he}function uc(v,C,H){H.out?H.in?v[H.out-H.in+C].enqueue(H):v[v.length-1].enqueue(H):v[0].enqueue(H)}var lh=Js.Graph,ca={addDummyNode:hf,simplify:function(v){var C=(new lh).setGraph(v.graph());return Rt.forEach(v.nodes(),function(H){C.setNode(H,v.node(H))}),Rt.forEach(v.edges(),function(H){var J=C.edge(H.v,H.w)||{weight:0,minlen:1},se=v.edge(H);C.setEdge(H.v,H.w,{weight:J.weight+se.weight,minlen:Math.max(J.minlen,se.minlen)})}),C},asNonCompoundGraph:function(v){var C=new lh({multigraph:v.isMultigraph()}).setGraph(v.graph());return Rt.forEach(v.nodes(),function(H){v.children(H).length||C.setNode(H,v.node(H))}),Rt.forEach(v.edges(),function(H){C.setEdge(H,v.edge(H))}),C},successorWeights:function(v){var C=Rt.map(v.nodes(),function(H){var J={};return Rt.forEach(v.outEdges(H),function(se){J[se.w]=(J[se.w]||0)+v.edge(se).weight}),J});return Rt.zipObject(v.nodes(),C)},predecessorWeights:function(v){var C=Rt.map(v.nodes(),function(H){var J={};return Rt.forEach(v.inEdges(H),function(se){J[se.v]=(J[se.v]||0)+v.edge(se).weight}),J});return Rt.zipObject(v.nodes(),C)},intersectRect:function(v,C){var H,J,se=v.x,he=v.y,ye=C.x-se,Se=C.y-he,Ie=v.width/2,Be=v.height/2;if(!ye&&!Se)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(Se)*Ie>Math.abs(ye)*Be?(Se<0&&(Be=-Be),H=Be*ye/Se,J=Be):(ye<0&&(Ie=-Ie),H=Ie,J=Ie*Se/ye),{x:se+H,y:he+J}},buildLayerMatrix:function(v){var C=Rt.map(Rt.range(tu(v)+1),function(){return[]});return Rt.forEach(v.nodes(),function(H){var J=v.node(H),se=J.rank;Rt.isUndefined(se)||(C[se][J.order]=H)}),C},normalizeRanks:function(v){var C=Rt.min(Rt.map(v.nodes(),function(H){return v.node(H).rank}));Rt.forEach(v.nodes(),function(H){var J=v.node(H);Rt.has(J,"rank")&&(J.rank-=C)})},removeEmptyRanks:function(v){var C=Rt.min(Rt.map(v.nodes(),function(he){return v.node(he).rank})),H=[];Rt.forEach(v.nodes(),function(he){var ye=v.node(he).rank-C;H[ye]||(H[ye]=[]),H[ye].push(he)});var J=0,se=v.graph().nodeRankFactor;Rt.forEach(H,function(he,ye){Rt.isUndefined(he)&&ye%se!=0?--J:J&&Rt.forEach(he,function(Se){v.node(Se).rank+=J})})},addBorderNode:function(v,C,H,J){var se={width:0,height:0};return arguments.length>=4&&(se.rank=H,se.order=J),hf(v,"border",se,C)},maxRank:tu,partition:function(v,C){var H={lhs:[],rhs:[]};return Rt.forEach(v,function(J){C(J)?H.lhs.push(J):H.rhs.push(J)}),H},time:function(v,C){var H=Rt.now();try{return C()}finally{console.log(v+" time: "+(Rt.now()-H)+"ms")}},notime:function(v,C){return C()}};function hf(v,C,H,J){var se;do{se=Rt.uniqueId(J)}while(v.hasNode(se));return H.dummy=C,v.setNode(se,H),se}function tu(v){return Rt.max(Rt.map(v.nodes(),function(C){var H=v.node(C).rank;if(!Rt.isUndefined(H))return H}))}var As=function(v){var C={};Rt.forEach(v.sources(),function H(J){var se=v.node(J);if(Rt.has(C,J))return se.rank;C[J]=!0;var he=Rt.min(Rt.map(v.outEdges(J),function(ye){return H(ye.w)-v.edge(ye).minlen}));return he!==Number.POSITIVE_INFINITY&&null!=he||(he=0),se.rank=he})},xl=function(v,C){return v.node(C.w).rank-v.node(C.v).rank-v.edge(C).minlen},tl=Js.Graph,yu=xl,nl=function(v){var C,H,J=new tl({directed:!1}),se=v.nodes()[0],he=v.nodeCount();for(J.setNode(se,{});lc(J,v)<he;)C=El(J,v),H=J.hasNode(C.v)?yu(v,C):-yu(v,C),_l(J,v,H);return J};function lc(v,C){return Rt.forEach(v.nodes(),function H(J){Rt.forEach(C.nodeEdges(J),function(se){var he=se.v,ye=J===he?se.w:he;v.hasNode(ye)||yu(C,se)||(v.setNode(ye,{}),v.setEdge(J,ye,{}),H(ye))})}),v.nodeCount()}function El(v,C){return Rt.minBy(C.edges(),function(H){if(v.hasNode(H.v)!==v.hasNode(H.w))return yu(C,H)})}function _l(v,C,H){Rt.forEach(v.nodes(),function(J){C.node(J).rank+=H})}var fh=xl,hh=As,dh=Js.alg.preorder,df=Js.alg.postorder,cc=ca.simplify,gf=Bs;function Bs(v){v=cc(v),hh(v);var C,H=nl(v);for(ud(H),sd(H,v);C=gh(H);)Sl(H,v,C,Zp(H,v,C))}function sd(v,C){var H=df(v,v.nodes());H=H.slice(0,H.length-1),Rt.forEach(H,function(J){var se,he,ye,Se;he=C,Se=(se=v).node(ye=J).parent,se.edge(ye,Se).cutvalue=fc(se,he,ye)})}function fc(v,C,H){var J=v.node(H).parent,se=!0,he=C.edge(H,J),ye=0;return he||(se=!1,he=C.edge(J,H)),ye=he.weight,Rt.forEach(C.nodeEdges(H),function(Se){var nt=Se.v===H,Qe=nt?Se.w:Se.v;if(Qe!==J){var St=nt===se,Yt=C.edge(Se).weight;if(ye+=St?Yt:-Yt,v.hasEdge(H,Qe)){var Mn=v.edge(H,Qe).cutvalue;ye+=St?-Mn:Mn}}}),ye}function ud(v,C){arguments.length<2&&(C=v.nodes()[0]),bg(v,{},1,C)}function bg(v,C,H,J,se){var he=H,ye=v.node(J);return C[J]=!0,Rt.forEach(v.neighbors(J),function(Se){Rt.has(C,Se)||(H=bg(v,C,H,Se,J))}),ye.low=he,ye.lim=H++,se?ye.parent=se:delete ye.parent,H}function gh(v){return Rt.find(v.edges(),function(C){return v.edge(C).cutvalue<0})}function Zp(v,C,H){var J=H.v,se=H.w;C.hasEdge(J,se)||(J=H.w,se=H.v);var he=v.node(J),ye=v.node(se),Se=he,Ie=!1;he.lim>ye.lim&&(Se=ye,Ie=!0);var Be=Rt.filter(C.edges(),function(nt){return Ie===pf(0,v.node(nt.v),Se)&&Ie!==pf(0,v.node(nt.w),Se)});return Rt.minBy(Be,function(nt){return fh(C,nt)})}function Sl(v,C,H,J){var ye,Se,Ie,Be;v.removeEdge(H.v,H.w),v.setEdge(J.v,J.w,{}),ud(v),sd(v,C),Se=C,Ie=Rt.find((ye=v).nodes(),function(nt){return!Se.node(nt).parent}),Be=(Be=dh(ye,Ie)).slice(1),Rt.forEach(Be,function(nt){var Qe=ye.node(nt).parent,St=Se.edge(nt,Qe),Yt=!1;St||(St=Se.edge(Qe,nt),Yt=!0),Se.node(nt).rank=Se.node(Qe).rank+(Yt?St.minlen:-St.minlen)})}function pf(v,C,H){return H.low<=C.lim&&C.lim<=H.lim}Bs.initLowLimValues=ud,Bs.initCutValues=sd,Bs.calcCutValue=fc,Bs.leaveEdge=gh,Bs.enterEdge=Zp,Bs.exchangeEdges=Sl;var hc=As,dc=hc;var gc_run=function(v){var C=ca.addDummyNode(v,"root",{},"_root"),H=function(ye){var Se={};function Ie(Be,nt){var Qe=ye.children(Be);Qe&&Qe.length&&Rt.forEach(Qe,function(St){Ie(St,nt+1)}),Se[Be]=nt}return Rt.forEach(ye.children(),function(Be){Ie(Be,1)}),Se}(v),J=Rt.max(Rt.values(H))-1,se=2*J+1;v.graph().nestingRoot=C,Rt.forEach(v.edges(),function(ye){v.edge(ye).minlen*=se});var ye,he=Rt.reduce((ye=v).edges(),function(Se,Ie){return Se+ye.edge(Ie).weight},0)+1;Rt.forEach(v.children(),function(ye){H0(v,C,se,he,J,H,ye)}),v.graph().nodeRankFactor=se};function H0(v,C,H,J,se,he,ye){var Se=v.children(ye);if(Se.length){var Ie=ca.addBorderNode(v,"_bt"),Be=ca.addBorderNode(v,"_bb"),nt=v.node(ye);v.setParent(Ie,ye),nt.borderTop=Ie,v.setParent(Be,ye),nt.borderBottom=Be,Rt.forEach(Se,function(Qe){H0(v,C,H,J,se,he,Qe);var St=v.node(Qe),Yt=St.borderTop?St.borderTop:Qe,Mn=St.borderBottom?St.borderBottom:Qe,tn=St.borderTop?J:2*J,rn=Yt!==Mn?1:se-he[ye]+1;v.setEdge(Ie,Yt,{weight:tn,minlen:rn,nestingEdge:!0}),v.setEdge(Mn,Be,{weight:tn,minlen:rn,nestingEdge:!0})}),v.parent(ye)||v.setEdge(C,Ie,{weight:0,minlen:se+he[ye]})}else ye!==C&&v.setEdge(C,ye,{weight:0,minlen:H})}function bi(v,C,H,J,se,he){var Se=se[C][he-1],Ie=ca.addDummyNode(v,"border",{width:0,height:0,rank:he,borderType:C},H);se[C][he]=Ie,v.setParent(Ie,J),Se&&v.setEdge(Se,Ie,{weight:1})}function Y0(v){Rt.forEach(v.nodes(),function(C){X0(v.node(C))}),Rt.forEach(v.edges(),function(C){X0(v.edge(C))})}function X0(v){var C=v.width;v.width=v.height,v.height=C}function Qp(v){v.y=-v.y}function ld(v){var C=v.x;v.x=v.y,v.y=C}var _g=function(v,C){for(var H=0,J=1;J<C.length;++J)H+=Ml(v,C[J-1],C[J]);return H};function Ml(v,C,H){for(var J=Rt.zipObject(H,Rt.map(H,function(Be,nt){return nt})),se=Rt.flatten(Rt.map(C,function(Be){return Rt.sortBy(Rt.map(v.outEdges(Be),function(nt){return{pos:J[nt.w],weight:v.edge(nt).weight}}),"pos")}),!0),he=1;he<H.length;)he<<=1;var ye=2*he-1;he-=1;var Se=Rt.map(new Array(ye),function(){return 0}),Ie=0;return Rt.forEach(se.forEach(function(Be){var nt=Be.pos+he;Se[nt]+=Be.weight;for(var Qe=0;nt>0;)nt%2&&(Qe+=Se[nt+1]),Se[nt=nt-1>>1]+=Be.weight;Ie+=Be.weight*Qe})),Ie}function pc(v,C,H){for(var J;C.length&&(J=Rt.last(C)).i<=H;)C.pop(),v.push(J.vs),H++;return H}var vc=function v(C,H,J,se){var he=C.children(H),ye=C.node(H),Se=ye?ye.borderLeft:void 0,Ie=ye?ye.borderRight:void 0,Be={};Se&&(he=Rt.filter(he,function(tn){return tn!==Se&&tn!==Ie}));var nt=function(v,C){return Rt.map(C,function(H){var J=v.inEdges(H);if(J.length){var se=Rt.reduce(J,function(he,ye){var Se=v.edge(ye),Ie=v.node(ye.v);return{sum:he.sum+Se.weight*Ie.order,weight:he.weight+Se.weight}},{sum:0,weight:0});return{v:H,barycenter:se.sum/se.weight,weight:se.weight}}return{v:H}})}(C,he);Rt.forEach(nt,function(tn){if(C.children(tn.v).length){var rn=v(C,tn.v,J,se);Be[tn.v]=rn,Rt.has(rn,"barycenter")&&(qn=rn,Rt.isUndefined((nn=tn).barycenter)?(nn.barycenter=qn.barycenter,nn.weight=qn.weight):(nn.barycenter=(nn.barycenter*nn.weight+qn.barycenter*qn.weight)/(nn.weight+qn.weight),nn.weight+=qn.weight))}var nn,qn});var rn,Qe=function(v,C){var H={};return Rt.forEach(v,function(J,se){var he=H[J.v]={indegree:0,in:[],out:[],vs:[J.v],i:se};Rt.isUndefined(J.barycenter)||(he.barycenter=J.barycenter,he.weight=J.weight)}),Rt.forEach(C.edges(),function(J){var se=H[J.v],he=H[J.w];Rt.isUndefined(se)||Rt.isUndefined(he)||(he.indegree++,se.out.push(H[J.w]))}),function(J){var se=[];function he(Ie){return function(Be){var nt,Qe,St,Yt;Be.merged||(Rt.isUndefined(Be.barycenter)||Rt.isUndefined(Ie.barycenter)||Be.barycenter>=Ie.barycenter)&&(St=0,Yt=0,(nt=Ie).weight&&(St+=nt.barycenter*nt.weight,Yt+=nt.weight),(Qe=Be).weight&&(St+=Qe.barycenter*Qe.weight,Yt+=Qe.weight),nt.vs=Qe.vs.concat(nt.vs),nt.barycenter=St/Yt,nt.weight=Yt,nt.i=Math.min(Qe.i,nt.i),Qe.merged=!0)}}function ye(Ie){return function(Be){Be.in.push(Ie),0==--Be.indegree&&J.push(Be)}}for(;J.length;){var Se=J.pop();se.push(Se),Rt.forEach(Se.in.reverse(),he(Se)),Rt.forEach(Se.out,ye(Se))}return Rt.map(Rt.filter(se,function(Ie){return!Ie.merged}),function(Ie){return Rt.pick(Ie,["vs","i","barycenter","weight"])})}(Rt.filter(H,function(J){return!J.indegree}))}(nt,J);rn=Be,Rt.forEach(Qe,function(nn){nn.vs=Rt.flatten(nn.vs.map(function(qn){return rn[qn]?rn[qn].vs:qn}),!0)});var St=function(v,C){var H=ca.partition(v,function(Qe){return Rt.has(Qe,"barycenter")}),J=H.lhs,se=Rt.sortBy(H.rhs,function(Qe){return-Qe.i}),he=[],ye=0,Se=0,Ie=0;J.sort((Be=!!C,function(Qe,St){return Qe.barycenter<St.barycenter?-1:Qe.barycenter>St.barycenter?1:Be?St.i-Qe.i:Qe.i-St.i})),Ie=pc(he,se,Ie),Rt.forEach(J,function(Qe){Ie+=Qe.vs.length,he.push(Qe.vs),ye+=Qe.barycenter*Qe.weight,Se+=Qe.weight,Ie=pc(he,se,Ie)});var Be,nt={vs:Rt.flatten(he,!0)};return Se&&(nt.barycenter=ye/Se,nt.weight=Se),nt}(Qe,se);if(Se&&(St.vs=Rt.flatten([Se,St.vs,Ie],!0),C.predecessors(Se).length)){var Yt=C.node(C.predecessors(Se)[0]),Mn=C.node(C.predecessors(Ie)[0]);Rt.has(St,"barycenter")||(St.barycenter=0,St.weight=0),St.barycenter=(St.barycenter*St.weight+Yt.order+Mn.order)/(St.weight+2),St.weight+=2}return St},Mg=Js.Graph,js=Js.Graph;function rl(v,C,H){return Rt.map(C,function(J){return function(v,C,H){var J=function(he){for(var ye;he.hasNode(ye=Rt.uniqueId("_root")););return ye}(v),se=new Mg({compound:!0}).setGraph({root:J}).setDefaultNodeLabel(function(he){return v.node(he)});return Rt.forEach(v.nodes(),function(he){var ye=v.node(he),Se=v.parent(he);(ye.rank===C||ye.minRank<=C&&C<=ye.maxRank)&&(se.setNode(he),se.setParent(he,Se||J),Rt.forEach(v[H](he),function(Ie){var Be=Ie.v===he?Ie.w:Ie.v,nt=se.edge(Be,he),Qe=Rt.isUndefined(nt)?0:nt.weight;se.setEdge(Be,he,{weight:v.edge(Ie).weight+Qe})}),Rt.has(ye,"minRank")&&se.setNode(he,{borderLeft:ye.borderLeft[C],borderRight:ye.borderRight[C]}))}),se}(v,J,H)})}function il(v,C){var H=new js;Rt.forEach(v,function(J){var se=J.graph().root,he=vc(J,se,H,C);Rt.forEach(he.vs,function(ye,Se){J.node(ye).order=Se}),function(v,C,H){var J,se={};Rt.forEach(H,function(he){for(var ye,Se,Ie=v.parent(he);Ie;){if((ye=v.parent(Ie))?(Se=se[ye],se[ye]=Ie):(Se=J,J=Ie),Se&&Se!==Ie)return void C.setEdge(Se,Ie);Ie=ye}})}(J,H,he.vs)})}function mc(v,C){Rt.forEach(C,function(H){Rt.forEach(H,function(J,se){v.node(J).order=se})})}var ev=Js.Graph;function vh(v,C,H){if(C>H){var J=C;C=H,H=J}var se=v[C];se||(v[C]=se={}),se[H]=!0}function zs(v,C,H){if(C>H){var J=C;C=H,H=J}return Rt.has(v[C],H)}var rv=ca.normalizeRanks,Z0=ca.removeEmptyRanks,La=ca,fd=Js.Graph,bc=["nodesep","edgesep","ranksep","marginx","marginy"],wf={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},mh=["acyclicer","ranker","rankdir","align"],wc=["width","height"],iv={width:0,height:0},fs=["minlen","weight","width","height","labeloffset"],Cl={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Ho=["labelpos"];function ya(v,C){return Rt.mapValues(Rt.pick(v,C),Number)}function al(v){var C={};return Rt.forEach(v,function(H,J){C[J.toLowerCase()]=H}),C}var Q0=Js.Graph,si={graphlib:Js,layout:function(v,C){var H=C&&C.debugTiming?La.time:La.notime;H("layout",function(){var J=H("  buildLayoutGraph",function(){return se=v,he=new fd({multigraph:!0,compound:!0}),ye=al(se.graph()),he.setGraph(Rt.merge({},wf,ya(ye,bc),Rt.pick(ye,mh))),Rt.forEach(se.nodes(),function(Se){var Ie=al(se.node(Se));he.setNode(Se,Rt.defaults(ya(Ie,wc),iv)),he.setParent(Se,se.parent(Se))}),Rt.forEach(se.edges(),function(Se){var Ie=al(se.edge(Se));he.setEdge(Se,Rt.merge({},Cl,ya(Ie,fs),Rt.pick(Ie,Ho)))}),he;var se,he,ye});H("  runLayout",function(){var se,he;se=J,(he=H)("    makeSpaceForEdgeLabels",function(){var ye,Se;(Se=(ye=se).graph()).ranksep/=2,Rt.forEach(ye.edges(),function(Ie){var Be=ye.edge(Ie);Be.minlen*=2,"c"!==Be.labelpos.toLowerCase()&&("TB"===Se.rankdir||"BT"===Se.rankdir?Be.width+=Be.labeloffset:Be.height+=Be.labeloffset)})}),he("    removeSelfEdges",function(){var ye;Rt.forEach((ye=se).edges(),function(Se){if(Se.v===Se.w){var Ie=ye.node(Se.v);Ie.selfEdges||(Ie.selfEdges=[]),Ie.selfEdges.push({e:Se,label:ye.edge(Se)}),ye.removeEdge(Se)}})}),he("    acyclic",function(){!function(v){var C="greedy"===v.graph().acyclicer?function(v,C){if(v.nodeCount()<=1)return[];var H=function(se,he){var ye=new wl,Se=0,Ie=0;Rt.forEach(se.nodes(),function(Qe){ye.setNode(Qe,{v:Qe,in:0,out:0})}),Rt.forEach(se.edges(),function(Qe){var St=ye.edge(Qe.v,Qe.w)||0,Yt=he(Qe);ye.setEdge(Qe.v,Qe.w,St+Yt),Ie=Math.max(Ie,ye.node(Qe.v).out+=Yt),Se=Math.max(Se,ye.node(Qe.w).in+=Yt)});var Be=Rt.range(Ie+Se+3).map(function(){return new mg}),nt=Se+1;return Rt.forEach(ye.nodes(),function(Qe){uc(Be,nt,ye.node(Qe))}),{graph:ye,buckets:Be,zeroIdx:nt}}(v,C||ac),J=function(se,he,ye){for(var Se,Ie=[],Be=he[he.length-1],nt=he[0];se.nodeCount();){for(;Se=nt.dequeue();)sc(se,he,ye,Se);for(;Se=Be.dequeue();)sc(se,he,ye,Se);if(se.nodeCount())for(var Qe=he.length-2;Qe>0;--Qe)if(Se=he[Qe].dequeue()){Ie=Ie.concat(sc(se,he,ye,Se,!0));break}}return Ie}(H.graph,H.buckets,H.zeroIdx);return Rt.flatten(Rt.map(J,function(se){return v.outEdges(se.v,se.w)}),!0)}(v,function(H){return function(J){return H.edge(J).weight}}(v)):function(H){var J=[],se={},he={};return Rt.forEach(H.nodes(),function ye(Se){Rt.has(he,Se)||(he[Se]=!0,se[Se]=!0,Rt.forEach(H.outEdges(Se),function(Ie){Rt.has(se,Ie.w)?J.push(Ie):ye(Ie.w)}),delete se[Se])}),J}(v);Rt.forEach(C,function(H){var J=v.edge(H);v.removeEdge(H),J.forwardName=H.name,J.reversed=!0,v.setEdge(H.w,H.v,J,Rt.uniqueId("rev"))})}(se)}),he("    nestingGraph.run",function(){gc_run(se)}),he("    rank",function(){!function(v){switch(v.graph().ranker){case"network-simplex":default:!function wg(v){gf(v)}(v);break;case"tight-tree":!function(C){hc(C),nl(C)}(v);break;case"longest-path":dc(v)}}(La.asNonCompoundGraph(se))}),he("    injectEdgeLabelProxies",function(){var ye;Rt.forEach((ye=se).edges(),function(Se){var Ie=ye.edge(Se);if(Ie.width&&Ie.height){var Be=ye.node(Se.v),nt={rank:(ye.node(Se.w).rank-Be.rank)/2+Be.rank,e:Se};La.addDummyNode(ye,"edge-proxy",nt,"_ep")}})}),he("    removeEmptyRanks",function(){Z0(se)}),he("    nestingGraph.cleanup",function(){!function(v){var C=v.graph();v.removeNode(C.nestingRoot),delete C.nestingRoot,Rt.forEach(v.edges(),function(H){v.edge(H).nestingEdge&&v.removeEdge(H)})}(se)}),he("    normalizeRanks",function(){rv(se)}),he("    assignRankMinMax",function(){var ye,Se;Se=0,Rt.forEach((ye=se).nodes(),function(Ie){var Be=ye.node(Ie);Be.borderTop&&(Be.minRank=ye.node(Be.borderTop).rank,Be.maxRank=ye.node(Be.borderBottom).rank,Se=Rt.max(Se,Be.maxRank))}),ye.graph().maxRank=Se}),he("    removeEdgeLabelProxies",function(){var ye;Rt.forEach((ye=se).nodes(),function(Se){var Ie=ye.node(Se);"edge-proxy"===Ie.dummy&&(ye.edge(Ie.e).labelRank=Ie.rank,ye.removeNode(Se))})}),he("    normalize.run",function(){!function(v){v.graph().dummyChains=[],Rt.forEach(v.edges(),function(C){!function(H,J){var se,he,ye,Se=J.v,Ie=H.node(Se).rank,Be=J.w,nt=H.node(Be).rank,Qe=J.name,St=H.edge(J),Yt=St.labelRank;if(nt!==Ie+1){for(H.removeEdge(J),ye=0,++Ie;Ie<nt;++ye,++Ie)St.points=[],se=ca.addDummyNode(H,"edge",he={width:0,height:0,edgeLabel:St,edgeObj:J,rank:Ie},"_d"),Ie===Yt&&(he.width=St.width,he.height=St.height,he.dummy="edge-label",he.labelpos=St.labelpos),H.setEdge(Se,se,{weight:St.weight},Qe),0===ye&&H.graph().dummyChains.push(se),Se=se;H.setEdge(Se,Be,{weight:St.weight},Qe)}}(v,C)})}(se)}),he("    parentDummyChains",function(){!function(v){var C=function(H){var J={},se=0;return Rt.forEach(H.children(),function he(ye){var Se=se;Rt.forEach(H.children(ye),he),J[ye]={low:Se,lim:se++}}),J}(v);Rt.forEach(v.graph().dummyChains,function(H){for(var J=v.node(H),se=J.edgeObj,he=function(Qe,St,Yt,Mn){var tn,rn,nn=[],qn=[],fr=Math.min(St[Yt].low,St[Mn].low),ar=Math.max(St[Yt].lim,St[Mn].lim);tn=Yt;do{tn=Qe.parent(tn),nn.push(tn)}while(tn&&(St[tn].low>fr||ar>St[tn].lim));for(rn=tn,tn=Mn;(tn=Qe.parent(tn))!==rn;)qn.push(tn);return{path:nn.concat(qn.reverse()),lca:rn}}(v,C,se.v,se.w),ye=he.path,Se=he.lca,Ie=0,Be=ye[Ie],nt=!0;H!==se.w;){if(J=v.node(H),nt){for(;(Be=ye[Ie])!==Se&&v.node(Be).maxRank<J.rank;)Ie++;Be===Se&&(nt=!1)}if(!nt){for(;Ie<ye.length-1&&v.node(Be=ye[Ie+1]).minRank<=J.rank;)Ie++;Be=ye[Ie]}v.setParent(H,Be),H=v.successors(H)[0]}})}(se)}),he("    addBorderSegments",function(){!function(v){Rt.forEach(v.children(),function C(H){var J=v.children(H),se=v.node(H);if(J.length&&Rt.forEach(J,C),Rt.has(se,"minRank")){se.borderLeft=[],se.borderRight=[];for(var he=se.minRank,ye=se.maxRank+1;he<ye;++he)bi(v,"borderLeft","_bl",H,se,he),bi(v,"borderRight","_br",H,se,he)}})}(se)}),he("    order",function(){!function(v){var C=ca.maxRank(v),H=rl(v,Rt.range(1,C+1),"inEdges"),J=rl(v,Rt.range(C-1,-1,-1),"outEdges"),se=function(v){var C={},H=Rt.filter(v.nodes(),function(Se){return!v.children(Se).length}),J=Rt.max(Rt.map(H,function(Se){return v.node(Se).rank})),se=Rt.map(Rt.range(J+1),function(){return[]}),ye=Rt.sortBy(H,function(Se){return v.node(Se).rank});return Rt.forEach(ye,function he(Se){if(!Rt.has(C,Se)){C[Se]=!0;var Ie=v.node(Se);se[Ie.rank].push(Se),Rt.forEach(v.successors(Se),he)}}),se}(v);mc(v,se);for(var he,ye=Number.POSITIVE_INFINITY,Se=0,Ie=0;Ie<4;++Se,++Ie){il(Se%2?H:J,Se%4>=2),se=ca.buildLayerMatrix(v);var Be=_g(v,se);Be<ye&&(Ie=0,he=Rt.cloneDeep(se),ye=Be)}mc(v,he)}(se)}),he("    insertSelfEdges",function(){var ye,Se;Se=La.buildLayerMatrix(ye=se),Rt.forEach(Se,function(Ie){var Be=0;Rt.forEach(Ie,function(nt,Qe){var St=ye.node(nt);St.order=Qe+Be,Rt.forEach(St.selfEdges,function(Yt){La.addDummyNode(ye,"selfedge",{width:Yt.label.width,height:Yt.label.height,rank:St.rank,order:Qe+ ++Be,e:Yt.e,label:Yt.label},"_se")}),delete St.selfEdges})})}),he("    adjustCoordinateSystem",function(){!function(v){var C=v.graph().rankdir.toLowerCase();"lr"!==C&&"rl"!==C||Y0(v)}(se)}),he("    position",function(){!function(v){(function(C){var H=ca.buildLayerMatrix(C),J=C.graph().ranksep,se=0;Rt.forEach(H,function(he){var ye=Rt.max(Rt.map(he,function(Se){return C.node(Se).height}));Rt.forEach(he,function(Se){C.node(Se).y=se+ye/2}),se+=ye+J})})(v=ca.asNonCompoundGraph(v)),Rt.forEach(function(v){var C,H=ca.buildLayerMatrix(v),J=Rt.merge(function yf(v,C){var H={};return Rt.reduce(C,function(J,se){var he=0,ye=0,Se=J.length,Ie=Rt.last(se);return Rt.forEach(se,function(Be,nt){var Qe=function(Yt,Mn){if(Yt.node(Mn).dummy)return Rt.find(Yt.predecessors(Mn),function(tn){return Yt.node(tn).dummy})}(v,Be),St=Qe?v.node(Qe).order:Se;(Qe||Be===Ie)&&(Rt.forEach(se.slice(ye,nt+1),function(Yt){Rt.forEach(v.predecessors(Yt),function(Mn){var tn=v.node(Mn),rn=tn.order;!(rn<he||St<rn)||tn.dummy&&v.node(Yt).dummy||vh(H,Mn,Yt)})}),ye=nt+1,he=St)}),se}),H}(v,H),function q0(v,C){var H={};function J(se,he,ye,Se,Ie){var Be;Rt.forEach(Rt.range(he,ye),function(nt){v.node(Be=se[nt]).dummy&&Rt.forEach(v.predecessors(Be),function(Qe){var St=v.node(Qe);St.dummy&&(St.order<Se||St.order>Ie)&&vh(H,Qe,Be)})})}return Rt.reduce(C,function(se,he){var ye,Se=-1,Ie=0;return Rt.forEach(he,function(Be,nt){if("border"===v.node(Be).dummy){var Qe=v.predecessors(Be);Qe.length&&(ye=v.node(Qe[0]).order,J(he,Ie,nt,Se,ye),Ie=nt,Se=ye)}J(he,Ie,he.length,ye,se.length)}),he}),H}(v,H)),se={};Rt.forEach(["u","d"],function(ye){C="u"===ye?H:Rt.values(H).reverse(),Rt.forEach(["l","r"],function(Se){"r"===Se&&(C=Rt.map(C,function(Qe){return Rt.values(Qe).reverse()}));var Ie=("u"===ye?v.predecessors:v.successors).bind(v),Be=function Cg(v,C,H,J){var se={},he={},ye={};return Rt.forEach(C,function(Se){Rt.forEach(Se,function(Ie,Be){se[Ie]=Ie,he[Ie]=Ie,ye[Ie]=Be})}),Rt.forEach(C,function(Se){var Ie=-1;Rt.forEach(Se,function(Be){var nt=J(Be);if(nt.length)for(var Qe=((nt=Rt.sortBy(nt,function(tn){return ye[tn]})).length-1)/2,St=Math.floor(Qe),Yt=Math.ceil(Qe);St<=Yt;++St){var Mn=nt[St];he[Be]===Be&&Ie<ye[Mn]&&!zs(H,Be,Mn)&&(he[Mn]=Be,he[Be]=se[Be]=se[Mn],Ie=ye[Mn])}})}),{root:se,align:he}}(0,C,J,Ie),nt=function bf(v,C,H,J,se){var he={},ye=function(Be,nt,Qe,St){var rn,nn,qn,Yt=new ev,Mn=Be.graph(),tn=(rn=Mn.nodesep,nn=Mn.edgesep,qn=St,function(fr,ar,Pr){var Tr,Ur=fr.node(ar),ti=fr.node(Pr),Lr=0;if(Lr+=Ur.width/2,Rt.has(Ur,"labelpos"))switch(Ur.labelpos.toLowerCase()){case"l":Tr=-Ur.width/2;break;case"r":Tr=Ur.width/2}if(Tr&&(Lr+=qn?Tr:-Tr),Tr=0,Lr+=(Ur.dummy?nn:rn)/2,Lr+=(ti.dummy?nn:rn)/2,Lr+=ti.width/2,Rt.has(ti,"labelpos"))switch(ti.labelpos.toLowerCase()){case"l":Tr=ti.width/2;break;case"r":Tr=-ti.width/2}return Tr&&(Lr+=qn?Tr:-Tr),Tr=0,Lr});return Rt.forEach(nt,function(rn){var nn;Rt.forEach(rn,function(qn){var fr=Qe[qn];if(Yt.setNode(fr),nn){var ar=Qe[nn],Pr=Yt.edge(ar,fr);Yt.setEdge(ar,fr,Math.max(tn(Be,qn,nn),Pr||0))}nn=qn})}),Yt}(v,C,H,se),Se=se?"borderLeft":"borderRight";function Ie(Be,nt){for(var Qe=ye.nodes(),St=Qe.pop(),Yt={};St;)Yt[St]?Be(St):(Yt[St]=!0,Qe.push(St),Qe=Qe.concat(nt(St))),St=Qe.pop()}return Ie(function(Be){he[Be]=ye.inEdges(Be).reduce(function(nt,Qe){return Math.max(nt,he[Qe.v]+ye.edge(Qe))},0)},ye.predecessors.bind(ye)),Ie(function(Be){var nt=ye.outEdges(Be).reduce(function(St,Yt){return Math.min(St,he[Yt.w]-ye.edge(Yt))},Number.POSITIVE_INFINITY),Qe=v.node(Be);nt!==Number.POSITIVE_INFINITY&&Qe.borderType!==Se&&(he[Be]=Math.max(he[Be],nt))},ye.successors.bind(ye)),Rt.forEach(J,function(Be){he[Be]=he[H[Be]]}),he}(v,C,Be.root,Be.align,"r"===Se);"r"===Se&&(nt=Rt.mapValues(nt,function(Qe){return-Qe})),se[ye+Se]=nt})});var he=function yc(v,C){return Rt.minBy(Rt.values(C),function(H){var J=Number.NEGATIVE_INFINITY,se=Number.POSITIVE_INFINITY;return Rt.forIn(H,function(he,ye){var Se=v.node(ye).width/2;J=Math.max(he+Se,J),se=Math.min(he-Se,se)}),J-se})}(v,se);return function Ag(v,C){var H=Rt.values(C),J=Rt.min(H),se=Rt.max(H);Rt.forEach(["u","d"],function(he){Rt.forEach(["l","r"],function(ye){var Se,Ie=he+ye,Be=v[Ie];if(Be!==C){var nt=Rt.values(Be);(Se="l"===ye?J-Rt.min(nt):se-Rt.max(nt))&&(v[Ie]=Rt.mapValues(Be,function(Qe){return Qe+Se}))}})})}(se,he),function tv(v,C){return Rt.mapValues(v.ul,function(H,J){if(C)return v[C.toLowerCase()][J];var se=Rt.sortBy(Rt.map(v,J));return(se[1]+se[2])/2})}(se,v.graph().align)}(v),function(C,H){v.node(H).x=C})}(se)}),he("    positionSelfEdges",function(){var ye;Rt.forEach((ye=se).nodes(),function(Se){var Ie=ye.node(Se);if("selfedge"===Ie.dummy){var Be=ye.node(Ie.e.v),nt=Be.x+Be.width/2,Qe=Be.y,St=Ie.x-nt,Yt=Be.height/2;ye.setEdge(Ie.e,Ie.label),ye.removeNode(Se),Ie.label.points=[{x:nt+2*St/3,y:Qe-Yt},{x:nt+5*St/6,y:Qe-Yt},{x:nt+St,y:Qe},{x:nt+5*St/6,y:Qe+Yt},{x:nt+2*St/3,y:Qe+Yt}],Ie.label.x=Ie.x,Ie.label.y=Ie.y}})}),he("    removeBorderNodes",function(){var ye;Rt.forEach((ye=se).nodes(),function(Se){if(ye.children(Se).length){var Ie=ye.node(Se),Be=ye.node(Ie.borderTop),nt=ye.node(Ie.borderBottom),Qe=ye.node(Rt.last(Ie.borderLeft)),St=ye.node(Rt.last(Ie.borderRight));Ie.width=Math.abs(St.x-Qe.x),Ie.height=Math.abs(nt.y-Be.y),Ie.x=Qe.x+Ie.width/2,Ie.y=Be.y+Ie.height/2}}),Rt.forEach(ye.nodes(),function(Se){"border"===ye.node(Se).dummy&&ye.removeNode(Se)})}),he("    normalize.undo",function(){!function(v){Rt.forEach(v.graph().dummyChains,function(C){var H,J=v.node(C),se=J.edgeLabel;for(v.setEdge(J.edgeObj,se);J.dummy;)H=v.successors(C)[0],v.removeNode(C),se.points.push({x:J.x,y:J.y}),"edge-label"===J.dummy&&(se.x=J.x,se.y=J.y,se.width=J.width,se.height=J.height),J=v.node(C=H)})}(se)}),he("    fixupEdgeLabelCoords",function(){var ye;Rt.forEach((ye=se).edges(),function(Se){var Ie=ye.edge(Se);if(Rt.has(Ie,"x"))switch("l"!==Ie.labelpos&&"r"!==Ie.labelpos||(Ie.width-=Ie.labeloffset),Ie.labelpos){case"l":Ie.x-=Ie.width/2+Ie.labeloffset;break;case"r":Ie.x+=Ie.width/2+Ie.labeloffset}})}),he("    undoCoordinateSystem",function(){!function(v){var C=v.graph().rankdir.toLowerCase();"bt"!==C&&"rl"!==C||function(H){Rt.forEach(H.nodes(),function(J){Qp(H.node(J))}),Rt.forEach(H.edges(),function(J){var se=H.edge(J);Rt.forEach(se.points,Qp),Rt.has(se,"y")&&Qp(se)})}(v),"lr"!==C&&"rl"!==C||(function(H){Rt.forEach(H.nodes(),function(J){ld(H.node(J))}),Rt.forEach(H.edges(),function(J){var se=H.edge(J);Rt.forEach(se.points,ld),Rt.has(se,"x")&&ld(se)})}(v),Y0(v))}(se)}),he("    translateGraph",function(){!function(ye){var Se=Number.POSITIVE_INFINITY,Ie=0,Be=Number.POSITIVE_INFINITY,nt=0,Qe=ye.graph(),St=Qe.marginx||0,Yt=Qe.marginy||0;function Mn(tn){var rn=tn.x,nn=tn.y,qn=tn.width,fr=tn.height;Se=Math.min(Se,rn-qn/2),Ie=Math.max(Ie,rn+qn/2),Be=Math.min(Be,nn-fr/2),nt=Math.max(nt,nn+fr/2)}Rt.forEach(ye.nodes(),function(tn){Mn(ye.node(tn))}),Rt.forEach(ye.edges(),function(tn){var rn=ye.edge(tn);Rt.has(rn,"x")&&Mn(rn)}),Se-=St,Be-=Yt,Rt.forEach(ye.nodes(),function(tn){var rn=ye.node(tn);rn.x-=Se,rn.y-=Be}),Rt.forEach(ye.edges(),function(tn){var rn=ye.edge(tn);Rt.forEach(rn.points,function(nn){nn.x-=Se,nn.y-=Be}),Rt.has(rn,"x")&&(rn.x-=Se),Rt.has(rn,"y")&&(rn.y-=Be)}),Qe.width=Ie-Se+St,Qe.height=nt-Be+Yt}(se)}),he("    assignNodeIntersects",function(){var ye;Rt.forEach((ye=se).edges(),function(Se){var Ie,Be,nt=ye.edge(Se),Qe=ye.node(Se.v),St=ye.node(Se.w);nt.points?(Ie=nt.points[0],Be=nt.points[nt.points.length-1]):(nt.points=[],Ie=St,Be=Qe),nt.points.unshift(La.intersectRect(Qe,Ie)),nt.points.push(La.intersectRect(St,Be))})}),he("    reversePoints",function(){var ye;Rt.forEach((ye=se).edges(),function(Se){var Ie=ye.edge(Se);Ie.reversed&&Ie.points.reverse()})}),he("    acyclic.undo",function(){!function(v){Rt.forEach(v.edges(),function(C){var H=v.edge(C);if(H.reversed){v.removeEdge(C);var J=H.forwardName;delete H.reversed,delete H.forwardName,v.setEdge(C.w,C.v,H,J)}})}(se)})}),H("  updateInputGraph",function(){var se,he;he=J,Rt.forEach((se=v).nodes(),function(ye){var Se=se.node(ye),Ie=he.node(ye);Se&&(Se.x=Ie.x,Se.y=Ie.y,he.children(ye).length&&(Se.width=Ie.width,Se.height=Ie.height))}),Rt.forEach(se.edges(),function(ye){var Se=se.edge(ye),Ie=he.edge(ye);Se.points=Ie.points,Rt.has(Ie,"x")&&(Se.x=Ie.x,Se.y=Ie.y)}),se.graph().width=he.graph().width,se.graph().height=he.graph().height})})},debug:{debugOrdering:function(v){var C=ca.buildLayerMatrix(v),H=new Q0({compound:!0,multigraph:!0}).setGraph({});return Rt.forEach(v.nodes(),function(J){H.setNode(J,{label:J}),H.setParent(J,"layer"+v.node(J).rank)}),Rt.forEach(v.edges(),function(J){H.setEdge(J.v,J.w,{},J.name)}),Rt.forEach(C,function(J,se){H.setNode("layer"+se,{rank:"same"}),Rt.reduce(J,function(ye,Se){return H.setEdge(ye,Se,{style:"invis"}),Se})}),H}},util:{time:ca.time,notime:ca.notime},version:"0.8.5"},ov=si.graphlib,fa=si.layout;class hd{constructor(C){this.cardinality=1,this.include=x.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=I.NODE,this.name=C.name,this.attr=C.attr||{},this.inputs=C.inputs,this.path=C.path||[],this.width=C.width,this.height=C.height}}class yh{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}class em{constructor(C,H={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=x.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=I.META,this.path=[],this.name=C,this.metaGraph=bh(C,E.META,H)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map(C=>this.metaGraph.node(C))}leaves(){let C,H=[],J=[this];for(;J.length;){let se=J.shift();se.isGroupNode?(C=se.metaGraph,C.nodes().forEach(he=>J.push(C.node(he)))):H.push(se.name)}return H}}class tm{constructor(C,H){this.v=C,this.w=H,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(C,H){this.baseEdgeList.push(C)}}function dd(v,C={}){return new em(v,C)}function xc(v,C){return new tm(v,C)}function bh(v,C,H){const J=H||{},se=new ov.Graph(J);return se.setGraph({name:v,rankdir:J.rankdir,type:C,align:J.align}),se}class xf{constructor(C={}){this.graphOptions=C,this.index={},this.graphOptions.compound=!0,this.root=dd(k,this.graphOptions),this.index[k]=this.root}getNodeMap(){return this.index}node(C){return this.index[C]}setNode(C,H){this.index[C]=H}getBridgeGraph(C){const H=this.index[C];if(!H)throw Error("Could not find node in hierarchy: "+C);if(!("metaGraph"in H))return null;const J=H;if(J.bridgeGraph)return J.bridgeGraph;const se=bh(F,E.BRIDGE,this.graphOptions);if(J.bridgeGraph=se,!H.parentNode||!("metaGraph"in H.parentNode))return se;const he=H.parentNode;return[he.metaGraph,this.getBridgeGraph(he.name)].forEach(ye=>{ye.edges().filter(Se=>Se.v===C||Se.w===C).forEach(Se=>{const Ie=Se.w===C;ye.edge(Se).baseEdgeList.forEach(Be=>{const[nt,Qe]=Ie?[Be.w,Se.v]:[Be.v,Se.w],St=this.getChildName(C,nt),Yt={v:Ie?Qe:St,w:Ie?St:Qe};let Mn=se.edge(Yt);Mn||(Mn=xc(Yt.v,Yt.w),Mn.inbound=Ie,se.setEdge(Yt.v,Yt.w,Mn)),Mn.addBaseEdge(Be,this)})})}),se}getChildName(C,H){let J=this.index[H];for(;J;){if(J.parentNode&&J.parentNode.name===C)return J.name;J=J.parentNode}throw Error("Could not find immediate child for descendant: "+H)}getPredecessors(C){const H=this.index[C];if(!H)throw Error("Could not find node with name: "+C);return this.getOneWayEdges(H,!0)}getSuccessors(C){const H=this.index[C];if(!H)throw Error("Could not find node with name: "+C);return this.getOneWayEdges(H,!1)}getOneWayEdges(C,H){const J=[];if(!C.parentNode||!C.parentNode.isGroupNode)return J;const se=C.parentNode,he=se.metaGraph,ye=this.getBridgeGraph(se.name);return Dg(he,C,H,J),Dg(ye,C,H,J),J}}function Dg(v,C,H,J){(H?v.inEdges(C.name):v.outEdges(C.name)).forEach(se=>{const he=v.edge(se);J.push(he)})}class Ef{constructor(C){this.hierarchy=C,this.index={},this.hasSubHierarchy={},this.root=new ot(this.hierarchy.root,this.hierarchy.graphOptions),this.index[C.root.name]=this.root,this.buildSubHierarchy(C.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(C){if(C in this.hasSubHierarchy)return;this.hasSubHierarchy[C]=!0;const H=this.index[C];if(H.node.type!==I.META)return;const J=H,se=J.node.metaGraph,he=J.coreGraph;se.nodes().forEach(nt=>{const Qe=this.getOrCreateRenderNodeByName(nt);he.setNode(nt,Qe)}),se.edges().forEach(nt=>{const Qe=se.edge(nt),St=new xe(Qe);he.setEdge(nt.v,nt.w,St)});const ye=J.node.parentNode;if(!ye)return;const Se=this.getRenderNodeByName(ye.name),Ie=(nt,...Qe)=>Qe.concat([nt?"IN":"OUT"]).join("~~"),Be=this.hierarchy.getBridgeGraph(C);Be.edges().forEach(nt=>{const Qe=Be.edge(nt),St=!!se.node(nt.w),[Yt,Mn]=St?[nt.w,nt.v]:[nt.v,nt.w],tn=Pr=>Se.coreGraph.edge(St?{v:Pr,w:C}:{v:C,w:Pr});let rn=tn(Mn);rn||(rn=tn(Ie(St,Mn,ye.name)));const nn=Ie(St,C),qn=Ie(St,Mn,C);let fr=he.node(qn);if(!fr){let Pr=he.node(nn);Pr||(Pr=new Ec({name:nn,type:I.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:x.UNSPECIFIED,inbound:St,attr:{}}),this.index[nn]=Pr,he.setNode(nn,Pr)),fr=new Ec({name:qn,type:I.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:x.UNSPECIFIED,inbound:St,attr:{}}),this.index[qn]=fr,he.setNode(qn,fr),he.setParent(qn,nn),Pr.node.cardinality++}const ar=new xe(Qe);ar.adjoiningMetaEdge=rn,St?he.setEdge(qn,Yt,ar):he.setEdge(Yt,qn,ar)})}getOrCreateRenderNodeByName(C){if(!C)return null;if(C in this.index)return this.index[C];const H=this.getNodeByName(C);return H?(this.index[C]=H.isGroupNode?new ot(H,this.hierarchy.graphOptions):new Ec(H),this.index[C]):null}getRenderNodeByName(C){return this.index[C]}getNodeByName(C){return this.hierarchy.node(C)}}class Ec{constructor(C){this.node=C,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=C.width||0,this.height=C.height||0,this.displayName=C.name,this.attr=C.attr}}class xe{constructor(C){this.metaEdge=C,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class ot extends Ec{constructor(C,H){super(C);const J=C.metaGraph.graph();H.compound=!0,this.coreGraph=bh(J.name,E.CORE,H)}}function Dt(v,C){v.node.isGroupNode&&function(H,J){const se=Q(J);H.coreGraph.nodes().map(he=>H.coreGraph.node(he)).forEach(he=>{var ye,Se,Ie,Be,nt,Qe;const{height:St,width:Yt}=he;switch(he.node.type){case I.NODE:Object.assign(he,se.nodeSize.node),he.height=St||se.nodeSize.node.height,he.width=Yt||se.nodeSize.node.width;break;case I.BRIDGE:Object.assign(he,se.nodeSize.bridge);break;case I.META:he.expanded?Dt(he,J):(Object.assign(he,se.nodeSize.meta),he.height=se.nodeSize.meta.height,he.width=se.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+he.node.type)}if(!he.expanded){const Mn=he.attr;!function(tn,rn=!1){tn.coreBox.width=tn.width,tn.coreBox.height=tn.height,rn||(tn.width=Math.max(tn.coreBox.width,3*`${tn.displayName}`.length))}(he,J&&(0===he.node.type&&!(null===(Se=null===(ye=J?.nodeSize)||void 0===ye?void 0:ye.meta)||void 0===Se||!Se.width)||1===he.node.type&&(!(null===(Be=null===(Ie=J?.nodeSize)||void 0===Ie?void 0:Ie.node)||void 0===Be||!Be.width)||!!Mn.width)||2===he.node.type&&!(null===(Qe=null===(nt=J?.nodeSize)||void 0===nt?void 0:nt.bridge)||void 0===Qe||!Qe.width)))}})}(v,C),v.node.type===I.META&&function(H,J){const se=Q(J),he=se.subScene.meta;Object.assign(H,he);const{nodeSep:ye,rankSep:Se,edgeSep:Ie,align:Be}=se.graph.meta;Object.assign(H.coreBox,function(Yt,Mn){const{ranksep:tn,nodesep:rn,edgesep:nn,align:qn}=Mn;Object.assign(Yt.graph(),{ranksep:tn,nodesep:rn,edgesep:nn,align:qn});const fr=[];if(Yt.nodes().forEach(ti=>{Yt.node(ti).node.type!==I.BRIDGE&&fr.push(ti)}),!fr.length)return{width:0,height:0};fa(Yt);let ar=1/0,Pr=1/0,Tr=-1/0,Ur=-1/0;return fr.forEach(ti=>{const Lr=Yt.node(ti),Do=.5*Lr.width,ui=Lr.x-Do,zo=Lr.x+Do;ar=ui<ar?ui:ar,Tr=zo>Tr?zo:Tr;const mo=.5*Lr.height,Mi=Lr.y-mo,Lo=Lr.y+mo;Pr=Mi<Pr?Mi:Pr,Ur=Lo>Ur?Lo:Ur}),Yt.edges().forEach(ti=>{const Lr=Yt.edge(ti),Do=Yt.node(Lr.metaEdge.v),ui=Yt.node(Lr.metaEdge.w);if(3===Lr.points.length&&function(Mi){let Lo=hn(Mi[0],Mi[1]);for(let Go=1;Go<Mi.length-1;Go++){const ba=hn(Mi[Go],Mi[Go+1]);if(Math.abs(ba-Lo)>1)return!1;Lo=ba}return!0}(Lr.points)){if(null!=Do){const Mi=Do.expanded?Do.x:Dn(Do);Lr.points[0].x=Mi}if(null!=ui){const Mi=ui.expanded?ui.x:Dn(ui);Lr.points[2].x=Mi}Lr.points=[Lr.points[0],Lr.points[1]]}null!=ui&&(Lr.points[Lr.points.length-1]=pn(Lr.points[Lr.points.length-2],ui)),null!=Do&&(Lr.points[0]=pn(Lr.points[1],Do)),Lr.points.forEach(Mi=>{ar=Mi.x<ar?Mi.x:ar,Tr=Mi.x>Tr?Mi.x:Tr,Pr=Mi.y<Pr?Mi.y:Pr,Ur=Mi.y>Ur?Mi.y:Ur})}),Yt.nodes().forEach(ti=>{const Lr=Yt.node(ti);Lr.x-=ar,Lr.y-=Pr}),Yt.edges().forEach(ti=>{Yt.edge(ti).points.forEach(Lr=>{Lr.x-=ar,Lr.y-=Pr})}),{width:Tr-ar,height:Ur-Pr}}(H.coreGraph,{nodesep:ye,ranksep:Se,edgesep:Ie,align:Be}));let Qe=0;H.coreGraph.nodeCount()>0&&Qe++;const St=Qe<=1?0:Qe;H.coreBox.width+=St+St,H.coreBox.height=he.labelHeight+H.coreBox.height,H.width=H.coreBox.width+he.paddingLeft+he.paddingRight,H.height=H.paddingTop+H.coreBox.height+H.paddingBottom}(v,C)}function hn(v,C){return 180*Math.atan((C.y-v.y)/(C.x-v.x))/Math.PI}function Dn(v){return v.expanded?v.x:v.x-v.width/2+0+v.coreBox.width/2}function pn(v,C){const H=C.expanded?C.x:Dn(C),J=C.y,se=v.x-H,he=v.y-J;let ye,Se,Ie=C.expanded?C.width:C.coreBox.width,Be=C.expanded?C.height:C.coreBox.height;return Math.abs(he)*Ie/2>Math.abs(se)*Be/2?(he<0&&(Be=-Be),ye=0===he?0:Be/2*se/he,Se=Be/2):(se<0&&(Ie=-Ie),ye=Ie/2,Se=0===se?0:Ie/2*he/se),{x:H+ye,y:J+Se}}function wn(v,C,H){var J,se,he,ye;const Se=v.nodes.filter((Qe,St,Yt)=>Yt.findIndex(Mn=>Mn.id===Qe.id)!==St).map(Qe=>Qe.id);if(Se.length)throw new Error(`Duplicated ids found: ${Se.join(", ")}`);const Ie=function(Qe){const St={nodes:[]},Yt=Qe.compound,Mn=Object.keys(Yt||{}),tn=new Map,rn=(qn,fr=[])=>{if(tn.has(qn))return tn.get(qn);for(let ar=0;ar<Mn.length;ar++){let Pr=Mn[ar];if(Yt&&-1!==Yt[Pr].indexOf(qn))return fr.unshift(Pr),rn(Pr,fr)}return 0===fr.length&&tn.set(qn,fr),fr};return Qe.nodes.forEach(qn=>{const fr=qn.id,ar=[...rn(fr),fr];let Pr=(qn=>Qe.edges.filter(fr=>fr.w===qn).map(fr=>({name:fr.v})))(fr);St.nodes.push({name:fr,path:ar,inputs:Pr,width:qn.width,height:qn.height,attr:Object.assign({},qn)})}),St}(v),Be=function(Qe,St){const Yt=(tn,rn)=>{for(let nn of rn.values())if(nn.includes(tn))return!0;return!1},Mn=(tn,rn=[])=>{if(0===Object.keys(tn).length)return[...new Set(rn)];const nn=new Map(Object.keys(tn).map(fr=>[fr,tn[fr]])),qn={};for(let[fr,ar]of nn)Yt(fr,nn)?qn[fr]=ar:rn=rn.concat(fr,ar);return Mn(qn,rn)};return Mn(Qe).filter(tn=>St.includes(tn))}(v.compound||{},C?.expanded||[]),nt=(St={rankDirection:(null===(se=null===(J=H?.graph)||void 0===J?void 0:J.meta)||void 0===se?void 0:se.rankDir)||C?.rankDirection||B.graph.meta.rankDir,align:(null===(ye=null===(he=H?.graph)||void 0===he?void 0:he.meta)||void 0===ye?void 0:ye.align)||B.graph.meta.align},Yt=function nm(v,C){const{rankDirection:H,align:J}=C,se=new xf({rankdir:H,align:J});return he=se,ye=v,Object.keys(ye.nodes).forEach(Se=>{const Ie=ye.nodes[Se],Be=Ie.path;let nt=he.root;nt.depth=Math.max(Be.length,nt.depth);for(let Qe=0;Qe<Be.length&&(nt.depth=Math.max(nt.depth,Be.length-Qe),nt.cardinality+=Ie.cardinality,Qe!==Be.length-1);Qe++){const St=Be[Qe];let Yt=he.node(St);Yt||(Yt=dd(St,he.graphOptions),Yt.path=Ie.path.slice(0,Qe+1),Yt.parentNode=nt,he.setNode(St,Yt),nt.metaGraph.setNode(St,Yt)),nt=Yt}he.setNode(Ie.name,Ie),Ie.parentNode=nt,nt.metaGraph.setNode(Ie.name,Ie)}),function(he,ye){const Se=he.getNodeMap();let Ie=[],Be=[];const nt=(Qe,St)=>{let Yt=0;for(;Qe;)St[Yt++]=Qe.name,Qe=Qe.parentNode;return Yt-1};ye.edges.forEach(Qe=>{Ie=[],Be=[];let St=nt(ye.nodes[Qe.v],Ie),Yt=nt(ye.nodes[Qe.w],Be);for(;Ie[St]===Be[Yt];)if(St--,Yt--,St<0||Yt<0)throw Error("No difference found between ancestor paths.");const Mn=Se[Ie[St+1]],tn=Ie[St],rn=Be[Yt];let nn=Mn.metaGraph.edge(tn,rn);nn||(nn=xc(tn,rn),Mn.metaGraph.setEdge(tn,rn,nn)),nn.addBaseEdge(Qe,he)})}(se,v),se;var he,ye}(function J0(v){const C=new yh;return v.nodes.map(H=>new hd(H)).forEach(H=>{C.nodes[H.name]=H,H.inputs.forEach(J=>{var he,ye;(ye=J).name!==(he=H).name&&C.edges.push(Object.assign(Object.assign({},ye.attr),{v:ye.name,w:he.name}))})}),C}(Ie),St),new Ef(Yt));var St,Yt;return function(Qe,St){St.forEach(Yt=>{const Mn=Qe.getRenderInfoNodes().find(nn=>nn.displayName===Yt);let tn=Mn&&Mn.node&&Mn.node.name||"";const rn=Qe.getRenderNodeByName(tn);if(!rn)throw new Error(`No nodes found: ${tn}`);rn.expanded=!0,Qe.buildSubHierarchy(tn)})}(nt,Be),Dt(nt.root,H),Jn(nt.root)}function Hn(v,C=!1){const H=JSON.parse(JSON.stringify(v)),J={nodes:[H],edges:[...H.edges]};return H.nodes.forEach(function se(he){(0===he.type||1===he.type)&&J.nodes.push(he),0===he.type&&(J.edges=J.edges.concat(he.edges)),Array.isArray(he.nodes)&&he.nodes.forEach(se)}),C&&J.nodes.forEach(se=>{const he=J.nodes.find(ye=>ye.id===se.parentNodeName);if(he){const ye=he.x-he.width/2+he.paddingLeft,Se=he.y-he.height/2+he.labelHeight+he.paddingTop;he.id!==k&&(se.x+=ye,se.y+=Se),0===se.type&&se.edges.forEach(Ie=>{Ie.points.forEach(Be=>{Be.x+=se.x-se.width/2+se.paddingLeft,Be.y+=se.y-se.height/2+se.labelHeight+se.paddingTop})})}}),J}function Xn(v,C,H,J){var se,he;let ye=[];const Se=(null===(se=H.find(Qe=>Qe.id===v))||void 0===se?void 0:se.path)||[],Ie=(null===(he=H.find(Qe=>Qe.id===C))||void 0===he?void 0:he.path)||[],Be=[k,...Se].slice(0,Se.length).reverse(),nt=[k,...Ie].slice(0,Ie.length);return Be.forEach(Qe=>{const St=H.find(Yt=>Yt.id===Qe);ye=ye.concat(St.edges.filter(Yt=>Yt.baseEdgeList.some(Mn=>Mn.v===(J?.v||v)&&Mn.w===(J?.w||C))))}),nt.filter(Qe=>!Be.includes(Qe)).forEach(Qe=>{const St=H.find(Yt=>Yt.id===Qe);ye=ye.concat(St.edges.filter(Yt=>Yt.baseEdgeList.some(Mn=>Mn.v===(J?.v||v)&&Mn.w===(J?.w||C))))}),ye}function Jn(v){const C=v.coreGraph.nodes().map(J=>v.coreGraph.node(J));return Object.assign(Object.assign({},Yn(v)),{expanded:v.expanded,nodes:v.expanded?(H=C,H.map(J=>J.node.type===I.META?Jn(J):Yn(J))):[],edges:v.expanded?sr(v):[]});var H}function Yn(v){return{id:v.node.name,name:v.node.name,type:v.node.type,cardinality:v.node.cardinality,attr:v.attr,parentNodeName:v.node.parentNode?v.node.parentNode.name:null,coreBox:Object.assign({},v.coreBox),x:v.x,y:v.y,width:v.width,height:v.height,radius:v.radius,labelHeight:v.labelHeight,labelOffset:v.labelOffset,outboxWidth:v.outboxWidth,paddingLeft:v.paddingLeft,paddingTop:v.paddingTop,paddingRight:v.paddingRight,paddingBottom:v.paddingBottom,path:v.node.path}}function sr(v){return v.coreGraph.edges().map(C=>({renderInfoEdge:v.coreGraph.edge(C),edge:C})).filter(({renderInfoEdge:C})=>C.metaEdge).map(({edge:C,renderInfoEdge:H})=>{const J=function(se,he){const ye=he.points.map(Se=>Object.assign({},Se));if(he.adjoiningMetaEdge){const Se=he.adjoiningMetaEdge.points,Ie=he.metaEdge.inbound,Be=Ie?Se[Se.length-1]:Se[0],nt=ye[Ie?0:ye.length-1],Mn=Be.y-(se.y-se.height/2),rn=-(se.paddingTop+se.labelHeight);nt.x=Be.x-(se.x-se.width/2)-se.paddingLeft,nt.y=Mn+rn}return ye}(v,H);return{adjoiningEdge:H.adjoiningMetaEdge?{w:H.adjoiningMetaEdge.metaEdge.w,v:H.adjoiningMetaEdge.metaEdge.v}:null,inbound:H.metaEdge.inbound,w:C.w,v:C.v,points:J,weight:H.weight,baseEdgeList:H.metaEdge.baseEdgeList,parentNodeName:v.node.name}})}},5278:(Qt,V,G)=>{"use strict";G.r(V),G.d(V,{ARRAY_TYPE:()=>Q,EPSILON:()=>B,RANDOM:()=>j,equals:()=>x,setMatrixArrayType:()=>k,toRadian:()=>I});var B=1e-6,Q=typeof Float32Array<"u"?Float32Array:Array,j=Math.random;function k(E){Q=E}var F=Math.PI/180;function I(E){return E*F}function x(E,b){return Math.abs(E-b)<=B*Math.max(1,Math.abs(E),Math.abs(b))}Math.hypot||(Math.hypot=function(){for(var E=0,b=arguments.length;b--;)E+=arguments[b]*arguments[b];return Math.sqrt(E)})},8793:(Qt,V,G)=>{"use strict";G.r(V),G.d(V,{glMatrix:()=>x,mat2:()=>B,mat2d:()=>Q,mat3:()=>Tn,mat4:()=>j,quat:()=>F,quat2:()=>I,vec2:()=>qc,vec3:()=>Gr,vec4:()=>k});var B={};G.r(B),G.d(B,{LDU:()=>re,add:()=>oe,adjoint:()=>U,clone:()=>b,copy:()=>w,create:()=>E,determinant:()=>z,equals:()=>_e,exactEquals:()=>we,frob:()=>ae,fromRotation:()=>K,fromScaling:()=>ee,fromValues:()=>A,identity:()=>y,invert:()=>P,mul:()=>fe,multiply:()=>ie,multiplyScalar:()=>me,multiplyScalarAndAdd:()=>Ce,rotate:()=>ne,scale:()=>q,set:()=>M,str:()=>X,sub:()=>be,subtract:()=>ve,transpose:()=>S});var Q={};G.r(Q),G.d(Q,{add:()=>Te,clone:()=>de,copy:()=>ke,create:()=>te,determinant:()=>Pt,equals:()=>Le,exactEquals:()=>un,frob:()=>$e,fromRotation:()=>xt,fromScaling:()=>Fe,fromTranslation:()=>ut,fromValues:()=>We,identity:()=>Ze,invert:()=>Ft,mul:()=>zt,multiply:()=>Xe,multiplyScalar:()=>Mt,multiplyScalarAndAdd:()=>Wt,rotate:()=>yt,scale:()=>Ct,set:()=>bt,str:()=>Ut,sub:()=>Xt,subtract:()=>tt,translate:()=>pt});var j={};G.r(j),G.d(j,{add:()=>$n,adjoint:()=>er,clone:()=>kn,copy:()=>ir,create:()=>gn,determinant:()=>Mr,equals:()=>Gn,exactEquals:()=>Kt,frob:()=>kr,fromQuat:()=>$t,fromQuat2:()=>$,fromRotation:()=>Vr,fromRotationTranslation:()=>T,fromRotationTranslationScale:()=>rt,fromRotationTranslationScaleOrigin:()=>it,fromScaling:()=>Wr,fromTranslation:()=>mr,fromValues:()=>cr,fromXRotation:()=>Ae,fromYRotation:()=>Y,fromZRotation:()=>W,frustum:()=>R,getRotation:()=>Ge,getScaling:()=>je,getTranslation:()=>ce,identity:()=>xr,invert:()=>Rn,lookAt:()=>Sn,mul:()=>hr,multiply:()=>yr,multiplyScalar:()=>Xr,multiplyScalarAndAdd:()=>Di,ortho:()=>Ke,orthoNO:()=>an,orthoZO:()=>qt,perspective:()=>ze,perspectiveFromFieldOfView:()=>gt,perspectiveNO:()=>He,perspectiveZO:()=>Je,rotate:()=>Ir,rotateX:()=>De,rotateY:()=>wi,rotateZ:()=>xo,scale:()=>Oi,set:()=>Bn,str:()=>Wn,sub:()=>Un,subtract:()=>Er,targetTo:()=>zn,translate:()=>gr,transpose:()=>jn});var k={};G.r(k),G.d(k,{add:()=>At,ceil:()=>Fn,clone:()=>Et,copy:()=>st,create:()=>br,cross:()=>Kl,dist:()=>ua,distance:()=>Eo,div:()=>Qh,divide:()=>fn,dot:()=>pa,equals:()=>qs,exactEquals:()=>Kf,floor:()=>Or,forEach:()=>Zl,fromValues:()=>Oe,inverse:()=>Au,len:()=>Jh,length:()=>Ni,lerp:()=>Xs,max:()=>Qn,min:()=>Dr,mul:()=>Zf,multiply:()=>cn,negate:()=>_a,normalize:()=>Du,random:()=>Gc,round:()=>xi,scale:()=>eo,scaleAndAdd:()=>dr,set:()=>Ot,sqrDist:()=>Ii,sqrLen:()=>ed,squaredDistance:()=>Br,squaredLength:()=>Ea,str:()=>Zh,sub:()=>Tu,subtract:()=>It,transformMat4:()=>Rs,transformQuat:()=>Uc,zero:()=>Kh});var F={};G.r(F),G.d(F,{add:()=>Gi,calculateW:()=>Pu,clone:()=>qo,conjugate:()=>Ha,copy:()=>Ks,create:()=>ci,dot:()=>Es,equals:()=>Co,exactEquals:()=>Zs,exp:()=>pl,fromEuler:()=>Wc,fromMat3:()=>ws,fromValues:()=>Nu,getAngle:()=>Wu,getAxisAngle:()=>Hu,identity:()=>Vc,invert:()=>Hc,len:()=>ec,length:()=>gu,lerp:()=>Ui,ln:()=>Ql,mul:()=>$c,multiply:()=>ns,normalize:()=>rs,pow:()=>Jl,random:()=>uo,rotateX:()=>bs,rotateY:()=>Iu,rotateZ:()=>Ou,rotationTo:()=>_s,scale:()=>du,set:()=>Wa,setAxes:()=>Da,setAxisAngle:()=>ys,slerp:()=>Qr,sqlerp:()=>Qf,sqrLen:()=>tc,squaredLength:()=>pu,str:()=>xs});var I={};G.r(I),G.d(I,{add:()=>Lu,clone:()=>is,conjugate:()=>Ms,copy:()=>Ko,create:()=>vl,dot:()=>va,equals:()=>Fu,exactEquals:()=>Jf,fromMat4:()=>la,fromRotation:()=>Li,fromRotationTranslation:()=>Fo,fromRotationTranslationValues:()=>$u,fromTranslation:()=>To,fromValues:()=>vu,getDual:()=>mt,getReal:()=>vt,getTranslation:()=>or,identity:()=>Na,invert:()=>Ru,len:()=>Yc,length:()=>os,lerp:()=>Xu,mul:()=>Yu,multiply:()=>Ss,normalize:()=>td,rotateAroundAxis:()=>mi,rotateByQuatAppend:()=>Zo,rotateByQuatPrepend:()=>Fs,rotateX:()=>ei,rotateY:()=>oo,rotateZ:()=>ki,scale:()=>ku,set:()=>Ne,setDual:()=>bn,setReal:()=>Gt,sqrLen:()=>as,squaredLength:()=>lo,str:()=>Xc,translate:()=>Nr});var x=G(5278);function E(){var p=new x.ARRAY_TYPE(4);return x.ARRAY_TYPE!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p}function b(p){var N=new x.ARRAY_TYPE(4);return N[0]=p[0],N[1]=p[1],N[2]=p[2],N[3]=p[3],N}function w(p,N){return p[0]=N[0],p[1]=N[1],p[2]=N[2],p[3]=N[3],p}function y(p){return p[0]=1,p[1]=0,p[2]=0,p[3]=1,p}function A(p,N,ge,Me){var Pe=new x.ARRAY_TYPE(4);return Pe[0]=p,Pe[1]=N,Pe[2]=ge,Pe[3]=Me,Pe}function M(p,N,ge,Me,Pe){return p[0]=N,p[1]=ge,p[2]=Me,p[3]=Pe,p}function S(p,N){if(p===N){var ge=N[1];p[1]=N[2],p[2]=ge}else p[0]=N[0],p[1]=N[2],p[2]=N[1],p[3]=N[3];return p}function P(p,N){var ge=N[0],Me=N[1],Pe=N[2],Ye=N[3],qe=ge*Ye-Pe*Me;return qe?(p[0]=Ye*(qe=1/qe),p[1]=-Me*qe,p[2]=-Pe*qe,p[3]=ge*qe,p):null}function U(p,N){var ge=N[0];return p[0]=N[3],p[1]=-N[1],p[2]=-N[2],p[3]=ge,p}function z(p){return p[0]*p[3]-p[2]*p[1]}function ie(p,N,ge){var Me=N[0],Pe=N[1],Ye=N[2],qe=N[3],ct=ge[0],dt=ge[1],Nt=ge[2],Jt=ge[3];return p[0]=Me*ct+Ye*dt,p[1]=Pe*ct+qe*dt,p[2]=Me*Nt+Ye*Jt,p[3]=Pe*Nt+qe*Jt,p}function ne(p,N,ge){var Me=N[0],Pe=N[1],Ye=N[2],qe=N[3],ct=Math.sin(ge),dt=Math.cos(ge);return p[0]=Me*dt+Ye*ct,p[1]=Pe*dt+qe*ct,p[2]=Me*-ct+Ye*dt,p[3]=Pe*-ct+qe*dt,p}function q(p,N,ge){var Pe=N[1],Ye=N[2],qe=N[3],ct=ge[0],dt=ge[1];return p[0]=N[0]*ct,p[1]=Pe*ct,p[2]=Ye*dt,p[3]=qe*dt,p}function K(p,N){var ge=Math.sin(N),Me=Math.cos(N);return p[0]=Me,p[1]=ge,p[2]=-ge,p[3]=Me,p}function ee(p,N){return p[0]=N[0],p[1]=0,p[2]=0,p[3]=N[1],p}function X(p){return"mat2("+p[0]+", "+p[1]+", "+p[2]+", "+p[3]+")"}function ae(p){return Math.hypot(p[0],p[1],p[2],p[3])}function re(p,N,ge,Me){return p[2]=Me[2]/Me[0],ge[0]=Me[0],ge[1]=Me[1],ge[3]=Me[3]-p[2]*ge[1],[p,N,ge]}function oe(p,N,ge){return p[0]=N[0]+ge[0],p[1]=N[1]+ge[1],p[2]=N[2]+ge[2],p[3]=N[3]+ge[3],p}function ve(p,N,ge){return p[0]=N[0]-ge[0],p[1]=N[1]-ge[1],p[2]=N[2]-ge[2],p[3]=N[3]-ge[3],p}function we(p,N){return p[0]===N[0]&&p[1]===N[1]&&p[2]===N[2]&&p[3]===N[3]}function _e(p,N){var ge=p[0],Me=p[1],Pe=p[2],Ye=p[3],qe=N[0],ct=N[1],dt=N[2],Nt=N[3];return Math.abs(ge-qe)<=x.EPSILON*Math.max(1,Math.abs(ge),Math.abs(qe))&&Math.abs(Me-ct)<=x.EPSILON*Math.max(1,Math.abs(Me),Math.abs(ct))&&Math.abs(Pe-dt)<=x.EPSILON*Math.max(1,Math.abs(Pe),Math.abs(dt))&&Math.abs(Ye-Nt)<=x.EPSILON*Math.max(1,Math.abs(Ye),Math.abs(Nt))}function me(p,N,ge){return p[0]=N[0]*ge,p[1]=N[1]*ge,p[2]=N[2]*ge,p[3]=N[3]*ge,p}function Ce(p,N,ge,Me){return p[0]=N[0]+ge[0]*Me,p[1]=N[1]+ge[1]*Me,p[2]=N[2]+ge[2]*Me,p[3]=N[3]+ge[3]*Me,p}var fe=ie,be=ve;function te(){var p=new x.ARRAY_TYPE(6);return x.ARRAY_TYPE!=Float32Array&&(p[1]=0,p[2]=0,p[4]=0,p[5]=0),p[0]=1,p[3]=1,p}function de(p){var N=new x.ARRAY_TYPE(6);return N[0]=p[0],N[1]=p[1],N[2]=p[2],N[3]=p[3],N[4]=p[4],N[5]=p[5],N}function ke(p,N){return p[0]=N[0],p[1]=N[1],p[2]=N[2],p[3]=N[3],p[4]=N[4],p[5]=N[5],p}function Ze(p){return p[0]=1,p[1]=0,p[2]=0,p[3]=1,p[4]=0,p[5]=0,p}function We(p,N,ge,Me,Pe,Ye){var qe=new x.ARRAY_TYPE(6);return qe[0]=p,qe[1]=N,qe[2]=ge,qe[3]=Me,qe[4]=Pe,qe[5]=Ye,qe}function bt(p,N,ge,Me,Pe,Ye,qe){return p[0]=N,p[1]=ge,p[2]=Me,p[3]=Pe,p[4]=Ye,p[5]=qe,p}function Ft(p,N){var ge=N[0],Me=N[1],Pe=N[2],Ye=N[3],qe=N[4],ct=N[5],dt=ge*Ye-Me*Pe;return dt?(p[0]=Ye*(dt=1/dt),p[1]=-Me*dt,p[2]=-Pe*dt,p[3]=ge*dt,p[4]=(Pe*ct-Ye*qe)*dt,p[5]=(Me*qe-ge*ct)*dt,p):null}function Pt(p){return p[0]*p[3]-p[1]*p[2]}function Xe(p,N,ge){var Me=N[0],Pe=N[1],Ye=N[2],qe=N[3],ct=N[4],dt=N[5],Nt=ge[0],Jt=ge[1],xn=ge[2],An=ge[3],En=ge[4],tr=ge[5];return p[0]=Me*Nt+Ye*Jt,p[1]=Pe*Nt+qe*Jt,p[2]=Me*xn+Ye*An,p[3]=Pe*xn+qe*An,p[4]=Me*En+Ye*tr+ct,p[5]=Pe*En+qe*tr+dt,p}function yt(p,N,ge){var Me=N[0],Pe=N[1],Ye=N[2],qe=N[3],ct=N[4],dt=N[5],Nt=Math.sin(ge),Jt=Math.cos(ge);return p[0]=Me*Jt+Ye*Nt,p[1]=Pe*Jt+qe*Nt,p[2]=Me*-Nt+Ye*Jt,p[3]=Pe*-Nt+qe*Jt,p[4]=ct,p[5]=dt,p}function Ct(p,N,ge){var Pe=N[1],Ye=N[2],qe=N[3],ct=N[4],dt=N[5],Nt=ge[0],Jt=ge[1];return p[0]=N[0]*Nt,p[1]=Pe*Nt,p[2]=Ye*Jt,p[3]=qe*Jt,p[4]=ct,p[5]=dt,p}function pt(p,N,ge){var Me=N[0],Pe=N[1],Ye=N[2],qe=N[3],ct=N[4],dt=N[5],Nt=ge[0],Jt=ge[1];return p[0]=Me,p[1]=Pe,p[2]=Ye,p[3]=qe,p[4]=Me*Nt+Ye*Jt+ct,p[5]=Pe*Nt+qe*Jt+dt,p}function xt(p,N){var ge=Math.sin(N),Me=Math.cos(N);return p[0]=Me,p[1]=ge,p[2]=-ge,p[3]=Me,p[4]=0,p[5]=0,p}function Fe(p,N){return p[0]=N[0],p[1]=0,p[2]=0,p[3]=N[1],p[4]=0,p[5]=0,p}function ut(p,N){return p[0]=1,p[1]=0,p[2]=0,p[3]=1,p[4]=N[0],p[5]=N[1],p}function Ut(p){return"mat2d("+p[0]+", "+p[1]+", "+p[2]+", "+p[3]+", "+p[4]+", "+p[5]+")"}function $e(p){return Math.hypot(p[0],p[1],p[2],p[3],p[4],p[5],1)}function Te(p,N,ge){return p[0]=N[0]+ge[0],p[1]=N[1]+ge[1],p[2]=N[2]+ge[2],p[3]=N[3]+ge[3],p[4]=N[4]+ge[4],p[5]=N[5]+ge[5],p}function tt(p,N,ge){return p[0]=N[0]-ge[0],p[1]=N[1]-ge[1],p[2]=N[2]-ge[2],p[3]=N[3]-ge[3],p[4]=N[4]-ge[4],p[5]=N[5]-ge[5],p}function Mt(p,N,ge){return p[0]=N[0]*ge,p[1]=N[1]*ge,p[2]=N[2]*ge,p[3]=N[3]*ge,p[4]=N[4]*ge,p[5]=N[5]*ge,p}function Wt(p,N,ge,Me){return p[0]=N[0]+ge[0]*Me,p[1]=N[1]+ge[1]*Me,p[2]=N[2]+ge[2]*Me,p[3]=N[3]+ge[3]*Me,p[4]=N[4]+ge[4]*Me,p[5]=N[5]+ge[5]*Me,p}function un(p,N){return p[0]===N[0]&&p[1]===N[1]&&p[2]===N[2]&&p[3]===N[3]&&p[4]===N[4]&&p[5]===N[5]}function Le(p,N){var ge=p[0],Me=p[1],Pe=p[2],Ye=p[3],qe=p[4],ct=p[5],dt=N[0],Nt=N[1],Jt=N[2],xn=N[3],An=N[4],En=N[5];return Math.abs(ge-dt)<=x.EPSILON*Math.max(1,Math.abs(ge),Math.abs(dt))&&Math.abs(Me-Nt)<=x.EPSILON*Math.max(1,Math.abs(Me),Math.abs(Nt))&&Math.abs(Pe-Jt)<=x.EPSILON*Math.max(1,Math.abs(Pe),Math.abs(Jt))&&Math.abs(Ye-xn)<=x.EPSILON*Math.max(1,Math.abs(Ye),Math.abs(xn))&&Math.abs(qe-An)<=x.EPSILON*Math.max(1,Math.abs(qe),Math.abs(An))&&Math.abs(ct-En)<=x.EPSILON*Math.max(1,Math.abs(ct),Math.abs(En))}var zt=Xe,Xt=tt,Tn=G(7543);function gn(){var p=new x.ARRAY_TYPE(16);return x.ARRAY_TYPE!=Float32Array&&(p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[11]=0,p[12]=0,p[13]=0,p[14]=0),p[0]=1,p[5]=1,p[10]=1,p[15]=1,p}function kn(p){var N=new x.ARRAY_TYPE(16);return N[0]=p[0],N[1]=p[1],N[2]=p[2],N[3]=p[3],N[4]=p[4],N[5]=p[5],N[6]=p[6],N[7]=p[7],N[8]=p[8],N[9]=p[9],N[10]=p[10],N[11]=p[11],N[12]=p[12],N[13]=p[13],N[14]=p[14],N[15]=p[15],N}function ir(p,N){return p[0]=N[0],p[1]=N[1],p[2]=N[2],p[3]=N[3],p[4]=N[4],p[5]=N[5],p[6]=N[6],p[7]=N[7],p[8]=N[8],p[9]=N[9],p[10]=N[10],p[11]=N[11],p[12]=N[12],p[13]=N[13],p[14]=N[14],p[15]=N[15],p}function cr(p,N,ge,Me,Pe,Ye,qe,ct,dt,Nt,Jt,xn,An,En,tr,lr){var Pn=new x.ARRAY_TYPE(16);return Pn[0]=p,Pn[1]=N,Pn[2]=ge,Pn[3]=Me,Pn[4]=Pe,Pn[5]=Ye,Pn[6]=qe,Pn[7]=ct,Pn[8]=dt,Pn[9]=Nt,Pn[10]=Jt,Pn[11]=xn,Pn[12]=An,Pn[13]=En,Pn[14]=tr,Pn[15]=lr,Pn}function Bn(p,N,ge,Me,Pe,Ye,qe,ct,dt,Nt,Jt,xn,An,En,tr,lr,Pn){return p[0]=N,p[1]=ge,p[2]=Me,p[3]=Pe,p[4]=Ye,p[5]=qe,p[6]=ct,p[7]=dt,p[8]=Nt,p[9]=Jt,p[10]=xn,p[11]=An,p[12]=En,p[13]=tr,p[14]=lr,p[15]=Pn,p}function xr(p){return p[0]=1,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=1,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=1,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}function jn(p,N){if(p===N){var ge=N[1],Me=N[2],Pe=N[3],Ye=N[6],qe=N[7],ct=N[11];p[1]=N[4],p[2]=N[8],p[3]=N[12],p[4]=ge,p[6]=N[9],p[7]=N[13],p[8]=Me,p[9]=Ye,p[11]=N[14],p[12]=Pe,p[13]=qe,p[14]=ct}else p[0]=N[0],p[1]=N[4],p[2]=N[8],p[3]=N[12],p[4]=N[1],p[5]=N[5],p[6]=N[9],p[7]=N[13],p[8]=N[2],p[9]=N[6],p[10]=N[10],p[11]=N[14],p[12]=N[3],p[13]=N[7],p[14]=N[11],p[15]=N[15];return p}function Rn(p,N){var ge=N[0],Me=N[1],Pe=N[2],Ye=N[3],qe=N[4],ct=N[5],dt=N[6],Nt=N[7],Jt=N[8],xn=N[9],An=N[10],En=N[11],tr=N[12],lr=N[13],Pn=N[14],Cr=N[15],yi=ge*ct-Me*qe,Ei=ge*dt-Pe*qe,fi=ge*Nt-Ye*qe,qr=Me*dt-Pe*ct,ai=Me*Nt-Ye*ct,Qo=Pe*Nt-Ye*dt,Uo=Jt*lr-xn*tr,Bo=Jt*Pn-An*tr,Vo=Jt*Cr-En*tr,No=xn*Pn-An*lr,jo=xn*Cr-En*lr,Sa=An*Cr-En*Pn,Vi=yi*Sa-Ei*jo+fi*No+qr*Vo-ai*Bo+Qo*Uo;return Vi?(p[0]=(ct*Sa-dt*jo+Nt*No)*(Vi=1/Vi),p[1]=(Pe*jo-Me*Sa-Ye*No)*Vi,p[2]=(lr*Qo-Pn*ai+Cr*qr)*Vi,p[3]=(An*ai-xn*Qo-En*qr)*Vi,p[4]=(dt*Vo-qe*Sa-Nt*Bo)*Vi,p[5]=(ge*Sa-Pe*Vo+Ye*Bo)*Vi,p[6]=(Pn*fi-tr*Qo-Cr*Ei)*Vi,p[7]=(Jt*Qo-An*fi+En*Ei)*Vi,p[8]=(qe*jo-ct*Vo+Nt*Uo)*Vi,p[9]=(Me*Vo-ge*jo-Ye*Uo)*Vi,p[10]=(tr*ai-lr*fi+Cr*yi)*Vi,p[11]=(xn*fi-Jt*ai-En*yi)*Vi,p[12]=(ct*Bo-qe*No-dt*Uo)*Vi,p[13]=(ge*No-Me*Bo+Pe*Uo)*Vi,p[14]=(lr*Ei-tr*qr-Pn*yi)*Vi,p[15]=(Jt*qr-xn*Ei+An*yi)*Vi,p):null}function er(p,N){var ge=N[0],Me=N[1],Pe=N[2],Ye=N[3],qe=N[4],ct=N[5],dt=N[6],Nt=N[7],Jt=N[8],xn=N[9],An=N[10],En=N[11],tr=N[12],lr=N[13],Pn=N[14],Cr=N[15];return p[0]=ct*(An*Cr-En*Pn)-xn*(dt*Cr-Nt*Pn)+lr*(dt*En-Nt*An),p[1]=-(Me*(An*Cr-En*Pn)-xn*(Pe*Cr-Ye*Pn)+lr*(Pe*En-Ye*An)),p[2]=Me*(dt*Cr-Nt*Pn)-ct*(Pe*Cr-Ye*Pn)+lr*(Pe*Nt-Ye*dt),p[3]=-(Me*(dt*En-Nt*An)-ct*(Pe*En-Ye*An)+xn*(Pe*Nt-Ye*dt)),p[4]=-(qe*(An*Cr-En*Pn)-Jt*(dt*Cr-Nt*Pn)+tr*(dt*En-Nt*An)),p[5]=ge*(An*Cr-En*Pn)-Jt*(Pe*Cr-Ye*Pn)+tr*(Pe*En-Ye*An),p[6]=-(ge*(dt*Cr-Nt*Pn)-qe*(Pe*Cr-Ye*Pn)+tr*(Pe*Nt-Ye*dt)),p[7]=ge*(dt*En-Nt*An)-qe*(Pe*En-Ye*An)+Jt*(Pe*Nt-Ye*dt),p[8]=qe*(xn*Cr-En*lr)-Jt*(ct*Cr-Nt*lr)+tr*(ct*En-Nt*xn),p[9]=-(ge*(xn*Cr-En*lr)-Jt*(Me*Cr-Ye*lr)+tr*(Me*En-Ye*xn)),p[10]=ge*(ct*Cr-Nt*lr)-qe*(Me*Cr-Ye*lr)+tr*(Me*Nt-Ye*ct),p[11]=-(ge*(ct*En-Nt*xn)-qe*(Me*En-Ye*xn)+Jt*(Me*Nt-Ye*ct)),p[12]=-(qe*(xn*Pn-An*lr)-Jt*(ct*Pn-dt*lr)+tr*(ct*An-dt*xn)),p[13]=ge*(xn*Pn-An*lr)-Jt*(Me*Pn-Pe*lr)+tr*(Me*An-Pe*xn),p[14]=-(ge*(ct*Pn-dt*lr)-qe*(Me*Pn-Pe*lr)+tr*(Me*dt-Pe*ct)),p[15]=ge*(ct*An-dt*xn)-qe*(Me*An-Pe*xn)+Jt*(Me*dt-Pe*ct),p}function Mr(p){var N=p[0],ge=p[1],Me=p[2],Pe=p[3],Ye=p[4],qe=p[5],ct=p[6],dt=p[7],Nt=p[8],Jt=p[9],xn=p[10],An=p[11],En=p[12],tr=p[13],lr=p[14],Pn=p[15];return(N*qe-ge*Ye)*(xn*Pn-An*lr)-(N*ct-Me*Ye)*(Jt*Pn-An*tr)+(N*dt-Pe*Ye)*(Jt*lr-xn*tr)+(ge*ct-Me*qe)*(Nt*Pn-An*En)-(ge*dt-Pe*qe)*(Nt*lr-xn*En)+(Me*dt-Pe*ct)*(Nt*tr-Jt*En)}function yr(p,N,ge){var Me=N[0],Pe=N[1],Ye=N[2],qe=N[3],ct=N[4],dt=N[5],Nt=N[6],Jt=N[7],xn=N[8],An=N[9],En=N[10],tr=N[11],lr=N[12],Pn=N[13],Cr=N[14],yi=N[15],Ei=ge[0],fi=ge[1],qr=ge[2],ai=ge[3];return p[0]=Ei*Me+fi*ct+qr*xn+ai*lr,p[1]=Ei*Pe+fi*dt+qr*An+ai*Pn,p[2]=Ei*Ye+fi*Nt+qr*En+ai*Cr,p[3]=Ei*qe+fi*Jt+qr*tr+ai*yi,p[4]=(Ei=ge[4])*Me+(fi=ge[5])*ct+(qr=ge[6])*xn+(ai=ge[7])*lr,p[5]=Ei*Pe+fi*dt+qr*An+ai*Pn,p[6]=Ei*Ye+fi*Nt+qr*En+ai*Cr,p[7]=Ei*qe+fi*Jt+qr*tr+ai*yi,p[8]=(Ei=ge[8])*Me+(fi=ge[9])*ct+(qr=ge[10])*xn+(ai=ge[11])*lr,p[9]=Ei*Pe+fi*dt+qr*An+ai*Pn,p[10]=Ei*Ye+fi*Nt+qr*En+ai*Cr,p[11]=Ei*qe+fi*Jt+qr*tr+ai*yi,p[12]=(Ei=ge[12])*Me+(fi=ge[13])*ct+(qr=ge[14])*xn+(ai=ge[15])*lr,p[13]=Ei*Pe+fi*dt+qr*An+ai*Pn,p[14]=Ei*Ye+fi*Nt+qr*En+ai*Cr,p[15]=Ei*qe+fi*Jt+qr*tr+ai*yi,p}function gr(p,N,ge){var qe,ct,dt,Nt,Jt,xn,An,En,tr,lr,Pn,Cr,Me=ge[0],Pe=ge[1],Ye=ge[2];return N===p?(p[12]=N[0]*Me+N[4]*Pe+N[8]*Ye+N[12],p[13]=N[1]*Me+N[5]*Pe+N[9]*Ye+N[13],p[14]=N[2]*Me+N[6]*Pe+N[10]*Ye+N[14],p[15]=N[3]*Me+N[7]*Pe+N[11]*Ye+N[15]):(ct=N[1],dt=N[2],Nt=N[3],Jt=N[4],xn=N[5],An=N[6],En=N[7],tr=N[8],lr=N[9],Pn=N[10],Cr=N[11],p[0]=qe=N[0],p[1]=ct,p[2]=dt,p[3]=Nt,p[4]=Jt,p[5]=xn,p[6]=An,p[7]=En,p[8]=tr,p[9]=lr,p[10]=Pn,p[11]=Cr,p[12]=qe*Me+Jt*Pe+tr*Ye+N[12],p[13]=ct*Me+xn*Pe+lr*Ye+N[13],p[14]=dt*Me+An*Pe+Pn*Ye+N[14],p[15]=Nt*Me+En*Pe+Cr*Ye+N[15]),p}function Oi(p,N,ge){var Me=ge[0],Pe=ge[1],Ye=ge[2];return p[0]=N[0]*Me,p[1]=N[1]*Me,p[2]=N[2]*Me,p[3]=N[3]*Me,p[4]=N[4]*Pe,p[5]=N[5]*Pe,p[6]=N[6]*Pe,p[7]=N[7]*Pe,p[8]=N[8]*Ye,p[9]=N[9]*Ye,p[10]=N[10]*Ye,p[11]=N[11]*Ye,p[12]=N[12],p[13]=N[13],p[14]=N[14],p[15]=N[15],p}function Ir(p,N,ge,Me){var dt,Nt,Jt,xn,An,En,tr,lr,Pn,Cr,yi,Ei,fi,qr,ai,Qo,Uo,Bo,Vo,No,jo,Sa,Vi,So,Pe=Me[0],Ye=Me[1],qe=Me[2],ct=Math.hypot(Pe,Ye,qe);return ct<x.EPSILON?null:(Pe*=ct=1/ct,Ye*=ct,qe*=ct,dt=Math.sin(ge),Nt=Math.cos(ge),An=N[1],En=N[2],tr=N[3],Pn=N[5],Cr=N[6],yi=N[7],fi=N[9],qr=N[10],ai=N[11],Vo=Pe*Ye*(Jt=1-Nt)-qe*dt,No=Ye*Ye*Jt+Nt,jo=qe*Ye*Jt+Pe*dt,Sa=Pe*qe*Jt+Ye*dt,Vi=Ye*qe*Jt-Pe*dt,So=qe*qe*Jt+Nt,p[0]=(xn=N[0])*(Qo=Pe*Pe*Jt+Nt)+(lr=N[4])*(Uo=Ye*Pe*Jt+qe*dt)+(Ei=N[8])*(Bo=qe*Pe*Jt-Ye*dt),p[1]=An*Qo+Pn*Uo+fi*Bo,p[2]=En*Qo+Cr*Uo+qr*Bo,p[3]=tr*Qo+yi*Uo+ai*Bo,p[4]=xn*Vo+lr*No+Ei*jo,p[5]=An*Vo+Pn*No+fi*jo,p[6]=En*Vo+Cr*No+qr*jo,p[7]=tr*Vo+yi*No+ai*jo,p[8]=xn*Sa+lr*Vi+Ei*So,p[9]=An*Sa+Pn*Vi+fi*So,p[10]=En*Sa+Cr*Vi+qr*So,p[11]=tr*Sa+yi*Vi+ai*So,N!==p&&(p[12]=N[12],p[13]=N[13],p[14]=N[14],p[15]=N[15]),p)}function De(p,N,ge){var Me=Math.sin(ge),Pe=Math.cos(ge),Ye=N[4],qe=N[5],ct=N[6],dt=N[7],Nt=N[8],Jt=N[9],xn=N[10],An=N[11];return N!==p&&(p[0]=N[0],p[1]=N[1],p[2]=N[2],p[3]=N[3],p[12]=N[12],p[13]=N[13],p[14]=N[14],p[15]=N[15]),p[4]=Ye*Pe+Nt*Me,p[5]=qe*Pe+Jt*Me,p[6]=ct*Pe+xn*Me,p[7]=dt*Pe+An*Me,p[8]=Nt*Pe-Ye*Me,p[9]=Jt*Pe-qe*Me,p[10]=xn*Pe-ct*Me,p[11]=An*Pe-dt*Me,p}function wi(p,N,ge){var Me=Math.sin(ge),Pe=Math.cos(ge),Ye=N[0],qe=N[1],ct=N[2],dt=N[3],Nt=N[8],Jt=N[9],xn=N[10],An=N[11];return N!==p&&(p[4]=N[4],p[5]=N[5],p[6]=N[6],p[7]=N[7],p[12]=N[12],p[13]=N[13],p[14]=N[14],p[15]=N[15]),p[0]=Ye*Pe-Nt*Me,p[1]=qe*Pe-Jt*Me,p[2]=ct*Pe-xn*Me,p[3]=dt*Pe-An*Me,p[8]=Ye*Me+Nt*Pe,p[9]=qe*Me+Jt*Pe,p[10]=ct*Me+xn*Pe,p[11]=dt*Me+An*Pe,p}function xo(p,N,ge){var Me=Math.sin(ge),Pe=Math.cos(ge),Ye=N[0],qe=N[1],ct=N[2],dt=N[3],Nt=N[4],Jt=N[5],xn=N[6],An=N[7];return N!==p&&(p[8]=N[8],p[9]=N[9],p[10]=N[10],p[11]=N[11],p[12]=N[12],p[13]=N[13],p[14]=N[14],p[15]=N[15]),p[0]=Ye*Pe+Nt*Me,p[1]=qe*Pe+Jt*Me,p[2]=ct*Pe+xn*Me,p[3]=dt*Pe+An*Me,p[4]=Nt*Pe-Ye*Me,p[5]=Jt*Pe-qe*Me,p[6]=xn*Pe-ct*Me,p[7]=An*Pe-dt*Me,p}function mr(p,N){return p[0]=1,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=1,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=1,p[11]=0,p[12]=N[0],p[13]=N[1],p[14]=N[2],p[15]=1,p}function Wr(p,N){return p[0]=N[0],p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=N[1],p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=N[2],p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}function Vr(p,N,ge){var ct,dt,Nt,Me=ge[0],Pe=ge[1],Ye=ge[2],qe=Math.hypot(Me,Pe,Ye);return qe<x.EPSILON?null:(Me*=qe=1/qe,Pe*=qe,Ye*=qe,ct=Math.sin(N),dt=Math.cos(N),p[0]=Me*Me*(Nt=1-dt)+dt,p[1]=Pe*Me*Nt+Ye*ct,p[2]=Ye*Me*Nt-Pe*ct,p[3]=0,p[4]=Me*Pe*Nt-Ye*ct,p[5]=Pe*Pe*Nt+dt,p[6]=Ye*Pe*Nt+Me*ct,p[7]=0,p[8]=Me*Ye*Nt+Pe*ct,p[9]=Pe*Ye*Nt-Me*ct,p[10]=Ye*Ye*Nt+dt,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p)}function Ae(p,N){var ge=Math.sin(N),Me=Math.cos(N);return p[0]=1,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=Me,p[6]=ge,p[7]=0,p[8]=0,p[9]=-ge,p[10]=Me,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}function Y(p,N){var ge=Math.sin(N),Me=Math.cos(N);return p[0]=Me,p[1]=0,p[2]=-ge,p[3]=0,p[4]=0,p[5]=1,p[6]=0,p[7]=0,p[8]=ge,p[9]=0,p[10]=Me,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}function W(p,N){var ge=Math.sin(N),Me=Math.cos(N);return p[0]=Me,p[1]=ge,p[2]=0,p[3]=0,p[4]=-ge,p[5]=Me,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=1,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}function T(p,N,ge){var Me=N[0],Pe=N[1],Ye=N[2],qe=N[3],ct=Me+Me,dt=Pe+Pe,Nt=Ye+Ye,Jt=Me*ct,xn=Me*dt,An=Me*Nt,En=Pe*dt,tr=Pe*Nt,lr=Ye*Nt,Pn=qe*ct,Cr=qe*dt,yi=qe*Nt;return p[0]=1-(En+lr),p[1]=xn+yi,p[2]=An-Cr,p[3]=0,p[4]=xn-yi,p[5]=1-(Jt+lr),p[6]=tr+Pn,p[7]=0,p[8]=An+Cr,p[9]=tr-Pn,p[10]=1-(Jt+En),p[11]=0,p[12]=ge[0],p[13]=ge[1],p[14]=ge[2],p[15]=1,p}function $(p,N){var ge=new x.ARRAY_TYPE(3),Me=-N[0],Pe=-N[1],Ye=-N[2],qe=N[3],ct=N[4],dt=N[5],Nt=N[6],Jt=N[7],xn=Me*Me+Pe*Pe+Ye*Ye+qe*qe;return xn>0?(ge[0]=2*(ct*qe+Jt*Me+dt*Ye-Nt*Pe)/xn,ge[1]=2*(dt*qe+Jt*Pe+Nt*Me-ct*Ye)/xn,ge[2]=2*(Nt*qe+Jt*Ye+ct*Pe-dt*Me)/xn):(ge[0]=2*(ct*qe+Jt*Me+dt*Ye-Nt*Pe),ge[1]=2*(dt*qe+Jt*Pe+Nt*Me-ct*Ye),ge[2]=2*(Nt*qe+Jt*Ye+ct*Pe-dt*Me)),T(p,N,ge),p}function ce(p,N){return p[0]=N[12],p[1]=N[13],p[2]=N[14],p}function je(p,N){var Ye=N[4],qe=N[5],ct=N[6],dt=N[8],Nt=N[9],Jt=N[10];return p[0]=Math.hypot(N[0],N[1],N[2]),p[1]=Math.hypot(Ye,qe,ct),p[2]=Math.hypot(dt,Nt,Jt),p}function Ge(p,N){var ge=new x.ARRAY_TYPE(3);je(ge,N);var Me=1/ge[0],Pe=1/ge[1],Ye=1/ge[2],qe=N[0]*Me,ct=N[1]*Pe,dt=N[2]*Ye,Nt=N[4]*Me,Jt=N[5]*Pe,xn=N[6]*Ye,An=N[8]*Me,En=N[9]*Pe,tr=N[10]*Ye,lr=qe+Jt+tr,Pn=0;return lr>0?(Pn=2*Math.sqrt(lr+1),p[3]=.25*Pn,p[0]=(xn-En)/Pn,p[1]=(An-dt)/Pn,p[2]=(ct-Nt)/Pn):qe>Jt&&qe>tr?(Pn=2*Math.sqrt(1+qe-Jt-tr),p[3]=(xn-En)/Pn,p[0]=.25*Pn,p[1]=(ct+Nt)/Pn,p[2]=(An+dt)/Pn):Jt>tr?(Pn=2*Math.sqrt(1+Jt-qe-tr),p[3]=(An-dt)/Pn,p[0]=(ct+Nt)/Pn,p[1]=.25*Pn,p[2]=(xn+En)/Pn):(Pn=2*Math.sqrt(1+tr-qe-Jt),p[3]=(ct-Nt)/Pn,p[0]=(An+dt)/Pn,p[1]=(xn+En)/Pn,p[2]=.25*Pn),p}function rt(p,N,ge,Me){var Pe=N[0],Ye=N[1],qe=N[2],ct=N[3],dt=Pe+Pe,Nt=Ye+Ye,Jt=qe+qe,xn=Pe*dt,An=Pe*Nt,En=Pe*Jt,tr=Ye*Nt,lr=Ye*Jt,Pn=qe*Jt,Cr=ct*dt,yi=ct*Nt,Ei=ct*Jt,fi=Me[0],qr=Me[1],ai=Me[2];return p[0]=(1-(tr+Pn))*fi,p[1]=(An+Ei)*fi,p[2]=(En-yi)*fi,p[3]=0,p[4]=(An-Ei)*qr,p[5]=(1-(xn+Pn))*qr,p[6]=(lr+Cr)*qr,p[7]=0,p[8]=(En+yi)*ai,p[9]=(lr-Cr)*ai,p[10]=(1-(xn+tr))*ai,p[11]=0,p[12]=ge[0],p[13]=ge[1],p[14]=ge[2],p[15]=1,p}function it(p,N,ge,Me,Pe){var Ye=N[0],qe=N[1],ct=N[2],dt=N[3],Nt=Ye+Ye,Jt=qe+qe,xn=ct+ct,An=Ye*Nt,En=Ye*Jt,tr=Ye*xn,lr=qe*Jt,Pn=qe*xn,Cr=ct*xn,yi=dt*Nt,Ei=dt*Jt,fi=dt*xn,qr=Me[0],ai=Me[1],Qo=Me[2],Uo=Pe[0],Bo=Pe[1],Vo=Pe[2],No=(1-(lr+Cr))*qr,jo=(En+fi)*qr,Sa=(tr-Ei)*qr,Vi=(En-fi)*ai,So=(1-(An+Cr))*ai,Cs=(Pn+yi)*ai,qu=(tr+Ei)*Qo,ma=(Pn-yi)*Qo,nc=(1-(An+lr))*Qo;return p[0]=No,p[1]=jo,p[2]=Sa,p[3]=0,p[4]=Vi,p[5]=So,p[6]=Cs,p[7]=0,p[8]=qu,p[9]=ma,p[10]=nc,p[11]=0,p[12]=ge[0]+Uo-(No*Uo+Vi*Bo+qu*Vo),p[13]=ge[1]+Bo-(jo*Uo+So*Bo+ma*Vo),p[14]=ge[2]+Vo-(Sa*Uo+Cs*Bo+nc*Vo),p[15]=1,p}function $t(p,N){var ge=N[0],Me=N[1],Pe=N[2],Ye=N[3],qe=ge+ge,ct=Me+Me,dt=Pe+Pe,Nt=ge*qe,Jt=Me*qe,xn=Me*ct,An=Pe*qe,En=Pe*ct,tr=Pe*dt,lr=Ye*qe,Pn=Ye*ct,Cr=Ye*dt;return p[0]=1-xn-tr,p[1]=Jt+Cr,p[2]=An-Pn,p[3]=0,p[4]=Jt-Cr,p[5]=1-Nt-tr,p[6]=En+lr,p[7]=0,p[8]=An+Pn,p[9]=En-lr,p[10]=1-Nt-xn,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}function R(p,N,ge,Me,Pe,Ye,qe){var ct=1/(ge-N),dt=1/(Pe-Me),Nt=1/(Ye-qe);return p[0]=2*Ye*ct,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=2*Ye*dt,p[6]=0,p[7]=0,p[8]=(ge+N)*ct,p[9]=(Pe+Me)*dt,p[10]=(qe+Ye)*Nt,p[11]=-1,p[12]=0,p[13]=0,p[14]=qe*Ye*2*Nt,p[15]=0,p}function He(p,N,ge,Me,Pe){var qe,Ye=1/Math.tan(N/2);return p[0]=Ye/ge,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=Ye,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[11]=-1,p[12]=0,p[13]=0,p[15]=0,null!=Pe&&Pe!==1/0?(p[10]=(Pe+Me)*(qe=1/(Me-Pe)),p[14]=2*Pe*Me*qe):(p[10]=-1,p[14]=-2*Me),p}var ze=He;function Je(p,N,ge,Me,Pe){var qe,Ye=1/Math.tan(N/2);return p[0]=Ye/ge,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=Ye,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[11]=-1,p[12]=0,p[13]=0,p[15]=0,null!=Pe&&Pe!==1/0?(p[10]=Pe*(qe=1/(Me-Pe)),p[14]=Pe*Me*qe):(p[10]=-1,p[14]=-Me),p}function gt(p,N,ge,Me){var Pe=Math.tan(N.upDegrees*Math.PI/180),Ye=Math.tan(N.downDegrees*Math.PI/180),qe=Math.tan(N.leftDegrees*Math.PI/180),ct=Math.tan(N.rightDegrees*Math.PI/180),dt=2/(qe+ct),Nt=2/(Pe+Ye);return p[0]=dt,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=Nt,p[6]=0,p[7]=0,p[8]=-(qe-ct)*dt*.5,p[9]=(Pe-Ye)*Nt*.5,p[10]=Me/(ge-Me),p[11]=-1,p[12]=0,p[13]=0,p[14]=Me*ge/(ge-Me),p[15]=0,p}function an(p,N,ge,Me,Pe,Ye,qe){var ct=1/(N-ge),dt=1/(Me-Pe),Nt=1/(Ye-qe);return p[0]=-2*ct,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=-2*dt,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=2*Nt,p[11]=0,p[12]=(N+ge)*ct,p[13]=(Pe+Me)*dt,p[14]=(qe+Ye)*Nt,p[15]=1,p}var Ke=an;function qt(p,N,ge,Me,Pe,Ye,qe){var ct=1/(N-ge),dt=1/(Me-Pe),Nt=1/(Ye-qe);return p[0]=-2*ct,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=-2*dt,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=Nt,p[11]=0,p[12]=(N+ge)*ct,p[13]=(Pe+Me)*dt,p[14]=Ye*Nt,p[15]=1,p}function Sn(p,N,ge,Me){var Pe,Ye,qe,ct,dt,Nt,Jt,xn,An,En,tr=N[0],lr=N[1],Pn=N[2],Cr=Me[0],yi=Me[1],Ei=Me[2],fi=ge[0],qr=ge[1],ai=ge[2];return Math.abs(tr-fi)<x.EPSILON&&Math.abs(lr-qr)<x.EPSILON&&Math.abs(Pn-ai)<x.EPSILON?xr(p):(Jt=tr-fi,xn=lr-qr,An=Pn-ai,Pe=yi*(An*=En=1/Math.hypot(Jt,xn,An))-Ei*(xn*=En),Ye=Ei*(Jt*=En)-Cr*An,qe=Cr*xn-yi*Jt,(En=Math.hypot(Pe,Ye,qe))?(Pe*=En=1/En,Ye*=En,qe*=En):(Pe=0,Ye=0,qe=0),ct=xn*qe-An*Ye,dt=An*Pe-Jt*qe,Nt=Jt*Ye-xn*Pe,(En=Math.hypot(ct,dt,Nt))?(ct*=En=1/En,dt*=En,Nt*=En):(ct=0,dt=0,Nt=0),p[0]=Pe,p[1]=ct,p[2]=Jt,p[3]=0,p[4]=Ye,p[5]=dt,p[6]=xn,p[7]=0,p[8]=qe,p[9]=Nt,p[10]=An,p[11]=0,p[12]=-(Pe*tr+Ye*lr+qe*Pn),p[13]=-(ct*tr+dt*lr+Nt*Pn),p[14]=-(Jt*tr+xn*lr+An*Pn),p[15]=1,p)}function zn(p,N,ge,Me){var Pe=N[0],Ye=N[1],qe=N[2],ct=Me[0],dt=Me[1],Nt=Me[2],Jt=Pe-ge[0],xn=Ye-ge[1],An=qe-ge[2],En=Jt*Jt+xn*xn+An*An;En>0&&(Jt*=En=1/Math.sqrt(En),xn*=En,An*=En);var tr=dt*An-Nt*xn,lr=Nt*Jt-ct*An,Pn=ct*xn-dt*Jt;return(En=tr*tr+lr*lr+Pn*Pn)>0&&(tr*=En=1/Math.sqrt(En),lr*=En,Pn*=En),p[0]=tr,p[1]=lr,p[2]=Pn,p[3]=0,p[4]=xn*Pn-An*lr,p[5]=An*tr-Jt*Pn,p[6]=Jt*lr-xn*tr,p[7]=0,p[8]=Jt,p[9]=xn,p[10]=An,p[11]=0,p[12]=Pe,p[13]=Ye,p[14]=qe,p[15]=1,p}function Wn(p){return"mat4("+p[0]+", "+p[1]+", "+p[2]+", "+p[3]+", "+p[4]+", "+p[5]+", "+p[6]+", "+p[7]+", "+p[8]+", "+p[9]+", "+p[10]+", "+p[11]+", "+p[12]+", "+p[13]+", "+p[14]+", "+p[15]+")"}function kr(p){return Math.hypot(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15])}function $n(p,N,ge){return p[0]=N[0]+ge[0],p[1]=N[1]+ge[1],p[2]=N[2]+ge[2],p[3]=N[3]+ge[3],p[4]=N[4]+ge[4],p[5]=N[5]+ge[5],p[6]=N[6]+ge[6],p[7]=N[7]+ge[7],p[8]=N[8]+ge[8],p[9]=N[9]+ge[9],p[10]=N[10]+ge[10],p[11]=N[11]+ge[11],p[12]=N[12]+ge[12],p[13]=N[13]+ge[13],p[14]=N[14]+ge[14],p[15]=N[15]+ge[15],p}function Er(p,N,ge){return p[0]=N[0]-ge[0],p[1]=N[1]-ge[1],p[2]=N[2]-ge[2],p[3]=N[3]-ge[3],p[4]=N[4]-ge[4],p[5]=N[5]-ge[5],p[6]=N[6]-ge[6],p[7]=N[7]-ge[7],p[8]=N[8]-ge[8],p[9]=N[9]-ge[9],p[10]=N[10]-ge[10],p[11]=N[11]-ge[11],p[12]=N[12]-ge[12],p[13]=N[13]-ge[13],p[14]=N[14]-ge[14],p[15]=N[15]-ge[15],p}function Xr(p,N,ge){return p[0]=N[0]*ge,p[1]=N[1]*ge,p[2]=N[2]*ge,p[3]=N[3]*ge,p[4]=N[4]*ge,p[5]=N[5]*ge,p[6]=N[6]*ge,p[7]=N[7]*ge,p[8]=N[8]*ge,p[9]=N[9]*ge,p[10]=N[10]*ge,p[11]=N[11]*ge,p[12]=N[12]*ge,p[13]=N[13]*ge,p[14]=N[14]*ge,p[15]=N[15]*ge,p}function Di(p,N,ge,Me){return p[0]=N[0]+ge[0]*Me,p[1]=N[1]+ge[1]*Me,p[2]=N[2]+ge[2]*Me,p[3]=N[3]+ge[3]*Me,p[4]=N[4]+ge[4]*Me,p[5]=N[5]+ge[5]*Me,p[6]=N[6]+ge[6]*Me,p[7]=N[7]+ge[7]*Me,p[8]=N[8]+ge[8]*Me,p[9]=N[9]+ge[9]*Me,p[10]=N[10]+ge[10]*Me,p[11]=N[11]+ge[11]*Me,p[12]=N[12]+ge[12]*Me,p[13]=N[13]+ge[13]*Me,p[14]=N[14]+ge[14]*Me,p[15]=N[15]+ge[15]*Me,p}function Kt(p,N){return p[0]===N[0]&&p[1]===N[1]&&p[2]===N[2]&&p[3]===N[3]&&p[4]===N[4]&&p[5]===N[5]&&p[6]===N[6]&&p[7]===N[7]&&p[8]===N[8]&&p[9]===N[9]&&p[10]===N[10]&&p[11]===N[11]&&p[12]===N[12]&&p[13]===N[13]&&p[14]===N[14]&&p[15]===N[15]}function Gn(p,N){var ge=p[0],Me=p[1],Pe=p[2],Ye=p[3],qe=p[4],ct=p[5],dt=p[6],Nt=p[7],Jt=p[8],xn=p[9],An=p[10],En=p[11],tr=p[12],lr=p[13],Pn=p[14],Cr=p[15],yi=N[0],Ei=N[1],fi=N[2],qr=N[3],ai=N[4],Qo=N[5],Uo=N[6],Bo=N[7],Vo=N[8],No=N[9],jo=N[10],Sa=N[11],Vi=N[12],So=N[13],Cs=N[14],qu=N[15];return Math.abs(ge-yi)<=x.EPSILON*Math.max(1,Math.abs(ge),Math.abs(yi))&&Math.abs(Me-Ei)<=x.EPSILON*Math.max(1,Math.abs(Me),Math.abs(Ei))&&Math.abs(Pe-fi)<=x.EPSILON*Math.max(1,Math.abs(Pe),Math.abs(fi))&&Math.abs(Ye-qr)<=x.EPSILON*Math.max(1,Math.abs(Ye),Math.abs(qr))&&Math.abs(qe-ai)<=x.EPSILON*Math.max(1,Math.abs(qe),Math.abs(ai))&&Math.abs(ct-Qo)<=x.EPSILON*Math.max(1,Math.abs(ct),Math.abs(Qo))&&Math.abs(dt-Uo)<=x.EPSILON*Math.max(1,Math.abs(dt),Math.abs(Uo))&&Math.abs(Nt-Bo)<=x.EPSILON*Math.max(1,Math.abs(Nt),Math.abs(Bo))&&Math.abs(Jt-Vo)<=x.EPSILON*Math.max(1,Math.abs(Jt),Math.abs(Vo))&&Math.abs(xn-No)<=x.EPSILON*Math.max(1,Math.abs(xn),Math.abs(No))&&Math.abs(An-jo)<=x.EPSILON*Math.max(1,Math.abs(An),Math.abs(jo))&&Math.abs(En-Sa)<=x.EPSILON*Math.max(1,Math.abs(En),Math.abs(Sa))&&Math.abs(tr-Vi)<=x.EPSILON*Math.max(1,Math.abs(tr),Math.abs(Vi))&&Math.abs(lr-So)<=x.EPSILON*Math.max(1,Math.abs(lr),Math.abs(So))&&Math.abs(Pn-Cs)<=x.EPSILON*Math.max(1,Math.abs(Pn),Math.abs(Cs))&&Math.abs(Cr-qu)<=x.EPSILON*Math.max(1,Math.abs(Cr),Math.abs(qu))}var hr=yr,Un=Er,Gr=G(3454);function br(){var p=new x.ARRAY_TYPE(4);return x.ARRAY_TYPE!=Float32Array&&(p[0]=0,p[1]=0,p[2]=0,p[3]=0),p}function Et(p){var N=new x.ARRAY_TYPE(4);return N[0]=p[0],N[1]=p[1],N[2]=p[2],N[3]=p[3],N}function Oe(p,N,ge,Me){var Pe=new x.ARRAY_TYPE(4);return Pe[0]=p,Pe[1]=N,Pe[2]=ge,Pe[3]=Me,Pe}function st(p,N){return p[0]=N[0],p[1]=N[1],p[2]=N[2],p[3]=N[3],p}function Ot(p,N,ge,Me,Pe){return p[0]=N,p[1]=ge,p[2]=Me,p[3]=Pe,p}function At(p,N,ge){return p[0]=N[0]+ge[0],p[1]=N[1]+ge[1],p[2]=N[2]+ge[2],p[3]=N[3]+ge[3],p}function It(p,N,ge){return p[0]=N[0]-ge[0],p[1]=N[1]-ge[1],p[2]=N[2]-ge[2],p[3]=N[3]-ge[3],p}function cn(p,N,ge){return p[0]=N[0]*ge[0],p[1]=N[1]*ge[1],p[2]=N[2]*ge[2],p[3]=N[3]*ge[3],p}function fn(p,N,ge){return p[0]=N[0]/ge[0],p[1]=N[1]/ge[1],p[2]=N[2]/ge[2],p[3]=N[3]/ge[3],p}function Fn(p,N){return p[0]=Math.ceil(N[0]),p[1]=Math.ceil(N[1]),p[2]=Math.ceil(N[2]),p[3]=Math.ceil(N[3]),p}function Or(p,N){return p[0]=Math.floor(N[0]),p[1]=Math.floor(N[1]),p[2]=Math.floor(N[2]),p[3]=Math.floor(N[3]),p}function Dr(p,N,ge){return p[0]=Math.min(N[0],ge[0]),p[1]=Math.min(N[1],ge[1]),p[2]=Math.min(N[2],ge[2]),p[3]=Math.min(N[3],ge[3]),p}function Qn(p,N,ge){return p[0]=Math.max(N[0],ge[0]),p[1]=Math.max(N[1],ge[1]),p[2]=Math.max(N[2],ge[2]),p[3]=Math.max(N[3],ge[3]),p}function xi(p,N){return p[0]=Math.round(N[0]),p[1]=Math.round(N[1]),p[2]=Math.round(N[2]),p[3]=Math.round(N[3]),p}function eo(p,N,ge){return p[0]=N[0]*ge,p[1]=N[1]*ge,p[2]=N[2]*ge,p[3]=N[3]*ge,p}function dr(p,N,ge,Me){return p[0]=N[0]+ge[0]*Me,p[1]=N[1]+ge[1]*Me,p[2]=N[2]+ge[2]*Me,p[3]=N[3]+ge[3]*Me,p}function Eo(p,N){return Math.hypot(N[0]-p[0],N[1]-p[1],N[2]-p[2],N[3]-p[3])}function Br(p,N){var ge=N[0]-p[0],Me=N[1]-p[1],Pe=N[2]-p[2],Ye=N[3]-p[3];return ge*ge+Me*Me+Pe*Pe+Ye*Ye}function Ni(p){return Math.hypot(p[0],p[1],p[2],p[3])}function Ea(p){var N=p[0],ge=p[1],Me=p[2],Pe=p[3];return N*N+ge*ge+Me*Me+Pe*Pe}function _a(p,N){return p[0]=-N[0],p[1]=-N[1],p[2]=-N[2],p[3]=-N[3],p}function Au(p,N){return p[0]=1/N[0],p[1]=1/N[1],p[2]=1/N[2],p[3]=1/N[3],p}function Du(p,N){var ge=N[0],Me=N[1],Pe=N[2],Ye=N[3],qe=ge*ge+Me*Me+Pe*Pe+Ye*Ye;return qe>0&&(qe=1/Math.sqrt(qe)),p[0]=ge*qe,p[1]=Me*qe,p[2]=Pe*qe,p[3]=Ye*qe,p}function pa(p,N){return p[0]*N[0]+p[1]*N[1]+p[2]*N[2]+p[3]*N[3]}function Kl(p,N,ge,Me){var Pe=ge[0]*Me[1]-ge[1]*Me[0],Ye=ge[0]*Me[2]-ge[2]*Me[0],qe=ge[0]*Me[3]-ge[3]*Me[0],ct=ge[1]*Me[2]-ge[2]*Me[1],dt=ge[1]*Me[3]-ge[3]*Me[1],Nt=ge[2]*Me[3]-ge[3]*Me[2],Jt=N[0],xn=N[1],An=N[2],En=N[3];return p[0]=xn*Nt-An*dt+En*ct,p[1]=-Jt*Nt+An*qe-En*Ye,p[2]=Jt*dt-xn*qe+En*Pe,p[3]=-Jt*ct+xn*Ye-An*Pe,p}function Xs(p,N,ge,Me){var Pe=N[0],Ye=N[1],qe=N[2],ct=N[3];return p[0]=Pe+Me*(ge[0]-Pe),p[1]=Ye+Me*(ge[1]-Ye),p[2]=qe+Me*(ge[2]-qe),p[3]=ct+Me*(ge[3]-ct),p}function Gc(p,N){var ge,Me,Pe,Ye,qe,ct;N=N||1;do{qe=(ge=2*x.RANDOM()-1)*ge+(Me=2*x.RANDOM()-1)*Me}while(qe>=1);do{ct=(Pe=2*x.RANDOM()-1)*Pe+(Ye=2*x.RANDOM()-1)*Ye}while(ct>=1);var dt=Math.sqrt((1-qe)/ct);return p[0]=N*ge,p[1]=N*Me,p[2]=N*Pe*dt,p[3]=N*Ye*dt,p}function Rs(p,N,ge){var Me=N[0],Pe=N[1],Ye=N[2],qe=N[3];return p[0]=ge[0]*Me+ge[4]*Pe+ge[8]*Ye+ge[12]*qe,p[1]=ge[1]*Me+ge[5]*Pe+ge[9]*Ye+ge[13]*qe,p[2]=ge[2]*Me+ge[6]*Pe+ge[10]*Ye+ge[14]*qe,p[3]=ge[3]*Me+ge[7]*Pe+ge[11]*Ye+ge[15]*qe,p}function Uc(p,N,ge){var Me=N[0],Pe=N[1],Ye=N[2],qe=ge[0],ct=ge[1],dt=ge[2],Nt=ge[3],Jt=Nt*Me+ct*Ye-dt*Pe,xn=Nt*Pe+dt*Me-qe*Ye,An=Nt*Ye+qe*Pe-ct*Me,En=-qe*Me-ct*Pe-dt*Ye;return p[0]=Jt*Nt+En*-qe+xn*-dt-An*-ct,p[1]=xn*Nt+En*-ct+An*-qe-Jt*-dt,p[2]=An*Nt+En*-dt+Jt*-ct-xn*-qe,p[3]=N[3],p}function Kh(p){return p[0]=0,p[1]=0,p[2]=0,p[3]=0,p}function Zh(p){return"vec4("+p[0]+", "+p[1]+", "+p[2]+", "+p[3]+")"}function Kf(p,N){return p[0]===N[0]&&p[1]===N[1]&&p[2]===N[2]&&p[3]===N[3]}function qs(p,N){var ge=p[0],Me=p[1],Pe=p[2],Ye=p[3],qe=N[0],ct=N[1],dt=N[2],Nt=N[3];return Math.abs(ge-qe)<=x.EPSILON*Math.max(1,Math.abs(ge),Math.abs(qe))&&Math.abs(Me-ct)<=x.EPSILON*Math.max(1,Math.abs(Me),Math.abs(ct))&&Math.abs(Pe-dt)<=x.EPSILON*Math.max(1,Math.abs(Pe),Math.abs(dt))&&Math.abs(Ye-Nt)<=x.EPSILON*Math.max(1,Math.abs(Ye),Math.abs(Nt))}var p,Tu=It,Zf=cn,Qh=fn,ua=Eo,Ii=Br,Jh=Ni,ed=Ea,Zl=(p=br(),function(N,ge,Me,Pe,Ye,qe){var ct,dt;for(ge||(ge=4),Me||(Me=0),dt=Pe?Math.min(Pe*ge+Me,N.length):N.length,ct=Me;ct<dt;ct+=ge)p[0]=N[ct],p[1]=N[ct+1],p[2]=N[ct+2],p[3]=N[ct+3],Ye(p,p,qe),N[ct]=p[0],N[ct+1]=p[1],N[ct+2]=p[2],N[ct+3]=p[3];return N});function ci(){var p=new x.ARRAY_TYPE(4);return x.ARRAY_TYPE!=Float32Array&&(p[0]=0,p[1]=0,p[2]=0),p[3]=1,p}function Vc(p){return p[0]=0,p[1]=0,p[2]=0,p[3]=1,p}function ys(p,N,ge){ge*=.5;var Me=Math.sin(ge);return p[0]=Me*N[0],p[1]=Me*N[1],p[2]=Me*N[2],p[3]=Math.cos(ge),p}function Hu(p,N){var ge=2*Math.acos(N[3]),Me=Math.sin(ge/2);return Me>x.EPSILON?(p[0]=N[0]/Me,p[1]=N[1]/Me,p[2]=N[2]/Me):(p[0]=1,p[1]=0,p[2]=0),ge}function Wu(p,N){var ge=Es(p,N);return Math.acos(2*ge*ge-1)}function ns(p,N,ge){var Me=N[0],Pe=N[1],Ye=N[2],qe=N[3],ct=ge[0],dt=ge[1],Nt=ge[2],Jt=ge[3];return p[0]=Me*Jt+qe*ct+Pe*Nt-Ye*dt,p[1]=Pe*Jt+qe*dt+Ye*ct-Me*Nt,p[2]=Ye*Jt+qe*Nt+Me*dt-Pe*ct,p[3]=qe*Jt-Me*ct-Pe*dt-Ye*Nt,p}function bs(p,N,ge){ge*=.5;var Me=N[0],Pe=N[1],Ye=N[2],qe=N[3],ct=Math.sin(ge),dt=Math.cos(ge);return p[0]=Me*dt+qe*ct,p[1]=Pe*dt+Ye*ct,p[2]=Ye*dt-Pe*ct,p[3]=qe*dt-Me*ct,p}function Iu(p,N,ge){ge*=.5;var Me=N[0],Pe=N[1],Ye=N[2],qe=N[3],ct=Math.sin(ge),dt=Math.cos(ge);return p[0]=Me*dt-Ye*ct,p[1]=Pe*dt+qe*ct,p[2]=Ye*dt+Me*ct,p[3]=qe*dt-Pe*ct,p}function Ou(p,N,ge){ge*=.5;var Me=N[0],Pe=N[1],Ye=N[2],qe=N[3],ct=Math.sin(ge),dt=Math.cos(ge);return p[0]=Me*dt+Pe*ct,p[1]=Pe*dt-Me*ct,p[2]=Ye*dt+qe*ct,p[3]=qe*dt-Ye*ct,p}function Pu(p,N){var ge=N[0],Me=N[1],Pe=N[2];return p[0]=ge,p[1]=Me,p[2]=Pe,p[3]=Math.sqrt(Math.abs(1-ge*ge-Me*Me-Pe*Pe)),p}function pl(p,N){var ge=N[0],Me=N[1],Pe=N[2],Ye=N[3],qe=Math.sqrt(ge*ge+Me*Me+Pe*Pe),ct=Math.exp(Ye),dt=qe>0?ct*Math.sin(qe)/qe:0;return p[0]=ge*dt,p[1]=Me*dt,p[2]=Pe*dt,p[3]=ct*Math.cos(qe),p}function Ql(p,N){var ge=N[0],Me=N[1],Pe=N[2],Ye=N[3],qe=Math.sqrt(ge*ge+Me*Me+Pe*Pe),ct=qe>0?Math.atan2(qe,Ye)/qe:0;return p[0]=ge*ct,p[1]=Me*ct,p[2]=Pe*ct,p[3]=.5*Math.log(ge*ge+Me*Me+Pe*Pe+Ye*Ye),p}function Jl(p,N,ge){return Ql(p,N),du(p,p,ge),pl(p,p),p}function Qr(p,N,ge,Me){var An,En,tr,lr,Pn,Pe=N[0],Ye=N[1],qe=N[2],ct=N[3],dt=ge[0],Nt=ge[1],Jt=ge[2],xn=ge[3];return(En=Pe*dt+Ye*Nt+qe*Jt+ct*xn)<0&&(En=-En,dt=-dt,Nt=-Nt,Jt=-Jt,xn=-xn),1-En>x.EPSILON?(An=Math.acos(En),tr=Math.sin(An),lr=Math.sin((1-Me)*An)/tr,Pn=Math.sin(Me*An)/tr):(lr=1-Me,Pn=Me),p[0]=lr*Pe+Pn*dt,p[1]=lr*Ye+Pn*Nt,p[2]=lr*qe+Pn*Jt,p[3]=lr*ct+Pn*xn,p}function uo(p){var N=x.RANDOM(),ge=x.RANDOM(),Me=x.RANDOM(),Pe=Math.sqrt(1-N),Ye=Math.sqrt(N);return p[0]=Pe*Math.sin(2*Math.PI*ge),p[1]=Pe*Math.cos(2*Math.PI*ge),p[2]=Ye*Math.sin(2*Math.PI*Me),p[3]=Ye*Math.cos(2*Math.PI*Me),p}function Hc(p,N){var ge=N[0],Me=N[1],Pe=N[2],Ye=N[3],qe=ge*ge+Me*Me+Pe*Pe+Ye*Ye,ct=qe?1/qe:0;return p[0]=-ge*ct,p[1]=-Me*ct,p[2]=-Pe*ct,p[3]=Ye*ct,p}function Ha(p,N){return p[0]=-N[0],p[1]=-N[1],p[2]=-N[2],p[3]=N[3],p}function ws(p,N){var Me,ge=N[0]+N[4]+N[8];if(ge>0)Me=Math.sqrt(ge+1),p[3]=.5*Me,p[0]=(N[5]-N[7])*(Me=.5/Me),p[1]=(N[6]-N[2])*Me,p[2]=(N[1]-N[3])*Me;else{var Pe=0;N[4]>N[0]&&(Pe=1),N[8]>N[3*Pe+Pe]&&(Pe=2);var Ye=(Pe+1)%3,qe=(Pe+2)%3;Me=Math.sqrt(N[3*Pe+Pe]-N[3*Ye+Ye]-N[3*qe+qe]+1),p[Pe]=.5*Me,p[3]=(N[3*Ye+qe]-N[3*qe+Ye])*(Me=.5/Me),p[Ye]=(N[3*Ye+Pe]+N[3*Pe+Ye])*Me,p[qe]=(N[3*qe+Pe]+N[3*Pe+qe])*Me}return p}function Wc(p,N,ge,Me){var Pe=.5*Math.PI/180;N*=Pe,ge*=Pe,Me*=Pe;var Ye=Math.sin(N),qe=Math.cos(N),ct=Math.sin(ge),dt=Math.cos(ge),Nt=Math.sin(Me),Jt=Math.cos(Me);return p[0]=Ye*dt*Jt-qe*ct*Nt,p[1]=qe*ct*Jt+Ye*dt*Nt,p[2]=qe*dt*Nt-Ye*ct*Jt,p[3]=qe*dt*Jt+Ye*ct*Nt,p}function xs(p){return"quat("+p[0]+", "+p[1]+", "+p[2]+", "+p[3]+")"}var qo=Et,Nu=Oe,Ks=st,Wa=Ot,Gi=At,$c=ns,du=eo,Es=pa,Ui=Xs,gu=Ni,ec=gu,pu=Ea,tc=pu,rs=Du,Zs=Kf,Co=qs,_s=function(){var p=Gr.create(),N=Gr.fromValues(1,0,0),ge=Gr.fromValues(0,1,0);return function(Me,Pe,Ye){var qe=Gr.dot(Pe,Ye);return qe<-.999999?(Gr.cross(p,N,Pe),Gr.len(p)<1e-6&&Gr.cross(p,ge,Pe),Gr.normalize(p,p),ys(Me,p,Math.PI),Me):qe>.999999?(Me[0]=0,Me[1]=0,Me[2]=0,Me[3]=1,Me):(Gr.cross(p,Pe,Ye),Me[0]=p[0],Me[1]=p[1],Me[2]=p[2],Me[3]=1+qe,rs(Me,Me))}}(),Qf=function(){var p=ci(),N=ci();return function(ge,Me,Pe,Ye,qe,ct){return Qr(p,Me,qe,ct),Qr(N,Pe,Ye,ct),Qr(ge,p,N,2*ct*(1-ct)),ge}}(),Da=function(){var p=Tn.create();return function(N,ge,Me,Pe){return p[0]=Me[0],p[3]=Me[1],p[6]=Me[2],p[1]=Pe[0],p[4]=Pe[1],p[7]=Pe[2],p[2]=-ge[0],p[5]=-ge[1],p[8]=-ge[2],rs(N,ws(N,p))}}();function vl(){var p=new x.ARRAY_TYPE(8);return x.ARRAY_TYPE!=Float32Array&&(p[0]=0,p[1]=0,p[2]=0,p[4]=0,p[5]=0,p[6]=0,p[7]=0),p[3]=1,p}function is(p){var N=new x.ARRAY_TYPE(8);return N[0]=p[0],N[1]=p[1],N[2]=p[2],N[3]=p[3],N[4]=p[4],N[5]=p[5],N[6]=p[6],N[7]=p[7],N}function vu(p,N,ge,Me,Pe,Ye,qe,ct){var dt=new x.ARRAY_TYPE(8);return dt[0]=p,dt[1]=N,dt[2]=ge,dt[3]=Me,dt[4]=Pe,dt[5]=Ye,dt[6]=qe,dt[7]=ct,dt}function $u(p,N,ge,Me,Pe,Ye,qe){var ct=new x.ARRAY_TYPE(8);ct[0]=p,ct[1]=N,ct[2]=ge,ct[3]=Me;var dt=.5*Pe,Nt=.5*Ye,Jt=.5*qe;return ct[4]=dt*Me+Nt*ge-Jt*N,ct[5]=Nt*Me+Jt*p-dt*ge,ct[6]=Jt*Me+dt*N-Nt*p,ct[7]=-dt*p-Nt*N-Jt*ge,ct}function Fo(p,N,ge){var Me=.5*ge[0],Pe=.5*ge[1],Ye=.5*ge[2],qe=N[0],ct=N[1],dt=N[2],Nt=N[3];return p[0]=qe,p[1]=ct,p[2]=dt,p[3]=Nt,p[4]=Me*Nt+Pe*dt-Ye*ct,p[5]=Pe*Nt+Ye*qe-Me*dt,p[6]=Ye*Nt+Me*ct-Pe*qe,p[7]=-Me*qe-Pe*ct-Ye*dt,p}function To(p,N){return p[0]=0,p[1]=0,p[2]=0,p[3]=1,p[4]=.5*N[0],p[5]=.5*N[1],p[6]=.5*N[2],p[7]=0,p}function Li(p,N){return p[0]=N[0],p[1]=N[1],p[2]=N[2],p[3]=N[3],p[4]=0,p[5]=0,p[6]=0,p[7]=0,p}function la(p,N){var ge=ci();Ge(ge,N);var Me=new x.ARRAY_TYPE(3);return ce(Me,N),Fo(p,ge,Me),p}function Ko(p,N){return p[0]=N[0],p[1]=N[1],p[2]=N[2],p[3]=N[3],p[4]=N[4],p[5]=N[5],p[6]=N[6],p[7]=N[7],p}function Na(p){return p[0]=0,p[1]=0,p[2]=0,p[3]=1,p[4]=0,p[5]=0,p[6]=0,p[7]=0,p}function Ne(p,N,ge,Me,Pe,Ye,qe,ct,dt){return p[0]=N,p[1]=ge,p[2]=Me,p[3]=Pe,p[4]=Ye,p[5]=qe,p[6]=ct,p[7]=dt,p}var vt=Ks;function mt(p,N){return p[0]=N[4],p[1]=N[5],p[2]=N[6],p[3]=N[7],p}var Gt=Ks;function bn(p,N){return p[4]=N[0],p[5]=N[1],p[6]=N[2],p[7]=N[3],p}function or(p,N){var ge=N[4],Me=N[5],Pe=N[6],Ye=N[7],qe=-N[0],ct=-N[1],dt=-N[2],Nt=N[3];return p[0]=2*(ge*Nt+Ye*qe+Me*dt-Pe*ct),p[1]=2*(Me*Nt+Ye*ct+Pe*qe-ge*dt),p[2]=2*(Pe*Nt+Ye*dt+ge*ct-Me*qe),p}function Nr(p,N,ge){var Me=N[0],Pe=N[1],Ye=N[2],qe=N[3],ct=.5*ge[0],dt=.5*ge[1],Nt=.5*ge[2],Jt=N[4],xn=N[5],An=N[6],En=N[7];return p[0]=Me,p[1]=Pe,p[2]=Ye,p[3]=qe,p[4]=qe*ct+Pe*Nt-Ye*dt+Jt,p[5]=qe*dt+Ye*ct-Me*Nt+xn,p[6]=qe*Nt+Me*dt-Pe*ct+An,p[7]=-Me*ct-Pe*dt-Ye*Nt+En,p}function ei(p,N,ge){var Me=-N[0],Pe=-N[1],Ye=-N[2],qe=N[3],ct=N[4],dt=N[5],Nt=N[6],Jt=N[7],xn=ct*qe+Jt*Me+dt*Ye-Nt*Pe,An=dt*qe+Jt*Pe+Nt*Me-ct*Ye,En=Nt*qe+Jt*Ye+ct*Pe-dt*Me,tr=Jt*qe-ct*Me-dt*Pe-Nt*Ye;return bs(p,N,ge),p[4]=xn*(qe=p[3])+tr*(Me=p[0])+An*(Ye=p[2])-En*(Pe=p[1]),p[5]=An*qe+tr*Pe+En*Me-xn*Ye,p[6]=En*qe+tr*Ye+xn*Pe-An*Me,p[7]=tr*qe-xn*Me-An*Pe-En*Ye,p}function oo(p,N,ge){var Me=-N[0],Pe=-N[1],Ye=-N[2],qe=N[3],ct=N[4],dt=N[5],Nt=N[6],Jt=N[7],xn=ct*qe+Jt*Me+dt*Ye-Nt*Pe,An=dt*qe+Jt*Pe+Nt*Me-ct*Ye,En=Nt*qe+Jt*Ye+ct*Pe-dt*Me,tr=Jt*qe-ct*Me-dt*Pe-Nt*Ye;return Iu(p,N,ge),p[4]=xn*(qe=p[3])+tr*(Me=p[0])+An*(Ye=p[2])-En*(Pe=p[1]),p[5]=An*qe+tr*Pe+En*Me-xn*Ye,p[6]=En*qe+tr*Ye+xn*Pe-An*Me,p[7]=tr*qe-xn*Me-An*Pe-En*Ye,p}function ki(p,N,ge){var Me=-N[0],Pe=-N[1],Ye=-N[2],qe=N[3],ct=N[4],dt=N[5],Nt=N[6],Jt=N[7],xn=ct*qe+Jt*Me+dt*Ye-Nt*Pe,An=dt*qe+Jt*Pe+Nt*Me-ct*Ye,En=Nt*qe+Jt*Ye+ct*Pe-dt*Me,tr=Jt*qe-ct*Me-dt*Pe-Nt*Ye;return Ou(p,N,ge),p[4]=xn*(qe=p[3])+tr*(Me=p[0])+An*(Ye=p[2])-En*(Pe=p[1]),p[5]=An*qe+tr*Pe+En*Me-xn*Ye,p[6]=En*qe+tr*Ye+xn*Pe-An*Me,p[7]=tr*qe-xn*Me-An*Pe-En*Ye,p}function Zo(p,N,ge){var Me=ge[0],Pe=ge[1],Ye=ge[2],qe=ge[3],ct=N[0],dt=N[1],Nt=N[2],Jt=N[3];return p[0]=ct*qe+Jt*Me+dt*Ye-Nt*Pe,p[1]=dt*qe+Jt*Pe+Nt*Me-ct*Ye,p[2]=Nt*qe+Jt*Ye+ct*Pe-dt*Me,p[3]=Jt*qe-ct*Me-dt*Pe-Nt*Ye,p[4]=(ct=N[4])*qe+(Jt=N[7])*Me+(dt=N[5])*Ye-(Nt=N[6])*Pe,p[5]=dt*qe+Jt*Pe+Nt*Me-ct*Ye,p[6]=Nt*qe+Jt*Ye+ct*Pe-dt*Me,p[7]=Jt*qe-ct*Me-dt*Pe-Nt*Ye,p}function Fs(p,N,ge){var Me=N[0],Pe=N[1],Ye=N[2],qe=N[3],ct=ge[0],dt=ge[1],Nt=ge[2],Jt=ge[3];return p[0]=Me*Jt+qe*ct+Pe*Nt-Ye*dt,p[1]=Pe*Jt+qe*dt+Ye*ct-Me*Nt,p[2]=Ye*Jt+qe*Nt+Me*dt-Pe*ct,p[3]=qe*Jt-Me*ct-Pe*dt-Ye*Nt,p[4]=Me*(Jt=ge[7])+qe*(ct=ge[4])+Pe*(Nt=ge[6])-Ye*(dt=ge[5]),p[5]=Pe*Jt+qe*dt+Ye*ct-Me*Nt,p[6]=Ye*Jt+qe*Nt+Me*dt-Pe*ct,p[7]=qe*Jt-Me*ct-Pe*dt-Ye*Nt,p}function mi(p,N,ge,Me){if(Math.abs(Me)<x.EPSILON)return Ko(p,N);var Pe=Math.hypot(ge[0],ge[1],ge[2]);Me*=.5;var Ye=Math.sin(Me),qe=Ye*ge[0]/Pe,ct=Ye*ge[1]/Pe,dt=Ye*ge[2]/Pe,Nt=Math.cos(Me),Jt=N[0],xn=N[1],An=N[2],En=N[3];p[0]=Jt*Nt+En*qe+xn*dt-An*ct,p[1]=xn*Nt+En*ct+An*qe-Jt*dt,p[2]=An*Nt+En*dt+Jt*ct-xn*qe,p[3]=En*Nt-Jt*qe-xn*ct-An*dt;var tr=N[4],lr=N[5],Pn=N[6],Cr=N[7];return p[4]=tr*Nt+Cr*qe+lr*dt-Pn*ct,p[5]=lr*Nt+Cr*ct+Pn*qe-tr*dt,p[6]=Pn*Nt+Cr*dt+tr*ct-lr*qe,p[7]=Cr*Nt-tr*qe-lr*ct-Pn*dt,p}function Lu(p,N,ge){return p[0]=N[0]+ge[0],p[1]=N[1]+ge[1],p[2]=N[2]+ge[2],p[3]=N[3]+ge[3],p[4]=N[4]+ge[4],p[5]=N[5]+ge[5],p[6]=N[6]+ge[6],p[7]=N[7]+ge[7],p}function Ss(p,N,ge){var Me=N[0],Pe=N[1],Ye=N[2],qe=N[3],ct=ge[4],dt=ge[5],Nt=ge[6],Jt=ge[7],xn=N[4],An=N[5],En=N[6],tr=N[7],lr=ge[0],Pn=ge[1],Cr=ge[2],yi=ge[3];return p[0]=Me*yi+qe*lr+Pe*Cr-Ye*Pn,p[1]=Pe*yi+qe*Pn+Ye*lr-Me*Cr,p[2]=Ye*yi+qe*Cr+Me*Pn-Pe*lr,p[3]=qe*yi-Me*lr-Pe*Pn-Ye*Cr,p[4]=Me*Jt+qe*ct+Pe*Nt-Ye*dt+xn*yi+tr*lr+An*Cr-En*Pn,p[5]=Pe*Jt+qe*dt+Ye*ct-Me*Nt+An*yi+tr*Pn+En*lr-xn*Cr,p[6]=Ye*Jt+qe*Nt+Me*dt-Pe*ct+En*yi+tr*Cr+xn*Pn-An*lr,p[7]=qe*Jt-Me*ct-Pe*dt-Ye*Nt+tr*yi-xn*lr-An*Pn-En*Cr,p}var Yu=Ss;function ku(p,N,ge){return p[0]=N[0]*ge,p[1]=N[1]*ge,p[2]=N[2]*ge,p[3]=N[3]*ge,p[4]=N[4]*ge,p[5]=N[5]*ge,p[6]=N[6]*ge,p[7]=N[7]*ge,p}var va=Es;function Xu(p,N,ge,Me){var Pe=1-Me;return va(N,ge)<0&&(Me=-Me),p[0]=N[0]*Pe+ge[0]*Me,p[1]=N[1]*Pe+ge[1]*Me,p[2]=N[2]*Pe+ge[2]*Me,p[3]=N[3]*Pe+ge[3]*Me,p[4]=N[4]*Pe+ge[4]*Me,p[5]=N[5]*Pe+ge[5]*Me,p[6]=N[6]*Pe+ge[6]*Me,p[7]=N[7]*Pe+ge[7]*Me,p}function Ru(p,N){var ge=lo(N);return p[0]=-N[0]/ge,p[1]=-N[1]/ge,p[2]=-N[2]/ge,p[3]=N[3]/ge,p[4]=-N[4]/ge,p[5]=-N[5]/ge,p[6]=-N[6]/ge,p[7]=N[7]/ge,p}function Ms(p,N){return p[0]=-N[0],p[1]=-N[1],p[2]=-N[2],p[3]=N[3],p[4]=-N[4],p[5]=-N[5],p[6]=-N[6],p[7]=N[7],p}var os=gu,Yc=os,lo=pu,as=lo;function td(p,N){var ge=lo(N);if(ge>0){ge=Math.sqrt(ge);var Me=N[0]/ge,Pe=N[1]/ge,Ye=N[2]/ge,qe=N[3]/ge,ct=N[4],dt=N[5],Nt=N[6],Jt=N[7],xn=Me*ct+Pe*dt+Ye*Nt+qe*Jt;p[0]=Me,p[1]=Pe,p[2]=Ye,p[3]=qe,p[4]=(ct-Me*xn)/ge,p[5]=(dt-Pe*xn)/ge,p[6]=(Nt-Ye*xn)/ge,p[7]=(Jt-qe*xn)/ge}return p}function Xc(p){return"quat2("+p[0]+", "+p[1]+", "+p[2]+", "+p[3]+", "+p[4]+", "+p[5]+", "+p[6]+", "+p[7]+")"}function Jf(p,N){return p[0]===N[0]&&p[1]===N[1]&&p[2]===N[2]&&p[3]===N[3]&&p[4]===N[4]&&p[5]===N[5]&&p[6]===N[6]&&p[7]===N[7]}function Fu(p,N){var ge=p[0],Me=p[1],Pe=p[2],Ye=p[3],qe=p[4],ct=p[5],dt=p[6],Nt=p[7],Jt=N[0],xn=N[1],An=N[2],En=N[3],tr=N[4],lr=N[5],Pn=N[6],Cr=N[7];return Math.abs(ge-Jt)<=x.EPSILON*Math.max(1,Math.abs(ge),Math.abs(Jt))&&Math.abs(Me-xn)<=x.EPSILON*Math.max(1,Math.abs(Me),Math.abs(xn))&&Math.abs(Pe-An)<=x.EPSILON*Math.max(1,Math.abs(Pe),Math.abs(An))&&Math.abs(Ye-En)<=x.EPSILON*Math.max(1,Math.abs(Ye),Math.abs(En))&&Math.abs(qe-tr)<=x.EPSILON*Math.max(1,Math.abs(qe),Math.abs(tr))&&Math.abs(ct-lr)<=x.EPSILON*Math.max(1,Math.abs(ct),Math.abs(lr))&&Math.abs(dt-Pn)<=x.EPSILON*Math.max(1,Math.abs(dt),Math.abs(Pn))&&Math.abs(Nt-Cr)<=x.EPSILON*Math.max(1,Math.abs(Nt),Math.abs(Cr))}var qc=G(8235)},7543:(Qt,V,G)=>{"use strict";G.r(V),G.d(V,{add:()=>oe,adjoint:()=>y,clone:()=>k,copy:()=>F,create:()=>Q,determinant:()=>A,equals:()=>Ce,exactEquals:()=>me,frob:()=>re,fromMat2d:()=>q,fromMat4:()=>j,fromQuat:()=>K,fromRotation:()=>ie,fromScaling:()=>ne,fromTranslation:()=>z,fromValues:()=>I,identity:()=>E,invert:()=>w,mul:()=>fe,multiply:()=>M,multiplyScalar:()=>we,multiplyScalarAndAdd:()=>_e,normalFromMat4:()=>ee,projection:()=>X,rotate:()=>P,scale:()=>U,set:()=>x,str:()=>ae,sub:()=>be,subtract:()=>ve,translate:()=>S,transpose:()=>b});var B=G(5278);function Q(){var te=new B.ARRAY_TYPE(9);return B.ARRAY_TYPE!=Float32Array&&(te[1]=0,te[2]=0,te[3]=0,te[5]=0,te[6]=0,te[7]=0),te[0]=1,te[4]=1,te[8]=1,te}function j(te,de){return te[0]=de[0],te[1]=de[1],te[2]=de[2],te[3]=de[4],te[4]=de[5],te[5]=de[6],te[6]=de[8],te[7]=de[9],te[8]=de[10],te}function k(te){var de=new B.ARRAY_TYPE(9);return de[0]=te[0],de[1]=te[1],de[2]=te[2],de[3]=te[3],de[4]=te[4],de[5]=te[5],de[6]=te[6],de[7]=te[7],de[8]=te[8],de}function F(te,de){return te[0]=de[0],te[1]=de[1],te[2]=de[2],te[3]=de[3],te[4]=de[4],te[5]=de[5],te[6]=de[6],te[7]=de[7],te[8]=de[8],te}function I(te,de,ke,Ze,We,bt,Ft,Pt,Xe){var yt=new B.ARRAY_TYPE(9);return yt[0]=te,yt[1]=de,yt[2]=ke,yt[3]=Ze,yt[4]=We,yt[5]=bt,yt[6]=Ft,yt[7]=Pt,yt[8]=Xe,yt}function x(te,de,ke,Ze,We,bt,Ft,Pt,Xe,yt){return te[0]=de,te[1]=ke,te[2]=Ze,te[3]=We,te[4]=bt,te[5]=Ft,te[6]=Pt,te[7]=Xe,te[8]=yt,te}function E(te){return te[0]=1,te[1]=0,te[2]=0,te[3]=0,te[4]=1,te[5]=0,te[6]=0,te[7]=0,te[8]=1,te}function b(te,de){if(te===de){var ke=de[1],Ze=de[2],We=de[5];te[1]=de[3],te[2]=de[6],te[3]=ke,te[5]=de[7],te[6]=Ze,te[7]=We}else te[0]=de[0],te[1]=de[3],te[2]=de[6],te[3]=de[1],te[4]=de[4],te[5]=de[7],te[6]=de[2],te[7]=de[5],te[8]=de[8];return te}function w(te,de){var ke=de[0],Ze=de[1],We=de[2],bt=de[3],Ft=de[4],Pt=de[5],Xe=de[6],yt=de[7],Ct=de[8],pt=Ct*Ft-Pt*yt,xt=-Ct*bt+Pt*Xe,Fe=yt*bt-Ft*Xe,ut=ke*pt+Ze*xt+We*Fe;return ut?(te[0]=pt*(ut=1/ut),te[1]=(-Ct*Ze+We*yt)*ut,te[2]=(Pt*Ze-We*Ft)*ut,te[3]=xt*ut,te[4]=(Ct*ke-We*Xe)*ut,te[5]=(-Pt*ke+We*bt)*ut,te[6]=Fe*ut,te[7]=(-yt*ke+Ze*Xe)*ut,te[8]=(Ft*ke-Ze*bt)*ut,te):null}function y(te,de){var ke=de[0],Ze=de[1],We=de[2],bt=de[3],Ft=de[4],Pt=de[5],Xe=de[6],yt=de[7],Ct=de[8];return te[0]=Ft*Ct-Pt*yt,te[1]=We*yt-Ze*Ct,te[2]=Ze*Pt-We*Ft,te[3]=Pt*Xe-bt*Ct,te[4]=ke*Ct-We*Xe,te[5]=We*bt-ke*Pt,te[6]=bt*yt-Ft*Xe,te[7]=Ze*Xe-ke*yt,te[8]=ke*Ft-Ze*bt,te}function A(te){var We=te[3],bt=te[4],Ft=te[5],Pt=te[6],Xe=te[7],yt=te[8];return te[0]*(yt*bt-Ft*Xe)+te[1]*(-yt*We+Ft*Pt)+te[2]*(Xe*We-bt*Pt)}function M(te,de,ke){var Ze=de[0],We=de[1],bt=de[2],Ft=de[3],Pt=de[4],Xe=de[5],yt=de[6],Ct=de[7],pt=de[8],xt=ke[0],Fe=ke[1],ut=ke[2],Ut=ke[3],$e=ke[4],Te=ke[5],tt=ke[6],Mt=ke[7],Wt=ke[8];return te[0]=xt*Ze+Fe*Ft+ut*yt,te[1]=xt*We+Fe*Pt+ut*Ct,te[2]=xt*bt+Fe*Xe+ut*pt,te[3]=Ut*Ze+$e*Ft+Te*yt,te[4]=Ut*We+$e*Pt+Te*Ct,te[5]=Ut*bt+$e*Xe+Te*pt,te[6]=tt*Ze+Mt*Ft+Wt*yt,te[7]=tt*We+Mt*Pt+Wt*Ct,te[8]=tt*bt+Mt*Xe+Wt*pt,te}function S(te,de,ke){var Ze=de[0],We=de[1],bt=de[2],Ft=de[3],Pt=de[4],Xe=de[5],yt=de[6],Ct=de[7],pt=de[8],xt=ke[0],Fe=ke[1];return te[0]=Ze,te[1]=We,te[2]=bt,te[3]=Ft,te[4]=Pt,te[5]=Xe,te[6]=xt*Ze+Fe*Ft+yt,te[7]=xt*We+Fe*Pt+Ct,te[8]=xt*bt+Fe*Xe+pt,te}function P(te,de,ke){var Ze=de[0],We=de[1],bt=de[2],Ft=de[3],Pt=de[4],Xe=de[5],yt=de[6],Ct=de[7],pt=de[8],xt=Math.sin(ke),Fe=Math.cos(ke);return te[0]=Fe*Ze+xt*Ft,te[1]=Fe*We+xt*Pt,te[2]=Fe*bt+xt*Xe,te[3]=Fe*Ft-xt*Ze,te[4]=Fe*Pt-xt*We,te[5]=Fe*Xe-xt*bt,te[6]=yt,te[7]=Ct,te[8]=pt,te}function U(te,de,ke){var Ze=ke[0],We=ke[1];return te[0]=Ze*de[0],te[1]=Ze*de[1],te[2]=Ze*de[2],te[3]=We*de[3],te[4]=We*de[4],te[5]=We*de[5],te[6]=de[6],te[7]=de[7],te[8]=de[8],te}function z(te,de){return te[0]=1,te[1]=0,te[2]=0,te[3]=0,te[4]=1,te[5]=0,te[6]=de[0],te[7]=de[1],te[8]=1,te}function ie(te,de){var ke=Math.sin(de),Ze=Math.cos(de);return te[0]=Ze,te[1]=ke,te[2]=0,te[3]=-ke,te[4]=Ze,te[5]=0,te[6]=0,te[7]=0,te[8]=1,te}function ne(te,de){return te[0]=de[0],te[1]=0,te[2]=0,te[3]=0,te[4]=de[1],te[5]=0,te[6]=0,te[7]=0,te[8]=1,te}function q(te,de){return te[0]=de[0],te[1]=de[1],te[2]=0,te[3]=de[2],te[4]=de[3],te[5]=0,te[6]=de[4],te[7]=de[5],te[8]=1,te}function K(te,de){var ke=de[0],Ze=de[1],We=de[2],bt=de[3],Ft=ke+ke,Pt=Ze+Ze,Xe=We+We,yt=ke*Ft,Ct=Ze*Ft,pt=Ze*Pt,xt=We*Ft,Fe=We*Pt,ut=We*Xe,Ut=bt*Ft,$e=bt*Pt,Te=bt*Xe;return te[0]=1-pt-ut,te[3]=Ct-Te,te[6]=xt+$e,te[1]=Ct+Te,te[4]=1-yt-ut,te[7]=Fe-Ut,te[2]=xt-$e,te[5]=Fe+Ut,te[8]=1-yt-pt,te}function ee(te,de){var ke=de[0],Ze=de[1],We=de[2],bt=de[3],Ft=de[4],Pt=de[5],Xe=de[6],yt=de[7],Ct=de[8],pt=de[9],xt=de[10],Fe=de[11],ut=de[12],Ut=de[13],$e=de[14],Te=de[15],tt=ke*Pt-Ze*Ft,Mt=ke*Xe-We*Ft,Wt=ke*yt-bt*Ft,un=Ze*Xe-We*Pt,Le=Ze*yt-bt*Pt,zt=We*yt-bt*Xe,Xt=Ct*Ut-pt*ut,Tn=Ct*$e-xt*ut,gn=Ct*Te-Fe*ut,kn=pt*$e-xt*Ut,ir=pt*Te-Fe*Ut,cr=xt*Te-Fe*$e,Bn=tt*cr-Mt*ir+Wt*kn+un*gn-Le*Tn+zt*Xt;return Bn?(te[0]=(Pt*cr-Xe*ir+yt*kn)*(Bn=1/Bn),te[1]=(Xe*gn-Ft*cr-yt*Tn)*Bn,te[2]=(Ft*ir-Pt*gn+yt*Xt)*Bn,te[3]=(We*ir-Ze*cr-bt*kn)*Bn,te[4]=(ke*cr-We*gn+bt*Tn)*Bn,te[5]=(Ze*gn-ke*ir-bt*Xt)*Bn,te[6]=(Ut*zt-$e*Le+Te*un)*Bn,te[7]=($e*Wt-ut*zt-Te*Mt)*Bn,te[8]=(ut*Le-Ut*Wt+Te*tt)*Bn,te):null}function X(te,de,ke){return te[0]=2/de,te[1]=0,te[2]=0,te[3]=0,te[4]=-2/ke,te[5]=0,te[6]=-1,te[7]=1,te[8]=1,te}function ae(te){return"mat3("+te[0]+", "+te[1]+", "+te[2]+", "+te[3]+", "+te[4]+", "+te[5]+", "+te[6]+", "+te[7]+", "+te[8]+")"}function re(te){return Math.hypot(te[0],te[1],te[2],te[3],te[4],te[5],te[6],te[7],te[8])}function oe(te,de,ke){return te[0]=de[0]+ke[0],te[1]=de[1]+ke[1],te[2]=de[2]+ke[2],te[3]=de[3]+ke[3],te[4]=de[4]+ke[4],te[5]=de[5]+ke[5],te[6]=de[6]+ke[6],te[7]=de[7]+ke[7],te[8]=de[8]+ke[8],te}function ve(te,de,ke){return te[0]=de[0]-ke[0],te[1]=de[1]-ke[1],te[2]=de[2]-ke[2],te[3]=de[3]-ke[3],te[4]=de[4]-ke[4],te[5]=de[5]-ke[5],te[6]=de[6]-ke[6],te[7]=de[7]-ke[7],te[8]=de[8]-ke[8],te}function we(te,de,ke){return te[0]=de[0]*ke,te[1]=de[1]*ke,te[2]=de[2]*ke,te[3]=de[3]*ke,te[4]=de[4]*ke,te[5]=de[5]*ke,te[6]=de[6]*ke,te[7]=de[7]*ke,te[8]=de[8]*ke,te}function _e(te,de,ke,Ze){return te[0]=de[0]+ke[0]*Ze,te[1]=de[1]+ke[1]*Ze,te[2]=de[2]+ke[2]*Ze,te[3]=de[3]+ke[3]*Ze,te[4]=de[4]+ke[4]*Ze,te[5]=de[5]+ke[5]*Ze,te[6]=de[6]+ke[6]*Ze,te[7]=de[7]+ke[7]*Ze,te[8]=de[8]+ke[8]*Ze,te}function me(te,de){return te[0]===de[0]&&te[1]===de[1]&&te[2]===de[2]&&te[3]===de[3]&&te[4]===de[4]&&te[5]===de[5]&&te[6]===de[6]&&te[7]===de[7]&&te[8]===de[8]}function Ce(te,de){var ke=te[0],Ze=te[1],We=te[2],bt=te[3],Ft=te[4],Pt=te[5],Xe=te[6],yt=te[7],Ct=te[8],pt=de[0],xt=de[1],Fe=de[2],ut=de[3],Ut=de[4],$e=de[5],Te=de[6],tt=de[7],Mt=de[8];return Math.abs(ke-pt)<=B.EPSILON*Math.max(1,Math.abs(ke),Math.abs(pt))&&Math.abs(Ze-xt)<=B.EPSILON*Math.max(1,Math.abs(Ze),Math.abs(xt))&&Math.abs(We-Fe)<=B.EPSILON*Math.max(1,Math.abs(We),Math.abs(Fe))&&Math.abs(bt-ut)<=B.EPSILON*Math.max(1,Math.abs(bt),Math.abs(ut))&&Math.abs(Ft-Ut)<=B.EPSILON*Math.max(1,Math.abs(Ft),Math.abs(Ut))&&Math.abs(Pt-$e)<=B.EPSILON*Math.max(1,Math.abs(Pt),Math.abs($e))&&Math.abs(Xe-Te)<=B.EPSILON*Math.max(1,Math.abs(Xe),Math.abs(Te))&&Math.abs(yt-tt)<=B.EPSILON*Math.max(1,Math.abs(yt),Math.abs(tt))&&Math.abs(Ct-Mt)<=B.EPSILON*Math.max(1,Math.abs(Ct),Math.abs(Mt))}var fe=M,be=ve},8235:(Qt,V,G)=>{"use strict";G.r(V),G.d(V,{add:()=>x,angle:()=>te,ceil:()=>y,clone:()=>j,copy:()=>F,create:()=>Q,cross:()=>oe,dist:()=>yt,distance:()=>ie,div:()=>Xe,divide:()=>w,dot:()=>re,equals:()=>We,exactEquals:()=>Ze,floor:()=>A,forEach:()=>xt,fromValues:()=>k,inverse:()=>X,len:()=>bt,length:()=>q,lerp:()=>ve,max:()=>S,min:()=>M,mul:()=>Pt,multiply:()=>b,negate:()=>ee,normalize:()=>ae,random:()=>we,rotate:()=>be,round:()=>P,scale:()=>U,scaleAndAdd:()=>z,set:()=>I,sqrDist:()=>Ct,sqrLen:()=>pt,squaredDistance:()=>ne,squaredLength:()=>K,str:()=>ke,sub:()=>Ft,subtract:()=>E,transformMat2:()=>_e,transformMat2d:()=>me,transformMat3:()=>Ce,transformMat4:()=>fe,zero:()=>de});var B=G(5278);function Q(){var Fe=new B.ARRAY_TYPE(2);return B.ARRAY_TYPE!=Float32Array&&(Fe[0]=0,Fe[1]=0),Fe}function j(Fe){var ut=new B.ARRAY_TYPE(2);return ut[0]=Fe[0],ut[1]=Fe[1],ut}function k(Fe,ut){var Ut=new B.ARRAY_TYPE(2);return Ut[0]=Fe,Ut[1]=ut,Ut}function F(Fe,ut){return Fe[0]=ut[0],Fe[1]=ut[1],Fe}function I(Fe,ut,Ut){return Fe[0]=ut,Fe[1]=Ut,Fe}function x(Fe,ut,Ut){return Fe[0]=ut[0]+Ut[0],Fe[1]=ut[1]+Ut[1],Fe}function E(Fe,ut,Ut){return Fe[0]=ut[0]-Ut[0],Fe[1]=ut[1]-Ut[1],Fe}function b(Fe,ut,Ut){return Fe[0]=ut[0]*Ut[0],Fe[1]=ut[1]*Ut[1],Fe}function w(Fe,ut,Ut){return Fe[0]=ut[0]/Ut[0],Fe[1]=ut[1]/Ut[1],Fe}function y(Fe,ut){return Fe[0]=Math.ceil(ut[0]),Fe[1]=Math.ceil(ut[1]),Fe}function A(Fe,ut){return Fe[0]=Math.floor(ut[0]),Fe[1]=Math.floor(ut[1]),Fe}function M(Fe,ut,Ut){return Fe[0]=Math.min(ut[0],Ut[0]),Fe[1]=Math.min(ut[1],Ut[1]),Fe}function S(Fe,ut,Ut){return Fe[0]=Math.max(ut[0],Ut[0]),Fe[1]=Math.max(ut[1],Ut[1]),Fe}function P(Fe,ut){return Fe[0]=Math.round(ut[0]),Fe[1]=Math.round(ut[1]),Fe}function U(Fe,ut,Ut){return Fe[0]=ut[0]*Ut,Fe[1]=ut[1]*Ut,Fe}function z(Fe,ut,Ut,$e){return Fe[0]=ut[0]+Ut[0]*$e,Fe[1]=ut[1]+Ut[1]*$e,Fe}function ie(Fe,ut){return Math.hypot(ut[0]-Fe[0],ut[1]-Fe[1])}function ne(Fe,ut){var Ut=ut[0]-Fe[0],$e=ut[1]-Fe[1];return Ut*Ut+$e*$e}function q(Fe){return Math.hypot(Fe[0],Fe[1])}function K(Fe){var ut=Fe[0],Ut=Fe[1];return ut*ut+Ut*Ut}function ee(Fe,ut){return Fe[0]=-ut[0],Fe[1]=-ut[1],Fe}function X(Fe,ut){return Fe[0]=1/ut[0],Fe[1]=1/ut[1],Fe}function ae(Fe,ut){var Ut=ut[0],$e=ut[1],Te=Ut*Ut+$e*$e;return Te>0&&(Te=1/Math.sqrt(Te)),Fe[0]=ut[0]*Te,Fe[1]=ut[1]*Te,Fe}function re(Fe,ut){return Fe[0]*ut[0]+Fe[1]*ut[1]}function oe(Fe,ut,Ut){var $e=ut[0]*Ut[1]-ut[1]*Ut[0];return Fe[0]=Fe[1]=0,Fe[2]=$e,Fe}function ve(Fe,ut,Ut,$e){var Te=ut[0],tt=ut[1];return Fe[0]=Te+$e*(Ut[0]-Te),Fe[1]=tt+$e*(Ut[1]-tt),Fe}function we(Fe,ut){ut=ut||1;var Ut=2*B.RANDOM()*Math.PI;return Fe[0]=Math.cos(Ut)*ut,Fe[1]=Math.sin(Ut)*ut,Fe}function _e(Fe,ut,Ut){var $e=ut[0],Te=ut[1];return Fe[0]=Ut[0]*$e+Ut[2]*Te,Fe[1]=Ut[1]*$e+Ut[3]*Te,Fe}function me(Fe,ut,Ut){var $e=ut[0],Te=ut[1];return Fe[0]=Ut[0]*$e+Ut[2]*Te+Ut[4],Fe[1]=Ut[1]*$e+Ut[3]*Te+Ut[5],Fe}function Ce(Fe,ut,Ut){var $e=ut[0],Te=ut[1];return Fe[0]=Ut[0]*$e+Ut[3]*Te+Ut[6],Fe[1]=Ut[1]*$e+Ut[4]*Te+Ut[7],Fe}function fe(Fe,ut,Ut){var $e=ut[0],Te=ut[1];return Fe[0]=Ut[0]*$e+Ut[4]*Te+Ut[12],Fe[1]=Ut[1]*$e+Ut[5]*Te+Ut[13],Fe}function be(Fe,ut,Ut,$e){var Te=ut[0]-Ut[0],tt=ut[1]-Ut[1],Mt=Math.sin($e),Wt=Math.cos($e);return Fe[0]=Te*Wt-tt*Mt+Ut[0],Fe[1]=Te*Mt+tt*Wt+Ut[1],Fe}function te(Fe,ut){var Ut=Fe[0],$e=Fe[1],Te=ut[0],tt=ut[1],Mt=Math.sqrt(Ut*Ut+$e*$e)*Math.sqrt(Te*Te+tt*tt);return Math.acos(Math.min(Math.max(Mt&&(Ut*Te+$e*tt)/Mt,-1),1))}function de(Fe){return Fe[0]=0,Fe[1]=0,Fe}function ke(Fe){return"vec2("+Fe[0]+", "+Fe[1]+")"}function Ze(Fe,ut){return Fe[0]===ut[0]&&Fe[1]===ut[1]}function We(Fe,ut){var Ut=Fe[0],$e=Fe[1],Te=ut[0],tt=ut[1];return Math.abs(Ut-Te)<=B.EPSILON*Math.max(1,Math.abs(Ut),Math.abs(Te))&&Math.abs($e-tt)<=B.EPSILON*Math.max(1,Math.abs($e),Math.abs(tt))}var Fe,bt=q,Ft=E,Pt=b,Xe=w,yt=ie,Ct=ne,pt=K,xt=(Fe=Q(),function(ut,Ut,$e,Te,tt,Mt){var Wt,un;for(Ut||(Ut=2),$e||($e=0),un=Te?Math.min(Te*Ut+$e,ut.length):ut.length,Wt=$e;Wt<un;Wt+=Ut)Fe[0]=ut[Wt],Fe[1]=ut[Wt+1],tt(Fe,Fe,Mt),ut[Wt]=Fe[0],ut[Wt+1]=Fe[1];return ut})},3454:(Qt,V,G)=>{"use strict";G.r(V),G.d(V,{add:()=>E,angle:()=>Ze,bezier:()=>_e,ceil:()=>A,clone:()=>j,copy:()=>I,create:()=>Q,cross:()=>oe,dist:()=>pt,distance:()=>ne,div:()=>Ct,divide:()=>y,dot:()=>re,equals:()=>Pt,exactEquals:()=>Ft,floor:()=>M,forEach:()=>Ut,fromValues:()=>F,hermite:()=>we,inverse:()=>X,len:()=>Fe,length:()=>k,lerp:()=>ve,max:()=>P,min:()=>S,mul:()=>yt,multiply:()=>w,negate:()=>ee,normalize:()=>ae,random:()=>me,rotateX:()=>te,rotateY:()=>de,rotateZ:()=>ke,round:()=>U,scale:()=>z,scaleAndAdd:()=>ie,set:()=>x,sqrDist:()=>xt,sqrLen:()=>ut,squaredDistance:()=>q,squaredLength:()=>K,str:()=>bt,sub:()=>Xe,subtract:()=>b,transformMat3:()=>fe,transformMat4:()=>Ce,transformQuat:()=>be,zero:()=>We});var B=G(5278);function Q(){var $e=new B.ARRAY_TYPE(3);return B.ARRAY_TYPE!=Float32Array&&($e[0]=0,$e[1]=0,$e[2]=0),$e}function j($e){var Te=new B.ARRAY_TYPE(3);return Te[0]=$e[0],Te[1]=$e[1],Te[2]=$e[2],Te}function k($e){return Math.hypot($e[0],$e[1],$e[2])}function F($e,Te,tt){var Mt=new B.ARRAY_TYPE(3);return Mt[0]=$e,Mt[1]=Te,Mt[2]=tt,Mt}function I($e,Te){return $e[0]=Te[0],$e[1]=Te[1],$e[2]=Te[2],$e}function x($e,Te,tt,Mt){return $e[0]=Te,$e[1]=tt,$e[2]=Mt,$e}function E($e,Te,tt){return $e[0]=Te[0]+tt[0],$e[1]=Te[1]+tt[1],$e[2]=Te[2]+tt[2],$e}function b($e,Te,tt){return $e[0]=Te[0]-tt[0],$e[1]=Te[1]-tt[1],$e[2]=Te[2]-tt[2],$e}function w($e,Te,tt){return $e[0]=Te[0]*tt[0],$e[1]=Te[1]*tt[1],$e[2]=Te[2]*tt[2],$e}function y($e,Te,tt){return $e[0]=Te[0]/tt[0],$e[1]=Te[1]/tt[1],$e[2]=Te[2]/tt[2],$e}function A($e,Te){return $e[0]=Math.ceil(Te[0]),$e[1]=Math.ceil(Te[1]),$e[2]=Math.ceil(Te[2]),$e}function M($e,Te){return $e[0]=Math.floor(Te[0]),$e[1]=Math.floor(Te[1]),$e[2]=Math.floor(Te[2]),$e}function S($e,Te,tt){return $e[0]=Math.min(Te[0],tt[0]),$e[1]=Math.min(Te[1],tt[1]),$e[2]=Math.min(Te[2],tt[2]),$e}function P($e,Te,tt){return $e[0]=Math.max(Te[0],tt[0]),$e[1]=Math.max(Te[1],tt[1]),$e[2]=Math.max(Te[2],tt[2]),$e}function U($e,Te){return $e[0]=Math.round(Te[0]),$e[1]=Math.round(Te[1]),$e[2]=Math.round(Te[2]),$e}function z($e,Te,tt){return $e[0]=Te[0]*tt,$e[1]=Te[1]*tt,$e[2]=Te[2]*tt,$e}function ie($e,Te,tt,Mt){return $e[0]=Te[0]+tt[0]*Mt,$e[1]=Te[1]+tt[1]*Mt,$e[2]=Te[2]+tt[2]*Mt,$e}function ne($e,Te){return Math.hypot(Te[0]-$e[0],Te[1]-$e[1],Te[2]-$e[2])}function q($e,Te){var tt=Te[0]-$e[0],Mt=Te[1]-$e[1],Wt=Te[2]-$e[2];return tt*tt+Mt*Mt+Wt*Wt}function K($e){var Te=$e[0],tt=$e[1],Mt=$e[2];return Te*Te+tt*tt+Mt*Mt}function ee($e,Te){return $e[0]=-Te[0],$e[1]=-Te[1],$e[2]=-Te[2],$e}function X($e,Te){return $e[0]=1/Te[0],$e[1]=1/Te[1],$e[2]=1/Te[2],$e}function ae($e,Te){var tt=Te[0],Mt=Te[1],Wt=Te[2],un=tt*tt+Mt*Mt+Wt*Wt;return un>0&&(un=1/Math.sqrt(un)),$e[0]=Te[0]*un,$e[1]=Te[1]*un,$e[2]=Te[2]*un,$e}function re($e,Te){return $e[0]*Te[0]+$e[1]*Te[1]+$e[2]*Te[2]}function oe($e,Te,tt){var Mt=Te[0],Wt=Te[1],un=Te[2],Le=tt[0],zt=tt[1],Xt=tt[2];return $e[0]=Wt*Xt-un*zt,$e[1]=un*Le-Mt*Xt,$e[2]=Mt*zt-Wt*Le,$e}function ve($e,Te,tt,Mt){var Wt=Te[0],un=Te[1],Le=Te[2];return $e[0]=Wt+Mt*(tt[0]-Wt),$e[1]=un+Mt*(tt[1]-un),$e[2]=Le+Mt*(tt[2]-Le),$e}function we($e,Te,tt,Mt,Wt,un){var Le=un*un,zt=Le*(2*un-3)+1,Xt=Le*(un-2)+un,Tn=Le*(un-1),gn=Le*(3-2*un);return $e[0]=Te[0]*zt+tt[0]*Xt+Mt[0]*Tn+Wt[0]*gn,$e[1]=Te[1]*zt+tt[1]*Xt+Mt[1]*Tn+Wt[1]*gn,$e[2]=Te[2]*zt+tt[2]*Xt+Mt[2]*Tn+Wt[2]*gn,$e}function _e($e,Te,tt,Mt,Wt,un){var Le=1-un,zt=Le*Le,Xt=un*un,Tn=zt*Le,gn=3*un*zt,kn=3*Xt*Le,ir=Xt*un;return $e[0]=Te[0]*Tn+tt[0]*gn+Mt[0]*kn+Wt[0]*ir,$e[1]=Te[1]*Tn+tt[1]*gn+Mt[1]*kn+Wt[1]*ir,$e[2]=Te[2]*Tn+tt[2]*gn+Mt[2]*kn+Wt[2]*ir,$e}function me($e,Te){Te=Te||1;var tt=2*B.RANDOM()*Math.PI,Mt=2*B.RANDOM()-1,Wt=Math.sqrt(1-Mt*Mt)*Te;return $e[0]=Math.cos(tt)*Wt,$e[1]=Math.sin(tt)*Wt,$e[2]=Mt*Te,$e}function Ce($e,Te,tt){var Mt=Te[0],Wt=Te[1],un=Te[2],Le=tt[3]*Mt+tt[7]*Wt+tt[11]*un+tt[15];return $e[0]=(tt[0]*Mt+tt[4]*Wt+tt[8]*un+tt[12])/(Le=Le||1),$e[1]=(tt[1]*Mt+tt[5]*Wt+tt[9]*un+tt[13])/Le,$e[2]=(tt[2]*Mt+tt[6]*Wt+tt[10]*un+tt[14])/Le,$e}function fe($e,Te,tt){var Mt=Te[0],Wt=Te[1],un=Te[2];return $e[0]=Mt*tt[0]+Wt*tt[3]+un*tt[6],$e[1]=Mt*tt[1]+Wt*tt[4]+un*tt[7],$e[2]=Mt*tt[2]+Wt*tt[5]+un*tt[8],$e}function be($e,Te,tt){var Mt=tt[0],Wt=tt[1],un=tt[2],zt=Te[0],Xt=Te[1],Tn=Te[2],gn=Wt*Tn-un*Xt,kn=un*zt-Mt*Tn,ir=Mt*Xt-Wt*zt,cr=Wt*ir-un*kn,Bn=un*gn-Mt*ir,xr=Mt*kn-Wt*gn,jn=2*tt[3];return kn*=jn,ir*=jn,Bn*=2,xr*=2,$e[0]=zt+(gn*=jn)+(cr*=2),$e[1]=Xt+kn+Bn,$e[2]=Tn+ir+xr,$e}function te($e,Te,tt,Mt){var Wt=[],un=[];return Wt[0]=Te[0]-tt[0],Wt[1]=Te[1]-tt[1],Wt[2]=Te[2]-tt[2],un[0]=Wt[0],un[1]=Wt[1]*Math.cos(Mt)-Wt[2]*Math.sin(Mt),un[2]=Wt[1]*Math.sin(Mt)+Wt[2]*Math.cos(Mt),$e[0]=un[0]+tt[0],$e[1]=un[1]+tt[1],$e[2]=un[2]+tt[2],$e}function de($e,Te,tt,Mt){var Wt=[],un=[];return Wt[0]=Te[0]-tt[0],Wt[1]=Te[1]-tt[1],Wt[2]=Te[2]-tt[2],un[0]=Wt[2]*Math.sin(Mt)+Wt[0]*Math.cos(Mt),un[1]=Wt[1],un[2]=Wt[2]*Math.cos(Mt)-Wt[0]*Math.sin(Mt),$e[0]=un[0]+tt[0],$e[1]=un[1]+tt[1],$e[2]=un[2]+tt[2],$e}function ke($e,Te,tt,Mt){var Wt=[],un=[];return Wt[0]=Te[0]-tt[0],Wt[1]=Te[1]-tt[1],Wt[2]=Te[2]-tt[2],un[0]=Wt[0]*Math.cos(Mt)-Wt[1]*Math.sin(Mt),un[1]=Wt[0]*Math.sin(Mt)+Wt[1]*Math.cos(Mt),un[2]=Wt[2],$e[0]=un[0]+tt[0],$e[1]=un[1]+tt[1],$e[2]=un[2]+tt[2],$e}function Ze($e,Te){var tt=$e[0],Mt=$e[1],Wt=$e[2],un=Te[0],Le=Te[1],zt=Te[2],gn=Math.sqrt(tt*tt+Mt*Mt+Wt*Wt)*Math.sqrt(un*un+Le*Le+zt*zt),kn=gn&&re($e,Te)/gn;return Math.acos(Math.min(Math.max(kn,-1),1))}function We($e){return $e[0]=0,$e[1]=0,$e[2]=0,$e}function bt($e){return"vec3("+$e[0]+", "+$e[1]+", "+$e[2]+")"}function Ft($e,Te){return $e[0]===Te[0]&&$e[1]===Te[1]&&$e[2]===Te[2]}function Pt($e,Te){var tt=$e[0],Mt=$e[1],Wt=$e[2],un=Te[0],Le=Te[1],zt=Te[2];return Math.abs(tt-un)<=B.EPSILON*Math.max(1,Math.abs(tt),Math.abs(un))&&Math.abs(Mt-Le)<=B.EPSILON*Math.max(1,Math.abs(Mt),Math.abs(Le))&&Math.abs(Wt-zt)<=B.EPSILON*Math.max(1,Math.abs(Wt),Math.abs(zt))}var $e,Xe=b,yt=w,Ct=y,pt=ne,xt=q,Fe=k,ut=K,Ut=($e=Q(),function(Te,tt,Mt,Wt,un,Le){var zt,Xt;for(tt||(tt=3),Mt||(Mt=0),Xt=Wt?Math.min(Wt*tt+Mt,Te.length):Te.length,zt=Mt;zt<Xt;zt+=tt)$e[0]=Te[zt],$e[1]=Te[zt+1],$e[2]=Te[zt+2],un($e,$e,Le),Te[zt]=$e[0],Te[zt+1]=$e[1],Te[zt+2]=$e[2];return Te})},4586:Qt=>{var V=[],G=[];function Q(k,F){if(F=F||{},void 0===k)throw new Error("insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).");var b,I=!0===F.prepend?"prepend":"append",x=void 0!==F.container?F.container:document.querySelector("head"),E=V.indexOf(x);return-1===E&&(E=V.push(x)-1,G[E]={}),void 0!==G[E]&&void 0!==G[E][I]?b=G[E][I]:(b=G[E][I]=function j(){var k=document.createElement("style");return k.setAttribute("type","text/css"),k}(),"prepend"===I?x.insertBefore(b,x.childNodes[0]):x.appendChild(b)),65279===k.charCodeAt(0)&&(k=k.substr(1,k.length)),b.styleSheet?b.styleSheet.cssText+=k:b.textContent+=k,b}Qt.exports=Q,Qt.exports.insertCss=Q},443:(Qt,V,G)=>{var B=G(2119);Qt.exports=B.Symbol},3337:(Qt,V,G)=>{var B=G(443),Q=G(1318),j=G(2902),I=B?B.toStringTag:void 0;Qt.exports=function x(E){return null==E?void 0===E?"[object Undefined]":"[object Null]":I&&I in Object(E)?Q(E):j(E)}},1083:(Qt,V,G)=>{var B=G(3337),Q=G(6231),j=G(2671),we={};we["[object Float32Array]"]=we["[object Float64Array]"]=we["[object Int8Array]"]=we["[object Int16Array]"]=we["[object Int32Array]"]=we["[object Uint8Array]"]=we["[object Uint8ClampedArray]"]=we["[object Uint16Array]"]=we["[object Uint32Array]"]=!0,we["[object Arguments]"]=we["[object Array]"]=we["[object ArrayBuffer]"]=we["[object Boolean]"]=we["[object DataView]"]=we["[object Date]"]=we["[object Error]"]=we["[object Function]"]=we["[object Map]"]=we["[object Number]"]=we["[object Object]"]=we["[object RegExp]"]=we["[object Set]"]=we["[object String]"]=we["[object WeakMap]"]=!1,Qt.exports=function _e(me){return j(me)&&Q(me.length)&&!!we[B(me)]}},5647:Qt=>{Qt.exports=function V(G){return function(B){return G(B)}}},9122:Qt=>{var V="object"==typeof global&&global&&global.Object===Object&&global;Qt.exports=V},9519:(Qt,V,G)=>{var Q=G(9385)(Object.getPrototypeOf,Object);Qt.exports=Q},1318:(Qt,V,G)=>{var B=G(443),Q=Object.prototype,j=Q.hasOwnProperty,k=Q.toString,F=B?B.toStringTag:void 0;Qt.exports=function I(x){var E=j.call(x,F),b=x[F];try{x[F]=void 0;var w=!0}catch{}var y=k.call(x);return w&&(E?x[F]=b:delete x[F]),y}},3597:(Qt,V,G)=>{Qt=G.nmd(Qt);var B=G(9122),Q=V&&!V.nodeType&&V,j=Q&&Qt&&!Qt.nodeType&&Qt,F=j&&j.exports===Q&&B.process,I=function(){try{return j&&j.require&&j.require("util").types||F&&F.binding&&F.binding("util")}catch{}}();Qt.exports=I},2902:Qt=>{var G=Object.prototype.toString;Qt.exports=function B(Q){return G.call(Q)}},9385:Qt=>{Qt.exports=function V(G,B){return function(Q){return G(B(Q))}}},2119:(Qt,V,G)=>{var B=G(9122),Q="object"==typeof self&&self&&self.Object===Object&&self,j=B||Q||Function("return this")();Qt.exports=j},1503:Qt=>{Qt.exports=Array.isArray},6231:Qt=>{Qt.exports=function G(B){return"number"==typeof B&&B>-1&&B%1==0&&B<=9007199254740991}},9138:(Qt,V,G)=>{var B=G(3337),Q=G(2671);Qt.exports=function k(F){return"number"==typeof F||Q(F)&&"[object Number]"==B(F)}},2671:Qt=>{Qt.exports=function V(G){return null!=G&&"object"==typeof G}},7614:(Qt,V,G)=>{var B=G(3337),Q=G(9519),j=G(2671),x=Function.prototype.toString,E=Object.prototype.hasOwnProperty,b=x.call(Object);Qt.exports=function w(y){if(!j(y)||"[object Object]"!=B(y))return!1;var A=Q(y);if(null===A)return!0;var M=E.call(A,"constructor")&&A.constructor;return"function"==typeof M&&M instanceof M&&x.call(M)==b}},8159:(Qt,V,G)=>{var B=G(1083),Q=G(5647),j=G(3597),k=j&&j.isTypedArray,F=k?Q(k):B;Qt.exports=F},6380:(Qt,V,G)=>{"use strict";G.r(V),G.d(V,{AbstractMatrix:()=>Xe,CHO:()=>Wr,CholeskyDecomposition:()=>Wr,EVD:()=>Oi,EigenvalueDecomposition:()=>Oi,LU:()=>Tn,LuDecomposition:()=>Tn,Matrix:()=>pt,MatrixColumnSelectionView:()=>ut,MatrixColumnView:()=>Fe,MatrixFlipColumnView:()=>Ut,MatrixFlipRowView:()=>$e,MatrixRowSelectionView:()=>tt,MatrixRowView:()=>Te,MatrixSelectionView:()=>Mt,MatrixSubView:()=>Wt,MatrixTransposeView:()=>un,NIPALS:()=>Vr,Nipals:()=>Vr,QR:()=>kn,QrDecomposition:()=>kn,SVD:()=>ir,SingularValueDecomposition:()=>ir,WrapperMatrix1D:()=>Le,WrapperMatrix2D:()=>zt,correlation:()=>gr,covariance:()=>yr,default:()=>pt,determinant:()=>xr,inverse:()=>cr,linearDependencies:()=>er,pseudoInverse:()=>Mr,solve:()=>Bn,wrap:()=>Xt});const B=Object.prototype.toString;function Q(Ae){return B.call(Ae).endsWith("Array]")}function j(Ae){var Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Q(Ae))throw new TypeError("input must be an array");if(0===Ae.length)throw new TypeError("input must not be empty");var W=Y.fromIndex,T=void 0===W?0:W,$=Y.toIndex,ce=void 0===$?Ae.length:$;if(T<0||T>=Ae.length||!Number.isInteger(T))throw new Error("fromIndex must be a positive integer smaller than length");if(ce<=T||ce>Ae.length||!Number.isInteger(ce))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var je=Ae[T],Ge=T+1;Ge<ce;Ge++)Ae[Ge]>je&&(je=Ae[Ge]);return je}function k(Ae){var Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Q(Ae))throw new TypeError("input must be an array");if(0===Ae.length)throw new TypeError("input must not be empty");var W=Y.fromIndex,T=void 0===W?0:W,$=Y.toIndex,ce=void 0===$?Ae.length:$;if(T<0||T>=Ae.length||!Number.isInteger(T))throw new Error("fromIndex must be a positive integer smaller than length");if(ce<=T||ce>Ae.length||!Number.isInteger(ce))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var je=Ae[T],Ge=T+1;Ge<ce;Ge++)Ae[Ge]<je&&(je=Ae[Ge]);return je}function F(Ae){var W,Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Q(Ae))throw new TypeError("input must be an array");if(0===Ae.length)throw new TypeError("input must not be empty");if(void 0!==Y.output){if(!Q(Y.output))throw new TypeError("output option must be an array if specified");W=Y.output}else W=new Array(Ae.length);var T=k(Ae),$=j(Ae);if(T===$)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var ce=Y.min,je=void 0===ce?Y.autoMinMax?T:0:ce,Ge=Y.max,rt=void 0===Ge?Y.autoMinMax?$:1:Ge;if(je>=rt)throw new RangeError("min option must be smaller than max option");for(var it=(rt-je)/($-T),$t=0;$t<Ae.length;$t++)W[$t]=(Ae[$t]-T)*it+je;return W}const I=" ".repeat(2),x=" ".repeat(4);function b(Ae,Y={}){const{maxRows:W=15,maxColumns:T=10,maxNumSize:$=8,padMinus:ce="auto"}=Y;return`${Ae.constructor.name} {\n${I}[\n${x}${function w(Ae,Y,W,T,$){const{rows:ce,columns:je}=Ae,Ge=Math.min(ce,Y),rt=Math.min(je,W),it=[];if("auto"===$){$=!1;e:for(let $t=0;$t<Ge;$t++)for(let R=0;R<rt;R++)if(Ae.get($t,R)<0){$=!0;break e}}for(let $t=0;$t<Ge;$t++){let R=[];for(let He=0;He<rt;He++)R.push(y(Ae.get($t,He),T,$));it.push(`${R.join(" ")}`)}return rt!==je&&(it[it.length-1]+=` ... ${je-W} more columns`),Ge!==ce&&it.push(`... ${ce-Y} more rows`),it.join(`\n${x}`)}(Ae,W,T,$,ce)}\n${I}]\n${I}rows: ${Ae.rows}\n${I}columns: ${Ae.columns}\n}`}function y(Ae,Y,W){return(Ae>=0&&W?` ${A(Ae,Y-1)}`:A(Ae,Y)).padEnd(Y)}function A(Ae,Y){let W=Ae.toString();if(W.length<=Y)return W;let T=Ae.toFixed(Y);if(T.length>Y&&(T=Ae.toFixed(Math.max(0,Y-(T.length-Y)))),T.length<=Y&&!T.startsWith("0.000")&&!T.startsWith("-0.000"))return T;let $=Ae.toExponential(Y);return $.length>Y&&($=Ae.toExponential(Math.max(0,Y-($.length-Y)))),$.slice(0)}function S(Ae,Y,W){if(Y<0||Y>(W?Ae.rows:Ae.rows-1))throw new RangeError("Row index out of range")}function P(Ae,Y,W){if(Y<0||Y>(W?Ae.columns:Ae.columns-1))throw new RangeError("Column index out of range")}function U(Ae,Y){if(Y.to1DArray&&(Y=Y.to1DArray()),Y.length!==Ae.columns)throw new RangeError("vector size must be the same as the number of columns");return Y}function z(Ae,Y){if(Y.to1DArray&&(Y=Y.to1DArray()),Y.length!==Ae.rows)throw new RangeError("vector size must be the same as the number of rows");return Y}function ie(Ae,Y){if(!Q(Y))throw new TypeError("row indices must be an array");for(let W=0;W<Y.length;W++)if(Y[W]<0||Y[W]>=Ae.rows)throw new RangeError("row indices are out of range")}function ne(Ae,Y){if(!Q(Y))throw new TypeError("column indices must be an array");for(let W=0;W<Y.length;W++)if(Y[W]<0||Y[W]>=Ae.columns)throw new RangeError("column indices are out of range")}function q(Ae,Y,W,T,$){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(ee("startRow",Y),ee("endRow",W),ee("startColumn",T),ee("endColumn",$),Y>W||T>$||Y<0||Y>=Ae.rows||W<0||W>=Ae.rows||T<0||T>=Ae.columns||$<0||$>=Ae.columns)throw new RangeError("Submatrix indices are out of range")}function K(Ae,Y=0){let W=[];for(let T=0;T<Ae;T++)W.push(Y);return W}function ee(Ae,Y){if("number"!=typeof Y)throw new TypeError(`${Ae} must be a number`)}function X(Ae){if(Ae.isEmpty())throw new Error("Empty matrix has no elements to index")}class Xe{static from1DArray(Y,W,T){if(Y*W!==T.length)throw new RangeError("data length does not match given dimensions");let ce=new pt(Y,W);for(let je=0;je<Y;je++)for(let Ge=0;Ge<W;Ge++)ce.set(je,Ge,T[je*W+Ge]);return ce}static rowVector(Y){let W=new pt(1,Y.length);for(let T=0;T<Y.length;T++)W.set(0,T,Y[T]);return W}static columnVector(Y){let W=new pt(Y.length,1);for(let T=0;T<Y.length;T++)W.set(T,0,Y[T]);return W}static zeros(Y,W){return new pt(Y,W)}static ones(Y,W){return new pt(Y,W).fill(1)}static rand(Y,W,T={}){if("object"!=typeof T)throw new TypeError("options must be an object");const{random:$=Math.random}=T;let ce=new pt(Y,W);for(let je=0;je<Y;je++)for(let Ge=0;Ge<W;Ge++)ce.set(je,Ge,$());return ce}static randInt(Y,W,T={}){if("object"!=typeof T)throw new TypeError("options must be an object");const{min:$=0,max:ce=1e3,random:je=Math.random}=T;if(!Number.isInteger($))throw new TypeError("min must be an integer");if(!Number.isInteger(ce))throw new TypeError("max must be an integer");if($>=ce)throw new RangeError("min must be smaller than max");let Ge=ce-$,rt=new pt(Y,W);for(let it=0;it<Y;it++)for(let $t=0;$t<W;$t++){let R=$+Math.round(je()*Ge);rt.set(it,$t,R)}return rt}static eye(Y,W,T){void 0===W&&(W=Y),void 0===T&&(T=1);let $=Math.min(Y,W),ce=this.zeros(Y,W);for(let je=0;je<$;je++)ce.set(je,je,T);return ce}static diag(Y,W,T){let $=Y.length;void 0===W&&(W=$),void 0===T&&(T=W);let ce=Math.min($,W,T),je=this.zeros(W,T);for(let Ge=0;Ge<ce;Ge++)je.set(Ge,Ge,Y[Ge]);return je}static min(Y,W){Y=this.checkMatrix(Y),W=this.checkMatrix(W);let T=Y.rows,$=Y.columns,ce=new pt(T,$);for(let je=0;je<T;je++)for(let Ge=0;Ge<$;Ge++)ce.set(je,Ge,Math.min(Y.get(je,Ge),W.get(je,Ge)));return ce}static max(Y,W){Y=this.checkMatrix(Y),W=this.checkMatrix(W);let T=Y.rows,$=Y.columns,ce=new this(T,$);for(let je=0;je<T;je++)for(let Ge=0;Ge<$;Ge++)ce.set(je,Ge,Math.max(Y.get(je,Ge),W.get(je,Ge)));return ce}static checkMatrix(Y){return Xe.isMatrix(Y)?Y:new pt(Y)}static isMatrix(Y){return null!=Y&&"Matrix"===Y.klass}get size(){return this.rows*this.columns}apply(Y){if("function"!=typeof Y)throw new TypeError("callback must be a function");for(let W=0;W<this.rows;W++)for(let T=0;T<this.columns;T++)Y.call(this,W,T);return this}to1DArray(){let Y=[];for(let W=0;W<this.rows;W++)for(let T=0;T<this.columns;T++)Y.push(this.get(W,T));return Y}to2DArray(){let Y=[];for(let W=0;W<this.rows;W++){Y.push([]);for(let T=0;T<this.columns;T++)Y[W].push(this.get(W,T))}return Y}toJSON(){return this.to2DArray()}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isEmpty(){return 0===this.rows||0===this.columns}isSymmetric(){if(this.isSquare()){for(let Y=0;Y<this.rows;Y++)for(let W=0;W<=Y;W++)if(this.get(Y,W)!==this.get(W,Y))return!1;return!0}return!1}isEchelonForm(){let Y=0,W=0,T=-1,$=!0,ce=!1;for(;Y<this.rows&&$;){for(W=0,ce=!1;W<this.columns&&!1===ce;)0===this.get(Y,W)?W++:1===this.get(Y,W)&&W>T?(ce=!0,T=W):($=!1,ce=!0);Y++}return $}isReducedEchelonForm(){let Y=0,W=0,T=-1,$=!0,ce=!1;for(;Y<this.rows&&$;){for(W=0,ce=!1;W<this.columns&&!1===ce;)0===this.get(Y,W)?W++:1===this.get(Y,W)&&W>T?(ce=!0,T=W):($=!1,ce=!0);for(let je=W+1;je<this.rows;je++)0!==this.get(Y,je)&&($=!1);Y++}return $}echelonForm(){let Y=this.clone(),W=0,T=0;for(;W<Y.rows&&T<Y.columns;){let $=W;for(let ce=W;ce<Y.rows;ce++)Y.get(ce,T)>Y.get($,T)&&($=ce);if(0===Y.get($,T))T++;else{Y.swapRows(W,$);let ce=Y.get(W,T);for(let je=T;je<Y.columns;je++)Y.set(W,je,Y.get(W,je)/ce);for(let je=W+1;je<Y.rows;je++){let Ge=Y.get(je,T)/Y.get(W,T);Y.set(je,T,0);for(let rt=T+1;rt<Y.columns;rt++)Y.set(je,rt,Y.get(je,rt)-Y.get(W,rt)*Ge)}W++,T++}}return Y}reducedEchelonForm(){let Y=this.echelonForm(),W=Y.columns,T=Y.rows,$=T-1;for(;$>=0;)if(0===Y.maxRow($))$--;else{let ce=0,je=!1;for(;ce<T&&!1===je;)1===Y.get($,ce)?je=!0:ce++;for(let Ge=0;Ge<$;Ge++){let rt=Y.get(Ge,ce);for(let it=ce;it<W;it++){let $t=Y.get(Ge,it)-rt*Y.get($,it);Y.set(Ge,it,$t)}}$--}return Y}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(Y={}){if("object"!=typeof Y)throw new TypeError("options must be an object");const{rows:W=1,columns:T=1}=Y;if(!Number.isInteger(W)||W<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(T)||T<=0)throw new TypeError("columns must be a positive integer");let $=new pt(this.rows*W,this.columns*T);for(let ce=0;ce<W;ce++)for(let je=0;je<T;je++)$.setSubMatrix(this,this.rows*ce,this.columns*je);return $}fill(Y){for(let W=0;W<this.rows;W++)for(let T=0;T<this.columns;T++)this.set(W,T,Y);return this}neg(){return this.mulS(-1)}getRow(Y){S(this,Y);let W=[];for(let T=0;T<this.columns;T++)W.push(this.get(Y,T));return W}getRowVector(Y){return pt.rowVector(this.getRow(Y))}setRow(Y,W){S(this,Y),W=U(this,W);for(let T=0;T<this.columns;T++)this.set(Y,T,W[T]);return this}swapRows(Y,W){S(this,Y),S(this,W);for(let T=0;T<this.columns;T++){let $=this.get(Y,T);this.set(Y,T,this.get(W,T)),this.set(W,T,$)}return this}getColumn(Y){P(this,Y);let W=[];for(let T=0;T<this.rows;T++)W.push(this.get(T,Y));return W}getColumnVector(Y){return pt.columnVector(this.getColumn(Y))}setColumn(Y,W){P(this,Y),W=z(this,W);for(let T=0;T<this.rows;T++)this.set(T,Y,W[T]);return this}swapColumns(Y,W){P(this,Y),P(this,W);for(let T=0;T<this.rows;T++){let $=this.get(T,Y);this.set(T,Y,this.get(T,W)),this.set(T,W,$)}return this}addRowVector(Y){Y=U(this,Y);for(let W=0;W<this.rows;W++)for(let T=0;T<this.columns;T++)this.set(W,T,this.get(W,T)+Y[T]);return this}subRowVector(Y){Y=U(this,Y);for(let W=0;W<this.rows;W++)for(let T=0;T<this.columns;T++)this.set(W,T,this.get(W,T)-Y[T]);return this}mulRowVector(Y){Y=U(this,Y);for(let W=0;W<this.rows;W++)for(let T=0;T<this.columns;T++)this.set(W,T,this.get(W,T)*Y[T]);return this}divRowVector(Y){Y=U(this,Y);for(let W=0;W<this.rows;W++)for(let T=0;T<this.columns;T++)this.set(W,T,this.get(W,T)/Y[T]);return this}addColumnVector(Y){Y=z(this,Y);for(let W=0;W<this.rows;W++)for(let T=0;T<this.columns;T++)this.set(W,T,this.get(W,T)+Y[W]);return this}subColumnVector(Y){Y=z(this,Y);for(let W=0;W<this.rows;W++)for(let T=0;T<this.columns;T++)this.set(W,T,this.get(W,T)-Y[W]);return this}mulColumnVector(Y){Y=z(this,Y);for(let W=0;W<this.rows;W++)for(let T=0;T<this.columns;T++)this.set(W,T,this.get(W,T)*Y[W]);return this}divColumnVector(Y){Y=z(this,Y);for(let W=0;W<this.rows;W++)for(let T=0;T<this.columns;T++)this.set(W,T,this.get(W,T)/Y[W]);return this}mulRow(Y,W){S(this,Y);for(let T=0;T<this.columns;T++)this.set(Y,T,this.get(Y,T)*W);return this}mulColumn(Y,W){P(this,Y);for(let T=0;T<this.rows;T++)this.set(T,Y,this.get(T,Y)*W);return this}max(Y){if(this.isEmpty())return NaN;switch(Y){case"row":{const W=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.get(T,$)>W[T]&&(W[T]=this.get(T,$));return W}case"column":{const W=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.get(T,$)>W[$]&&(W[$]=this.get(T,$));return W}case void 0:{let W=this.get(0,0);for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.get(T,$)>W&&(W=this.get(T,$));return W}default:throw new Error(`invalid option: ${Y}`)}}maxIndex(){X(this);let Y=this.get(0,0),W=[0,0];for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.get(T,$)>Y&&(Y=this.get(T,$),W[0]=T,W[1]=$);return W}min(Y){if(this.isEmpty())return NaN;switch(Y){case"row":{const W=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.get(T,$)<W[T]&&(W[T]=this.get(T,$));return W}case"column":{const W=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.get(T,$)<W[$]&&(W[$]=this.get(T,$));return W}case void 0:{let W=this.get(0,0);for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.get(T,$)<W&&(W=this.get(T,$));return W}default:throw new Error(`invalid option: ${Y}`)}}minIndex(){X(this);let Y=this.get(0,0),W=[0,0];for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.get(T,$)<Y&&(Y=this.get(T,$),W[0]=T,W[1]=$);return W}maxRow(Y){if(S(this,Y),this.isEmpty())return NaN;let W=this.get(Y,0);for(let T=1;T<this.columns;T++)this.get(Y,T)>W&&(W=this.get(Y,T));return W}maxRowIndex(Y){S(this,Y),X(this);let W=this.get(Y,0),T=[Y,0];for(let $=1;$<this.columns;$++)this.get(Y,$)>W&&(W=this.get(Y,$),T[1]=$);return T}minRow(Y){if(S(this,Y),this.isEmpty())return NaN;let W=this.get(Y,0);for(let T=1;T<this.columns;T++)this.get(Y,T)<W&&(W=this.get(Y,T));return W}minRowIndex(Y){S(this,Y),X(this);let W=this.get(Y,0),T=[Y,0];for(let $=1;$<this.columns;$++)this.get(Y,$)<W&&(W=this.get(Y,$),T[1]=$);return T}maxColumn(Y){if(P(this,Y),this.isEmpty())return NaN;let W=this.get(0,Y);for(let T=1;T<this.rows;T++)this.get(T,Y)>W&&(W=this.get(T,Y));return W}maxColumnIndex(Y){P(this,Y),X(this);let W=this.get(0,Y),T=[0,Y];for(let $=1;$<this.rows;$++)this.get($,Y)>W&&(W=this.get($,Y),T[0]=$);return T}minColumn(Y){if(P(this,Y),this.isEmpty())return NaN;let W=this.get(0,Y);for(let T=1;T<this.rows;T++)this.get(T,Y)<W&&(W=this.get(T,Y));return W}minColumnIndex(Y){P(this,Y),X(this);let W=this.get(0,Y),T=[0,Y];for(let $=1;$<this.rows;$++)this.get($,Y)<W&&(W=this.get($,Y),T[0]=$);return T}diag(){let Y=Math.min(this.rows,this.columns),W=[];for(let T=0;T<Y;T++)W.push(this.get(T,T));return W}norm(Y="frobenius"){let W=0;if("max"===Y)return this.max();if("frobenius"===Y){for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)W+=this.get(T,$)*this.get(T,$);return Math.sqrt(W)}throw new RangeError(`unknown norm type: ${Y}`)}cumulativeSum(){let Y=0;for(let W=0;W<this.rows;W++)for(let T=0;T<this.columns;T++)Y+=this.get(W,T),this.set(W,T,Y);return this}dot(Y){Xe.isMatrix(Y)&&(Y=Y.to1DArray());let W=this.to1DArray();if(W.length!==Y.length)throw new RangeError("vectors do not have the same size");let T=0;for(let $=0;$<W.length;$++)T+=W[$]*Y[$];return T}mmul(Y){Y=pt.checkMatrix(Y);let W=this.rows,T=this.columns,$=Y.columns,ce=new pt(W,$),je=new Float64Array(T);for(let Ge=0;Ge<$;Ge++){for(let rt=0;rt<T;rt++)je[rt]=Y.get(rt,Ge);for(let rt=0;rt<W;rt++){let it=0;for(let $t=0;$t<T;$t++)it+=this.get(rt,$t)*je[$t];ce.set(rt,Ge,it)}}return ce}strassen2x2(Y){Y=pt.checkMatrix(Y);let W=new pt(2,2);const T=this.get(0,0),$=Y.get(0,0),ce=this.get(0,1),je=Y.get(0,1),Ge=this.get(1,0),rt=Y.get(1,0),it=this.get(1,1),$t=Y.get(1,1),R=(T+it)*($+$t),He=(Ge+it)*$,ze=T*(je-$t),Je=it*(rt-$),gt=(T+ce)*$t,Sn=ze+gt,zn=He+Je,Wn=R-He+ze+(Ge-T)*($+je);return W.set(0,0,R+Je-gt+(ce-it)*(rt+$t)),W.set(0,1,Sn),W.set(1,0,zn),W.set(1,1,Wn),W}strassen3x3(Y){Y=pt.checkMatrix(Y);let W=new pt(3,3);const T=this.get(0,0),$=this.get(0,1),ce=this.get(0,2),je=this.get(1,0),Ge=this.get(1,1),rt=this.get(1,2),it=this.get(2,0),$t=this.get(2,1),R=this.get(2,2),He=Y.get(0,0),ze=Y.get(0,1),Je=Y.get(0,2),gt=Y.get(1,0),an=Y.get(1,1),Ke=Y.get(1,2),qt=Y.get(2,0),Sn=Y.get(2,1),zn=Y.get(2,2),kr=(T-je)*(-ze+an),Er=(-T+je+Ge)*(He-ze+an),Xr=(je+Ge)*(-He+ze),Di=T*He,Kt=(-T+it+$t)*(He-Je+Ke),Gn=(-T+it)*(Je-Ke),hr=(it+$t)*(-He+Je),br=(-ce+$t+R)*(an+qt-Sn),Et=(ce-R)*(an-Sn),Oe=ce*qt,st=($t+R)*(-qt+Sn),Ot=(-ce+Ge+rt)*(Ke+qt-zn),At=(ce-rt)*(Ke-zn),It=(Ge+rt)*(-qt+zn),xi=(T+$+ce-je-Ge-$t-R)*an+Er+Xr+Di+br+Oe+st,eo=Di+Kt+hr+(T+$+ce-Ge-rt-it-$t)*Ke+Oe+Ot+It,dr=kr+Ge*(-He+ze+gt-an-Ke-qt+zn)+Er+Di+Oe+Ot+At,Eo=kr+Er+Xr+Di+rt*Sn,Br=Oe+Ot+At+It+je*Je,Ni=Di+Kt+Gn+$t*(-He+Je+gt-an-Ke-qt+Sn)+br+Et+Oe,Ea=br+Et+Oe+st+it*ze,_a=Di+Kt+Gn+hr+R*zn;return W.set(0,0,Di+Oe+$*gt),W.set(0,1,xi),W.set(0,2,eo),W.set(1,0,dr),W.set(1,1,Eo),W.set(1,2,Br),W.set(2,0,Ni),W.set(2,1,Ea),W.set(2,2,_a),W}mmulStrassen(Y){Y=pt.checkMatrix(Y);let W=this.clone(),T=W.rows,$=W.columns,ce=Y.rows,je=Y.columns;function Ge(R,He,ze){if(R.rows===He&&R.columns===ze)return R;{let an=Xe.zeros(He,ze);return an=an.setSubMatrix(R,0,0),an}}$!==ce&&console.warn(`Multiplying ${T} x ${$} and ${ce} x ${je} matrix: dimensions do not match.`);let rt=Math.max(T,ce),it=Math.max($,je);return W=Ge(W,rt,it),function $t(R,He,ze,Je){if(ze<=512||Je<=512)return R.mmul(He);ze%2==1&&Je%2==1?(R=Ge(R,ze+1,Je+1),He=Ge(He,ze+1,Je+1)):ze%2==1?(R=Ge(R,ze+1,Je),He=Ge(He,ze+1,Je)):Je%2==1&&(R=Ge(R,ze,Je+1),He=Ge(He,ze,Je+1));let gt=parseInt(R.rows/2,10),an=parseInt(R.columns/2,10),Ke=R.subMatrix(0,gt-1,0,an-1),qt=He.subMatrix(0,gt-1,0,an-1),Sn=R.subMatrix(0,gt-1,an,R.columns-1),zn=He.subMatrix(0,gt-1,an,He.columns-1),Wn=R.subMatrix(gt,R.rows-1,0,an-1),kr=He.subMatrix(gt,He.rows-1,0,an-1),$n=R.subMatrix(gt,R.rows-1,an,R.columns-1),Er=He.subMatrix(gt,He.rows-1,an,He.columns-1),Xr=$t(Xe.add(Ke,$n),Xe.add(qt,Er),gt,an),Di=$t(Xe.add(Wn,$n),qt,gt,an),Kt=$t(Ke,Xe.sub(zn,Er),gt,an),Gn=$t($n,Xe.sub(kr,qt),gt,an),hr=$t(Xe.add(Ke,Sn),Er,gt,an),Un=$t(Xe.sub(Wn,Ke),Xe.add(qt,zn),gt,an),Gr=$t(Xe.sub(Sn,$n),Xe.add(kr,Er),gt,an),br=Xe.add(Xr,Gn);br.sub(hr),br.add(Gr);let Et=Xe.add(Kt,hr),Oe=Xe.add(Di,Gn),st=Xe.sub(Xr,Di);st.add(Kt),st.add(Un);let Ot=Xe.zeros(2*br.rows,2*br.columns);return Ot=Ot.setSubMatrix(br,0,0),Ot=Ot.setSubMatrix(Et,br.rows,0),Ot=Ot.setSubMatrix(Oe,0,br.columns),Ot=Ot.setSubMatrix(st,br.rows,br.columns),Ot.subMatrix(0,ze-1,0,Je-1)}(W,Y=Ge(Y,rt,it),rt,it)}scaleRows(Y={}){if("object"!=typeof Y)throw new TypeError("options must be an object");const{min:W=0,max:T=1}=Y;if(!Number.isFinite(W))throw new TypeError("min must be a number");if(!Number.isFinite(T))throw new TypeError("max must be a number");if(W>=T)throw new RangeError("min must be smaller than max");let $=new pt(this.rows,this.columns);for(let ce=0;ce<this.rows;ce++){const je=this.getRow(ce);je.length>0&&F(je,{min:W,max:T,output:je}),$.setRow(ce,je)}return $}scaleColumns(Y={}){if("object"!=typeof Y)throw new TypeError("options must be an object");const{min:W=0,max:T=1}=Y;if(!Number.isFinite(W))throw new TypeError("min must be a number");if(!Number.isFinite(T))throw new TypeError("max must be a number");if(W>=T)throw new RangeError("min must be smaller than max");let $=new pt(this.rows,this.columns);for(let ce=0;ce<this.columns;ce++){const je=this.getColumn(ce);je.length&&F(je,{min:W,max:T,output:je}),$.setColumn(ce,je)}return $}flipRows(){const Y=Math.ceil(this.columns/2);for(let W=0;W<this.rows;W++)for(let T=0;T<Y;T++){let $=this.get(W,T),ce=this.get(W,this.columns-1-T);this.set(W,T,ce),this.set(W,this.columns-1-T,$)}return this}flipColumns(){const Y=Math.ceil(this.rows/2);for(let W=0;W<this.columns;W++)for(let T=0;T<Y;T++){let $=this.get(T,W),ce=this.get(this.rows-1-T,W);this.set(T,W,ce),this.set(this.rows-1-T,W,$)}return this}kroneckerProduct(Y){Y=pt.checkMatrix(Y);let W=this.rows,T=this.columns,$=Y.rows,ce=Y.columns,je=new pt(W*$,T*ce);for(let Ge=0;Ge<W;Ge++)for(let rt=0;rt<T;rt++)for(let it=0;it<$;it++)for(let $t=0;$t<ce;$t++)je.set($*Ge+it,ce*rt+$t,this.get(Ge,rt)*Y.get(it,$t));return je}kroneckerSum(Y){if(Y=pt.checkMatrix(Y),!this.isSquare()||!Y.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let W=this.rows,T=Y.rows,$=this.kroneckerProduct(pt.eye(T,T)),ce=pt.eye(W,W).kroneckerProduct(Y);return $.add(ce)}transpose(){let Y=new pt(this.columns,this.rows);for(let W=0;W<this.rows;W++)for(let T=0;T<this.columns;T++)Y.set(T,W,this.get(W,T));return Y}sortRows(Y=yt){for(let W=0;W<this.rows;W++)this.setRow(W,this.getRow(W).sort(Y));return this}sortColumns(Y=yt){for(let W=0;W<this.columns;W++)this.setColumn(W,this.getColumn(W).sort(Y));return this}subMatrix(Y,W,T,$){q(this,Y,W,T,$);let ce=new pt(W-Y+1,$-T+1);for(let je=Y;je<=W;je++)for(let Ge=T;Ge<=$;Ge++)ce.set(je-Y,Ge-T,this.get(je,Ge));return ce}subMatrixRow(Y,W,T){if(void 0===W&&(W=0),void 0===T&&(T=this.columns-1),W>T||W<0||W>=this.columns||T<0||T>=this.columns)throw new RangeError("Argument out of range");let $=new pt(Y.length,T-W+1);for(let ce=0;ce<Y.length;ce++)for(let je=W;je<=T;je++){if(Y[ce]<0||Y[ce]>=this.rows)throw new RangeError(`Row index out of range: ${Y[ce]}`);$.set(ce,je-W,this.get(Y[ce],je))}return $}subMatrixColumn(Y,W,T){if(void 0===W&&(W=0),void 0===T&&(T=this.rows-1),W>T||W<0||W>=this.rows||T<0||T>=this.rows)throw new RangeError("Argument out of range");let $=new pt(T-W+1,Y.length);for(let ce=0;ce<Y.length;ce++)for(let je=W;je<=T;je++){if(Y[ce]<0||Y[ce]>=this.columns)throw new RangeError(`Column index out of range: ${Y[ce]}`);$.set(je-W,ce,this.get(je,Y[ce]))}return $}setSubMatrix(Y,W,T){if((Y=pt.checkMatrix(Y)).isEmpty())return this;q(this,W,W+Y.rows-1,T,T+Y.columns-1);for(let je=0;je<Y.rows;je++)for(let Ge=0;Ge<Y.columns;Ge++)this.set(W+je,T+Ge,Y.get(je,Ge));return this}selection(Y,W){ie(this,Y),ne(this,W);let T=new pt(Y.length,W.length);for(let $=0;$<Y.length;$++){let ce=Y[$];for(let je=0;je<W.length;je++)T.set($,je,this.get(ce,W[je]))}return T}trace(){let Y=Math.min(this.rows,this.columns),W=0;for(let T=0;T<Y;T++)W+=this.get(T,T);return W}clone(){let Y=new pt(this.rows,this.columns);for(let W=0;W<this.rows;W++)for(let T=0;T<this.columns;T++)Y.set(W,T,this.get(W,T));return Y}sum(Y){switch(Y){case"row":return function ae(Ae){let Y=K(Ae.rows);for(let W=0;W<Ae.rows;++W)for(let T=0;T<Ae.columns;++T)Y[W]+=Ae.get(W,T);return Y}(this);case"column":return function re(Ae){let Y=K(Ae.columns);for(let W=0;W<Ae.rows;++W)for(let T=0;T<Ae.columns;++T)Y[T]+=Ae.get(W,T);return Y}(this);case void 0:return function oe(Ae){let Y=0;for(let W=0;W<Ae.rows;W++)for(let T=0;T<Ae.columns;T++)Y+=Ae.get(W,T);return Y}(this);default:throw new Error(`invalid option: ${Y}`)}}product(Y){switch(Y){case"row":return function ve(Ae){let Y=K(Ae.rows,1);for(let W=0;W<Ae.rows;++W)for(let T=0;T<Ae.columns;++T)Y[W]*=Ae.get(W,T);return Y}(this);case"column":return function we(Ae){let Y=K(Ae.columns,1);for(let W=0;W<Ae.rows;++W)for(let T=0;T<Ae.columns;++T)Y[T]*=Ae.get(W,T);return Y}(this);case void 0:return function _e(Ae){let Y=1;for(let W=0;W<Ae.rows;W++)for(let T=0;T<Ae.columns;T++)Y*=Ae.get(W,T);return Y}(this);default:throw new Error(`invalid option: ${Y}`)}}mean(Y){const W=this.sum(Y);switch(Y){case"row":for(let T=0;T<this.rows;T++)W[T]/=this.columns;return W;case"column":for(let T=0;T<this.columns;T++)W[T]/=this.rows;return W;case void 0:return W/this.size;default:throw new Error(`invalid option: ${Y}`)}}variance(Y,W={}){if("object"==typeof Y&&(W=Y,Y=void 0),"object"!=typeof W)throw new TypeError("options must be an object");const{unbiased:T=!0,mean:$=this.mean(Y)}=W;if("boolean"!=typeof T)throw new TypeError("unbiased must be a boolean");switch(Y){case"row":if(!Q($))throw new TypeError("mean must be an array");return function me(Ae,Y,W){const T=Ae.rows,$=Ae.columns,ce=[];for(let je=0;je<T;je++){let Ge=0,rt=0,it=0;for(let $t=0;$t<$;$t++)it=Ae.get(je,$t)-W[je],Ge+=it,rt+=it*it;ce.push(Y?(rt-Ge*Ge/$)/($-1):(rt-Ge*Ge/$)/$)}return ce}(this,T,$);case"column":if(!Q($))throw new TypeError("mean must be an array");return function Ce(Ae,Y,W){const T=Ae.rows,$=Ae.columns,ce=[];for(let je=0;je<$;je++){let Ge=0,rt=0,it=0;for(let $t=0;$t<T;$t++)it=Ae.get($t,je)-W[je],Ge+=it,rt+=it*it;ce.push(Y?(rt-Ge*Ge/T)/(T-1):(rt-Ge*Ge/T)/T)}return ce}(this,T,$);case void 0:if("number"!=typeof $)throw new TypeError("mean must be a number");return function fe(Ae,Y,W){const T=Ae.rows,$=Ae.columns,ce=T*$;let je=0,Ge=0,rt=0;for(let it=0;it<T;it++)for(let $t=0;$t<$;$t++)rt=Ae.get(it,$t)-W,je+=rt,Ge+=rt*rt;return Y?(Ge-je*je/ce)/(ce-1):(Ge-je*je/ce)/ce}(this,T,$);default:throw new Error(`invalid option: ${Y}`)}}standardDeviation(Y,W){"object"==typeof Y&&(W=Y,Y=void 0);const T=this.variance(Y,W);if(void 0===Y)return Math.sqrt(T);for(let $=0;$<T.length;$++)T[$]=Math.sqrt(T[$]);return T}center(Y,W={}){if("object"==typeof Y&&(W=Y,Y=void 0),"object"!=typeof W)throw new TypeError("options must be an object");const{center:T=this.mean(Y)}=W;switch(Y){case"row":if(!Q(T))throw new TypeError("center must be an array");return function be(Ae,Y){for(let W=0;W<Ae.rows;W++)for(let T=0;T<Ae.columns;T++)Ae.set(W,T,Ae.get(W,T)-Y[W])}(this,T),this;case"column":if(!Q(T))throw new TypeError("center must be an array");return function te(Ae,Y){for(let W=0;W<Ae.rows;W++)for(let T=0;T<Ae.columns;T++)Ae.set(W,T,Ae.get(W,T)-Y[T])}(this,T),this;case void 0:if("number"!=typeof T)throw new TypeError("center must be a number");return function de(Ae,Y){for(let W=0;W<Ae.rows;W++)for(let T=0;T<Ae.columns;T++)Ae.set(W,T,Ae.get(W,T)-Y)}(this,T),this;default:throw new Error(`invalid option: ${Y}`)}}scale(Y,W={}){if("object"==typeof Y&&(W=Y,Y=void 0),"object"!=typeof W)throw new TypeError("options must be an object");let T=W.scale;switch(Y){case"row":if(void 0===T)T=function ke(Ae){const Y=[];for(let W=0;W<Ae.rows;W++){let T=0;for(let $=0;$<Ae.columns;$++)T+=Math.pow(Ae.get(W,$),2)/(Ae.columns-1);Y.push(Math.sqrt(T))}return Y}(this);else if(!Q(T))throw new TypeError("scale must be an array");return function Ze(Ae,Y){for(let W=0;W<Ae.rows;W++)for(let T=0;T<Ae.columns;T++)Ae.set(W,T,Ae.get(W,T)/Y[W])}(this,T),this;case"column":if(void 0===T)T=function We(Ae){const Y=[];for(let W=0;W<Ae.columns;W++){let T=0;for(let $=0;$<Ae.rows;$++)T+=Math.pow(Ae.get($,W),2)/(Ae.rows-1);Y.push(Math.sqrt(T))}return Y}(this);else if(!Q(T))throw new TypeError("scale must be an array");return function bt(Ae,Y){for(let W=0;W<Ae.rows;W++)for(let T=0;T<Ae.columns;T++)Ae.set(W,T,Ae.get(W,T)/Y[T])}(this,T),this;case void 0:if(void 0===T)T=function Ft(Ae){const Y=Ae.size-1;let W=0;for(let T=0;T<Ae.columns;T++)for(let $=0;$<Ae.rows;$++)W+=Math.pow(Ae.get($,T),2)/Y;return Math.sqrt(W)}(this);else if("number"!=typeof T)throw new TypeError("scale must be a number");return function Pt(Ae,Y){for(let W=0;W<Ae.rows;W++)for(let T=0;T<Ae.columns;T++)Ae.set(W,T,Ae.get(W,T)/Y)}(this,T),this;default:throw new Error(`invalid option: ${Y}`)}}toString(Y){return b(this,Y)}}function yt(Ae,Y){return Ae-Y}Xe.prototype.klass="Matrix",typeof Symbol<"u"&&(Xe.prototype[Symbol.for("nodejs.util.inspect.custom")]=function E(){return b(this)}),Xe.random=Xe.rand,Xe.randomInt=Xe.randInt,Xe.diagonal=Xe.diag,Xe.prototype.diagonal=Xe.prototype.diag,Xe.identity=Xe.eye,Xe.prototype.negate=Xe.prototype.neg,Xe.prototype.tensorProduct=Xe.prototype.kroneckerProduct;class pt extends Xe{constructor(Y,W){if(super(),pt.isMatrix(Y))return Y.clone();if(Number.isInteger(Y)&&Y>=0){if(this.data=[],!(Number.isInteger(W)&&W>=0))throw new TypeError("nColumns must be a positive integer");for(let T=0;T<Y;T++)this.data.push(new Float64Array(W))}else{if(!Q(Y))throw new TypeError("First argument must be a positive number or an array");{const T=Y;if("number"!=typeof(W=(Y=T.length)?T[0].length:0))throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let $=0;$<Y;$++){if(T[$].length!==W)throw new RangeError("Inconsistent array dimensions");if(!T[$].every(Y=>"number"==typeof Y))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(T[$]))}}}this.rows=Y,this.columns=W}set(Y,W,T){return this.data[Y][W]=T,this}get(Y,W){return this.data[Y][W]}removeRow(Y){return S(this,Y),this.data.splice(Y,1),this.rows-=1,this}addRow(Y,W){return void 0===W&&(W=Y,Y=this.rows),S(this,Y,!0),W=Float64Array.from(U(this,W)),this.data.splice(Y,0,W),this.rows+=1,this}removeColumn(Y){P(this,Y);for(let W=0;W<this.rows;W++){const T=new Float64Array(this.columns-1);for(let $=0;$<Y;$++)T[$]=this.data[W][$];for(let $=Y+1;$<this.columns;$++)T[$-1]=this.data[W][$];this.data[W]=T}return this.columns-=1,this}addColumn(Y,W){typeof W>"u"&&(W=Y,Y=this.columns),P(this,Y,!0),W=z(this,W);for(let T=0;T<this.rows;T++){const $=new Float64Array(this.columns+1);let ce=0;for(;ce<Y;ce++)$[ce]=this.data[T][ce];for($[ce++]=W[T];ce<this.columns+1;ce++)$[ce]=this.data[T][ce-1];this.data[T]=$}return this.columns+=1,this}}!function M(Ae,Y){Ae.prototype.add=function(T){return"number"==typeof T?this.addS(T):this.addM(T)},Ae.prototype.addS=function(T){for(let $=0;$<this.rows;$++)for(let ce=0;ce<this.columns;ce++)this.set($,ce,this.get($,ce)+T);return this},Ae.prototype.addM=function(T){if(T=Y.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(let $=0;$<this.rows;$++)for(let ce=0;ce<this.columns;ce++)this.set($,ce,this.get($,ce)+T.get($,ce));return this},Ae.add=function(T,$){return new Y(T).add($)},Ae.prototype.sub=function(T){return"number"==typeof T?this.subS(T):this.subM(T)},Ae.prototype.subS=function(T){for(let $=0;$<this.rows;$++)for(let ce=0;ce<this.columns;ce++)this.set($,ce,this.get($,ce)-T);return this},Ae.prototype.subM=function(T){if(T=Y.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(let $=0;$<this.rows;$++)for(let ce=0;ce<this.columns;ce++)this.set($,ce,this.get($,ce)-T.get($,ce));return this},Ae.sub=function(T,$){return new Y(T).sub($)},Ae.prototype.subtract=Ae.prototype.sub,Ae.prototype.subtractS=Ae.prototype.subS,Ae.prototype.subtractM=Ae.prototype.subM,Ae.subtract=Ae.sub,Ae.prototype.mul=function(T){return"number"==typeof T?this.mulS(T):this.mulM(T)},Ae.prototype.mulS=function(T){for(let $=0;$<this.rows;$++)for(let ce=0;ce<this.columns;ce++)this.set($,ce,this.get($,ce)*T);return this},Ae.prototype.mulM=function(T){if(T=Y.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(let $=0;$<this.rows;$++)for(let ce=0;ce<this.columns;ce++)this.set($,ce,this.get($,ce)*T.get($,ce));return this},Ae.mul=function(T,$){return new Y(T).mul($)},Ae.prototype.multiply=Ae.prototype.mul,Ae.prototype.multiplyS=Ae.prototype.mulS,Ae.prototype.multiplyM=Ae.prototype.mulM,Ae.multiply=Ae.mul,Ae.prototype.div=function(T){return"number"==typeof T?this.divS(T):this.divM(T)},Ae.prototype.divS=function(T){for(let $=0;$<this.rows;$++)for(let ce=0;ce<this.columns;ce++)this.set($,ce,this.get($,ce)/T);return this},Ae.prototype.divM=function(T){if(T=Y.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(let $=0;$<this.rows;$++)for(let ce=0;ce<this.columns;ce++)this.set($,ce,this.get($,ce)/T.get($,ce));return this},Ae.div=function(T,$){return new Y(T).div($)},Ae.prototype.divide=Ae.prototype.div,Ae.prototype.divideS=Ae.prototype.divS,Ae.prototype.divideM=Ae.prototype.divM,Ae.divide=Ae.div,Ae.prototype.mod=function(T){return"number"==typeof T?this.modS(T):this.modM(T)},Ae.prototype.modS=function(T){for(let $=0;$<this.rows;$++)for(let ce=0;ce<this.columns;ce++)this.set($,ce,this.get($,ce)%T);return this},Ae.prototype.modM=function(T){if(T=Y.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(let $=0;$<this.rows;$++)for(let ce=0;ce<this.columns;ce++)this.set($,ce,this.get($,ce)%T.get($,ce));return this},Ae.mod=function(T,$){return new Y(T).mod($)},Ae.prototype.modulus=Ae.prototype.mod,Ae.prototype.modulusS=Ae.prototype.modS,Ae.prototype.modulusM=Ae.prototype.modM,Ae.modulus=Ae.mod,Ae.prototype.and=function(T){return"number"==typeof T?this.andS(T):this.andM(T)},Ae.prototype.andS=function(T){for(let $=0;$<this.rows;$++)for(let ce=0;ce<this.columns;ce++)this.set($,ce,this.get($,ce)&T);return this},Ae.prototype.andM=function(T){if(T=Y.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(let $=0;$<this.rows;$++)for(let ce=0;ce<this.columns;ce++)this.set($,ce,this.get($,ce)&T.get($,ce));return this},Ae.and=function(T,$){return new Y(T).and($)},Ae.prototype.or=function(T){return"number"==typeof T?this.orS(T):this.orM(T)},Ae.prototype.orS=function(T){for(let $=0;$<this.rows;$++)for(let ce=0;ce<this.columns;ce++)this.set($,ce,this.get($,ce)|T);return this},Ae.prototype.orM=function(T){if(T=Y.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(let $=0;$<this.rows;$++)for(let ce=0;ce<this.columns;ce++)this.set($,ce,this.get($,ce)|T.get($,ce));return this},Ae.or=function(T,$){return new Y(T).or($)},Ae.prototype.xor=function(T){return"number"==typeof T?this.xorS(T):this.xorM(T)},Ae.prototype.xorS=function(T){for(let $=0;$<this.rows;$++)for(let ce=0;ce<this.columns;ce++)this.set($,ce,this.get($,ce)^T);return this},Ae.prototype.xorM=function(T){if(T=Y.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(let $=0;$<this.rows;$++)for(let ce=0;ce<this.columns;ce++)this.set($,ce,this.get($,ce)^T.get($,ce));return this},Ae.xor=function(T,$){return new Y(T).xor($)},Ae.prototype.leftShift=function(T){return"number"==typeof T?this.leftShiftS(T):this.leftShiftM(T)},Ae.prototype.leftShiftS=function(T){for(let $=0;$<this.rows;$++)for(let ce=0;ce<this.columns;ce++)this.set($,ce,this.get($,ce)<<T);return this},Ae.prototype.leftShiftM=function(T){if(T=Y.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(let $=0;$<this.rows;$++)for(let ce=0;ce<this.columns;ce++)this.set($,ce,this.get($,ce)<<T.get($,ce));return this},Ae.leftShift=function(T,$){return new Y(T).leftShift($)},Ae.prototype.signPropagatingRightShift=function(T){return"number"==typeof T?this.signPropagatingRightShiftS(T):this.signPropagatingRightShiftM(T)},Ae.prototype.signPropagatingRightShiftS=function(T){for(let $=0;$<this.rows;$++)for(let ce=0;ce<this.columns;ce++)this.set($,ce,this.get($,ce)>>T);return this},Ae.prototype.signPropagatingRightShiftM=function(T){if(T=Y.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(let $=0;$<this.rows;$++)for(let ce=0;ce<this.columns;ce++)this.set($,ce,this.get($,ce)>>T.get($,ce));return this},Ae.signPropagatingRightShift=function(T,$){return new Y(T).signPropagatingRightShift($)},Ae.prototype.rightShift=function(T){return"number"==typeof T?this.rightShiftS(T):this.rightShiftM(T)},Ae.prototype.rightShiftS=function(T){for(let $=0;$<this.rows;$++)for(let ce=0;ce<this.columns;ce++)this.set($,ce,this.get($,ce)>>>T);return this},Ae.prototype.rightShiftM=function(T){if(T=Y.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(let $=0;$<this.rows;$++)for(let ce=0;ce<this.columns;ce++)this.set($,ce,this.get($,ce)>>>T.get($,ce));return this},Ae.rightShift=function(T,$){return new Y(T).rightShift($)},Ae.prototype.zeroFillRightShift=Ae.prototype.rightShift,Ae.prototype.zeroFillRightShiftS=Ae.prototype.rightShiftS,Ae.prototype.zeroFillRightShiftM=Ae.prototype.rightShiftM,Ae.zeroFillRightShift=Ae.rightShift,Ae.prototype.not=function(){for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.set(T,$,~this.get(T,$));return this},Ae.not=function(T){return new Y(T).not()},Ae.prototype.abs=function(){for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.set(T,$,Math.abs(this.get(T,$)));return this},Ae.abs=function(T){return new Y(T).abs()},Ae.prototype.acos=function(){for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.set(T,$,Math.acos(this.get(T,$)));return this},Ae.acos=function(T){return new Y(T).acos()},Ae.prototype.acosh=function(){for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.set(T,$,Math.acosh(this.get(T,$)));return this},Ae.acosh=function(T){return new Y(T).acosh()},Ae.prototype.asin=function(){for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.set(T,$,Math.asin(this.get(T,$)));return this},Ae.asin=function(T){return new Y(T).asin()},Ae.prototype.asinh=function(){for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.set(T,$,Math.asinh(this.get(T,$)));return this},Ae.asinh=function(T){return new Y(T).asinh()},Ae.prototype.atan=function(){for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.set(T,$,Math.atan(this.get(T,$)));return this},Ae.atan=function(T){return new Y(T).atan()},Ae.prototype.atanh=function(){for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.set(T,$,Math.atanh(this.get(T,$)));return this},Ae.atanh=function(T){return new Y(T).atanh()},Ae.prototype.cbrt=function(){for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.set(T,$,Math.cbrt(this.get(T,$)));return this},Ae.cbrt=function(T){return new Y(T).cbrt()},Ae.prototype.ceil=function(){for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.set(T,$,Math.ceil(this.get(T,$)));return this},Ae.ceil=function(T){return new Y(T).ceil()},Ae.prototype.clz32=function(){for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.set(T,$,Math.clz32(this.get(T,$)));return this},Ae.clz32=function(T){return new Y(T).clz32()},Ae.prototype.cos=function(){for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.set(T,$,Math.cos(this.get(T,$)));return this},Ae.cos=function(T){return new Y(T).cos()},Ae.prototype.cosh=function(){for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.set(T,$,Math.cosh(this.get(T,$)));return this},Ae.cosh=function(T){return new Y(T).cosh()},Ae.prototype.exp=function(){for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.set(T,$,Math.exp(this.get(T,$)));return this},Ae.exp=function(T){return new Y(T).exp()},Ae.prototype.expm1=function(){for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.set(T,$,Math.expm1(this.get(T,$)));return this},Ae.expm1=function(T){return new Y(T).expm1()},Ae.prototype.floor=function(){for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.set(T,$,Math.floor(this.get(T,$)));return this},Ae.floor=function(T){return new Y(T).floor()},Ae.prototype.fround=function(){for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.set(T,$,Math.fround(this.get(T,$)));return this},Ae.fround=function(T){return new Y(T).fround()},Ae.prototype.log=function(){for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.set(T,$,Math.log(this.get(T,$)));return this},Ae.log=function(T){return new Y(T).log()},Ae.prototype.log1p=function(){for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.set(T,$,Math.log1p(this.get(T,$)));return this},Ae.log1p=function(T){return new Y(T).log1p()},Ae.prototype.log10=function(){for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.set(T,$,Math.log10(this.get(T,$)));return this},Ae.log10=function(T){return new Y(T).log10()},Ae.prototype.log2=function(){for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.set(T,$,Math.log2(this.get(T,$)));return this},Ae.log2=function(T){return new Y(T).log2()},Ae.prototype.round=function(){for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.set(T,$,Math.round(this.get(T,$)));return this},Ae.round=function(T){return new Y(T).round()},Ae.prototype.sign=function(){for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.set(T,$,Math.sign(this.get(T,$)));return this},Ae.sign=function(T){return new Y(T).sign()},Ae.prototype.sin=function(){for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.set(T,$,Math.sin(this.get(T,$)));return this},Ae.sin=function(T){return new Y(T).sin()},Ae.prototype.sinh=function(){for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.set(T,$,Math.sinh(this.get(T,$)));return this},Ae.sinh=function(T){return new Y(T).sinh()},Ae.prototype.sqrt=function(){for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.set(T,$,Math.sqrt(this.get(T,$)));return this},Ae.sqrt=function(T){return new Y(T).sqrt()},Ae.prototype.tan=function(){for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.set(T,$,Math.tan(this.get(T,$)));return this},Ae.tan=function(T){return new Y(T).tan()},Ae.prototype.tanh=function(){for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.set(T,$,Math.tanh(this.get(T,$)));return this},Ae.tanh=function(T){return new Y(T).tanh()},Ae.prototype.trunc=function(){for(let T=0;T<this.rows;T++)for(let $=0;$<this.columns;$++)this.set(T,$,Math.trunc(this.get(T,$)));return this},Ae.trunc=function(T){return new Y(T).trunc()},Ae.pow=function(T,$){return new Y(T).pow($)},Ae.prototype.pow=function(T){return"number"==typeof T?this.powS(T):this.powM(T)},Ae.prototype.powS=function(T){for(let $=0;$<this.rows;$++)for(let ce=0;ce<this.columns;ce++)this.set($,ce,Math.pow(this.get($,ce),T));return this},Ae.prototype.powM=function(T){if(T=Y.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(let $=0;$<this.rows;$++)for(let ce=0;ce<this.columns;ce++)this.set($,ce,Math.pow(this.get($,ce),T.get($,ce)));return this}}(Xe,pt);class xt extends Xe{constructor(Y,W,T){super(),this.matrix=Y,this.rows=W,this.columns=T}}class Fe extends xt{constructor(Y,W){P(Y,W),super(Y,Y.rows,1),this.column=W}set(Y,W,T){return this.matrix.set(Y,this.column,T),this}get(Y){return this.matrix.get(Y,this.column)}}class ut extends xt{constructor(Y,W){ne(Y,W),super(Y,Y.rows,W.length),this.columnIndices=W}set(Y,W,T){return this.matrix.set(Y,this.columnIndices[W],T),this}get(Y,W){return this.matrix.get(Y,this.columnIndices[W])}}class Ut extends xt{constructor(Y){super(Y,Y.rows,Y.columns)}set(Y,W,T){return this.matrix.set(Y,this.columns-W-1,T),this}get(Y,W){return this.matrix.get(Y,this.columns-W-1)}}class $e extends xt{constructor(Y){super(Y,Y.rows,Y.columns)}set(Y,W,T){return this.matrix.set(this.rows-Y-1,W,T),this}get(Y,W){return this.matrix.get(this.rows-Y-1,W)}}class Te extends xt{constructor(Y,W){S(Y,W),super(Y,1,Y.columns),this.row=W}set(Y,W,T){return this.matrix.set(this.row,W,T),this}get(Y,W){return this.matrix.get(this.row,W)}}class tt extends xt{constructor(Y,W){ie(Y,W),super(Y,W.length,Y.columns),this.rowIndices=W}set(Y,W,T){return this.matrix.set(this.rowIndices[Y],W,T),this}get(Y,W){return this.matrix.get(this.rowIndices[Y],W)}}class Mt extends xt{constructor(Y,W,T){ie(Y,W),ne(Y,T),super(Y,W.length,T.length),this.rowIndices=W,this.columnIndices=T}set(Y,W,T){return this.matrix.set(this.rowIndices[Y],this.columnIndices[W],T),this}get(Y,W){return this.matrix.get(this.rowIndices[Y],this.columnIndices[W])}}class Wt extends xt{constructor(Y,W,T,$,ce){q(Y,W,T,$,ce),super(Y,T-W+1,ce-$+1),this.startRow=W,this.startColumn=$}set(Y,W,T){return this.matrix.set(this.startRow+Y,this.startColumn+W,T),this}get(Y,W){return this.matrix.get(this.startRow+Y,this.startColumn+W)}}class un extends xt{constructor(Y){super(Y,Y.columns,Y.rows)}set(Y,W,T){return this.matrix.set(W,Y,T),this}get(Y,W){return this.matrix.get(W,Y)}}class Le extends Xe{constructor(Y,W={}){const{rows:T=1}=W;if(Y.length%T!=0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=T,this.columns=Y.length/T,this.data=Y}set(Y,W,T){let $=this._calculateIndex(Y,W);return this.data[$]=T,this}get(Y,W){let T=this._calculateIndex(Y,W);return this.data[T]}_calculateIndex(Y,W){return Y*this.columns+W}}class zt extends Xe{constructor(Y){super(),this.data=Y,this.rows=Y.length,this.columns=Y[0].length}set(Y,W,T){return this.data[Y][W]=T,this}get(Y,W){return this.data[Y][W]}}function Xt(Ae,Y){if(Q(Ae))return Ae[0]&&Q(Ae[0])?new zt(Ae):new Le(Ae,Y);throw new Error("the argument is not an array")}class Tn{constructor(Y){let Ge,rt,it,$t,R,He,ze,Je,gt,W=(Y=zt.checkMatrix(Y)).clone(),T=W.rows,$=W.columns,ce=new Float64Array(T),je=1;for(Ge=0;Ge<T;Ge++)ce[Ge]=Ge;for(Je=new Float64Array(T),rt=0;rt<$;rt++){for(Ge=0;Ge<T;Ge++)Je[Ge]=W.get(Ge,rt);for(Ge=0;Ge<T;Ge++){for(gt=Math.min(Ge,rt),R=0,it=0;it<gt;it++)R+=W.get(Ge,it)*Je[it];Je[Ge]-=R,W.set(Ge,rt,Je[Ge])}for($t=rt,Ge=rt+1;Ge<T;Ge++)Math.abs(Je[Ge])>Math.abs(Je[$t])&&($t=Ge);if($t!==rt){for(it=0;it<$;it++)He=W.get($t,it),W.set($t,it,W.get(rt,it)),W.set(rt,it,He);ze=ce[$t],ce[$t]=ce[rt],ce[rt]=ze,je=-je}if(rt<T&&0!==W.get(rt,rt))for(Ge=rt+1;Ge<T;Ge++)W.set(Ge,rt,W.get(Ge,rt)/W.get(rt,rt))}this.LU=W,this.pivotVector=ce,this.pivotSign=je}isSingular(){let Y=this.LU,W=Y.columns;for(let T=0;T<W;T++)if(0===Y.get(T,T))return!0;return!1}solve(Y){Y=pt.checkMatrix(Y);let W=this.LU;if(W.rows!==Y.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let Ge,rt,it,$=Y.columns,ce=Y.subMatrixRow(this.pivotVector,0,$-1),je=W.columns;for(it=0;it<je;it++)for(Ge=it+1;Ge<je;Ge++)for(rt=0;rt<$;rt++)ce.set(Ge,rt,ce.get(Ge,rt)-ce.get(it,rt)*W.get(Ge,it));for(it=je-1;it>=0;it--){for(rt=0;rt<$;rt++)ce.set(it,rt,ce.get(it,rt)/W.get(it,it));for(Ge=0;Ge<it;Ge++)for(rt=0;rt<$;rt++)ce.set(Ge,rt,ce.get(Ge,rt)-ce.get(it,rt)*W.get(Ge,it))}return ce}get determinant(){let Y=this.LU;if(!Y.isSquare())throw new Error("Matrix must be square");let W=this.pivotSign,T=Y.columns;for(let $=0;$<T;$++)W*=Y.get($,$);return W}get lowerTriangularMatrix(){let Y=this.LU,W=Y.rows,T=Y.columns,$=new pt(W,T);for(let ce=0;ce<W;ce++)for(let je=0;je<T;je++)$.set(ce,je,ce>je?Y.get(ce,je):ce===je?1:0);return $}get upperTriangularMatrix(){let Y=this.LU,W=Y.rows,T=Y.columns,$=new pt(W,T);for(let ce=0;ce<W;ce++)for(let je=0;je<T;je++)$.set(ce,je,ce<=je?Y.get(ce,je):0);return $}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function gn(Ae,Y){let W=0;return Math.abs(Ae)>Math.abs(Y)?(W=Y/Ae,Math.abs(Ae)*Math.sqrt(1+W*W)):0!==Y?(W=Ae/Y,Math.abs(Y)*Math.sqrt(1+W*W)):0}class kn{constructor(Y){let je,Ge,rt,it,W=(Y=zt.checkMatrix(Y)).clone(),T=Y.rows,$=Y.columns,ce=new Float64Array($);for(rt=0;rt<$;rt++){let $t=0;for(je=rt;je<T;je++)$t=gn($t,W.get(je,rt));if(0!==$t){for(W.get(rt,rt)<0&&($t=-$t),je=rt;je<T;je++)W.set(je,rt,W.get(je,rt)/$t);for(W.set(rt,rt,W.get(rt,rt)+1),Ge=rt+1;Ge<$;Ge++){for(it=0,je=rt;je<T;je++)it+=W.get(je,rt)*W.get(je,Ge);for(it=-it/W.get(rt,rt),je=rt;je<T;je++)W.set(je,Ge,W.get(je,Ge)+it*W.get(je,rt))}}ce[rt]=-$t}this.QR=W,this.Rdiag=ce}solve(Y){Y=pt.checkMatrix(Y);let W=this.QR,T=W.rows;if(Y.rows!==T)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let Ge,rt,it,$t,$=Y.columns,ce=Y.clone(),je=W.columns;for(it=0;it<je;it++)for(rt=0;rt<$;rt++){for($t=0,Ge=it;Ge<T;Ge++)$t+=W.get(Ge,it)*ce.get(Ge,rt);for($t=-$t/W.get(it,it),Ge=it;Ge<T;Ge++)ce.set(Ge,rt,ce.get(Ge,rt)+$t*W.get(Ge,it))}for(it=je-1;it>=0;it--){for(rt=0;rt<$;rt++)ce.set(it,rt,ce.get(it,rt)/this.Rdiag[it]);for(Ge=0;Ge<it;Ge++)for(rt=0;rt<$;rt++)ce.set(Ge,rt,ce.get(Ge,rt)-ce.get(it,rt)*W.get(Ge,it))}return ce.subMatrix(0,je-1,0,$-1)}isFullRank(){let Y=this.QR.columns;for(let W=0;W<Y;W++)if(0===this.Rdiag[W])return!1;return!0}get upperTriangularMatrix(){let $,ce,Y=this.QR,W=Y.columns,T=new pt(W,W);for($=0;$<W;$++)for(ce=0;ce<W;ce++)T.set($,ce,$<ce?Y.get($,ce):$===ce?this.Rdiag[$]:0);return T}get orthogonalMatrix(){let ce,je,Ge,rt,Y=this.QR,W=Y.rows,T=Y.columns,$=new pt(W,T);for(Ge=T-1;Ge>=0;Ge--){for(ce=0;ce<W;ce++)$.set(ce,Ge,0);for($.set(Ge,Ge,1),je=Ge;je<T;je++)if(0!==Y.get(Ge,Ge)){for(rt=0,ce=Ge;ce<W;ce++)rt+=Y.get(ce,Ge)*$.get(ce,je);for(rt=-rt/Y.get(Ge,Ge),ce=Ge;ce<W;ce++)$.set(ce,je,$.get(ce,je)+rt*Y.get(ce,Ge))}}return $}}class ir{constructor(Y,W={}){if((Y=zt.checkMatrix(Y)).isEmpty())throw new Error("Matrix must be non-empty");let T=Y.rows,$=Y.columns;const{computeLeftSingularVectors:ce=!0,computeRightSingularVectors:je=!0,autoTranspose:Ge=!1}=W;let R,rt=Boolean(ce),it=Boolean(je),$t=!1;if(T<$)if(Ge){R=Y.transpose(),T=R.rows,$=R.columns,$t=!0;let Kt=rt;rt=it,it=Kt}else R=Y.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else R=Y.clone();let He=Math.min(T,$),ze=Math.min(T+1,$),Je=new Float64Array(ze),gt=new pt(T,He),an=new pt($,$),Ke=new Float64Array($),qt=new Float64Array(T),Sn=new Float64Array(ze);for(let Kt=0;Kt<ze;Kt++)Sn[Kt]=Kt;let zn=Math.min(T-1,$),Wn=Math.max(0,Math.min($-2,T)),kr=Math.max(zn,Wn);for(let Kt=0;Kt<kr;Kt++){if(Kt<zn){Je[Kt]=0;for(let Gn=Kt;Gn<T;Gn++)Je[Kt]=gn(Je[Kt],R.get(Gn,Kt));if(0!==Je[Kt]){R.get(Kt,Kt)<0&&(Je[Kt]=-Je[Kt]);for(let Gn=Kt;Gn<T;Gn++)R.set(Gn,Kt,R.get(Gn,Kt)/Je[Kt]);R.set(Kt,Kt,R.get(Kt,Kt)+1)}Je[Kt]=-Je[Kt]}for(let Gn=Kt+1;Gn<$;Gn++){if(Kt<zn&&0!==Je[Kt]){let hr=0;for(let Un=Kt;Un<T;Un++)hr+=R.get(Un,Kt)*R.get(Un,Gn);hr=-hr/R.get(Kt,Kt);for(let Un=Kt;Un<T;Un++)R.set(Un,Gn,R.get(Un,Gn)+hr*R.get(Un,Kt))}Ke[Gn]=R.get(Kt,Gn)}if(rt&&Kt<zn)for(let Gn=Kt;Gn<T;Gn++)gt.set(Gn,Kt,R.get(Gn,Kt));if(Kt<Wn){Ke[Kt]=0;for(let Gn=Kt+1;Gn<$;Gn++)Ke[Kt]=gn(Ke[Kt],Ke[Gn]);if(0!==Ke[Kt]){Ke[Kt+1]<0&&(Ke[Kt]=0-Ke[Kt]);for(let Gn=Kt+1;Gn<$;Gn++)Ke[Gn]/=Ke[Kt];Ke[Kt+1]+=1}if(Ke[Kt]=-Ke[Kt],Kt+1<T&&0!==Ke[Kt]){for(let Gn=Kt+1;Gn<T;Gn++)qt[Gn]=0;for(let Gn=Kt+1;Gn<T;Gn++)for(let hr=Kt+1;hr<$;hr++)qt[Gn]+=Ke[hr]*R.get(Gn,hr);for(let Gn=Kt+1;Gn<$;Gn++){let hr=-Ke[Gn]/Ke[Kt+1];for(let Un=Kt+1;Un<T;Un++)R.set(Un,Gn,R.get(Un,Gn)+hr*qt[Un])}}if(it)for(let Gn=Kt+1;Gn<$;Gn++)an.set(Gn,Kt,Ke[Gn])}}let $n=Math.min($,T+1);if(zn<$&&(Je[zn]=R.get(zn,zn)),T<$n&&(Je[$n-1]=0),Wn+1<$n&&(Ke[Wn]=R.get(Wn,$n-1)),Ke[$n-1]=0,rt){for(let Kt=zn;Kt<He;Kt++){for(let Gn=0;Gn<T;Gn++)gt.set(Gn,Kt,0);gt.set(Kt,Kt,1)}for(let Kt=zn-1;Kt>=0;Kt--)if(0!==Je[Kt]){for(let Gn=Kt+1;Gn<He;Gn++){let hr=0;for(let Un=Kt;Un<T;Un++)hr+=gt.get(Un,Kt)*gt.get(Un,Gn);hr=-hr/gt.get(Kt,Kt);for(let Un=Kt;Un<T;Un++)gt.set(Un,Gn,gt.get(Un,Gn)+hr*gt.get(Un,Kt))}for(let Gn=Kt;Gn<T;Gn++)gt.set(Gn,Kt,-gt.get(Gn,Kt));gt.set(Kt,Kt,1+gt.get(Kt,Kt));for(let Gn=0;Gn<Kt-1;Gn++)gt.set(Gn,Kt,0)}else{for(let Gn=0;Gn<T;Gn++)gt.set(Gn,Kt,0);gt.set(Kt,Kt,1)}}if(it)for(let Kt=$-1;Kt>=0;Kt--){if(Kt<Wn&&0!==Ke[Kt])for(let Gn=Kt+1;Gn<$;Gn++){let hr=0;for(let Un=Kt+1;Un<$;Un++)hr+=an.get(Un,Kt)*an.get(Un,Gn);hr=-hr/an.get(Kt+1,Kt);for(let Un=Kt+1;Un<$;Un++)an.set(Un,Gn,an.get(Un,Gn)+hr*an.get(Un,Kt))}for(let Gn=0;Gn<$;Gn++)an.set(Gn,Kt,0);an.set(Kt,Kt,1)}let Er=$n-1,Xr=0,Di=Number.EPSILON;for(;$n>0;){let Kt,Gn;for(Kt=$n-2;Kt>=-1&&-1!==Kt;Kt--){const hr=Number.MIN_VALUE+Di*Math.abs(Je[Kt]+Math.abs(Je[Kt+1]));if(Math.abs(Ke[Kt])<=hr||Number.isNaN(Ke[Kt])){Ke[Kt]=0;break}}if(Kt===$n-2)Gn=4;else{let hr;for(hr=$n-1;hr>=Kt&&hr!==Kt;hr--){let Un=(hr!==$n?Math.abs(Ke[hr]):0)+(hr!==Kt+1?Math.abs(Ke[hr-1]):0);if(Math.abs(Je[hr])<=Di*Un){Je[hr]=0;break}}hr===Kt?Gn=3:hr===$n-1?Gn=1:(Gn=2,Kt=hr)}switch(Kt++,Gn){case 1:{let hr=Ke[$n-2];Ke[$n-2]=0;for(let Un=$n-2;Un>=Kt;Un--){let Gr=gn(Je[Un],hr),br=Je[Un]/Gr,Et=hr/Gr;if(Je[Un]=Gr,Un!==Kt&&(hr=-Et*Ke[Un-1],Ke[Un-1]=br*Ke[Un-1]),it)for(let Oe=0;Oe<$;Oe++)Gr=br*an.get(Oe,Un)+Et*an.get(Oe,$n-1),an.set(Oe,$n-1,-Et*an.get(Oe,Un)+br*an.get(Oe,$n-1)),an.set(Oe,Un,Gr)}break}case 2:{let hr=Ke[Kt-1];Ke[Kt-1]=0;for(let Un=Kt;Un<$n;Un++){let Gr=gn(Je[Un],hr),br=Je[Un]/Gr,Et=hr/Gr;if(Je[Un]=Gr,hr=-Et*Ke[Un],Ke[Un]=br*Ke[Un],rt)for(let Oe=0;Oe<T;Oe++)Gr=br*gt.get(Oe,Un)+Et*gt.get(Oe,Kt-1),gt.set(Oe,Kt-1,-Et*gt.get(Oe,Un)+br*gt.get(Oe,Kt-1)),gt.set(Oe,Un,Gr)}break}case 3:{const hr=Math.max(Math.abs(Je[$n-1]),Math.abs(Je[$n-2]),Math.abs(Ke[$n-2]),Math.abs(Je[Kt]),Math.abs(Ke[Kt])),Un=Je[$n-1]/hr,Gr=Je[$n-2]/hr,br=Ke[$n-2]/hr,Et=Je[Kt]/hr,Oe=Ke[Kt]/hr,st=((Gr+Un)*(Gr-Un)+br*br)/2,Ot=Un*br*(Un*br);let At=0;(0!==st||0!==Ot)&&(At=st<0?0-Math.sqrt(st*st+Ot):Math.sqrt(st*st+Ot),At=Ot/(st+At));let It=(Et+Un)*(Et-Un)+At,cn=Et*Oe;for(let fn=Kt;fn<$n-1;fn++){let Fn=gn(It,cn);0===Fn&&(Fn=Number.MIN_VALUE);let Or=It/Fn,Dr=cn/Fn;if(fn!==Kt&&(Ke[fn-1]=Fn),It=Or*Je[fn]+Dr*Ke[fn],Ke[fn]=Or*Ke[fn]-Dr*Je[fn],cn=Dr*Je[fn+1],Je[fn+1]=Or*Je[fn+1],it)for(let Qn=0;Qn<$;Qn++)Fn=Or*an.get(Qn,fn)+Dr*an.get(Qn,fn+1),an.set(Qn,fn+1,-Dr*an.get(Qn,fn)+Or*an.get(Qn,fn+1)),an.set(Qn,fn,Fn);if(Fn=gn(It,cn),0===Fn&&(Fn=Number.MIN_VALUE),Or=It/Fn,Dr=cn/Fn,Je[fn]=Fn,It=Or*Ke[fn]+Dr*Je[fn+1],Je[fn+1]=-Dr*Ke[fn]+Or*Je[fn+1],cn=Dr*Ke[fn+1],Ke[fn+1]=Or*Ke[fn+1],rt&&fn<T-1)for(let Qn=0;Qn<T;Qn++)Fn=Or*gt.get(Qn,fn)+Dr*gt.get(Qn,fn+1),gt.set(Qn,fn+1,-Dr*gt.get(Qn,fn)+Or*gt.get(Qn,fn+1)),gt.set(Qn,fn,Fn)}Ke[$n-2]=It,Xr+=1;break}case 4:if(Je[Kt]<=0&&(Je[Kt]=Je[Kt]<0?-Je[Kt]:0,it))for(let hr=0;hr<=Er;hr++)an.set(hr,Kt,-an.get(hr,Kt));for(;Kt<Er&&!(Je[Kt]>=Je[Kt+1]);){let hr=Je[Kt];if(Je[Kt]=Je[Kt+1],Je[Kt+1]=hr,it&&Kt<$-1)for(let Un=0;Un<$;Un++)hr=an.get(Un,Kt+1),an.set(Un,Kt+1,an.get(Un,Kt)),an.set(Un,Kt,hr);if(rt&&Kt<T-1)for(let Un=0;Un<T;Un++)hr=gt.get(Un,Kt+1),gt.set(Un,Kt+1,gt.get(Un,Kt)),gt.set(Un,Kt,hr);Kt++}Xr=0,$n--}}if($t){let Kt=an;an=gt,gt=Kt}this.m=T,this.n=$,this.s=Je,this.U=gt,this.V=an}solve(Y){let W=Y,T=this.threshold,$=this.s.length,ce=pt.zeros($,$);for(let He=0;He<$;He++)Math.abs(this.s[He])<=T?ce.set(He,He,0):ce.set(He,He,1/this.s[He]);let je=this.U,Ge=this.rightSingularVectors,rt=Ge.mmul(ce),it=Ge.rows,$t=je.rows,R=pt.zeros(it,$t);for(let He=0;He<it;He++)for(let ze=0;ze<$t;ze++){let Je=0;for(let gt=0;gt<$;gt++)Je+=rt.get(He,gt)*je.get(ze,gt);R.set(He,ze,Je)}return R.mmul(W)}solveForDiagonal(Y){return this.solve(pt.diag(Y))}inverse(){let Y=this.V,W=this.threshold,T=Y.rows,$=Y.columns,ce=new pt(T,this.s.length);for(let $t=0;$t<T;$t++)for(let R=0;R<$;R++)Math.abs(this.s[R])>W&&ce.set($t,R,Y.get($t,R)/this.s[R]);let je=this.U,Ge=je.rows,rt=je.columns,it=new pt(T,Ge);for(let $t=0;$t<T;$t++)for(let R=0;R<Ge;R++){let He=0;for(let ze=0;ze<rt;ze++)He+=ce.get($t,ze)*je.get(R,ze);it.set($t,R,He)}return it}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let Y=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,W=0,T=this.s;for(let $=0,ce=T.length;$<ce;$++)T[$]>Y&&W++;return W}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return pt.diag(this.s)}}function cr(Ae,Y=!1){return Ae=zt.checkMatrix(Ae),Y?new ir(Ae).inverse():Bn(Ae,pt.eye(Ae.rows))}function Bn(Ae,Y,W=!1){return Ae=zt.checkMatrix(Ae),Y=zt.checkMatrix(Y),W?new ir(Ae).solve(Y):Ae.isSquare()?new Tn(Ae).solve(Y):new kn(Ae).solve(Y)}function xr(Ae){if((Ae=pt.checkMatrix(Ae)).isSquare()){if(0===Ae.columns)return 1;let Y,W,T,$;if(2===Ae.columns)return Y=Ae.get(0,0),W=Ae.get(0,1),T=Ae.get(1,0),$=Ae.get(1,1),Y*$-W*T;if(3===Ae.columns){let ce,je,Ge;return ce=new Mt(Ae,[1,2],[1,2]),je=new Mt(Ae,[1,2],[0,2]),Ge=new Mt(Ae,[1,2],[0,1]),Y=Ae.get(0,0),W=Ae.get(0,1),T=Ae.get(0,2),Y*xr(ce)-W*xr(je)+T*xr(Ge)}return new Tn(Ae).determinant}throw Error("determinant can only be calculated for a square matrix")}function jn(Ae,Y){let W=[];for(let T=0;T<Ae;T++)T!==Y&&W.push(T);return W}function Rn(Ae,Y,W,T=1e-9,$=1e-9){if(Ae>$)return new Array(Y.rows+1).fill(0);{let ce=Y.addRow(W,[0]);for(let je=0;je<ce.rows;je++)Math.abs(ce.get(je,0))<T&&ce.set(je,0,0);return ce.to1DArray()}}function er(Ae,Y={}){const{thresholdValue:W=1e-9,thresholdError:T=1e-9}=Y;let $=(Ae=pt.checkMatrix(Ae)).rows,ce=new pt($,$);for(let je=0;je<$;je++){let Ge=pt.columnVector(Ae.getRow(je)),rt=Ae.subMatrixRow(jn($,je)).transpose(),$t=new ir(rt).solve(Ge),R=pt.sub(Ge,rt.mmul($t)).abs().max();ce.setRow(je,Rn(R,$t,je,W,T))}return ce}function Mr(Ae,Y=Number.EPSILON){if((Ae=pt.checkMatrix(Ae)).isEmpty())return Ae.transpose();let W=new ir(Ae,{autoTranspose:!0}),T=W.leftSingularVectors,$=W.rightSingularVectors,ce=W.diagonal;for(let je=0;je<ce.length;je++)ce[je]=Math.abs(ce[je])>Y?1/ce[je]:0;return $.mmul(pt.diag(ce).mmul(T.transpose()))}function yr(Ae,Y=Ae,W={}){Ae=new pt(Ae);let T=!1;if("object"!=typeof Y||pt.isMatrix(Y)||Q(Y)?Y=new pt(Y):(W=Y,Y=Ae,T=!0),Ae.rows!==Y.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:$=!0}=W;$&&(Ae=Ae.center("column"),T||(Y=Y.center("column")));const ce=Ae.transpose().mmul(Y);for(let je=0;je<ce.rows;je++)for(let Ge=0;Ge<ce.columns;Ge++)ce.set(je,Ge,ce.get(je,Ge)*(1/(Ae.rows-1)));return ce}function gr(Ae,Y=Ae,W={}){Ae=new pt(Ae);let T=!1;if("object"!=typeof Y||pt.isMatrix(Y)||Q(Y)?Y=new pt(Y):(W=Y,Y=Ae,T=!0),Ae.rows!==Y.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:$=!0,scale:ce=!0}=W;$&&(Ae.center("column"),T||Y.center("column")),ce&&(Ae.scale("column"),T||Y.scale("column"));const je=Ae.standardDeviation("column",{unbiased:!0}),Ge=T?je:Y.standardDeviation("column",{unbiased:!0}),rt=Ae.transpose().mmul(Y);for(let it=0;it<rt.rows;it++)for(let $t=0;$t<rt.columns;$t++)rt.set(it,$t,rt.get(it,$t)*(1/(je[it]*Ge[$t]))*(1/(Ae.rows-1)));return rt}class Oi{constructor(Y,W={}){const{assumeSymmetric:T=!1}=W;if(!(Y=zt.checkMatrix(Y)).isSquare())throw new Error("Matrix is not a square matrix");if(Y.isEmpty())throw new Error("Matrix must be non-empty");let it,$t,$=Y.columns,ce=new pt($,$),je=new Float64Array($),Ge=new Float64Array($),rt=Y,R=!1;if(R=!!T||Y.isSymmetric(),R){for(it=0;it<$;it++)for($t=0;$t<$;$t++)ce.set(it,$t,rt.get(it,$t));(function Ir(Ae,Y,W,T){let $,ce,je,Ge,rt,it,$t,R;for(rt=0;rt<Ae;rt++)W[rt]=T.get(Ae-1,rt);for(Ge=Ae-1;Ge>0;Ge--){for(R=0,je=0,it=0;it<Ge;it++)R+=Math.abs(W[it]);if(0===R)for(Y[Ge]=W[Ge-1],rt=0;rt<Ge;rt++)W[rt]=T.get(Ge-1,rt),T.set(Ge,rt,0),T.set(rt,Ge,0);else{for(it=0;it<Ge;it++)W[it]/=R,je+=W[it]*W[it];for($=W[Ge-1],ce=Math.sqrt(je),$>0&&(ce=-ce),Y[Ge]=R*ce,je-=$*ce,W[Ge-1]=$-ce,rt=0;rt<Ge;rt++)Y[rt]=0;for(rt=0;rt<Ge;rt++){for($=W[rt],T.set(rt,Ge,$),ce=Y[rt]+T.get(rt,rt)*$,it=rt+1;it<=Ge-1;it++)ce+=T.get(it,rt)*W[it],Y[it]+=T.get(it,rt)*$;Y[rt]=ce}for($=0,rt=0;rt<Ge;rt++)Y[rt]/=je,$+=Y[rt]*W[rt];for($t=$/(je+je),rt=0;rt<Ge;rt++)Y[rt]-=$t*W[rt];for(rt=0;rt<Ge;rt++){for($=W[rt],ce=Y[rt],it=rt;it<=Ge-1;it++)T.set(it,rt,T.get(it,rt)-($*Y[it]+ce*W[it]));W[rt]=T.get(Ge-1,rt),T.set(Ge,rt,0)}}W[Ge]=je}for(Ge=0;Ge<Ae-1;Ge++){if(T.set(Ae-1,Ge,T.get(Ge,Ge)),T.set(Ge,Ge,1),je=W[Ge+1],0!==je){for(it=0;it<=Ge;it++)W[it]=T.get(it,Ge+1)/je;for(rt=0;rt<=Ge;rt++){for(ce=0,it=0;it<=Ge;it++)ce+=T.get(it,Ge+1)*T.get(it,rt);for(it=0;it<=Ge;it++)T.set(it,rt,T.get(it,rt)-ce*W[it])}}for(it=0;it<=Ge;it++)T.set(it,Ge+1,0)}for(rt=0;rt<Ae;rt++)W[rt]=T.get(Ae-1,rt),T.set(Ae-1,rt,0);T.set(Ae-1,Ae-1,1),Y[0]=0})($,Ge,je,ce),function De(Ae,Y,W,T){let $,ce,je,Ge,rt,it,$t,R,He,ze,Je,gt,an,Ke,qt,Sn,zn;for(je=1;je<Ae;je++)Y[je-1]=Y[je];Y[Ae-1]=0;let Wn=0,kr=0,$n=Number.EPSILON;for(it=0;it<Ae;it++){for(kr=Math.max(kr,Math.abs(W[it])+Math.abs(Y[it])),$t=it;$t<Ae&&!(Math.abs(Y[$t])<=$n*kr);)$t++;if($t>it){zn=0;do{for(zn+=1,$=W[it],R=(W[it+1]-$)/(2*Y[it]),He=gn(R,1),R<0&&(He=-He),W[it]=Y[it]/(R+He),W[it+1]=Y[it]*(R+He),ze=W[it+1],ce=$-W[it],je=it+2;je<Ae;je++)W[je]-=ce;for(Wn+=ce,R=W[$t],Je=1,gt=Je,an=Je,Ke=Y[it+1],qt=0,Sn=0,je=$t-1;je>=it;je--)for(an=gt,gt=Je,Sn=qt,$=Je*Y[je],ce=Je*R,He=gn(R,Y[je]),Y[je+1]=qt*He,qt=Y[je]/He,Je=R/He,R=Je*W[je]-qt*$,W[je+1]=ce+qt*(Je*$+qt*W[je]),rt=0;rt<Ae;rt++)ce=T.get(rt,je+1),T.set(rt,je+1,qt*T.get(rt,je)+Je*ce),T.set(rt,je,Je*T.get(rt,je)-qt*ce);R=-qt*Sn*an*Ke*Y[it]/ze,Y[it]=qt*R,W[it]=Je*R}while(Math.abs(Y[it])>$n*kr)}W[it]=W[it]+Wn,Y[it]=0}for(je=0;je<Ae-1;je++){for(rt=je,R=W[je],Ge=je+1;Ge<Ae;Ge++)W[Ge]<R&&(rt=Ge,R=W[Ge]);if(rt!==je)for(W[rt]=W[je],W[je]=R,Ge=0;Ge<Ae;Ge++)R=T.get(Ge,je),T.set(Ge,je,T.get(Ge,rt)),T.set(Ge,rt,R)}}($,Ge,je,ce)}else{let He=new pt($,$),ze=new Float64Array($);for($t=0;$t<$;$t++)for(it=0;it<$;it++)He.set(it,$t,rt.get(it,$t));(function wi(Ae,Y,W,T){let je,Ge,rt,it,$t,R,He,ce=Ae-1;for(R=1;R<=ce-1;R++){for(He=0,it=R;it<=ce;it++)He+=Math.abs(Y.get(it,R-1));if(0!==He){for(rt=0,it=ce;it>=R;it--)W[it]=Y.get(it,R-1)/He,rt+=W[it]*W[it];for(Ge=Math.sqrt(rt),W[R]>0&&(Ge=-Ge),rt-=W[R]*Ge,W[R]=W[R]-Ge,$t=R;$t<Ae;$t++){for(je=0,it=ce;it>=R;it--)je+=W[it]*Y.get(it,$t);for(je/=rt,it=R;it<=ce;it++)Y.set(it,$t,Y.get(it,$t)-je*W[it])}for(it=0;it<=ce;it++){for(je=0,$t=ce;$t>=R;$t--)je+=W[$t]*Y.get(it,$t);for(je/=rt,$t=R;$t<=ce;$t++)Y.set(it,$t,Y.get(it,$t)-je*W[$t])}W[R]=He*W[R],Y.set(R,R-1,He*Ge)}}for(it=0;it<Ae;it++)for($t=0;$t<Ae;$t++)T.set(it,$t,it===$t?1:0);for(R=ce-1;R>=1;R--)if(0!==Y.get(R,R-1)){for(it=R+1;it<=ce;it++)W[it]=Y.get(it,R-1);for($t=R;$t<=ce;$t++){for(Ge=0,it=R;it<=ce;it++)Ge+=W[it]*T.get(it,$t);for(Ge=Ge/W[R]/Y.get(R,R-1),it=R;it<=ce;it++)T.set(it,$t,T.get(it,$t)+Ge*W[it])}}})($,He,ze,ce),function xo(Ae,Y,W,T,$){let Ke,qt,Sn,zn,Wn,kr,$n,Er,Xr,Di,Kt,Gn,hr,Un,Gr,ce=Ae-1,Ge=Ae-1,rt=Number.EPSILON,it=0,$t=0,R=0,He=0,ze=0,Je=0,gt=0,an=0;for(Ke=0;Ke<Ae;Ke++)for((Ke<0||Ke>Ge)&&(W[Ke]=$.get(Ke,Ke),Y[Ke]=0),qt=Math.max(Ke-1,0);qt<Ae;qt++)$t+=Math.abs($.get(Ke,qt));for(;ce>=0;){for(zn=ce;zn>0&&(Je=Math.abs($.get(zn-1,zn-1))+Math.abs($.get(zn,zn)),0===Je&&(Je=$t),!(Math.abs($.get(zn,zn-1))<rt*Je));)zn--;if(zn===ce)$.set(ce,ce,$.get(ce,ce)+it),W[ce]=$.get(ce,ce),Y[ce]=0,ce--,an=0;else if(zn===ce-1){if($n=$.get(ce,ce-1)*$.get(ce-1,ce),R=($.get(ce-1,ce-1)-$.get(ce,ce))/2,He=R*R+$n,gt=Math.sqrt(Math.abs(He)),$.set(ce,ce,$.get(ce,ce)+it),$.set(ce-1,ce-1,$.get(ce-1,ce-1)+it),Er=$.get(ce,ce),He>=0){for(gt=R>=0?R+gt:R-gt,W[ce-1]=Er+gt,W[ce]=W[ce-1],0!==gt&&(W[ce]=Er-$n/gt),Y[ce-1]=0,Y[ce]=0,Er=$.get(ce,ce-1),Je=Math.abs(Er)+Math.abs(gt),R=Er/Je,He=gt/Je,ze=Math.sqrt(R*R+He*He),R/=ze,He/=ze,qt=ce-1;qt<Ae;qt++)gt=$.get(ce-1,qt),$.set(ce-1,qt,He*gt+R*$.get(ce,qt)),$.set(ce,qt,He*$.get(ce,qt)-R*gt);for(Ke=0;Ke<=ce;Ke++)gt=$.get(Ke,ce-1),$.set(Ke,ce-1,He*gt+R*$.get(Ke,ce)),$.set(Ke,ce,He*$.get(Ke,ce)-R*gt);for(Ke=0;Ke<=Ge;Ke++)gt=T.get(Ke,ce-1),T.set(Ke,ce-1,He*gt+R*T.get(Ke,ce)),T.set(Ke,ce,He*T.get(Ke,ce)-R*gt)}else W[ce-1]=Er+R,W[ce]=Er+R,Y[ce-1]=gt,Y[ce]=-gt;ce-=2,an=0}else{if(Er=$.get(ce,ce),Xr=0,$n=0,zn<ce&&(Xr=$.get(ce-1,ce-1),$n=$.get(ce,ce-1)*$.get(ce-1,ce)),10===an){for(it+=Er,Ke=0;Ke<=ce;Ke++)$.set(Ke,Ke,$.get(Ke,Ke)-Er);Je=Math.abs($.get(ce,ce-1))+Math.abs($.get(ce-1,ce-2)),Er=Xr=.75*Je,$n=-.4375*Je*Je}if(30===an&&(Je=(Xr-Er)/2,Je=Je*Je+$n,Je>0)){for(Je=Math.sqrt(Je),Xr<Er&&(Je=-Je),Je=Er-$n/((Xr-Er)/2+Je),Ke=0;Ke<=ce;Ke++)$.set(Ke,Ke,$.get(Ke,Ke)-Je);it+=Je,Er=Xr=$n=.964}for(an+=1,Wn=ce-2;Wn>=zn&&(gt=$.get(Wn,Wn),ze=Er-gt,Je=Xr-gt,R=(ze*Je-$n)/$.get(Wn+1,Wn)+$.get(Wn,Wn+1),He=$.get(Wn+1,Wn+1)-gt-ze-Je,ze=$.get(Wn+2,Wn+1),Je=Math.abs(R)+Math.abs(He)+Math.abs(ze),R/=Je,He/=Je,ze/=Je,!(Wn===zn||Math.abs($.get(Wn,Wn-1))*(Math.abs(He)+Math.abs(ze))<rt*(Math.abs(R)*(Math.abs($.get(Wn-1,Wn-1))+Math.abs(gt)+Math.abs($.get(Wn+1,Wn+1))))));)Wn--;for(Ke=Wn+2;Ke<=ce;Ke++)$.set(Ke,Ke-2,0),Ke>Wn+2&&$.set(Ke,Ke-3,0);for(Sn=Wn;Sn<=ce-1&&(Un=Sn!==ce-1,Sn!==Wn&&(R=$.get(Sn,Sn-1),He=$.get(Sn+1,Sn-1),ze=Un?$.get(Sn+2,Sn-1):0,Er=Math.abs(R)+Math.abs(He)+Math.abs(ze),0!==Er&&(R/=Er,He/=Er,ze/=Er)),0!==Er);Sn++)if(Je=Math.sqrt(R*R+He*He+ze*ze),R<0&&(Je=-Je),0!==Je){for(Sn!==Wn?$.set(Sn,Sn-1,-Je*Er):zn!==Wn&&$.set(Sn,Sn-1,-$.get(Sn,Sn-1)),R+=Je,Er=R/Je,Xr=He/Je,gt=ze/Je,He/=R,ze/=R,qt=Sn;qt<Ae;qt++)R=$.get(Sn,qt)+He*$.get(Sn+1,qt),Un&&(R+=ze*$.get(Sn+2,qt),$.set(Sn+2,qt,$.get(Sn+2,qt)-R*gt)),$.set(Sn,qt,$.get(Sn,qt)-R*Er),$.set(Sn+1,qt,$.get(Sn+1,qt)-R*Xr);for(Ke=0;Ke<=Math.min(ce,Sn+3);Ke++)R=Er*$.get(Ke,Sn)+Xr*$.get(Ke,Sn+1),Un&&(R+=gt*$.get(Ke,Sn+2),$.set(Ke,Sn+2,$.get(Ke,Sn+2)-R*ze)),$.set(Ke,Sn,$.get(Ke,Sn)-R),$.set(Ke,Sn+1,$.get(Ke,Sn+1)-R*He);for(Ke=0;Ke<=Ge;Ke++)R=Er*T.get(Ke,Sn)+Xr*T.get(Ke,Sn+1),Un&&(R+=gt*T.get(Ke,Sn+2),T.set(Ke,Sn+2,T.get(Ke,Sn+2)-R*ze)),T.set(Ke,Sn,T.get(Ke,Sn)-R),T.set(Ke,Sn+1,T.get(Ke,Sn+1)-R*He)}}}if(0!==$t){for(ce=Ae-1;ce>=0;ce--)if(R=W[ce],He=Y[ce],0===He)for(zn=ce,$.set(ce,ce,1),Ke=ce-1;Ke>=0;Ke--){for($n=$.get(Ke,Ke)-R,ze=0,qt=zn;qt<=ce;qt++)ze+=$.get(Ke,qt)*$.get(qt,ce);if(Y[Ke]<0)gt=$n,Je=ze;else if(zn=Ke,0===Y[Ke]?$.set(Ke,ce,0!==$n?-ze/$n:-ze/(rt*$t)):(Er=$.get(Ke,Ke+1),Xr=$.get(Ke+1,Ke),He=(W[Ke]-R)*(W[Ke]-R)+Y[Ke]*Y[Ke],kr=(Er*Je-gt*ze)/He,$.set(Ke,ce,kr),$.set(Ke+1,ce,Math.abs(Er)>Math.abs(gt)?(-ze-$n*kr)/Er:(-Je-Xr*kr)/gt)),kr=Math.abs($.get(Ke,ce)),rt*kr*kr>1)for(qt=Ke;qt<=ce;qt++)$.set(qt,ce,$.get(qt,ce)/kr)}else if(He<0)for(zn=ce-1,Math.abs($.get(ce,ce-1))>Math.abs($.get(ce-1,ce))?($.set(ce-1,ce-1,He/$.get(ce,ce-1)),$.set(ce-1,ce,-($.get(ce,ce)-R)/$.get(ce,ce-1))):(Gr=mr(0,-$.get(ce-1,ce),$.get(ce-1,ce-1)-R,He),$.set(ce-1,ce-1,Gr[0]),$.set(ce-1,ce,Gr[1])),$.set(ce,ce-1,0),$.set(ce,ce,1),Ke=ce-2;Ke>=0;Ke--){for(Di=0,Kt=0,qt=zn;qt<=ce;qt++)Di+=$.get(Ke,qt)*$.get(qt,ce-1),Kt+=$.get(Ke,qt)*$.get(qt,ce);if($n=$.get(Ke,Ke)-R,Y[Ke]<0)gt=$n,ze=Di,Je=Kt;else if(zn=Ke,0===Y[Ke]?(Gr=mr(-Di,-Kt,$n,He),$.set(Ke,ce-1,Gr[0]),$.set(Ke,ce,Gr[1])):(Er=$.get(Ke,Ke+1),Xr=$.get(Ke+1,Ke),Gn=(W[Ke]-R)*(W[Ke]-R)+Y[Ke]*Y[Ke]-He*He,hr=2*(W[Ke]-R)*He,0===Gn&&0===hr&&(Gn=rt*$t*(Math.abs($n)+Math.abs(He)+Math.abs(Er)+Math.abs(Xr)+Math.abs(gt))),Gr=mr(Er*ze-gt*Di+He*Kt,Er*Je-gt*Kt-He*Di,Gn,hr),$.set(Ke,ce-1,Gr[0]),$.set(Ke,ce,Gr[1]),Math.abs(Er)>Math.abs(gt)+Math.abs(He)?($.set(Ke+1,ce-1,(-Di-$n*$.get(Ke,ce-1)+He*$.get(Ke,ce))/Er),$.set(Ke+1,ce,(-Kt-$n*$.get(Ke,ce)-He*$.get(Ke,ce-1))/Er)):(Gr=mr(-ze-Xr*$.get(Ke,ce-1),-Je-Xr*$.get(Ke,ce),gt,He),$.set(Ke+1,ce-1,Gr[0]),$.set(Ke+1,ce,Gr[1]))),kr=Math.max(Math.abs($.get(Ke,ce-1)),Math.abs($.get(Ke,ce))),rt*kr*kr>1)for(qt=Ke;qt<=ce;qt++)$.set(qt,ce-1,$.get(qt,ce-1)/kr),$.set(qt,ce,$.get(qt,ce)/kr)}for(Ke=0;Ke<Ae;Ke++)if(Ke<0||Ke>Ge)for(qt=Ke;qt<Ae;qt++)T.set(Ke,qt,$.get(Ke,qt));for(qt=Ae-1;qt>=0;qt--)for(Ke=0;Ke<=Ge;Ke++){for(gt=0,Sn=0;Sn<=Math.min(qt,Ge);Sn++)gt+=T.get(Ke,Sn)*$.get(Sn,qt);T.set(Ke,qt,gt)}}}($,Ge,je,ce,He)}this.n=$,this.e=Ge,this.d=je,this.V=ce}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let ce,je,Y=this.n,W=this.e,T=this.d,$=new pt(Y,Y);for(ce=0;ce<Y;ce++){for(je=0;je<Y;je++)$.set(ce,je,0);$.set(ce,ce,T[ce]),W[ce]>0?$.set(ce,ce+1,W[ce]):W[ce]<0&&$.set(ce,ce-1,W[ce])}return $}}function mr(Ae,Y,W,T){let $,ce;return Math.abs(W)>Math.abs(T)?($=T/W,ce=W+$*T,[(Ae+$*Y)/ce,(Y-$*Ae)/ce]):($=W/T,ce=T+$*W,[($*Ae+Y)/ce,($*Y-Ae)/ce])}class Wr{constructor(Y){if(!(Y=zt.checkMatrix(Y)).isSymmetric())throw new Error("Matrix is not symmetric");let je,Ge,rt,W=Y,T=W.rows,$=new pt(T,T),ce=!0;for(Ge=0;Ge<T;Ge++){let it=0;for(rt=0;rt<Ge;rt++){let $t=0;for(je=0;je<rt;je++)$t+=$.get(rt,je)*$.get(Ge,je);$t=(W.get(Ge,rt)-$t)/$.get(rt,rt),$.set(Ge,rt,$t),it+=$t*$t}for(it=W.get(Ge,Ge)-it,ce&=it>0,$.set(Ge,Ge,Math.sqrt(Math.max(it,0))),rt=Ge+1;rt<T;rt++)$.set(Ge,rt,0)}this.L=$,this.positiveDefinite=Boolean(ce)}isPositiveDefinite(){return this.positiveDefinite}solve(Y){Y=zt.checkMatrix(Y);let W=this.L,T=W.rows;if(Y.rows!==T)throw new Error("Matrix dimensions do not match");if(!1===this.isPositiveDefinite())throw new Error("Matrix is not positive definite");let je,Ge,rt,$=Y.columns,ce=Y.clone();for(rt=0;rt<T;rt++)for(Ge=0;Ge<$;Ge++){for(je=0;je<rt;je++)ce.set(rt,Ge,ce.get(rt,Ge)-ce.get(je,Ge)*W.get(rt,je));ce.set(rt,Ge,ce.get(rt,Ge)/W.get(rt,rt))}for(rt=T-1;rt>=0;rt--)for(Ge=0;Ge<$;Ge++){for(je=rt+1;je<T;je++)ce.set(rt,Ge,ce.get(rt,Ge)-ce.get(je,Ge)*W.get(je,rt));ce.set(rt,Ge,ce.get(rt,Ge)/W.get(rt,rt))}return ce}get lowerTriangularMatrix(){return this.L}}class Vr{constructor(Y,W={}){Y=zt.checkMatrix(Y);let{Y:T}=W;const{scaleScores:$=!1,maxIterations:ce=1e3,terminationCriteria:je=1e-10}=W;let Ge;if(T){if(T=Q(T)&&"number"==typeof T[0]?pt.columnVector(T):zt.checkMatrix(T),T.rows!==Y.rows)throw new Error("Y should have the same number of rows as X");Ge=T.getColumnVector(0)}else Ge=Y.getColumnVector(0);let it,$t,R,He,rt=1;for(let ze=0;ze<ce&&rt>je;ze++)R=Y.transpose().mmul(Ge).div(Ge.transpose().mmul(Ge).get(0,0)),R=R.div(R.norm()),it=Y.mmul(R).div(R.transpose().mmul(R).get(0,0)),ze>0&&(rt=it.clone().sub(He).pow(2).sum()),He=it.clone(),T?($t=T.transpose().mmul(it).div(it.transpose().mmul(it).get(0,0)),$t=$t.div($t.norm()),Ge=T.mmul($t).div($t.transpose().mmul($t).get(0,0))):Ge=it;if(T){let ze=Y.transpose().mmul(it).div(it.transpose().mmul(it).get(0,0));ze=ze.div(ze.norm());let Je=Y.clone().sub(it.clone().mmul(ze.transpose())),gt=Ge.transpose().mmul(it).div(it.transpose().mmul(it).get(0,0)),an=T.clone().sub(it.clone().mulS(gt.get(0,0)).mmul($t.transpose()));this.t=it,this.p=ze.transpose(),this.w=R.transpose(),this.q=$t,this.u=Ge,this.s=it.transpose().mmul(it),this.xResidual=Je,this.yResidual=an,this.betas=gt}else this.w=R.transpose(),this.s=it.transpose().mmul(it).sqrt(),this.t=$?it.clone().div(this.s.get(0,0)):it,this.xResidual=Y.sub(it.mmul(R.transpose()))}}},2366:function(Qt){Qt.exports=function(){"use strict";var V=function(xe){return xe instanceof Uint8Array||xe instanceof Uint16Array||xe instanceof Uint32Array||xe instanceof Int8Array||xe instanceof Int16Array||xe instanceof Int32Array||xe instanceof Float32Array||xe instanceof Float64Array||xe instanceof Uint8ClampedArray},G=function(xe,ot){for(var Dt=Object.keys(ot),hn=0;hn<Dt.length;++hn)xe[Dt[hn]]=ot[Dt[hn]];return xe},B="\n";function Q(xe){return typeof atob<"u"?atob(xe):"base64:"+xe}function j(xe){var ot=new Error("(regl) "+xe);throw console.error(ot),ot}function k(xe,ot){xe||j(ot)}function F(xe){return xe?": "+xe:""}function E(xe,ot){switch(ot){case"number":return"number"==typeof xe;case"object":return"object"==typeof xe;case"string":return"string"==typeof xe;case"boolean":return"boolean"==typeof xe;case"function":return"function"==typeof xe;case"undefined":return typeof xe>"u";case"symbol":return"symbol"==typeof xe}}function y(xe,ot,Dt){ot.indexOf(xe)<0&&j("invalid value"+F(Dt)+". must be one of: "+ot)}var A=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function S(xe,ot){for(xe+="";xe.length<ot;)xe=" "+xe;return xe}function P(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function U(xe,ot){this.number=xe,this.line=ot,this.errors=[]}function z(xe,ot,Dt){this.file=xe,this.line=ot,this.message=Dt}function ie(){var xe=new Error,ot=(xe.stack||xe).toString(),Dt=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(ot);if(Dt)return Dt[1];var hn=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(ot);return hn?hn[1]:"unknown"}function ne(){var xe=new Error,ot=(xe.stack||xe).toString(),Dt=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(ot);if(Dt)return Dt[1];var hn=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(ot);return hn?hn[1]:"unknown"}function q(xe,ot){var Dt=xe.split("\n"),hn=1,Dn=0,pn={unknown:new P,0:new P};pn.unknown.name=pn[0].name=ot||ie(),pn.unknown.lines.push(new U(0,""));for(var wn=0;wn<Dt.length;++wn){var Hn=Dt[wn],Xn=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Hn);if(Xn)switch(Xn[1]){case"line":var Jn=/(\d+)(\s+\d+)?/.exec(Xn[2]);Jn&&(hn=0|Jn[1],Jn[2]&&((Dn=0|Jn[2])in pn||(pn[Dn]=new P)));break;case"define":var Yn=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Xn[2]);Yn&&(pn[Dn].name=Yn[1]?Q(Yn[2]):Yn[2])}pn[Dn].lines.push(new U(hn++,Hn))}return Object.keys(pn).forEach(function(sr){var v=pn[sr];v.lines.forEach(function(C){v.index[C.number]=C})}),pn}function re(xe){xe._commandRef=ie()}function ve(xe,ot){var Dt=ne();j(xe+" in command "+(ot||ie())+("unknown"===Dt?"":" called from "+Dt))}function me(xe,ot,Dt,hn){E(xe,ot)||ve("invalid parameter type"+F(Dt)+". expected "+ot+", got "+typeof xe,hn||ie())}var be=33071,Te={};function tt(xe,ot){return 32820===xe||32819===xe||33635===xe?2:34042===xe?4:Te[xe]*ot}function Mt(xe){return!(xe&xe-1||!xe)}Te[5120]=Te[5121]=1,Te[5122]=Te[5123]=Te[36193]=Te[33635]=Te[32819]=Te[32820]=2,Te[5124]=Te[5125]=Te[5126]=Te[34042]=4;var Le=G(k,{optional:function Ce(xe){xe()},raise:j,commandRaise:ve,command:function we(xe,ot,Dt){xe||ve(ot,Dt||ie())},parameter:function I(xe,ot,Dt){xe in ot||j("unknown parameter ("+xe+")"+F(Dt)+". possible values: "+Object.keys(ot).join())},commandParameter:function _e(xe,ot,Dt,hn){xe in ot||ve("unknown parameter ("+xe+")"+F(Dt)+". possible values: "+Object.keys(ot).join(),hn||ie())},constructor:function M(xe){Object.keys(xe).forEach(function(ot){A.indexOf(ot)<0&&j('invalid regl constructor argument "'+ot+'". must be one of '+A)})},type:function b(xe,ot,Dt){E(xe,ot)||j("invalid parameter type"+F(Dt)+". expected "+ot+", got "+typeof xe)},commandType:me,isTypedArray:function x(xe,ot){V(xe)||j("invalid parameter type"+F(ot)+". must be a typed array")},nni:function w(xe,ot){xe>=0&&(0|xe)===xe||j("invalid parameter type, ("+xe+")"+F(ot)+". must be a nonnegative integer")},oneOf:y,shaderError:function X(xe,ot,Dt,hn,Dn){if(!xe.getShaderParameter(ot,xe.COMPILE_STATUS)){var pn=xe.getShaderInfoLog(ot),wn=hn===xe.FRAGMENT_SHADER?"fragment":"vertex";me(Dt,"string",wn+" shader source must be a string",Dn);var Hn=q(Dt,Dn),Xn=function K(xe){var ot=[];return xe.split("\n").forEach(function(Dt){if(!(Dt.length<5)){var hn=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Dt);hn?ot.push(new z(0|hn[1],0|hn[2],hn[3].trim())):Dt.length>0&&ot.push(new z("unknown",0,Dt))}}),ot}(pn);(function ee(xe,ot){ot.forEach(function(Dt){var hn=xe[Dt.file];if(hn){var Dn=hn.index[Dt.line];if(Dn)return Dn.errors.push(Dt),void(hn.hasErrors=!0)}xe.unknown.hasErrors=!0,xe.unknown.lines[0].errors.push(Dt)})})(Hn,Xn),Object.keys(Hn).forEach(function(Jn){var Yn=Hn[Jn];if(Yn.hasErrors){var sr=[""],v=[""];C("file number "+Jn+": "+Yn.name+"\n","color:red;text-decoration:underline;font-weight:bold"),Yn.lines.forEach(function(H){if(H.errors.length>0){C(S(H.number,4)+"|  ","background-color:yellow; font-weight:bold"),C(H.line+B,"color:red; background-color:yellow; font-weight:bold");var J=0;H.errors.forEach(function(se){var he=se.message,ye=/^\s*'(.*)'\s*:\s*(.*)$/.exec(he);if(ye){var Se=ye[1];"assign"===(he=ye[2],Se)&&(Se="="),J=Math.max(H.line.indexOf(Se,J),0)}else J=0;C(S("| ",6)),C(S("^^^",J+3)+B,"font-weight:bold"),C(S("| ",6)),C(he+B,"font-weight:bold")}),C(S("| ",6)+B)}else C(S(H.number,4)+"|  "),C(H.line+B,"color:red")}),typeof document<"u"&&!window.chrome?(v[0]=sr.join("%c"),console.log.apply(console,v)):console.log(sr.join(""))}function C(H,J){sr.push(H),v.push(J||"")}}),k.raise("Error compiling "+wn+" shader, "+Hn[0].name)}},linkError:function ae(xe,ot,Dt,hn,Dn){if(!xe.getProgramParameter(ot,xe.LINK_STATUS)){var pn=xe.getProgramInfoLog(ot),wn=q(Dt,Dn),Xn='Error linking program with vertex shader, "'+q(hn,Dn)[0].name+'", and fragment shader "'+wn[0].name+'"';typeof document<"u"?console.log("%c"+Xn+"\n%c"+pn,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Xn+B+pn),k.raise(Xn)}},callSite:ne,saveCommandRef:re,saveDrawInfo:function oe(xe,ot,Dt,hn){function Dn(Xn){return Xn?hn.id(Xn):0}function pn(Xn,Jn){Object.keys(Jn).forEach(function(Yn){Xn[hn.id(Yn)]=!0})}re(xe),xe._fragId=Dn(xe.static.frag),xe._vertId=Dn(xe.static.vert);var wn=xe._uniformSet={};pn(wn,ot.static),pn(wn,ot.dynamic);var Hn=xe._attributeSet={};pn(Hn,Dt.static),pn(Hn,Dt.dynamic),xe._hasCount="count"in xe.static||"count"in xe.dynamic||"elements"in xe.static||"elements"in xe.dynamic},framebufferFormat:function fe(xe,ot,Dt){xe.texture?y(xe.texture._texture.internalformat,ot,"unsupported texture format for attachment"):y(xe.renderbuffer._renderbuffer.format,Dt,"unsupported renderbuffer format for attachment")},guessCommand:ie,texture2D:function Wt(xe,ot,Dt){var hn,Dn=ot.width,pn=ot.height,wn=ot.channels;k(Dn>0&&Dn<=Dt.maxTextureSize&&pn>0&&pn<=Dt.maxTextureSize,"invalid texture shape"),(xe.wrapS!==be||xe.wrapT!==be)&&k(Mt(Dn)&&Mt(pn),"incompatible wrap mode for texture, both width and height must be power of 2"),1===ot.mipmask?1!==Dn&&1!==pn&&k(9984!==xe.minFilter&&9986!==xe.minFilter&&9985!==xe.minFilter&&9987!==xe.minFilter,"min filter requires mipmap"):(k(Mt(Dn)&&Mt(pn),"texture must be a square power of 2 to support mipmapping"),k(ot.mipmask===(Dn<<1)-1,"missing or incomplete mipmap data")),5126===ot.type&&(Dt.extensions.indexOf("oes_texture_float_linear")<0&&k(9728===xe.minFilter&&9728===xe.magFilter,"filter not supported, must enable oes_texture_float_linear"),k(!xe.genMipmaps,"mipmap generation not supported with float textures"));var Hn=ot.images;for(hn=0;hn<16;++hn)if(Hn[hn]){var Xn=Dn>>hn,Jn=pn>>hn;k(ot.mipmask&1<<hn,"missing mipmap data");var Yn=Hn[hn];if(k(Yn.width===Xn&&Yn.height===Jn,"invalid shape for mip images"),k(Yn.format===ot.format&&Yn.internalformat===ot.internalformat&&Yn.type===ot.type,"incompatible type for mip image"),!Yn.compressed&&Yn.data){var sr=Math.ceil(tt(Yn.type,wn)*Xn/Yn.unpackAlignment)*Yn.unpackAlignment;k(Yn.data.byteLength===sr*Jn,"invalid data for image, buffer size is inconsistent with image format")}}else xe.genMipmaps||k(0==(ot.mipmask&1<<hn),"extra mipmap data");ot.compressed&&k(!xe.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function un(xe,ot,Dt,hn){var Dn=xe.width,pn=xe.height,wn=xe.channels;k(Dn>0&&Dn<=hn.maxTextureSize&&pn>0&&pn<=hn.maxTextureSize,"invalid texture shape"),k(Dn===pn,"cube map must be square"),k(ot.wrapS===be&&ot.wrapT===be,"wrap mode not supported by cube map");for(var Hn=0;Hn<Dt.length;++Hn){var Xn=Dt[Hn];k(Xn.width===Dn&&Xn.height===pn,"inconsistent cube map face shape"),ot.genMipmaps&&(k(!Xn.compressed,"can not generate mipmap for compressed textures"),k(1===Xn.mipmask,"can not specify mipmaps and generate mipmaps"));for(var Jn=Xn.images,Yn=0;Yn<16;++Yn){var sr=Jn[Yn];if(sr){var v=Dn>>Yn,C=pn>>Yn;k(Xn.mipmask&1<<Yn,"missing mipmap data"),k(sr.width===v&&sr.height===C,"invalid shape for mip images"),k(sr.format===xe.format&&sr.internalformat===xe.internalformat&&sr.type===xe.type,"incompatible type for mip image"),sr.compressed||sr.data&&k(sr.data.byteLength===v*C*Math.max(tt(sr.type,wn),sr.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}}),zt=0;function kn(xe,ot){this.id=zt++,this.type=xe,this.data=ot}function ir(xe){return xe.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function cr(xe){if(0===xe.length)return[];var ot=xe.charAt(0),Dt=xe.charAt(xe.length-1);if(xe.length>1&&ot===Dt&&('"'===ot||"'"===ot))return['"'+ir(xe.substr(1,xe.length-2))+'"'];var hn=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(xe);if(hn)return cr(xe.substr(0,hn.index)).concat(cr(hn[1])).concat(cr(xe.substr(hn.index+hn[0].length)));var Dn=xe.split(".");if(1===Dn.length)return['"'+ir(xe)+'"'];for(var pn=[],wn=0;wn<Dn.length;++wn)pn=pn.concat(cr(Dn[wn]));return pn}function Bn(xe){return"["+cr(xe).join("][")+"]"}var er={DynamicVariable:kn,define:function xr(xe,ot){return new kn(xe,Bn(ot+""))},isDynamic:function jn(xe){return"function"==typeof xe&&!xe._reglType||xe instanceof kn},unbox:function Rn(xe,ot){return"function"==typeof xe?new kn(0,xe):"number"==typeof xe||"boolean"==typeof xe?new kn(5,xe):Array.isArray(xe)?new kn(6,xe.map((Dt,hn)=>Rn(Dt,ot+"["+hn+"]"))):xe instanceof kn?xe:void Le(!1,"invalid option type in uniform "+ot)},accessor:Bn},Mr={next:"function"==typeof requestAnimationFrame?function(xe){return requestAnimationFrame(xe)}:function(xe){return setTimeout(xe,16)},cancel:"function"==typeof cancelAnimationFrame?function(xe){return cancelAnimationFrame(xe)}:clearTimeout},yr=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function xo(xe){return"string"==typeof xe?xe.split():(Le(Array.isArray(xe),"invalid extension array"),xe)}function mr(xe){return"string"==typeof xe?(Le(typeof document<"u","not supported outside of DOM"),document.querySelector(xe)):xe}function Wr(xe){var Dt,hn,Dn,pn,ot=xe||{},wn={},Hn=[],Xn=[],Jn=typeof window>"u"?1:window.devicePixelRatio,Yn=!1,sr=function(H){H&&Le.raise(H)},v=function(){};if("string"==typeof ot?(Le(typeof document<"u","selector queries only supported in DOM enviroments"),Dt=document.querySelector(ot),Le(Dt,"invalid query string for element")):"object"==typeof ot?function De(xe){return"string"==typeof xe.nodeName&&"function"==typeof xe.appendChild&&"function"==typeof xe.getBoundingClientRect}(ot)?Dt=ot:function wi(xe){return"function"==typeof xe.drawArrays||"function"==typeof xe.drawElements}(ot)?Dn=(pn=ot).canvas:(Le.constructor(ot),"gl"in ot?pn=ot.gl:"canvas"in ot?Dn=mr(ot.canvas):"container"in ot&&(hn=mr(ot.container)),"attributes"in ot&&Le.type(wn=ot.attributes,"object","invalid context attributes"),"extensions"in ot&&(Hn=xo(ot.extensions)),"optionalExtensions"in ot&&(Xn=xo(ot.optionalExtensions)),"onDone"in ot&&(Le.type(ot.onDone,"function","invalid or missing onDone callback"),sr=ot.onDone),"profile"in ot&&(Yn=!!ot.profile),"pixelRatio"in ot&&Le((Jn=+ot.pixelRatio)>0,"invalid pixel ratio")):Le.raise("invalid arguments to regl"),Dt&&("canvas"===Dt.nodeName.toLowerCase()?Dn=Dt:hn=Dt),!pn){if(!Dn){Le(typeof document<"u","must manually specify webgl context outside of DOM environments");var C=function Oi(xe,ot,Dt){var pn,hn=document.createElement("canvas");function Dn(){var Hn=window.innerWidth,Xn=window.innerHeight;if(xe!==document.body){var Jn=xe.getBoundingClientRect();Hn=Jn.right-Jn.left,Xn=Jn.bottom-Jn.top}hn.width=Dt*Hn,hn.height=Dt*Xn,G(hn.style,{width:Hn+"px",height:Xn+"px"})}return G(hn.style,{border:0,margin:0,padding:0,top:0,left:0}),xe.appendChild(hn),xe===document.body&&(hn.style.position="absolute",G(xe.style,{margin:0,padding:0})),xe!==document.body&&"function"==typeof ResizeObserver?(pn=new ResizeObserver(function(){setTimeout(Dn)})).observe(xe):window.addEventListener("resize",Dn,!1),Dn(),{canvas:hn,onDestroy:function wn(){pn?pn.disconnect():window.removeEventListener("resize",Dn),xe.removeChild(hn)}}}(hn||document.body,0,Jn);if(!C)return null;Dn=C.canvas,v=C.onDestroy}void 0===wn.premultipliedAlpha&&(wn.premultipliedAlpha=!0),pn=function Ir(xe,ot){function Dt(hn){try{return xe.getContext(hn,ot)}catch{return null}}return Dt("webgl")||Dt("experimental-webgl")||Dt("webgl-experimental")}(Dn,wn)}return pn?{gl:pn,canvas:Dn,container:hn,extensions:Hn,optionalExtensions:Xn,pixelRatio:Jn,profile:Yn,onDone:sr,onDestroy:v}:(v(),sr("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Ae(xe,ot){for(var Dt=Array(xe),hn=0;hn<xe;++hn)Dt[hn]=ot(hn);return Dt}function it(xe){var ot,Dt;return ot=(xe>65535)<<4,ot|=Dt=((xe>>>=ot)>255)<<3,ot|=Dt=((xe>>>=Dt)>15)<<2,(ot|=Dt=((xe>>>=Dt)>3)<<1)|(xe>>>=Dt)>>1}function $t(){var xe=Ae(8,function(){return[]});function ot(pn){var wn=function rt(xe){for(var ot=16;ot<=1<<28;ot*=16)if(xe<=ot)return ot;return 0}(pn),Hn=xe[it(wn)>>2];return Hn.length>0?Hn.pop():new ArrayBuffer(wn)}function Dt(pn){xe[it(pn.byteLength)>>2].push(pn)}return{alloc:ot,free:Dt,allocType:function hn(pn,wn){var Hn=null;switch(pn){case 5120:Hn=new Int8Array(ot(wn),0,wn);break;case 5121:Hn=new Uint8Array(ot(wn),0,wn);break;case 5122:Hn=new Int16Array(ot(2*wn),0,wn);break;case 5123:Hn=new Uint16Array(ot(2*wn),0,wn);break;case 5124:Hn=new Int32Array(ot(4*wn),0,wn);break;case 5125:Hn=new Uint32Array(ot(4*wn),0,wn);break;case 5126:Hn=new Float32Array(ot(4*wn),0,wn);break;default:return null}return Hn.length!==wn?Hn.subarray(0,wn):Hn},freeType:function Dn(pn){Dt(pn.buffer)}}}var R=$t();R.zero=$t();var Dr=6408;function Ea(xe){return!!xe&&"object"==typeof xe&&Array.isArray(xe.shape)&&Array.isArray(xe.stride)&&"number"==typeof xe.offset&&xe.shape.length===xe.stride.length&&(Array.isArray(xe.data)||V(xe.data))}var _a=function(xe){return Object.keys(xe).map(function(ot){return xe[ot]})},Au={shape:function Rs(xe){for(var ot=[],Dt=xe;Dt.length;Dt=Dt[0])ot.push(Dt.length);return ot},flatten:function Gc(xe,ot,Dt,hn){var Dn=1;if(ot.length)for(var pn=0;pn<ot.length;++pn)Dn*=ot[pn];else Dn=0;var wn=hn||R.allocType(Dt,Dn);switch(ot.length){case 0:break;case 1:!function Du(xe,ot,Dt){for(var hn=0;hn<ot;++hn)Dt[hn]=xe[hn]}(xe,ot[0],wn);break;case 2:!function pa(xe,ot,Dt,hn){for(var Dn=0,pn=0;pn<ot;++pn)for(var wn=xe[pn],Hn=0;Hn<Dt;++Hn)hn[Dn++]=wn[Hn]}(xe,ot[0],ot[1],wn);break;case 3:Kl(xe,ot[0],ot[1],ot[2],wn,0);break;default:Xs(xe,ot,0,wn,0)}return wn}};function Kl(xe,ot,Dt,hn,Dn,pn){for(var wn=pn,Hn=0;Hn<ot;++Hn)for(var Xn=xe[Hn],Jn=0;Jn<Dt;++Jn)for(var Yn=Xn[Jn],sr=0;sr<hn;++sr)Dn[wn++]=Yn[sr]}function Xs(xe,ot,Dt,hn,Dn){for(var pn=1,wn=Dt+1;wn<ot.length;++wn)pn*=ot[wn];var Hn=ot[Dt];if(ot.length-Dt==4){var Xn=ot[Dt+1],Jn=ot[Dt+2],Yn=ot[Dt+3];for(wn=0;wn<Hn;++wn)Kl(xe[wn],Xn,Jn,Yn,hn,Dn),Dn+=pn}else for(wn=0;wn<Hn;++wn)Xs(xe[wn],ot,Dt+1,hn,Dn),Dn+=pn}var Uc={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ii={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Zl={dynamic:35048,stream:35040,static:35044},ci=Au.flatten,Vc=Au.shape,bs=[];function Iu(xe){return 0|Uc[Object.prototype.toString.call(xe)]}function Ou(xe,ot){for(var Dt=0;Dt<ot.length;++Dt)xe[Dt]=ot[Dt]}function Pu(xe,ot,Dt,hn,Dn,pn,wn){for(var Hn=0,Xn=0;Xn<Dt;++Xn)for(var Jn=0;Jn<hn;++Jn)xe[Hn++]=ot[Dn*Xn+pn*Jn+wn]}bs[5120]=1,bs[5122]=2,bs[5124]=4,bs[5121]=1,bs[5123]=2,bs[5125]=4,bs[5126]=4;var ws={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ks=5121,Gi=5123,du=5125;var pu=new Float32Array(1),tc=new Uint32Array(pu.buffer);function Zs(xe){for(var ot=R.allocType(5123,xe.length),Dt=0;Dt<xe.length;++Dt)if(isNaN(xe[Dt]))ot[Dt]=65535;else if(xe[Dt]===1/0)ot[Dt]=31744;else if(xe[Dt]===-1/0)ot[Dt]=64512;else{pu[0]=xe[Dt];var hn=tc[0],Dn=hn>>>31<<15,pn=(hn<<1>>>24)-127,wn=hn>>13&1023;ot[Dt]=pn<-24?Dn:pn<-14?Dn+(wn+1024>>-14-pn):pn>15?Dn+31744:Dn+(pn+15<<10)+wn}return ot}function Co(xe){return Array.isArray(xe)||V(xe)}var _s=function(xe){return!(xe&xe-1||!xe)},Da=3553,is=34069,vu=6408,To=6409,or=34041,oo=36193,os=5121,as=5126,yi=33984,Ei=[9984,9986,9985,9987],fi=[0,To,6410,6407,vu],qr={};function ai(xe){return"[object "+xe+"]"}qr[To]=qr[6406]=qr[6402]=1,qr[or]=qr[6410]=2,qr[6407]=qr[35904]=3,qr[vu]=qr[35906]=4;var Qo=ai("HTMLCanvasElement"),Uo=ai("OffscreenCanvas"),Bo=ai("CanvasRenderingContext2D"),Vo=ai("ImageBitmap"),No=ai("HTMLImageElement"),jo=ai("HTMLVideoElement"),Sa=Object.keys(Uc).concat([Qo,Uo,Bo,Vo,No,jo]),Vi=[];Vi[os]=1,Vi[as]=4,Vi[oo]=2,Vi[5123]=2,Vi[5125]=4;var So=[];function Cs(xe){return Array.isArray(xe)&&(0===xe.length||"number"==typeof xe[0])}function qu(xe){return!!Array.isArray(xe)&&!(0===xe.length||!Co(xe[0]))}function ma(xe){return Object.prototype.toString.call(xe)}function nc(xe){return ma(xe)===Qo}function _p(xe){return ma(xe)===Uo}function eh(xe){if(!xe)return!1;var ot=ma(xe);return Sa.indexOf(ot)>=0||Cs(xe)||qu(xe)||Ea(xe)}function Cp(xe){return 0|Uc[Object.prototype.toString.call(xe)]}function th(xe,ot){return R.allocType(xe.type===oo?as:xe.type,ot)}function Ap(xe,ot){xe.type===oo?(xe.data=Zs(ot),R.freeType(ot)):xe.data=ot}function rc(xe,ot,Dt,hn,Dn,pn){var wn;if(wn=typeof So[xe]<"u"?So[xe]:qr[xe]*Vi[ot],pn&&(wn*=6),Dn){for(var Hn=0,Xn=Dt;Xn>=1;)Hn+=wn*Xn*Xn,Xn/=2;return Hn}return wn*Dt*hn}function z0(xe,ot,Dt,hn,Dn,pn,wn){var Hn={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Xn={repeat:10497,clamp:33071,mirror:33648},Jn={nearest:9728,linear:9729},Yn=G({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Jn),sr={none:0,browser:37444},v={uint8:os,rgba4:32819,rgb565:33635,"rgb5 a1":32820},C={alpha:6406,luminance:To,"luminance alpha":6410,rgb:6407,rgba:vu,rgba4:32854,"rgb5 a1":32855,rgb565:36194},H={};ot.ext_srgb&&(C.srgb=35904,C.srgba=35906),ot.oes_texture_float&&(v.float32=v.float=as),ot.oes_texture_half_float&&(v.float16=v["half float"]=oo),ot.webgl_depth_texture&&(G(C,{depth:6402,"depth stencil":or}),G(v,{uint16:5123,uint32:5125,"depth stencil":34042})),ot.webgl_compressed_texture_s3tc&&G(H,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),ot.webgl_compressed_texture_atc&&G(H,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),ot.webgl_compressed_texture_pvrtc&&G(H,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),ot.webgl_compressed_texture_etc1&&(H["rgb etc1"]=36196);var J=Array.prototype.slice.call(xe.getParameter(34467));Object.keys(H).forEach(function(wt){var yn=H[wt];J.indexOf(yn)>=0&&(C[wt]=yn)});var se=Object.keys(C);Dt.textureFormats=se;var he=[];Object.keys(C).forEach(function(wt){he[C[wt]]=wt});var ye=[];Object.keys(v).forEach(function(wt){ye[v[wt]]=wt});var Se=[];Object.keys(Jn).forEach(function(wt){Se[Jn[wt]]=wt});var Ie=[];Object.keys(Yn).forEach(function(wt){Ie[Yn[wt]]=wt});var Be=[];Object.keys(Xn).forEach(function(wt){Be[Xn[wt]]=wt});var nt=se.reduce(function(wt,yn){var dn=C[yn];return wt[dn]=dn===To||6406===dn||dn===To||6410===dn||6402===dn||dn===or||ot.ext_srgb&&(35904===dn||35906===dn)?dn:32855===dn||yn.indexOf("rgba")>=0?vu:6407,wt},{});function Qe(){this.internalformat=vu,this.format=vu,this.type=os,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=37444,this.width=0,this.height=0,this.channels=0}function St(wt,yn){wt.internalformat=yn.internalformat,wt.format=yn.format,wt.type=yn.type,wt.compressed=yn.compressed,wt.premultiplyAlpha=yn.premultiplyAlpha,wt.flipY=yn.flipY,wt.unpackAlignment=yn.unpackAlignment,wt.colorSpace=yn.colorSpace,wt.width=yn.width,wt.height=yn.height,wt.channels=yn.channels}function Yt(wt,yn){if("object"==typeof yn&&yn){if("premultiplyAlpha"in yn&&(Le.type(yn.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),wt.premultiplyAlpha=yn.premultiplyAlpha),"flipY"in yn&&(Le.type(yn.flipY,"boolean","invalid texture flip"),wt.flipY=yn.flipY),"alignment"in yn&&(Le.oneOf(yn.alignment,[1,2,4,8],"invalid texture unpack alignment"),wt.unpackAlignment=yn.alignment),"colorSpace"in yn&&(Le.parameter(yn.colorSpace,sr,"invalid colorSpace"),wt.colorSpace=sr[yn.colorSpace]),"type"in yn){var dn=yn.type;Le(ot.oes_texture_float||!("float"===dn||"float32"===dn),"you must enable the OES_texture_float extension in order to use floating point textures."),Le(ot.oes_texture_half_float||!("half float"===dn||"float16"===dn),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),Le(ot.webgl_depth_texture||!("uint16"===dn||"uint32"===dn||"depth stencil"===dn),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Le.parameter(dn,v,"invalid texture type"),wt.type=v[dn]}var wr=wt.width,Ci=wt.height,ht=wt.channels,et=!1;"shape"in yn?(Le(Array.isArray(yn.shape)&&yn.shape.length>=2,"shape must be an array"),wr=yn.shape[0],Ci=yn.shape[1],3===yn.shape.length&&(Le((ht=yn.shape[2])>0&&ht<=4,"invalid number of channels"),et=!0),Le(wr>=0&&wr<=Dt.maxTextureSize,"invalid width"),Le(Ci>=0&&Ci<=Dt.maxTextureSize,"invalid height")):("radius"in yn&&(wr=Ci=yn.radius,Le(wr>=0&&wr<=Dt.maxTextureSize,"invalid radius")),"width"in yn&&Le((wr=yn.width)>=0&&wr<=Dt.maxTextureSize,"invalid width"),"height"in yn&&Le((Ci=yn.height)>=0&&Ci<=Dt.maxTextureSize,"invalid height"),"channels"in yn&&(Le((ht=yn.channels)>0&&ht<=4,"invalid number of channels"),et=!0)),wt.width=0|wr,wt.height=0|Ci,wt.channels=0|ht;var Bt=!1;if("format"in yn){var on=yn.format;Le(ot.webgl_depth_texture||!("depth"===on||"depth stencil"===on),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Le.parameter(on,C,"invalid texture format");var sn=wt.internalformat=C[on];wt.format=nt[sn],on in v&&("type"in yn||(wt.type=v[on])),on in H&&(wt.compressed=!0),Bt=!0}!et&&Bt?wt.channels=qr[wt.format]:et&&!Bt?wt.channels!==fi[wt.format]&&(wt.format=wt.internalformat=fi[wt.channels]):Bt&&et&&Le(wt.channels===qr[wt.format],"number of channels inconsistent with specified format")}}function Mn(wt){xe.pixelStorei(37440,wt.flipY),xe.pixelStorei(37441,wt.premultiplyAlpha),xe.pixelStorei(37443,wt.colorSpace),xe.pixelStorei(3317,wt.unpackAlignment)}function tn(){Qe.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function rn(wt,yn){var dn=null;if(eh(yn)?dn=yn:yn&&(Le.type(yn,"object","invalid pixel data type"),Yt(wt,yn),"x"in yn&&(wt.xOffset=0|yn.x),"y"in yn&&(wt.yOffset=0|yn.y),eh(yn.data)&&(dn=yn.data)),Le(!wt.compressed||dn instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),yn.copy){Le(!dn,"can not specify copy and data field for the same texture");var wr=Dn.viewportWidth,Ci=Dn.viewportHeight;wt.width=wt.width||wr-wt.xOffset,wt.height=wt.height||Ci-wt.yOffset,wt.needsCopy=!0,Le(wt.xOffset>=0&&wt.xOffset<wr&&wt.yOffset>=0&&wt.yOffset<Ci&&wt.width>0&&wt.width<=wr&&wt.height>0&&wt.height<=Ci,"copy texture read out of bounds")}else if(dn){if(V(dn))wt.channels=wt.channels||4,wt.data=dn,!("type"in yn)&&wt.type===os&&(wt.type=Cp(dn));else if(Cs(dn))wt.channels=wt.channels||4,function Qs(xe,ot){var Dt=ot.length;switch(xe.type){case os:case 5123:case 5125:case as:var hn=R.allocType(xe.type,Dt);hn.set(ot),xe.data=hn;break;case oo:xe.data=Zs(ot);break;default:Le.raise("unsupported texture type, must specify a typed array")}}(wt,dn),wt.alignment=1,wt.needsFree=!0;else if(Ea(dn)){var ht=dn.data;!Array.isArray(ht)&&wt.type===os&&(wt.type=Cp(ht));var on,sn,Ht,jt,Zt,ft,et=dn.shape,Bt=dn.stride;3===et.length?(Ht=et[2],ft=Bt[2]):(Le(2===et.length,"invalid ndarray pixel data, must be 2 or 3D"),Ht=1,ft=1),on=et[0],sn=et[1],jt=Bt[0],Zt=Bt[1],wt.alignment=1,wt.width=on,wt.height=sn,wt.channels=Ht,wt.format=wt.internalformat=fi[Ht],wt.needsFree=!0,function ig(xe,ot,Dt,hn,Dn,pn){for(var wn=xe.width,Hn=xe.height,Xn=xe.channels,Yn=th(xe,wn*Hn*Xn),sr=0,v=0;v<Hn;++v)for(var C=0;C<wn;++C)for(var H=0;H<Xn;++H)Yn[sr++]=ot[Dt*C+hn*v+Dn*H+pn];Ap(xe,Yn)}(wt,ht,jt,Zt,ft,dn.offset)}else if(nc(dn)||_p(dn)||function B0(xe){return ma(xe)===Bo}(dn))wt.element=nc(dn)||_p(dn)?dn:dn.canvas,wt.width=wt.element.width,wt.height=wt.element.height,wt.channels=4;else if(function Sp(xe){return ma(xe)===Vo}(dn))wt.element=dn,wt.width=dn.width,wt.height=dn.height,wt.channels=4;else if(function Mp(xe){return ma(xe)===No}(dn))wt.element=dn,wt.width=dn.naturalWidth,wt.height=dn.naturalHeight,wt.channels=4;else if(function j0(xe){return ma(xe)===jo}(dn))wt.element=dn,wt.width=dn.videoWidth,wt.height=dn.videoHeight,wt.channels=4;else if(qu(dn)){var Lt=wt.width||dn[0].length,lt=wt.height||dn.length,en=wt.channels;en=Co(dn[0][0])?en||dn[0][0].length:en||1;for(var ln=Au.shape(dn),In=1,Nn=0;Nn<ln.length;++Nn)In*=ln[Nn];var _n=th(wt,In);Au.flatten(dn,ln,"",_n),Ap(wt,_n),wt.alignment=1,wt.width=Lt,wt.height=lt,wt.channels=en,wt.format=wt.internalformat=fi[en],wt.needsFree=!0}}else wt.width=wt.width||1,wt.height=wt.height||1,wt.channels=wt.channels||4;wt.type===as?Le(Dt.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):wt.type===oo&&Le(Dt.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function nn(wt,yn,dn){var wr=wt.element,Ci=wt.data,ht=wt.internalformat,et=wt.format,Bt=wt.type,on=wt.width,sn=wt.height;Mn(wt),wr?xe.texImage2D(yn,dn,et,et,Bt,wr):wt.compressed?xe.compressedTexImage2D(yn,dn,ht,on,sn,0,Ci):wt.needsCopy?(hn(),xe.copyTexImage2D(yn,dn,et,wt.xOffset,wt.yOffset,on,sn,0)):xe.texImage2D(yn,dn,et,on,sn,0,et,Bt,Ci||null)}function qn(wt,yn,dn,wr,Ci){var ht=wt.element,et=wt.data,Bt=wt.internalformat,on=wt.format,sn=wt.type,Ht=wt.width,jt=wt.height;Mn(wt),ht?xe.texSubImage2D(yn,Ci,dn,wr,on,sn,ht):wt.compressed?xe.compressedTexSubImage2D(yn,Ci,dn,wr,Bt,Ht,jt,et):wt.needsCopy?(hn(),xe.copyTexSubImage2D(yn,Ci,dn,wr,wt.xOffset,wt.yOffset,Ht,jt)):xe.texSubImage2D(yn,Ci,dn,wr,Ht,jt,on,sn,et)}var fr=[];function ar(){return fr.pop()||new tn}function Pr(wt){wt.needsFree&&R.freeType(wt.data),tn.call(wt),fr.push(wt)}function Tr(){Qe.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function Ur(wt,yn,dn){var wr=wt.images[0]=ar();wt.mipmask=1,wr.width=wt.width=yn,wr.height=wt.height=dn,wr.channels=wt.channels=4}function ti(wt,yn){var dn=null;if(eh(yn))St(dn=wt.images[0]=ar(),wt),rn(dn,yn),wt.mipmask=1;else if(Yt(wt,yn),Array.isArray(yn.mipmap))for(var wr=yn.mipmap,Ci=0;Ci<wr.length;++Ci)St(dn=wt.images[Ci]=ar(),wt),dn.width>>=Ci,dn.height>>=Ci,rn(dn,wr[Ci]),wt.mipmask|=1<<Ci;else St(dn=wt.images[0]=ar(),wt),rn(dn,yn),wt.mipmask=1;St(wt,wt.images[0]),wt.compressed&&(33776===wt.internalformat||33777===wt.internalformat||33778===wt.internalformat||33779===wt.internalformat)&&Le(wt.width%4==0&&wt.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Lr(wt,yn){for(var dn=wt.images,wr=0;wr<dn.length;++wr){if(!dn[wr])return;nn(dn[wr],yn,wr)}}var Do=[];function ui(){var wt=Do.pop()||new Tr;Qe.call(wt),wt.mipmask=0;for(var yn=0;yn<16;++yn)wt.images[yn]=null;return wt}function zo(wt){for(var yn=wt.images,dn=0;dn<yn.length;++dn)yn[dn]&&Pr(yn[dn]),yn[dn]=null;Do.push(wt)}function mo(){this.minFilter=9728,this.magFilter=9728,this.wrapS=33071,this.wrapT=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Mi(wt,yn){if("min"in yn){var dn=yn.min;Le.parameter(dn,Yn),wt.minFilter=Yn[dn],Ei.indexOf(wt.minFilter)>=0&&!("faces"in yn)&&(wt.genMipmaps=!0)}if("mag"in yn){var wr=yn.mag;Le.parameter(wr,Jn),wt.magFilter=Jn[wr]}var Ci=wt.wrapS,ht=wt.wrapT;if("wrap"in yn){var et=yn.wrap;"string"==typeof et?(Le.parameter(et,Xn),Ci=ht=Xn[et]):Array.isArray(et)&&(Le.parameter(et[0],Xn),Le.parameter(et[1],Xn),Ci=Xn[et[0]],ht=Xn[et[1]])}else{if("wrapS"in yn){var Bt=yn.wrapS;Le.parameter(Bt,Xn),Ci=Xn[Bt]}if("wrapT"in yn){var on=yn.wrapT;Le.parameter(on,Xn),ht=Xn[on]}}if(wt.wrapS=Ci,wt.wrapT=ht,"anisotropic"in yn){var sn=yn.anisotropic;Le("number"==typeof sn&&sn>=1&&sn<=Dt.maxAnisotropic,"aniso samples must be between 1 and "),wt.anisotropic=yn.anisotropic}if("mipmap"in yn){var Ht=!1;switch(typeof yn.mipmap){case"string":Le.parameter(yn.mipmap,Hn,"invalid mipmap hint"),wt.mipmapHint=Hn[yn.mipmap],wt.genMipmaps=!0,Ht=!0;break;case"boolean":Ht=wt.genMipmaps=yn.mipmap;break;case"object":Le(Array.isArray(yn.mipmap),"invalid mipmap type"),wt.genMipmaps=!1,Ht=!0;break;default:Le.raise("invalid mipmap type")}Ht&&!("min"in yn)&&(wt.minFilter=9984)}}function Lo(wt,yn){xe.texParameteri(yn,10241,wt.minFilter),xe.texParameteri(yn,10240,wt.magFilter),xe.texParameteri(yn,10242,wt.wrapS),xe.texParameteri(yn,10243,wt.wrapT),ot.ext_texture_filter_anisotropic&&xe.texParameteri(yn,34046,wt.anisotropic),wt.genMipmaps&&(xe.hint(33170,wt.mipmapHint),xe.generateMipmap(yn))}var Go=0,ba={},ka=Dt.maxTextureUnits,ha=Array(ka).map(function(){return null});function di(wt){Qe.call(this),this.mipmask=0,this.internalformat=vu,this.id=Go++,this.refCount=1,this.target=wt,this.texture=xe.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new mo,wn.profile&&(this.stats={size:0})}function _o(wt){xe.activeTexture(yi),xe.bindTexture(wt.target,wt.texture)}function Ki(){var wt=ha[0];wt?xe.bindTexture(wt.target,wt.texture):xe.bindTexture(Da,null)}function Hr(wt){var yn=wt.texture;Le(yn,"must not double destroy texture");var dn=wt.unit,wr=wt.target;dn>=0&&(xe.activeTexture(yi+dn),xe.bindTexture(wr,null),ha[dn]=null),xe.deleteTexture(yn),wt.texture=null,wt.params=null,wt.pixels=null,wt.refCount=0,delete ba[wt.id],pn.textureCount--}return G(di.prototype,{bind:function(){var wt=this;wt.bindCount+=1;var yn=wt.unit;if(yn<0){for(var dn=0;dn<ka;++dn){var wr=ha[dn];if(wr){if(wr.bindCount>0)continue;wr.unit=-1}ha[dn]=wt,yn=dn;break}yn>=ka&&Le.raise("insufficient number of texture units"),wn.profile&&pn.maxTextureUnits<yn+1&&(pn.maxTextureUnits=yn+1),wt.unit=yn,xe.activeTexture(yi+yn),xe.bindTexture(wt.target,wt.texture)}return yn},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Hr(this)}}),wn.profile&&(pn.getTotalTextureSize=function(){var wt=0;return Object.keys(ba).forEach(function(yn){wt+=ba[yn].stats.size}),wt}),{create2D:function _i(wt,yn){var dn=new di(Da);function wr(et,Bt){var on=dn.texInfo;mo.call(on);var sn=ui();return"number"==typeof et?Ur(sn,0|et,"number"==typeof Bt?0|Bt:0|et):et?(Le.type(et,"object","invalid arguments to regl.texture"),Mi(on,et),ti(sn,et)):Ur(sn,1,1),on.genMipmaps&&(sn.mipmask=(sn.width<<1)-1),dn.mipmask=sn.mipmask,St(dn,sn),Le.texture2D(on,sn,Dt),dn.internalformat=sn.internalformat,wr.width=sn.width,wr.height=sn.height,_o(dn),Lr(sn,Da),Lo(on,Da),Ki(),zo(sn),wn.profile&&(dn.stats.size=rc(dn.internalformat,dn.type,sn.width,sn.height,on.genMipmaps,!1)),wr.format=he[dn.internalformat],wr.type=ye[dn.type],wr.mag=Se[on.magFilter],wr.min=Ie[on.minFilter],wr.wrapS=Be[on.wrapS],wr.wrapT=Be[on.wrapT],wr}return ba[dn.id]=dn,pn.textureCount++,wr(wt,yn),wr.subimage=function Ci(et,Bt,on,sn){Le(!!et,"must specify image data");var Ht=0|Bt,jt=0|on,Zt=0|sn,ft=ar();return St(ft,dn),ft.width=0,ft.height=0,rn(ft,et),ft.width=ft.width||(dn.width>>Zt)-Ht,ft.height=ft.height||(dn.height>>Zt)-jt,Le(dn.type===ft.type&&dn.format===ft.format&&dn.internalformat===ft.internalformat,"incompatible format for texture.subimage"),Le(Ht>=0&&jt>=0&&Ht+ft.width<=dn.width&&jt+ft.height<=dn.height,"texture.subimage write out of bounds"),Le(dn.mipmask&1<<Zt,"missing mipmap data"),Le(ft.data||ft.element||ft.needsCopy,"missing image data"),_o(dn),qn(ft,Da,Ht,jt,Zt),Ki(),Pr(ft),wr},wr.resize=function ht(et,Bt){var on=0|et,sn=0|Bt||on;if(on===dn.width&&sn===dn.height)return wr;wr.width=dn.width=on,wr.height=dn.height=sn,_o(dn);for(var Ht=0;dn.mipmask>>Ht;++Ht){var jt=on>>Ht,Zt=sn>>Ht;if(!jt||!Zt)break;xe.texImage2D(Da,Ht,dn.format,jt,Zt,0,dn.format,dn.type,null)}return Ki(),wn.profile&&(dn.stats.size=rc(dn.internalformat,dn.type,on,sn,!1,!1)),wr},wr._reglType="texture2d",wr._texture=dn,wn.profile&&(wr.stats=dn.stats),wr.destroy=function(){dn.decRef()},wr},createCube:function ri(wt,yn,dn,wr,Ci,ht){var et=new di(34067);ba[et.id]=et,pn.cubeCount++;var Bt=new Array(6);function on(jt,Zt,ft,Lt,lt,en){var ln,In=et.texInfo;for(mo.call(In),ln=0;ln<6;++ln)Bt[ln]=ui();if("number"!=typeof jt&&jt)if("object"==typeof jt)if(Zt)ti(Bt[0],jt),ti(Bt[1],Zt),ti(Bt[2],ft),ti(Bt[3],Lt),ti(Bt[4],lt),ti(Bt[5],en);else if(Mi(In,jt),Yt(et,jt),"faces"in jt){var _n=jt.faces;for(Le(Array.isArray(_n)&&6===_n.length,"cube faces must be a length 6 array"),ln=0;ln<6;++ln)Le("object"==typeof _n[ln]&&!!_n[ln],"invalid input for cube map face"),St(Bt[ln],et),ti(Bt[ln],_n[ln])}else for(ln=0;ln<6;++ln)ti(Bt[ln],jt);else Le.raise("invalid arguments to cube map");else{var Nn=0|jt||1;for(ln=0;ln<6;++ln)Ur(Bt[ln],Nn,Nn)}for(St(et,Bt[0]),Dt.npotTextureCube||Le(_s(et.width)&&_s(et.height),"your browser does not support non power or two texture dimensions"),et.mipmask=In.genMipmaps?(Bt[0].width<<1)-1:Bt[0].mipmask,Le.textureCube(et,In,Bt,Dt),et.internalformat=Bt[0].internalformat,on.width=Bt[0].width,on.height=Bt[0].height,_o(et),ln=0;ln<6;++ln)Lr(Bt[ln],is+ln);for(Lo(In,34067),Ki(),wn.profile&&(et.stats.size=rc(et.internalformat,et.type,on.width,on.height,In.genMipmaps,!0)),on.format=he[et.internalformat],on.type=ye[et.type],on.mag=Se[In.magFilter],on.min=Ie[In.minFilter],on.wrapS=Be[In.wrapS],on.wrapT=Be[In.wrapT],ln=0;ln<6;++ln)zo(Bt[ln]);return on}return on(wt,yn,dn,wr,Ci,ht),on.subimage=function sn(jt,Zt,ft,Lt,lt){Le(!!Zt,"must specify image data"),Le("number"==typeof jt&&jt===(0|jt)&&jt>=0&&jt<6,"invalid face");var en=0|ft,ln=0|Lt,In=0|lt,Nn=ar();return St(Nn,et),Nn.width=0,Nn.height=0,rn(Nn,Zt),Nn.width=Nn.width||(et.width>>In)-en,Nn.height=Nn.height||(et.height>>In)-ln,Le(et.type===Nn.type&&et.format===Nn.format&&et.internalformat===Nn.internalformat,"incompatible format for texture.subimage"),Le(en>=0&&ln>=0&&en+Nn.width<=et.width&&ln+Nn.height<=et.height,"texture.subimage write out of bounds"),Le(et.mipmask&1<<In,"missing mipmap data"),Le(Nn.data||Nn.element||Nn.needsCopy,"missing image data"),_o(et),qn(Nn,is+jt,en,ln,In),Ki(),Pr(Nn),on},on.resize=function Ht(jt){var Zt=0|jt;if(Zt!==et.width){on.width=et.width=Zt,on.height=et.height=Zt,_o(et);for(var ft=0;ft<6;++ft)for(var Lt=0;et.mipmask>>Lt;++Lt)xe.texImage2D(is+ft,Lt,et.format,Zt>>Lt,Zt>>Lt,0,et.format,et.type,null);return Ki(),wn.profile&&(et.stats.size=rc(et.internalformat,et.type,on.width,on.height,!1,!0)),on}},on._reglType="textureCube",on._texture=et,wn.profile&&(on.stats=et.stats),on.destroy=function(){et.decRef()},on},clear:function ko(){for(var wt=0;wt<ka;++wt)xe.activeTexture(yi+wt),xe.bindTexture(Da,null),ha[wt]=null;_a(ba).forEach(Hr),pn.cubeCount=0,pn.textureCount=0},getTexture:function(wt){return null},restore:function sl(){for(var wt=0;wt<ka;++wt){var yn=ha[wt];yn&&(yn.bindCount=0,yn.unit=-1,ha[wt]=null)}_a(ba).forEach(function(dn){dn.texture=xe.createTexture(),xe.bindTexture(dn.target,dn.texture);for(var wr=0;wr<32;++wr)if(0!=(dn.mipmask&1<<wr))if(dn.target===Da)xe.texImage2D(Da,wr,dn.internalformat,dn.width>>wr,dn.height>>wr,0,dn.internalformat,dn.type,null);else for(var Ci=0;Ci<6;++Ci)xe.texImage2D(is+Ci,wr,dn.internalformat,dn.width>>wr,dn.height>>wr,0,dn.internalformat,dn.type,null);Lo(dn.texInfo,dn.target)})},refresh:function wh(){for(var wt=0;wt<ka;++wt){var yn=ha[wt];yn&&(yn.bindCount=0,yn.unit=-1,ha[wt]=null),xe.activeTexture(yi+wt),xe.bindTexture(Da,null),xe.bindTexture(34067,null)}}}}So[32854]=2,So[32855]=2,So[36194]=2,So[or]=4,So[33776]=.5,So[33777]=.5,So[33778]=1,So[33779]=1,So[35986]=.5,So[35987]=1,So[34798]=1,So[35840]=.5,So[35841]=.25,So[35842]=.5,So[35843]=.25,So[36196]=.5;var ur=36161,Kc=32854,mu=[];function Zu(xe,ot,Dt){return mu[xe]*ot*Dt}mu[Kc]=2,mu[32855]=2,mu[36194]=2,mu[33189]=2,mu[36168]=1,mu[34041]=4,mu[35907]=4,mu[34836]=16,mu[34842]=8,mu[34843]=6;var Jo=36160,ml=3553,ag=34069,cg=[6407,6408],Pp=[];Pp[6408]=4,Pp[6407]=3;var od=[];od[5121]=1,od[5126]=4,od[36193]=2;var Rp=[32854,32855,36194,35907,34842,34843,34836],yl={};yl[36053]="complete",yl[36054]="incomplete attachment",yl[36057]="incomplete dimensions",yl[36055]="incomplete, missing attachment",yl[36061]="unsupported";function hg(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.offset=0,this.stride=0,this.divisor=0}var ih=5121;function bl(xe,ot,Dt,hn,Dn,pn,wn){function Hn(Yn){var sr;null===ot.next?(Le(Dn.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),sr=ih):(Le(null!==ot.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),sr=ot.next.colorAttachments[0].texture._texture.type,pn.oes_texture_float?(Le(sr===ih||5126===sr,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===sr&&Le(wn.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):Le(sr===ih,"Reading from a framebuffer is only allowed for the type 'uint8'"));var v=0,C=0,H=hn.framebufferWidth,J=hn.framebufferHeight,se=null;V(Yn)?se=Yn:Yn&&(Le.type(Yn,"object","invalid arguments to regl.read()"),C=0|Yn.y,Le((v=0|Yn.x)>=0&&v<hn.framebufferWidth,"invalid x offset for regl.read"),Le(C>=0&&C<hn.framebufferHeight,"invalid y offset for regl.read"),H=0|(Yn.width||hn.framebufferWidth-v),J=0|(Yn.height||hn.framebufferHeight-C),se=Yn.data||null),se&&(sr===ih?Le(se instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===sr&&Le(se instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),Le(H>0&&H+v<=hn.framebufferWidth,"invalid width for read pixels"),Le(J>0&&J+C<=hn.framebufferHeight,"invalid height for read pixels"),Dt();var he=H*J*4;return se||(sr===ih?se=new Uint8Array(he):5126===sr&&(se=se||new Float32Array(he))),Le.isTypedArray(se,"data buffer for regl.read() must be a typedarray"),Le(se.byteLength>=he,"data buffer for regl.read() too small"),xe.pixelStorei(3333,4),xe.readPixels(v,C,H,J,6408,sr,se),se}return function Jn(Yn){return Yn&&"framebuffer"in Yn?function Xn(Yn){var sr;return ot.setFBO({framebuffer:Yn.framebuffer},function(){sr=Hn(Yn)}),sr}(Yn):Hn(Yn)}}function Ao(xe){return Array.prototype.slice.call(xe)}function nf(xe){return Ao(xe).join("")}var rf="xyzw".split(""),Wp="blend.enable",$p="blend.color",oc="blend.equation",sh="blend.func",Yp="depth.enable",Xp="depth.func",V0="depth.range",ad="depth.mask",ff="colorMask",Rt="cull.enable",mg="cull.face",el="frontFace",uh="lineWidth",yg="polygonOffset.enable",wl="polygonOffset.offset",qp="sample.alpha",ac="sample.enable",sc="sample.coverage",uc="stencil.enable",Kp="stencil.mask",lh="stencil.func",ca="stencil.opFront",hf="stencil.opBack",tu="scissor.enable",ch="scissor.box",As="viewport",xl="profile",tl="framebuffer",yu="vert",nl="frag",lc="elements",El="primitive",_l="count",fh="offset",hh="instances",dh="vao",df="Width",cc="Height",gf=tl+df,Bs=tl+cc,ud="drawingBuffer",bg=ud+df,gh=ud+cc,Zp=[sh,oc,lh,ca,hf,sc,As,ch,wl],Sl=34962,Eg=35664,_g=35665,Ml=35666,Sg=35667,ea=35668,pc=35669,Mg=35671,cd=35672,$a=35673,js=35674,mf=35675,rl=35676,il=35678,mc=35680,ph=1028,yf=1029,yc=7680,La={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},fd=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],ol={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},bc={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},wf={frag:35632,vert:35633},mh={cw:2304,ccw:2305};function wc(xe){return Array.isArray(xe)||V(xe)||Ea(xe)}function iv(xe){return xe.sort(function(ot,Dt){return ot===As?-1:Dt===As?1:ot<Dt?-1:1})}function fs(xe,ot,Dt,hn){this.thisDep=xe,this.contextDep=ot,this.propDep=Dt,this.append=hn}function Cl(xe){return xe&&!(xe.thisDep||xe.contextDep||xe.propDep)}function Ho(xe){return new fs(!1,!1,!1,xe)}function ya(xe,ot){var Dt=xe.type;if(0===Dt){var hn=xe.data.length;return new fs(!0,hn>=1,hn>=2,ot)}if(4===Dt){var Dn=xe.data;return new fs(Dn.thisDep,Dn.contextDep,Dn.propDep,ot)}if(5===Dt)return new fs(!1,!1,!1,ot);if(6===Dt){for(var pn=!1,wn=!1,Hn=!1,Xn=0;Xn<xe.data.length;++Xn){var Jn=xe.data[Xn];if(1===Jn.type)Hn=!0;else if(2===Jn.type)wn=!0;else if(3===Jn.type)pn=!0;else if(0===Jn.type){pn=!0;var Yn=Jn.data;Yn>=1&&(wn=!0),Yn>=2&&(Hn=!0)}else 4===Jn.type&&(pn=pn||Jn.data.thisDep,wn=wn||Jn.data.contextDep,Hn=Hn||Jn.data.propDep)}return new fs(pn,wn,Hn,ot)}return new fs(3===Dt,2===Dt,1===Dt,ot)}var al=new fs(!1,!1,!1,function(){});function Q0(xe,ot,Dt,hn,Dn,pn,wn,Hn,Xn,Jn,Yn,sr,v,C,H){var J=Jn.Record,se={add:32774,subtract:32778,"reverse subtract":32779};Dt.ext_blend_minmax&&(se.min=32775,se.max=32776);var he=Dt.angle_instanced_arrays,ye=Dt.webgl_draw_buffers,Se={dirty:!0,profile:H.profile},Ie={},Be=[],nt={},Qe={};function St(ht){return ht.replace(".","_")}function Yt(ht,et,Bt){var on=St(ht);Be.push(ht),Ie[on]=Se[on]=!!Bt,nt[on]=et}function Mn(ht,et,Bt){var on=St(ht);Be.push(ht),Array.isArray(Bt)?(Se[on]=Bt.slice(),Ie[on]=Bt.slice()):Se[on]=Ie[on]=Bt,Qe[on]=et}Yt("dither",3024),Yt(Wp,3042),Mn($p,"blendColor",[0,0,0,0]),Mn(oc,"blendEquationSeparate",[32774,32774]),Mn(sh,"blendFuncSeparate",[1,0,1,0]),Yt(Yp,2929,!0),Mn(Xp,"depthFunc",513),Mn(V0,"depthRange",[0,1]),Mn(ad,"depthMask",!0),Mn(ff,ff,[!0,!0,!0,!0]),Yt(Rt,2884),Mn(mg,"cullFace",yf),Mn(el,el,2305),Mn(uh,uh,1),Yt(yg,32823),Mn(wl,"polygonOffset",[0,0]),Yt(qp,32926),Yt(ac,32928),Mn(sc,"sampleCoverage",[1,!1]),Yt(uc,2960),Mn(Kp,"stencilMask",-1),Mn(lh,"stencilFunc",[519,0,-1]),Mn(ca,"stencilOpSeparate",[ph,yc,yc,yc]),Mn(hf,"stencilOpSeparate",[yf,yc,yc,yc]),Yt(tu,3089),Mn(ch,"scissor",[0,0,xe.drawingBufferWidth,xe.drawingBufferHeight]),Mn(As,As,[0,0,xe.drawingBufferWidth,xe.drawingBufferHeight]);var tn={gl:xe,context:v,strings:ot,next:Ie,current:Se,draw:sr,elements:pn,buffer:Dn,shader:Yn,attributes:Jn.state,vao:Jn,uniforms:Xn,framebuffer:Hn,extensions:Dt,timer:C,isBufferArgs:wc},rn={primTypes:ws,compareFuncs:ol,blendFuncs:La,blendEquations:se,stencilOps:bc,glTypes:Ii,orientationType:mh};Le.optional(function(){tn.isArrayLike=Co}),ye&&(rn.backBuffer=[yf],rn.drawBuffer=Ae(hn.maxDrawbuffers,function(ht){return 0===ht?[0]:Ae(ht,function(et){return 36064+et})}));var nn=0;function qn(){var ht=function Up(){var xe=0,ot=[],Dt=[];function Dn(){var sr=[],C=[];return G(function v(){sr.push.apply(sr,Ao(arguments))},{def:function H(){var J="v"+xe++;return C.push(J),arguments.length>0&&(sr.push(J,"="),sr.push.apply(sr,Ao(arguments)),sr.push(";")),J},toString:function(){return nf([C.length>0?"var "+C.join(",")+";":"",nf(sr)])}})}function pn(){var sr=Dn(),v=Dn(),C=sr.toString,H=v.toString;function J(se,he){v(se,he,"=",sr.def(se,he),";")}return G(function(){sr.apply(sr,Ao(arguments))},{def:sr.def,entry:sr,exit:v,save:J,set:function(se,he,ye){J(se,he),sr(se,he,"=",ye,";")},toString:function(){return C()+H()}})}var Hn=Dn(),Xn={};return{global:Hn,link:function hn(sr){for(var v=0;v<Dt.length;++v)if(Dt[v]===sr)return ot[v];var C="g"+xe++;return ot.push(C),Dt.push(sr),C},block:Dn,proc:function Jn(sr,v){var C=[];function H(){var Se="a"+C.length;return C.push(Se),Se}v=v||0;for(var J=0;J<v;++J)H();var se=pn(),he=se.toString;return Xn[sr]=G(se,{arg:H,toString:function(){return nf(["function(",C.join(),"){",he(),"}"])}})},scope:pn,cond:function wn(){var sr=nf(arguments),v=pn(),C=pn(),H=v.toString,J=C.toString;return G(v,{then:function(){return v.apply(v,Ao(arguments)),this},else:function(){return C.apply(C,Ao(arguments)),this},toString:function(){var se=J();return se&&(se="else{"+se+"}"),nf(["if(",sr,"){",H(),"}",se])}})},compile:function Yn(){var sr=['"use strict";',Hn,"return {"];Object.keys(Xn).forEach(function(H){sr.push('"',H,'":',Xn[H].toString(),",")}),sr.push("}");var v=nf(sr).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,ot.concat(v)).apply(null,Dt)}}}(),et=ht.link,Bt=ht.global;ht.id=nn++,ht.batchId="0";var on=et(tn),sn=ht.shared={props:"a0"};Object.keys(tn).forEach(function(Lt){sn[Lt]=Bt.def(on,".",Lt)}),Le.optional(function(){ht.CHECK=et(Le),ht.commandStr=Le.guessCommand(),ht.command=et(ht.commandStr),ht.assert=function(Lt,lt,en){Lt("if(!(",lt,"))",this.CHECK,".commandRaise(",et(en),",",this.command,");")},rn.invalidBlendCombinations=fd});var Ht=ht.next={},jt=ht.current={};Object.keys(Qe).forEach(function(Lt){Array.isArray(Se[Lt])&&(Ht[Lt]=Bt.def(sn.next,".",Lt),jt[Lt]=Bt.def(sn.current,".",Lt))});var Zt=ht.constants={};Object.keys(rn).forEach(function(Lt){Zt[Lt]=Bt.def(JSON.stringify(rn[Lt]))}),ht.invoke=function(Lt,lt){switch(lt.type){case 0:var en=["this",sn.context,sn.props,ht.batchId];return Lt.def(et(lt.data),".call(",en.slice(0,Math.max(lt.data.length+1,4)),")");case 1:return Lt.def(sn.props,lt.data);case 2:return Lt.def(sn.context,lt.data);case 3:return Lt.def("this",lt.data);case 4:return lt.data.append(ht,Lt),lt.data.ref;case 5:return lt.data.toString();case 6:return lt.data.map(function(ln){return ht.invoke(Lt,ln)})}},ht.attribCache={};var ft={};return ht.scopeAttrib=function(Lt){var lt=ot.id(Lt);if(lt in ft)return ft[lt];var en=Jn.scope[lt];return en||(en=Jn.scope[lt]=new J),ft[lt]=et(en)},ht}function Mi(ht,et,Bt,on,sn){var Ht=ht.static,jt=ht.dynamic;Le.optional(function(){var Ar=[tl,yu,nl,lc,El,fh,_l,hh,xl,dh].concat(Be);function $r(li){Object.keys(li).forEach(function(Zi){Le.command(Ar.indexOf(Zi)>=0,'unknown parameter "'+Zi+'"',sn.commandStr)})}$r(Ht),$r(jt)});var Zt=function Tr(ht,et){var Bt=ht.static;if("string"==typeof Bt[nl]&&"string"==typeof Bt[yu]){if(Object.keys(et.dynamic).length>0)return null;var sn=et.static,Ht=Object.keys(sn);if(Ht.length>0&&"number"==typeof sn[Ht[0]]){for(var jt=[],Zt=0;Zt<Ht.length;++Zt)Le("number"==typeof sn[Ht[Zt]],"must specify all vertex attribute locations when using vaos"),jt.push([0|sn[Ht[Zt]],Ht[Zt]]);return jt}}return null}(ht,et),ft=function ar(ht,et){var Bt=ht.static,on=ht.dynamic;if(tl in Bt){var sn=Bt[tl];return sn?(sn=Hn.getFramebuffer(sn),Le.command(sn,"invalid framebuffer object"),Ho(function(jt,Zt){var ft=jt.link(sn),Lt=jt.shared;Zt.set(Lt.framebuffer,".next",ft);var lt=Lt.context;return Zt.set(lt,"."+gf,ft+".width"),Zt.set(lt,"."+Bs,ft+".height"),ft})):Ho(function(jt,Zt){var ft=jt.shared;Zt.set(ft.framebuffer,".next","null");var Lt=ft.context;return Zt.set(Lt,"."+gf,Lt+"."+bg),Zt.set(Lt,"."+Bs,Lt+"."+gh),"null"})}if(tl in on){var Ht=on[tl];return ya(Ht,function(jt,Zt){var ft=jt.invoke(Zt,Ht),Lt=jt.shared,lt=Lt.framebuffer,en=Zt.def(lt,".getFramebuffer(",ft,")");Le.optional(function(){jt.assert(Zt,"!"+ft+"||"+en,"invalid framebuffer object")}),Zt.set(lt,".next",en);var ln=Lt.context;return Zt.set(ln,"."+gf,en+"?"+en+".width:"+ln+"."+bg),Zt.set(ln,"."+Bs,en+"?"+en+".height:"+ln+"."+gh),en})}return null}(ht),Lt=function Pr(ht,et,Bt){var on=ht.static,sn=ht.dynamic;function Ht(ft){if(ft in on){var Lt=on[ft];Le.commandType(Lt,"object","invalid "+ft,Bt.commandStr);var In,Nn,lt=!0,en=0|Lt.x,ln=0|Lt.y;return"width"in Lt?Le.command((In=0|Lt.width)>=0,"invalid "+ft,Bt.commandStr):lt=!1,"height"in Lt?Le.command((Nn=0|Lt.height)>=0,"invalid "+ft,Bt.commandStr):lt=!1,new fs(!lt&&et&&et.thisDep,!lt&&et&&et.contextDep,!lt&&et&&et.propDep,function(Rr,gi){var Ar=Rr.shared.context,$r=In;"width"in Lt||($r=gi.def(Ar,".",gf,"-",en));var li=Nn;return"height"in Lt||(li=gi.def(Ar,".",Bs,"-",ln)),[en,ln,$r,li]})}if(ft in sn){var _n=sn[ft],Zn=ya(_n,function(Rr,gi){var Ar=Rr.invoke(gi,_n);Le.optional(function(){Rr.assert(gi,Ar+"&&typeof "+Ar+'==="object"',"invalid "+ft)});var $r=Rr.shared.context,li=gi.def(Ar,".x|0"),Zi=gi.def(Ar,".y|0"),ta=gi.def('"width" in ',Ar,"?",Ar,".width|0:","(",$r,".",gf,"-",li,")"),Gs=gi.def('"height" in ',Ar,"?",Ar,".height|0:","(",$r,".",Bs,"-",Zi,")");return Le.optional(function(){Rr.assert(gi,ta+">=0&&"+Gs+">=0","invalid "+ft)}),[li,Zi,ta,Gs]});return et&&(Zn.thisDep=Zn.thisDep||et.thisDep,Zn.contextDep=Zn.contextDep||et.contextDep,Zn.propDep=Zn.propDep||et.propDep),Zn}return et?new fs(et.thisDep,et.contextDep,et.propDep,function(Rr,gi){var Ar=Rr.shared.context;return[0,0,gi.def(Ar,".",gf),gi.def(Ar,".",Bs)]}):null}var jt=Ht(As);if(jt){var Zt=jt;jt=new fs(jt.thisDep,jt.contextDep,jt.propDep,function(ft,Lt){var lt=Zt.append(ft,Lt),en=ft.shared.context;return Lt.set(en,".viewportWidth",lt[2]),Lt.set(en,".viewportHeight",lt[3]),lt})}return{viewport:jt,scissor_box:Ht(ch)}}(ht,ft,sn),lt=function ti(ht,et){var Bt=ht.static,on=ht.dynamic,Ht=function sn(){if(lc in Bt){var lt=Bt[lc];wc(lt)?lt=pn.getElements(pn.create(lt,!0)):lt&&(lt=pn.getElements(lt),Le.command(lt,"invalid elements",et.commandStr));var en=Ho(function(In,Nn){if(lt){var _n=In.link(lt);return In.ELEMENTS=_n,_n}return In.ELEMENTS=null,null});return en.value=lt,en}if(lc in on){var ln=on[lc];return ya(ln,function(In,Nn){var _n=In.shared,Zn=_n.isBufferArgs,Rr=_n.elements,gi=In.invoke(Nn,ln),Ar=Nn.def("null"),$r=Nn.def(Zn,"(",gi,")"),li=In.cond($r).then(Ar,"=",Rr,".createStream(",gi,");").else(Ar,"=",Rr,".getElements(",gi,");");return Le.optional(function(){In.assert(li.else,"!"+gi+"||"+Ar,"invalid elements")}),Nn.entry(li),Nn.exit(In.cond($r).then(Rr,".destroyStream(",Ar,");")),In.ELEMENTS=Ar,Ar})}return null}();function Zt(lt,en){if(lt in Bt){var ln=0|Bt[lt];return Le.command(!en||ln>=0,"invalid "+lt,et.commandStr),Ho(function(Nn,_n){return en&&(Nn.OFFSET=ln),ln})}if(lt in on){var In=on[lt];return ya(In,function(Nn,_n){var Zn=Nn.invoke(_n,In);return en&&(Nn.OFFSET=Zn,Le.optional(function(){Nn.assert(_n,Zn+">=0","invalid "+lt)})),Zn})}return en&&Ht?Ho(function(Nn,_n){return Nn.OFFSET="0",0}):null}var ft=Zt(fh,!0);return{elements:Ht,primitive:function jt(){if(El in Bt){var lt=Bt[El];return Le.commandParameter(lt,ws,"invalid primitve",et.commandStr),Ho(function(ln,In){return ws[lt]})}if(El in on){var en=on[El];return ya(en,function(ln,In){var Nn=ln.constants.primTypes,_n=ln.invoke(In,en);return Le.optional(function(){ln.assert(In,_n+" in "+Nn,"invalid primitive, must be one of "+Object.keys(ws))}),In.def(Nn,"[",_n,"]")})}return Ht?Cl(Ht)?Ho(Ht.value?function(ln,In){return In.def(ln.ELEMENTS,".primType")}:function(){return 4}):new fs(Ht.thisDep,Ht.contextDep,Ht.propDep,function(ln,In){var Nn=ln.ELEMENTS;return In.def(Nn,"?",Nn,".primType:",4)}):null}(),count:function Lt(){if(_l in Bt){var lt=0|Bt[_l];return Le.command("number"==typeof lt&&lt>=0,"invalid vertex count",et.commandStr),Ho(function(){return lt})}if(_l in on){var en=on[_l];return ya(en,function(Nn,_n){var Zn=Nn.invoke(_n,en);return Le.optional(function(){Nn.assert(_n,"typeof "+Zn+'==="number"&&'+Zn+">=0&&"+Zn+"===("+Zn+"|0)","invalid vertex count")}),Zn})}if(Ht){if(Cl(Ht)){if(Ht)return ft?new fs(ft.thisDep,ft.contextDep,ft.propDep,function(Nn,_n){var Zn=_n.def(Nn.ELEMENTS,".vertCount-",Nn.OFFSET);return Le.optional(function(){Nn.assert(_n,Zn+">=0","invalid vertex offset/element buffer too small")}),Zn}):Ho(function(Nn,_n){return _n.def(Nn.ELEMENTS,".vertCount")});var ln=Ho(function(){return-1});return Le.optional(function(){ln.MISSING=!0}),ln}var In=new fs(Ht.thisDep||ft.thisDep,Ht.contextDep||ft.contextDep,Ht.propDep||ft.propDep,function(Nn,_n){var Zn=Nn.ELEMENTS;return Nn.OFFSET?_n.def(Zn,"?",Zn,".vertCount-",Nn.OFFSET,":-1"):_n.def(Zn,"?",Zn,".vertCount:-1")});return Le.optional(function(){In.DYNAMIC=!0}),In}return null}(),instances:Zt(hh,!1),offset:ft}}(ht,sn),en=function Lr(ht,et){var Bt=ht.static,on=ht.dynamic,sn={};return Be.forEach(function(Ht){var jt=St(Ht);function Zt(ft,Lt){if(Ht in Bt){var lt=ft(Bt[Ht]);sn[jt]=Ho(function(){return lt})}else if(Ht in on){var en=on[Ht];sn[jt]=ya(en,function(ln,In){return Lt(ln,In,ln.invoke(In,en))})}}switch(Ht){case Rt:case Wp:case"dither":case uc:case Yp:case tu:case yg:case qp:case ac:case ad:return Zt(function(ft){return Le.commandType(ft,"boolean",Ht,et.commandStr),ft},function(ft,Lt,lt){return Le.optional(function(){ft.assert(Lt,"typeof "+lt+'==="boolean"',"invalid flag "+Ht,ft.commandStr)}),lt});case Xp:return Zt(function(ft){return Le.commandParameter(ft,ol,"invalid "+Ht,et.commandStr),ol[ft]},function(ft,Lt,lt){var en=ft.constants.compareFuncs;return Le.optional(function(){ft.assert(Lt,lt+" in "+en,"invalid "+Ht+", must be one of "+Object.keys(ol))}),Lt.def(en,"[",lt,"]")});case V0:return Zt(function(ft){return Le.command(Co(ft)&&2===ft.length&&"number"==typeof ft[0]&&"number"==typeof ft[1]&&ft[0]<=ft[1],"depth range is 2d array",et.commandStr),ft},function(ft,Lt,lt){return Le.optional(function(){ft.assert(Lt,ft.shared.isArrayLike+"("+lt+")&&"+lt+".length===2&&typeof "+lt+'[0]==="number"&&typeof '+lt+'[1]==="number"&&'+lt+"[0]<="+lt+"[1]","depth range must be a 2d array")}),[Lt.def("+",lt,"[0]"),Lt.def("+",lt,"[1]")]});case sh:return Zt(function(ft){Le.commandType(ft,"object","blend.func",et.commandStr);var Lt="srcRGB"in ft?ft.srcRGB:ft.src,lt="srcAlpha"in ft?ft.srcAlpha:ft.src,en="dstRGB"in ft?ft.dstRGB:ft.dst,ln="dstAlpha"in ft?ft.dstAlpha:ft.dst;return Le.commandParameter(Lt,La,jt+".srcRGB",et.commandStr),Le.commandParameter(lt,La,jt+".srcAlpha",et.commandStr),Le.commandParameter(en,La,jt+".dstRGB",et.commandStr),Le.commandParameter(ln,La,jt+".dstAlpha",et.commandStr),Le.command(-1===fd.indexOf(Lt+", "+en),"unallowed blending combination (srcRGB, dstRGB) = ("+Lt+", "+en+")",et.commandStr),[La[Lt],La[en],La[lt],La[ln]]},function(ft,Lt,lt){var en=ft.constants.blendFuncs;function ln(Ar,$r){var li=Lt.def('"',Ar,$r,'" in ',lt,"?",lt,".",Ar,$r,":",lt,".",Ar);return Le.optional(function(){ft.assert(Lt,li+" in "+en,"invalid "+Ht+"."+Ar+$r+", must be one of "+Object.keys(La))}),li}Le.optional(function(){ft.assert(Lt,lt+"&&typeof "+lt+'==="object"',"invalid blend func, must be an object")});var In=ln("src","RGB"),Nn=ln("dst","RGB");Le.optional(function(){ft.assert(Lt,ft.constants.invalidBlendCombinations+".indexOf("+In+'+", "+'+Nn+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var _n=Lt.def(en,"[",In,"]"),Zn=Lt.def(en,"[",ln("src","Alpha"),"]");return[_n,Lt.def(en,"[",Nn,"]"),Zn,Lt.def(en,"[",ln("dst","Alpha"),"]")]});case oc:return Zt(function(ft){return"string"==typeof ft?(Le.commandParameter(ft,se,"invalid "+Ht,et.commandStr),[se[ft],se[ft]]):"object"==typeof ft?(Le.commandParameter(ft.rgb,se,Ht+".rgb",et.commandStr),Le.commandParameter(ft.alpha,se,Ht+".alpha",et.commandStr),[se[ft.rgb],se[ft.alpha]]):void Le.commandRaise("invalid blend.equation",et.commandStr)},function(ft,Lt,lt){var en=ft.constants.blendEquations,ln=Lt.def(),In=Lt.def(),Nn=ft.cond("typeof ",lt,'==="string"');return Le.optional(function(){function _n(Zn,Rr,gi){ft.assert(Zn,gi+" in "+en,"invalid "+Rr+", must be one of "+Object.keys(se))}_n(Nn.then,Ht,lt),ft.assert(Nn.else,lt+"&&typeof "+lt+'==="object"',"invalid "+Ht),_n(Nn.else,Ht+".rgb",lt+".rgb"),_n(Nn.else,Ht+".alpha",lt+".alpha")}),Nn.then(ln,"=",In,"=",en,"[",lt,"];"),Nn.else(ln,"=",en,"[",lt,".rgb];",In,"=",en,"[",lt,".alpha];"),Lt(Nn),[ln,In]});case $p:return Zt(function(ft){return Le.command(Co(ft)&&4===ft.length,"blend.color must be a 4d array",et.commandStr),Ae(4,function(Lt){return+ft[Lt]})},function(ft,Lt,lt){return Le.optional(function(){ft.assert(Lt,ft.shared.isArrayLike+"("+lt+")&&"+lt+".length===4","blend.color must be a 4d array")}),Ae(4,function(en){return Lt.def("+",lt,"[",en,"]")})});case Kp:return Zt(function(ft){return Le.commandType(ft,"number",jt,et.commandStr),0|ft},function(ft,Lt,lt){return Le.optional(function(){ft.assert(Lt,"typeof "+lt+'==="number"',"invalid stencil.mask")}),Lt.def(lt,"|0")});case lh:return Zt(function(ft){Le.commandType(ft,"object",jt,et.commandStr);var Lt=ft.cmp||"keep",lt=ft.ref||0,en="mask"in ft?ft.mask:-1;return Le.commandParameter(Lt,ol,Ht+".cmp",et.commandStr),Le.commandType(lt,"number",Ht+".ref",et.commandStr),Le.commandType(en,"number",Ht+".mask",et.commandStr),[ol[Lt],lt,en]},function(ft,Lt,lt){var en=ft.constants.compareFuncs;return Le.optional(function(){function _n(){ft.assert(Lt,Array.prototype.join.call(arguments,""),"invalid stencil.func")}_n(lt+"&&typeof ",lt,'==="object"'),_n('!("cmp" in ',lt,")||(",lt,".cmp in ",en,")")}),[Lt.def('"cmp" in ',lt,"?",en,"[",lt,".cmp]",":",yc),Lt.def(lt,".ref|0"),Lt.def('"mask" in ',lt,"?",lt,".mask|0:-1")]});case ca:case hf:return Zt(function(ft){Le.commandType(ft,"object",jt,et.commandStr);var Lt=ft.fail||"keep",lt=ft.zfail||"keep",en=ft.zpass||"keep";return Le.commandParameter(Lt,bc,Ht+".fail",et.commandStr),Le.commandParameter(lt,bc,Ht+".zfail",et.commandStr),Le.commandParameter(en,bc,Ht+".zpass",et.commandStr),[Ht===hf?yf:ph,bc[Lt],bc[lt],bc[en]]},function(ft,Lt,lt){var en=ft.constants.stencilOps;function ln(In){return Le.optional(function(){ft.assert(Lt,'!("'+In+'" in '+lt+")||("+lt+"."+In+" in "+en+")","invalid "+Ht+"."+In+", must be one of "+Object.keys(bc))}),Lt.def('"',In,'" in ',lt,"?",en,"[",lt,".",In,"]:",yc)}return Le.optional(function(){ft.assert(Lt,lt+"&&typeof "+lt+'==="object"',"invalid "+Ht)}),[Ht===hf?yf:ph,ln("fail"),ln("zfail"),ln("zpass")]});case wl:return Zt(function(ft){Le.commandType(ft,"object",jt,et.commandStr);var Lt=0|ft.factor,lt=0|ft.units;return Le.commandType(Lt,"number",jt+".factor",et.commandStr),Le.commandType(lt,"number",jt+".units",et.commandStr),[Lt,lt]},function(ft,Lt,lt){return Le.optional(function(){ft.assert(Lt,lt+"&&typeof "+lt+'==="object"',"invalid "+Ht)}),[Lt.def(lt,".factor|0"),Lt.def(lt,".units|0")]});case mg:return Zt(function(ft){var Lt=0;return"front"===ft?Lt=ph:"back"===ft&&(Lt=yf),Le.command(!!Lt,jt,et.commandStr),Lt},function(ft,Lt,lt){return Le.optional(function(){ft.assert(Lt,lt+'==="front"||'+lt+'==="back"',"invalid cull.face")}),Lt.def(lt,'==="front"?',ph,":",yf)});case uh:return Zt(function(ft){return Le.command("number"==typeof ft&&ft>=hn.lineWidthDims[0]&&ft<=hn.lineWidthDims[1],"invalid line width, must be a positive number between "+hn.lineWidthDims[0]+" and "+hn.lineWidthDims[1],et.commandStr),ft},function(ft,Lt,lt){return Le.optional(function(){ft.assert(Lt,"typeof "+lt+'==="number"&&'+lt+">="+hn.lineWidthDims[0]+"&&"+lt+"<="+hn.lineWidthDims[1],"invalid line width")}),lt});case el:return Zt(function(ft){return Le.commandParameter(ft,mh,jt,et.commandStr),mh[ft]},function(ft,Lt,lt){return Le.optional(function(){ft.assert(Lt,lt+'==="cw"||'+lt+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Lt.def(lt+'==="cw"?2304:2305')});case ff:return Zt(function(ft){return Le.command(Co(ft)&&4===ft.length,"color.mask must be length 4 array",et.commandStr),ft.map(function(Lt){return!!Lt})},function(ft,Lt,lt){return Le.optional(function(){ft.assert(Lt,ft.shared.isArrayLike+"("+lt+")&&"+lt+".length===4","invalid color.mask")}),Ae(4,function(en){return"!!"+lt+"["+en+"]"})});case sc:return Zt(function(ft){Le.command("object"==typeof ft&&ft,jt,et.commandStr);var Lt="value"in ft?ft.value:1,lt=!!ft.invert;return Le.command("number"==typeof Lt&&Lt>=0&&Lt<=1,"sample.coverage.value must be a number between 0 and 1",et.commandStr),[Lt,lt]},function(ft,Lt,lt){return Le.optional(function(){ft.assert(Lt,lt+"&&typeof "+lt+'==="object"',"invalid sample.coverage")}),[Lt.def('"value" in ',lt,"?+",lt,".value:1"),Lt.def("!!",lt,".invert")]})}}),sn}(ht,sn),ln=function Ur(ht,et,Bt){var on=ht.static,sn=ht.dynamic;function Ht(lt){if(lt in on){var en=ot.id(on[lt]);Le.optional(function(){Yn.shader(wf[lt],en,Le.guessCommand())});var ln=Ho(function(){return en});return ln.id=en,ln}if(lt in sn){var In=sn[lt];return ya(In,function(Nn,_n){var Zn=Nn.invoke(_n,In),Rr=_n.def(Nn.shared.strings,".id(",Zn,")");return Le.optional(function(){_n(Nn.shared.shader,".shader(",wf[lt],",",Rr,",",Nn.command,");")}),Rr})}return null}var Lt,jt=Ht(nl),Zt=Ht(yu),ft=null;return Cl(jt)&&Cl(Zt)?(ft=Yn.program(Zt.id,jt.id,null,Bt),Lt=Ho(function(lt,en){return lt.link(ft)})):Lt=new fs(jt&&jt.thisDep||Zt&&Zt.thisDep,jt&&jt.contextDep||Zt&&Zt.contextDep,jt&&jt.propDep||Zt&&Zt.propDep,function(lt,en){var In,ln=lt.shared.shader;In=jt?jt.append(lt,en):en.def(ln,".",nl);var _n=ln+".program("+(Zt?Zt.append(lt,en):en.def(ln,".",yu))+","+In;return Le.optional(function(){_n+=","+lt.command}),en.def(_n+")")}),{frag:jt,vert:Zt,progVar:Lt,program:ft}}(ht,0,Zt);function In(Ar){var $r=Lt[Ar];$r&&(en[Ar]=$r)}In(As),In(St(ch));var Nn=Object.keys(en).length>0,_n={framebuffer:ft,draw:lt,shader:ln,state:en,dirty:Nn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(_n.profile=function fr(ht){var on,et=ht.static,Bt=ht.dynamic;if(xl in et){var sn=!!et[xl];(on=Ho(function(jt,Zt){return sn})).enable=sn}else if(xl in Bt){var Ht=Bt[xl];on=ya(Ht,function(jt,Zt){return jt.invoke(Zt,Ht)})}return on}(ht),_n.uniforms=function Do(ht,et){var Bt=ht.static,on=ht.dynamic,sn={};return Object.keys(Bt).forEach(function(Ht){var Zt,jt=Bt[Ht];if("number"==typeof jt||"boolean"==typeof jt)Zt=Ho(function(){return jt});else if("function"==typeof jt){var ft=jt._reglType;"texture2d"===ft||"textureCube"===ft?Zt=Ho(function(Lt){return Lt.link(jt)}):"framebuffer"===ft||"framebufferCube"===ft?(Le.command(jt.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Ht+'"',et.commandStr),Zt=Ho(function(Lt){return Lt.link(jt.color[0])})):Le.commandRaise('invalid data for uniform "'+Ht+'"',et.commandStr)}else Co(jt)?Zt=Ho(function(Lt){return Lt.global.def("[",Ae(jt.length,function(en){return Le.command("number"==typeof jt[en]||"boolean"==typeof jt[en],"invalid uniform "+Ht,Lt.commandStr),jt[en]}),"]")}):Le.commandRaise('invalid or missing data for uniform "'+Ht+'"',et.commandStr);Zt.value=jt,sn[Ht]=Zt}),Object.keys(on).forEach(function(Ht){var jt=on[Ht];sn[Ht]=ya(jt,function(Zt,ft){return Zt.invoke(ft,jt)})}),sn}(Bt,sn),_n.drawVAO=_n.scopeVAO=function zo(ht,et){var Bt=ht.static,on=ht.dynamic;if(dh in Bt){var sn=Bt[dh];return null!==sn&&null===Jn.getVAO(sn)&&(sn=Jn.createVAO(sn)),Ho(function(jt){return jt.link(Jn.getVAO(sn))})}if(dh in on){var Ht=on[dh];return ya(Ht,function(jt,Zt){var ft=jt.invoke(Zt,Ht);return Zt.def(jt.shared.vao+".getVAO("+ft+")")})}return null}(ht),!_n.drawVAO&&ln.program&&!Zt&&Dt.angle_instanced_arrays){var Zn=!0,Rr=ln.program.attributes.map(function(Ar){var $r=et.static[Ar];return Zn=Zn&&!!$r,$r});if(Zn&&Rr.length>0){var gi=Jn.getVAO(Jn.createVAO(Rr));_n.drawVAO=new fs(null,null,null,function(Ar,$r){return Ar.link(gi)}),_n.useVAO=!0}}return Zt?_n.useVAO=!0:_n.attributes=function ui(ht,et){var Bt=ht.static,on=ht.dynamic,sn={};return Object.keys(Bt).forEach(function(Ht){var jt=Bt[Ht],Zt=ot.id(Ht),ft=new J;if(wc(jt))ft.state=1,ft.buffer=Dn.getBuffer(Dn.create(jt,Sl,!1,!0)),ft.type=0;else{var Lt=Dn.getBuffer(jt);if(Lt)ft.state=1,ft.buffer=Lt,ft.type=0;else if(Le.command("object"==typeof jt&&jt,"invalid data for attribute "+Ht,et.commandStr),"constant"in jt){var lt=jt.constant;ft.buffer="null",ft.state=2,"number"==typeof lt?ft.x=lt:(Le.command(Co(lt)&&lt.length>0&&lt.length<=4,"invalid constant for attribute "+Ht,et.commandStr),rf.forEach(function(Rr,gi){gi<lt.length&&(ft[Rr]=lt[gi])}))}else{Lt=wc(jt.buffer)?Dn.getBuffer(Dn.create(jt.buffer,Sl,!1,!0)):Dn.getBuffer(jt.buffer),Le.command(!!Lt,'missing buffer for attribute "'+Ht+'"',et.commandStr);var en=0|jt.offset;Le.command(en>=0,'invalid offset for attribute "'+Ht+'"',et.commandStr);var ln=0|jt.stride;Le.command(ln>=0&&ln<256,'invalid stride for attribute "'+Ht+'", must be integer betweeen [0, 255]',et.commandStr);var In=0|jt.size;Le.command(!("size"in jt)||In>0&&In<=4,'invalid size for attribute "'+Ht+'", must be 1,2,3,4',et.commandStr);var Nn=!!jt.normalized,_n=0;"type"in jt&&(Le.commandParameter(jt.type,Ii,"invalid type for attribute "+Ht,et.commandStr),_n=Ii[jt.type]);var Zn=0|jt.divisor;"divisor"in jt&&(Le.command(0===Zn||he,'cannot specify divisor for attribute "'+Ht+'", instancing not supported',et.commandStr),Le.command(Zn>=0,'invalid divisor for attribute "'+Ht+'"',et.commandStr)),Le.optional(function(){var Rr=et.commandStr,gi=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(jt).forEach(function(Ar){Le.command(gi.indexOf(Ar)>=0,'unknown parameter "'+Ar+'" for attribute pointer "'+Ht+'" (valid parameters are '+gi+")",Rr)})}),ft.buffer=Lt,ft.state=1,ft.size=In,ft.normalized=Nn,ft.type=_n||Lt.dtype,ft.offset=en,ft.stride=ln,ft.divisor=Zn}}sn[Ht]=Ho(function(Rr,gi){var Ar=Rr.attribCache;if(Zt in Ar)return Ar[Zt];var $r={isStream:!1};return Object.keys(ft).forEach(function(li){$r[li]=ft[li]}),ft.buffer&&($r.buffer=Rr.link(ft.buffer),$r.type=$r.type||$r.buffer+".dtype"),Ar[Zt]=$r,$r})}),Object.keys(on).forEach(function(Ht){var jt=on[Ht];sn[Ht]=ya(jt,function Zt(ft,Lt){var lt=ft.invoke(Lt,jt),en=ft.shared,ln=ft.constants,In=en.isBufferArgs,Nn=en.buffer;Le.optional(function(){ft.assert(Lt,lt+"&&(typeof "+lt+'==="object"||typeof '+lt+'==="function")&&('+In+"("+lt+")||"+Nn+".getBuffer("+lt+")||"+Nn+".getBuffer("+lt+".buffer)||"+In+"("+lt+'.buffer)||("constant" in '+lt+"&&(typeof "+lt+'.constant==="number"||'+en.isArrayLike+"("+lt+".constant))))",'invalid dynamic attribute "'+Ht+'"')});var _n={isStream:Lt.def(!1)},Zn=new J;Zn.state=1,Object.keys(Zn).forEach(function($r){_n[$r]=Lt.def(""+Zn[$r])});var Rr=_n.buffer,gi=_n.type;function Ar($r){Lt(_n[$r],"=",lt,".",$r,"|0;")}return Lt("if(",In,"(",lt,")){",_n.isStream,"=true;",Rr,"=",Nn,".createStream(",Sl,",",lt,");",gi,"=",Rr,".dtype;","}else{",Rr,"=",Nn,".getBuffer(",lt,");","if(",Rr,"){",gi,"=",Rr,".dtype;",'}else if("constant" in ',lt,"){",_n.state,"=",2,";","if(typeof "+lt+'.constant === "number"){',_n[rf[0]],"=",lt,".constant;",rf.slice(1).map(function($r){return _n[$r]}).join("="),"=0;","}else{",rf.map(function($r,li){return _n[$r]+"="+lt+".constant.length>"+li+"?"+lt+".constant["+li+"]:0;"}).join(""),"}}else{","if(",In,"(",lt,".buffer)){",Rr,"=",Nn,".createStream(",Sl,",",lt,".buffer);","}else{",Rr,"=",Nn,".getBuffer(",lt,".buffer);","}",gi,'="type" in ',lt,"?",ln.glTypes,"[",lt,".type]:",Rr,".dtype;",_n.normalized,"=!!",lt,".normalized;"),Ar("size"),Ar("offset"),Ar("stride"),Ar("divisor"),Lt("}}"),Lt.exit("if(",_n.isStream,"){",Nn,".destroyStream(",Rr,");","}"),_n})}),sn}(et,sn),_n.context=function mo(ht){var et=ht.static,Bt=ht.dynamic,on={};return Object.keys(et).forEach(function(sn){var Ht=et[sn];on[sn]=Ho(function(jt,Zt){return"number"==typeof Ht||"boolean"==typeof Ht?""+Ht:jt.link(Ht)})}),Object.keys(Bt).forEach(function(sn){var Ht=Bt[sn];on[sn]=ya(Ht,function(jt,Zt){return jt.invoke(Zt,Ht)})}),on}(on),_n}function Lo(ht,et,Bt){var sn=ht.shared.context,Ht=ht.scope();Object.keys(Bt).forEach(function(jt){et.save(sn,"."+jt);var ft=Bt[jt].append(ht,et);Array.isArray(ft)?Ht(sn,".",jt,"=[",ft.join(),"];"):Ht(sn,".",jt,"=",ft,";")}),et(Ht)}function Go(ht,et,Bt,on){var Zt,sn=ht.shared,Ht=sn.gl,jt=sn.framebuffer;ye&&(Zt=et.def(sn.extensions,".webgl_draw_buffers"));var en,ft=ht.constants,Lt=ft.drawBuffer,lt=ft.backBuffer;en=Bt?Bt.append(ht,et):et.def(jt,".next"),on||et("if(",en,"!==",jt,".cur){"),et("if(",en,"){",Ht,".bindFramebuffer(",36160,",",en,".framebuffer);"),ye&&et(Zt,".drawBuffersWEBGL(",Lt,"[",en,".colorAttachments.length]);"),et("}else{",Ht,".bindFramebuffer(",36160,",null);"),ye&&et(Zt,".drawBuffersWEBGL(",lt,");"),et("}",jt,".cur=",en,";"),on||et("}")}function ba(ht,et,Bt){var on=ht.shared,sn=on.gl,Ht=ht.current,jt=ht.next,Zt=on.current,ft=on.next,Lt=ht.cond(Zt,".dirty");Be.forEach(function(lt){var ln,In,en=St(lt);if(!(en in Bt.state))if(en in jt){ln=jt[en],In=Ht[en];var Nn=Ae(Se[en].length,function(Zn){return Lt.def(ln,"[",Zn,"]")});Lt(ht.cond(Nn.map(function(Zn,Rr){return Zn+"!=="+In+"["+Rr+"]"}).join("||")).then(sn,".",Qe[en],"(",Nn,");",Nn.map(function(Zn,Rr){return In+"["+Rr+"]="+Zn}).join(";"),";"))}else{ln=Lt.def(ft,".",en);var _n=ht.cond(ln,"!==",Zt,".",en);Lt(_n),en in nt?_n(ht.cond(ln).then(sn,".enable(",nt[en],");").else(sn,".disable(",nt[en],");"),Zt,".",en,"=",ln,";"):_n(sn,".",Qe[en],"(",ln,");",Zt,".",en,"=",ln,";")}}),0===Object.keys(Bt.state).length&&Lt(Zt,".dirty=false;"),et(Lt)}function ka(ht,et,Bt,on){var sn=ht.shared,Ht=ht.current,jt=sn.current,Zt=sn.gl;iv(Object.keys(Bt)).forEach(function(ft){var Lt=Bt[ft];if(!on||on(Lt)){var lt=Lt.append(ht,et);if(nt[ft]){var en=nt[ft];Cl(Lt)?et(Zt,lt?".enable(":".disable(",en,");"):et(ht.cond(lt).then(Zt,".enable(",en,");").else(Zt,".disable(",en,");")),et(jt,".",ft,"=",lt,";")}else if(Co(lt)){var ln=Ht[ft];et(Zt,".",Qe[ft],"(",lt,");",lt.map(function(In,Nn){return ln+"["+Nn+"]="+In}).join(";"),";")}else et(Zt,".",Qe[ft],"(",lt,");",jt,".",ft,"=",lt,";")}})}function ha(ht,et){he&&(ht.instancing=et.def(ht.shared.extensions,".angle_instanced_arrays"))}function di(ht,et,Bt,on,sn){var en,ln,Zn,Ht=ht.shared,jt=ht.stats,Zt=Ht.current,ft=Ht.timer,Lt=Bt.profile;function lt(){return typeof performance>"u"?"Date.now()":"performance.now()"}function In(Ar){Ar(en=et.def(),"=",lt(),";"),"string"==typeof sn?Ar(jt,".count+=",sn,";"):Ar(jt,".count++;"),C&&(on?Ar(ln=et.def(),"=",ft,".getNumPendingQueries();"):Ar(ft,".beginQuery(",jt,");"))}function Nn(Ar){Ar(jt,".cpuTime+=",lt(),"-",en,";"),C&&(on?Ar(ft,".pushScopeStats(",ln,",",ft,".getNumPendingQueries(),",jt,");"):Ar(ft,".endQuery();"))}function _n(Ar){var $r=et.def(Zt,".profile");et(Zt,".profile=",Ar,";"),et.exit(Zt,".profile=",$r,";")}if(Lt){if(Cl(Lt))return void(Lt.enable?(In(et),Nn(et.exit),_n("true")):_n("false"));_n(Zn=Lt.append(ht,et))}else Zn=et.def(Zt,".profile");var Rr=ht.block();In(Rr),et("if(",Zn,"){",Rr,"}");var gi=ht.block();Nn(gi),et.exit("if(",Zn,"){",gi,"}")}function _o(ht,et,Bt,on,sn){var Ht=ht.shared;on.forEach(function(ft){var en,Lt=ft.name,lt=Bt.attributes[Lt];if(lt){if(!sn(lt))return;en=lt.append(ht,et)}else{if(!sn(al))return;var ln=ht.scopeAttrib(Lt);Le.optional(function(){ht.assert(et,ln+".state","missing attribute "+Lt)}),en={},Object.keys(new J).forEach(function(In){en[In]=et.def(ln,".",In)})}!function Zt(ft,Lt,lt){var en=Ht.gl,ln=et.def(ft,".location"),In=et.def(Ht.attributes,"[",ln,"]"),Nn=lt.state,_n=lt.buffer,Zn=[lt.x,lt.y,lt.z,lt.w],Rr=["buffer","normalized","offset","stride"];function gi(){et("if(!",In,".buffer){",en,".enableVertexAttribArray(",ln,");}");var li,$r=lt.type;if(li=lt.size?et.def(lt.size,"||",Lt):Lt,et("if(",In,".type!==",$r,"||",In,".size!==",li,"||",Rr.map(function(ta){return In+"."+ta+"!=="+lt[ta]}).join("||"),"){",en,".bindBuffer(",Sl,",",_n,".buffer);",en,".vertexAttribPointer(",[ln,li,$r,lt.normalized,lt.stride,lt.offset],");",In,".type=",$r,";",In,".size=",li,";",Rr.map(function(ta){return In+"."+ta+"="+lt[ta]+";"}).join(""),"}"),he){var Zi=lt.divisor;et("if(",In,".divisor!==",Zi,"){",ht.instancing,".vertexAttribDivisorANGLE(",[ln,Zi],");",In,".divisor=",Zi,";}")}}function Ar(){et("if(",In,".buffer){",en,".disableVertexAttribArray(",ln,");",In,".buffer=null;","}if(",rf.map(function($r,li){return In+"."+$r+"!=="+Zn[li]}).join("||"),"){",en,".vertexAttrib4f(",ln,",",Zn,");",rf.map(function($r,li){return In+"."+$r+"="+Zn[li]+";"}).join(""),"}")}1===Nn?gi():2===Nn?Ar():(et("if(",Nn,"===",1,"){"),gi(),et("}else{"),Ar(),et("}"))}(ht.link(ft),function jt(ft){switch(ft){case Eg:case Sg:case Mg:return 2;case _g:case ea:case cd:return 3;case Ml:case pc:case $a:return 4;default:return 1}}(ft.info.type),en)})}function Ki(ht,et,Bt,on,sn){for(var Zt,Ht=ht.shared,jt=Ht.gl,ft=0;ft<on.length;++ft){var _n,Lt=on[ft],lt=Lt.name,en=Lt.info.type,ln=Bt.uniforms[lt],Nn=ht.link(Lt)+".location";if(ln){if(!sn(ln))continue;if(Cl(ln)){var Zn=ln.value;if(Le.command(null!==Zn&&typeof Zn<"u",'missing uniform "'+lt+'"',ht.commandStr),en===il||en===mc){Le.command("function"==typeof Zn&&(en===il&&("texture2d"===Zn._reglType||"framebuffer"===Zn._reglType)||en===mc&&("textureCube"===Zn._reglType||"framebufferCube"===Zn._reglType)),"invalid texture for uniform "+lt,ht.commandStr);var Rr=ht.link(Zn._texture||Zn.color[0]._texture);et(jt,".uniform1i(",Nn,",",Rr+".bind());"),et.exit(Rr,".unbind();")}else if(en===js||en===mf||en===rl){Le.optional(function(){Le.command(Co(Zn),"invalid matrix for uniform "+lt,ht.commandStr),Le.command(en===js&&4===Zn.length||en===mf&&9===Zn.length||en===rl&&16===Zn.length,"invalid length for matrix uniform "+lt,ht.commandStr)});var gi=ht.global.def("new Float32Array(["+Array.prototype.slice.call(Zn)+"])"),Ar=2;en===mf?Ar=3:en===rl&&(Ar=4),et(jt,".uniformMatrix",Ar,"fv(",Nn,",false,",gi,");")}else{switch(en){case 5126:Le.commandType(Zn,"number","uniform "+lt,ht.commandStr),Zt="1f";break;case Eg:Le.command(Co(Zn)&&2===Zn.length,"uniform "+lt,ht.commandStr),Zt="2f";break;case _g:Le.command(Co(Zn)&&3===Zn.length,"uniform "+lt,ht.commandStr),Zt="3f";break;case Ml:Le.command(Co(Zn)&&4===Zn.length,"uniform "+lt,ht.commandStr),Zt="4f";break;case 35670:Le.commandType(Zn,"boolean","uniform "+lt,ht.commandStr),Zt="1i";break;case 5124:Le.commandType(Zn,"number","uniform "+lt,ht.commandStr),Zt="1i";break;case Mg:case Sg:Le.command(Co(Zn)&&2===Zn.length,"uniform "+lt,ht.commandStr),Zt="2i";break;case cd:case ea:Le.command(Co(Zn)&&3===Zn.length,"uniform "+lt,ht.commandStr),Zt="3i";break;case $a:case pc:Le.command(Co(Zn)&&4===Zn.length,"uniform "+lt,ht.commandStr),Zt="4i"}et(jt,".uniform",Zt,"(",Nn,",",Co(Zn)?Array.prototype.slice.call(Zn):Zn,");")}continue}_n=ln.append(ht,et)}else{if(!sn(al))continue;_n=et.def(Ht.uniforms,"[",ot.id(lt),"]")}en===il?(Le(!Array.isArray(_n),"must specify a scalar prop for textures"),et("if(",_n,"&&",_n,'._reglType==="framebuffer"){',_n,"=",_n,".color[0];","}")):en===mc&&(Le(!Array.isArray(_n),"must specify a scalar prop for cube maps"),et("if(",_n,"&&",_n,'._reglType==="framebufferCube"){',_n,"=",_n,".color[0];","}")),Le.optional(function(){function Gs(Bu,sv){ht.assert(et,Bu,'bad data or missing for uniform "'+lt+'".  '+sv)}function rm(Bu){Le(!Array.isArray(_n),"must not specify an array type for uniform"),Gs("typeof "+_n+'==="'+Bu+'"',"invalid type, expected "+Bu)}function bu(Bu,sv){Array.isArray(_n)?Le(_n.length===Bu,"must have length "+Bu):Gs(Ht.isArrayLike+"("+_n+")&&"+_n+".length==="+Bu,"invalid vector, should have length "+Bu)}function av(Bu){Le(!Array.isArray(_n),"must not specify a value type"),Gs("typeof "+_n+'==="function"&&'+_n+'._reglType==="texture'+(3553===Bu?"2d":"Cube")+'"',"invalid texture type")}switch(en){case 5124:rm("number");break;case Sg:bu(2);break;case ea:bu(3);break;case pc:bu(4);break;case 5126:rm("number");break;case Eg:bu(2);break;case _g:bu(3);break;case Ml:bu(4);break;case 35670:rm("boolean");break;case Mg:bu(2);break;case cd:bu(3);break;case $a:case js:bu(4);break;case mf:bu(9);break;case rl:bu(16);break;case il:av(3553);break;case mc:av(34067)}});var $r=1;switch(en){case il:case mc:var li=et.def(_n,"._texture");et(jt,".uniform1i(",Nn,",",li,".bind());"),et.exit(li,".unbind();");continue;case 5124:case 35670:Zt="1i";break;case Sg:case Mg:Zt="2i",$r=2;break;case ea:case cd:Zt="3i",$r=3;break;case pc:case $a:Zt="4i",$r=4;break;case 5126:Zt="1f";break;case Eg:Zt="2f",$r=2;break;case _g:Zt="3f",$r=3;break;case Ml:Zt="4f",$r=4;break;case js:Zt="Matrix2fv";break;case mf:Zt="Matrix3fv";break;case rl:Zt="Matrix4fv"}if(et(jt,".uniform",Zt,"(",Nn,","),"M"===Zt.charAt(0)){var Zi=Math.pow(en-js+2,2),ta=ht.global.def("new Float32Array(",Zi,")");Array.isArray(_n)?et("false,(",Ae(Zi,function(Gs){return ta+"["+Gs+"]="+_n[Gs]}),",",ta,")"):et("false,(Array.isArray(",_n,")||",_n," instanceof Float32Array)?",_n,":(",Ae(Zi,function(Gs){return ta+"["+Gs+"]="+_n+"["+Gs+"]"}),",",ta,")")}else $r>1?et(Ae($r,function(Gs){return Array.isArray(_n)?_n[Gs]:_n+"["+Gs+"]"})):(Le(!Array.isArray(_n),"uniform value must not be an array"),et(_n));et(");")}}function Hr(ht,et,Bt,on){var sn=ht.shared,Ht=sn.gl,jt=sn.draw,Zt=on.draw;var lt=function ft(){var Zi,li=Zt.elements,ta=et;return li?((li.contextDep&&on.contextDynamic||li.propDep)&&(ta=Bt),Zi=li.append(ht,ta)):Zi=ta.def(jt,".",lc),Zi&&ta("if("+Zi+")"+Ht+".bindBuffer(34963,"+Zi+".buffer.buffer);"),Zi}();function en(li){var Zi=Zt[li];return Zi?Zi.append(ht,Zi.contextDep&&on.contextDynamic||Zi.propDep?Bt:et):et.def(jt,".",li)}var _n,Zn,ln=en(El),In=en(fh),Nn=function Lt(){var Zi,li=Zt.count,ta=et;return li?((li.contextDep&&on.contextDynamic||li.propDep)&&(ta=Bt),Zi=li.append(ht,ta),Le.optional(function(){li.MISSING&&ht.assert(et,"false","missing vertex count"),li.DYNAMIC&&ht.assert(ta,Zi+">=0","missing vertex count")})):(Zi=ta.def(jt,".",_l),Le.optional(function(){ht.assert(ta,Zi+">=0","missing vertex count")})),Zi}();if("number"==typeof Nn){if(0===Nn)return}else Bt("if(",Nn,"){"),Bt.exit("}");he&&(_n=en(hh),Zn=ht.instancing);var Rr=lt+".type",gi=Zt.elements&&Cl(Zt.elements);function Ar(){function li(){Bt(Zn,".drawElementsInstancedANGLE(",[ln,Nn,Rr,In+"<<(("+Rr+"-5121)>>1)",_n],");")}function Zi(){Bt(Zn,".drawArraysInstancedANGLE(",[ln,In,Nn,_n],");")}lt?gi?li():(Bt("if(",lt,"){"),li(),Bt("}else{"),Zi(),Bt("}")):Zi()}function $r(){function li(){Bt(Ht+".drawElements("+[ln,Nn,Rr,In+"<<(("+Rr+"-5121)>>1)"]+");")}function Zi(){Bt(Ht+".drawArrays("+[ln,In,Nn]+");")}lt?gi?li():(Bt("if(",lt,"){"),li(),Bt("}else{"),Zi(),Bt("}")):Zi()}he&&("number"!=typeof _n||_n>=0)?"string"==typeof _n?(Bt("if(",_n,">0){"),Ar(),Bt("}else if(",_n,"<0){"),$r(),Bt("}")):Ar():$r()}function _i(ht,et,Bt,on,sn){var Ht=qn(),jt=Ht.proc("body",sn);return Le.optional(function(){Ht.commandStr=et.commandStr,Ht.command=Ht.link(et.commandStr)}),he&&(Ht.instancing=jt.def(Ht.shared.extensions,".angle_instanced_arrays")),ht(Ht,jt,Bt,on),Ht.compile().body}function ri(ht,et,Bt,on){ha(ht,et),Bt.useVAO?Bt.drawVAO?et(ht.shared.vao,".setVAO(",Bt.drawVAO.append(ht,et),");"):et(ht.shared.vao,".setVAO(",ht.shared.vao,".targetVAO);"):(et(ht.shared.vao,".setVAO(null);"),_o(ht,et,Bt,on.attributes,function(){return!0})),Ki(ht,et,Bt,on.uniforms,function(){return!0}),Hr(ht,et,et,Bt)}function sl(ht,et,Bt,on){function sn(){return!0}ht.batchId="a1",ha(ht,et),_o(ht,et,Bt,on.attributes,sn),Ki(ht,et,Bt,on.uniforms,sn),Hr(ht,et,et,Bt)}function wh(ht,et,Bt,on){ha(ht,et);var sn=Bt.contextDep,Ht=et.def(),ft=et.def();ht.shared.props=ft,ht.batchId=Ht;var Lt=ht.scope(),lt=ht.scope();function en(Rr){return Rr.contextDep&&sn||Rr.propDep}function ln(Rr){return!en(Rr)}if(et(Lt.entry,"for(",Ht,"=0;",Ht,"<","a1",";++",Ht,"){",ft,"=","a0","[",Ht,"];",lt,"}",Lt.exit),Bt.needsContext&&Lo(ht,lt,Bt.context),Bt.needsFramebuffer&&Go(ht,lt,Bt.framebuffer),ka(ht,lt,Bt.state,en),Bt.profile&&en(Bt.profile)&&di(ht,lt,Bt,!1,!0),on)Bt.useVAO?Bt.drawVAO?en(Bt.drawVAO)?lt(ht.shared.vao,".setVAO(",Bt.drawVAO.append(ht,lt),");"):Lt(ht.shared.vao,".setVAO(",Bt.drawVAO.append(ht,Lt),");"):Lt(ht.shared.vao,".setVAO(",ht.shared.vao,".targetVAO);"):(Lt(ht.shared.vao,".setVAO(null);"),_o(ht,Lt,Bt,on.attributes,ln),_o(ht,lt,Bt,on.attributes,en)),Ki(ht,Lt,Bt,on.uniforms,ln),Ki(ht,lt,Bt,on.uniforms,en),Hr(ht,Lt,lt,Bt);else{var In=ht.global.def("{}"),Nn=Bt.shader.progVar.append(ht,lt),_n=lt.def(Nn,".id"),Zn=lt.def(In,"[",_n,"]");lt(ht.shared.gl,".useProgram(",Nn,".program);","if(!",Zn,"){",Zn,"=",In,"[",_n,"]=",ht.link(function(Rr){return _i(sl,ht,Bt,Rr,2)}),"(",Nn,");}",Zn,".call(this,a0[",Ht,"],",Ht,");")}}function wr(ht,et,Bt){var on=et.static[Bt];if(on&&function dn(ht){if("object"==typeof ht&&!Co(ht)){for(var et=Object.keys(ht),Bt=0;Bt<et.length;++Bt)if(er.isDynamic(ht[et[Bt]]))return!0;return!1}}(on)){var sn=ht.global,Ht=Object.keys(on),jt=!1,Zt=!1,ft=!1,Lt=ht.global.def("{}");Ht.forEach(function(en){var ln=on[en];if(er.isDynamic(ln)){"function"==typeof ln&&(ln=on[en]=er.unbox(ln));var In=ya(ln,null);jt=jt||In.thisDep,ft=ft||In.propDep,Zt=Zt||In.contextDep}else{switch(sn(Lt,".",en,"="),typeof ln){case"number":sn(ln);break;case"string":sn('"',ln,'"');break;case"object":Array.isArray(ln)&&sn("[",ln.join(),"]");break;default:sn(ht.link(ln))}sn(";")}}),et.dynamic[Bt]=new er.DynamicVariable(4,{thisDep:jt,contextDep:Zt,propDep:ft,ref:Lt,append:function lt(en,ln){Ht.forEach(function(In){var Nn=on[In];if(er.isDynamic(Nn)){var _n=en.invoke(ln,Nn);ln(Lt,".",In,"=",_n,";")}})}}),delete et.static[Bt]}}return{next:Ie,current:Se,procs:function(){var ht=qn(),et=ht.proc("poll"),Bt=ht.proc("refresh"),on=ht.block();et(on),Bt(on);var ft,sn=ht.shared,Ht=sn.gl,jt=sn.next,Zt=sn.current;on(Zt,".dirty=false;"),Go(ht,et),Go(ht,Bt,null,!0),he&&(ft=ht.link(he)),Dt.oes_vertex_array_object&&Bt(ht.link(Dt.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Lt=0;Lt<hn.maxAttributes;++Lt){var lt=Bt.def(sn.attributes,"[",Lt,"]"),en=ht.cond(lt,".buffer");en.then(Ht,".enableVertexAttribArray(",Lt,");",Ht,".bindBuffer(",Sl,",",lt,".buffer.buffer);",Ht,".vertexAttribPointer(",Lt,",",lt,".size,",lt,".type,",lt,".normalized,",lt,".stride,",lt,".offset);").else(Ht,".disableVertexAttribArray(",Lt,");",Ht,".vertexAttrib4f(",Lt,",",lt,".x,",lt,".y,",lt,".z,",lt,".w);",lt,".buffer=null;"),Bt(en),he&&Bt(ft,".vertexAttribDivisorANGLE(",Lt,",",lt,".divisor);")}return Bt(ht.shared.vao,".currentVAO=null;",ht.shared.vao,".setVAO(",ht.shared.vao,".targetVAO);"),Object.keys(nt).forEach(function(ln){var In=nt[ln],Nn=on.def(jt,".",ln),_n=ht.block();_n("if(",Nn,"){",Ht,".enable(",In,")}else{",Ht,".disable(",In,")}",Zt,".",ln,"=",Nn,";"),Bt(_n),et("if(",Nn,"!==",Zt,".",ln,"){",_n,"}")}),Object.keys(Qe).forEach(function(ln){var _n,Zn,In=Qe[ln],Nn=Se[ln],Rr=ht.block();if(Rr(Ht,".",In,"("),Co(Nn)){var gi=Nn.length;_n=ht.global.def(jt,".",ln),Zn=ht.global.def(Zt,".",ln),Rr(Ae(gi,function(Ar){return _n+"["+Ar+"]"}),");",Ae(gi,function(Ar){return Zn+"["+Ar+"]="+_n+"["+Ar+"];"}).join("")),et("if(",Ae(gi,function(Ar){return _n+"["+Ar+"]!=="+Zn+"["+Ar+"]"}).join("||"),"){",Rr,"}")}else _n=on.def(jt,".",ln),Zn=on.def(Zt,".",ln),Rr(_n,");",Zt,".",ln,"=",_n,";"),et("if(",_n,"!==",Zn,"){",Rr,"}");Bt(Rr)}),ht.compile()}(),compile:function Ci(ht,et,Bt,on,sn){var Ht=qn();Ht.stats=Ht.link(sn),Object.keys(et.static).forEach(function(Zt){wr(Ht,et,Zt)}),Zp.forEach(function(Zt){wr(Ht,ht,Zt)});var jt=Mi(ht,et,Bt,on,Ht);return function ko(ht,et){var Bt=ht.proc("draw",1);ha(ht,Bt),Lo(ht,Bt,et.context),Go(ht,Bt,et.framebuffer),ba(ht,Bt,et),ka(ht,Bt,et.state),di(ht,Bt,et,!1,!0);var on=et.shader.progVar.append(ht,Bt);if(Bt(ht.shared.gl,".useProgram(",on,".program);"),et.shader.program)ri(ht,Bt,et,et.shader.program);else{Bt(ht.shared.vao,".setVAO(null);");var sn=ht.global.def("{}"),Ht=Bt.def(on,".id"),jt=Bt.def(sn,"[",Ht,"]");Bt(ht.cond(jt).then(jt,".call(this,a0);").else(jt,"=",sn,"[",Ht,"]=",ht.link(function(Zt){return _i(ri,ht,et,Zt,1)}),"(",on,");",jt,".call(this,a0);"))}Object.keys(et.state).length>0&&Bt(ht.shared.current,".dirty=true;")}(Ht,jt),function yn(ht,et){var Bt=ht.proc("scope",3);ht.batchId="a2";var on=ht.shared,sn=on.current;function Ht(jt){var Zt=et.shader[jt];Zt&&Bt.set(on.shader,"."+jt,Zt.append(ht,Bt))}Lo(ht,Bt,et.context),et.framebuffer&&et.framebuffer.append(ht,Bt),iv(Object.keys(et.state)).forEach(function(jt){var ft=et.state[jt].append(ht,Bt);Co(ft)?ft.forEach(function(Lt,lt){Bt.set(ht.next[jt],"["+lt+"]",Lt)}):Bt.set(on.next,"."+jt,ft)}),di(ht,Bt,et,!0,!0),[lc,fh,_l,hh,El].forEach(function(jt){var Zt=et.draw[jt];!Zt||Bt.set(on.draw,"."+jt,""+Zt.append(ht,Bt))}),Object.keys(et.uniforms).forEach(function(jt){var Zt=et.uniforms[jt].append(ht,Bt);Array.isArray(Zt)&&(Zt="["+Zt.join()+"]"),Bt.set(on.uniforms,"["+ot.id(jt)+"]",Zt)}),Object.keys(et.attributes).forEach(function(jt){var Zt=et.attributes[jt].append(ht,Bt),ft=ht.scopeAttrib(jt);Object.keys(new J).forEach(function(Lt){Bt.set(ft,"."+Lt,Zt[Lt])})}),et.scopeVAO&&Bt.set(on.vao,".targetVAO",et.scopeVAO.append(ht,Bt)),Ht(yu),Ht(nl),Object.keys(et.state).length>0&&(Bt(sn,".dirty=true;"),Bt.exit(sn,".dirty=true;")),Bt("a1(",ht.shared.context,",a0,",ht.batchId,");")}(Ht,jt),function wt(ht,et){var Bt=ht.proc("batch",2);ht.batchId="0",ha(ht,Bt);var on=!1,sn=!0;Object.keys(et.context).forEach(function(In){on=on||et.context[In].propDep}),on||(Lo(ht,Bt,et.context),sn=!1);var Ht=et.framebuffer,jt=!1;function Zt(In){return In.contextDep&&on||In.propDep}Ht?(Ht.propDep?on=jt=!0:Ht.contextDep&&on&&(jt=!0),jt||Go(ht,Bt,Ht)):Go(ht,Bt,null),et.state.viewport&&et.state.viewport.propDep&&(on=!0),ba(ht,Bt,et),ka(ht,Bt,et.state,function(In){return!Zt(In)}),(!et.profile||!Zt(et.profile))&&di(ht,Bt,et,!1,"a1"),et.contextDep=on,et.needsContext=sn,et.needsFramebuffer=jt;var ft=et.shader.progVar;if(ft.contextDep&&on||ft.propDep)wh(ht,Bt,et,null);else{var Lt=ft.append(ht,Bt);if(Bt(ht.shared.gl,".useProgram(",Lt,".program);"),et.shader.program)wh(ht,Bt,et,et.shader.program);else{Bt(ht.shared.vao,".setVAO(null);");var lt=ht.global.def("{}"),en=Bt.def(Lt,".id"),ln=Bt.def(lt,"[",en,"]");Bt(ht.cond(ln).then(ln,".call(this,a0,a1);").else(ln,"=",lt,"[",en,"]=",ht.link(function(In){return _i(wh,ht,et,In,2)}),"(",Lt,");",ln,".call(this,a0,a1);"))}}Object.keys(et.state).length>0&&Bt(ht.shared.current,".dirty=true;")}(Ht,jt),G(Ht.compile(),{destroy:function(){jt.shader.program.destroy()}})}}}var yh=function(xe,ot){if(!ot.ext_disjoint_timer_query)return null;var Dt=[];function Dn(he){Dt.push(he)}var pn=[];function Xn(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Jn=[];function sr(he){Jn.push(he)}var v=[];function C(he,ye,Se){var Ie=function Yn(){return Jn.pop()||new Xn}();Ie.startQueryIndex=he,Ie.endQueryIndex=ye,Ie.sum=0,Ie.stats=Se,v.push(Ie)}var H=[],J=[];return{beginQuery:function wn(he){var ye=function hn(){return Dt.pop()||ot.ext_disjoint_timer_query.createQueryEXT()}();ot.ext_disjoint_timer_query.beginQueryEXT(35007,ye),pn.push(ye),C(pn.length-1,pn.length,he)},endQuery:function Hn(){ot.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:C,update:function se(){var he,ye,Se=pn.length;if(0!==Se){J.length=Math.max(J.length,Se+1),H.length=Math.max(H.length,Se+1),H[0]=0,J[0]=0;var Ie=0;for(he=0,ye=0;ye<pn.length;++ye){var Be=pn[ye];ot.ext_disjoint_timer_query.getQueryObjectEXT(Be,34919)?(Ie+=ot.ext_disjoint_timer_query.getQueryObjectEXT(Be,34918),Dn(Be)):pn[he++]=Be,H[ye+1]=Ie,J[ye+1]=he}for(pn.length=he,he=0,ye=0;ye<v.length;++ye){var nt=v[ye],Qe=nt.startQueryIndex,St=nt.endQueryIndex;nt.sum+=H[St]-H[Qe];var Yt=J[Qe],Mn=J[St];Mn===Yt?(nt.stats.gpuTime+=nt.sum/1e6,sr(nt)):(nt.startQueryIndex=Yt,nt.endQueryIndex=Mn,v[he++]=nt)}v.length=he}},getNumPendingQueries:function(){return pn.length},clear:function(){Dt.push.apply(Dt,pn);for(var he=0;he<Dt.length;he++)ot.ext_disjoint_timer_query.deleteQueryEXT(Dt[he]);pn.length=0,Dt.length=0},restore:function(){pn.length=0,Dt.length=0}}},xc="webglcontextlost",bh="webglcontextrestored";function Ef(xe,ot){for(var Dt=0;Dt<xe.length;++Dt)if(xe[Dt]===ot)return Dt;return-1}return function Ec(xe){var ot=Wr(xe);if(!ot)return null;var Dt=ot.gl,hn=Dt.getContextAttributes(),Dn=Dt.isContextLost(),pn=function Vr(xe,ot){var Dt={};function hn(wn){Le.type(wn,"string","extension name must be string");var Xn,Hn=wn.toLowerCase();try{Xn=Dt[Hn]=xe.getExtension(Hn)}catch{}return!!Xn}for(var Dn=0;Dn<ot.extensions.length;++Dn){var pn=ot.extensions[Dn];if(!hn(pn))return ot.onDestroy(),ot.onDone('"'+pn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return ot.optionalExtensions.forEach(hn),{extensions:Dt,restore:function(){Object.keys(Dt).forEach(function(wn){if(Dt[wn]&&!hn(wn))throw new Error("(regl): error restoring extension "+wn)})}}}(Dt,ot);if(!pn)return null;var wn=function gr(){var xe={"":0},ot=[""];return{id:function(Dt){var hn=xe[Dt];return hn||(hn=xe[Dt]=ot.length,ot.push(Dt),hn)},str:function(Dt){return ot[Dt]}}}(),Hn={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Xn=pn.extensions,Jn=yh(0,Xn),Yn=yr(),sr=Dt.drawingBufferWidth,v=Dt.drawingBufferHeight,C={tick:0,time:0,viewportWidth:sr,viewportHeight:v,framebufferWidth:sr,framebufferHeight:v,drawingBufferWidth:sr,drawingBufferHeight:v,pixelRatio:ot.pixelRatio},se=function(xe,ot){var Dt=1;ot.ext_texture_filter_anisotropic&&(Dt=xe.getParameter(34047));var hn=1,Dn=1;ot.webgl_draw_buffers&&(hn=xe.getParameter(34852),Dn=xe.getParameter(36063));var pn=!!ot.oes_texture_float;if(pn){var wn=xe.createTexture();xe.bindTexture(3553,wn),xe.texImage2D(3553,0,Dr,1,1,0,Dr,5126,null);var Hn=xe.createFramebuffer();if(xe.bindFramebuffer(36160,Hn),xe.framebufferTexture2D(36160,36064,3553,wn,0),xe.bindTexture(3553,null),36053!==xe.checkFramebufferStatus(36160))pn=!1;else{xe.viewport(0,0,1,1),xe.clearColor(1,0,0,1),xe.clear(16384);var Xn=R.allocType(5126,4);xe.readPixels(0,0,1,1,Dr,5126,Xn),xe.getError()?pn=!1:(xe.deleteFramebuffer(Hn),xe.deleteTexture(wn),pn=1===Xn[0]),R.freeType(Xn)}}var Yn=!0;if(!(typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)))){var sr=xe.createTexture(),v=R.allocType(5121,36);xe.activeTexture(33984),xe.bindTexture(34067,sr),xe.texImage2D(34069,0,Dr,3,3,0,Dr,5121,v),R.freeType(v),xe.bindTexture(34067,null),xe.deleteTexture(sr),Yn=!xe.getError()}return{colorBits:[xe.getParameter(3410),xe.getParameter(3411),xe.getParameter(3412),xe.getParameter(3413)],depthBits:xe.getParameter(3414),stencilBits:xe.getParameter(3415),subpixelBits:xe.getParameter(3408),extensions:Object.keys(ot).filter(function(C){return!!ot[C]}),maxAnisotropic:Dt,maxDrawbuffers:hn,maxColorAttachments:Dn,pointSizeDims:xe.getParameter(33901),lineWidthDims:xe.getParameter(33902),maxViewportDims:xe.getParameter(3386),maxCombinedTextureUnits:xe.getParameter(35661),maxCubeMapSize:xe.getParameter(34076),maxRenderbufferSize:xe.getParameter(34024),maxTextureUnits:xe.getParameter(34930),maxTextureSize:xe.getParameter(3379),maxAttributes:xe.getParameter(34921),maxVertexUniforms:xe.getParameter(36347),maxVertexTextureUnits:xe.getParameter(35660),maxVaryingVectors:xe.getParameter(36348),maxFragmentUniforms:xe.getParameter(36349),glsl:xe.getParameter(35724),renderer:xe.getParameter(7937),vendor:xe.getParameter(7936),version:xe.getParameter(7938),readFloat:pn,npotTextureCube:Yn}}(Dt,Xn),he=function pl(xe,ot,Dt,hn){var Dn=0,pn={};function wn(J){this.id=Dn++,this.buffer=xe.createBuffer(),this.type=J,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,Dt.profile&&(this.stats={size:0})}wn.prototype.bind=function(){xe.bindBuffer(this.type,this.buffer)},wn.prototype.destroy=function(){v(this)};var Hn=[];function Yn(J,se,he){J.byteLength=se.byteLength,xe.bufferData(J.type,se,he)}function sr(J,se,he,ye,Se,Ie){var Be,nt;if(J.usage=he,Array.isArray(se)){if(J.dtype=ye||5126,se.length>0)if(Array.isArray(se[0])){Be=Vc(se);for(var Qe=1,St=1;St<Be.length;++St)Qe*=Be[St];J.dimension=Qe,Yn(J,nt=ci(se,Be,J.dtype),he),Ie?J.persistentData=nt:R.freeType(nt)}else if("number"==typeof se[0]){J.dimension=Se;var Yt=R.allocType(J.dtype,se.length);Ou(Yt,se),Yn(J,Yt,he),Ie?J.persistentData=Yt:R.freeType(Yt)}else V(se[0])?(J.dimension=se[0].length,J.dtype=ye||Iu(se[0])||5126,Yn(J,nt=ci(se,[se.length,se[0].length],J.dtype),he),Ie?J.persistentData=nt:R.freeType(nt)):Le.raise("invalid buffer data")}else if(V(se))J.dtype=ye||Iu(se),J.dimension=Se,Yn(J,se,he),Ie&&(J.persistentData=new Uint8Array(new Uint8Array(se.buffer)));else if(Ea(se)){var Mn=se.stride,tn=se.offset,rn=0,nn=0,qn=0,fr=0;1===(Be=se.shape).length?(rn=Be[0],nn=1,qn=Mn[0],fr=0):2===Be.length?(rn=Be[0],nn=Be[1],qn=Mn[0],fr=Mn[1]):Le.raise("invalid shape"),J.dtype=ye||Iu(se.data)||5126,J.dimension=nn;var ar=R.allocType(J.dtype,rn*nn);Pu(ar,se.data,rn,nn,qn,fr,tn),Yn(J,ar,he),Ie?J.persistentData=ar:R.freeType(ar)}else se instanceof ArrayBuffer?(J.dtype=5121,J.dimension=Se,Yn(J,se,he),Ie&&(J.persistentData=new Uint8Array(new Uint8Array(se)))):Le.raise("invalid buffer data")}function v(J){ot.bufferCount--,hn(J);var se=J.buffer;Le(se,"buffer must not be deleted already"),xe.deleteBuffer(se),J.buffer=null,delete pn[J.id]}return Dt.profile&&(ot.getTotalBufferSize=function(){var J=0;return Object.keys(pn).forEach(function(se){J+=pn[se].stats.size}),J}),{create:function C(J,se,he,ye){ot.bufferCount++;var Se=new wn(se);function Ie(Qe){var St=35044,Yt=null,Mn=0,tn=0,rn=1;return Array.isArray(Qe)||V(Qe)||Ea(Qe)||Qe instanceof ArrayBuffer?Yt=Qe:"number"==typeof Qe?Mn=0|Qe:Qe&&(Le.type(Qe,"object","buffer arguments must be an object, a number or an array"),"data"in Qe&&(Le(null===Yt||Array.isArray(Yt)||V(Yt)||Ea(Yt),"invalid data for buffer"),Yt=Qe.data),"usage"in Qe&&(Le.parameter(Qe.usage,Zl,"invalid buffer usage"),St=Zl[Qe.usage]),"type"in Qe&&(Le.parameter(Qe.type,Ii,"invalid buffer type"),tn=Ii[Qe.type]),"dimension"in Qe&&(Le.type(Qe.dimension,"number","invalid dimension"),rn=0|Qe.dimension),"length"in Qe&&(Le.nni(Mn,"buffer length must be a nonnegative integer"),Mn=0|Qe.length)),Se.bind(),Yt?sr(Se,Yt,St,tn,rn,ye):(Mn&&xe.bufferData(Se.type,Mn,St),Se.dtype=tn||5121,Se.usage=St,Se.dimension=rn,Se.byteLength=Mn),Dt.profile&&(Se.stats.size=Se.byteLength*bs[Se.dtype]),Ie}function Be(Qe,St){Le(St+Qe.byteLength<=Se.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Qe.byteLength+" starting from offset "+St+" to a buffer of size "+Se.byteLength),xe.bufferSubData(Se.type,St,Qe)}return pn[Se.id]=Se,he||Ie(J),Ie._reglType="buffer",Ie._buffer=Se,Ie.subdata=function nt(Qe,St){var Mn,Yt=0|(St||0);if(Se.bind(),V(Qe)||Qe instanceof ArrayBuffer)Be(Qe,Yt);else if(Array.isArray(Qe)){if(Qe.length>0)if("number"==typeof Qe[0]){var tn=R.allocType(Se.dtype,Qe.length);Ou(tn,Qe),Be(tn,Yt),R.freeType(tn)}else if(Array.isArray(Qe[0])||V(Qe[0])){Mn=Vc(Qe);var rn=ci(Qe,Mn,Se.dtype);Be(rn,Yt),R.freeType(rn)}else Le.raise("invalid buffer data")}else if(Ea(Qe)){var nn=Qe.stride,qn=0,fr=0,ar=0,Pr=0;1===(Mn=Qe.shape).length?(qn=Mn[0],fr=1,ar=nn[0],Pr=0):2===Mn.length?(qn=Mn[0],fr=Mn[1],ar=nn[0],Pr=nn[1]):Le.raise("invalid shape");var Tr=Array.isArray(Qe.data)?Se.dtype:Iu(Qe.data),Ur=R.allocType(Tr,qn*fr);Pu(Ur,Qe.data,qn,fr,ar,Pr,Qe.offset),Be(Ur,Yt),R.freeType(Ur)}else Le.raise("invalid data for buffer subdata");return Ie},Dt.profile&&(Ie.stats=Se.stats),Ie.destroy=function(){v(Se)},Ie},createStream:function Xn(J,se){var he=Hn.pop();return he||(he=new wn(J)),he.bind(),sr(he,se,35040,0,1,!1),he},destroyStream:function Jn(J){Hn.push(J)},clear:function(){_a(pn).forEach(v),Hn.forEach(v)},getBuffer:function(J){return J&&J._buffer instanceof wn?J._buffer:null},restore:function H(){_a(pn).forEach(function(J){J.buffer=xe.createBuffer(),xe.bindBuffer(J.type,J.buffer),xe.bufferData(J.type,J.persistentData||J.byteLength,J.usage)})},_initBuffer:sr}}(Dt,Hn,ot,function Se(Hr){return ye.destroyBuffer(Hr)}),ye=function Bp(xe,ot,Dt,hn,Dn){for(var pn=Dt.maxAttributes,wn=new Array(pn),Hn=0;Hn<pn;++Hn)wn[Hn]=new hg;var Xn=0,Jn={},Yn={Record:hg,scope:{},state:wn,currentVAO:null,targetVAO:null,restore:v()?function Se(){v()&&_a(Jn).forEach(function(nt){nt.refresh()})}:function(){},createVAO:function Ie(Be){var nt=new ye;function Qe(St){Le(Array.isArray(St),"arguments to vertex array constructor must be an array"),Le(St.length<pn,"too many attributes"),Le(St.length>0,"must specify at least one attribute");var Yt={},Mn=nt.attributes;Mn.length=St.length;for(var tn=0;tn<St.length;++tn){var fr,rn=St[tn],nn=Mn[tn]=new hg,qn=rn.data||rn;Array.isArray(qn)||V(qn)||Ea(qn)?(nt.buffers[tn]&&(fr=nt.buffers[tn],V(qn)&&fr._buffer.byteLength>=qn.byteLength?fr.subdata(qn):(fr.destroy(),nt.buffers[tn]=null)),nt.buffers[tn]||(fr=nt.buffers[tn]=Dn.create(rn,34962,!1,!0)),nn.buffer=Dn.getBuffer(fr),nn.size=0|nn.buffer.dimension,nn.normalized=!1,nn.type=nn.buffer.dtype,nn.offset=0,nn.stride=0,nn.divisor=0,nn.state=1,Yt[tn]=1):Dn.getBuffer(rn)?(nn.buffer=Dn.getBuffer(rn),nn.size=0|nn.buffer.dimension,nn.normalized=!1,nn.type=nn.buffer.dtype,nn.offset=0,nn.stride=0,nn.divisor=0,nn.state=1):Dn.getBuffer(rn.buffer)?(nn.buffer=Dn.getBuffer(rn.buffer),nn.size=0|(+rn.size||nn.buffer.dimension),nn.normalized=!!rn.normalized||!1,"type"in rn?(Le.parameter(rn.type,Ii,"invalid buffer type"),nn.type=Ii[rn.type]):nn.type=nn.buffer.dtype,nn.offset=0|(rn.offset||0),nn.stride=0|(rn.stride||0),nn.divisor=0|(rn.divisor||0),nn.state=1,Le(nn.size>=1&&nn.size<=4,"size must be between 1 and 4"),Le(nn.offset>=0,"invalid offset"),Le(nn.stride>=0&&nn.stride<=255,"stride must be between 0 and 255"),Le(nn.divisor>=0,"divisor must be positive"),Le(!nn.divisor||!!ot.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in rn?(Le(tn>0,"first attribute must not be a constant"),nn.x=+rn.x||0,nn.y=+rn.y||0,nn.z=+rn.z||0,nn.w=+rn.w||0,nn.state=2):Le(!1,"invalid attribute spec for location "+tn)}for(var ar=0;ar<nt.buffers.length;++ar)!Yt[ar]&&nt.buffers[ar]&&(nt.buffers[ar].destroy(),nt.buffers[ar]=null);return nt.refresh(),Qe}return hn.vaoCount+=1,Qe.destroy=function(){for(var St=0;St<nt.buffers.length;++St)nt.buffers[St]&&nt.buffers[St].destroy();nt.buffers.length=0,nt.destroy()},Qe._vao=nt,Qe._reglType="vao",Qe(Be)},getVAO:function H(Be){return"function"==typeof Be&&Be._vao?Be._vao:null},destroyBuffer:function sr(Be){for(var nt=0;nt<wn.length;++nt){var Qe=wn[nt];Qe.buffer===Be&&(xe.disableVertexAttribArray(nt),Qe.buffer=null)}},setVAO:v()?function J(Be){Be!==Yn.currentVAO&&(v().bindVertexArrayOES(Be?Be.vao:null),Yn.currentVAO=Be)}:function se(Be){if(Be!==Yn.currentVAO){if(Be)Be.bindAttrs();else for(var nt=C(),Qe=0;Qe<wn.length;++Qe){var St=wn[Qe];St.buffer?(xe.enableVertexAttribArray(Qe),xe.vertexAttribPointer(Qe,St.size,St.type,St.normalized,St.stride,St.offfset),nt&&St.divisor&&nt.vertexAttribDivisorANGLE(Qe,St.divisor)):(xe.disableVertexAttribArray(Qe),xe.vertexAttrib4f(Qe,St.x,St.y,St.z,St.w))}Yn.currentVAO=Be}},clear:v()?function he(){_a(Jn).forEach(function(Be){Be.destroy()})}:function(){}};function v(){return ot.oes_vertex_array_object}function C(){return ot.angle_instanced_arrays}function ye(){this.id=++Xn,this.attributes=[];var Be=v();this.vao=Be?Be.createVertexArrayOES():null,Jn[this.id]=this,this.buffers=[]}return ye.prototype.bindAttrs=function(){for(var Be=C(),nt=this.attributes,Qe=0;Qe<nt.length;++Qe){var St=nt[Qe];St.buffer?(xe.enableVertexAttribArray(Qe),xe.bindBuffer(34962,St.buffer.buffer),xe.vertexAttribPointer(Qe,St.size,St.type,St.normalized,St.stride,St.offset),Be&&St.divisor&&Be.vertexAttribDivisorANGLE(Qe,St.divisor)):(xe.disableVertexAttribArray(Qe),xe.vertexAttrib4f(Qe,St.x,St.y,St.z,St.w))}for(var Yt=nt.length;Yt<pn;++Yt)xe.disableVertexAttribArray(Yt)},ye.prototype.refresh=function(){var Be=v();Be&&(Be.bindVertexArrayOES(this.vao),this.bindAttrs(),Yn.currentVAO=this)},ye.prototype.destroy=function(){if(this.vao){var Be=v();this===Yn.currentVAO&&(Yn.currentVAO=null,Be.bindVertexArrayOES(null)),Be.deleteVertexArrayOES(this.vao),this.vao=null}Jn[this.id]&&(delete Jn[this.id],hn.vaoCount-=1)},Yn}(Dt,Xn,se,Hn,he),Ie=function ec(xe,ot,Dt,hn){var Dn={},pn=0,wn={uint8:Ks,uint16:Gi};function Hn(H){this.id=pn++,Dn[this.id]=this,this.buffer=H,this.primType=4,this.vertCount=0,this.type=0}ot.oes_element_index_uint&&(wn.uint32=du),Hn.prototype.bind=function(){this.buffer.bind()};var Xn=[];function sr(H,J,se,he,ye,Se,Ie){var Be;if(H.buffer.bind(),J){var nt=Ie;!Ie&&(!V(J)||Ea(J)&&!V(J.data))&&(nt=ot.oes_element_index_uint?du:Gi),Dt._initBuffer(H.buffer,J,se,nt,3)}else xe.bufferData(34963,Se,se),H.buffer.dtype=Be||Ks,H.buffer.usage=se,H.buffer.dimension=3,H.buffer.byteLength=Se;if(Be=Ie,!Ie){switch(H.buffer.dtype){case Ks:case 5120:Be=Ks;break;case Gi:case 5122:Be=Gi;break;case du:case 5124:Be=du;break;default:Le.raise("unsupported type for element array")}H.buffer.dtype=Be}H.type=Be,Le(Be!==du||!!ot.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Qe=ye;Qe<0&&(Qe=H.buffer.byteLength,Be===Gi?Qe>>=1:Be===du&&(Qe>>=2)),H.vertCount=Qe;var St=he;if(he<0){St=4;var Yt=H.buffer.dimension;1===Yt&&(St=0),2===Yt&&(St=1),3===Yt&&(St=4)}H.primType=St}function v(H){hn.elementsCount--,Le(null!==H.buffer,"must not double destroy elements"),delete Dn[H.id],H.buffer.destroy(),H.buffer=null}return{create:function C(H,J){var se=Dt.create(null,34963,!0),he=new Hn(se._buffer);function ye(Se){if(Se)if("number"==typeof Se)se(Se),he.primType=4,he.vertCount=0|Se,he.type=Ks;else{var Ie=null,Be=35044,nt=-1,Qe=-1,St=0,Yt=0;Array.isArray(Se)||V(Se)||Ea(Se)?Ie=Se:(Le.type(Se,"object","invalid arguments for elements"),"data"in Se&&(Ie=Se.data,Le(Array.isArray(Ie)||V(Ie)||Ea(Ie),"invalid data for element buffer")),"usage"in Se&&(Le.parameter(Se.usage,Zl,"invalid element buffer usage"),Be=Zl[Se.usage]),"primitive"in Se&&(Le.parameter(Se.primitive,ws,"invalid element buffer primitive"),nt=ws[Se.primitive]),"count"in Se&&(Le("number"==typeof Se.count&&Se.count>=0,"invalid vertex count for elements"),Qe=0|Se.count),"type"in Se&&(Le.parameter(Se.type,wn,"invalid buffer type"),Yt=wn[Se.type]),"length"in Se?St=0|Se.length:(St=Qe,Yt===Gi||5122===Yt?St*=2:(Yt===du||5124===Yt)&&(St*=4))),sr(he,Ie,Be,nt,Qe,St,Yt)}else se(),he.primType=4,he.vertCount=0,he.type=Ks;return ye}return hn.elementsCount++,ye(H),ye._reglType="elements",ye._elements=he,ye.subdata=function(Se,Ie){return se.subdata(Se,Ie),ye},ye.destroy=function(){v(he)},ye},createStream:function Jn(H){var J=Xn.pop();return J||(J=new Hn(Dt.create(null,34963,!0,!1)._buffer)),sr(J,H,35040,-1,-1,0,0),J},destroyStream:function Yn(H){Xn.push(H)},getElements:function(H){return"function"==typeof H&&H._elements instanceof Hn?H._elements:null},clear:function(){_a(Dn).forEach(v)}}}(Dt,Xn,he,Hn),Be=function Gp(xe,ot,Dt,hn){var Dn={},pn={};function wn(J,se,he,ye){this.name=J,this.id=se,this.location=he,this.info=ye}function Hn(J,se){for(var he=0;he<J.length;++he)if(J[he].id===se.id)return void(J[he].location=se.location);J.push(se)}function Xn(J,se,he){var ye=35632===J?Dn:pn,Se=ye[se];if(!Se){var Ie=ot.str(se);Se=xe.createShader(J),xe.shaderSource(Se,Ie),xe.compileShader(Se),Le.shaderError(xe,Se,Ie,J,he),ye[se]=Se}return Se}var Jn={},Yn=[],sr=0;function v(J,se){this.id=sr++,this.fragId=J,this.vertId=se,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,hn.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function C(J,se,he){var ye,Se,Ie=Xn(35632,J.fragId),Be=Xn(35633,J.vertId),nt=J.program=xe.createProgram();if(xe.attachShader(nt,Ie),xe.attachShader(nt,Be),he)for(ye=0;ye<he.length;++ye){var Qe=he[ye];xe.bindAttribLocation(nt,Qe[0],Qe[1])}xe.linkProgram(nt),Le.linkError(xe,nt,ot.str(J.fragId),ot.str(J.vertId),se);var St=xe.getProgramParameter(nt,35718);hn.profile&&(J.stats.uniformsCount=St);var Yt=J.uniforms;for(ye=0;ye<St;++ye)if(Se=xe.getActiveUniform(nt,ye))if(Se.size>1)for(var Mn=0;Mn<Se.size;++Mn){var tn=Se.name.replace("[0]","["+Mn+"]");Hn(Yt,new wn(tn,ot.id(tn),xe.getUniformLocation(nt,tn),Se))}else Hn(Yt,new wn(Se.name,ot.id(Se.name),xe.getUniformLocation(nt,Se.name),Se));var rn=xe.getProgramParameter(nt,35721);hn.profile&&(J.stats.attributesCount=rn);var nn=J.attributes;for(ye=0;ye<rn;++ye)(Se=xe.getActiveAttrib(nt,ye))&&Hn(nn,new wn(Se.name,ot.id(Se.name),xe.getAttribLocation(nt,Se.name),Se))}return hn.profile&&(Dt.getMaxUniformsCount=function(){var J=0;return Yn.forEach(function(se){se.stats.uniformsCount>J&&(J=se.stats.uniformsCount)}),J},Dt.getMaxAttributesCount=function(){var J=0;return Yn.forEach(function(se){se.stats.attributesCount>J&&(J=se.stats.attributesCount)}),J}),{clear:function(){var J=xe.deleteShader.bind(xe);_a(Dn).forEach(J),Dn={},_a(pn).forEach(J),pn={},Yn.forEach(function(se){xe.deleteProgram(se.program)}),Yn.length=0,Jn={},Dt.shaderCount=0},program:function(J,se,he,ye){Le.command(J>=0,"missing vertex shader",he),Le.command(se>=0,"missing fragment shader",he);var Se=Jn[se];Se||(Se=Jn[se]={});var Ie=Se[J];if(Ie&&(Ie.refCount++,!ye))return Ie;var Be=new v(se,J);return Dt.shaderCount++,C(Be,he,ye),Ie||(Se[J]=Be),Yn.push(Be),G(Be,{destroy:function(){if(Be.refCount--,Be.refCount<=0){xe.deleteProgram(Be.program);var nt=Yn.indexOf(Be);Yn.splice(nt,1),Dt.shaderCount--}Se[Be.vertId].refCount<=0&&(xe.deleteShader(pn[Be.vertId]),delete pn[Be.vertId],delete Jn[Be.fragId][Be.vertId]),Object.keys(Jn[Be.fragId]).length||(xe.deleteShader(Dn[Be.fragId]),delete Dn[Be.fragId],delete Jn[Be.fragId])}})},restore:function H(){Dn={},pn={};for(var J=0;J<Yn.length;++J)C(Yn[J],null,Yn[J].attributes.map(function(se){return[se.location,se.name]}))},shader:Xn,frag:-1,vert:-1}}(Dt,wn,Hn,ot),nt=z0(Dt,Xn,se,function(){Yt.procs.poll()},C,Hn,ot),Qe=function(xe,ot,Dt,hn,Dn){var pn={rgba4:Kc,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};ot.ext_srgb&&(pn.srgba=35907),ot.ext_color_buffer_half_float&&(pn.rgba16f=34842,pn.rgb16f=34843),ot.webgl_color_buffer_float&&(pn.rgba32f=34836);var wn=[];Object.keys(pn).forEach(function(C){wn[pn[C]]=C});var Hn=0,Xn={};function Jn(C){this.id=Hn++,this.refCount=1,this.renderbuffer=C,this.format=Kc,this.width=0,this.height=0,Dn.profile&&(this.stats={size:0})}function Yn(C){var H=C.renderbuffer;Le(H,"must not double destroy renderbuffer"),xe.bindRenderbuffer(ur,null),xe.deleteRenderbuffer(H),C.renderbuffer=null,C.refCount=0,delete Xn[C.id],hn.renderbufferCount--}return Jn.prototype.decRef=function(){--this.refCount<=0&&Yn(this)},Dn.profile&&(hn.getTotalRenderbufferSize=function(){var C=0;return Object.keys(Xn).forEach(function(H){C+=Xn[H].stats.size}),C}),{create:function sr(C,H){var J=new Jn(xe.createRenderbuffer());function se(ye,Se){var Ie=0,Be=0,nt=Kc;if("object"==typeof ye&&ye){var Qe=ye;if("shape"in Qe){var St=Qe.shape;Le(Array.isArray(St)&&St.length>=2,"invalid renderbuffer shape"),Ie=0|St[0],Be=0|St[1]}else"radius"in Qe&&(Ie=Be=0|Qe.radius),"width"in Qe&&(Ie=0|Qe.width),"height"in Qe&&(Be=0|Qe.height);"format"in Qe&&(Le.parameter(Qe.format,pn,"invalid renderbuffer format"),nt=pn[Qe.format])}else"number"==typeof ye?(Ie=0|ye,Be="number"==typeof Se?0|Se:Ie):ye?Le.raise("invalid arguments to renderbuffer constructor"):Ie=Be=1;if(Le(Ie>0&&Be>0&&Ie<=Dt.maxRenderbufferSize&&Be<=Dt.maxRenderbufferSize,"invalid renderbuffer size"),Ie!==J.width||Be!==J.height||nt!==J.format)return se.width=J.width=Ie,se.height=J.height=Be,J.format=nt,xe.bindRenderbuffer(ur,J.renderbuffer),xe.renderbufferStorage(ur,nt,Ie,Be),Le(0===xe.getError(),"invalid render buffer format"),Dn.profile&&(J.stats.size=Zu(J.format,J.width,J.height)),se.format=wn[J.format],se}return Xn[J.id]=J,hn.renderbufferCount++,se(C,H),se.resize=function he(ye,Se){var Ie=0|ye,Be=0|Se||Ie;return Ie===J.width&&Be===J.height||(Le(Ie>0&&Be>0&&Ie<=Dt.maxRenderbufferSize&&Be<=Dt.maxRenderbufferSize,"invalid renderbuffer size"),se.width=J.width=Ie,se.height=J.height=Be,xe.bindRenderbuffer(ur,J.renderbuffer),xe.renderbufferStorage(ur,J.format,Ie,Be),Le(0===xe.getError(),"invalid render buffer format"),Dn.profile&&(J.stats.size=Zu(J.format,J.width,J.height))),se},se._reglType="renderbuffer",se._renderbuffer=J,Dn.profile&&(se.stats=J.stats),se.destroy=function(){J.decRef()},se},clear:function(){_a(Xn).forEach(Yn)},restore:function v(){_a(Xn).forEach(function(C){C.renderbuffer=xe.createRenderbuffer(),xe.bindRenderbuffer(ur,C.renderbuffer),xe.renderbufferStorage(ur,C.format,C.width,C.height)}),xe.bindRenderbuffer(ur,null)}}}(Dt,Xn,se,Hn,ot),St=function fg(xe,ot,Dt,hn,Dn,pn){var wn={cur:null,next:null,dirty:!1,setFBO:null},Hn=["rgba"],Xn=["rgba4","rgb565","rgb5 a1"];ot.ext_srgb&&Xn.push("srgba"),ot.ext_color_buffer_half_float&&Xn.push("rgba16f","rgb16f"),ot.webgl_color_buffer_float&&Xn.push("rgba32f");var Jn=["uint8"];function Yn(tn,rn,nn){this.target=tn,this.texture=rn,this.renderbuffer=nn;var qn=0,fr=0;rn?(qn=rn.width,fr=rn.height):nn&&(qn=nn.width,fr=nn.height),this.width=qn,this.height=fr}function sr(tn){tn&&(tn.texture&&tn.texture._texture.decRef(),tn.renderbuffer&&tn.renderbuffer._renderbuffer.decRef())}function v(tn,rn,nn){if(tn)if(tn.texture){var qn=tn.texture._texture,fr=Math.max(1,qn.width),ar=Math.max(1,qn.height);Le(fr===rn&&ar===nn,"inconsistent width/height for supplied texture"),qn.refCount+=1}else{var Pr=tn.renderbuffer._renderbuffer;Le(Pr.width===rn&&Pr.height===nn,"inconsistent width/height for renderbuffer"),Pr.refCount+=1}}function C(tn,rn){rn&&(rn.texture?xe.framebufferTexture2D(Jo,tn,rn.target,rn.texture._texture.texture,0):xe.framebufferRenderbuffer(Jo,tn,36161,rn.renderbuffer._renderbuffer.renderbuffer))}function H(tn){var rn=ml,nn=null,qn=null,fr=tn;"object"==typeof tn&&(fr=tn.data,"target"in tn&&(rn=0|tn.target)),Le.type(fr,"function","invalid attachment data");var ar=fr._reglType;return"texture2d"===ar?(nn=fr,Le(rn===ml)):"textureCube"===ar?(nn=fr,Le(rn>=ag&&rn<ag+6,"invalid cube map target")):"renderbuffer"===ar?(qn=fr,rn=36161):Le.raise("invalid regl object for attachment"),new Yn(rn,nn,qn)}function J(tn,rn,nn,qn,fr){if(nn){var ar=hn.create2D({width:tn,height:rn,format:qn,type:fr});return ar._texture.refCount=0,new Yn(ml,ar,null)}var Pr=Dn.create({width:tn,height:rn,format:qn});return Pr._renderbuffer.refCount=0,new Yn(36161,null,Pr)}function se(tn){return tn&&(tn.texture||tn.renderbuffer)}function he(tn,rn,nn){tn&&(tn.texture?tn.texture.resize(rn,nn):tn.renderbuffer&&tn.renderbuffer.resize(rn,nn),tn.width=rn,tn.height=nn)}ot.oes_texture_half_float&&Jn.push("half float","float16"),ot.oes_texture_float&&Jn.push("float","float32");var ye=0,Se={};function Ie(){this.id=ye++,Se[this.id]=this,this.framebuffer=xe.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Be(tn){tn.colorAttachments.forEach(sr),sr(tn.depthAttachment),sr(tn.stencilAttachment),sr(tn.depthStencilAttachment)}function nt(tn){var rn=tn.framebuffer;Le(rn,"must not double destroy framebuffer"),xe.deleteFramebuffer(rn),tn.framebuffer=null,pn.framebufferCount--,delete Se[tn.id]}function Qe(tn){var rn;xe.bindFramebuffer(Jo,tn.framebuffer);var nn=tn.colorAttachments;for(rn=0;rn<nn.length;++rn)C(36064+rn,nn[rn]);for(rn=nn.length;rn<Dt.maxColorAttachments;++rn)xe.framebufferTexture2D(Jo,36064+rn,ml,null,0);xe.framebufferTexture2D(Jo,33306,ml,null,0),xe.framebufferTexture2D(Jo,36096,ml,null,0),xe.framebufferTexture2D(Jo,36128,ml,null,0),C(36096,tn.depthAttachment),C(36128,tn.stencilAttachment),C(33306,tn.depthStencilAttachment);var qn=xe.checkFramebufferStatus(Jo);!xe.isContextLost()&&36053!==qn&&Le.raise("framebuffer configuration not supported, status = "+yl[qn]),xe.bindFramebuffer(Jo,wn.next?wn.next.framebuffer:null),wn.cur=wn.next,xe.getError()}function St(tn,rn){var nn=new Ie;function qn(ar,Pr){var Tr;Le(wn.next!==nn,"can not update framebuffer which is currently in use");var Ur=0,ti=0,Lr=!0,Do=!0,ui=null,zo=!0,mo="rgba",Mi="uint8",Lo=1,Go=null,ba=null,ka=null,ha=!1;if("number"==typeof ar)Ur=0|ar,ti=0|Pr||Ur;else if(ar){Le.type(ar,"object","invalid arguments for framebuffer");var di=ar;if("shape"in di){var _o=di.shape;Le(Array.isArray(_o)&&_o.length>=2,"invalid shape for framebuffer"),Ur=_o[0],ti=_o[1]}else"radius"in di&&(Ur=ti=di.radius),"width"in di&&(Ur=di.width),"height"in di&&(ti=di.height);("color"in di||"colors"in di)&&(ui=di.color||di.colors,Array.isArray(ui)&&Le(1===ui.length||ot.webgl_draw_buffers,"multiple render targets not supported")),ui||("colorCount"in di&&Le((Lo=0|di.colorCount)>0,"invalid color buffer count"),"colorTexture"in di&&(zo=!!di.colorTexture,mo="rgba4"),"colorType"in di&&(Mi=di.colorType,zo?(Le(ot.oes_texture_float||!("float"===Mi||"float32"===Mi),"you must enable OES_texture_float in order to use floating point framebuffer objects"),Le(ot.oes_texture_half_float||!("half float"===Mi||"float16"===Mi),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===Mi||"float16"===Mi?(Le(ot.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),mo="rgba16f"):("float"===Mi||"float32"===Mi)&&(Le(ot.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),mo="rgba32f"),Le.oneOf(Mi,Jn,"invalid color type")),"colorFormat"in di&&(Hn.indexOf(mo=di.colorFormat)>=0?zo=!0:Xn.indexOf(mo)>=0?zo=!1:zo?Le.oneOf(di.colorFormat,Hn,"invalid color format for texture"):Le.oneOf(di.colorFormat,Xn,"invalid color format for renderbuffer"))),("depthTexture"in di||"depthStencilTexture"in di)&&Le(!(ha=!(!di.depthTexture&&!di.depthStencilTexture))||ot.webgl_depth_texture,"webgl_depth_texture extension not supported"),"depth"in di&&("boolean"==typeof di.depth?Lr=di.depth:(Go=di.depth,Do=!1)),"stencil"in di&&("boolean"==typeof di.stencil?Do=di.stencil:(ba=di.stencil,Lr=!1)),"depthStencil"in di&&("boolean"==typeof di.depthStencil?Lr=Do=di.depthStencil:(ka=di.depthStencil,Lr=!1,Do=!1))}else Ur=ti=1;var Ki=null,Hr=null,_i=null,ri=null;if(Array.isArray(ui))Ki=ui.map(H);else if(ui)Ki=[H(ui)];else for(Ki=new Array(Lo),Tr=0;Tr<Lo;++Tr)Ki[Tr]=J(Ur,ti,zo,mo,Mi);Le(ot.webgl_draw_buffers||Ki.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),Le(Ki.length<=Dt.maxColorAttachments,"too many color attachments, not supported"),Ur=Ur||Ki[0].width,ti=ti||Ki[0].height,Go?Hr=H(Go):Lr&&!Do&&(Hr=J(Ur,ti,ha,"depth","uint32")),ba?_i=H(ba):Do&&!Lr&&(_i=J(Ur,ti,!1,"stencil","uint8")),ka?ri=H(ka):!Go&&!ba&&Do&&Lr&&(ri=J(Ur,ti,ha,"depth stencil","depth stencil")),Le(!!Go+!!ba+!!ka<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var ko=null;for(Tr=0;Tr<Ki.length;++Tr)if(v(Ki[Tr],Ur,ti),Le(!Ki[Tr]||Ki[Tr].texture&&cg.indexOf(Ki[Tr].texture._texture.format)>=0||Ki[Tr].renderbuffer&&Rp.indexOf(Ki[Tr].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Tr+" is invalid"),Ki[Tr]&&Ki[Tr].texture){var sl=Pp[Ki[Tr].texture._texture.format]*od[Ki[Tr].texture._texture.type];null===ko?ko=sl:Le(ko===sl,"all color attachments much have the same number of bits per pixel.")}return v(Hr,Ur,ti),Le(!Hr||Hr.texture&&6402===Hr.texture._texture.format||Hr.renderbuffer&&33189===Hr.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object"),v(_i,Ur,ti),Le(!_i||_i.renderbuffer&&36168===_i.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object"),v(ri,Ur,ti),Le(!ri||ri.texture&&34041===ri.texture._texture.format||ri.renderbuffer&&34041===ri.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object"),Be(nn),nn.width=Ur,nn.height=ti,nn.colorAttachments=Ki,nn.depthAttachment=Hr,nn.stencilAttachment=_i,nn.depthStencilAttachment=ri,qn.color=Ki.map(se),qn.depth=se(Hr),qn.stencil=se(_i),qn.depthStencil=se(ri),qn.width=nn.width,qn.height=nn.height,Qe(nn),qn}return pn.framebufferCount++,qn(tn,rn),G(qn,{resize:function fr(ar,Pr){Le(wn.next!==nn,"can not resize a framebuffer which is currently in use");var Tr=Math.max(0|ar,1),Ur=Math.max(0|Pr||Tr,1);if(Tr===nn.width&&Ur===nn.height)return qn;for(var ti=nn.colorAttachments,Lr=0;Lr<ti.length;++Lr)he(ti[Lr],Tr,Ur);return he(nn.depthAttachment,Tr,Ur),he(nn.stencilAttachment,Tr,Ur),he(nn.depthStencilAttachment,Tr,Ur),nn.width=qn.width=Tr,nn.height=qn.height=Ur,Qe(nn),qn},_reglType:"framebuffer",_framebuffer:nn,destroy:function(){nt(nn),Be(nn)},use:function(ar){wn.setFBO({framebuffer:qn},ar)}})}return G(wn,{getFramebuffer:function(tn){if("function"==typeof tn&&"framebuffer"===tn._reglType){var rn=tn._framebuffer;if(rn instanceof Ie)return rn}return null},create:St,createCube:function Yt(tn){var rn=Array(6);function nn(fr){var ar;Le(rn.indexOf(wn.next)<0,"can not update framebuffer which is currently in use");var mo,Pr={color:null},Tr=0,Ur=null,ti="rgba",Lr="uint8",Do=1;if("number"==typeof fr)Tr=0|fr;else if(fr){Le.type(fr,"object","invalid arguments for framebuffer");var ui=fr;if("shape"in ui){var zo=ui.shape;Le(Array.isArray(zo)&&zo.length>=2,"invalid shape for framebuffer"),Le(zo[0]===zo[1],"cube framebuffer must be square"),Tr=zo[0]}else"radius"in ui&&(Tr=0|ui.radius),"width"in ui?(Tr=0|ui.width,"height"in ui&&Le(ui.height===Tr,"must be square")):"height"in ui&&(Tr=0|ui.height);("color"in ui||"colors"in ui)&&(Ur=ui.color||ui.colors,Array.isArray(Ur)&&Le(1===Ur.length||ot.webgl_draw_buffers,"multiple render targets not supported")),Ur||("colorCount"in ui&&Le((Do=0|ui.colorCount)>0,"invalid color buffer count"),"colorType"in ui&&(Le.oneOf(ui.colorType,Jn,"invalid color type"),Lr=ui.colorType),"colorFormat"in ui&&(ti=ui.colorFormat,Le.oneOf(ui.colorFormat,Hn,"invalid color format for texture"))),"depth"in ui&&(Pr.depth=ui.depth),"stencil"in ui&&(Pr.stencil=ui.stencil),"depthStencil"in ui&&(Pr.depthStencil=ui.depthStencil)}else Tr=1;if(Ur)if(Array.isArray(Ur))for(mo=[],ar=0;ar<Ur.length;++ar)mo[ar]=Ur[ar];else mo=[Ur];else{mo=Array(Do);var Mi={radius:Tr,format:ti,type:Lr};for(ar=0;ar<Do;++ar)mo[ar]=hn.createCube(Mi)}for(Pr.color=Array(mo.length),ar=0;ar<mo.length;++ar){var Lo=mo[ar];Le("function"==typeof Lo&&"textureCube"===Lo._reglType,"invalid cube map"),Le(Lo.width===(Tr=Tr||Lo.width)&&Lo.height===Tr,"invalid cube map shape"),Pr.color[ar]={target:ag,data:mo[ar]}}for(ar=0;ar<6;++ar){for(var Go=0;Go<mo.length;++Go)Pr.color[Go].target=ag+ar;ar>0&&(Pr.depth=rn[0].depth,Pr.stencil=rn[0].stencil,Pr.depthStencil=rn[0].depthStencil),rn[ar]?rn[ar](Pr):rn[ar]=St(Pr)}return G(nn,{width:Tr,height:Tr,color:mo})}return nn(tn),G(nn,{faces:rn,resize:function qn(fr){var ar,Pr=0|fr;if(Le(Pr>0&&Pr<=Dt.maxCubeMapSize,"invalid radius for cube fbo"),Pr===nn.width)return nn;var Tr=nn.color;for(ar=0;ar<Tr.length;++ar)Tr[ar].resize(Pr);for(ar=0;ar<6;++ar)rn[ar].resize(Pr);return nn.width=nn.height=Pr,nn},_reglType:"framebufferCube",destroy:function(){rn.forEach(function(fr){fr.destroy()})}})},clear:function(){_a(Se).forEach(nt)},restore:function Mn(){wn.cur=null,wn.next=null,wn.dirty=!0,_a(Se).forEach(function(tn){tn.framebuffer=xe.createFramebuffer(),Qe(tn)})}})}(Dt,Xn,se,nt,Qe,Hn),Yt=Q0(Dt,wn,Xn,se,he,Ie,0,St,{},ye,Be,{elements:null,primitive:4,count:-1,offset:0,instances:-1},C,Jn,ot),Mn=bl(Dt,St,Yt.procs.poll,C,hn,Xn,se),tn=Yt.next,rn=Dt.canvas,nn=[],qn=[],fr=[],ar=[ot.onDestroy],Pr=null;function Tr(){if(0===nn.length)return Jn&&Jn.update(),void(Pr=null);Pr=Mr.next(Tr),ka();for(var Hr=nn.length-1;Hr>=0;--Hr){var _i=nn[Hr];_i&&_i(C,null,0)}Dt.flush(),Jn&&Jn.update()}function Ur(){!Pr&&nn.length>0&&(Pr=Mr.next(Tr))}function ti(){Pr&&(Mr.cancel(Tr),Pr=null)}function Lr(Hr){Hr.preventDefault(),Dn=!0,ti(),qn.forEach(function(_i){_i()})}function Do(Hr){Dt.getError(),Dn=!1,pn.restore(),Be.restore(),he.restore(),nt.restore(),Qe.restore(),St.restore(),ye.restore(),Jn&&Jn.restore(),Yt.procs.refresh(),Ur(),fr.forEach(function(_i){_i()})}function zo(Hr){function ri(sn,Ht){var jt={},Zt={};return Object.keys(sn).forEach(function(ft){var Lt=sn[ft];if(er.isDynamic(Lt))Zt[ft]=er.unbox(Lt,ft);else{if(Ht&&Array.isArray(Lt))for(var lt=0;lt<Lt.length;++lt)if(er.isDynamic(Lt[lt]))return void(Zt[ft]=er.unbox(Lt,ft));jt[ft]=Lt}}),{dynamic:Zt,static:jt}}Le(!!Hr,"invalid args to regl({...})"),Le.type(Hr,"object","invalid args to regl({...})");var ko=ri(Hr.context||{},!0),sl=ri(Hr.uniforms||{},!0),wh=ri(Hr.attributes||{},!1),wt=ri(function _i(sn){var Ht=G({},sn);function jt(Zt){if(Zt in Ht){var ft=Ht[Zt];delete Ht[Zt],Object.keys(ft).forEach(function(Lt){Ht[Zt+"."+Lt]=ft[Lt]})}}return delete Ht.uniforms,delete Ht.attributes,delete Ht.context,delete Ht.vao,"stencil"in Ht&&Ht.stencil.op&&(Ht.stencil.opBack=Ht.stencil.opFront=Ht.stencil.op,delete Ht.stencil.op),jt("blend"),jt("depth"),jt("cull"),jt("stencil"),jt("polygonOffset"),jt("scissor"),jt("sample"),"vao"in sn&&(Ht.vao=sn.vao),Ht}(Hr),!1),yn={gpuTime:0,cpuTime:0,count:0},dn=Yt.compile(wt,wh,sl,ko,yn),wr=dn.draw,Ci=dn.batch,ht=dn.scope,et=[];return G(function on(sn,Ht){var jt;if(Dn&&Le.raise("context lost"),"function"==typeof sn)return ht.call(this,null,sn,0);if("function"==typeof Ht)if("number"==typeof sn)for(jt=0;jt<sn;++jt)ht.call(this,null,Ht,jt);else{if(!Array.isArray(sn))return ht.call(this,sn,Ht,0);for(jt=0;jt<sn.length;++jt)ht.call(this,sn[jt],Ht,jt)}else if("number"==typeof sn){if(sn>0)return Ci.call(this,function Bt(sn){for(;et.length<sn;)et.push(null);return et}(0|sn),0|sn)}else{if(!Array.isArray(sn))return wr.call(this,sn);if(sn.length)return Ci.call(this,sn,sn.length)}},{stats:yn,destroy:function(){dn.destroy()}})}rn&&(rn.addEventListener(xc,Lr,!1),rn.addEventListener(bh,Do,!1));var mo=St.setFBO=zo({framebuffer:er.define.call(null,1,"framebuffer")});function Mi(Hr,_i){var ri=0;Yt.procs.poll();var ko=_i.color;ko&&(Dt.clearColor(+ko[0]||0,+ko[1]||0,+ko[2]||0,+ko[3]||0),ri|=16384),"depth"in _i&&(Dt.clearDepth(+_i.depth),ri|=256),"stencil"in _i&&(Dt.clearStencil(0|_i.stencil),ri|=1024),Le(!!ri,"called regl.clear with no buffer specified"),Dt.clear(ri)}function Go(Hr){return Le.type(Hr,"function","regl.frame() callback must be a function"),nn.push(Hr),Ur(),{cancel:function _i(){var ri=Ef(nn,Hr);Le(ri>=0,"cannot cancel a frame twice"),nn[ri]=function ko(){var sl=Ef(nn,ko);nn[sl]=nn[nn.length-1],nn.length-=1,nn.length<=0&&ti()}}}}function ba(){var Hr=tn.viewport,_i=tn.scissor_box;Hr[0]=Hr[1]=_i[0]=_i[1]=0,C.viewportWidth=C.framebufferWidth=C.drawingBufferWidth=Hr[2]=_i[2]=Dt.drawingBufferWidth,C.viewportHeight=C.framebufferHeight=C.drawingBufferHeight=Hr[3]=_i[3]=Dt.drawingBufferHeight}function ka(){C.tick+=1,C.time=di(),ba(),Yt.procs.poll()}function ha(){nt.refresh(),ba(),Yt.procs.refresh(),Jn&&Jn.update()}function di(){return(yr()-Yn)/1e3}ha();var Ki=G(zo,{clear:function Lo(Hr){if(Le("object"==typeof Hr&&Hr,"regl.clear() takes an object as input"),"framebuffer"in Hr)if(Hr.framebuffer&&"framebufferCube"===Hr.framebuffer_reglType)for(var _i=0;_i<6;++_i)mo(G({framebuffer:Hr.framebuffer.faces[_i]},Hr),Mi);else mo(Hr,Mi);else Mi(0,Hr)},prop:er.define.bind(null,1),context:er.define.bind(null,2),this:er.define.bind(null,3),draw:zo({}),buffer:function(Hr){return he.create(Hr,34962,!1,!1)},elements:function(Hr){return Ie.create(Hr,!1)},texture:nt.create2D,cube:nt.createCube,renderbuffer:Qe.create,framebuffer:St.create,framebufferCube:St.createCube,vao:ye.createVAO,attributes:hn,frame:Go,on:function _o(Hr,_i){var ri;switch(Le.type(_i,"function","listener callback must be a function"),Hr){case"frame":return Go(_i);case"lost":ri=qn;break;case"restore":ri=fr;break;case"destroy":ri=ar;break;default:Le.raise("invalid event, must be one of frame,lost,restore,destroy")}return ri.push(_i),{cancel:function(){for(var ko=0;ko<ri.length;++ko)if(ri[ko]===_i)return ri[ko]=ri[ri.length-1],void ri.pop()}}},limits:se,hasExtension:function(Hr){return se.extensions.indexOf(Hr.toLowerCase())>=0},read:Mn,destroy:function ui(){nn.length=0,ti(),rn&&(rn.removeEventListener(xc,Lr),rn.removeEventListener(bh,Do)),Be.clear(),St.clear(),Qe.clear(),nt.clear(),Ie.clear(),he.clear(),ye.clear(),Jn&&Jn.clear(),ar.forEach(function(Hr){Hr()})},_gl:Dt,_refresh:ha,poll:function(){ka(),Jn&&Jn.update()},now:di,stats:Hn});return ot.onDone(null,Ki),Ki}}()},6931:(Qt,V,G)=>{"use strict";var B=G(1708),Q=Array.prototype.concat,j=Array.prototype.slice,k=Qt.exports=function(I){for(var x=[],E=0,b=I.length;E<b;E++){var w=I[E];B(w)?x=Q.call(x,j.call(w)):x.push(w)}return x};k.wrap=function(F){return function(){return F(k(arguments))}}},1708:Qt=>{Qt.exports=function(G){return!(!G||"string"==typeof G)&&(G instanceof Array||Array.isArray(G)||G.length>=0&&(G.splice instanceof Function||Object.getOwnPropertyDescriptor(G,G.length-1)&&"String"!==G.constructor.name))}},655:(Qt,V,G)=>{"use strict";G.r(V),G.d(V,{__assign:()=>j,__asyncDelegator:()=>X,__asyncGenerator:()=>ee,__asyncValues:()=>ae,__await:()=>K,__awaiter:()=>A,__classPrivateFieldGet:()=>_e,__classPrivateFieldIn:()=>Ce,__classPrivateFieldSet:()=>me,__createBinding:()=>S,__decorate:()=>F,__esDecorate:()=>x,__exportStar:()=>P,__extends:()=>Q,__generator:()=>M,__importDefault:()=>we,__importStar:()=>ve,__makeTemplateObject:()=>re,__metadata:()=>y,__param:()=>I,__propKey:()=>b,__read:()=>z,__rest:()=>k,__runInitializers:()=>E,__setFunctionName:()=>w,__spread:()=>ie,__spreadArray:()=>q,__spreadArrays:()=>ne,__values:()=>U});var B=function(fe,be){return(B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(te,de){te.__proto__=de}||function(te,de){for(var ke in de)Object.prototype.hasOwnProperty.call(de,ke)&&(te[ke]=de[ke])})(fe,be)};function Q(fe,be){if("function"!=typeof be&&null!==be)throw new TypeError("Class extends value "+String(be)+" is not a constructor or null");function te(){this.constructor=fe}B(fe,be),fe.prototype=null===be?Object.create(be):(te.prototype=be.prototype,new te)}var j=function(){return j=Object.assign||function(be){for(var te,de=1,ke=arguments.length;de<ke;de++)for(var Ze in te=arguments[de])Object.prototype.hasOwnProperty.call(te,Ze)&&(be[Ze]=te[Ze]);return be},j.apply(this,arguments)};function k(fe,be){var te={};for(var de in fe)Object.prototype.hasOwnProperty.call(fe,de)&&be.indexOf(de)<0&&(te[de]=fe[de]);if(null!=fe&&"function"==typeof Object.getOwnPropertySymbols){var ke=0;for(de=Object.getOwnPropertySymbols(fe);ke<de.length;ke++)be.indexOf(de[ke])<0&&Object.prototype.propertyIsEnumerable.call(fe,de[ke])&&(te[de[ke]]=fe[de[ke]])}return te}function F(fe,be,te,de){var We,ke=arguments.length,Ze=ke<3?be:null===de?de=Object.getOwnPropertyDescriptor(be,te):de;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ze=Reflect.decorate(fe,be,te,de);else for(var bt=fe.length-1;bt>=0;bt--)(We=fe[bt])&&(Ze=(ke<3?We(Ze):ke>3?We(be,te,Ze):We(be,te))||Ze);return ke>3&&Ze&&Object.defineProperty(be,te,Ze),Ze}function I(fe,be){return function(te,de){be(te,de,fe)}}function x(fe,be,te,de,ke,Ze){function We(Ut){if(void 0!==Ut&&"function"!=typeof Ut)throw new TypeError("Function expected");return Ut}for(var yt,bt=de.kind,Ft="getter"===bt?"get":"setter"===bt?"set":"value",Pt=!be&&fe?de.static?fe:fe.prototype:null,Xe=be||(Pt?Object.getOwnPropertyDescriptor(Pt,de.name):{}),Ct=!1,pt=te.length-1;pt>=0;pt--){var xt={};for(var Fe in de)xt[Fe]="access"===Fe?{}:de[Fe];for(var Fe in de.access)xt.access[Fe]=de.access[Fe];xt.addInitializer=function(Ut){if(Ct)throw new TypeError("Cannot add initializers after decoration has completed");Ze.push(We(Ut||null))};var ut=(0,te[pt])("accessor"===bt?{get:Xe.get,set:Xe.set}:Xe[Ft],xt);if("accessor"===bt){if(void 0===ut)continue;if(null===ut||"object"!=typeof ut)throw new TypeError("Object expected");(yt=We(ut.get))&&(Xe.get=yt),(yt=We(ut.set))&&(Xe.set=yt),(yt=We(ut.init))&&ke.push(yt)}else(yt=We(ut))&&("field"===bt?ke.push(yt):Xe[Ft]=yt)}Pt&&Object.defineProperty(Pt,de.name,Xe),Ct=!0}function E(fe,be,te){for(var de=arguments.length>2,ke=0;ke<be.length;ke++)te=de?be[ke].call(fe,te):be[ke].call(fe);return de?te:void 0}function b(fe){return"symbol"==typeof fe?fe:"".concat(fe)}function w(fe,be,te){return"symbol"==typeof be&&(be=be.description?"[".concat(be.description,"]"):""),Object.defineProperty(fe,"name",{configurable:!0,value:te?"".concat(te," ",be):be})}function y(fe,be){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(fe,be)}function A(fe,be,te,de){return new(te||(te=Promise))(function(Ze,We){function bt(Xe){try{Pt(de.next(Xe))}catch(yt){We(yt)}}function Ft(Xe){try{Pt(de.throw(Xe))}catch(yt){We(yt)}}function Pt(Xe){Xe.done?Ze(Xe.value):function ke(Ze){return Ze instanceof te?Ze:new te(function(We){We(Ze)})}(Xe.value).then(bt,Ft)}Pt((de=de.apply(fe,be||[])).next())})}function M(fe,be){var de,ke,Ze,We,te={label:0,sent:function(){if(1&Ze[0])throw Ze[1];return Ze[1]},trys:[],ops:[]};return We={next:bt(0),throw:bt(1),return:bt(2)},"function"==typeof Symbol&&(We[Symbol.iterator]=function(){return this}),We;function bt(Pt){return function(Xe){return function Ft(Pt){if(de)throw new TypeError("Generator is already executing.");for(;We&&(We=0,Pt[0]&&(te=0)),te;)try{if(de=1,ke&&(Ze=2&Pt[0]?ke.return:Pt[0]?ke.throw||((Ze=ke.return)&&Ze.call(ke),0):ke.next)&&!(Ze=Ze.call(ke,Pt[1])).done)return Ze;switch(ke=0,Ze&&(Pt=[2&Pt[0],Ze.value]),Pt[0]){case 0:case 1:Ze=Pt;break;case 4:return te.label++,{value:Pt[1],done:!1};case 5:te.label++,ke=Pt[1],Pt=[0];continue;case 7:Pt=te.ops.pop(),te.trys.pop();continue;default:if(!(Ze=(Ze=te.trys).length>0&&Ze[Ze.length-1])&&(6===Pt[0]||2===Pt[0])){te=0;continue}if(3===Pt[0]&&(!Ze||Pt[1]>Ze[0]&&Pt[1]<Ze[3])){te.label=Pt[1];break}if(6===Pt[0]&&te.label<Ze[1]){te.label=Ze[1],Ze=Pt;break}if(Ze&&te.label<Ze[2]){te.label=Ze[2],te.ops.push(Pt);break}Ze[2]&&te.ops.pop(),te.trys.pop();continue}Pt=be.call(fe,te)}catch(Xe){Pt=[6,Xe],ke=0}finally{de=Ze=0}if(5&Pt[0])throw Pt[1];return{value:Pt[0]?Pt[1]:void 0,done:!0}}([Pt,Xe])}}}var S=Object.create?function(fe,be,te,de){void 0===de&&(de=te);var ke=Object.getOwnPropertyDescriptor(be,te);(!ke||("get"in ke?!be.__esModule:ke.writable||ke.configurable))&&(ke={enumerable:!0,get:function(){return be[te]}}),Object.defineProperty(fe,de,ke)}:function(fe,be,te,de){void 0===de&&(de=te),fe[de]=be[te]};function P(fe,be){for(var te in fe)"default"!==te&&!Object.prototype.hasOwnProperty.call(be,te)&&S(be,fe,te)}function U(fe){var be="function"==typeof Symbol&&Symbol.iterator,te=be&&fe[be],de=0;if(te)return te.call(fe);if(fe&&"number"==typeof fe.length)return{next:function(){return fe&&de>=fe.length&&(fe=void 0),{value:fe&&fe[de++],done:!fe}}};throw new TypeError(be?"Object is not iterable.":"Symbol.iterator is not defined.")}function z(fe,be){var te="function"==typeof Symbol&&fe[Symbol.iterator];if(!te)return fe;var ke,We,de=te.call(fe),Ze=[];try{for(;(void 0===be||be-- >0)&&!(ke=de.next()).done;)Ze.push(ke.value)}catch(bt){We={error:bt}}finally{try{ke&&!ke.done&&(te=de.return)&&te.call(de)}finally{if(We)throw We.error}}return Ze}function ie(){for(var fe=[],be=0;be<arguments.length;be++)fe=fe.concat(z(arguments[be]));return fe}function ne(){for(var fe=0,be=0,te=arguments.length;be<te;be++)fe+=arguments[be].length;var de=Array(fe),ke=0;for(be=0;be<te;be++)for(var Ze=arguments[be],We=0,bt=Ze.length;We<bt;We++,ke++)de[ke]=Ze[We];return de}function q(fe,be,te){if(te||2===arguments.length)for(var Ze,de=0,ke=be.length;de<ke;de++)(Ze||!(de in be))&&(Ze||(Ze=Array.prototype.slice.call(be,0,de)),Ze[de]=be[de]);return fe.concat(Ze||Array.prototype.slice.call(be))}function K(fe){return this instanceof K?(this.v=fe,this):new K(fe)}function ee(fe,be,te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ke,de=te.apply(fe,be||[]),Ze=[];return ke={},We("next"),We("throw"),We("return"),ke[Symbol.asyncIterator]=function(){return this},ke;function We(Ct){de[Ct]&&(ke[Ct]=function(pt){return new Promise(function(xt,Fe){Ze.push([Ct,pt,xt,Fe])>1||bt(Ct,pt)})})}function bt(Ct,pt){try{!function Ft(Ct){Ct.value instanceof K?Promise.resolve(Ct.value.v).then(Pt,Xe):yt(Ze[0][2],Ct)}(de[Ct](pt))}catch(xt){yt(Ze[0][3],xt)}}function Pt(Ct){bt("next",Ct)}function Xe(Ct){bt("throw",Ct)}function yt(Ct,pt){Ct(pt),Ze.shift(),Ze.length&&bt(Ze[0][0],Ze[0][1])}}function X(fe){var be,te;return be={},de("next"),de("throw",function(ke){throw ke}),de("return"),be[Symbol.iterator]=function(){return this},be;function de(ke,Ze){be[ke]=fe[ke]?function(We){return(te=!te)?{value:K(fe[ke](We)),done:!1}:Ze?Ze(We):We}:Ze}}function ae(fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var te,be=fe[Symbol.asyncIterator];return be?be.call(fe):(fe=U(fe),te={},de("next"),de("throw"),de("return"),te[Symbol.asyncIterator]=function(){return this},te);function de(Ze){te[Ze]=fe[Ze]&&function(We){return new Promise(function(bt,Ft){!function ke(Ze,We,bt,Ft){Promise.resolve(Ft).then(function(Pt){Ze({value:Pt,done:bt})},We)}(bt,Ft,(We=fe[Ze](We)).done,We.value)})}}}function re(fe,be){return Object.defineProperty?Object.defineProperty(fe,"raw",{value:be}):fe.raw=be,fe}var oe=Object.create?function(fe,be){Object.defineProperty(fe,"default",{enumerable:!0,value:be})}:function(fe,be){fe.default=be};function ve(fe){if(fe&&fe.__esModule)return fe;var be={};if(null!=fe)for(var te in fe)"default"!==te&&Object.prototype.hasOwnProperty.call(fe,te)&&S(be,fe,te);return oe(be,fe),be}function we(fe){return fe&&fe.__esModule?fe:{default:fe}}function _e(fe,be,te,de){if("a"===te&&!de)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof be?fe!==be||!de:!be.has(fe))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===te?de:"a"===te?de.call(fe):de?de.value:be.get(fe)}function me(fe,be,te,de,ke){if("m"===de)throw new TypeError("Private method is not writable");if("a"===de&&!ke)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof be?fe!==be||!ke:!be.has(fe))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===de?ke.call(fe,te):ke?ke.value=te:be.set(fe,te),te}function Ce(fe,be){if(null===be||"object"!=typeof be&&"function"!=typeof be)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof fe?be===fe:fe.has(be)}},7061:(Qt,V,G)=>{var B=G(8698).default;function Q(){"use strict";Qt.exports=Q=function(){return j},Qt.exports.__esModule=!0,Qt.exports.default=Qt.exports;var j={},k=Object.prototype,F=k.hasOwnProperty,I=Object.defineProperty||function(Ce,fe,be){Ce[fe]=be.value},x="function"==typeof Symbol?Symbol:{},E=x.iterator||"@@iterator",b=x.asyncIterator||"@@asyncIterator",w=x.toStringTag||"@@toStringTag";function y(Ce,fe,be){return Object.defineProperty(Ce,fe,{value:be,enumerable:!0,configurable:!0,writable:!0}),Ce[fe]}try{y({},"")}catch{y=function(be,te,de){return be[te]=de}}function A(Ce,fe,be,te){var ke=Object.create((fe&&fe.prototype instanceof P?fe:P).prototype),Ze=new we(te||[]);return I(ke,"_invoke",{value:ae(Ce,be,Ze)}),ke}function M(Ce,fe,be){try{return{type:"normal",arg:Ce.call(fe,be)}}catch(te){return{type:"throw",arg:te}}}j.wrap=A;var S={};function P(){}function U(){}function z(){}var ie={};y(ie,E,function(){return this});var ne=Object.getPrototypeOf,q=ne&&ne(ne(_e([])));q&&q!==k&&F.call(q,E)&&(ie=q);var K=z.prototype=P.prototype=Object.create(ie);function ee(Ce){["next","throw","return"].forEach(function(fe){y(Ce,fe,function(be){return this._invoke(fe,be)})})}function X(Ce,fe){function be(de,ke,Ze,We){var bt=M(Ce[de],Ce,ke);if("throw"!==bt.type){var Ft=bt.arg,Pt=Ft.value;return Pt&&"object"==B(Pt)&&F.call(Pt,"__await")?fe.resolve(Pt.__await).then(function(Xe){be("next",Xe,Ze,We)},function(Xe){be("throw",Xe,Ze,We)}):fe.resolve(Pt).then(function(Xe){Ft.value=Xe,Ze(Ft)},function(Xe){return be("throw",Xe,Ze,We)})}We(bt.arg)}var te;I(this,"_invoke",{value:function(ke,Ze){function We(){return new fe(function(bt,Ft){be(ke,Ze,bt,Ft)})}return te=te?te.then(We,We):We()}})}function ae(Ce,fe,be){var te="suspendedStart";return function(de,ke){if("executing"===te)throw new Error("Generator is already running");if("completed"===te){if("throw"===de)throw ke;return{value:void 0,done:!0}}for(be.method=de,be.arg=ke;;){var Ze=be.delegate;if(Ze){var We=re(Ze,be);if(We){if(We===S)continue;return We}}if("next"===be.method)be.sent=be._sent=be.arg;else if("throw"===be.method){if("suspendedStart"===te)throw te="completed",be.arg;be.dispatchException(be.arg)}else"return"===be.method&&be.abrupt("return",be.arg);te="executing";var bt=M(Ce,fe,be);if("normal"===bt.type){if(te=be.done?"completed":"suspendedYield",bt.arg===S)continue;return{value:bt.arg,done:be.done}}"throw"===bt.type&&(te="completed",be.method="throw",be.arg=bt.arg)}}}function re(Ce,fe){var be=fe.method,te=Ce.iterator[be];if(void 0===te)return fe.delegate=null,"throw"===be&&Ce.iterator.return&&(fe.method="return",fe.arg=void 0,re(Ce,fe),"throw"===fe.method)||"return"!==be&&(fe.method="throw",fe.arg=new TypeError("The iterator does not provide a '"+be+"' method")),S;var de=M(te,Ce.iterator,fe.arg);if("throw"===de.type)return fe.method="throw",fe.arg=de.arg,fe.delegate=null,S;var ke=de.arg;return ke?ke.done?(fe[Ce.resultName]=ke.value,fe.next=Ce.nextLoc,"return"!==fe.method&&(fe.method="next",fe.arg=void 0),fe.delegate=null,S):ke:(fe.method="throw",fe.arg=new TypeError("iterator result is not an object"),fe.delegate=null,S)}function oe(Ce){var fe={tryLoc:Ce[0]};1 in Ce&&(fe.catchLoc=Ce[1]),2 in Ce&&(fe.finallyLoc=Ce[2],fe.afterLoc=Ce[3]),this.tryEntries.push(fe)}function ve(Ce){var fe=Ce.completion||{};fe.type="normal",delete fe.arg,Ce.completion=fe}function we(Ce){this.tryEntries=[{tryLoc:"root"}],Ce.forEach(oe,this),this.reset(!0)}function _e(Ce){if(Ce){var fe=Ce[E];if(fe)return fe.call(Ce);if("function"==typeof Ce.next)return Ce;if(!isNaN(Ce.length)){var be=-1,te=function de(){for(;++be<Ce.length;)if(F.call(Ce,be))return de.value=Ce[be],de.done=!1,de;return de.value=void 0,de.done=!0,de};return te.next=te}}return{next:me}}function me(){return{value:void 0,done:!0}}return U.prototype=z,I(K,"constructor",{value:z,configurable:!0}),I(z,"constructor",{value:U,configurable:!0}),U.displayName=y(z,w,"GeneratorFunction"),j.isGeneratorFunction=function(Ce){var fe="function"==typeof Ce&&Ce.constructor;return!!fe&&(fe===U||"GeneratorFunction"===(fe.displayName||fe.name))},j.mark=function(Ce){return Object.setPrototypeOf?Object.setPrototypeOf(Ce,z):(Ce.__proto__=z,y(Ce,w,"GeneratorFunction")),Ce.prototype=Object.create(K),Ce},j.awrap=function(Ce){return{__await:Ce}},ee(X.prototype),y(X.prototype,b,function(){return this}),j.AsyncIterator=X,j.async=function(Ce,fe,be,te,de){void 0===de&&(de=Promise);var ke=new X(A(Ce,fe,be,te),de);return j.isGeneratorFunction(fe)?ke:ke.next().then(function(Ze){return Ze.done?Ze.value:ke.next()})},ee(K),y(K,w,"Generator"),y(K,E,function(){return this}),y(K,"toString",function(){return"[object Generator]"}),j.keys=function(Ce){var fe=Object(Ce),be=[];for(var te in fe)be.push(te);return be.reverse(),function de(){for(;be.length;){var ke=be.pop();if(ke in fe)return de.value=ke,de.done=!1,de}return de.done=!0,de}},j.values=_e,we.prototype={constructor:we,reset:function(fe){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(ve),!fe)for(var be in this)"t"===be.charAt(0)&&F.call(this,be)&&!isNaN(+be.slice(1))&&(this[be]=void 0)},stop:function(){this.done=!0;var fe=this.tryEntries[0].completion;if("throw"===fe.type)throw fe.arg;return this.rval},dispatchException:function(fe){if(this.done)throw fe;var be=this;function te(Ft,Pt){return Ze.type="throw",Ze.arg=fe,be.next=Ft,Pt&&(be.method="next",be.arg=void 0),!!Pt}for(var de=this.tryEntries.length-1;de>=0;--de){var ke=this.tryEntries[de],Ze=ke.completion;if("root"===ke.tryLoc)return te("end");if(ke.tryLoc<=this.prev){var We=F.call(ke,"catchLoc"),bt=F.call(ke,"finallyLoc");if(We&&bt){if(this.prev<ke.catchLoc)return te(ke.catchLoc,!0);if(this.prev<ke.finallyLoc)return te(ke.finallyLoc)}else if(We){if(this.prev<ke.catchLoc)return te(ke.catchLoc,!0)}else{if(!bt)throw new Error("try statement without catch or finally");if(this.prev<ke.finallyLoc)return te(ke.finallyLoc)}}}},abrupt:function(fe,be){for(var te=this.tryEntries.length-1;te>=0;--te){var de=this.tryEntries[te];if(de.tryLoc<=this.prev&&F.call(de,"finallyLoc")&&this.prev<de.finallyLoc){var ke=de;break}}ke&&("break"===fe||"continue"===fe)&&ke.tryLoc<=be&&be<=ke.finallyLoc&&(ke=null);var Ze=ke?ke.completion:{};return Ze.type=fe,Ze.arg=be,ke?(this.method="next",this.next=ke.finallyLoc,S):this.complete(Ze)},complete:function(fe,be){if("throw"===fe.type)throw fe.arg;return"break"===fe.type||"continue"===fe.type?this.next=fe.arg:"return"===fe.type?(this.rval=this.arg=fe.arg,this.method="return",this.next="end"):"normal"===fe.type&&be&&(this.next=be),S},finish:function(fe){for(var be=this.tryEntries.length-1;be>=0;--be){var te=this.tryEntries[be];if(te.finallyLoc===fe)return this.complete(te.completion,te.afterLoc),ve(te),S}},catch:function(fe){for(var be=this.tryEntries.length-1;be>=0;--be){var te=this.tryEntries[be];if(te.tryLoc===fe){var de=te.completion;if("throw"===de.type){var ke=de.arg;ve(te)}return ke}}throw new Error("illegal catch attempt")},delegateYield:function(fe,be,te){return this.delegate={iterator:_e(fe),resultName:be,nextLoc:te},"next"===this.method&&(this.arg=void 0),S}},j}Qt.exports=Q,Qt.exports.__esModule=!0,Qt.exports.default=Qt.exports},8698:Qt=>{function V(G){return Qt.exports=V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(B){return typeof B}:function(B){return B&&"function"==typeof Symbol&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},Qt.exports.__esModule=!0,Qt.exports.default=Qt.exports,V(G)}Qt.exports=V,Qt.exports.__esModule=!0,Qt.exports.default=Qt.exports},4687:(Qt,V,G)=>{var B=G(7061)();Qt.exports=B;try{regeneratorRuntime=B}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=B:Function("r","regeneratorRuntime = r")(B)}}},Qt=>{Qt(Qt.s=6855)}]);