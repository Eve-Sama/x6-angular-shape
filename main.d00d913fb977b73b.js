(self.webpackChunkx6_angular_shape=self.webpackChunkx6_angular_shape||[]).push([[179],{460:()=>{"object"==typeof window&&window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(No=>{Object.prototype.hasOwnProperty.call(No,"append")||Object.defineProperty(No,"append",{configurable:!0,enumerable:!0,writable:!0,value(...fe){const Tr=document.createDocumentFragment();fe.forEach(ci=>{const Ro=ci instanceof Node;Tr.appendChild(Ro?ci:document.createTextNode(String(ci)))}),this.appendChild(Tr)}})})},390:(Oo,No,fe)=>{"use strict";var Tr={};fe.r(Tr),fe.d(Tr,{dot:()=>R9,doubleMesh:()=>F9,fixedDot:()=>L9,mesh:()=>k9});var ci={};fe.r(ci),fe.d(ci,{flipX:()=>mA,flipXY:()=>vA,flipY:()=>yA,watermark:()=>j9});var Ro={};fe.r(Ro),fe.d(Ro,{blur:()=>V9,brightness:()=>Y9,contrast:()=>Z9,dropShadow:()=>H9,grayScale:()=>U9,highlight:()=>$9,hueRotate:()=>q9,invert:()=>W9,outline:()=>B9,saturate:()=>G9,sepia:()=>z9});var Id={};fe.r(Id),fe.d(Id,{async:()=>$7,block:()=>I7,circle:()=>RA,circlePlus:()=>V7,classic:()=>O7,cross:()=>j7,diamond:()=>R7,ellipse:()=>U7,path:()=>k7});var Od={};fe.r(Od),fe.d(Od,{annotations:()=>w7,atConnectionLength:()=>K7,atConnectionLengthIgnoreGradient:()=>X7,atConnectionLengthKeepGradient:()=>LA,atConnectionRatio:()=>Q7,atConnectionRatioIgnoreGradient:()=>J7,atConnectionRatioKeepGradient:()=>kA,connection:()=>Z7,displayEmpty:()=>D7,eol:()=>C7,fill:()=>g7,filter:()=>T7,html:()=>M7,lineHeight:()=>y7,port:()=>P7,ref:()=>J9,refCx:()=>r7,refCy:()=>i7,refD:()=>l7,refDKeepOffset:()=>s7,refDResetOffset:()=>EA,refDx:()=>K9,refDy:()=>Q9,refHeight:()=>DA,refHeight2:()=>f7,refPoints:()=>c7,refPointsKeepOffset:()=>o7,refPointsResetOffset:()=>SA,refR:()=>a7,refRCircumscribed:()=>n7,refRInscribed:()=>xA,refRx:()=>e7,refRy:()=>t7,refWidth:()=>CA,refWidth2:()=>h7,refX:()=>bA,refX2:()=>u7,refY:()=>wA,refY2:()=>d7,resetOffset:()=>_7,sourceMarker:()=>G7,stroke:()=>p7,style:()=>A7,targetMarker:()=>q7,text:()=>TA,textPath:()=>b7,textVerticalAnchor:()=>v7,textWrap:()=>m7,title:()=>x7,vertexMarker:()=>W7,xAlign:()=>E7,yAlign:()=>S7});var Nd={};fe.r(Nd),fe.d(Nd,{className:()=>eY,opacity:()=>tY,stroke:()=>rY});var Rd={};fe.r(Rd),fe.d(Rd,{absolute:()=>iY,bottom:()=>hY,ellipse:()=>sY,ellipseSpread:()=>oY,left:()=>cY,line:()=>lY,right:()=>uY,top:()=>dY});var Ld={};fe.r(Ld),fe.d(Ld,{bottom:()=>vY,inside:()=>CY,insideOriented:()=>DY,left:()=>pY,manual:()=>gY,outside:()=>bY,outsideOriented:()=>wY,radial:()=>xY,radialOriented:()=>EY,right:()=>mY,top:()=>yY});var kd={};fe.r(kd),fe.d(kd,{noop:()=>AY,pinAbsolute:()=>IY,pinRelative:()=>PY});var Fd={};fe.r(Fd),fe.d(Fd,{bottom:()=>$Y,bottomLeft:()=>GY,bottomRight:()=>qY,center:()=>jY,left:()=>VY,midSide:()=>ZY,nodeCenter:()=>YY,orth:()=>WY,right:()=>HY,top:()=>BY,topLeft:()=>UY,topRight:()=>zY});var jd={};fe.r(jd),fe.d(jd,{closest:()=>KY,length:()=>JY,orth:()=>QY,ratio:()=>XY});var Bd={};fe.r(Bd),fe.d(Bd,{anchor:()=>iZ,bbox:()=>QA,boundary:()=>nZ,rect:()=>tZ});var $d={};fe.r($d),fe.d($d,{er:()=>EZ,loop:()=>SZ,manhattan:()=>hM,metro:()=>xZ,normal:()=>sZ,oneSide:()=>oZ,orth:()=>nM});var Vd={};function Ne(n){return"function"==typeof n}function Hd(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}fe.r(Vd),fe.d(Vd,{jumpover:()=>RZ,loop:()=>AZ,normal:()=>_Z,rounded:()=>MZ,smooth:()=>TZ});const Ud=Hd(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function zd(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class rn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(Ne(r))try{r()}catch(s){e=s instanceof Ud?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Km(s)}catch(o){e=e??[],o instanceof Ud?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Ud(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Km(e);else{if(e instanceof rn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&zd(t,e)}remove(e){const{_finalizers:t}=this;t&&zd(t,e),e instanceof rn&&e._removeParent(this)}}rn.EMPTY=(()=>{const n=new rn;return n.closed=!0,n})();const Xm=rn.EMPTY;function Jm(n){return n instanceof rn||n&&"closed"in n&&Ne(n.remove)&&Ne(n.add)&&Ne(n.unsubscribe)}function Km(n){Ne(n)?n():n.unsubscribe()}const ui={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Ol={setTimeout(n,e,...t){const{delegate:r}=Ol;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Ol;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Qm(n){Ol.setTimeout(()=>{const{onUnhandledError:e}=ui;if(!e)throw n;e(n)})}function ey(){}const OM=Gd("C",void 0,void 0);function Gd(n,e,t){return{kind:n,value:e,error:t}}let di=null;function Nl(n){if(ui.useDeprecatedSynchronousErrorHandling){const e=!di;if(e&&(di={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=di;if(di=null,t)throw r}}else n()}class qd extends rn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Jm(e)&&e.add(this)):this.destination=BM}static create(e,t,r){return new Lo(e,t,r)}next(e){this.isStopped?Yd(function RM(n){return Gd("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Yd(function NM(n){return Gd("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Yd(OM,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const kM=Function.prototype.bind;function Wd(n,e){return kM.call(n,e)}class FM{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Rl(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Rl(r)}else Rl(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Rl(t)}}}class Lo extends qd{constructor(e,t,r){let i;if(super(),Ne(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&ui.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Wd(e.next,s),error:e.error&&Wd(e.error,s),complete:e.complete&&Wd(e.complete,s)}):i=e}this.destination=new FM(i)}}function Rl(n){ui.useDeprecatedSynchronousErrorHandling?function LM(n){ui.useDeprecatedSynchronousErrorHandling&&di&&(di.errorThrown=!0,di.error=n)}(n):Qm(n)}function Yd(n,e){const{onStoppedNotification:t}=ui;t&&Ol.setTimeout(()=>t(n,e))}const BM={closed:!0,next:ey,error:function jM(n){throw n},complete:ey},Zd="function"==typeof Symbol&&Symbol.observable||"@@observable";function hi(n){return n}function ty(n){return 0===n.length?hi:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let tt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function HM(n){return n&&n instanceof qd||function VM(n){return n&&Ne(n.next)&&Ne(n.error)&&Ne(n.complete)}(n)&&Jm(n)}(t)?t:new Lo(t,r,i);return Nl(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=ny(r))((i,s)=>{const o=new Lo({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Zd](){return this}pipe(...t){return ty(t)(this)}toPromise(t){return new(t=ny(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function ny(n){var e;return null!==(e=n??ui.Promise)&&void 0!==e?e:Promise}const UM=Hd(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let nr=(()=>{class n extends tt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new ry(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new UM}next(t){Nl(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){Nl(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Nl(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Xm:(this.currentObservers=null,s.push(t),new rn(()=>{this.currentObservers=null,zd(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new tt;return t.source=this,t}}return n.create=(e,t)=>new ry(e,t),n})();class ry extends nr{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:Xm}}function iy(n){return Ne(n?.lift)}function lt(n){return e=>{if(iy(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ct(n,e,t,r,i){return new zM(n,e,t,r,i)}class zM extends qd{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ce(n,e){return lt((t,r)=>{let i=0;t.subscribe(ct(r,s=>{r.next(n.call(e,s,i++))}))})}function fi(n){return this instanceof fi?(this.v=n,this):new fi(n)}function WM(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(g,p){s.push([h,f,g,p])>1||a(h,f)})})}function a(h,f){try{!function l(h){h.value instanceof fi?Promise.resolve(h.value.v).then(c,u):d(s[0][2],h)}(r[h](f))}catch(g){d(s[0][3],g)}}function c(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function YM(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function ay(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){!function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=n[s](o)).done,o.value)})}}}const ly=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function cy(n){return Ne(n?.then)}function uy(n){return Ne(n[Zd])}function dy(n){return Symbol.asyncIterator&&Ne(n?.[Symbol.asyncIterator])}function hy(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const fy=function XM(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function gy(n){return Ne(n?.[fy])}function py(n){return WM(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield fi(t.read());if(i)return yield fi(void 0);yield yield fi(r)}}finally{t.releaseLock()}})}function my(n){return Ne(n?.getReader)}function Fn(n){if(n instanceof tt)return n;if(null!=n){if(uy(n))return function JM(n){return new tt(e=>{const t=n[Zd]();if(Ne(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(ly(n))return function KM(n){return new tt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(cy(n))return function QM(n){return new tt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Qm)})}(n);if(dy(n))return yy(n);if(gy(n))return function e1(n){return new tt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(my(n))return function t1(n){return yy(py(n))}(n)}throw hy(n)}function yy(n){return new tt(e=>{(function n1(n,e){var t,r,i,s;return function GM(n,e,t,r){return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):function i(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=YM(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function rr(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function pt(n,e,t=1/0){return Ne(e)?pt((r,i)=>ce((s,o)=>e(r,s,i,o))(Fn(n(r,i))),t):("number"==typeof e&&(t=e),lt((r,i)=>function r1(n,e,t,r,i,s,o,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&e.complete()},f=p=>c<r?g(p):l.push(p),g=p=>{s&&e.next(p),c++;let m=!1;Fn(t(p,u++)).subscribe(ct(e,v=>{i?.(v),s?f(v):e.next(v)},()=>{m=!0},void 0,()=>{if(m)try{for(c--;l.length&&c<r;){const v=l.shift();o?rr(e,o,()=>g(v)):g(v)}h()}catch(v){e.error(v)}}))};return n.subscribe(ct(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,i,n,t)))}function Yi(n=1/0){return pt(hi,n)}const jn=new tt(n=>n.complete());function Jd(n){return n[n.length-1]}function ko(n){return function s1(n){return n&&Ne(n.schedule)}(Jd(n))?n.pop():void 0}function vy(n,e=0){return lt((t,r)=>{t.subscribe(ct(r,i=>rr(r,n,()=>r.next(i),e),()=>rr(r,n,()=>r.complete(),e),i=>rr(r,n,()=>r.error(i),e)))})}function by(n,e=0){return lt((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function wy(n,e){if(!n)throw new Error("Iterable cannot be null");return new tt(t=>{rr(t,e,()=>{const r=n[Symbol.asyncIterator]();rr(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function nt(n,e){return e?function f1(n,e){if(null!=n){if(uy(n))return function l1(n,e){return Fn(n).pipe(by(e),vy(e))}(n,e);if(ly(n))return function u1(n,e){return new tt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(cy(n))return function c1(n,e){return Fn(n).pipe(by(e),vy(e))}(n,e);if(dy(n))return wy(n,e);if(gy(n))return function d1(n,e){return new tt(t=>{let r;return rr(t,e,()=>{r=n[fy](),rr(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>Ne(r?.return)&&r.return()})}(n,e);if(my(n))return function h1(n,e){return wy(py(n),e)}(n,e)}throw hy(n)}(n,e):Fn(n)}function Kd(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Lo({next:()=>{r.unsubscribe(),n()}});return e(...t).subscribe(r)}function be(n){for(let e in n)if(n[e]===be)return e;throw Error("Could not find renamed property on target object.")}function De(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(De).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function eh(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const m1=be({__forward_ref__:be});function th(n){return n.__forward_ref__=th,n.toString=function(){return De(this())},n}function U(n){return nh(n)?n():n}function nh(n){return"function"==typeof n&&n.hasOwnProperty(m1)&&n.__forward_ref__===th}function rh(n){return n&&!!n.\u0275providers}class O extends Error{constructor(e,t){super(function Ll(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function J(n){return"string"==typeof n?n:null==n?"":String(n)}function kl(n,e){throw new O(-201,!1)}function sn(n,e){null==n&&function me(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function Y(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ir(n){return{providers:n.providers||[],imports:n.imports||[]}}function Fl(n){return Dy(n,jl)||Dy(n,Ey)}function Dy(n,e){return n.hasOwnProperty(e)?n[e]:null}function xy(n){return n&&(n.hasOwnProperty(ih)||n.hasOwnProperty(S1))?n[ih]:null}const jl=be({\u0275prov:be}),ih=be({\u0275inj:be}),Ey=be({ngInjectableDef:be}),S1=be({ngInjectorDef:be});var z=(()=>((z=z||{})[z.Default=0]="Default",z[z.Host=1]="Host",z[z.Self=2]="Self",z[z.SkipSelf=4]="SkipSelf",z[z.Optional=8]="Optional",z))();let sh;function on(n){const e=sh;return sh=n,e}function Sy(n,e,t){const r=Fl(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&z.Optional?null:void 0!==e?e:void kl(De(n))}const xe=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Fo={},oh="__NG_DI_FLAG__",Bl="ngTempTokenPath",M1=/\n/gm,_y="__source";let jo;function Zi(n){const e=jo;return jo=n,e}function P1(n,e=z.Default){if(void 0===jo)throw new O(-203,!1);return null===jo?Sy(n,void 0,e):jo.get(n,e&z.Optional?null:void 0,e)}function B(n,e=z.Default){return(function _1(){return sh}()||P1)(U(n),e)}function ue(n,e=z.Default){return B(n,$l(e))}function $l(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function ah(n){const e=[];for(let t=0;t<n.length;t++){const r=U(n[t]);if(Array.isArray(r)){if(0===r.length)throw new O(900,!1);let i,s=z.Default;for(let o=0;o<r.length;o++){const a=r[o],l=I1(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}e.push(B(i,s))}else e.push(B(r))}return e}function Bo(n,e){return n[oh]=e,n.prototype[oh]=e,n}function I1(n){return n[oh]}function Or(n){return{toString:n}.toString()}var Cn=(()=>((Cn=Cn||{})[Cn.OnPush=0]="OnPush",Cn[Cn.Default=1]="Default",Cn))(),Bn=(()=>{return(n=Bn||(Bn={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Bn;var n})();const ir={},ge=[],Vl=be({\u0275cmp:be}),lh=be({\u0275dir:be}),ch=be({\u0275pipe:be}),My=be({\u0275mod:be}),sr=be({\u0275fac:be}),$o=be({__NG_ELEMENT_ID__:be});let R1=0;function Vo(n){return Or(()=>{const t=!0===n.standalone,r={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Cn.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||ge,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Bn.Emulated,id:"c"+R1++,styles:n.styles||ge,_:null,setInput:null,schemas:n.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},s=n.dependencies,o=n.features;return i.inputs=Iy(n.inputs,r),i.outputs=Iy(n.outputs),o&&o.forEach(a=>a(i)),i.directiveDefs=s?()=>("function"==typeof s?s():s).map(Ty).filter(Py):null,i.pipeDefs=s?()=>("function"==typeof s?s():s).map(Nt).filter(Py):null,i})}function Ty(n){return ye(n)||Ct(n)}function Py(n){return null!==n}function gi(n){return Or(()=>({type:n.type,bootstrap:n.bootstrap||ge,declarations:n.declarations||ge,imports:n.imports||ge,exports:n.exports||ge,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Iy(n,e){if(null==n)return ir;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}const Ot=Vo;function ye(n){return n[Vl]||null}function Ct(n){return n[lh]||null}function Nt(n){return n[ch]||null}function Zt(n,e){const t=n[My]||null;if(!t&&!0===e)throw new Error(`Type ${De(n)} does not have '\u0275mod' property.`);return t}function Xt(n){return Array.isArray(n)&&"object"==typeof n[1]}function xn(n){return Array.isArray(n)&&!0===n[1]}function hh(n){return 0!=(4&n.flags)}function Go(n){return n.componentOffset>-1}function ql(n){return 1==(1&n.flags)}function En(n){return null!==n.template}function F1(n){return 0!=(256&n[2])}function mi(n,e){return n.hasOwnProperty(sr)?n[sr]:null}class $1{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Nr(){return Fy}function Fy(n){return n.type.prototype.ngOnChanges&&(n.setInput=H1),V1}function V1(){const n=By(this),e=n?.current;if(e){const t=n.previous;if(t===ir)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function H1(n,e,t,r){const i=this.declaredInputs[t],s=By(n)||function U1(n,e){return n[jy]=e}(n,{previous:ir,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[i];o[i]=new $1(l&&l.currentValue,e,a===ir),n[r]=e}Nr.ngInherit=!0;const jy="__ngSimpleChanges__";function By(n){return n[jy]||null}function mt(n){for(;Array.isArray(n);)n=n[0];return n}function Wl(n,e){return mt(e[n])}function Jt(n,e){return mt(e[n.index])}function Kt(n,e){const t=e[n];return Xt(t)?t:t[0]}function Yl(n){return 64==(64&n[2])}function Rr(n,e){return null==e?null:n[e]}function Uy(n){n[18]=0}function gh(n,e){n[5]+=e;let t=n,r=n[3];for(;null!==r&&(1===e&&1===t[5]||-1===e&&0===t[5]);)r[5]+=e,t=r,r=r[3]}const K={lFrame:tv(null),bindingsEnabled:!0};function Gy(){return K.bindingsEnabled}function _(){return K.lFrame.lView}function de(){return K.lFrame.tView}function yt(){let n=Yy();for(;null!==n&&64===n.type;)n=n.parent;return n}function Yy(){return K.lFrame.currentTNode}function Vn(n,e){const t=K.lFrame;t.currentTNode=n,t.isParent=e}function ph(){return K.lFrame.isParent}function nT(n,e){const t=K.lFrame;t.bindingIndex=t.bindingRootIndex=n,yh(e)}function yh(n){K.lFrame.currentDirectiveIndex=n}function Ky(){return K.lFrame.currentQueryIndex}function bh(n){K.lFrame.currentQueryIndex=n}function iT(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function Qy(n,e,t){if(t&z.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&z.Host||(i=iT(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;e=i,n=s}const r=K.lFrame=ev();return r.currentTNode=e,r.lView=n,!0}function wh(n){const e=ev(),t=n[1];K.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function ev(){const n=K.lFrame,e=null===n?null:n.child;return null===e?tv(n):e}function tv(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function nv(){const n=K.lFrame;return K.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const rv=nv;function Ch(){const n=nv();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function kt(){return K.lFrame.selectedIndex}function yi(n){K.lFrame.selectedIndex=n}function Zl(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-t,l),c&&((n.viewHooks||(n.viewHooks=[])).push(t,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,c)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function Xl(n,e,t){iv(n,e,3,t)}function Jl(n,e,t,r){(3&n[2])===t&&iv(n,e,t,r)}function Dh(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function iv(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let l=void 0!==r?65535&n[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(n[18]+=65536),(a<s||-1==s)&&(fT(n,t,e,l),n[18]=(4294901760&n[18])+l+2),l++}function fT(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];if(i){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class Wo{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function Eh(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];ov(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function sv(n){return 3===n||4===n||6===n}function ov(n){return 64===n.charCodeAt(0)}function Yo(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||av(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function av(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}function lv(n){return-1!==n}function Kl(n){return 32767&n}function Ql(n,e){let t=function yT(n){return n>>16}(n),r=e;for(;t>0;)r=r[15],t--;return r}let Sh=!0;function ec(n){const e=Sh;return Sh=n,e}let vT=0;const Hn={};function tc(n,e){const t=dv(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,_h(r.data,n),_h(e,null),_h(r.blueprint,null));const i=Ah(n,e),s=n.injectorIndex;if(lv(i)){const o=Kl(i),a=Ql(i,e),l=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=i,s}function _h(n,e){n.push(0,0,0,0,0,0,0,0,e)}function dv(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Ah(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=bv(i),null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function Mh(n,e,t){!function bT(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty($o)&&(r=t[$o]),null==r&&(r=t[$o]=vT++);const i=255&r;e.data[n+(i>>5)]|=1<<i}(n,e,t)}function hv(n,e,t){if(t&z.Optional||void 0!==n)return n;kl()}function fv(n,e,t,r){if(t&z.Optional&&void 0===r&&(r=null),!(t&(z.Self|z.Host))){const i=n[9],s=on(void 0);try{return i?i.get(e,r,t&z.Optional):Sy(e,r,t&z.Optional)}finally{on(s)}}return hv(r,0,t)}function gv(n,e,t,r=z.Default,i){if(null!==n){if(1024&e[2]){const o=function ET(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const a=pv(s,o,t,r|z.Self,Hn);if(a!==Hn)return a;let l=s.parent;if(!l){const c=o[21];if(c){const u=c.get(t,Hn,r);if(u!==Hn)return u}l=bv(o),o=o[15]}s=l}return i}(n,e,t,r,Hn);if(o!==Hn)return o}const s=pv(n,e,t,r,Hn);if(s!==Hn)return s}return fv(e,t,r,i)}function pv(n,e,t,r,i){const s=function DT(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty($o)?n[$o]:void 0;return"number"==typeof e?e>=0?255&e:xT:e}(t);if("function"==typeof s){if(!Qy(e,n,r))return r&z.Host?hv(i,0,r):fv(e,t,r,i);try{const o=s(r);if(null!=o||r&z.Optional)return o;kl()}finally{rv()}}else if("number"==typeof s){let o=null,a=dv(n,e),l=-1,c=r&z.Host?e[16][6]:null;for((-1===a||r&z.SkipSelf)&&(l=-1===a?Ah(n,e):e[a+8],-1!==l&&yv(r,!1)?(o=e[1],a=Kl(l),e=Ql(l,e)):a=-1);-1!==a;){const u=e[1];if(mv(s,a,u.data)){const d=CT(a,e,t,o,r,c);if(d!==Hn)return d}l=e[a+8],-1!==l&&yv(r,e[1].data[a+8]===c)&&mv(s,a,e)?(o=u,a=Kl(l),e=Ql(l,e)):a=-1}}return i}function CT(n,e,t,r,i,s){const o=e[1],a=o.data[n+8],u=nc(a,o,t,null==r?Go(a)&&Sh:r!=o&&0!=(3&a.type),i&z.Host&&s===a);return null!==u?vi(e,o,u,a):Hn}function nc(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,u=s>>20,h=i?a+u:n.directiveEnd;for(let f=r?a:a+u;f<h;f++){const g=o[f];if(f<l&&t===g||f>=l&&g.type===t)return f}if(i){const f=o[l];if(f&&En(f)&&f.type===t)return l}return null}function vi(n,e,t,r){let i=n[t];const s=e.data;if(function gT(n){return n instanceof Wo}(i)){const o=i;o.resolving&&function y1(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new O(-200,`Circular dependency in DI detected for ${n}${t}`)}(function pe(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():J(n)}(s[t]));const a=ec(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?on(o.injectImpl):null;Qy(n,r,z.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function hT(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Fy(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,i),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==l&&on(l),ec(a),o.resolving=!1,rv()}}return i}function mv(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function yv(n,e){return!(n&z.Self||n&z.Host&&e)}class is{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return gv(this._tNode,this._lView,e,$l(r),t)}}function xT(){return new is(yt(),_())}function Th(n){return nh(n)?()=>{const e=Th(U(n));return e&&e()}:mi(n)}function bv(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[6]:null}const os="__parameters__";function ls(n,e,t){return Or(()=>{const r=function Ph(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty(os)?l[os]:Object.defineProperty(l,os,{value:[]})[os];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class q{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Y({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function bi(n,e){n.forEach(t=>Array.isArray(t)?bi(t,e):e(t))}function Cv(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ic(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Qt(n,e,t){let r=cs(n,e);return r>=0?n[1|r]=t:(r=~r,function MT(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Oh(n,e){const t=cs(n,e);if(t>=0)return n[1|t]}function cs(n,e){return function Dv(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const Ko=Bo(ls("Optional"),8),Qo=Bo(ls("SkipSelf"),4);var zt=(()=>((zt=zt||{})[zt.Important=1]="Important",zt[zt.DashCase=2]="DashCase",zt))();const jh=new Map;let XT=0;const $h="__ngContext__";function Et(n,e){Xt(e)?(n[$h]=e[20],function KT(n){jh.set(n[20],n)}(e)):n[$h]=e}function Hh(n,e){return undefined(n,e)}function ra(n){const e=n[3];return xn(e)?e[3]:e}function Uh(n){return Hv(n[13])}function zh(n){return Hv(n[4])}function Hv(n){for(;null!==n&&!xn(n);)n=n[4];return n}function ds(n,e,t,r,i){if(null!=r){let s,o=!1;xn(r)?s=r:Xt(r)&&(o=!0,r=r[0]);const a=mt(r);0===n&&null!==t?null==i?Yv(e,t,a):wi(e,t,a,i||null,!0):1===n&&null!==t?wi(e,t,a,i||null,!0):2===n?function Jh(n,e,t){const r=lc(n,e);r&&function vP(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function CP(n,e,t,r,i){const s=t[7];s!==mt(t)&&ds(e,n,r,s,i);for(let a=10;a<t.length;a++){const l=t[a];ia(l[1],l,n,e,r,s)}}(e,n,s,t,i)}}function qh(n,e,t){return n.createElement(e,t)}function zv(n,e){const t=n[9],r=t.indexOf(e),i=e[3];512&e[2]&&(e[2]&=-513,gh(i,-1)),t.splice(r,1)}function Wh(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const i=r[17];null!==i&&i!==n&&zv(i,r),e>0&&(n[t-1][4]=r[4]);const s=ic(n,10+e);!function uP(n,e){ia(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function Gv(n,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&ia(n,e,t,3,null,null),function fP(n){let e=n[13];if(!e)return Yh(n[1],n);for(;e;){let t=null;if(Xt(e))t=e[13];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)Xt(e)&&Yh(e[1],e),e=e[3];null===e&&(e=n),Xt(e)&&Yh(e[1],e),t=e&&e[4]}e=t}}(e)}}function Yh(n,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function yP(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof Wo)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(i)}finally{}}}}(n,e),function mP(n,e){const t=n.cleanup,r=e[7];let i=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[i=o]():r[i=-o].unsubscribe(),s+=2}else{const o=r[i=t[s+1]];t[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)(0,r[s])();e[7]=null}}(n,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&xn(e[3])){t!==e[3]&&zv(t,e);const r=e[19];null!==r&&r.detachView(n)}!function QT(n){jh.delete(n[20])}(e)}}function qv(n,e,t){return function Wv(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[0];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===Bn.None||s===Bn.Emulated)return null}return Jt(r,t)}}(n,e.parent,t)}function wi(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Yv(n,e,t){n.appendChild(e,t)}function Zv(n,e,t,r,i){null!==r?wi(n,e,t,r,i):Yv(n,e,t)}function lc(n,e){return n.parentNode(e)}let ef,Kv=function Jv(n,e,t){return 40&n.type?Jt(n,t):null};function cc(n,e,t,r){const i=qv(n,r,e),s=e[11],a=function Xv(n,e,t){return Kv(n,e,t)}(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(t))for(let l=0;l<t.length;l++)Zv(s,i,t[l],a,!1);else Zv(s,i,t,a,!1)}function uc(n,e){if(null!==e){const t=e.type;if(3&t)return Jt(e,n);if(4&t)return Xh(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return uc(n,r);{const i=n[e.index];return xn(i)?Xh(-1,i):mt(i)}}if(32&t)return Hh(e,n)()||mt(n[e.index]);{const r=eb(n,e);return null!==r?Array.isArray(r)?r[0]:uc(ra(n[16]),r):uc(n,e.next)}}return null}function eb(n,e){return null!==e?n[16][6].projection[e.projection]:null}function Xh(n,e){const t=10+n+1;if(t<e.length){const r=e[t],i=r[1].firstChild;if(null!==i)return uc(r,i)}return e[7]}function Kh(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],l=t.type;if(o&&0===e&&(a&&Et(mt(a),r),t.flags|=2),32!=(32&t.flags))if(8&l)Kh(n,e,t.child,r,i,s,!1),ds(e,n,i,a,s);else if(32&l){const c=Hh(t,r);let u;for(;u=c();)ds(e,n,i,u,s);ds(e,n,i,a,s)}else 16&l?tb(n,e,r,t,i,s):ds(e,n,i,a,s);t=o?t.projectionNext:t.next}}function ia(n,e,t,r,i,s){Kh(t,r,n.firstChild,e,i,s,!1)}function tb(n,e,t,r,i,s){const o=t[16],l=o[6].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)ds(e,n,i,l[c],s);else Kh(n,e,l,o[3],i,s,!0)}function nb(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function rb(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&Eh(n,e,r),null!==i&&nb(n,e,i),null!==s&&function xP(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}class lb{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const gc=new q("ENVIRONMENT_INITIALIZER"),vb=new q("INJECTOR",-1),bb=new q("INJECTOR_DEF_TYPES");class wb{get(e,t=Fo){if(t===Fo){const r=new Error(`NullInjectorError: No provider for ${De(e)}!`);throw r.name="NullInjectorError",r}return t}}function XP(...n){return{\u0275providers:Cb(0,n),\u0275fromNgModule:!0}}function Cb(n,...e){const t=[],r=new Set;let i;return bi(e,s=>{const o=s;lf(o,t,[],r)&&(i||(i=[]),i.push(o))}),void 0!==i&&Db(i,t),t}function Db(n,e){for(let t=0;t<n.length;t++){const{providers:i}=n[t];cf(i,s=>{e.push(s)})}}function lf(n,e,t,r){if(!(n=U(n)))return!1;let i=null,s=xy(n);const o=!s&&ye(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const l=n.ngModule;if(s=xy(l),!s)return!1;i=l}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)lf(c,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;r.add(i);try{bi(s.imports,u=>{lf(u,e,t,r)&&(c||(c=[]),c.push(u))})}finally{}void 0!==c&&Db(c,e)}if(!a){const c=mi(i)||(()=>new i);e.push({provide:i,useFactory:c,deps:ge},{provide:bb,useValue:i,multi:!0},{provide:gc,useValue:()=>B(i),multi:!0})}const l=s.providers;null==l||a||cf(l,u=>{e.push(u)})}}return i!==n&&void 0!==n.providers}function cf(n,e){for(let t of n)rh(t)&&(t=t.\u0275providers),Array.isArray(t)?cf(t,e):e(t)}const JP=be({provide:String,useValue:be});function uf(n){return null!==n&&"object"==typeof n&&JP in n}function Di(n){return"function"==typeof n}const df=new q("Set Injector scope."),pc={},QP={};let hf;function mc(){return void 0===hf&&(hf=new wb),hf}class ur{}class Sb extends ur{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,gf(e,o=>this.processProvider(o)),this.records.set(vb,hs(void 0,this)),i.has("environment")&&this.records.set(ur,hs(void 0,this));const s=this.records.get(df);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(bb.multi,ge,z.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=Zi(this),r=on(void 0);try{return e()}finally{Zi(t),on(r)}}get(e,t=Fo,r=z.Default){this.assertNotDestroyed(),r=$l(r);const i=Zi(this),s=on(void 0);try{if(!(r&z.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function iI(n){return"function"==typeof n||"object"==typeof n&&n instanceof q}(e)&&Fl(e);a=l&&this.injectableDefInScope(l)?hs(ff(e),pc):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&z.Self?mc():this.parent).get(e,t=r&z.Optional&&t===Fo?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[Bl]=o[Bl]||[]).unshift(De(e)),i)throw o;return function O1(n,e,t,r){const i=n[Bl];throw e[_y]&&i.unshift(e[_y]),n.message=function N1(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=De(e);if(Array.isArray(e))i=e.map(De).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):De(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(M1,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Bl]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{on(s),Zi(i)}}resolveInjectorInitializers(){const e=Zi(this),t=on(void 0);try{const r=this.get(gc.multi,ge,z.Self);for(const i of r)i()}finally{Zi(e),on(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(De(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new O(205,!1)}processProvider(e){let t=Di(e=U(e))?e:U(e&&e.provide);const r=function tI(n){return uf(n)?hs(void 0,n.useValue):hs(function _b(n,e,t){let r;if(Di(n)){const i=U(n);return mi(i)||ff(i)}if(uf(n))r=()=>U(n.useValue);else if(function Eb(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...ah(n.deps||[]));else if(function xb(n){return!(!n||!n.useExisting)}(n))r=()=>B(U(n.useExisting));else{const i=U(n&&(n.useClass||n.provide));if(!function nI(n){return!!n.deps}(n))return mi(i)||ff(i);r=()=>new i(...ah(n.deps))}return r}(n),pc)}(e);if(Di(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=hs(void 0,pc,!0),i.factory=()=>ah(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===pc&&(t.value=QP,t.value=t.factory()),"object"==typeof t.value&&t.value&&function rI(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=U(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function ff(n){const e=Fl(n),t=null!==e?e.factory:mi(n);if(null!==t)return t;if(n instanceof q)throw new O(204,!1);if(n instanceof Function)return function eI(n){const e=n.length;if(e>0)throw function Jo(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new O(204,!1);const t=function x1(n){const e=n&&(n[jl]||n[Ey]);if(e){const t=function E1(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new O(204,!1)}function hs(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function gf(n,e){for(const t of n)Array.isArray(t)?gf(t,e):t&&rh(t)?gf(t.\u0275providers,e):e(t)}class sI{}class Ab{}class aI{resolveComponentFactory(e){throw function oI(n){const e=Error(`No component factory found for ${De(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let la=(()=>{class n{}return n.NULL=new aI,n})();function lI(){return fs(yt(),_())}function fs(n,e){return new kr(Jt(n,e))}let kr=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=lI,n})();function cI(n){return n instanceof kr?n.nativeElement:n}class Tb{}let dI=(()=>{class n{}return n.\u0275prov=Y({token:n,providedIn:"root",factory:()=>null}),n})();class vc{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const hI=new vc("15.1.5"),pf={};function yf(n){return n.ngOriginalError}class gs{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&yf(e);for(;t&&yf(t);)t=yf(t);return t||null}}function dr(n){return n instanceof Function?n():n}function Ib(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}const Ob="ng-template";function xI(n,e,t){let r=0;for(;r<n.length;){let i=n[r++];if(t&&"class"===i){if(i=n[r],-1!==Ib(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Nb(n){return 4===n.type&&n.value!==Ob}function EI(n,e,t){return e===(4!==n.type||t?n.value:Ob)}function SI(n,e,t){let r=4;const i=n.attrs||[],s=function MI(n){for(let e=0;e<n.length;e++)if(sv(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!EI(n,l,t)||""===l&&1===e.length){if(Sn(r))return!1;o=!0}}else{const c=8&r?l:e[++a];if(8&r&&null!==n.attrs){if(!xI(n.attrs,c,t)){if(Sn(r))return!1;o=!0}continue}const d=_I(8&r?"class":l,i,Nb(n),t);if(-1===d){if(Sn(r))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==Ib(f,c,0)||2&r&&c!==h){if(Sn(r))return!1;o=!0}}}}else{if(!o&&!Sn(r)&&!Sn(l))return!1;if(o&&Sn(l))continue;o=!1,r=l|1&r}}return Sn(r)||o}function Sn(n){return 0==(1&n)}function _I(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function TI(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Rb(n,e,t=!1){for(let r=0;r<e.length;r++)if(SI(n,e[r],t))return!0;return!1}function Lb(n,e){return n?":not("+e.trim()+")":e}function II(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Sn(o)&&(e+=Lb(s,i),i=""),r=o,s=s||!Sn(r);t++}return""!==i&&(e+=Lb(s,i)),e}const Q={};function vf(n){kb(de(),_(),kt()+n,!1)}function kb(n,e,t,r){if(!r)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&Xl(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Jl(e,s,0,t)}yi(t)}function $b(n,e=null,t=null,r){const i=Vb(n,e,t,r);return i.resolveInjectorInitializers(),i}function Vb(n,e=null,t=null,r,i=new Set){const s=[t||ge,XP(n)];return r=r||("object"==typeof n?void 0:De(n)),new Sb(s,e||mc(),r||null,i)}let _n=(()=>{class n{static create(t,r){if(Array.isArray(t))return $b({name:""},r,t,"");{const i=t.name??"";return $b({name:i},t.parent,t.providers,i)}}}return n.THROW_IF_NOT_FOUND=Fo,n.NULL=new wb,n.\u0275prov=Y({token:n,providedIn:"any",factory:()=>B(vb)}),n.__NG_ELEMENT_ID__=-1,n})();function $(n,e=z.Default){const t=_();return null===t?B(n,e):gv(yt(),t,U(n),e)}function Zb(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];bh(t[r]),o.contentQueries(2,e[s],s)}}}function wc(n,e,t,r,i,s,o,a,l,c,u){const d=e.blueprint.slice();return d[0]=i,d[2]=76|r,(null!==u||n&&1024&n[2])&&(d[2]|=1024),Uy(d),d[3]=d[15]=n,d[8]=t,d[10]=o||n&&n[10],d[11]=a||n&&n[11],d[12]=l||n&&n[12]||null,d[9]=c||n&&n[9]||null,d[6]=s,d[20]=function JT(){return XT++}(),d[21]=u,d[16]=2==e.type?n[16]:d,d}function ys(n,e,t,r,i){let s=n.data[e];if(null===s)s=function xf(n,e,t,r,i){const s=Yy(),o=ph(),l=n.data[e]=function rO(n,e,t,r,i,s){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(n,e,t,r,i),function tT(){return K.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function qo(){const n=K.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Vn(s,!0),s}function ca(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Ef(n,e,t){wh(e);try{const r=n.viewQuery;null!==r&&Rf(1,r,t);const i=n.template;null!==i&&Xb(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Zb(n,e),n.staticViewQueries&&Rf(2,n.viewQuery,t);const s=n.components;null!==s&&function eO(n,e){for(let t=0;t<e.length;t++)DO(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,Ch()}}function Cc(n,e,t,r){const i=e[2];if(128!=(128&i)){wh(e);try{Uy(e),function Xy(n){return K.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&Xb(n,e,t,2,r);const o=3==(3&i);if(o){const c=n.preOrderCheckHooks;null!==c&&Xl(e,c,null)}else{const c=n.preOrderHooks;null!==c&&Jl(e,c,0,null),Dh(e,0)}if(function wO(n){for(let e=Uh(n);null!==e;e=zh(e)){if(!e[2])continue;const t=e[9];for(let r=0;r<t.length;r++){const i=t[r];512&i[2]||gh(i[3],1),i[2]|=512}}}(e),function bO(n){for(let e=Uh(n);null!==e;e=zh(e))for(let t=10;t<e.length;t++){const r=e[t],i=r[1];Yl(r)&&Cc(i,r,i.template,r[8])}}(e),null!==n.contentQueries&&Zb(n,e),o){const c=n.contentCheckHooks;null!==c&&Xl(e,c)}else{const c=n.contentHooks;null!==c&&Jl(e,c,1),Dh(e,1)}!function KI(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)yi(~i);else{const s=i,o=t[++r],a=t[++r];nT(o,s),a(2,e[s])}}}finally{yi(-1)}}(n,e);const a=n.components;null!==a&&function QI(n,e){for(let t=0;t<e.length;t++)CO(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&Rf(2,l,r),o){const c=n.viewCheckHooks;null!==c&&Xl(e,c)}else{const c=n.viewHooks;null!==c&&Jl(e,c,2),Dh(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,gh(e[3],-1))}finally{Ch()}}}function Xb(n,e,t,r,i){const s=kt(),o=2&r;try{yi(-1),o&&e.length>22&&kb(n,e,22,!1),t(r,i)}finally{yi(s)}}function Sf(n,e,t){if(hh(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function _f(n,e,t){Gy()&&(function cO(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;Go(t)&&function mO(n,e,t){const r=Jt(e,n),i=Jb(t),s=n[10],o=Dc(n,wc(n,i,null,t.onPush?32:16,r,e,s,s.createRenderer(r,t),null,null,null));n[e.index]=o}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||tc(t,e),Et(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const l=n.data[a],c=vi(e,n,a,t);Et(c,e),null!==o&&yO(0,a-i,c,l,0,o),En(l)&&(Kt(t.index,e)[8]=vi(e,n,a,t))}}(n,e,t,Jt(t,e)),64==(64&t.flags)&&r0(n,e,t))}function Af(n,e,t=Jt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function Jb(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Mf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function Mf(n,e,t,r,i,s,o,a,l,c){const u=22+r,d=u+i,h=function tO(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:Q);return t}(u,d),f="function"==typeof c?c():c;return h[1]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function Kb(n,e,t,r){const i=o0(e);null===t?i.push(r):(i.push(t),n.firstCreatePass&&a0(n).push(r,i.length-1))}function Qb(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?e0(t,e,i,s):r.hasOwnProperty(i)&&e0(t,e,r[i],s)}return t}function e0(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function Tf(n,e,t,r){let i=!1;if(Gy()){const s=null===r?null:{"":-1},o=function dO(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(Rb(e,o.selectors,!1))if(r||(r=[]),En(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),Pf(n,e,a.length)}else r.unshift(o),Pf(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let a,l;null===o?a=l=null:[a,l]=o,null!==a&&(i=!0,n0(n,e,t,a,s,l)),s&&function hO(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new O(-301,!1);r.push(e[i],s)}}}(t,r,s)}return t.mergedAttrs=Yo(t.mergedAttrs,t.attrs),i}function n0(n,e,t,r,i,s){for(let c=0;c<r.length;c++)Mh(tc(t,e),n,r[c].type);!function gO(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let c=0;c<r.length;c++){const u=r[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=ca(n,e,r.length,null);for(let c=0;c<r.length;c++){const u=r[c];t.mergedAttrs=Yo(t.mergedAttrs,u.hostAttrs),pO(n,t,e,l,u),fO(l,u,i),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),a=!0),l++}!function iO(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let l=null,c=null;for(let u=e.directiveStart;u<i;u++){const d=s[u],h=t?t.get(d):null,g=h?h.outputs:null;l=Qb(d.inputs,u,l,h?h.inputs:null),c=Qb(d.outputs,u,c,g);const p=null===l||null===o||Nb(e)?null:vO(l,u,o);a.push(p)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(n,t,s)}function r0(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function rT(){return K.lFrame.currentDirectiveIndex}();try{yi(s);for(let a=r;a<i;a++){const l=n.data[a],c=e[a];yh(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&uO(l,c)}}finally{yi(-1),yh(o)}}function uO(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Pf(n,e,t){e.componentOffset=t,(n.components||(n.components=[])).push(e.index)}function fO(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;En(e)&&(t[""]=n)}}function pO(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=mi(i.type)),o=new Wo(s,En(i),$);n.blueprint[r]=o,t[r]=o,function aO(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function lO(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,ca(n,t,i.hostVars,Q),i)}function yO(n,e,t,r,i,s){const o=s[e];if(null!==o){const a=r.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],d=o[l++];null!==a?r.setInput(t,d,c,u):t[u]=d}}}function vO(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function s0(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null]}function CO(n,e){const t=Kt(e,n);if(Yl(t)){const r=t[1];48&t[2]?Cc(r,t,r.template,t[8]):t[5]>0&&Of(t)}}function Of(n){for(let r=Uh(n);null!==r;r=zh(r))for(let i=10;i<r.length;i++){const s=r[i];if(Yl(s))if(512&s[2]){const o=s[1];Cc(o,s,o.template,s[8])}else s[5]>0&&Of(s)}const t=n[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=Kt(t[r],n);Yl(i)&&i[5]>0&&Of(i)}}function DO(n,e){const t=Kt(e,n),r=t[1];(function xO(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),Ef(r,t,t[8])}function Dc(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function Nf(n){for(;n;){n[2]|=32;const e=ra(n);if(F1(n)&&!e)return n;n=e}return null}function xc(n,e,t,r=!0){const i=e[10];i.begin&&i.begin();try{Cc(n,e,n.template,t)}catch(o){throw r&&c0(e,o),o}finally{i.end&&i.end()}}function Rf(n,e,t){bh(0),e(n,t)}function o0(n){return n[7]||(n[7]=[])}function a0(n){return n.cleanup||(n.cleanup=[])}function c0(n,e){const t=n[9],r=t?t.get(gs,null):null;r&&r.handleError(e)}function Lf(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],c=n.data[o];null!==c.setInput?c.setInput(l,i,r,a):l[a]=i}}function Ec(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=eh(i,a):2==s&&(r=eh(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Sc(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&r.push(mt(s)),xn(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&Sc(l[1],l,c,r)}const o=t.type;if(8&o)Sc(n,e,t.child,r);else if(32&o){const a=Hh(t,e);let l;for(;l=a();)r.push(l)}else if(16&o){const a=eb(e,t);if(Array.isArray(a))r.push(...a);else{const l=ra(e[16]);Sc(l[1],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}class ua{get rootNodes(){const e=this._lView,t=e[1];return Sc(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(xn(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(Wh(e,r),ic(t,r))}this._attachedToViewContainer=!1}Gv(this._lView[1],this._lView)}onDestroy(e){Kb(this._lView[1],this._lView,null,e)}markForCheck(){Nf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){xc(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new O(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function hP(n,e){ia(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new O(902,!1);this._appRef=e}}class EO extends ua{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;xc(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class u0 extends la{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=ye(e);return new da(t,this.ngModule)}}function d0(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class _O{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=$l(r);const i=this.injector.get(e,pf,r);return i!==pf||t===pf?i:this.parentInjector.get(e,t,r)}}class da extends Ab{get inputs(){return d0(this.componentDef.inputs)}get outputs(){return d0(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function OI(n){return n.map(II).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof ur?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new _O(e,s):e,a=o.get(Tb,null);if(null===a)throw new O(407,!1);const l=o.get(dI,null),c=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",d=r?function nO(n,e,t){return n.selectRootElement(e,t===Bn.ShadowDom)}(c,r,this.componentDef.encapsulation):qh(c,u,function SO(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(u)),h=this.componentDef.onPush?288:272,f=Mf(0,null,null,1,0,null,null,null,null,null),g=wc(null,f,null,h,null,null,a,c,l,o,null);let p,m;wh(g);try{const v=this.componentDef;let b,y=null;v.findHostDirectiveDefs?(b=[],y=new Map,v.findHostDirectiveDefs(v,b,y),b.push(v)):b=[v];const w=function MO(n,e){const t=n[1];return n[22]=e,ys(t,22,2,"#host",null)}(g,d),D=function TO(n,e,t,r,i,s,o,a){const l=i[1];!function PO(n,e,t,r){for(const i of n)e.mergedAttrs=Yo(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Ec(e,e.mergedAttrs,!0),null!==t&&rb(r,t,e))}(r,n,e,o);const c=s.createRenderer(e,t),u=wc(i,Jb(t),null,t.onPush?32:16,i[n.index],n,s,c,a||null,null,null);return l.firstCreatePass&&Pf(l,n,r.length-1),Dc(i,u),i[n.index]=u}(w,d,v,b,g,a,c);m=function Hy(n,e){return n.data[e]}(f,22),d&&function OO(n,e,t,r){if(r)Eh(n,t,["ng-version",hI.full]);else{const{attrs:i,classes:s}=function NI(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Sn(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&Eh(n,t,i),s&&s.length>0&&nb(n,t,s.join(" "))}}(c,v,d,r),void 0!==t&&function NO(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(m,this.ngContentSelectors,t),p=function IO(n,e,t,r,i,s){const o=yt(),a=i[1],l=Jt(o,i);n0(a,i,o,t,null,r);for(let u=0;u<t.length;u++)Et(vi(i,a,o.directiveStart+u,o),i);r0(a,i,o),l&&Et(l,i);const c=vi(i,a,o.directiveStart+o.componentOffset,o);if(n[8]=i[8]=c,null!==s)for(const u of s)u(c,e);return Sf(a,o,n),c}(D,v,b,y,g,[RO]),Ef(f,g,null)}finally{Ch()}return new AO(this.componentType,p,fs(m,g),g,m)}}class AO extends sI{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new EO(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){const s=this._rootLView;Lf(s[1],s,i,e,t),function t0(n,e){const t=Kt(e,n);16&t[2]||(t[2]|=32)}(s,this._tNode.index)}}get injector(){return new is(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function RO(){const n=yt();Zl(_()[1],n)}let _c=null;function xi(){if(!_c){const n=xe.Symbol;if(n&&n.iterator)_c=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(_c=r)}}}return _c}function St(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function bs(n,e,t,r){return St(n,function ns(){return K.lFrame.bindingIndex++}(),t)?e+J(t)+r:Q}function Bf(n){return function ts(n,e){return n[e]}(function eT(){return K.lFrame.contextLView}(),22+n)}function $f(n,e,t,r,i){const o=i?"class":"style";Lf(n,t,e.inputs[o],o,r)}function ut(n,e,t,r){const i=_(),s=de(),o=22+n,a=i[11],l=i[o]=qh(a,e,function dT(){return K.lFrame.currentNamespace}()),c=s.firstCreatePass?function XO(n,e,t,r,i,s,o){const a=e.consts,c=ys(e,n,2,i,Rr(a,s));return Tf(e,t,c,Rr(a,o)),null!==c.attrs&&Ec(c,c.attrs,!1),null!==c.mergedAttrs&&Ec(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,i,0,e,t,r):s.data[o];return Vn(c,!0),rb(a,l,c),32!=(32&c.flags)&&cc(s,i,l,c),0===function Z1(){return K.lFrame.elementDepthCount}()&&Et(l,i),function X1(){K.lFrame.elementDepthCount++}(),ql(c)&&(_f(s,i,c),Sf(s,c,i)),null!==r&&Af(i,c),ut}function Ft(){let n=yt();ph()?function mh(){K.lFrame.isParent=!1}():(n=n.parent,Vn(n,!1));const e=n;!function J1(){K.lFrame.elementDepthCount--}();const t=de();return t.firstCreatePass&&(Zl(t,n),hh(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function pT(n){return 0!=(8&n.flags)}(e)&&$f(t,e,_(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function mT(n){return 0!=(16&n.flags)}(e)&&$f(t,e,_(),e.stylesWithoutHost,!1),Ft}function fa(n,e,t,r){return ut(n,e,t,r),Ft(),fa}function Tc(n){return!!n&&"function"==typeof n.then}const I0=function P0(n){return!!n&&"function"==typeof n.subscribe};function Fr(n,e,t,r){const i=_(),s=de(),o=yt();return function N0(n,e,t,r,i,s,o){const a=ql(r),c=n.firstCreatePass&&a0(n),u=e[8],d=o0(e);let h=!0;if(3&r.type||o){const p=Jt(r,e),m=o?o(p):p,v=d.length,b=o?w=>o(mt(w[r.index])):r.index;let y=null;if(!o&&a&&(y=function KO(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[7],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==y)(y.__ngLastListenerFn__||y).__ngNextListenerFn__=s,y.__ngLastListenerFn__=s,h=!1;else{s=L0(r,e,u,s,!1);const w=t.listen(m,i,s);d.push(s,w),c&&c.push(i,b,v,v+1)}}else s=L0(r,e,u,s,!1);const f=r.outputs;let g;if(h&&null!==f&&(g=f[i])){const p=g.length;if(p)for(let m=0;m<p;m+=2){const D=e[g[m]][g[m+1]].subscribe(s),x=d.length;d.push(s,D),c&&c.push(i,r.index,x,-(x+1))}}}(s,i,i[11],o,n,e,r),Fr}function R0(n,e,t,r){try{return!1!==t(r)}catch(i){return c0(n,i),!1}}function L0(n,e,t,r,i){return function s(o){if(o===Function)return r;Nf(n.componentOffset>-1?Kt(n.index,e):e);let l=R0(e,0,r,o),c=s.__ngNextListenerFn__;for(;c;)l=R0(e,0,c,o)&&l,c=c.__ngNextListenerFn__;return i&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function Pc(n,e){return n<<17|e<<2}function jr(n){return n>>17&32767}function zf(n){return 2|n}function Si(n){return(131068&n)>>2}function Gf(n,e){return-131069&n|e<<2}function qf(n){return 1|n}function G0(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?jr(s):Si(s),l=!1;for(;0!==a&&(!1===l||o);){const u=n[a+1];lN(n[a],e)&&(l=!0,n[a+1]=r?qf(u):zf(u)),a=r?jr(u):Si(u)}l&&(n[t+1]=r?zf(s):qf(s))}function lN(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&cs(n,e)>=0}function Wf(n,e){return function An(n,e,t,r){const i=_(),s=de(),o=function lr(n){const e=K.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function ew(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[kt()],o=function Q0(n,e){return e>=n.expandoStartIndex}(n,t);(function iw(n,e){return 0!=(n.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function yN(n,e,t,r){const i=function vh(n){const e=K.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=ga(t=Yf(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=Yf(i,n,e,t,r),null===s){let l=function vN(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Si(r))return n[jr(r)]}(n,e,r);void 0!==l&&Array.isArray(l)&&(l=Yf(null,n,e,l[1],r),l=ga(l,e.attrs,r),function bN(n,e,t,r){n[jr(t?e.classBindings:e.styleBindings)]=r}(n,e,r,l))}else s=function wN(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=ga(r,n[s].hostAttrs,t);return ga(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function oN(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=jr(o),l=Si(o);n[r]=t;let u,c=!1;if(Array.isArray(t)?(u=t[1],(null===u||cs(t,u)>0)&&(c=!0)):u=t,i)if(0!==l){const h=jr(n[a+1]);n[r+1]=Pc(h,a),0!==h&&(n[h+1]=Gf(n[h+1],r)),n[a+1]=function iN(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=Pc(a,0),0!==a&&(n[a+1]=Gf(n[a+1],r)),a=r;else n[r+1]=Pc(l,0),0===a?a=r:n[l+1]=Gf(n[l+1],r),l=r;c&&(n[r+1]=zf(n[r+1])),G0(n,u,r,!0),G0(n,u,r,!1),function aN(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&cs(s,e)>=0&&(t[r+1]=qf(t[r+1]))}(e,u,n,r,s),o=Pc(a,l),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==Q&&St(i,o,e)&&function nw(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1],u=function sN(n){return 1==(1&n)}(c)?rw(l,e,t,i,Si(c),o):void 0;Ic(u)||(Ic(s)||function rN(n){return 2==(2&n)}(c)&&(s=rw(l,null,t,i,a,o)),function DP(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:zt.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=zt.Important),n.setStyle(t,r,i,s))}}(r,o,Wl(kt(),t),i,s))}(s,s.data[kt()],i,i[11],n,i[o+1]=function xN(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=De(function Lr(n){return n instanceof lb?n.changingThisBreaksApplicationSecurity:n}(n)))),n}(e,t),r,o)}(n,e,null,!0),Wf}function Yf(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=ga(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function ga(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Qt(n,o,!!t||e[++s]))}return void 0===n?null:n}function rw(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const l=n[i],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=t[i+1];h===Q&&(h=d?ge:void 0);let f=d?Oh(h,r):u===r?h:void 0;if(c&&!Ic(f)&&(f=Oh(l,r)),Ic(f)&&(a=f,o))return a;const g=n[i+1];i=o?jr(g):Si(g)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=Oh(l,r))}return a}function Ic(n){return void 0!==n}function jt(n,e=""){const t=_(),r=de(),i=n+22,s=r.firstCreatePass?ys(r,i,1,e,null):r.data[i],o=t[i]=function Gh(n,e){return n.createText(e)}(t[11],e);cc(r,t,o,s),Vn(s,!1)}function Oc(n){return Zf("",n,""),Oc}function Zf(n,e,t){const r=_(),i=bs(r,n,e,t);return i!==Q&&function hr(n,e,t){const r=Wl(e,n);!function Uv(n,e,t){n.setValue(e,t)}(n[11],r,t)}(r,kt(),i),Zf}const Ts="en-US";let _w=Ts;class Ps{}class Kw{}class Qw extends Ps{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new u0(this);const r=Zt(e);this._bootstrapComponents=dr(r.bootstrap),this._r3Injector=Vb(e,t,[{provide:Ps,useValue:this},{provide:la,useValue:this.componentFactoryResolver}],De(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class ng extends Kw{constructor(e){super(),this.moduleType=e}create(e){return new Qw(this.moduleType,e)}}class zR extends Ps{constructor(e,t,r){super(),this.componentFactoryResolver=new u0(this),this.instance=null;const i=new Sb([...e,{provide:Ps,useValue:this},{provide:la,useValue:this.componentFactoryResolver}],t||mc(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Fc(n,e,t=null){return new zR(n,e,t).injector}let GR=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const r=Cb(0,t.type),i=r.length>0?Fc([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,i)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Y({token:n,providedIn:"environment",factory:()=>new n(B(ur))}),n})();function eC(n){n.getStandaloneInjector=e=>e.get(GR).getOrCreateStandaloneInjector(n)}function ig(n){return e=>{setTimeout(n,void 0,e)}}const $t=class yL extends nr{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=ig(s),i&&(i=ig(i)),o&&(o=ig(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof rn&&e.add(a),a}};function vL(){return this._results[xi()]()}class sg{get changes(){return this._changes||(this._changes=new $t)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=xi(),r=sg.prototype;r[t]||(r[t]=vL)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=function ln(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function _T(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Tn=(()=>{class n{}return n.__NG_ELEMENT_ID__=CL,n})();const bL=Tn,wL=class extends bL{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e,t){const r=this._declarationTContainer.tViews,i=wc(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,t||null);i[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(i[19]=o.createEmbeddedView(r)),Ef(r,i,e),new ua(i)}};function CL(){return jc(yt(),_())}function jc(n,e){return 4&n.type?new wL(e,n,fs(n,e)):null}let un=(()=>{class n{}return n.__NG_ELEMENT_ID__=DL,n})();function DL(){return gC(yt(),_())}const xL=un,hC=class extends xL{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return fs(this._hostTNode,this._hostLView)}get injector(){return new is(this._hostTNode,this._hostLView)}get parentInjector(){const e=Ah(this._hostTNode,this._hostLView);if(lv(e)){const t=Ql(e,this._hostLView),r=Kl(e);return new is(t[1].data[r+8],t)}return new is(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=fC(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const o=e.createEmbeddedView(t||{},s);return this.insert(o,i),o}createComponent(e,t,r,i,s){const o=e&&!function Xo(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const d=t||{};a=d.index,r=d.injector,i=d.projectableNodes,s=d.environmentInjector||d.ngModuleRef}const l=o?e:new da(ye(e)),c=r||this.parentInjector;if(!s&&null==l.ngModule){const h=(o?c:this.parentInjector).get(ur,null);h&&(s=h)}const u=l.create(c,i,void 0,s);return this.insert(u.hostView,a),u}insert(e,t){const r=e._lView,i=r[1];if(function Y1(n){return xn(n[3])}(r)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=r[3],h=new hC(d,d[6],d[3]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function gP(n,e,t,r){const i=10+r,s=t.length;r>0&&(t[i-1][4]=e),r<s-10?(e[4]=t[i],Cv(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function pP(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=64}(i,r,o,s);const a=Xh(s,o),l=r[11],c=lc(l,o[7]);return null!==c&&function dP(n,e,t,r,i,s){r[0]=i,r[6]=e,ia(n,r,t,1,i,s)}(i,o[6],l,r,c,a),e.attachToViewContainerRef(),Cv(og(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=fC(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=Wh(this._lContainer,t);r&&(ic(og(this._lContainer),t),Gv(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=Wh(this._lContainer,t);return r&&null!=ic(og(this._lContainer),t)?new ua(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function fC(n){return n[8]}function og(n){return n[8]||(n[8]=[])}function gC(n,e){let t;const r=e[n.index];if(xn(r))t=r;else{let i;if(8&n.type)i=mt(r);else{const s=e[11];i=s.createComment("");const o=Jt(n,e);wi(s,lc(s,o),i,function bP(n,e){return n.nextSibling(e)}(s,o),!1)}e[n.index]=t=s0(r,e,i,n),Dc(e,t)}return new hC(t,n,e)}class ag{constructor(e){this.queryList=e,this.matches=null}clone(){return new ag(this.queryList)}setDirty(){this.queryList.setDirty()}}class lg{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new lg(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==wC(e,t).matches&&this.queries[t].setDirty()}}class pC{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class cg{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new cg(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class ug{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new ug(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,EL(t,s)),this.matchTNodeWithReadOption(e,t,nc(t,e,s,!1,!1))}else r===Tn?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,nc(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===kr||i===un||i===Tn&&4&t.type)this.addMatch(t.index,-2);else{const s=nc(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function EL(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function _L(n,e,t,r){return-1===t?function SL(n,e){return 11&n.type?fs(n,e):4&n.type?jc(n,e):null}(e,n):-2===t?function AL(n,e,t){return t===kr?fs(e,n):t===Tn?jc(e,n):t===un?gC(e,n):void 0}(n,e,r):vi(n,n[1],t,e)}function mC(n,e,t,r){const i=e[19].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:_L(e,s[c],o[l+1],t.metadata.read))}i.matches=a}return i.matches}function dg(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=mC(n,e,i,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)r.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let d=10;d<u.length;d++){const h=u[d];h[17]===h[3]&&dg(h[1],h,c,r)}if(null!==u[9]){const d=u[9];for(let h=0;h<d.length;h++){const f=d[h];dg(f[1],f,c,r)}}}}}return r}function Bc(n){const e=_(),t=de(),r=Ky();bh(r+1);const i=wC(t,r);if(n.dirty&&function W1(n){return 4==(4&n[2])}(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const s=i.crossesNgTemplate?dg(t,e,r,[]):mC(t,e,i,r);n.reset(s,cI),n.notifyOnChanges()}return!0}return!1}function hg(n,e,t){const r=de();r.firstCreatePass&&(function bC(n,e,t){null===n.queries&&(n.queries=new cg),n.queries.track(new ug(e,t))}(r,new pC(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),function vC(n,e,t){const r=new sg(4==(4&t));Kb(n,e,r,r.destroy),null===e[19]&&(e[19]=new lg),e[19].queries.push(new ag(r))}(r,_(),e)}function $c(){return function ML(n,e){return n[19].queries[e].queryList}(_(),Ky())}function wC(n,e){return n.queries.getByIndex(e)}function CC(n,e){return jc(n,e)}function Hc(...n){}const Uc=new q("Application Initializer");let zc=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Hc,this.reject=Hc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(Tc(s))t.push(s);else if(I0(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(B(Uc,8))},n.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const xa=new q("AppId",{providedIn:"root",factory:function $C(){return`${yg()}${yg()}${yg()}`}});function yg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const VC=new q("Platform Initializer"),HC=new q("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),UC=new q("appBootstrapListener");let ZL=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const fr=new q("LocaleId",{providedIn:"root",factory:()=>ue(fr,z.Optional|z.SkipSelf)||function XL(){return typeof $localize<"u"&&$localize.locale||Ts}()});class KL{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let zC=(()=>{class n{compileModuleSync(t){return new ng(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=dr(Zt(t).declarations).reduce((o,a)=>{const l=ye(a);return l&&o.push(new da(l)),o},[]);return new KL(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const tk=(()=>Promise.resolve(0))();function vg(n){typeof Zone>"u"?tk.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Ze{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $t(!1),this.onMicrotaskEmpty=new $t(!1),this.onStable=new $t(!1),this.onError=new $t(!1),typeof Zone>"u")throw new O(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function nk(){let n=xe.requestAnimationFrame,e=xe.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function sk(n){const e=()=>{!function ik(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(xe,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,wg(n),n.isCheckStableRunning=!0,bg(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),wg(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{try{return WC(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),YC(n)}},onInvoke:(t,r,i,s,o,a,l)=>{try{return WC(n),t.invoke(i,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),YC(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,wg(n),bg(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ze.isInAngularZone())throw new O(909,!1)}static assertNotInAngularZone(){if(Ze.isInAngularZone())throw new O(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,rk,Hc,Hc);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const rk={};function bg(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function wg(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function WC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function YC(n){n._nesting--,bg(n)}class ok{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new $t,this.onMicrotaskEmpty=new $t,this.onStable=new $t,this.onError=new $t}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const ZC=new q(""),Gc=new q("");let xg,Cg=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,xg||(function ak(n){xg=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ze.assertNotInAngularZone(),vg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())vg(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}}return n.\u0275fac=function(t){return new(t||n)(B(Ze),B(Dg),B(Gc))},n.\u0275prov=Y({token:n,factory:n.\u0275fac}),n})(),Dg=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return xg?.findTestabilityInTree(this,t,r)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Br=null;const XC=new q("AllowMultipleToken"),Eg=new q("PlatformDestroyListeners");class JC{constructor(e,t){this.name=e,this.token=t}}function QC(n,e,t=[]){const r=`Platform: ${e}`,i=new q(r);return(s=[])=>{let o=Sg();if(!o||o.injector.get(XC,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function uk(n){if(Br&&!Br.get(XC,!1))throw new O(400,!1);Br=n;const e=n.get(tD);(function KC(n){const e=n.get(VC,null);e&&e.forEach(t=>t())})(n)}(function eD(n=[],e){return _n.create({name:e,providers:[{provide:df,useValue:"platform"},{provide:Eg,useValue:new Set([()=>Br=null])},...n]})}(a,r))}return function hk(n){const e=Sg();if(!e)throw new O(401,!1);return e}()}}function Sg(){return Br?.get(tD)??null}let tD=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function rD(n,e){let t;return t="noop"===n?new ok:("zone.js"===n?void 0:n)||new Ze(e),t}(r?.ngZone,function nD(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(r)),s=[{provide:Ze,useValue:i}];return i.run(()=>{const o=_n.create({providers:s,parent:this.injector,name:t.moduleType.name}),a=t.create(o),l=a.injector.get(gs,null);if(!l)throw new O(402,!1);return i.runOutsideAngular(()=>{const c=i.onError.subscribe({next:u=>{l.handleError(u)}});a.onDestroy(()=>{Wc(this._modules,a),c.unsubscribe()})}),function iD(n,e,t){try{const r=t();return Tc(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(l,i,()=>{const c=a.injector.get(zc);return c.runInitializers(),c.donePromise.then(()=>(function Aw(n){sn(n,"Expected localeId to be defined"),"string"==typeof n&&(_w=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(fr,Ts)||Ts),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,r=[]){const i=sD({},r);return function lk(n,e,t){const r=new ng(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(qc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new O(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new O(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(Eg,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(B(_n))},n.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function sD(n,e){return Array.isArray(e)?e.reduce(sD,n):{...n,...e}}let qc=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(t,r,i){this._zone=t,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new tt(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new tt(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{Ze.assertNotInAngularZone(),vg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{Ze.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=function g1(...n){const e=ko(n),t=function a1(n,e){return"number"==typeof Jd(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Fn(r[0]):Yi(t)(nt(r,e)):jn}(s,o.pipe(function p1(n={}){const{connector:e=(()=>new nr),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,l,c=0,u=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=l=void 0,u=d=!1},g=()=>{const p=o;f(),p?.unsubscribe()};return lt((p,m)=>{c++,!d&&!u&&h();const v=l=l??e();m.add(()=>{c--,0===c&&!d&&!u&&(a=Kd(g,i))}),v.subscribe(m),!o&&c>0&&(o=new Lo({next:b=>v.next(b),error:b=>{d=!0,h(),a=Kd(f,t,b),v.error(b)},complete:()=>{u=!0,h(),a=Kd(f,r),v.complete()}}),Fn(p).subscribe(o))})(s)}}()))}bootstrap(t,r){const i=t instanceof Ab;if(!this._injector.get(zc).done)throw!i&&function Xi(n){const e=ye(n)||Ct(n)||Nt(n);return null!==e&&e.standalone}(t),new O(405,false);let o;o=i?t:this._injector.get(la).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function ck(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Ps),c=o.create(_n.NULL,[],r||o.selector,a),u=c.location.nativeElement,d=c.injector.get(ZC,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),Wc(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new O(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;Wc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(UC,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Wc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new O(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(B(Ze),B(ur),B(gs))},n.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Wc(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let Yc=(()=>{class n{}return n.__NG_ELEMENT_ID__=gk,n})();function gk(n){return function pk(n,e,t){if(Go(n)&&!t){const r=Kt(n.index,e);return new ua(r,r)}return 47&n.type?new ua(e[16],e):null}(yt(),_(),16==(16&n))}const Mk=QC(null,"core",[]);let Tk=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(B(qc))},n.\u0275mod=gi({type:n}),n.\u0275inj=Ir({}),n})(),Ig=null;function $r(){return Ig}class Ok{}const qt=new q("DocumentToken");let Og=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Y({token:n,factory:function(){return function Nk(){return B(mD)}()},providedIn:"platform"}),n})();const Rk=new q("Location Initialized");let mD=(()=>{class n extends Og{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return $r().getBaseHref(this._doc)}onPopState(t){const r=$r().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=$r().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){yD()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){yD()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(B(qt))},n.\u0275prov=Y({token:n,factory:function(){return function Lk(){return new mD(B(qt))}()},providedIn:"platform"}),n})();function yD(){return!!window.history.pushState}function Ng(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function vD(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function pr(n){return n&&"?"!==n[0]?"?"+n:n}let Mi=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Y({token:n,factory:function(){return ue(wD)},providedIn:"root"}),n})();const bD=new q("appBaseHref");let wD=(()=>{class n extends Mi{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??ue(qt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ng(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+pr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+pr(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+pr(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(B(Og),B(bD,8))},n.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),kk=(()=>{class n extends Mi{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ng(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+pr(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+pr(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(B(Og),B(bD,8))},n.\u0275prov=Y({token:n,factory:n.\u0275fac}),n})(),Rg=(()=>{class n{constructor(t){this._subject=new $t,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Bk(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(vD(CD(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+pr(r))}normalize(t){return n.stripTrailingSlash(function jk(n,e){return n&&new RegExp(`^${n}([/;?#]|$)`).test(e)?e.substring(n.length):e}(this._basePath,CD(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+pr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+pr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=pr,n.joinWithSlash=Ng,n.stripTrailingSlash=vD,n.\u0275fac=function(t){return new(t||n)(B(Mi))},n.\u0275prov=Y({token:n,factory:function(){return function Fk(){return new Rg(B(Mi))}()},providedIn:"root"}),n})();function CD(n){return n.replace(/\/index.html$/,"")}let e2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=gi({type:n}),n.\u0275inj=Ir({}),n})();let i2=(()=>{class n{}return n.\u0275prov=Y({token:n,providedIn:"root",factory:()=>new s2(B(qt),window)}),n})();class s2{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function o2(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=jD(this.window.history)||jD(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function jD(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class R2 extends Ok{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Kg extends R2{static makeCurrent(){!function Ik(n){Ig||(Ig=n)}(new Kg)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function L2(){return Ma=Ma||document.querySelector("base"),Ma?Ma.getAttribute("href"):null}();return null==t?null:function k2(n){lu=lu||document.createElement("a"),lu.setAttribute("href",n);const e=lu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ma=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function DF(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let lu,Ma=null;const UD=new q("TRANSITION_ID"),j2=[{provide:Uc,useFactory:function F2(n,e,t){return()=>{t.get(zc).donePromise.then(()=>{const r=$r(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[UD,qt,_n],multi:!0}];let $2=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Y({token:n,factory:n.\u0275fac}),n})();const cu=new q("EventManagerPlugins");let uu=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(B(cu),B(Ze))},n.\u0275prov=Y({token:n,factory:n.\u0275fac}),n})();class zD{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=$r().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let GD=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Y({token:n,factory:n.\u0275fac}),n})(),Ta=(()=>{class n extends GD{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(r.appendChild(o))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(qD),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(qD))}}return n.\u0275fac=function(t){return new(t||n)(B(qt))},n.\u0275prov=Y({token:n,factory:n.\u0275fac}),n})();function qD(n){$r().remove(n)}const Qg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ep=/%COMP%/g;function tp(n,e){return e.flat(100).map(t=>t.replace(ep,n))}function ZD(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let np=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new rp(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case Bn.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new q2(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case Bn.ShadowDom:return new W2(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=tp(r.id,r.styles);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(B(uu),B(Ta),B(xa))},n.\u0275prov=Y({token:n,factory:n.\u0275fac}),n})();class rp{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Qg[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(JD(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(JD(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=Qg[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Qg[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(zt.DashCase|zt.Important)?e.style.setProperty(t,r,i&zt.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&zt.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ZD(r)):this.eventManager.addEventListener(e,t,ZD(r))}}function JD(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class q2 extends rp{constructor(e,t,r,i){super(e),this.component=r;const s=tp(i+"-"+r.id,r.styles);t.addStyles(s),this.contentAttr=function U2(n){return"_ngcontent-%COMP%".replace(ep,n)}(i+"-"+r.id),this.hostAttr=function z2(n){return"_nghost-%COMP%".replace(ep,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class W2 extends rp{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=tp(i.id,i.styles);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Y2=(()=>{class n extends zD{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(B(qt))},n.\u0275prov=Y({token:n,factory:n.\u0275fac}),n})();const KD=["alt","control","meta","shift"],Z2={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},X2={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let J2=(()=>{class n extends zD{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>$r().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),KD.forEach(c=>{const u=r.indexOf(c);u>-1&&(r.splice(u,1),o+=c+".")}),o+=s,0!=r.length||0===s.length)return null;const l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(t,r){let i=Z2[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),KD.forEach(o=>{o!==i&&(0,X2[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(B(qt))},n.\u0275prov=Y({token:n,factory:n.\u0275fac}),n})();const ex=[{provide:HC,useValue:"browser"},{provide:VC,useValue:function K2(){Kg.makeCurrent()},multi:!0},{provide:qt,useFactory:function ej(){return function AP(n){ef=n}(document),document},deps:[]}],tj=QC(Mk,"browser",ex),tx=new q(""),nx=[{provide:Gc,useClass:class B2{addToWindow(e){xe.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},xe.getAllAngularTestabilities=()=>e.getAllTestabilities(),xe.getAllAngularRootElements=()=>e.getAllRootElements(),xe.frameworkStabilizers||(xe.frameworkStabilizers=[]),xe.frameworkStabilizers.push(r=>{const i=xe.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(l){o=o||l,s--,0==s&&r(o)};i.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?$r().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:ZC,useClass:Cg,deps:[Ze,Dg,Gc]},{provide:Cg,useClass:Cg,deps:[Ze,Dg,Gc]}],rx=[{provide:df,useValue:"root"},{provide:gs,useFactory:function Q2(){return new gs},deps:[]},{provide:cu,useClass:Y2,multi:!0,deps:[qt,Ze,HC]},{provide:cu,useClass:J2,multi:!0,deps:[qt]},{provide:np,useClass:np,deps:[uu,Ta,xa]},{provide:Tb,useExisting:np},{provide:GD,useExisting:Ta},{provide:Ta,useClass:Ta,deps:[qt]},{provide:uu,useClass:uu,deps:[cu,Ze]},{provide:class a2{},useClass:$2,deps:[]},[]];let nj=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:xa,useValue:t.appId},{provide:UD,useExisting:xa},j2]}}}return n.\u0275fac=function(t){return new(t||n)(B(tx,12))},n.\u0275mod=gi({type:n}),n.\u0275inj=Ir({providers:[...rx,...nx],imports:[e2,Tk]}),n})(),ix=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(B(qt))},n.\u0275prov=Y({token:n,factory:function(t){let r=null;return r=t?new t:function ij(){return new ix(B(qt))}(),r},providedIn:"root"}),n})();function H(...n){return nt(n,ko(n))}typeof window<"u"&&window;class Nn extends nr{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const du=Hd(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:hj}=Array,{getPrototypeOf:fj,prototype:gj,keys:pj}=Object;const{isArray:vj}=Array;function ax(...n){const e=ko(n),t=function o1(n){return Ne(Jd(n))?n.pop():void 0}(n),{args:r,keys:i}=function mj(n){if(1===n.length){const e=n[0];if(hj(e))return{args:e,keys:null};if(function yj(n){return n&&"object"==typeof n&&fj(n)===gj}(e)){const t=pj(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return nt([],e);const s=new tt(function Dj(n,e,t=hi){return r=>{lx(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let l=0;l<i;l++)lx(e,()=>{const c=nt(n[l],e);let u=!1;c.subscribe(ct(r,d=>{s[l]=d,u||(u=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>function Cj(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,o):hi));return t?s.pipe(function wj(n){return ce(e=>function bj(n,e){return vj(e)?n(...e):n(e)}(n,e))}(t)):s}function lx(n,e,t){n?rr(t,n,e):e()}function op(...n){return function xj(){return Yi(1)}()(nt(n,ko(n)))}function cx(n){return new tt(e=>{Fn(n()).subscribe(e)})}function Pa(n,e){const t=Ne(n)?n:()=>n,r=i=>i.error(t());return new tt(e?i=>e.schedule(r,0,i):r)}function ap(){return lt((n,e)=>{let t=null;n._refCount++;const r=ct(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ux extends tt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,iy(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new rn;const t=this.getSubject();e.add(this.source.subscribe(ct(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=rn.EMPTY)}return e}refCount(){return ap()(this)}}function Wn(n,e){return lt((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(ct(r,l=>{i?.unsubscribe();let c=0;const u=s++;Fn(n(l,u)).subscribe(i=ct(r,d=>r.next(e?e(l,d,u,c++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Ia(n){return n<=0?()=>jn:lt((e,t)=>{let r=0;e.subscribe(ct(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Hr(n,e){return lt((t,r)=>{let i=0;t.subscribe(ct(r,s=>n.call(e,s,i++)&&r.next(s)))})}function hu(n){return lt((e,t)=>{let r=!1;e.subscribe(ct(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function dx(n=Sj){return lt((e,t)=>{let r=!1;e.subscribe(ct(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Sj(){return new du}function Ur(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Hr((i,s)=>n(i,s,r)):hi,Ia(1),t?hu(e):dx(()=>new du))}function Ti(n,e){return Ne(e)?pt(n,e,1):pt(n,1)}function _t(n,e,t){const r=Ne(n)||e||t?{next:n,error:e,complete:t}:n;return r?lt((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(ct(s,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),s.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),s.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),s.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):hi}function zr(n){return lt((e,t)=>{let s,r=null,i=!1;r=e.subscribe(ct(t,void 0,void 0,o=>{s=Fn(n(o,zr(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function _j(n,e,t,r,i){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(ct(o,u=>{const d=c++;l=a?n(l,u,d):(a=!0,u),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}function hx(n,e){return lt(_j(n,e,arguments.length>=2,!0))}function lp(n){return n<=0?()=>jn:lt((e,t)=>{let r=[];e.subscribe(ct(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function fx(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Hr((i,s)=>n(i,s,r)):hi,lp(1),t?hu(e):dx(()=>new du))}function cp(n){return lt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const te="primary",Oa=Symbol("RouteTitle");class Tj{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ns(n){return new Tj(n)}function Pj(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Yn(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!gx(n[i],e[i]))return!1;return!0}function gx(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function px(n){return Array.prototype.concat.apply([],n)}function mx(n){return n.length>0?n[n.length-1]:null}function vt(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Gr(n){return I0(n)?n:Tc(n)?nt(Promise.resolve(n)):H(n)}const fu=!1,Oj={exact:function bx(n,e,t){if(!Ii(n.segments,e.segments)||!gu(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!bx(n.children[r],e.children[r],t))return!1;return!0},subset:wx},yx={exact:function Nj(n,e){return Yn(n,e)},subset:function Rj(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>gx(n[t],e[t]))},ignored:()=>!0};function vx(n,e,t){return Oj[t.paths](n.root,e.root,t.matrixParams)&&yx[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function wx(n,e,t){return Cx(n,e,e.segments,t)}function Cx(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ii(i,t)||e.hasChildren()||!gu(i,t,r))}if(n.segments.length===t.length){if(!Ii(n.segments,t)||!gu(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!wx(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Ii(n.segments,i)&&gu(n.segments,i,r)&&n.children[te])&&Cx(n.children[te],e,s,r)}}function gu(n,e,t){return e.every((r,i)=>yx[t](n[i].parameters,r.parameters))}class Pi{constructor(e=new se([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ns(this.queryParams)),this._queryParamMap}toString(){return Fj.serialize(this)}}class se{constructor(e,t){this.segments=e,this.children=t,this.parent=null,vt(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return pu(this)}}class Na{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ns(this.parameters)),this._parameterMap}toString(){return Ex(this)}}function Ii(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Ra=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Y({token:n,factory:function(){return new up},providedIn:"root"}),n})();class up{parse(e){const t=new qj(e);return new Pi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${La(e.root,!0)}`,r=function $j(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${mu(t)}=${mu(i)}`).join("&"):`${mu(t)}=${mu(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function jj(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Fj=new up;function pu(n){return n.segments.map(e=>Ex(e)).join("/")}function La(n,e){if(!n.hasChildren())return pu(n);if(e){const t=n.children[te]?La(n.children[te],!1):"",r=[];return vt(n.children,(i,s)=>{s!==te&&r.push(`${s}:${La(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function kj(n,e){let t=[];return vt(n.children,(r,i)=>{i===te&&(t=t.concat(e(r,i)))}),vt(n.children,(r,i)=>{i!==te&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===te?[La(n.children[te],!1)]:[`${i}:${La(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[te]?`${pu(n)}/${t[0]}`:`${pu(n)}/(${t.join("//")})`}}function Dx(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mu(n){return Dx(n).replace(/%3B/gi,";")}function dp(n){return Dx(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function yu(n){return decodeURIComponent(n)}function xx(n){return yu(n.replace(/\+/g,"%20"))}function Ex(n){return`${dp(n.path)}${function Bj(n){return Object.keys(n).map(e=>`;${dp(e)}=${dp(n[e])}`).join("")}(n.parameters)}`}const Vj=/^[^\/()?;=#]+/;function vu(n){const e=n.match(Vj);return e?e[0]:""}const Hj=/^[^=?&#]+/,zj=/^[^&#]+/;class qj{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new se([],{}):new se([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[te]=new se(e,t)),r}parseSegment(){const e=vu(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new O(4009,fu);return this.capture(e),new Na(yu(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=vu(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=vu(this.remaining);i&&(r=i,this.capture(r))}e[yu(t)]=yu(r)}parseQueryParam(e){const t=function Uj(n){const e=n.match(Hj);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function Gj(n){const e=n.match(zj);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=xx(t),s=xx(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=vu(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new O(4010,fu);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=te);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[te]:new se([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new O(4011,fu)}}function hp(n){return n.segments.length>0?new se([],{[te]:n}):n}function bu(n){const e={};for(const r of Object.keys(n.children)){const s=bu(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function Wj(n){if(1===n.numberOfChildren&&n.children[te]){const e=n.children[te];return new se(n.segments.concat(e.segments),e.children)}return n}(new se(n.segments,e))}function Oi(n){return n instanceof Pi}function Xj(n,e,t,r,i){if(0===t.length)return Rs(e.root,e.root,e.root,r,i);const s=function Ax(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new _x(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return vt(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new _x(t,e,r)}(t);return s.toRoot()?Rs(e.root,e.root,new se([],{}),r,i):function o(l){const c=function Kj(n,e,t,r){if(n.isAbsolute)return new Ls(e.root,!0,0);if(-1===r)return new Ls(t,t===e.root,0);return function Mx(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new O(4005,!1);i=r.segments.length}return new Ls(r,!1,i-s)}(t,r+(ka(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,l),u=c.processChildren?ks(c.segmentGroup,c.index,s.commands):gp(c.segmentGroup,c.index,s.commands);return Rs(e.root,c.segmentGroup,u,r,i)}(n.snapshot?._lastPathIndex)}function ka(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Fa(n){return"object"==typeof n&&null!=n&&n.outlets}function Rs(n,e,t,r,i){let o,s={};r&&vt(r,(l,c)=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),o=n===e?t:Sx(n,e,t);const a=hp(bu(o));return new Pi(a,s,i)}function Sx(n,e,t){const r={};return vt(n.children,(i,s)=>{r[s]=i===e?t:Sx(i,e,t)}),new se(n.segments,r)}class _x{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ka(r[0]))throw new O(4003,!1);const i=r.find(Fa);if(i&&i!==mx(r))throw new O(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ls{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function gp(n,e,t){if(n||(n=new se([],{})),0===n.segments.length&&n.hasChildren())return ks(n,e,t);const r=function eB(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(Fa(a))break;const l=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!Px(l,c,o))return s;r+=2}else{if(!Px(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new se(n.segments.slice(0,r.pathIndex),{});return s.children[te]=new se(n.segments.slice(r.pathIndex),n.children),ks(s,0,i)}return r.match&&0===i.length?new se(n.segments,{}):r.match&&!n.hasChildren()?pp(n,e,t):r.match?ks(n,0,i):pp(n,e,t)}function ks(n,e,t){if(0===t.length)return new se(n.segments,{});{const r=function Qj(n){return Fa(n[0])?n[0].outlets:{[te]:n}}(t),i={};return!r[te]&&n.children[te]&&1===n.numberOfChildren&&0===n.children[te].segments.length?ks(n.children[te],e,t):(vt(r,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=gp(n.children[o],e,s))}),vt(n.children,(s,o)=>{void 0===r[o]&&(i[o]=s)}),new se(n.segments,i))}}function pp(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Fa(s)){const l=tB(s.outlets);return new se(r,l)}if(0===i&&ka(t[0])){r.push(new Na(n.segments[e].path,Tx(t[0]))),i++;continue}const o=Fa(s)?s.outlets[te]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&ka(a)?(r.push(new Na(o,Tx(a))),i+=2):(r.push(new Na(o,{})),i++)}return new se(r,{})}function tB(n){const e={};return vt(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=pp(new se([],{}),0,t))}),e}function Tx(n){const e={};return vt(n,(t,r)=>e[r]=`${t}`),e}function Px(n,e,t){return n==t.path&&Yn(e,t.parameters)}const ja="imperative";class Zn{constructor(e,t){this.id=e,this.url=t}}class mp extends Zn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ni extends Zn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class wu extends Zn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ix extends Zn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Ox extends Zn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class nB extends Zn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rB extends Zn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class iB extends Zn{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class sB extends Zn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class oB extends Zn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class aB{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class lB{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class cB{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uB{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dB{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hB{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Nx{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let gB=(()=>{class n{createUrlTree(t,r,i,s,o,a){return Xj(t||r.root,i,s,o,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Y({token:n,factory:n.\u0275fac}),n})(),pB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Y({token:n,factory:function(e){return gB.\u0275fac(e)},providedIn:"root"}),n})();class Rx{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=yp(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=yp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=vp(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return vp(e,this._root).map(t=>t.value)}}function yp(n,e){if(n===e.value)return e;for(const t of e.children){const r=yp(n,t);if(r)return r}return null}function vp(n,e){if(n===e.value)return[e];for(const t of e.children){const r=vp(n,t);if(r.length)return r.unshift(e),r}return[]}class yr{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Fs(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Lx extends Rx{constructor(e,t){super(e),this.snapshot=t,bp(this,e)}toString(){return this.snapshot.toString()}}function kx(n,e){const t=function mB(n,e){const o=new Cu([],{},{},"",{},te,e,null,n.root,-1,{});return new jx("",new yr(o,[]))}(n,e),r=new Nn([new Na("",{})]),i=new Nn({}),s=new Nn({}),o=new Nn({}),a=new Nn(""),l=new js(r,i,o,a,s,te,e,t.root);return l.snapshot=t.root,new Lx(new yr(l,[]),t)}class js{constructor(e,t,r,i,s,o,a,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe(ce(c=>c[Oa]))??H(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ce(e=>Ns(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ce(e=>Ns(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Fx(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function yB(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Cu{get title(){return this.data?.[Oa]}constructor(e,t,r,i,s,o,a,l,c,u,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ns(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ns(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class jx extends Rx{constructor(e,t){super(t),this.url=e,bp(this,t)}toString(){return Bx(this._root)}}function bp(n,e){e.value._routerState=n,e.children.forEach(t=>bp(n,t))}function Bx(n){const e=n.children.length>0?` { ${n.children.map(Bx).join(", ")} } `:"";return`${n.value}${e}`}function wp(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Yn(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Yn(e.params,t.params)||n.params.next(t.params),function Ij(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Yn(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Yn(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Cp(n,e){const t=Yn(n.params,e.params)&&function Lj(n,e){return Ii(n,e)&&n.every((t,r)=>Yn(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Cp(n.parent,e.parent))}function Ba(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function bB(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ba(n,r,i);return Ba(n,r)})}(n,e,t);return new yr(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Ba(n,a)),o}}const r=function wB(n){return new js(new Nn(n.url),new Nn(n.params),new Nn(n.queryParams),new Nn(n.fragment),new Nn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Ba(n,s));return new yr(r,i)}}const Dp="ngNavigationCancelingError";function $x(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Oi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Vx(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Vx(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Dp]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Hx(n){return Ux(n)&&Oi(n.url)}function Ux(n){return n&&n[Dp]}class CB{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new $a,this.attachRef=null}}let $a=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new CB,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Du=!1;let zx=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=te,this.activateEvents=new $t,this.deactivateEvents=new $t,this.attachEvents=new $t,this.detachEvents=new $t,this.parentContexts=ue($a),this.location=ue(un),this.changeDetector=ue(Yc),this.environmentInjector=ue(ur)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new O(4012,Du);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new O(4012,Du);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new O(4012,Du);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new O(4013,Du);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new DB(t,a,i.injector);if(r&&function xB(n){return!!n.resolveComponentFactory}(r)){const c=r.resolveComponentFactory(o);this.activated=i.createComponent(c,i.length,l)}else this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ot({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Nr]}),n})();class DB{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===js?this.route:e===$a?this.childContexts:this.parent.get(e,t)}}let xp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Vo({type:n,selectors:[["ng-component"]],standalone:!0,features:[eC],decls:1,vars:0,template:function(t,r){1&t&&fa(0,"router-outlet")},dependencies:[zx],encapsulation:2}),n})();function Gx(n,e){return n.providers&&!n._injector&&(n._injector=Fc(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Sp(n){const e=n.children&&n.children.map(Sp),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==te&&(t.component=xp),t}function fn(n){return n.outlet||te}function qx(n,e){const t=n.filter(r=>fn(r)===e);return t.push(...n.filter(r=>fn(r)!==e)),t}function Va(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class MB{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),wp(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Fs(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),vt(i,(s,o)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Fs(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Fs(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Fs(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new hB(s.value.snapshot))}),e.children.length&&this.forwardEvent(new uB(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(wp(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),wp(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Va(i.snapshot),l=a?.get(la)??null;o.attachRef=null,o.route=i,o.resolver=l,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class Wx{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class xu{constructor(e,t){this.component=e,this.route=t}}function TB(n,e,t){const r=n._root;return Ha(r,e?e._root:null,t,[r.value])}function Bs(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function D1(n){return null!==Fl(n)}(n)?e.get(n):n:r}function Ha(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Fs(e);return n.children.forEach(o=>{(function IB(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function OB(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ii(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ii(n.url,e.url)||!Yn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Cp(n,e)||!Yn(n.queryParams,e.queryParams);default:return!Cp(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Wx(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Ha(n,e,s.component?a?a.children:null:t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new xu(a.outlet.component,o))}else o&&Ua(e,a,i),i.canActivateChecks.push(new Wx(r)),Ha(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),vt(s,(o,a)=>Ua(o,t.getContext(a),i)),i}function Ua(n,e,t){const r=Fs(n),i=n.value;vt(r,(s,o)=>{Ua(s,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new xu(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function za(n){return"function"==typeof n}function _p(n){return n instanceof du||"EmptyError"===n?.name}const Eu=Symbol("INITIAL_VALUE");function $s(){return Wn(n=>ax(n.map(e=>e.pipe(Ia(1),function Ej(...n){const e=ko(n);return lt((t,r)=>{(e?op(n,t,e):op(n,t)).subscribe(r)})}(Eu)))).pipe(ce(e=>{for(const t of e)if(!0!==t){if(t===Eu)return Eu;if(!1===t||t instanceof Pi)return t}return!0}),Hr(e=>e!==Eu),Ia(1)))}function Yx(n){return function $M(...n){return ty(n)}(_t(e=>{if(Oi(e))throw $x(0,e)}),ce(e=>!0===e))}const Ap={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Zx(n,e,t,r,i){const s=Mp(n,e,t);return s.matched?function ZB(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?H(i.map(o=>{const a=Bs(o,n);return Gr(function jB(n){return n&&za(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe($s(),Yx()):H(!0)}(r=Gx(e,r),e,t).pipe(ce(o=>!0===o?s:{...Ap})):H(s)}function Mp(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Ap}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Pj)(t,n,e);if(!i)return{...Ap};const s={};vt(i.posParams,(a,l)=>{s[l]=a.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Su(n,e,t,r){if(t.length>0&&function KB(n,e,t){return t.some(r=>_u(n,e,r)&&fn(r)!==te)}(n,t,r)){const s=new se(e,function JB(n,e,t,r){const i={};i[te]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&fn(s)!==te){const o=new se([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,i[fn(s)]=o}return i}(n,e,r,new se(t,n.children)));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===t.length&&function QB(n,e,t){return t.some(r=>_u(n,e,r))}(n,t,r)){const s=new se(n.segments,function XB(n,e,t,r,i){const s={};for(const o of r)if(_u(n,t,o)&&!i[fn(o)]){const a=new se([],{});a._sourceSegment=n,a._segmentIndexShift=e.length,s[fn(o)]=a}return{...i,...s}}(n,e,t,r,n.children));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}const i=new se(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function _u(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Xx(n,e,t,r){return!!(fn(n)===r||r!==te&&_u(e,t,n))&&("**"===n.path||Mp(e,n,t).matched)}function Jx(n,e,t){return 0===e.length&&!n.children[t]}const Au=!1;class Mu{constructor(e){this.segmentGroup=e||null}}class Kx{constructor(e){this.urlTree=e}}function Ga(n){return Pa(new Mu(n))}function Qx(n){return Pa(new Kx(n))}class r${constructor(e,t,r,i,s){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=Su(this.urlTree.root,[],[],this.config).segmentGroup,t=new se(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,te).pipe(ce(s=>this.createUrlTree(bu(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(zr(s=>{if(s instanceof Kx)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Mu?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,te).pipe(ce(i=>this.createUrlTree(bu(i),e.queryParams,e.fragment))).pipe(zr(i=>{throw i instanceof Mu?this.noMatchError(i):i}))}noMatchError(e){return new O(4002,Au)}createUrlTree(e,t,r){const i=hp(e);return new Pi(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(ce(s=>new se([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return nt(i).pipe(Ti(s=>{const o=r.children[s],a=qx(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(ce(l=>({segment:l,outlet:s})))}),hx((s,o)=>(s[o.outlet]=o.segment,s),{}),fx())}expandSegment(e,t,r,i,s,o){return nt(r).pipe(Ti(a=>this.expandSegmentAgainstRoute(e,t,r,a,i,s,o).pipe(zr(c=>{if(c instanceof Mu)return H(null);throw c}))),Ur(a=>!!a),zr((a,l)=>{if(_p(a))return Jx(t,i,s)?H(new se([],{})):Ga(t);throw a}))}expandSegmentAgainstRoute(e,t,r,i,s,o,a){return Xx(i,t,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o):Ga(t):Ga(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Qx(s):this.lineralizeSegments(r,s).pipe(pt(o=>{const a=new se(o,{});return this.expandSegment(e,a,t,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=Mp(t,i,s);if(!a)return Ga(t);const d=this.applyRedirectCommands(l,i.redirectTo,u);return i.redirectTo.startsWith("/")?Qx(d):this.lineralizeSegments(i,d).pipe(pt(h=>this.expandSegment(e,t,r,h.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){return"**"===r.path?(e=Gx(r,e),r.loadChildren?(r._loadedRoutes?H({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe(ce(a=>(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,new se(i,{})))):H(new se(i,{}))):Zx(t,r,i,e).pipe(Wn(({matched:o,consumedSegments:a,remainingSegments:l})=>o?this.getChildConfig(e=r._injector??e,r,i).pipe(pt(u=>{const d=u.injector??e,h=u.routes,{segmentGroup:f,slicedSegments:g}=Su(t,a,l,h),p=new se(f.segments,f.children);if(0===g.length&&p.hasChildren())return this.expandChildren(d,h,p).pipe(ce(y=>new se(a,y)));if(0===h.length&&0===g.length)return H(new se(a,{}));const m=fn(r)===s;return this.expandSegment(d,p,h,g,m?te:s,!0).pipe(ce(b=>new se(a.concat(b.segments),b.children)))})):Ga(t)))}getChildConfig(e,t,r){return t.children?H({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?H({routes:t._loadedRoutes,injector:t._loadedInjector}):function YB(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?H(!0):H(i.map(o=>{const a=Bs(o,n);return Gr(function RB(n){return n&&za(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe($s(),Yx())}(e,t,r).pipe(pt(i=>i?this.configLoader.loadChildren(e,t).pipe(_t(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function t$(n){return Pa(Vx(Au,3))}())):H({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return H(r);if(i.numberOfChildren>1||!i.children[te])return Pa(new O(4e3,Au));i=i.children[te]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Pi(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return vt(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[s]=t[a]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return vt(t.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,r,i)}),new se(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new O(4001,Au);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class s${}class l${constructor(e,t,r,i,s,o,a){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a}recognize(){const e=Su(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,te).pipe(ce(t=>{if(null===t)return null;const r=new Cu([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},te,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new yr(r,t),s=new jx(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,r=Fx(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return nt(Object.keys(r.children)).pipe(Ti(i=>{const s=r.children[i],o=qx(t,i);return this.processSegmentGroup(e,o,s,i)}),hx((i,s)=>i&&s?(i.push(...s),i):null),function Aj(n,e=!1){return lt((t,r)=>{let i=0;t.subscribe(ct(r,s=>{const o=n(s,i++);(o||e)&&r.next(s),!o&&r.complete()}))})}(i=>null!==i),hu(null),fx(),ce(i=>{if(null===i)return null;const s=tE(i);return function c$(n){n.sort((e,t)=>e.value.outlet===te?-1:t.value.outlet===te?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,r,i,s){return nt(t).pipe(Ti(o=>this.processSegmentAgainstRoute(o._injector??e,o,r,i,s)),Ur(o=>!!o),zr(o=>{if(_p(o))return Jx(r,i,s)?H([]):H(null);throw o}))}processSegmentAgainstRoute(e,t,r,i,s){if(t.redirectTo||!Xx(t,r,i,s))return H(null);let o;if("**"===t.path){const a=i.length>0?mx(i).parameters:{},l=rE(r)+i.length;o=H({snapshot:new Cu(i,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,iE(t),fn(t),t.component??t._loadedComponent??null,t,nE(r),l,sE(t)),consumedSegments:[],remainingSegments:[]})}else o=Zx(r,t,i,e).pipe(ce(({matched:a,consumedSegments:l,remainingSegments:c,parameters:u})=>{if(!a)return null;const d=rE(r)+l.length;return{snapshot:new Cu(l,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,iE(t),fn(t),t.component??t._loadedComponent??null,t,nE(r),d,sE(t)),consumedSegments:l,remainingSegments:c}}));return o.pipe(Wn(a=>{if(null===a)return H(null);const{snapshot:l,consumedSegments:c,remainingSegments:u}=a;e=t._injector??e;const d=t._loadedInjector??e,h=function u$(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:f,slicedSegments:g}=Su(r,c,u,h.filter(m=>void 0===m.redirectTo));if(0===g.length&&f.hasChildren())return this.processChildren(d,h,f).pipe(ce(m=>null===m?null:[new yr(l,m)]));if(0===h.length&&0===g.length)return H([new yr(l,[])]);const p=fn(t)===s;return this.processSegment(d,h,f,g,p?te:s).pipe(ce(m=>null===m?null:[new yr(l,m)]))}))}}function d$(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function tE(n){const e=[],t=new Set;for(const r of n){if(!d$(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=tE(r.children);e.push(new yr(r.value,i))}return e.filter(r=>!t.has(r))}function nE(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function rE(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function iE(n){return n.data||{}}function sE(n){return n.resolve||{}}function oE(n){return"string"==typeof n.title||null===n.title}function Tp(n){return Wn(e=>{const t=n(e);return t?nt(t).pipe(ce(()=>e)):H(e)})}const Vs=new q("ROUTES");let Pp=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return H(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Gr(t.loadComponent()).pipe(ce(lE),_t(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),cp(()=>{this.componentLoaders.delete(t)})),i=new ux(r,()=>new nr).pipe(ap());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return H({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(ce(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let l,c,u=!1;Array.isArray(a)?c=a:(l=a.create(t).injector,c=px(l.get(Vs,[],z.Self|z.Optional)));return{routes:c.map(Sp),injector:l}}),cp(()=>{this.childrenLoaders.delete(r)})),o=new ux(s,()=>new nr).pipe(ap());return this.childrenLoaders.set(r,o),o}loadModuleFactoryOrRoutes(t){return Gr(t()).pipe(ce(lE),pt(i=>i instanceof Kw||Array.isArray(i)?H(i):nt(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)(B(_n),B(zC))},n.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function lE(n){return function w$(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Pu=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new nr,this.configLoader=ue(Pp),this.environmentInjector=ue(ur),this.urlSerializer=ue(Ra),this.rootContexts=ue($a),this.navigationId=0,this.afterPreactivation=()=>H(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new lB(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new aB(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Nn({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ja,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Hr(r=>0!==r.id),ce(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Wn(r=>{let i=!1,s=!1;return H(r).pipe(_t(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Wn(o=>{const a=t.browserUrlTree.toString(),l=!t.navigated||o.extractedUrl.toString()!==a||a!==t.currentUrlTree.toString();if(!l&&"reload"!==(o.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const u="";return this.events.next(new Ix(o.id,t.serializeUrl(r.rawUrl),u,0)),t.rawUrlTree=o.rawUrl,o.resolve(null),jn}if(t.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return cE(o.source)&&(t.browserUrlTree=o.extractedUrl),H(o).pipe(Wn(u=>{const d=this.transitions?.getValue();return this.events.next(new mp(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),d!==this.transitions?.getValue()?jn:Promise.resolve(u)}),function i$(n,e,t,r){return Wn(i=>function n$(n,e,t,r,i){return new r$(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe(ce(s=>({...i,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),_t(u=>{this.currentNavigation={...this.currentNavigation,finalUrl:u.urlAfterRedirects},r.urlAfterRedirects=u.urlAfterRedirects}),function f$(n,e,t,r,i){return pt(s=>function a$(n,e,t,r,i,s,o="emptyOnly"){return new l$(n,e,t,r,i,o,s).recognize().pipe(Wn(a=>null===a?function o$(n){return new tt(e=>e.error(n))}(new s$):H(a)))}(n,e,t,s.urlAfterRedirects,r.serialize(s.urlAfterRedirects),r,i).pipe(ce(o=>({...s,targetSnapshot:o}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),_t(u=>{if(r.targetSnapshot=u.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!u.extras.skipLocationChange){const h=t.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl);t.setBrowserUrl(h,u)}t.browserUrlTree=u.urlAfterRedirects}const d=new nB(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}));if(l&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:u,extractedUrl:d,source:h,restoredState:f,extras:g}=o,p=new mp(u,this.urlSerializer.serialize(d),h,f);this.events.next(p);const m=kx(d,this.rootComponentType).snapshot;return H(r={...o,targetSnapshot:m,urlAfterRedirects:d,extras:{...g,skipLocationChange:!1,replaceUrl:!1}})}{const u="";return this.events.next(new Ix(o.id,t.serializeUrl(r.extractedUrl),u,1)),t.rawUrlTree=o.rawUrl,o.resolve(null),jn}}),_t(o=>{const a=new rB(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),ce(o=>r={...o,guards:TB(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),function $B(n,e){return pt(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?H({...t,guardsResult:!0}):function VB(n,e,t,r){return nt(n).pipe(pt(i=>function WB(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?H(s.map(a=>{const l=Va(e)??i,c=Bs(a,l);return Gr(function FB(n){return n&&za(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,r):l.runInContext(()=>c(n,e,t,r))).pipe(Ur())})).pipe($s()):H(!0)}(i.component,i.route,t,e,r)),Ur(i=>!0!==i,!0))}(o,r,i,n).pipe(pt(a=>a&&function NB(n){return"boolean"==typeof n}(a)?function HB(n,e,t,r){return nt(e).pipe(Ti(i=>op(function zB(n,e){return null!==n&&e&&e(new cB(n)),H(!0)}(i.route.parent,r),function UB(n,e){return null!==n&&e&&e(new dB(n)),H(!0)}(i.route,r),function qB(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function PB(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>cx(()=>H(o.guards.map(l=>{const c=Va(o.node)??t,u=Bs(l,c);return Gr(function kB(n){return n&&za(n.canActivateChild)}(u)?u.canActivateChild(r,n):c.runInContext(()=>u(r,n))).pipe(Ur())})).pipe($s())));return H(s).pipe($s())}(n,i.path,t),function GB(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return H(!0);const i=r.map(s=>cx(()=>{const o=Va(e)??t,a=Bs(s,o);return Gr(function LB(n){return n&&za(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Ur())}));return H(i).pipe($s())}(n,i.route,t))),Ur(i=>!0!==i,!0))}(r,s,n,e):H(a)),ce(a=>({...t,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),_t(o=>{if(r.guardsResult=o.guardsResult,Oi(o.guardsResult))throw $x(0,o.guardsResult);const a=new iB(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),Hr(o=>!!o.guardsResult||(t.restoreHistory(o),this.cancelNavigationTransition(o,"",3),!1)),Tp(o=>{if(o.guards.canActivateChecks.length)return H(o).pipe(_t(a=>{const l=new sB(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),Wn(a=>{let l=!1;return H(a).pipe(function g$(n,e){return pt(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return H(t);let s=0;return nt(i).pipe(Ti(o=>function p$(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!oE(i)&&(s[Oa]=i.title),function m$(n,e,t,r){const i=function y$(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return H({});const s={};return nt(i).pipe(pt(o=>function v$(n,e,t,r){const i=Va(e)??r,s=Bs(n,i);return Gr(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(Ur(),_t(a=>{s[o]=a}))),lp(1),function Mj(n){return ce(()=>n)}(s),zr(o=>_p(o)?jn:Pa(o)))}(s,n,e,r).pipe(ce(o=>(n._resolvedData=o,n.data=Fx(n,t).resolve,i&&oE(i)&&(n.data[Oa]=i.title),null)))}(o.route,r,n,e)),_t(()=>s++),lp(1),pt(o=>s===i.length?H(t):jn))})}(t.paramsInheritanceStrategy,this.environmentInjector),_t({next:()=>l=!0,complete:()=>{l||(t.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),_t(a=>{const l=new oB(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),Tp(o=>{const a=l=>{const c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(_t(u=>{l.component=u}),ce(()=>{})));for(const u of l.children)c.push(...a(u));return c};return ax(a(o.targetSnapshot.root)).pipe(hu(),Ia(1))}),Tp(()=>this.afterPreactivation()),ce(o=>{const a=function vB(n,e,t){const r=Ba(n,e._root,t?t._root:void 0);return new Lx(r,e)}(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return r={...o,targetRouterState:a}}),_t(o=>{t.currentUrlTree=o.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),t.routerState=o.targetRouterState,"deferred"===t.urlUpdateStrategy&&(o.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,o),t.browserUrlTree=o.urlAfterRedirects)}),((n,e,t)=>ce(r=>(new MB(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o)),_t({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Ni(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),cp(()=>{i||s||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),zr(o=>{if(s=!0,Ux(o)){Hx(o)||(t.navigated=!0,t.restoreHistory(r,!0));const a=new wu(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode);if(this.events.next(a),Hx(o)){const l=t.urlHandlingStrategy.merge(o.url,t.rawUrlTree),c={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||cE(r.source)};t.scheduleNavigation(l,ja,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const a=new Ox(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);this.events.next(a);try{r.resolve(t.errorHandler(o))}catch(l){r.reject(l)}}return jn}))}))}cancelNavigationTransition(t,r,i){const s=new wu(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function cE(n){return n!==ja}let uE=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===te);return r}getResolvedTitleForRoute(t){return t.data[Oa]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Y({token:n,factory:function(){return ue(C$)},providedIn:"root"}),n})(),C$=(()=>{class n extends uE{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(B(ix))},n.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),D$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Y({token:n,factory:function(){return ue(E$)},providedIn:"root"}),n})();class x${shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let E$=(()=>{class n extends x${}return n.\u0275fac=function(){let e;return function(r){return(e||(e=function vv(n){return Or(()=>{const e=n.prototype.constructor,t=e[sr]||Th(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[sr]||Th(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}(n)))(r||n)}}(),n.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Iu=new q("",{providedIn:"root",factory:()=>({})});let _$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Y({token:n,factory:function(){return ue(A$)},providedIn:"root"}),n})(),A$=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function M$(n){throw n}function T$(n,e,t){return e.parse("/")}const P$={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},I$={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let tn=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=ue(ZL),this.isNgZoneEnabled=!1,this.options=ue(Iu,{optional:!0})||{},this.errorHandler=this.options.errorHandler||M$,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||T$,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=ue(_$),this.routeReuseStrategy=ue(D$),this.urlCreationStrategy=ue(pB),this.titleStrategy=ue(uE),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=px(ue(Vs,{optional:!0})??[]),this.navigationTransitions=ue(Pu),this.urlSerializer=ue(Ra),this.location=ue(Rg),this.isNgZoneEnabled=ue(Ze)instanceof Ze&&Ze.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Pi,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=kx(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ja,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const l={...i};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(Sp),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:o;let u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...s};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}return null!==u&&(u=this.removeEmptyProps(u)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,u,c??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Oi(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,ja,null,r)}navigate(t,r={skipLocationChange:!1}){return function O$(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new O(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...P$}:!1===r?{...I$}:r,Oi(t))return vx(this.currentUrlTree,t,i);const s=this.parseUrl(t);return vx(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c,u;return o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((d,h)=>{a=d,l=h}),u="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:u,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class hE{}let L$=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Hr(t=>t instanceof Ni),Ti(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=Fc(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?i.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return nt(i).pipe(Yi())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):H(null);const s=i.pipe(pt(o=>null===o?H(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?nt([s,this.loader.loadComponent(r)]).pipe(Yi()):s})}}return n.\u0275fac=function(t){return new(t||n)(B(tn),B(zC),B(ur),B(hE),B(Pp))},n.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Op=new q("");let fE=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof mp?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ni&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Nx&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Nx(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){!function Yb(){throw new Error("invalid")}()},n.\u0275prov=Y({token:n,factory:n.\u0275fac}),n})();function Ri(n,e){return{\u0275kind:n,\u0275providers:e}}function pE(){const n=ue(_n);return e=>{const t=n.get(qc);if(e!==t.components[0])return;const r=n.get(tn),i=n.get(mE);1===n.get(Rp)&&r.initialNavigation(),n.get(yE,null,z.Optional)?.setUpPreloading(),n.get(Op,null,z.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const mE=new q("",{factory:()=>new nr}),Rp=new q("",{providedIn:"root",factory:()=>1});const yE=new q("");function $$(n){return Ri(0,[{provide:yE,useExisting:L$},{provide:hE,useExisting:n}])}const vE=new q("ROUTER_FORROOT_GUARD"),V$=[Rg,{provide:Ra,useClass:up},tn,$a,{provide:js,useFactory:function gE(n){return n.routerState.root},deps:[tn]},Pp,[]];function H$(){return new JC("Router",tn)}let bE=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[V$,[],{provide:Vs,multi:!0,useValue:t},{provide:vE,useFactory:q$,deps:[[tn,new Ko,new Qo]]},{provide:Iu,useValue:r||{}},r?.useHash?{provide:Mi,useClass:kk}:{provide:Mi,useClass:wD},{provide:Op,useFactory:()=>{const n=ue(i2),e=ue(Ze),t=ue(Iu),r=ue(Pu),i=ue(Ra);return t.scrollOffset&&n.setOffset(t.scrollOffset),new fE(i,r,n,e,t)}},r?.preloadingStrategy?$$(r.preloadingStrategy).\u0275providers:[],{provide:JC,multi:!0,useFactory:H$},r?.initialNavigation?W$(r):[],[{provide:wE,useFactory:pE},{provide:UC,multi:!0,useExisting:wE}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Vs,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(B(vE,8))},n.\u0275mod=gi({type:n}),n.\u0275inj=Ir({imports:[xp]}),n})();function q$(n){return"guarded"}function W$(n){return["disabled"===n.initialNavigation?Ri(3,[{provide:Uc,multi:!0,useFactory:()=>{const e=ue(tn);return()=>{e.setUpLocationChangeListener()}}},{provide:Rp,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ri(2,[{provide:Rp,useValue:0},{provide:Uc,multi:!0,deps:[_n],useFactory:e=>{const t=e.get(Rk,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const s=e.get(tn),o=e.get(mE);(function r(i){e.get(tn).events.pipe(Hr(o=>o instanceof Ni||o instanceof wu||o instanceof Ox),ce(o=>o instanceof Ni||o instanceof wu&&(0===o.code||1===o.code)&&null),Hr(o=>null!==o),Ia(1)).subscribe(()=>{i()})})(()=>{i(!0)}),e.get(Pu).afterPreactivation=()=>(i(!0),o.closed?H(void 0):o),s.initialNavigation()}))}}]).\u0275providers:[]]}const wE=new q("");class Us{}Us.\u0275fac=function(e){return new(e||Us)},Us.\u0275mod=gi({type:Us}),Us.\u0275inj=Ir({imports:[bE.forRoot([]),bE]}),fe(460);class qr{get disposed(){return!0===this._disposed}dispose(){this._disposed=!0}}(qr||(qr={})).dispose=function e(){return(t,r,i)=>{const s=i.value,o=t.__proto__;i.value=function(){this.disposed||(s.call(this),o.dispose.call(this))}}};class CE{constructor(){this.isDisposed=!1,this.items=new Set}get disposed(){return this.isDisposed}dispose(){this.isDisposed||(this.isDisposed=!0,this.items.forEach(e=>{e.dispose()}),this.items.clear())}contains(e){return this.items.has(e)}add(e){this.items.add(e)}remove(e){this.items.delete(e)}clear(){this.items.clear()}}var n;(n=CE||(CE={})).from=function e(t){const r=new n;return t.forEach(i=>{r.add(i)}),r};const Ue=function X$(n){var e=typeof n;return null!=n&&("object"==e||"function"==e)},DE="object"==typeof global&&global&&global.Object===Object&&global;var K$="object"==typeof self&&self&&self.Object===Object&&self;const Rn=DE||K$||Function("return this")(),Lp=function(){return Rn.Date.now()};var tV=/\s/;var iV=/^\s+/;const oV=function sV(n){return n&&n.slice(0,function nV(n){for(var e=n.length;e--&&tV.test(n.charAt(e)););return e}(n)+1).replace(iV,"")},gn=Rn.Symbol;var xE=Object.prototype,lV=xE.hasOwnProperty,cV=xE.toString,Wa=gn?gn.toStringTag:void 0;var fV=Object.prototype.toString;var EE=gn?gn.toStringTag:void 0;const Wr=function vV(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":EE&&EE in Object(n)?function uV(n){var e=lV.call(n,Wa),t=n[Wa];try{n[Wa]=void 0;var r=!0}catch{}var i=cV.call(n);return r&&(e?n[Wa]=t:delete n[Wa]),i}(n):function gV(n){return fV.call(n)}(n)},Ln=function bV(n){return null!=n&&"object"==typeof n},Xn=function CV(n){return"symbol"==typeof n||Ln(n)&&"[object Symbol]"==Wr(n)};var DV=/^[-+]0x[0-9a-f]+$/i,xV=/^0b[01]+$/i,EV=/^0o[0-7]+$/i,SV=parseInt;const zs=function _V(n){if("number"==typeof n)return n;if(Xn(n))return NaN;if(Ue(n)){var e="function"==typeof n.valueOf?n.valueOf():n;n=Ue(e)?e+"":e}if("string"!=typeof n)return 0===n?n:+n;n=oV(n);var t=xV.test(n);return t||EV.test(n)?SV(n.slice(2),t?2:8):DV.test(n)?NaN:+n};var MV=Math.max,TV=Math.min;function _E(n,e,t){if(t)switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2]);case 4:return n.call(e,t[0],t[1],t[2],t[3]);case 5:return n.call(e,t[0],t[1],t[2],t[3],t[4]);case 6:return n.call(e,t[0],t[1],t[2],t[3],t[4],t[5]);default:return n.apply(e,t)}return n.call(e)}function Z(n,e,...t){return _E(n,e,t)}function AE(n){return null!=n&&(n instanceof Promise||function OV(n){return"object"==typeof n&&n.then&&"function"==typeof n.then}(n))}function kp(...n){const e=[];if(n.forEach(r=>{Array.isArray(r)?e.push(...r):e.push(r)}),e.some(r=>AE(r))){const r=e.map(i=>AE(i)?i:Promise.resolve(!1!==i));return Promise.all(r).then(i=>i.reduce((s,o)=>!1!==o&&s,!0))}return e.every(r=>!1!==r)}function Fp(n,e){const t=[];for(let r=0;r<n.length;r+=2){const a=_E(n[r],n[r+1],Array.isArray(e)?e:[e]);t.push(a)}return kp(t)}class NV{constructor(){this.listeners={}}on(e,t,r){return null==t||(this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t,r)),this}once(e,t,r){const i=(...s)=>(this.off(e,i),Fp([t,r],s));return this.on(e,i,this)}off(e,t,r){if(!(e||t||r))return this.listeners={},this;const i=this.listeners;return(e?[e]:Object.keys(i)).forEach(o=>{const a=i[o];if(a){if(!t&&!r)return void delete i[o];for(let l=a.length-2;l>=0;l-=2)t&&a[l]!==t||r&&a[l+1]!==r||a.splice(l,2)}}),this}trigger(e,...t){let r=!0;if("*"!==e){const s=this.listeners[e];null!=s&&(r=Fp([...s],t))}const i=this.listeners["*"];return null!=i?kp([r,Fp([...i],[e,...t])]):r}emit(e,...t){return this.trigger(e,...t)}}var LV=Object.prototype.hasOwnProperty;const FV=function kV(n,e){return null!=n&&LV.call(n,e)},At=Array.isArray;var BV=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$V=/^\w*$/;const jp=function VV(n,e){if(At(n))return!1;var t=typeof n;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=n&&!Xn(n))||$V.test(n)||!BV.test(n)||null!=e&&n in Object(e)},Bp=function qV(n){if(!Ue(n))return!1;var e=Wr(n);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},$p=Rn["__core-js_shared__"];var ME=function(){var n=/[^.]+$/.exec($p&&$p.keys&&$p.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();var JV=Function.prototype.toString;const Li=function KV(n){if(null!=n){try{return JV.call(n)}catch{}try{return n+""}catch{}}return""};var eH=/^\[object .+?Constructor\]$/,sH=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const aH=function oH(n){return!(!Ue(n)||function YV(n){return!!ME&&ME in n}(n))&&(Bp(n)?sH:eH).test(Li(n))},ki=function uH(n,e){var t=function lH(n,e){return n?.[e]}(n,e);return aH(t)?t:void 0},Ya=ki(Object,"create");var vH=Object.prototype.hasOwnProperty;var DH=Object.prototype.hasOwnProperty;function Gs(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Gs.prototype.clear=function hH(){this.__data__=Ya?Ya(null):{},this.size=0},Gs.prototype.delete=function gH(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e},Gs.prototype.get=function bH(n){var e=this.__data__;if(Ya){var t=e[n];return"__lodash_hash_undefined__"===t?void 0:t}return vH.call(e,n)?e[n]:void 0},Gs.prototype.has=function xH(n){var e=this.__data__;return Ya?void 0!==e[n]:DH.call(e,n)},Gs.prototype.set=function _H(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=Ya&&void 0===e?"__lodash_hash_undefined__":e,this};const TE=Gs,qs=function PH(n,e){return n===e||n!=n&&e!=e},Ou=function IH(n,e){for(var t=n.length;t--;)if(qs(n[t][0],e))return t;return-1};var NH=Array.prototype.splice;function Ws(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Ws.prototype.clear=function MH(){this.__data__=[],this.size=0},Ws.prototype.delete=function RH(n){var e=this.__data__,t=Ou(e,n);return!(t<0||(t==e.length-1?e.pop():NH.call(e,t,1),--this.size,0))},Ws.prototype.get=function kH(n){var e=this.__data__,t=Ou(e,n);return t<0?void 0:e[t][1]},Ws.prototype.has=function jH(n){return Ou(this.__data__,n)>-1},Ws.prototype.set=function $H(n,e){var t=this.__data__,r=Ou(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this};const Nu=Ws,Za=ki(Rn,"Map"),Ru=function WH(n,e){var t=n.__data__;return function GH(n){var e=typeof n;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n}(e)?t["string"==typeof e?"string":"hash"]:t.map};function Ys(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Ys.prototype.clear=function UH(){this.size=0,this.__data__={hash:new TE,map:new(Za||Nu),string:new TE}},Ys.prototype.delete=function YH(n){var e=Ru(this,n).delete(n);return this.size-=e?1:0,e},Ys.prototype.get=function XH(n){return Ru(this,n).get(n)},Ys.prototype.has=function KH(n){return Ru(this,n).has(n)},Ys.prototype.set=function eU(n,e){var t=Ru(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this};const Lu=Ys;function Vp(n,e){if("function"!=typeof n||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=t.cache;if(s.has(i))return s.get(i);var o=n.apply(this,r);return t.cache=s.set(i,o)||s,o};return t.cache=new(Vp.Cache||Lu),t}Vp.Cache=Lu;const rU=Vp;var aU=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,lU=/\\(\\)?/g,cU=function sU(n){var e=rU(n,function(r){return 500===t.size&&t.clear(),r}),t=e.cache;return e}(function(n){var e=[];return 46===n.charCodeAt(0)&&e.push(""),n.replace(aU,function(t,r,i,s){e.push(i?s.replace(lU,"$1"):r||t)}),e});const uU=cU,Xa=function dU(n,e){for(var t=-1,r=null==n?0:n.length,i=Array(r);++t<r;)i[t]=e(n[t],t,n);return i};var PE=gn?gn.prototype:void 0,IE=PE?PE.toString:void 0;const fU=function OE(n){if("string"==typeof n)return n;if(At(n))return Xa(n,OE)+"";if(Xn(n))return IE?IE.call(n):"";var e=n+"";return"0"==e&&1/n==-1/0?"-0":e},Zs=function gU(n){return null==n?"":fU(n)},ku=function pU(n,e){return At(n)?n:jp(n,e)?[n]:uU(Zs(n))},NE=function yU(n){return Ln(n)&&"[object Arguments]"==Wr(n)};var RE=Object.prototype,vU=RE.hasOwnProperty,bU=RE.propertyIsEnumerable,wU=NE(function(){return arguments}())?NE:function(n){return Ln(n)&&vU.call(n,"callee")&&!bU.call(n,"callee")};const Xs=wU;var DU=/^(?:0|[1-9]\d*)$/;const Fu=function xU(n,e){var t=typeof n;return!!(e=e??9007199254740991)&&("number"==t||"symbol"!=t&&DU.test(n))&&n>-1&&n%1==0&&n<e},Hp=function SU(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991},Ja=function AU(n){if("string"==typeof n||Xn(n))return n;var e=n+"";return"0"==e&&1/n==-1/0?"-0":e},LE=function MU(n,e,t){for(var r=-1,i=(e=ku(e,n)).length,s=!1;++r<i;){var o=Ja(e[r]);if(!(s=null!=n&&t(n,o)))break;n=n[o]}return s||++r!=i?s:!!(i=null==n?0:n.length)&&Hp(i)&&Fu(o,i)&&(At(n)||Xs(n))},ju=function TU(n,e){return null!=n&&LE(n,e,FV)},Bu=function PU(n,e){for(var t=0,r=(e=ku(e,n)).length;null!=n&&t<r;)n=n[Ja(e[t++])];return t&&t==r?n:void 0};var IU=function(){try{var n=ki(Object,"defineProperty");return n({},"",{}),n}catch{}}();const $u=IU,Vu=function OU(n,e,t){"__proto__"==e&&$u?$u(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t};var RU=Object.prototype.hasOwnProperty;const Up=function LU(n,e,t){var r=n[e];(!RU.call(n,e)||!qs(r,t)||void 0===t&&!(e in n))&&Vu(n,e,t)},FU=function kU(n,e,t,r){if(!Ue(n))return n;for(var i=-1,s=(e=ku(e,n)).length,o=s-1,a=n;null!=a&&++i<s;){var l=Ja(e[i]),c=t;if("__proto__"===l||"constructor"===l||"prototype"===l)return n;if(i!=o){var u=a[l];void 0===(c=r?r(u,l,a):void 0)&&(c=Ue(u)?u:Fu(e[i+1])?[]:{})}Up(a,l,c),a=a[l]}return n},VU=function $U(n,e){return null!=n&&e in Object(n)},kE=function HU(n,e){return null!=n&&LE(n,e,VU)},zU=function UU(n,e){return function jU(n,e,t){for(var r=-1,i=e.length,s={};++r<i;){var o=e[r],a=Bu(n,o);t(a,o)&&FU(s,ku(o,n),a)}return s}(n,e,function(t,r){return kE(n,r)})},zp=function GU(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n};var FE=gn?gn.isConcatSpreadable:void 0;const WU=function qU(n){return At(n)||Xs(n)||!!(FE&&n&&n[FE])},Hu=function jE(n,e,t,r,i){var s=-1,o=n.length;for(t||(t=WU),i||(i=[]);++s<o;){var a=n[s];e>0&&t(a)?e>1?jE(a,e-1,t,r,i):zp(i,a):r||(i[i.length]=a)}return i},ZU=function YU(n){return null!=n&&n.length?Hu(n,1):[]},BE=function XU(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)};var $E=Math.max;const VE=function JU(n,e,t){return e=$E(void 0===e?n.length-1:e,0),function(){for(var r=arguments,i=-1,s=$E(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=t(o),BE(n,this,a)}},QU=function KU(n){return function(){return n}},Js=function ez(n){return n};var tz=$u?function(n,e){return $u(n,"toString",{configurable:!0,enumerable:!1,value:QU(e),writable:!0})}:Js,sz=Date.now,az=function oz(n){var e=0,t=0;return function(){var r=sz(),i=16-(r-t);if(t=r,i>0){if(++e>=800)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}(tz);const HE=az;!function lz(n){HE(VE(n,void 0,ZU),n+"")}(function(n,e){return null==n?{}:zU(n,e)});function Ks(n){var e=this.__data__=new Nu(n);this.size=e.size}Ks.prototype.clear=function uz(){this.__data__=new Nu,this.size=0},Ks.prototype.delete=function hz(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t},Ks.prototype.get=function gz(n){return this.__data__.get(n)},Ks.prototype.has=function mz(n){return this.__data__.has(n)},Ks.prototype.set=function bz(n,e){var t=this.__data__;if(t instanceof Nu){var r=t.__data__;if(!Za||r.length<199)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new Lu(r)}return t.set(n,e),this.size=t.size,this};const Qs=Ks,Gp=function Cz(n,e,t){(void 0!==t&&!qs(n[e],t)||void 0===t&&!(e in n))&&Vu(n,e,t)};var xz=function Dz(n){return function(e,t,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[n?a:++i];if(!1===t(s[l],l,s))break}return e}}();const UE=xz;var zE="object"==typeof exports&&exports&&!exports.nodeType&&exports,GE=zE&&"object"==typeof module&&module&&!module.nodeType&&module,qE=GE&&GE.exports===zE?Rn.Buffer:void 0,WE=qE?qE.allocUnsafe:void 0;const YE=function Sz(n,e){if(e)return n.slice();var t=n.length,r=WE?WE(t):new n.constructor(t);return n.copy(r),r},Uu=Rn.Uint8Array,qp=function Az(n){var e=new n.constructor(n.byteLength);return new Uu(e).set(new Uu(n)),e},ZE=function Mz(n,e){var t=e?qp(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)},XE=function Tz(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e};var JE=Object.create,Pz=function(){function n(){}return function(e){if(!Ue(e))return{};if(JE)return JE(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const Iz=Pz,KE=function Oz(n,e){return function(t){return n(e(t))}},Wp=KE(Object.getPrototypeOf,Object);var Rz=Object.prototype;const zu=function Lz(n){var e=n&&n.constructor;return n===("function"==typeof e&&e.prototype||Rz)},QE=function kz(n){return"function"!=typeof n.constructor||zu(n)?{}:Iz(Wp(n))},Fi=function Fz(n){return null!=n&&Hp(n.length)&&!Bp(n)},Gu=function jz(n){return Ln(n)&&Fi(n)};var eS="object"==typeof exports&&exports&&!exports.nodeType&&exports,tS=eS&&"object"==typeof module&&module&&!module.nodeType&&module,nS=tS&&tS.exports===eS?Rn.Buffer:void 0;const eo=(nS?nS.isBuffer:void 0)||function Bz(){return!1};var rS=Function.prototype.toString,Wz=Object.prototype.hasOwnProperty,Yz=rS.call(Object);const Jn=function Zz(n){if(!Ln(n)||"[object Object]"!=Wr(n))return!1;var e=Wp(n);if(null===e)return!0;var t=Wz.call(e,"constructor")&&e.constructor;return"function"==typeof t&&t instanceof t&&rS.call(t)==Yz};var Pe={};Pe["[object Float32Array]"]=Pe["[object Float64Array]"]=Pe["[object Int8Array]"]=Pe["[object Int16Array]"]=Pe["[object Int32Array]"]=Pe["[object Uint8Array]"]=Pe["[object Uint8ClampedArray]"]=Pe["[object Uint16Array]"]=Pe["[object Uint32Array]"]=!0,Pe["[object Arguments]"]=Pe["[object Array]"]=Pe["[object ArrayBuffer]"]=Pe["[object Boolean]"]=Pe["[object DataView]"]=Pe["[object Date]"]=Pe["[object Error]"]=Pe["[object Function]"]=Pe["[object Map]"]=Pe["[object Number]"]=Pe["[object Object]"]=Pe["[object RegExp]"]=Pe["[object Set]"]=Pe["[object String]"]=Pe["[object WeakMap]"]=!1;const Ka=function D3(n){return function(e){return n(e)}};var iS="object"==typeof exports&&exports&&!exports.nodeType&&exports,Qa=iS&&"object"==typeof module&&module&&!module.nodeType&&module,Yp=Qa&&Qa.exports===iS&&DE.process;const to=function(){try{return Qa&&Qa.require&&Qa.require("util").types||Yp&&Yp.binding&&Yp.binding("util")}catch{}}();var sS=to&&to.isTypedArray;const qu=sS?Ka(sS):function w3(n){return Ln(n)&&Hp(n.length)&&!!Pe[Wr(n)]},Zp=function _3(n,e){if(("constructor"!==e||"function"!=typeof n[e])&&"__proto__"!=e)return n[e]},el=function A3(n,e,t,r){var i=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=r?r(t[a],n[a],a,t,n):void 0;void 0===l&&(l=n[a]),i?Vu(t,a,l):Up(t,a,l)}return t};var I3=Object.prototype.hasOwnProperty;const oS=function O3(n,e){var t=At(n),r=!t&&Xs(n),i=!t&&!r&&eo(n),s=!t&&!r&&!i&&qu(n),o=t||r||i||s,a=o?function M3(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}(n.length,String):[],l=a.length;for(var c in n)(e||I3.call(n,c))&&(!o||!("length"==c||i&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Fu(c,l)))&&a.push(c);return a};var k3=Object.prototype.hasOwnProperty;const j3=function F3(n){if(!Ue(n))return function N3(n){var e=[];if(null!=n)for(var t in Object(n))e.push(t);return e}(n);var e=zu(n),t=[];for(var r in n)"constructor"==r&&(e||!k3.call(n,r))||t.push(r);return t},no=function B3(n){return Fi(n)?oS(n,!0):j3(n)},U3=function H3(n,e,t,r,i,s,o){var a=Zp(n,t),l=Zp(e,t),c=o.get(l);if(c)Gp(n,t,c);else{var u=s?s(a,l,t+"",n,e,o):void 0,d=void 0===u;if(d){var h=At(l),f=!h&&eo(l),g=!h&&!f&&qu(l);u=l,h||f||g?At(a)?u=a:Gu(a)?u=XE(a):f?(d=!1,u=YE(l,!0)):g?(d=!1,u=ZE(l,!0)):u=[]:Jn(l)||Xs(l)?(u=a,Xs(a)?u=function $3(n){return el(n,no(n))}(a):(!Ue(a)||Bp(a))&&(u=QE(l))):d=!1}d&&(o.set(l,u),i(u,l,r,s,o),o.delete(l)),Gp(n,t,u)}},Xp=function aS(n,e,t,r,i){n!==e&&UE(e,function(s,o){if(i||(i=new Qs),Ue(s))U3(n,e,o,t,aS,r,i);else{var a=r?r(Zp(n,o),s,o+"",n,e,i):void 0;void 0===a&&(a=s),Gp(n,o,a)}},no)},ro=function z3(n,e){return HE(VE(n,e,Js),n+"")},tl=function G3(n,e,t){if(!Ue(t))return!1;var r=typeof e;return!!("number"==r?Fi(t)&&Fu(e,t.length):"string"==r&&e in t)&&qs(t[e],n)},lS=function q3(n){return ro(function(e,t){var r=-1,i=t.length,s=i>1?t[i-1]:void 0,o=i>2?t[2]:void 0;for(s=n.length>3&&"function"==typeof s?(i--,s):void 0,o&&tl(t[0],t[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var a=t[r];a&&n(e,a,r,s)}return e})};var W3=lS(function(n,e,t){Xp(n,e,t)});const ze=W3;function Wu(n){var e=-1,t=null==n?0:n.length;for(this.__data__=new Lu;++e<t;)this.add(n[e])}Wu.prototype.add=Wu.prototype.push=function Z3(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this},Wu.prototype.has=function J3(n){return this.__data__.has(n)};const Jp=Wu,e8=function Q3(n,e){for(var t=-1,r=null==n?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1},Kp=function t8(n,e){return n.has(e)},cS=function i8(n,e,t,r,i,s){var o=1&t,a=n.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(n),u=s.get(e);if(c&&u)return c==e&&u==n;var d=-1,h=!0,f=2&t?new Jp:void 0;for(s.set(n,e),s.set(e,n);++d<a;){var g=n[d],p=e[d];if(r)var m=o?r(p,g,d,e,n,s):r(g,p,d,n,e,s);if(void 0!==m){if(m)continue;h=!1;break}if(f){if(!e8(e,function(v,b){if(!Kp(f,b)&&(g===v||i(g,v,t,r,s)))return f.push(b)})){h=!1;break}}else if(g!==p&&!i(g,p,t,r,s)){h=!1;break}}return s.delete(n),s.delete(e),h},o8=function s8(n){var e=-1,t=Array(n.size);return n.forEach(function(r,i){t[++e]=[i,r]}),t},Qp=function a8(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t};var uS=gn?gn.prototype:void 0,em=uS?uS.valueOf:void 0;const dS=function x8(n,e,t){var r=e(n);return At(n)?r:zp(r,t(n))},hS=function _8(){return[]};var M8=Object.prototype.propertyIsEnumerable,fS=Object.getOwnPropertySymbols,T8=fS?function(n){return null==n?[]:(n=Object(n),function E8(n,e){for(var t=-1,r=null==n?0:n.length,i=0,s=[];++t<r;){var o=n[t];e(o,t,n)&&(s[i++]=o)}return s}(fS(n),function(e){return M8.call(n,e)}))}:hS;const tm=T8,I8=KE(Object.keys,Object);var N8=Object.prototype.hasOwnProperty;const gS=function R8(n){if(!zu(n))return I8(n);var e=[];for(var t in Object(n))N8.call(n,t)&&"constructor"!=t&&e.push(t);return e},nl=function L8(n){return Fi(n)?oS(n):gS(n)},nm=function k8(n){return dS(n,nl,tm)};var B8=Object.prototype.hasOwnProperty;const rm=ki(Rn,"DataView"),im=ki(Rn,"Promise"),io=ki(Rn,"Set"),sm=ki(Rn,"WeakMap");var pS="[object Map]",mS="[object Promise]",yS="[object Set]",vS="[object WeakMap]",bS="[object DataView]",W8=Li(rm),Y8=Li(Za),Z8=Li(im),X8=Li(io),J8=Li(sm),ji=Wr;(rm&&ji(new rm(new ArrayBuffer(1)))!=bS||Za&&ji(new Za)!=pS||im&&ji(im.resolve())!=mS||io&&ji(new io)!=yS||sm&&ji(new sm)!=vS)&&(ji=function(n){var e=Wr(n),t="[object Object]"==e?n.constructor:void 0,r=t?Li(t):"";if(r)switch(r){case W8:return bS;case Y8:return pS;case Z8:return mS;case X8:return yS;case J8:return vS}return e});const so=ji;var wS="[object Arguments]",CS="[object Array]",Yu="[object Object]",DS=Object.prototype.hasOwnProperty;const t6=function e6(n,e,t,r,i,s){var o=At(n),a=At(e),l=o?CS:so(n),c=a?CS:so(e),u=(l=l==wS?Yu:l)==Yu,d=(c=c==wS?Yu:c)==Yu,h=l==c;if(h&&eo(n)){if(!eo(e))return!1;o=!0,u=!1}if(h&&!u)return s||(s=new Qs),o||qu(n)?cS(n,e,t,r,i,s):function C8(n,e,t,r,i,s,o){switch(t){case"[object DataView]":if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(n.byteLength!=e.byteLength||!s(new Uu(n),new Uu(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return qs(+n,+e);case"[object Error]":return n.name==e.name&&n.message==e.message;case"[object RegExp]":case"[object String]":return n==e+"";case"[object Map]":var a=o8;case"[object Set]":if(a||(a=Qp),n.size!=e.size&&!(1&r))return!1;var c=o.get(n);if(c)return c==e;r|=2,o.set(n,e);var u=cS(a(n),a(e),r,i,s,o);return o.delete(n),u;case"[object Symbol]":if(em)return em.call(n)==em.call(e)}return!1}(n,e,l,t,r,i,s);if(!(1&t)){var f=u&&DS.call(n,"__wrapped__"),g=d&&DS.call(e,"__wrapped__");if(f||g){var p=f?n.value():n,m=g?e.value():e;return s||(s=new Qs),i(p,m,t,r,s)}}return!!h&&(s||(s=new Qs),function $8(n,e,t,r,i,s){var o=1&t,a=nm(n),l=a.length;if(l!=nm(e).length&&!o)return!1;for(var d=l;d--;){var h=a[d];if(!(o?h in e:B8.call(e,h)))return!1}var f=s.get(n),g=s.get(e);if(f&&g)return f==e&&g==n;var p=!0;s.set(n,e),s.set(e,n);for(var m=o;++d<l;){var v=n[h=a[d]],b=e[h];if(r)var y=o?r(b,v,h,e,n,s):r(v,b,h,n,e,s);if(!(void 0===y?v===b||i(v,b,t,r,s):y)){p=!1;break}m||(m="constructor"==h)}if(p&&!m){var w=n.constructor,D=e.constructor;w!=D&&"constructor"in n&&"constructor"in e&&!("function"==typeof w&&w instanceof w&&"function"==typeof D&&D instanceof D)&&(p=!1)}return s.delete(n),s.delete(e),p}(n,e,t,r,i,s))},om=function xS(n,e,t,r,i){return n===e||(null==n||null==e||!Ln(n)&&!Ln(e)?n!=n&&e!=e:t6(n,e,t,r,xS,i))},vr=function n6(n,e){return om(n,e)};var o6=Object.prototype.hasOwnProperty;const ES=function a6(n){if(null==n)return!0;if(Fi(n)&&(At(n)||"string"==typeof n||"function"==typeof n.splice||eo(n)||qu(n)||Xs(n)))return!n.length;var e=so(n);if("[object Map]"==e||"[object Set]"==e)return!n.size;if(zu(n))return!gS(n).length;for(var t in n)if(o6.call(n,t))return!1;return!0};var y6=Object.getOwnPropertySymbols?function(n){for(var e=[];n;)zp(e,tm(n)),n=Wp(n);return e}:hS;const SS=y6,C6=function w6(n){return dS(n,no,SS)};var x6=Object.prototype.hasOwnProperty;var M6=/\w*$/;var _S=gn?gn.prototype:void 0,AS=_S?_S.valueOf:void 0;const Q6=function K6(n,e,t){var r=n.constructor;switch(e){case"[object ArrayBuffer]":return qp(n);case"[object Boolean]":case"[object Date]":return new r(+n);case"[object DataView]":return function _6(n,e){var t=e?qp(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}(n,t);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return ZE(n,t);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(n);case"[object RegExp]":return function T6(n){var e=new n.constructor(n.source,M6.exec(n));return e.lastIndex=n.lastIndex,e}(n);case"[object Symbol]":return function I6(n){return AS?Object(AS.call(n)):{}}(n)}};var MS=to&&to.isMap;const i5=MS?Ka(MS):function t5(n){return Ln(n)&&"[object Map]"==so(n)};var TS=to&&to.isSet;const c5=TS?Ka(TS):function o5(n){return Ln(n)&&"[object Set]"==so(n)};var PS="[object Arguments]",IS="[object Function]",OS="[object Object]",Se={};Se[PS]=Se["[object Array]"]=Se["[object ArrayBuffer]"]=Se["[object DataView]"]=Se["[object Boolean]"]=Se["[object Date]"]=Se["[object Float32Array]"]=Se["[object Float64Array]"]=Se["[object Int8Array]"]=Se["[object Int16Array]"]=Se["[object Int32Array]"]=Se["[object Map]"]=Se["[object Number]"]=Se[OS]=Se["[object RegExp]"]=Se["[object Set]"]=Se["[object String]"]=Se["[object Symbol]"]=Se["[object Uint8Array]"]=Se["[object Uint8ClampedArray]"]=Se["[object Uint16Array]"]=Se["[object Uint32Array]"]=!0,Se["[object Error]"]=Se[IS]=Se["[object WeakMap]"]=!1;const NS=function Zu(n,e,t,r,i,s){var o,a=1&e,l=2&e,c=4&e;if(t&&(o=i?t(n,r,i,s):t(n)),void 0!==o)return o;if(!Ue(n))return n;var u=At(n);if(u){if(o=function E6(n){var e=n.length,t=new n.constructor(e);return e&&"string"==typeof n[0]&&x6.call(n,"index")&&(t.index=n.index,t.input=n.input),t}(n),!a)return XE(n,o)}else{var d=so(n),h=d==IS||"[object GeneratorFunction]"==d;if(eo(n))return YE(n,a);if(d==OS||d==PS||h&&!i){if(o=l||h?{}:QE(n),!a)return l?function v6(n,e){return el(n,SS(n),e)}(n,function h6(n,e){return n&&el(e,no(e),n)}(o,n)):function g6(n,e){return el(n,tm(n),e)}(n,function u6(n,e){return n&&el(e,nl(e),n)}(o,n))}else{if(!Se[d])return i?n:{};o=Q6(n,d,a)}}s||(s=new Qs);var f=s.get(n);if(f)return f;s.set(n,o),c5(n)?n.forEach(function(m){o.add(Zu(m,e,t,m,n,s))}):i5(n)&&n.forEach(function(m,v){o.set(v,Zu(m,e,t,v,n,s))});var p=u?void 0:(c?l?C6:nm:l?no:nl)(n);return function l6(n,e){for(var t=-1,r=null==n?0:n.length;++t<r&&!1!==e(n[t],t,n););}(p||n,function(m,v){p&&(m=n[v=m]),Up(o,v,Zu(m,e,t,v,n,s))}),o},am=function F5(n){return NS(n,4)},Be=function $5(n){return NS(n,5)};var RS=Object.prototype,V5=RS.hasOwnProperty,H5=ro(function(n,e){n=Object(n);var t=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&tl(e[0],e[1],i)&&(r=1);++t<r;)for(var s=e[t],o=no(s),a=-1,l=o.length;++a<l;){var c=o[a],u=n[c];(void 0===u||qs(u,RS[c])&&!V5.call(n,c))&&(n[c]=s[c])}return n});const U5=H5,z5=function LS(n,e,t,r,i,s){return Ue(n)&&Ue(e)&&(s.set(e,n),Xp(n,e,void 0,LS,s),s.delete(e)),n};var G5=lS(function(n,e,t,r){Xp(n,e,t,r)});const q5=G5;var W5=ro(function(n){return n.push(void 0,z5),BE(q5,void 0,n)});const kS=W5,Z5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])},K5=/^\s*class\s+/.test(`${class J5{}}`)||/^\s*class\s*\{/.test(`${class{}}`);function lm(n,e){let t;return K5?t=class extends e{}:(t=function(){return e.apply(this,arguments)},function X5(n,e){function t(){this.constructor=n}Z5(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(t,e)),Object.defineProperty(t,"name",{value:n}),t}function FS(n){return"__proto__"===n}function cm(n,e,t="/"){let r;const i=Array.isArray(e)?e:e.split(t);if(i.length)for(r=n;i.length;){const s=i.shift();if(Object(r)!==r||!s||!(s in r))return;r=r[s]}return r}function rl(n,e,t,r="/"){const i=Array.isArray(e)?e:e.split(r),s=i.pop();if(s&&!FS(s)){let o=n;i.forEach(a=>{FS(a)||(null==o[a]&&(o[a]={}),o=o[a])}),o[s]=t}return n}function jS(n,e,t="/"){const r=Array.isArray(e)?e.slice():e.split(t),i=r.pop();if(i)if(r.length>0){const s=cm(n,r);s&&delete s[i]}else delete n[i];return n}class pn extends NV{}(function(n){n.dispose=qr.dispose})(pn||(pn={})),function Y5(n,...e){e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(r=>{"constructor"!==r&&Object.defineProperty(n.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r))})})}(pn,qr);const iG=function rG(n){return n!=n},BS=function cG(n,e){return!(null==n||!n.length)&&function aG(n,e,t){return e==e?function sG(n,e,t){for(var r=t-1,i=n.length;++r<i;)if(n[r]===e)return r;return-1}(n,e,t):function tG(n,e,t,r){for(var i=n.length,s=t+(r?1:-1);r?s--:++s<i;)if(e(n[s],s,n))return s;return-1}(n,iG,t)}(n,e,0)>-1},$S=function uG(n,e,t){for(var r=-1,i=null==n?0:n.length;++r<i;)if(t(e,n[r]))return!0;return!1};var gG=io&&1/Qp(new io([,-0]))[1]==1/0?function(n){return new io(n)}:function dG(){};const pG=gG,VS=function yG(n,e,t){var r=-1,i=BS,s=n.length,o=!0,a=[],l=a;if(t)o=!1,i=$S;else if(s>=200){var c=e?null:pG(n);if(c)return Qp(c);o=!1,i=Kp,l=new Jp}else l=e?[]:a;e:for(;++r<s;){var u=n[r],d=e?e(u):u;if(u=t||0!==u?u:0,o&&d==d){for(var h=l.length;h--;)if(l[h]===d)continue e;e&&l.push(d),a.push(u)}else i(l,d,t)||(l!==a&&l.push(d),a.push(u))}return a},HS=function vG(n){return n&&n.length?VS(n):[]};var bG=ro(function(n){return VS(Hu(n,1,Gu,!0))});const US=bG;var DG=Math.floor,xG=Math.min;const zS=function EG(n,e,t,r){var i=0,s=null==n?0:n.length;if(0===s)return 0;for(var o=(e=t(e))!=e,a=null===e,l=Xn(e),c=void 0===e;i<s;){var u=DG((i+s)/2),d=t(n[u]),h=void 0!==d,f=null===d,g=d==d,p=Xn(d);if(o)var m=r||g;else m=c?g&&(r||h):a?g&&h&&(r||!f):l?g&&h&&!f&&(r||!p):!f&&!p&&(r?d<=e:d<e);m?i=u+1:s=u}return xG(s,4294967294)},PG=function TG(n,e){return function AG(n,e,t){var r=0,i=null==n?r:n.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var s=r+i>>>1,o=n[s];null!==o&&!Xn(o)&&(t?o<=e:o<e)?r=s+1:i=s}return i}return zS(n,e,Js,t)}(n,e)},GS=function LG(n){return n==n&&!Ue(n)},qS=function jG(n,e){return function(t){return null!=t&&t[n]===e&&(void 0!==e||n in Object(t))}},$G=function BG(n){var e=function kG(n){for(var e=nl(n),t=e.length;t--;){var r=e[t],i=n[r];e[t]=[r,i,GS(i)]}return e}(n);return 1==e.length&&e[0][2]?qS(e[0][0],e[0][1]):function(t){return t===n||function NG(n,e,t,r){var i=t.length,s=i,o=!r;if(null==n)return!s;for(n=Object(n);i--;){var a=t[i];if(o&&a[2]?a[1]!==n[a[0]]:!(a[0]in n))return!1}for(;++i<s;){var l=(a=t[i])[0],c=n[l],u=a[1];if(o&&a[2]){if(void 0===c&&!(l in n))return!1}else{var d=new Qs;if(r)var h=r(c,u,l,n,e,d);if(!(void 0===h?om(u,c,3,r,d):h))return!1}}return!0}(t,n,e)}},qG=function GG(n,e){return jp(n)&&GS(e)?qS(Ja(n),e):function(t){var r=function VG(n,e,t){var r=null==n?void 0:Bu(n,e);return void 0===r?t:r}(t,n);return void 0===r&&r===e?kE(t,n):om(e,r,3)}},KG=function JG(n){return jp(n)?function WG(n){return function(e){return e?.[n]}}(Ja(n)):function ZG(n){return function(e){return Bu(e,n)}}(n)},um=function QG(n){return"function"==typeof n?n:null==n?Js:"object"==typeof n?At(n)?qG(n[0],n[1]):$G(n):KG(n)};var s4=function i4(n,e){return function(t,r){if(null==t)return t;if(!Fi(t))return n(t,r);for(var i=t.length,s=e?i:-1,o=Object(t);(e?s--:++s<i)&&!1!==r(o[s],s,o););return t}}(function n4(n,e){return n&&UE(n,e,nl)});const WS=s4,d4=function u4(n,e){if(n!==e){var t=void 0!==n,r=null===n,i=n==n,s=Xn(n),o=void 0!==e,a=null===e,l=e==e,c=Xn(e);if(!a&&!c&&!s&&n>e||s&&o&&l&&!a&&!c||r&&o&&l||!t&&l||!i)return 1;if(!r&&!s&&!c&&n<e||c&&t&&i&&!r&&!s||a&&t&&i||!o&&i||!l)return-1}return 0},p4=function g4(n,e,t){e=e.length?Xa(e,function(s){return At(s)?function(o){return Bu(o,1===s.length?s[0]:s)}:s}):[Js];var r=-1;e=Xa(e,Ka(um));var i=function o4(n,e){var t=-1,r=Fi(n)?Array(n.length):[];return WS(n,function(i,s,o){r[++t]=e(i,s,o)}),r}(n,function(s,o,a){return{criteria:Xa(e,function(c){return c(s)}),index:++r,value:s}});return function l4(n,e){var t=n.length;for(n.sort(e);t--;)n[t]=n[t].value;return n}(i,function(s,o){return function h4(n,e,t){for(var r=-1,i=n.criteria,s=e.criteria,o=i.length,a=t.length;++r<o;){var l=d4(i[r],s[r]);if(l)return r>=a?l:l*("desc"==t[r]?-1:1)}return n.index-e.index}(s,o,t)})};var m4=ro(function(n,e){if(null==n)return[];var t=e.length;return t>1&&tl(n,e[0],e[1])?e=[]:t>2&&tl(e[0],e[1],e[2])&&(e=[e[0]]),p4(n,Hu(e,1),[])});const y4=m4,b4=function v4(n,e,t,r){for(var i=-1,s=null==n?0:n.length;++i<s;){var o=n[i];e(r,o,t(o),n)}return r},C4=function w4(n,e,t,r){return WS(n,function(i,s,o){e(r,i,t(i),o)}),r};var S4=Object.prototype.hasOwnProperty,_4=function D4(n,e){return function(t,r){var i=At(t)?b4:C4,s=e?e():{};return i(t,n,um(r),s)}}(function(n,e,t){S4.call(n,t)?n[t].push(e):Vu(n,t,[e])});const YS=_4;var P4=ro(function(n,e){return Gu(n)?function M4(n,e,t,r){var i=-1,s=BS,o=!0,a=n.length,l=[],c=e.length;if(!a)return l;t&&(e=Xa(e,Ka(t))),r?(s=$S,o=!1):e.length>=200&&(s=Kp,o=!1,e=new Jp(e));e:for(;++i<a;){var u=n[i],d=null==t?u:t(u);if(u=r||0!==u?u:0,o&&d==d){for(var h=c;h--;)if(e[h]===d)continue e;l.push(u)}else s(e,d,r)||l.push(u)}return l}(n,Hu(e,1,Gu,!0)):[]});const I4=P4,L4=function R4(n,e){return n>e},F4=function k4(n){return n&&n.length?function O4(n,e,t){for(var r=-1,i=n.length;++r<i;){var s=n[r],o=e(s);if(null!=o&&(void 0===a?o==o&&!Xn(o):t(o,a)))var a=o,l=s}return l}(n,Js,L4):void 0},q4=function H4(n){return function(e){return n?.[e]}}({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"});var W4=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Q4=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var nq=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var sq=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var ZS="\\ud800-\\udfff",XS="\\u2700-\\u27bf",JS="a-z\\xdf-\\xf6\\xf8-\\xff",KS="A-Z\\xc0-\\xd6\\xd8-\\xde",QS="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",t_="["+QS+"]",n_="\\d+",vq="["+XS+"]",r_="["+JS+"]",i_="[^"+ZS+QS+n_+XS+JS+KS+"]",s_="(?:\\ud83c[\\udde6-\\uddff]){2}",o_="[\\ud800-\\udbff][\\udc00-\\udfff]",oo="["+KS+"]",a_="(?:"+r_+"|"+i_+")",xq="(?:"+oo+"|"+i_+")",l_="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",c_="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",u_="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",d_="[\\ufe0e\\ufe0f]?",Aq=d_+u_+"(?:\\u200d(?:"+["[^"+ZS+"]",s_,o_].join("|")+")"+d_+u_+")*",Mq="(?:"+[vq,s_,o_].join("|")+")"+Aq,Tq=RegExp([oo+"?"+r_+"+"+l_+"(?="+[t_,oo,"$"].join("|")+")",xq+"+"+c_+"(?="+[t_,oo+a_,"$"].join("|")+")",oo+"?"+a_+"+"+l_,oo+"+"+c_,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",n_,Mq].join("|"),"g");const Nq=function Oq(n,e,t){return n=Zs(n),void 0===(e=t?void 0:e)?function oq(n){return sq.test(n)}(n)?function Pq(n){return n.match(Tq)||[]}(n):function rq(n){return n.match(nq)||[]}(n):n.match(e)||[]};var Lq=RegExp("['\u2019]","g");const Xu=function kq(n){return function(e){return function $4(n,e,t,r){var i=-1,s=null==n?0:n.length;for(r&&s&&(t=n[++i]);++i<s;)t=e(t,n[i],i,n);return t}(Nq(function eq(n){return(n=Zs(n))&&n.replace(W4,q4).replace(Q4,"")}(e).replace(Lq,"")),n,"")}},$q=function Bq(n,e,t){var r=n.length;return t=void 0===t?r:t,!e&&t>=r?n:function Fq(n,e,t){var r=-1,i=n.length;e<0&&(e=-e>i?0:i+e),(t=t>i?i:t)<0&&(t+=i),i=e>t?0:t-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=n[r+e];return s}(n,e,t)};var Yq=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");const h_=function Zq(n){return Yq.test(n)};var f_="\\ud800-\\udfff",rW="["+f_+"]",dm="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",hm="\\ud83c[\\udffb-\\udfff]",g_="[^"+f_+"]",p_="(?:\\ud83c[\\udde6-\\uddff]){2}",m_="[\\ud800-\\udbff][\\udc00-\\udfff]",y_="(?:"+dm+"|"+hm+")?",v_="[\\ufe0e\\ufe0f]?",aW=v_+y_+"(?:\\u200d(?:"+[g_,p_,m_].join("|")+")"+v_+y_+")*",lW="(?:"+[g_+dm+"?",dm,p_,m_,rW].join("|")+")",cW=RegExp(hm+"(?="+hm+")|"+lW+aW,"g");const fW=function hW(n){return h_(n)?function uW(n){return n.match(cW)||[]}(n):function Xq(n){return n.split("")}(n)},b_=function gW(n){return function(e){e=Zs(e);var t=h_(e)?fW(e):void 0,r=t?t[0]:e.charAt(0),i=t?$q(t,1).join(""):e.slice(1);return r[n]()+i}},il=b_("toUpperCase");var mW=Xu(function(n,e,t){return n+(t?" ":"")+il(e)});const w_=mW;var bW=Xu(function(n,e,t){return e=e.toLowerCase(),n+(t?function yW(n){return il(Zs(n).toLowerCase())}(e):e)});const sl=bW;var wW=Xu(function(n,e,t){return n+(t?" ":"")+e.toUpperCase()});const CW=wW;var DW=Xu(function(n,e,t){return n+(t?" ":"")+e.toLowerCase()});const fm=DW,EW=b_("toLowerCase"),Bi=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},C_=Bi(n=>n.replace(/\B([A-Z])/g,"-$1").toLowerCase()),gm=Bi(n=>w_(sl(n)).replace(/ /g,""));function pm(n){let e=2166136261,t=!1,r=n;for(let i=0,s=r.length;i<s;i+=1){let o=r.charCodeAt(i);o>127&&!t&&(r=unescape(encodeURIComponent(r)),o=r.charCodeAt(i),t=!0),e^=o,e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24)}return e>>>0}function mm(){let n="";const e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";for(let t=0,r=e.length;t<r;t+=1){const i=e[t],s=16*Math.random()|0;n+=("x"===i?s:"y"===i?3&s|8:i).toString(16)}return n}function _W(n,e,t){let r=new Array(e.length+1),i=new Array(e.length+1);const s=t+1;for(let a=0;a<=e.length;a+=1)r[a]=a;for(let a=1;a<=n.length;a+=1){const l=n.charCodeAt(a-1),c=a>t?a-t:1,u=e.length>t+a?t+a:e.length;i[0]=a;let d=a;for(let f=1;f<c;f+=1)i[f]=s;for(let f=c;f<=u;f+=1){const g=l===e.charCodeAt(f-1)?r[f-1]:Math.min(r[f]+1,i[f-1]+1,r[f-1]+2);i[f]=g,d=Math.min(d,g)}for(let f=u+1;f<=e.length;f+=1)i[f]=s;if(d>t)return;const h=r;r=i,i=h}const o=r[e.length];return o>t?void 0:o}Bi(n=>CW(n).replace(/ /g,"_")),Bi(n=>fm(n).replace(/ /g,".")),Bi(n=>fm(n).replace(/ /g,"/")),Bi(n=>il(fm(n))),Bi(n=>w_(sl(n)));const D_=function MW(n){return"number"==typeof n||Ln(n)&&"[object Number]"==Wr(n)},mn=function IW(n,e,t){return void 0===t&&(t=e,e=void 0),void 0!==t&&(t=(t=zs(t))==t?t:0),void 0!==e&&(e=(e=zs(e))==e?e:0),function TW(n,e,t){return n==n&&(void 0!==t&&(n=n<=t?n:t),void 0!==e&&(n=n>=e?n:e)),n}(zs(n),e,t)};function br(n){return"string"==typeof n&&"%"===n.slice(-1)}function wr(n,e){if(null==n)return 0;let t;if("string"==typeof n){if(t=parseFloat(n),br(n)&&(t/=100,Number.isFinite(t)))return t*e}else t=n;return Number.isFinite(t)?t>0&&t<1?t*e:t:0}function $i(n){if("object"==typeof n){let t=0,r=0,i=0,s=0;return null!=n.vertical&&Number.isFinite(n.vertical)&&(r=s=n.vertical),null!=n.horizontal&&Number.isFinite(n.horizontal)&&(i=t=n.horizontal),null!=n.left&&Number.isFinite(n.left)&&(t=n.left),null!=n.top&&Number.isFinite(n.top)&&(r=n.top),null!=n.right&&Number.isFinite(n.right)&&(i=n.right),null!=n.bottom&&Number.isFinite(n.bottom)&&(s=n.bottom),{top:r,right:i,bottom:s,left:t}}let e=0;return null!=n&&Number.isFinite(n)&&(e=n),{top:e,right:e,bottom:e,left:e}}let ym=!1,x_=!1,E_=!1,S_=!1,__=!1,A_=!1,M_=!1,T_=!1,P_=!1,I_=!1,O_=!1,N_=!1,R_=!1,L_=!1,k_=!1,F_=!1;if("object"==typeof navigator){const n=navigator.userAgent;ym=n.indexOf("Macintosh")>=0,x_=!!n.match(/(iPad|iPhone|iPod)/g),E_=n.indexOf("Windows")>=0,S_=n.indexOf("MSIE")>=0,__=!!n.match(/Trident\/7\./),A_=!!n.match(/Edge\//),M_=n.indexOf("Mozilla/")>=0&&n.indexOf("MSIE")<0&&n.indexOf("Edge/")<0,P_=n.indexOf("Chrome/")>=0&&n.indexOf("Edge/")<0,I_=n.indexOf("Opera/")>=0||n.indexOf("OPR/")>=0,O_=n.indexOf("Firefox/")>=0,N_=n.indexOf("AppleWebKit/")>=0&&n.indexOf("Chrome/")<0&&n.indexOf("Edge/")<0,"object"==typeof document&&(F_=!document.createElementNS||"[object SVGForeignObjectElement]"!=`${document.createElementNS("http://www.w3.org/2000/svg","foreignObject")}`||n.indexOf("Opera/")>=0)}if("object"==typeof window&&(T_=null!=window.chrome&&null!=window.chrome.app&&null!=window.chrome.app.runtime,L_=null!=window.PointerEvent&&!ym),"object"==typeof document){R_="ontouchstart"in document.documentElement;try{const n=Object.defineProperty({},"passive",{get(){k_=!0}}),e=document.createElement("div");e.addEventListener&&e.addEventListener("click",()=>{},n)}catch{}}var Yr;(function(n){n.IS_MAC=ym,n.IS_IOS=x_,n.IS_WINDOWS=E_,n.IS_IE=S_,n.IS_IE11=__,n.IS_EDGE=A_,n.IS_NETSCAPE=M_,n.IS_CHROME_APP=T_,n.IS_CHROME=P_,n.IS_OPERA=I_,n.IS_FIREFOX=O_,n.IS_SAFARI=N_,n.SUPPORT_TOUCH=R_,n.SUPPORT_POINTER=L_,n.SUPPORT_PASSIVE=k_,n.NO_FOREIGNOBJECT=F_,n.SUPPORT_FOREIGNOBJECT=!n.NO_FOREIGNOBJECT})(Yr||(Yr={})),function(n){function e(){const s=window.module;return null!=s&&null!=s.hot&&null!=s.hot.status?s.hot.status():"unkonwn"}n.getHMRStatus=e,n.isApplyingHMR=function t(){return"apply"===e()};const r={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};n.isEventSupported=function i(s){const o=document.createElement(r[s]||"div"),a=`on${s}`;let l=a in o;return l||(o.setAttribute(a,"return;"),l="function"==typeof o[a]),l}}(Yr||(Yr={}));const vm=/[\t\r\n\f]/g,bm=/\S+/g,ao=n=>` ${n} `;function lo(n){return n&&n.getAttribute&&n.getAttribute("class")||""}function Vi(n,e){if(null==n||null==e)return!1;const t=ao(lo(n)),r=ao(e);return 1===n.nodeType&&t.replace(vm," ").includes(r)}function he(n,e){if(null!=n&&null!=e){if("function"==typeof e)return he(n,e(lo(n)));if("string"==typeof e&&1===n.nodeType){const t=e.match(bm)||[],r=ao(lo(n)).replace(vm," ");let i=t.reduce((s,o)=>s.indexOf(ao(o))<0?`${s}${o} `:s,r);i=i.trim(),r!==i&&n.setAttribute("class",i)}}}function yn(n,e){if(null!=n){if("function"==typeof e)return yn(n,e(lo(n)));if((!e||"string"==typeof e)&&1===n.nodeType){const t=(e||"").match(bm)||[],r=ao(lo(n)).replace(vm," ");let i=t.reduce((s,o)=>{const a=ao(o);return s.indexOf(a)>-1?s.replace(a," "):s},r);i=e?i.trim():"",r!==i&&n.setAttribute("class",i)}}}function j_(n,e,t){if(null!=n&&null!=e){if(null!=t&&"string"==typeof e)return void(t?he(n,e):yn(n,e));if("function"==typeof e)return j_(n,e(lo(n),t),t);"string"==typeof e&&(e.match(bm)||[]).forEach(i=>{Vi(n,i)?yn(n,i):he(n,i)})}}let B_=0;function wm(n){return(null==n.id||""===n.id)&&(n.id=function OW(){return B_+=1,`v${B_}`}()),n.id}function Zr(n){return null!=n&&"function"==typeof n.getScreenCTM&&n instanceof SVGElement}const dt={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"};function V_(n,e=document){return e.createElement(n)}function Cm(n,e=dt.xhtml,t=document){return t.createElementNS(e,n)}function Cr(n,e=document){return Cm(n,dt.svg,e)}function Ju(n){if(n){const t=`<svg xmlns="${dt.svg}" xmlns:xlink="${dt.xlink}" version="1.1">${n}</svg>`,{documentElement:r}=function NW(n,e={}){let t;try{const r=new DOMParser;null!=e.async&&(r.async=e.async),t=r.parseFromString(n,e.mimeType||"text/xml")}catch{t=void 0}if(!t||t.getElementsByTagName("parsererror").length)throw new Error(`Invalid XML: ${n}`);return t}(t,{async:!1});return r}const e=document.createElementNS(dt.svg,"svg");return e.setAttributeNS(dt.xmlns,"xmlns:xlink",dt.xlink),e.setAttribute("version","1.1"),e}function Dm(n){let e=0,t=n.previousSibling;for(;t;)1===t.nodeType&&(e+=1),t=t.previousSibling;return e}function H_(n,e,t){const r=n.ownerSVGElement;let i=n.parentNode;for(;i&&i!==t&&i!==r;){if(Vi(i,e))return i;i=i.parentNode}return null}function U_(n,e){const t=e&&e.parentNode;return n===t||!!(t&&1===t.nodeType&&16&n.compareDocumentPosition(t))}function co(n){n&&(Array.isArray(n)?n:[n]).forEach(t=>{t.parentNode&&t.parentNode.removeChild(t)})}function ol(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function al(n,e){(Array.isArray(e)?e:[e]).forEach(r=>{null!=r&&n.appendChild(r)})}function xm(n,e){const t=n.parentNode;t&&(Array.isArray(e)?e:[e]).forEach(i=>{null!=i&&t.insertBefore(i,n)})}function z_(n){try{return n instanceof HTMLElement}catch{return"object"==typeof n&&1===n.nodeType&&"object"==typeof n.style&&"object"==typeof n.ownerDocument}}const G_=["viewBox","attributeName","attributeType","repeatCount"];function q_(n,e){const t=Y_(e);t.ns?n.hasAttributeNS(t.ns,t.local)&&n.removeAttributeNS(t.ns,t.local):n.hasAttribute(e)&&n.removeAttribute(e)}function Em(n,e,t){if(null==t)return q_(n,e);const r=Y_(e);r.ns&&"string"==typeof t?n.setAttributeNS(r.ns,e,t):"id"===e?n.id=`${t}`:n.setAttribute(e,`${t}`)}function W_(n,e){Object.keys(e).forEach(t=>{Em(n,t,e[t])})}function we(n,e,t){if(null==e){const r=n.attributes,i={};for(let s=0;s<r.length;s+=1)i[r[s].name]=r[s].value;return i}if("string"==typeof e&&void 0===t)return n.getAttribute(e);"object"==typeof e?W_(n,e):Em(n,e,t)}function Y_(n){if(-1!==n.indexOf(":")){const e=n.split(":");return{ns:dt[e[0]],local:e[1]}}return{ns:null,local:n}}function ll(n){const e={};return Object.keys(n).forEach(t=>{const r=G_.includes(t)?t:C_(t);e[r]=n[t]}),e}function Ku(n){const e={};return n.split(";").forEach(r=>{const i=r.trim();if(i){const s=i.split("=");s.length&&(e[s[0].trim()]=s[1]?s[1].trim():"")}}),e}function Sm(n,e){return Object.keys(e).forEach(t=>{if("class"===t)n[t]=n[t]?`${n[t]} ${e[t]}`:e[t];else if("style"===t){const r="object"==typeof n[t],i="object"==typeof e[t];let s,o;r&&i?(s=n[t],o=e[t]):r?(s=n[t],o=Ku(e[t])):i?(s=Ku(n[t]),o=e[t]):(s=Ku(n[t]),o=Ku(e[t])),n[t]=Sm(s,o)}else n[t]=e[t]}),n}function VW(n,e,t={}){const r=t.offset||0,i=[],s=[];let o,a,l=null;for(let c=0;c<n.length;c+=1){o=s[c]=n[c];for(let u=0,d=e.length;u<d;u+=1){const h=e[u];c>=h.start+r&&c<h.end+r&&("string"==typeof o?o=s[c]={t:n[c],attrs:h.attrs}:o.attrs=Sm(Sm({},o.attrs),h.attrs),t.includeAnnotationIndices&&(null==o.annotations&&(o.annotations=[]),o.annotations.push(u)))}a=s[c-1],a?Ue(o)&&Ue(a)?JSON.stringify(o.attrs)===JSON.stringify(a.attrs)?l.t+=o.t:(i.push(l),l=o):Ue(o)||Ue(a)?(i.push(l),l=o):l=(l||"")+o:l=o}return null!=l&&i.push(l),i}var Z_;let Hi;!function(n){function e(c){const u="data:";return c.substr(0,u.length)===u}function r(c){let u=c.replace(/\s/g,"");u=decodeURIComponent(u);const d=u.indexOf(","),h=u.slice(0,d),f=h.split(":")[1].split(";")[0],g=u.slice(d+1);let p;p=h.indexOf("base64")>=0?atob(g):unescape(encodeURIComponent(g));const m=new Uint8Array(p.length);for(let v=0;v<p.length;v+=1)m[v]=p.charCodeAt(v);return new Blob([m],{type:f})}function i(c,u){const d=window.navigator.msSaveBlob;if(d)d(c,u);else{const h=window.URL.createObjectURL(c),f=document.createElement("a");f.href=h,f.download=u,document.body.appendChild(f),f.click(),document.body.removeChild(f),window.URL.revokeObjectURL(h)}}function a(c){const u=parseFloat(c);return Number.isNaN(u)?null:u}n.isDataUrl=e,n.imageToDataUri=function t(c,u){if(!c||e(c))return void setTimeout(()=>u(null,c));const d=()=>{u(new Error(`Failed to load image: ${c}`))},h=window.FileReader?g=>{if(200===g.status){const p=new FileReader;p.onload=m=>{u(null,m.target.result)},p.onerror=d,p.readAsDataURL(g.response)}else d()}:g=>{if(200===g.status){let m=c.split(".").pop()||"png";"svg"===m&&(m="svg+xml");const v=`data:image/${m};base64,`,b=new Uint8Array(g.response),y=v+btoa((m=>{const b=[];for(let y=0;y<m.length;y+=32768)b.push(String.fromCharCode.apply(null,m.subarray(y,y+32768)));return b.join("")})(b));u(null,y)}else d()},f=new XMLHttpRequest;f.responseType=window.FileReader?"blob":"arraybuffer",f.open("GET",c,!0),f.addEventListener("error",d),f.addEventListener("load",()=>h(f)),f.send()},n.dataUriToBlob=r,n.downloadBlob=i,n.downloadDataUri=function s(c,u){i(r(c),u)},n.svgToDataUrl=function l(c,u={}){let d=null;const h=y=>(null==d&&(d=function o(c){const u=c.match(/<svg[^>]*viewBox\s*=\s*(["']?)(.+?)\1[^>]*>/i);return u&&u[2]?u[2].replace(/\s+/," ").split(" "):null}(c)),null!=d?a(d[y]):null),f=y=>{const w=c.match(y);return w&&w[2]?a(w[2]):null};let g=u.width;if(null==g&&(g=f(/<svg[^>]*width\s*=\s*(["']?)(.+?)\1[^>]*>/i)),null==g&&(g=h(2)),null==g)throw new Error("Can not parse width from svg string");let p=u.height;if(null==p&&(p=f(/<svg[^>]*height\s*=\s*(["']?)(.+?)\1[^>]*>/i)),null==p&&(p=h(3)),null==p)throw new Error("Can not parse height from svg string");return`data:image/svg+xml,${encodeURIComponent(c).replace(/'/g,"%27").replace(/"/g,"%22")}`}}(Z_||(Z_={}));const UW={px:n=>n,mm:n=>Hi*n,cm:n=>Hi*n*10,in:n=>Hi*n*25.4,pt:n=>Hi*(25.4*n/72),pc:n=>Hi*(25.4*n/6)};var X_;!function(n){function e(r,i,s){const o=document.createElement("div"),a=o.style;a.display="inline-block",a.position="absolute",a.left="-15000px",a.top="-15000px",a.width=r+(s||"px"),a.height=i+(s||"px"),document.body.appendChild(o);const l=o.getBoundingClientRect(),c={width:l.width||0,height:l.height||0};return document.body.removeChild(o),c}n.measure=e,n.toPx=function t(r,i){null==Hi&&(Hi=e("1","1","mm").width);const s=i?UW[i]:null;return s?s(r):r}}(X_||(X_={}));const zW=/-(.)/g,_m={},J_=["webkit","ms","moz","o"],K_=document?document.createElement("div").style:{};function Am(n,e){const t=n.ownerDocument&&n.ownerDocument.defaultView&&n.ownerDocument.defaultView.opener?n.ownerDocument.defaultView.getComputedStyle(n,null):window.getComputedStyle(n,null);return t&&e?t.getPropertyValue(e)||t[e]:t}document.selection||window;const WW={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function cl(n,e,t){if("string"!=typeof e)for(const r in e)cl(n,r,e[r]);else{const r=function YW(n){return/^--/.test(n)}(e);if(r||(e=function Q_(n){const e=function GW(n){return n.replace(zW,(e,t)=>t.toUpperCase())}(n);if(null==_m[e]){const t=e.charAt(0).toUpperCase()+e.slice(1);_m[e]=e in K_?e:function qW(n){for(let e=0;e<J_.length;e+=1){const t=J_[e]+n;if(t in K_)return t}return null}(t)}return _m[e]}(e)),void 0===t)return function Qu(n,e,t){const r=window.getComputedStyle(n,null);return t?r.getPropertyValue(e)||void 0:r[e]||n.style[e]}(n,e,r);r||(t=function ZW(n,e){return WW[n]||"number"!=typeof e?e:`${e}px`}(e,t));const i=n.style;r?i.setProperty(e,t):i[e]=t}}const td=new WeakMap;function eA(n,e){const t=sl(e),r=td.get(n);if(r)return r[t]}function Ui(n,e,t){if(!e){const r={};return Object.keys(td).forEach(i=>{r[i]=eA(n,i)}),r}if("string"==typeof e)return void 0===t?eA(n,e):void function XW(n,e,t){const r=sl(e),i=td.get(n);i?i[r]=t:td.set(n,{[r]:t})}(n,e,t);for(const r in e)Ui(n,r,e[r])}class W{get[Symbol.toStringTag](){return W.toStringTag}get type(){return this.node.nodeName}get id(){return this.node.id}set id(e){this.node.id=e}constructor(e,t,r){if(!e)throw new TypeError("Invalid element to create vector");let i;if(W.isVector(e))i=e.node;else if("string"==typeof e)if("svg"===e.toLowerCase())i=Ju();else if("<"===e[0]){const s=Ju(e);i=document.importNode(s.firstChild,!0)}else i=document.createElementNS(dt.svg,e);else i=e;this.node=i,t&&this.setAttributes(t),r&&this.append(r)}transform(e,t){return null==e?ho(this.node):(ho(this.node,e,t),this)}translate(e,t=0,r={}){return null==e?cA(this.node):(cA(this.node,e,t,r),this)}rotate(e,t,r,i={}){return null==e?Pm(this.node):(Pm(this.node,e,t,r,i),this)}scale(e,t){return null==e?Im(this.node):(Im(this.node,e,t),this)}getTransformToElement(e){const t=W.toNode(e);return fl(this.node,t)}removeAttribute(e){return q_(this.node,e),this}getAttribute(e){return function $W(n,e){return n.getAttribute(e)}(this.node,e)}setAttribute(e,t){return Em(this.node,e,t),this}setAttributes(e){return W_(this.node,e),this}attr(e,t){return null==e?we(this.node):"string"==typeof e&&void 0===t?we(this.node,e):("object"==typeof e?we(this.node,e):we(this.node,e,t),this)}svg(){return this.node instanceof SVGSVGElement?this:W.create(this.node.ownerSVGElement)}defs(){const e=this.svg()||this,t=e.node.getElementsByTagName("defs")[0];return t?W.create(t):W.create("defs").appendTo(e)}text(e,t={}){return rA(this.node,e,t),this}tagName(){return function RW(n,e=!0){const t=n.nodeName;return e?t.toLowerCase():t.toUpperCase()}(this.node)}clone(){return W.create(this.node.cloneNode(!0))}remove(){return co(this.node),this}empty(){return ol(this.node),this}append(e){return al(this.node,W.toNodes(e)),this}appendTo(e){return function jW(n,e){e?.appendChild(n)}(this.node,W.isVector(e)?e.node:e),this}prepend(e){return function FW(n,e){const t=n.firstChild;t?xm(t,e):al(n,e)}(this.node,W.toNodes(e)),this}before(e){return xm(this.node,W.toNodes(e)),this}replace(e){return this.node.parentNode&&this.node.parentNode.replaceChild(W.toNode(e),this.node),W.create(e)}first(){return this.node.firstChild?W.create(this.node.firstChild):null}last(){return this.node.lastChild?W.create(this.node.lastChild):null}get(e){const t=this.node.childNodes[e];return t?W.create(t):null}indexOf(e){return Array.prototype.slice.call(this.node.childNodes).indexOf(W.toNode(e))}find(e){const t=[],r=function LW(n,e){return n.querySelectorAll(e)}(this.node,e);if(r)for(let i=0,s=r.length;i<s;i+=1)t.push(W.create(r[i]));return t}findOne(e){const t=function kW(n,e){return n.querySelector(e)}(this.node,e);return t?W.create(t):null}findParentByClass(e,t){const r=H_(this.node,e,t);return r?W.create(r):null}matches(e){const t=this.node,i=t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector||null;return i&&i.call(t,e)}contains(e){return U_(this.node,W.isVector(e)?e.node:e)}wrap(e){const t=W.create(e);return this.node.parentNode?.insertBefore(t.node,this.node),t.append(this)}parent(e){let t=this;if(null==t.node.parentNode)return null;if(t=W.create(t.node.parentNode),null==e)return t;do{if("string"==typeof e?t.matches(e):t instanceof e)return t}while(t=W.create(t.node.parentNode));return t}children(){const e=this.node.childNodes,t=[];for(let r=0;r<e.length;r+=1)1===e[r].nodeType&&t.push(W.create(e[r]));return t}eachChild(e,t){const r=this.children();for(let i=0,s=r.length;i<s;i+=1)e.call(r[i],r[i],i,r),t&&r[i].eachChild(e,t);return this}index(){return Dm(this.node)}hasClass(e){return Vi(this.node,e)}addClass(e){return he(this.node,e),this}removeClass(e){return yn(this.node,e),this}toggleClass(e,t){return j_(this.node,e,t),this}toLocalPoint(e,t){return function b9(n,e,t){const r=n instanceof SVGSVGElement?n:n.ownerSVGElement,i=r.createSVGPoint();i.x=e,i.y=t;try{const s=r.getScreenCTM(),o=i.matrixTransform(s.inverse()),a=fl(n,r).inverse();return o.matrixTransform(a)}catch{return i}}(this.node,e,t)}sample(e=1){return this.node instanceof SVGPathElement?function r9(n,e=1){const t=n.getTotalLength(),r=[];let s,i=0;for(;i<t;)s=n.getPointAtLength(i),r.push({distance:i,x:s.x,y:s.y}),i+=e;return r}(this.node,e):[]}toPath(){return W.create(function u9(n){const e=Cr("path");we(e,we(n));const t=aA(n);return t&&e.setAttribute("d",t),e}(this.node))}toPathData(){return aA(this.node)}}!function(n){function e(o){if(null==o)return!1;if(o instanceof n)return!0;const a=o[Symbol.toStringTag];return(null==a||a===n.toStringTag)&&o.node instanceof SVGElement&&"function"==typeof o.sample&&"function"==typeof o.toPath}function t(o,a,l){return new n(o,a,l)}function i(o){return e(o)?o.node:o}n.toStringTag=`X6.${n.name}`,n.isVector=e,n.create=t,n.createVectors=function r(o){if("<"===o[0]){const a=Ju(o),l=[];for(let c=0,u=a.childNodes.length;c<u;c+=1)l.push(t(document.importNode(a.childNodes[c],!0)));return l}return[t(o)]},n.toNode=i,n.toNodes=function s(o){return Array.isArray(o)?o.map(a=>i(a)):[i(o)]}}(W||(W={}));const tA=document.createElement("canvas").getContext("2d");function e9(n,e,t){const r=t.eol,i=t.baseSize,s=t.lineHeight;let a,o=0;const l={},c=e.length-1;for(let u=0;u<=c;u+=1){let d=e[u],h=null;if("object"==typeof d){const f=d.attrs,g=W.create("tspan",f);a=g.node;let p=d.t;r&&u===c&&(p+=r),a.textContent=p;const m=f.class;m&&g.addClass(m),t.includeAnnotationIndices&&g.attr("annotations",d.annotations.join(",")),h=parseFloat(f["font-size"]),void 0===h&&(h=i),h&&h>o&&(o=h)}else r&&u===c&&(d+=r),a=document.createTextNode(d||" "),i&&i>o&&(o=i);n.appendChild(a)}return o&&(l.maxFontSize=o),s?l.lineHeight=s:o&&(l.lineHeight=1.2*o),l}const nA=/em$/;function nd(n,e){const t=parseFloat(n);return nA.test(n)?t*e:t}function rA(n,e,t={}){e=function HW(n){return n.replace(/ /g,"\xa0")}(e);const r=t.eol;let i=t.textPath;const s=t.textVerticalAnchor,o="middle"===s||"bottom"===s||"top"===s;let a=t.x;void 0===a&&(a=n.getAttribute("x")||0);const l=t.includeAnnotationIndices;let c=t.annotations;c&&!Array.isArray(c)&&(c=[c]);const u=t.lineHeight,d="auto"===u,h=d?"1.5em":u||"1em";let f=!0;const g=n.children;1===g.length&&"TITLE"===g[0].tagName.toUpperCase()&&(f=!1),f&&ol(n),we(n,{"xml:space":"preserve",display:e||t.displayEmpty?null:"none"});const p=we(n,"font-size");let v,m=parseFloat(p);m||(m=16,(o||c)&&!p&&we(n,"font-size",`${m}`)),i?("string"==typeof i&&(i={d:i}),v=function QW(n,e){const t=W.create(e),r=W.create("textPath"),i=n.d;if(i&&void 0===n["xlink:href"]){const s=W.create("path").attr("d",i).appendTo(t.defs());r.attr("xlink:href",`#${s.id}`)}return"object"==typeof n&&r.attr(n),r.node}(i,n)):v=document.createDocumentFragment();let b,w,y=0;const D=e.split("\n"),x=[],S=D.length-1;for(let T=0;T<=S;T+=1){b=h;let k="v-line";const I=Cr("tspan");let F,Me=D[T];if(Me)if(c){F=e9(I,VW(Me,c,{offset:-y,includeAnnotationIndices:l}),{eol:T!==S&&r,baseSize:m,lineHeight:d?null:h,includeAnnotationIndices:l});const E=F.lineHeight;E&&d&&0!==T&&(b=E),0===T&&(w=.8*F.maxFontSize)}else r&&T!==S&&(Me+=r),I.textContent=Me;else{I.textContent="-",k+=" v-empty-line";const le=I.style;le.fillOpacity=0,le.strokeOpacity=0,c&&(F={})}F&&x.push(F),T>0&&I.setAttribute("dy",b),(T>0||i)&&I.setAttribute("x",a),I.className.baseVal=k,v.appendChild(I),y+=Me.length+1}if(o)if(c)b=function t9(n,e,t,r){if(!Array.isArray(e))return 0;const i=e.length;if(!i)return 0;let s=e[0];const o=nd(s.maxFontSize,t)||t;let a=0;const l=nd(r,t);for(let d=1;d<i;d+=1)s=e[d],a+=nd(s.lineHeight,t)||l;const c=nd(s.maxFontSize,t)||t;let u;switch(n){case"middle":u=o/2-.15*c-a/2;break;case"bottom":u=-.25*c-a;break;default:u=.8*o}return u}(s,x,m,h);else if("top"===s)b="0.8em";else{let T;switch(S>0?(T=parseFloat(h)||1,T*=S,nA.test(h)||(T/=m)):T=0,s){case"middle":b=.3-T/2+"em";break;case"bottom":b=-T-.3+"em"}}else 0===s?b="0em":s?b=s:(b=0,null==n.getAttribute("y")&&n.setAttribute("y",`${w||"0.8em"}`));v.firstChild.setAttribute("dy",b),n.appendChild(v)}function ul(n,e={}){if(!n)return{width:0};const t=[],r=e["font-size"]?`${parseFloat(e["font-size"])}px`:"14px";return t.push(e["font-style"]||"normal"),t.push(e["font-variant"]||"normal"),t.push(e["font-weight"]||400),t.push(r),t.push(e["font-family"]||"sans-serif"),tA.font=t.join(" "),tA.measureText(n)}function iA(n,e,t,r={}){if(e>=t)return[n,""];const i=n.length,s={};let o=Math.round(e/t*i-1);for(o<0&&(o=0);o>=0&&o<i;){const a=n.slice(0,o),l=s[a]||ul(a,r).width,c=n.slice(0,o+1),u=s[c]||ul(c,r).width;if(s[a]=l,s[c]=u,l>e)o-=1;else{if(!(u<=e))break;o+=1}}return[n.slice(0,o),n.slice(o)]}const Mm=.551784;function bt(n,e,t=NaN){const r=n.getAttribute(e);if(null==r)return t;const i=parseFloat(r);return Number.isNaN(i)?t:i}function sA(n){return`M ${n.map(t=>`${t.x} ${t.y}`).join(" L")}`}function rd(n){const e=[],t=n.points;if(t)for(let r=0,i=t.numberOfItems;r<i;r+=1)e.push(t.getItem(r));return e}function oA(n){let e;const t=n.x,r=n.y,i=n.width,s=n.height,o=Math.min(n.rx||n["top-rx"]||0,i/2),a=Math.min(n.rx||n["bottom-rx"]||0,i/2),l=Math.min(n.ry||n["top-ry"]||0,s/2),c=Math.min(n.ry||n["bottom-ry"]||0,s/2);return e=o||a||l||c?["M",t,r+l,"v",s-l-c,"a",a,c,0,0,0,a,c,"h",i-2*a,"a",a,c,0,0,0,a,-c,"v",-(s-c-l),"a",o,l,0,0,0,-o,-l,"h",-(i-2*o),"a",o,l,0,0,0,-o,l,"Z"]:["M",t,r,"H",t+i,"V",r+s,"H",t,"V",r,"Z"],e.join(" ")}function aA(n){const e=n.tagName.toLowerCase();switch(e){case"path":return n.getAttribute("d");case"line":return function i9(n){return["M",bt(n,"x1"),bt(n,"y1"),"L",bt(n,"x2"),bt(n,"y2")].join(" ")}(n);case"polygon":return function s9(n){const e=rd(n);return 0===e.length?null:`${sA(e)} Z`}(n);case"polyline":return function o9(n){const e=rd(n);return 0===e.length?null:sA(e)}(n);case"ellipse":return function l9(n){const e=bt(n,"cx",0),t=bt(n,"cy",0),r=bt(n,"rx"),i=bt(n,"ry")||r,s=r*Mm,o=i*Mm;return["M",e,t-i,"C",e+s,t-i,e+r,t-o,e+r,t,"C",e+r,t+o,e+s,t+i,e,t+i,"C",e-s,t+i,e-r,t+o,e-r,t,"C",e-r,t-o,e-s,t-i,e,t-i,"Z"].join(" ")}(n);case"circle":return function a9(n){const e=bt(n,"cx",0),t=bt(n,"cy",0),r=bt(n,"r"),i=r*Mm;return["M",e,t-r,"C",e+i,t-r,e+r,t-i,e+r,t,"C",e+r,t+i,e+i,t+r,e,t+r,"C",e-i,t+r,e-r,t+i,e-r,t,"C",e-r,t-i,e-i,t-r,e,t-r,"Z"].join(" ")}(n);case"rect":return function c9(n){return oA({x:bt(n,"x",0),y:bt(n,"y",0),width:bt(n,"width",0),height:bt(n,"height",0),rx:bt(n,"rx",0),ry:bt(n,"ry",0)})}(n)}throw new Error(`"${e}" cannot be converted to svg path element.`)}const id=Cr("svg"),d9=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,lA=/[ ,]+/,h9=/^(\w+)\((.*)\)/;function ht(n){const e=id.createSVGMatrix();if(null!=n){const t=n,r=e;for(const i in t)r[i]=t[i]}return e}function dl(n){return null!=n?(n instanceof DOMMatrix||(n=ht(n)),id.createSVGTransformFromMatrix(n)):id.createSVGTransform()}function hl(n){let e=ht();const t=null!=n&&n.match(d9);if(!t)return e;for(let r=0,i=t.length;r<i;r+=1){const o=t[r].match(h9);if(o){let a,l,c,u,d,h=ht();const f=o[2].split(lA);switch(o[1].toLowerCase()){case"scale":a=parseFloat(f[0]),l=void 0===f[1]?a:parseFloat(f[1]),h=h.scaleNonUniform(a,l);break;case"translate":c=parseFloat(f[0]),u=parseFloat(f[1]),h=h.translate(c,u);break;case"rotate":d=parseFloat(f[0]),c=parseFloat(f[1])||0,u=parseFloat(f[2])||0,h=0!==c||0!==u?h.translate(c,u).rotate(d).translate(-c,-u):h.rotate(d);break;case"skewx":d=parseFloat(f[0]),h=h.skewX(d);break;case"skewy":d=parseFloat(f[0]),h=h.skewY(d);break;case"matrix":h.a=parseFloat(f[0]),h.b=parseFloat(f[1]),h.c=parseFloat(f[2]),h.d=parseFloat(f[3]),h.e=parseFloat(f[4]),h.f=parseFloat(f[5]);break;default:continue}e=e.multiply(h)}}return e}function uo(n){const e=n||{};return`matrix(${null!=e.a?e.a:1},${null!=e.b?e.b:0},${null!=e.c?e.c:0},${null!=e.d?e.d:1},${null!=e.e?e.e:0},${null!=e.f?e.f:0})`}function sd(n){let e,t,r;if(n){const s=lA;if(n.trim().indexOf("matrix")>=0){const a=function g9(n){const e=Tm(n,{x:0,y:1}),t=Tm(n,{x:1,y:0}),r=180/Math.PI*Math.atan2(e.y,e.x)-90;return{skewX:r,skewY:180/Math.PI*Math.atan2(t.y,t.x),translateX:n.e,translateY:n.f,scaleX:Math.sqrt(n.a*n.a+n.b*n.b),scaleY:Math.sqrt(n.c*n.c+n.d*n.d),rotation:r}}(hl(n));e=[a.translateX,a.translateY],t=[a.rotation],r=[a.scaleX,a.scaleY];const l=[];(0!==e[0]||0!==e[1])&&l.push(`translate(${e.join(",")})`),(1!==r[0]||1!==r[1])&&l.push(`scale(${r.join(",")})`),0!==t[0]&&l.push(`rotate(${t[0]})`),n=l.join(" ")}else{const o=n.match(/translate\((.*?)\)/);o&&(e=o[1].split(s));const a=n.match(/rotate\((.*?)\)/);a&&(t=a[1].split(s));const l=n.match(/scale\((.*?)\)/);l&&(r=l[1].split(s))}}const i=r&&r[0]?parseFloat(r[0]):1;return{raw:n||"",translation:{tx:e&&e[0]?parseInt(e[0],10):0,ty:e&&e[1]?parseInt(e[1],10):0},rotation:{angle:t&&t[0]?parseInt(t[0],10):0,cx:t&&t[1]?parseInt(t[1],10):void 0,cy:t&&t[2]?parseInt(t[2],10):void 0},scale:{sx:i,sy:r&&r[1]?parseFloat(r[1]):i}}}function Tm(n,e){return{x:e.x*n.a+e.y*n.c+0,y:e.x*n.b+e.y*n.d+0}}function ho(n,e,t={}){if(null==e)return hl(we(n,"transform"));if(t.absolute)return void n.setAttribute("transform",uo(e));const r=n.transform,i=dl(e);r.baseVal.appendItem(i)}function cA(n,e,t=0,r={}){let i=we(n,"transform");const s=sd(i);if(null==e)return s.translation;i=s.raw,i=i.replace(/translate\([^)]*\)/g,"").trim(),n.setAttribute("transform",`translate(${r.absolute?e:s.translation.tx+e},${r.absolute?t:s.translation.ty+t}) ${i}`.trim())}function Pm(n,e,t,r,i={}){let s=we(n,"transform");const o=sd(s);if(null==e)return o.rotation;s=o.raw,s=s.replace(/rotate\([^)]*\)/g,"").trim(),e%=360,n.setAttribute("transform",`${s} rotate(${i.absolute?e:o.rotation.angle+e}${null!=t&&null!=r?`,${t},${r}`:""})`.trim())}function Im(n,e,t){let r=we(n,"transform");const i=sd(r);if(null==e)return i.scale;t=t??e,r=i.raw,r=r.replace(/scale\([^)]*\)/g,"").trim(),n.setAttribute("transform",`${r} scale(${e},${t})`.trim())}function fl(n,e){if(Zr(e)&&Zr(n)){const t=e.getScreenCTM(),r=n.getScreenCTM();if(t&&r)return t.inverse().multiply(r)}return ht()}var vn,zi,ee,fo,gl,Ht,pl;!function(n){const e={};n.get=function t(s){return e[s]||{}},n.register=function r(s,o){e[s]=o},n.unregister=function i(s){delete e[s]}}(vn||(vn={})),function(n){const e=new WeakMap;n.ensure=function t(s){return e.has(s)||e.set(s,{events:Object.create(null)}),e.get(s)},n.get=function r(s){return e.get(s)},n.remove=function i(s){return e.delete(s)}}(zi||(zi={})),function(n){n.returnTrue=()=>!0,n.returnFalse=()=>!1,n.stopPropagationCallback=function e(i){i.stopPropagation()},n.addEventListener=function t(i,s,o){null!=i.addEventListener&&i.addEventListener(s,o)},n.removeEventListener=function r(i,s,o){null!=i.removeEventListener&&i.removeEventListener(s,o)}}(ee||(ee={})),function(n){const e=/[^\x20\t\r\n\f]+/g,t=/^([^.]*)(?:\.(.+)|)/;n.splitType=function r(a){return(a||"").match(e)||[""]},n.normalizeType=function i(a){const l=t.exec(a)||[];return{originType:l[1]?l[1].trim():l[1],namespaces:l[2]?l[2].split(".").map(c=>c.trim()).sort():[]}},n.isValidTarget=function s(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType},n.isValidSelector=function o(a,l){return!l||null!=a.querySelector&&null!=a.querySelector(l)}}(ee||(ee={})),function(n){let e=0;const t=new WeakMap;n.ensureHandlerId=function r(a){return t.has(a)||(t.set(a,e),e+=1),t.get(a)},n.getHandlerId=function i(a){return t.get(a)},n.removeHandlerId=function s(a){return t.delete(a)},n.setHandlerId=function o(a,l){return t.set(a,l)}}(ee||(ee={})),function(n){n.getHandlerQueue=function e(t,r){const i=[],s=zi.get(t),o=s&&s.events&&s.events[r.type],a=o&&o.handlers||[],l=o?o.delegateCount:0;if(l>0&&!("click"===r.type&&"number"==typeof r.button&&r.button>=1))for(let c=r.target;c!==t;c=c.parentNode||t)if(1===c.nodeType&&("click"!==r.type||!0!==c.disabled)){const u=[],d={};for(let h=0;h<l;h+=1){const f=a[h],g=f.selector;if(null!=g&&null==d[g]){const m=[];t.querySelectorAll(g).forEach(v=>{m.push(v)}),d[g]=m.includes(c)}d[g]&&u.push(f)}u.length&&i.push({elem:c,handlers:u})}return l<a.length&&i.push({elem:t,handlers:a.slice(l)}),i}}(ee||(ee={})),function(n){n.isWindow=function e(t){return null!=t&&t===t.window}}(ee||(ee={})),function(n){n.contains=function e(t,r){const i=9===t.nodeType?t.documentElement:t,s=r&&r.parentNode;return t===s||!(!s||1!==s.nodeType||!(i.contains?i.contains(s):t.compareDocumentPosition&&16&t.compareDocumentPosition(s)))}}(ee||(ee={}));class Kn{constructor(e,t){this.isDefaultPrevented=ee.returnFalse,this.isPropagationStopped=ee.returnFalse,this.isImmediatePropagationStopped=ee.returnFalse,this.isSimulated=!1,"string"==typeof e?this.type=e:e.type&&(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?ee.returnTrue:ee.returnFalse,this.target=e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget,this.timeStamp=e.timeStamp),t&&Object.assign(this,t),this.timeStamp||(this.timeStamp=Date.now())}preventDefault(){const e=this.originalEvent;this.isDefaultPrevented=ee.returnTrue,e&&!this.isSimulated&&e.preventDefault()}stopPropagation(){const e=this.originalEvent;this.isPropagationStopped=ee.returnTrue,e&&!this.isSimulated&&e.stopPropagation()}stopImmediatePropagation(){const e=this.originalEvent;this.isImmediatePropagationStopped=ee.returnTrue,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}}(function(n){n.create=function e(t){return t instanceof n?t:new n(t)}})(Kn||(Kn={})),function(n){n.addProperty=function e(t,r){Object.defineProperty(n.prototype,t,{enumerable:!0,configurable:!0,get:"function"==typeof r?function(){if(this.originalEvent)return r(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set(i){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:i})}})}}(Kn||(Kn={})),function(n){const e={bubbles:!0,cancelable:!0,eventPhase:!0,detail:!0,view:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pageX:!0,pageY:!0,screenX:!0,screenY:!0,toElement:!0,pointerId:!0,pointerType:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,touches:!0,changedTouches:!0,targetTouches:!0,which:!0,altKey:!0,ctrlKey:!0,metaKey:!0,shiftKey:!0};Object.keys(e).forEach(t=>n.addProperty(t,e[t]))}(Kn||(Kn={})),fo||(fo={}),vn.register("load",{noBubble:!0}),fo||(fo={}),vn.register("beforeunload",{postDispatch(e,t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}),fo||(fo={}),vn.register("mouseenter",{delegateType:"mouseover",bindType:"mouseover",handle(e,t){let r;const i=t.relatedTarget,s=t.handleObj;return(!i||i!==e&&!ee.contains(e,i))&&(t.type=s.originType,r=s.handler.call(e,t),t.type="mouseover"),r}}),vn.register("mouseleave",{delegateType:"mouseout",bindType:"mouseout",handle(e,t){let r;const i=t.relatedTarget,s=t.handleObj;return(!i||i!==e&&!ee.contains(e,i))&&(t.type=s.originType,r=s.handler.call(e,t),t.type="mouseout"),r}}),function(n){let e;function i(o,a,...l){const c=Kn.create(a);c.delegateTarget=o;const u=vn.get(c.type);if(u.preDispatch&&!1===u.preDispatch(o,c))return;const d=ee.getHandlerQueue(o,c);for(let h=0,f=d.length;h<f&&!c.isPropagationStopped();h+=1){const g=d[h];c.currentTarget=g.elem;for(let p=0,m=g.handlers.length;p<m&&!c.isImmediatePropagationStopped();p+=1){const v=g.handlers[p];if(null==c.rnamespace||v.namespace&&c.rnamespace.test(v.namespace)){c.handleObj=v,c.data=v.data;const b=vn.get(v.originType).handle,y=b?b(g.elem,c,...l):v.handler.call(g.elem,c,...l);void 0!==y&&(c.result=y,!1===y&&(c.preventDefault(),c.stopPropagation()))}}}return u.postDispatch&&u.postDispatch(o,c),c.result}n.on=function t(o,a,l,c,u){if(!ee.isValidTarget(o))return;let d;if("function"!=typeof l){const{handler:p,selector:m}=l,v=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(l,["handler","selector"]);l=p,u=m,d=v}const h=zi.ensure(o);let f=h.handler;null==f&&(f=h.handler=function(p,...m){return e!==p.type?i(o,p,...m):void 0});const g=ee.ensureHandlerId(l);ee.splitType(a).forEach(p=>{const{originType:m,namespaces:v}=ee.normalizeType(p);if(!m)return;let b=m,y=vn.get(b);b=(u?y.delegateType:y.bindType)||b,y=vn.get(b);const w=Object.assign({type:b,originType:m,data:c,selector:u,guid:g,handler:l,namespace:v.join(".")},d),D=h.events;let x=D[b];x||(x=D[b]={handlers:[],delegateCount:0},(!y.setup||!1===y.setup(o,c,v,f))&&ee.addEventListener(o,b,f)),y.add&&(ee.removeHandlerId(w.handler),y.add(o,w),ee.setHandlerId(w.handler,g)),u?(x.handlers.splice(x.delegateCount,0,w),x.delegateCount+=1):x.handlers.push(w)})},n.off=function r(o,a,l,c,u){const d=zi.get(o);if(!d)return;const h=d.events;h&&(ee.splitType(a).forEach(f=>{const{originType:g,namespaces:p}=ee.normalizeType(f);if(!g)return void Object.keys(h).forEach(D=>{r(o,D+f,l,c,!0)});let m=g;const v=vn.get(m);m=(c?v.delegateType:v.bindType)||m;const b=h[m]||{},y=p.length>0?new RegExp(`(^|\\.)${p.join("\\.(?:.*\\.|)")}(\\.|$)`):null,w=b.handlers.length;for(let D=b.handlers.length-1;D>=0;D-=1){const x=b.handlers[D];(u||g===x.originType)&&(!l||ee.getHandlerId(l)===x.guid)&&(null==y||x.namespace&&y.test(x.namespace))&&(null==c||c===x.selector||"**"===c&&x.selector)&&(b.handlers.splice(D,1),x.selector&&(b.delegateCount-=1),v.remove&&v.remove(o,x))}w&&0===b.handlers.length&&((!v.teardown||!1===v.teardown(o,p,d.handler))&&ee.removeEventListener(o,m,d.handler),delete h[m])}),0===Object.keys(h).length&&zi.remove(o))},n.dispatch=i,n.trigger=function s(o,a,l,c){let u=o,d="string"==typeof o?o:o.type,h="string"==typeof o||null==u.namespace?[]:u.namespace.split(".");const f=l;if(3===f.nodeType||8===f.nodeType)return;d.indexOf(".")>-1&&(h=d.split("."),d=h.shift(),h.sort());const g=d.indexOf(":")<0&&`on${d}`;u=o instanceof Kn?o:new Kn(d,"object"==typeof o?o:null),u.namespace=h.join("."),u.rnamespace=u.namespace?new RegExp(`(^|\\.)${h.join("\\.(?:.*\\.|)")}(\\.|$)`):null,u.result=void 0,u.target||(u.target=f);const p=[u];Array.isArray(a)?p.push(...a):p.push(a);const m=vn.get(d);if(!c&&m.trigger&&!1===m.trigger(f,u,a))return;let v;const b=[f];if(!c&&!m.noBubble&&!ee.isWindow(f)){v=m.delegateType||d;let w=f,D=f.parentNode;for(;null!=D;)b.push(D),w=D,D=D.parentNode;if(w===(f.ownerDocument||document)){const S=w.defaultView||w.parentWindow||window;b.push(S)}}let y=f;for(let w=0,D=b.length;w<D&&!u.isPropagationStopped();w+=1){const x=b[w];y=x,u.type=w>1?v:m.bindType||d;const S=zi.get(x);S&&S.events[u.type]&&S.handler&&S.handler.call(x,...p);const M=g&&x[g]||null;M&&ee.isValidTarget(x)&&(u.result=M.call(x,...p),!1===u.result&&u.preventDefault())}if(u.type=d,!c&&!u.isDefaultPrevented()){const w=m.preventDefault;if((null==w||!1===w(b.pop(),u,a))&&ee.isValidTarget(f)&&g&&"function"==typeof f[d]&&!ee.isWindow(f)){const D=f[g];D&&(f[g]=null),e=d,u.isPropagationStopped()&&y.addEventListener(d,ee.stopPropagationCallback),f[d](),u.isPropagationStopped()&&y.removeEventListener(d,ee.stopPropagationCallback),e=void 0,D&&(f[g]=D)}}return u.result}}(gl||(gl={})),function(n){n.on=function e(s,o,a,l,c){return pl.on(s,o,a,l,c),s},n.once=function t(s,o,a,l,c){return pl.on(s,o,a,l,c,!0),s},n.off=function r(s,o,a,l){return pl.off(s,o,a,l),s},n.trigger=function i(s,o,a,l){return gl.trigger(o,a,s,l),s}}(Ht||(Ht={})),function(n){n.on=function e(r,i,s,o,a,l){if("object"==typeof i)return"string"!=typeof s&&(o=o||s,s=void 0),void Object.keys(i).forEach(c=>e(r,c,s,o,i[c],l));if(null==o&&null==a?(a=s,o=s=void 0):null==a&&("string"==typeof s?(a=o,o=void 0):(a=o,o=s,s=void 0)),!1===a)a=ee.returnFalse;else if(!a)return;if(l){const c=a;ee.setHandlerId(a=function(u,...d){return n.off(r,u),c.call(this,u,...d)},ee.ensureHandlerId(c))}gl.on(r,i,a,o,s)},n.off=function t(r,i,s,o){if(i&&null!=i.preventDefault&&null!=i.handleObj){const l=i.handleObj;t(i.delegateTarget,l.namespace?`${l.originType}.${l.namespace}`:l.originType,l.selector,l.handler)}else if("object"!=typeof i)(!1===s||"function"==typeof s)&&(o=s,s=void 0),!1===o&&(o=ee.returnFalse),gl.off(r,i,o,s);else{const l=i;Object.keys(l).forEach(c=>t(r,c,s,l[c]))}}}(pl||(pl={}));class uA{constructor(e,t,r){this.animationFrameId=0,this.deltaX=0,this.deltaY=0,this.eventName=Yr.isEventSupported("wheel")?"wheel":"mousewheel",this.target=e,this.onWheelCallback=t,this.onWheelGuard=r,this.onWheel=this.onWheel.bind(this),this.didWheel=this.didWheel.bind(this)}enable(){this.target.addEventListener(this.eventName,this.onWheel,{passive:!1})}disable(){this.target.removeEventListener(this.eventName,this.onWheel)}onWheel(e){if(null!=this.onWheelGuard&&!this.onWheelGuard(e))return;let t;this.deltaX+=e.deltaX,this.deltaY+=e.deltaY,e.preventDefault(),(0!==this.deltaX||0!==this.deltaY)&&(e.stopPropagation(),t=!0),!0===t&&0===this.animationFrameId&&(this.animationFrameId=requestAnimationFrame(()=>{this.didWheel(e)}))}didWheel(e){this.animationFrameId=0,this.onWheelCallback(e,this.deltaX,this.deltaY),this.deltaX=0,this.deltaY=0}}function hA(n,e=60){let t=null;return(...r)=>{t&&clearTimeout(t),t=window.setTimeout(()=>{n.apply(this,r)},e)}}const x9=typeof ResizeObserver<"u"?function D9(n){let e=null,t=[];const r=hA(()=>{t.forEach(l=>{l(n)})}),o=()=>{e&&(e.disconnect(),t=[],e=null)};return{element:n,bind:l=>{e||(e=(()=>{const l=new ResizeObserver(r);return l.observe(n),r(),l})()),-1===t.indexOf(l)&&t.push(l)},destroy:o,unbind:l=>{const c=t.indexOf(l);-1!==c&&t.splice(c,1),0===t.length&&e&&o()}}}:function C9(n){let e=null,t=[];const i=hA(()=>{t.forEach(l=>l(n))}),o=()=>{e&&e.parentNode&&(e.contentDocument&&e.contentDocument.defaultView.removeEventListener("resize",i),e.parentNode.removeChild(e),e=null,t=[])};return{element:n,bind:l=>{e||(e=(()=>{"static"===getComputedStyle(n).position&&(n.style.position="relative");const l=document.createElement("object");return l.onload=()=>{l.contentDocument.defaultView.addEventListener("resize",i),i()},l.style.display="block",l.style.position="absolute",l.style.top="0",l.style.left="0",l.style.height="100%",l.style.width="100%",l.style.overflow="hidden",l.style.pointerEvents="none",l.style.zIndex="-1",l.style.opacity="0",l.setAttribute("tabindex","-1"),l.type="text/html",n.appendChild(l),l.data="about:blank",l})()),-1===t.indexOf(l)&&t.push(l)},destroy:o,unbind:l=>{const c=t.indexOf(l);-1!==c&&t.splice(c,1),0===t.length&&e&&o()}}};var od,Om,yl;!function(n){const e=new WeakMap;function t(i){let s=e.get(i);return s||(s=x9(i),e.set(i,s),s)}n.bind=(i,s)=>{const o=t(i);return o.bind(s),()=>o.unbind(s)},n.clear=i=>{!function r(i){i.destroy(),e.delete(i.element)}(t(i))}}(od||(od={}));class ml{constructor(e={}){this.comparator=e.comparator||ml.defaultComparator,this.index={},this.data=e.data||[],this.heapify()}isEmpty(){return 0===this.data.length}insert(e,t,r){const i={priority:e,value:t},s=this.data.length;return r&&(i.id=r,this.index[r]=s),this.data.push(i),this.bubbleUp(s),this}peek(){return this.data[0]?this.data[0].value:null}peekPriority(){return this.data[0]?this.data[0].priority:null}updatePriority(e,t){const r=this.index[e];if(typeof r>"u")throw new Error(`Node with id '${e}' was not found in the heap.`);const i=this.data,o=this.comparator(t,i[r].priority);o<0?(i[r].priority=t,this.bubbleUp(r)):o>0&&(i[r].priority=t,this.bubbleDown(r))}remove(){const e=this.data,t=e[0],r=e.pop();return t.id&&delete this.index[t.id],e.length>0&&(e[0]=r,r.id&&(this.index[r.id]=0),this.bubbleDown(0)),t?t.value:null}heapify(){for(let e=0;e<this.data.length;e+=1)this.bubbleUp(e)}bubbleUp(e){const t=this.data;let r,i,s=e;for(;s>0&&(i=s-1>>>1,this.comparator(t[s].priority,t[i].priority)<0);){r=t[i],t[i]=t[s];let o=t[s].id;null!=o&&(this.index[o]=i),t[s]=r,o=t[s].id,null!=o&&(this.index[o]=s),s=i}}bubbleDown(e){const t=this.data,r=t.length-1;let i=e;for(;;){const s=1+(i<<1),o=s+1;let a=i;if(s<=r&&this.comparator(t[s].priority,t[a].priority)<0&&(a=s),o<=r&&this.comparator(t[o].priority,t[a].priority)<0&&(a=o),a===i)break;{const l=t[a];t[a]=t[i];let c=t[i].id;null!=c&&(this.index[c]=a),t[i]=l,c=t[i].id,null!=c&&(this.index[c]=i),i=a}}}}!function(n){n.defaultComparator=(e,t)=>e-t}(ml||(ml={})),function(n){n.run=function e(t,r,i=((s,o)=>1)){const s={},o={},a={},l=new ml;for(s[r]=0,Object.keys(t).forEach(c=>{c!==r&&(s[c]=1/0),l.insert(s[c],c,c)});!l.isEmpty();){const c=l.remove();a[c]=!0;const u=t[c]||[];for(let d=0;d<u.length;d+=1){const h=u[d];if(!a[h]){const f=s[c]+i(c,h);f<s[h]&&(s[h]=f,o[h]=c,l.updatePriority(h,f))}}}return o}}(Om||(Om={}));class Dr{constructor(e,t,r,i){return null==e?this.set(255,255,255,1):"number"==typeof e?this.set(e,t,r,i):"string"==typeof e?Dr.fromString(e)||this:Array.isArray(e)?this.set(e):void this.set(e.r,e.g,e.b,null==e.a?1:e.a)}blend(e,t,r){this.set(e.r+(t.r-e.r)*r,e.g+(t.g-e.g)*r,e.b+(t.b-e.b)*r,e.a+(t.a-e.a)*r)}lighten(e){const t=Dr.lighten(this.toArray(),e);this.r=t[0],this.g=t[1],this.b=t[2],this.a=t[3]}darken(e){this.lighten(-e)}set(e,t,r,i){const s=Array.isArray(e)?e[0]:e,o=Array.isArray(e)?e[1]:t,a=Array.isArray(e)?e[2]:r,l=Array.isArray(e)?e[3]:i;return this.r=Math.round(mn(s,0,255)),this.g=Math.round(mn(o,0,255)),this.b=Math.round(mn(a,0,255)),this.a=null==l?1:mn(l,0,1),this}toHex(){return`#${["r","g","b"].map(t=>{const r=this[t].toString(16);return r.length<2?`0${r}`:r}).join("")}`}toRGBA(){return this.toArray()}toHSLA(){return Dr.rgba2hsla(this.r,this.g,this.b,this.a)}toCSS(e){const t=`${this.r},${this.g},${this.b},`;return e?`rgb(${t})`:`rgba(${t},${this.a})`}toGrey(){return Dr.makeGrey(Math.round((this.r+this.g+this.b)/3),this.a)}toArray(){return[this.r,this.g,this.b,this.a]}toString(){return this.toCSS()}}(function(n){function t(y){return new n([...g(y),1])}function r(y){const w=y.toLowerCase().match(/^rgba?\(([\s.,0-9]+)\)/);if(w){const D=w[1].split(/\s*,\s*/).map(x=>parseInt(x,10));return new n(D)}return null}function i(y,w,D){D<0&&++D,D>1&&--D;const x=6*D;return x<1?y+(w-y)*x:2*D<1?w:3*D<2?y+(w-y)*(2/3-D)*6:y}function s(y){const w=y.toLowerCase().match(/^hsla?\(([\s.,0-9]+)\)/);if(w){const D=w[2].split(/\s*,\s*/),x=(parseFloat(D[0])%360+360)%360/360,S=parseFloat(D[1])/100,M=parseFloat(D[2])/100,T=null==D[3]?1:parseInt(D[3],10);return new n(c(x,S,M,T))}return null}function c(y,w,D,x){const S=Array.isArray(y)?y[0]:y,M=Array.isArray(y)?y[1]:w,T=Array.isArray(y)?y[2]:D,k=Array.isArray(y)?y[3]:x,I=T<=.5?T*(M+1):T+M-T*M,F=2*T-I;return[256*i(F,I,S+1/3),256*i(F,I,S),256*i(F,I,S-1/3),k??1]}function u(y){return new n(Math.round(256*Math.random()),Math.round(256*Math.random()),Math.round(256*Math.random()),y?void 0:parseFloat(Math.random().toFixed(2)))}function g(y){const w=0===y.indexOf("#")?y:`#${y}`;let D=Number(`0x${w.substr(1)}`);if(4!==w.length&&7!==w.length||Number.isNaN(D))throw new Error("Invalid hex color.");const x=4===w.length?4:8,S=(1<<x)-1,M=["b","g","r"].map(()=>{const T=D&S;return D>>=x,4===x?17*T:T});return[M[2],M[1],M[0]]}function p(y,w,D){const x=S=>S.length<2?`0${S}`:S;return`${x(y.toString(16))}${x(w.toString(16))}${x(D.toString(16))}`}function b(y,w){if("string"==typeof y){const S="#"===y[0],M=parseInt(S?y.substr(1):y,16),T=mn((M>>16)+w,0,255),k=mn((M>>8&255)+w,0,255);return`${S?"#":""}${(mn((255&M)+w,0,255)|k<<8|T<<16).toString(16)}`}const x=g(b(p(y[0],y[1],y[2]),w));return[x[0],x[1],x[2],y[3]]}n.fromArray=function e(y){return new n(y)},n.fromHex=t,n.fromRGBA=r,n.fromHSLA=s,n.fromString=function o(y){if(y.startsWith("#"))return t(y);if(y.startsWith("rgb"))return r(y);const w=n.named[y];return w?t(w):s(y)},n.makeGrey=function a(y,w){return n.fromArray([y,y,y,w])},n.rgba2hsla=function l(y,w,D,x){const S=Array.isArray(y)?y[0]:y,M=Array.isArray(y)?y[1]:w,T=Array.isArray(y)?y[2]:D,k=Array.isArray(y)?y[3]:x,I=Math.max(S,M,T),F=Math.min(S,M,T),Me=(I+F)/2;let le=0,E=0;if(F!==I){const A=I-F;switch(E=Me>.5?A/(2-I-F):A/(I+F),I){case S:le=(M-T)/A+(M<T?6:0);break;case M:le=(T-S)/A+2;break;case T:le=(S-M)/A+4}le/=6}return[le,E,Me,k??1]},n.hsla2rgba=c,n.random=u,n.randomHex=function d(){let w="#";for(let D=0;D<6;D+=1)w+="0123456789ABCDEF"[Math.floor(16*Math.random())];return w},n.randomRGBA=function h(y){return u(y).toString()},n.invert=function f(y,w){if("string"==typeof y){const T="#"===y[0],[k,I,F]=g(y);return w?.299*k+.587*I+.114*F>186?"#000000":"#ffffff":`${T?"#":""}${p(255-k,255-I,255-F)}`}const D=y[0],x=y[1],S=y[2],M=y[3];return w?.299*D+.587*x+.114*S>186?[0,0,0,M]:[255,255,255,M]:[255-D,255-x,255-S,M]},n.lighten=function m(y,w){return b(y,w)},n.darken=function v(y,w){return b(y,-w)}})(Dr||(Dr={})),function(n){n.named={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",burntsienna:"#ea7e5d",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}(Dr||(Dr={}));class Nm{constructor(){this.clear()}clear(){this.map=new WeakMap,this.arr=[]}has(e){return this.map.has(e)}get(e){return this.map.get(e)}set(e,t){this.map.set(e,t),this.arr.push(e)}delete(e){const t=this.arr.indexOf(e);t>=0&&this.arr.splice(t,1);const r=this.map.get(e);return this.map.delete(e),r}each(e){this.arr.forEach(t=>{const r=this.map.get(t);e(r,t)})}dispose(){this.clear()}}!function(n){function e(i){const s=[],o=[];return Array.isArray(i)?s.push(...i):i.split("|").forEach(a=>{-1===a.indexOf("&")?s.push(a):o.push(...a.split("&"))}),{or:s,and:o}}n.parse=e,n.equals=function t(i,s){if(null!=i&&null!=s){const o=e(i),a=e(s),l=o.or.sort(),c=a.or.sort(),u=o.and.sort(),d=a.and.sort(),h=(f,g)=>f.length===g.length&&(0===f.length||f.every((p,m)=>p===g[m]));return h(l,c)&&h(u,d)}return null==i&&null==s},n.isMatch=function r(i,s,o){if(null==s||Array.isArray(s)&&0===s.length)return!o||!0!==i.altKey&&!0!==i.ctrlKey&&!0!==i.metaKey&&!0!==i.shiftKey;const{or:a,and:l}=e(s),c=u=>{const d=`${u.toLowerCase()}Key`;return!0===i[d]};return a.some(u=>c(u))&&l.every(u=>c(u))}}(yl||(yl={}));var Xr=(()=>(function(n){n.linear=e=>e,n.quad=e=>e*e,n.cubic=e=>e*e*e,n.inout=e=>{if(e<=0)return 0;if(e>=1)return 1;const t=e*e,r=t*e;return 4*(e<.5?r:3*(e-t)+r-.75)},n.exponential=e=>Math.pow(2,10*(e-1)),n.bounce=e=>{for(let t=0,r=1;;t+=r,r/=2)if(e>=(7-4*t)/11){const i=(11-6*t-11*e)/4;return-i*i+r*r}}}(Xr||(Xr={})),Xr))();(function(n){n.decorators={reverse:e=>t=>1-e(1-t),reflect:e=>t=>.5*(t<.5?e(2*t):2-e(2-2*t)),clamp:(e,t=0,r=1)=>i=>{const s=e(i);return s<t?t:s>r?r:s},back:(e=1.70158)=>t=>t*t*((e+1)*t-e),elastic:(e=1.5)=>t=>Math.pow(2,10*(t-1))*Math.cos(20*Math.PI*e/3*t)}})(Xr||(Xr={})),function(n){function F(E){const A=E/1;if(A<1/2.75)return 7.5625*A*A;if(A<2/2.75){const X=A-.5454545454545454;return 7.5625*X*X+.75}if(A<2.5/2.75){const X=A-.8181818181818182;return 7.5625*X*X+.9375}{const X=A-.9545454545454546;return 7.5625*X*X+.984375}}function Me(E){return 1-F(1-E)}n.easeInSine=function e(E){return-1*Math.cos(E*(Math.PI/2))+1},n.easeOutSine=function t(E){return Math.sin(E*(Math.PI/2))},n.easeInOutSine=function r(E){return-.5*(Math.cos(Math.PI*E)-1)},n.easeInQuad=function i(E){return E*E},n.easeOutQuad=function s(E){return E*(2-E)},n.easeInOutQuad=function o(E){return E<.5?2*E*E:(4-2*E)*E-1},n.easeInCubic=function a(E){return E*E*E},n.easeOutCubic=function l(E){const A=E-1;return A*A*A+1},n.easeInOutCubic=function c(E){return E<.5?4*E*E*E:(E-1)*(2*E-2)*(2*E-2)+1},n.easeInQuart=function u(E){return E*E*E*E},n.easeOutQuart=function d(E){const A=E-1;return 1-A*A*A*A},n.easeInOutQuart=function h(E){const A=E-1;return E<.5?8*E*E*E*E:1-8*A*A*A*A},n.easeInQuint=function f(E){return E*E*E*E*E},n.easeOutQuint=function g(E){const A=E-1;return 1+A*A*A*A*A},n.easeInOutQuint=function p(E){const A=E-1;return E<.5?16*E*E*E*E*E:1+16*A*A*A*A*A},n.easeInExpo=function m(E){return 0===E?0:Math.pow(2,10*(E-1))},n.easeOutExpo=function v(E){return 1===E?1:1-Math.pow(2,-10*E)},n.easeInOutExpo=function b(E){if(0===E||1===E)return E;const A=2*E,X=A-1;return A<1?.5*Math.pow(2,10*X):.5*(2-Math.pow(2,-10*X))},n.easeInCirc=function y(E){return-1*(Math.sqrt(1-E/1*E)-1)},n.easeOutCirc=function w(E){const A=E-1;return Math.sqrt(1-A*A)},n.easeInOutCirc=function D(E){const A=2*E,X=A-2;return A<1?-.5*(Math.sqrt(1-A*A)-1):.5*(Math.sqrt(1-X*X)+1)},n.easeInBack=function x(E,A=1.70158){return E*E*((A+1)*E-A)},n.easeOutBack=function S(E,A=1.70158){const X=E/1-1;return X*X*((A+1)*X+A)+1},n.easeInOutBack=function M(E,A=1.70158){const X=2*E,Ie=X-2,Oe=1.525*A;return X<1?.5*X*X*((Oe+1)*X-Oe):.5*(Ie*Ie*((Oe+1)*Ie+Oe)+2)},n.easeInElastic=function T(E,A=.7){if(0===E||1===E)return E;const Ie=E/1-1,Oe=1-A,at=Oe/(2*Math.PI)*Math.asin(1);return-Math.pow(2,10*Ie)*Math.sin((Ie-at)*(2*Math.PI)/Oe)},n.easeOutElastic=function k(E,A=.7){const X=1-A,Ie=2*E;if(0===E||1===E)return E;const Oe=X/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*Ie)*Math.sin((Ie-Oe)*(2*Math.PI)/X)+1},n.easeInOutElastic=function I(E,A=.65){const X=1-A;if(0===E||1===E)return E;const Ie=2*E,Oe=Ie-1,at=X/(2*Math.PI)*Math.asin(1);return Ie<1?Math.pow(2,10*Oe)*Math.sin((Oe-at)*(2*Math.PI)/X)*-.5:Math.pow(2,-10*Oe)*Math.sin((Oe-at)*(2*Math.PI)/X)*.5+1},n.easeOutBounce=F,n.easeInBounce=Me,n.easeInOutBounce=function le(E){return E<.5?.5*Me(2*E):.5*F(2*E-1)+.5}}(Xr||(Xr={}));var Jr=(()=>(function(n){n.number=(e,t)=>{const r=t-e;return i=>e+r*i},n.object=(e,t)=>{const r=Object.keys(e);return i=>{const s={};for(let o=r.length-1;-1!==o;o-=1){const a=r[o];s[a]=e[a]+(t[a]-e[a])*i}return s}},n.unit=(e,t)=>{const r=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,i=r.exec(e),s=r.exec(t),o=s?s[1]:"",a=i?+i[1]:0,l=s?+s[1]:0,c=o.indexOf("."),u=c>0?o[1].length-c-1:0,d=l-a,h=i?i[2]:"";return f=>(a+d*f).toFixed(u)+h},n.color=(e,t)=>{const r=parseInt(e.slice(1),16),i=parseInt(t.slice(1),16),s=255&r,o=(255&i)-s,a=65280&r,l=(65280&i)-a,c=16711680&r,u=(16711680&i)-c;return d=>`#${(1<<24|s+o*d&255|a+l*d&65280|c+u*d&16711680).toString(16).slice(1)}`}}(Jr||(Jr={})),Jr))();const vl=[];var _e,Ce;!function(n){n.toDeg=function e(r){return 180*r/Math.PI%360},n.toRad=function(r,i=!1){return(i?r:r%360)*Math.PI/180},n.normalize=function t(r){return r%360+(r<0?360:0)}}(_e||(_e={})),function(n){n.round=function e(a,l=0){return Number.isInteger(a)?a:+a.toFixed(l)},n.random=function t(a,l){let c,u;if(null==l?(u=a??1,c=0):(u=l,c=a??0),u<c){const d=c;c=u,u=d}return Math.floor(Math.random()*(u-c+1)+c)},n.clamp=function r(a,l,c){return Number.isNaN(a)?NaN:Number.isNaN(l)||Number.isNaN(c)?0:l<c?a<l?l:a>c?c:a:a<c?c:a>l?l:a},n.snapToGrid=function i(a,l){return l*Math.round(a/l)},n.containsPoint=function s(a,l){return null!=l&&null!=a&&l.x>=a.x&&l.x<=a.x+a.width&&l.y>=a.y&&l.y<=a.y+a.height},n.squaredLength=function o(a,l){const c=a.x-l.x,u=a.y-l.y;return c*c+u*u}}(Ce||(Ce={}));class Kr{valueOf(){return this.toJSON()}toString(){return JSON.stringify(this.toJSON())}}class C extends Kr{constructor(e,t){super(),this.x=e??0,this.y=t??0}round(e=0){return this.x=Ce.round(this.x,e),this.y=Ce.round(this.y,e),this}add(e,t){const r=C.create(e,t);return this.x+=r.x,this.y+=r.y,this}update(e,t){const r=C.create(e,t);return this.x=r.x,this.y=r.y,this}translate(e,t){const r=C.create(e,t);return this.x+=r.x,this.y+=r.y,this}rotate(e,t){const r=C.rotate(this,e,t);return this.x=r.x,this.y=r.y,this}scale(e,t,r=new C){const i=C.create(r);return this.x=i.x+e*(this.x-i.x),this.y=i.y+t*(this.y-i.y),this}closest(e){if(1===e.length)return C.create(e[0]);let t=null,r=1/0;return e.forEach(i=>{const s=this.squaredDistance(i);s<r&&(t=i,r=s)}),t?C.create(t):null}distance(e){return Math.sqrt(this.squaredDistance(e))}squaredDistance(e){const t=C.create(e),r=this.x-t.x,i=this.y-t.y;return r*r+i*i}manhattanDistance(e){const t=C.create(e);return Math.abs(t.x-this.x)+Math.abs(t.y-this.y)}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)||.01}theta(e=new C){const t=C.create(e);let s=Math.atan2(-(t.y-this.y),t.x-this.x);return s<0&&(s=2*Math.PI+s),180*s/Math.PI}angleBetween(e,t){if(this.equals(e)||this.equals(t))return NaN;let r=this.theta(t)-this.theta(e);return r<0&&(r+=360),r}vectorAngle(e){return new C(0,0).angleBetween(this,e)}toPolar(e){return this.update(C.toPolar(this,e)),this}changeInAngle(e,t,r=new C){return this.clone().translate(-e,-t).theta(r)-this.theta(r)}adhereToRect(e){return Ce.containsPoint(e,this)||(this.x=Math.min(Math.max(this.x,e.x),e.x+e.width),this.y=Math.min(Math.max(this.y,e.y),e.y+e.height)),this}bearing(e){const t=C.create(e),r=_e.toRad(this.y),i=_e.toRad(t.y),a=_e.toRad(t.x-this.x),l=Math.sin(a)*Math.cos(i),c=Math.cos(r)*Math.sin(i)-Math.sin(r)*Math.cos(i)*Math.cos(a);let h=_e.toDeg(Math.atan2(l,c))-22.5;return h<0&&(h+=360),h=parseInt(h/45,10),["NE","E","SE","S","SW","W","NW","N"][h]}cross(e,t){if(null!=e&&null!=t){const r=C.create(e),i=C.create(t);return(i.x-this.x)*(r.y-this.y)-(i.y-this.y)*(r.x-this.x)}return NaN}dot(e){const t=C.create(e);return this.x*t.x+this.y*t.y}diff(e,t){if("number"==typeof e)return new C(this.x-e,this.y-t);const r=C.create(e);return new C(this.x-r.x,this.y-r.y)}lerp(e,t){const r=C.create(e);return new C((1-t)*this.x+t*r.x,(1-t)*this.y+t*r.y)}normalize(e=1){const t=e/this.magnitude();return this.scale(t,t)}move(e,t){const r=C.create(e),i=_e.toRad(r.theta(this));return this.translate(Math.cos(i)*t,-Math.sin(i)*t)}reflection(e){return C.create(e).move(this,this.distance(e))}snapToGrid(e,t){return this.x=Ce.snapToGrid(this.x,e),this.y=Ce.snapToGrid(this.y,t??e),this}equals(e){const t=C.create(e);return null!=t&&t.x===this.x&&t.y===this.y}clone(){return C.clone(this)}toJSON(){return C.toJSON(this)}serialize(){return`${this.x} ${this.y}`}}(function(n){n.isPoint=function e(t){return null!=t&&t instanceof n}})(C||(C={})),function(n){n.isPointLike=function e(r){return null!=r&&"object"==typeof r&&"number"==typeof r.x&&"number"==typeof r.y},n.isPointData=function t(r){return null!=r&&Array.isArray(r)&&2===r.length&&"number"==typeof r[0]&&"number"==typeof r[1]}}(C||(C={})),function(n){function t(d){return n.isPoint(d)?new n(d.x,d.y):Array.isArray(d)?new n(d[0],d[1]):new n(d.x,d.y)}function o(d,h){return d===h||null!=d&&null!=h&&d.x===h.x&&d.y===h.y}function u(d,h,f,g=new n){const p=t(d),m=t(g),v=p.x-m.x,b=p.y-m.y;return new n(v*h-b*f+m.x,b*h+v*f+m.y)}n.create=function e(d,h){return null==d||"number"==typeof d?new n(d,h):t(d)},n.clone=t,n.toJSON=function r(d){return n.isPoint(d)?{x:d.x,y:d.y}:Array.isArray(d)?{x:d[0],y:d[1]}:{x:d.x,y:d.y}},n.fromPolar=function i(d,h,f=new n){let g=Math.abs(d*Math.cos(h)),p=Math.abs(d*Math.sin(h));const m=t(f),v=_e.normalize(_e.toDeg(h));return v<90?p=-p:v<180?(g=-g,p=-p):v<270&&(g=-g),new n(m.x+g,m.y+p)},n.toPolar=function s(d,h=new n){const f=t(d),g=t(h),p=f.x-g.x,m=f.y-g.y;return new n(Math.sqrt(p*p+m*m),_e.toRad(g.theta(f)))},n.equals=o,n.equalPoints=function a(d,h){if(null==d&&null!=h||null!=d&&null==h||null!=d&&null!=h&&d.length!==h.length)return!1;if(null!=d&&null!=h)for(let f=0,g=d.length;f<g;f+=1)if(!o(d[f],h[f]))return!1;return!0},n.random=function l(d,h,f,g){return new n(Ce.random(d,h),Ce.random(f,g))},n.rotate=function c(d,h,f){const g=_e.toRad(_e.normalize(-h)),p=Math.sin(g);return u(d,Math.cos(g),p,f)},n.rotateEx=u}(C||(C={}));class P extends Kr{get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get origin(){return new C(this.x,this.y)}get topLeft(){return new C(this.x,this.y)}get topCenter(){return new C(this.x+this.width/2,this.y)}get topRight(){return new C(this.x+this.width,this.y)}get center(){return new C(this.x+this.width/2,this.y+this.height/2)}get bottomLeft(){return new C(this.x,this.y+this.height)}get bottomCenter(){return new C(this.x+this.width/2,this.y+this.height)}get bottomRight(){return new C(this.x+this.width,this.y+this.height)}get corner(){return new C(this.x+this.width,this.y+this.height)}get rightMiddle(){return new C(this.x+this.width,this.y+this.height/2)}get leftMiddle(){return new C(this.x,this.y+this.height/2)}get topLine(){return new R(this.topLeft,this.topRight)}get rightLine(){return new R(this.topRight,this.bottomRight)}get bottomLine(){return new R(this.bottomLeft,this.bottomRight)}get leftLine(){return new R(this.topLeft,this.bottomLeft)}constructor(e,t,r,i){super(),this.x=e??0,this.y=t??0,this.width=r??0,this.height=i??0}getOrigin(){return this.origin}getTopLeft(){return this.topLeft}getTopCenter(){return this.topCenter}getTopRight(){return this.topRight}getCenter(){return this.center}getCenterX(){return this.x+this.width/2}getCenterY(){return this.y+this.height/2}getBottomLeft(){return this.bottomLeft}getBottomCenter(){return this.bottomCenter}getBottomRight(){return this.bottomRight}getCorner(){return this.corner}getRightMiddle(){return this.rightMiddle}getLeftMiddle(){return this.leftMiddle}getTopLine(){return this.topLine}getRightLine(){return this.rightLine}getBottomLine(){return this.bottomLine}getLeftLine(){return this.leftLine}bbox(e){if(!e)return this.clone();const t=_e.toRad(e),r=Math.abs(Math.sin(t)),i=Math.abs(Math.cos(t)),s=this.width*i+this.height*r,o=this.width*r+this.height*i;return new P(this.x+(this.width-s)/2,this.y+(this.height-o)/2,s,o)}round(e=0){return this.x=Ce.round(this.x,e),this.y=Ce.round(this.y,e),this.width=Ce.round(this.width,e),this.height=Ce.round(this.height,e),this}add(e,t,r,i){const s=P.create(e,t,r,i),o=Math.min(this.x,s.x),a=Math.min(this.y,s.y),l=Math.max(this.x+this.width,s.x+s.width),c=Math.max(this.y+this.height,s.y+s.height);return this.x=o,this.y=a,this.width=l-o,this.height=c-a,this}update(e,t,r,i){const s=P.create(e,t,r,i);return this.x=s.x,this.y=s.y,this.width=s.width,this.height=s.height,this}inflate(e,t){const r=e,i=t??e;return this.x-=r,this.y-=i,this.width+=2*r,this.height+=2*i,this}snapToGrid(e,t){const r=this.origin.snapToGrid(e,t),i=this.corner.snapToGrid(e,t);return this.x=r.x,this.y=r.y,this.width=i.x-r.x,this.height=i.y-r.y,this}translate(e,t){const r=C.create(e,t);return this.x+=r.x,this.y+=r.y,this}scale(e,t,r=new C){const i=this.origin.scale(e,t,r);return this.x=i.x,this.y=i.y,this.width*=e,this.height*=t,this}rotate(e,t=this.getCenter()){if(0!==e){const r=_e.toRad(e),i=Math.cos(r),s=Math.sin(r);let o=this.getOrigin(),a=this.getTopRight(),l=this.getBottomRight(),c=this.getBottomLeft();o=C.rotateEx(o,i,s,t),a=C.rotateEx(a,i,s,t),l=C.rotateEx(l,i,s,t),c=C.rotateEx(c,i,s,t);const u=new P(o.x,o.y,0,0);u.add(a.x,a.y,0,0),u.add(l.x,l.y,0,0),u.add(c.x,c.y,0,0),this.update(u)}return this}rotate90(){const e=(this.width-this.height)/2;this.x+=e,this.y-=e;const t=this.width;return this.width=this.height,this.height=t,this}moveAndExpand(e){const t=P.clone(e);return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this}getMaxScaleToFit(e,t=this.center){const r=P.clone(e),i=t.x,s=t.y;let o=1/0,a=1/0,l=1/0,c=1/0,u=1/0,d=1/0,h=1/0,f=1/0;const g=r.topLeft;g.x<i&&(o=(this.x-i)/(g.x-i)),g.y<s&&(u=(this.y-s)/(g.y-s));const p=r.bottomRight;p.x>i&&(a=(this.x+this.width-i)/(p.x-i)),p.y>s&&(d=(this.y+this.height-s)/(p.y-s));const m=r.topRight;m.x>i&&(l=(this.x+this.width-i)/(m.x-i)),m.y<s&&(h=(this.y-s)/(m.y-s));const v=r.bottomLeft;return v.x<i&&(c=(this.x-i)/(v.x-i)),v.y>s&&(f=(this.y+this.height-s)/(v.y-s)),{sx:Math.min(o,a,l,c),sy:Math.min(u,d,h,f)}}getMaxUniformScaleToFit(e,t=this.center){const r=this.getMaxScaleToFit(e,t);return Math.min(r.sx,r.sy)}containsPoint(e,t){return Ce.containsPoint(this,C.create(e,t))}containsRect(e,t,r,i){const s=P.create(e,t,r,i),o=this.x,a=this.y,l=this.width,c=this.height,u=s.x,d=s.y,h=s.width,f=s.height;return 0!==l&&0!==c&&0!==h&&0!==f&&u>=o&&d>=a&&u+h<=o+l&&d+f<=a+c}intersectsWithLine(e){const r=[],i=[];return[this.topLine,this.rightLine,this.bottomLine,this.leftLine].forEach(s=>{const o=e.intersectsWithLine(s);null!==o&&i.indexOf(o.toString())<0&&(r.push(o),i.push(o.toString()))}),r.length>0?r:null}intersectsWithLineFromCenterToPoint(e,t){const r=C.clone(e),i=this.center;let s=null;null!=t&&0!==t&&r.rotate(t,i);const o=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],a=new R(i,r);for(let l=o.length-1;l>=0;l-=1){const c=o[l].intersectsWithLine(a);if(null!==c){s=c;break}}return s&&null!=t&&0!==t&&s.rotate(-t,i),s}intersectsWithRect(e,t,r,i){const s=P.create(e,t,r,i);if(!this.isIntersectWithRect(s))return null;const o=this.origin,a=this.corner,l=s.origin,c=s.corner,u=Math.max(o.x,l.x),d=Math.max(o.y,l.y);return new P(u,d,Math.min(a.x,c.x)-u,Math.min(a.y,c.y)-d)}isIntersectWithRect(e,t,r,i){const s=P.create(e,t,r,i),o=this.origin,a=this.corner,l=s.origin,c=s.corner;return!(c.x<=o.x||c.y<=o.y||l.x>=a.x||l.y>=a.y)}normalize(){let e=this.x,t=this.y,r=this.width,i=this.height;return this.width<0&&(e=this.x+this.width,r=-this.width),this.height<0&&(t=this.y+this.height,i=-this.height),this.x=e,this.y=t,this.width=r,this.height=i,this}union(e){const t=P.clone(e),r=this.origin,i=this.corner,s=t.origin,o=t.corner,a=Math.min(r.x,s.x),l=Math.min(r.y,s.y),c=Math.max(i.x,o.x),u=Math.max(i.y,o.y);return new P(a,l,c-a,u-l)}getNearestSideToPoint(e){const t=C.clone(e),i=this.x+this.width-t.x,s=t.y-this.y;let a=t.x-this.x,l="left";return i<a&&(a=i,l="right"),s<a&&(a=s,l="top"),this.y+this.height-t.y<a&&(l="bottom"),l}getNearestPointToPoint(e){const t=C.clone(e);if(this.containsPoint(t)){const r=this.getNearestSideToPoint(t);if("left"===r)return new C(this.x,t.y);if("top"===r)return new C(t.x,this.y);if("right"===r)return new C(this.x+this.width,t.y);if("bottom"===r)return new C(t.x,this.y+this.height)}return t.adhereToRect(this)}equals(e){return null!=e&&e.x===this.x&&e.y===this.y&&e.width===this.width&&e.height===this.height}clone(){return new P(this.x,this.y,this.width,this.height)}toJSON(){return{x:this.x,y:this.y,width:this.width,height:this.height}}serialize(){return`${this.x} ${this.y} ${this.width} ${this.height}`}}(function(n){n.isRectangle=function e(t){return null!=t&&t instanceof n}})(P||(P={})),function(n){n.isRectangleLike=function e(t){return null!=t&&"object"==typeof t&&"number"==typeof t.x&&"number"==typeof t.y&&"number"==typeof t.width&&"number"==typeof t.height}}(P||(P={})),function(n){function t(o){return n.isRectangle(o)?o.clone():Array.isArray(o)?new n(o[0],o[1],o[2],o[3]):new n(o.x,o.y,o.width,o.height)}n.create=function e(o,a,l,c){return null==o||"number"==typeof o?new n(o,a,l,c):t(o)},n.clone=t,n.fromEllipse=function r(o){return new n(o.x-o.a,o.y-o.b,2*o.a,2*o.b)},n.fromSize=function i(o){return new n(0,0,o.width,o.height)},n.fromPositionAndSize=function s(o,a){return new n(o.x,o.y,a.width,a.height)}}(P||(P={}));class R extends Kr{get center(){return new C((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}constructor(e,t,r,i){super(),"number"==typeof e&&"number"==typeof t?(this.start=new C(e,t),this.end=new C(r,i)):(this.start=C.create(e),this.end=C.create(t))}getCenter(){return this.center}round(e=0){return this.start.round(e),this.end.round(e),this}translate(e,t){return"number"==typeof e?(this.start.translate(e,t),this.end.translate(e,t)):(this.start.translate(e),this.end.translate(e)),this}rotate(e,t){return this.start.rotate(e,t),this.end.rotate(e,t),this}scale(e,t,r){return this.start.scale(e,t,r),this.end.scale(e,t,r),this}length(){return Math.sqrt(this.squaredLength())}squaredLength(){const e=this.start.x-this.end.x,t=this.start.y-this.end.y;return e*e+t*t}setLength(e){const t=this.length();if(!t)return this;const r=e/t;return this.scale(r,r,this.start)}parallel(e){const t=this.clone();if(!t.isDifferentiable())return t;const{start:r,end:i}=t,s=r.clone().rotate(270,i),o=i.clone().rotate(90,r);return r.move(o,e),i.move(s,e),t}vector(){return new C(this.end.x-this.start.x,this.end.y-this.start.y)}angle(){const e=new C(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,e)}bbox(){const e=Math.min(this.start.x,this.end.x),t=Math.min(this.start.y,this.end.y),r=Math.max(this.start.x,this.end.x),i=Math.max(this.start.y,this.end.y);return new P(e,t,r-e,i-t)}bearing(){return this.start.bearing(this.end)}closestPoint(e){return this.pointAt(this.closestPointNormalizedLength(e))}closestPointLength(e){return this.closestPointNormalizedLength(e)*this.length()}closestPointTangent(e){return this.tangentAt(this.closestPointNormalizedLength(e))}closestPointNormalizedLength(e){const t=this.vector().dot(new R(this.start,e).vector()),r=Math.min(1,Math.max(0,t/this.squaredLength()));return Number.isNaN(r)?0:r}pointAt(e){const t=this.start,r=this.end;return e<=0?t.clone():e>=1?r.clone():t.lerp(r,e)}pointAtLength(e){const t=this.start,r=this.end;let i=!0;e<0&&(i=!1,e=-e);const s=this.length();return e>=s?i?r.clone():t.clone():this.pointAt((i?e:s-e)/s)}divideAt(e){const t=this.pointAt(e);return[new R(this.start,t),new R(t,this.end)]}divideAtLength(e){const t=this.pointAtLength(e);return[new R(this.start,t),new R(t,this.end)]}containsPoint(e){const t=this.start,r=this.end;if(0!==t.cross(e,r))return!1;const i=this.length();return!(new R(t,e).length()>i||new R(e,r).length()>i)}intersect(e,t){const r=e.intersectsWithLine(this,t);return r?Array.isArray(r)?r:[r]:null}intersectsWithLine(e){const t=new C(this.end.x-this.start.x,this.end.y-this.start.y),r=new C(e.end.x-e.start.x,e.end.y-e.start.y),i=t.x*r.y-t.y*r.x,s=new C(e.start.x-this.start.x,e.start.y-this.start.y),o=s.x*r.y-s.y*r.x,a=s.x*t.y-s.y*t.x;if(0===i||o*i<0||a*i<0)return null;if(i>0){if(o>i||a>i)return null}else if(o<i||a<i)return null;return new C(this.start.x+o*t.x/i,this.start.y+o*t.y/i)}isDifferentiable(){return!this.start.equals(this.end)}pointOffset(e){const t=C.clone(e),r=this.start,i=this.end;return((i.x-r.x)*(t.y-r.y)-(i.y-r.y)*(t.x-r.x))/this.length()}pointSquaredDistance(e,t){const r=C.create(e,t);return this.closestPoint(r).squaredDistance(r)}pointDistance(e,t){const r=C.create(e,t);return this.closestPoint(r).distance(r)}tangentAt(e){if(!this.isDifferentiable())return null;const t=this.start,r=this.end,i=this.pointAt(e),s=new R(t,r);return s.translate(i.x-t.x,i.y-t.y),s}tangentAtLength(e){if(!this.isDifferentiable())return null;const t=this.start,r=this.end,i=this.pointAtLength(e),s=new R(t,r);return s.translate(i.x-t.x,i.y-t.y),s}relativeCcw(e,t){const r=C.create(e,t);let i=r.x-this.start.x,s=r.y-this.start.y;const o=this.end.x-this.start.x,a=this.end.y-this.start.y;let l=i*a-s*o;return 0===l&&(l=i*o+s*a,l>0&&(i-=o,s-=a,l=i*o+s*a,l<0&&(l=0))),l<0?-1:l>0?1:0}equals(e){return null!=e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.end.x===e.end.x&&this.end.y===e.end.y}clone(){return new R(this.start,this.end)}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){return[this.start.serialize(),this.end.serialize()].join(" ")}}!function(n){n.isLine=function e(t){return null!=t&&t instanceof n}}(R||(R={}));class kn extends Kr{get center(){return new C(this.x,this.y)}constructor(e,t,r,i){super(),this.x=e??0,this.y=t??0,this.a=r??0,this.b=i??0}bbox(){return P.fromEllipse(this)}getCenter(){return this.center}inflate(e,t){const i=t??e;return this.a+=2*e,this.b+=2*i,this}normalizedDistance(e,t){const r=C.create(e,t),i=r.x-this.x,s=r.y-this.y,o=this.a,a=this.b;return i*i/(o*o)+s*s/(a*a)}containsPoint(e,t){return this.normalizedDistance(e,t)<=1}intersectsWithLine(e){const t=[],r=this.a,i=this.b,s=e.start,o=e.end,a=e.vector(),l=s.diff(new C(this.x,this.y)),c=new C(a.x/(r*r),a.y/(i*i)),u=new C(l.x/(r*r),l.y/(i*i)),d=a.dot(c),h=a.dot(u),g=h*h-d*(l.dot(u)-1);if(g<0)return null;if(g>0){const p=Math.sqrt(g),m=(-h-p)/d,v=(-h+p)/d;if((m<0||m>1)&&(v<0||v>1))return null;m>=0&&m<=1&&t.push(s.lerp(o,m)),v>=0&&v<=1&&t.push(s.lerp(o,v))}else{const p=-h/d;if(!(p>=0&&p<=1))return null;t.push(s.lerp(o,p))}return t}intersectsWithLineFromCenterToPoint(e,t=0){const r=C.clone(e);t&&r.rotate(t,this.getCenter());const i=r.x-this.x,s=r.y-this.y;let o;if(0===i)return o=this.bbox().getNearestPointToPoint(r),t?o.rotate(-t,this.getCenter()):o;const a=s/i;let d=Math.sqrt(1/(1/(this.a*this.a)+a*a/(this.b*this.b)));return d=i<0?-d:d,o=new C(this.x+d,this.y+a*d),t?o.rotate(-t,this.getCenter()):o}tangentTheta(e){const t=C.clone(e),r=t.x,i=t.y,s=this.a,o=this.b,a=this.bbox().center,l=a.x,c=a.y;let f,g;return r>a.x+s/2||r<a.x-s/2?(g=r>a.x?i-30:i+30,f=s*s/(r-l)-s*s*(i-c)*(g-c)/(o*o*(r-l))+l):(f=i>a.y?r+30:r-30,g=o*o/(i-c)-o*o*(r-l)*(f-l)/(s*s*(i-c))+c),new C(f,g).theta(t)}scale(e,t){return this.a*=e,this.b*=t,this}rotate(e,t){const r=P.fromEllipse(this);r.rotate(e,t);const i=kn.fromRect(r);return this.a=i.a,this.b=i.b,this.x=i.x,this.y=i.y,this}translate(e,t){const r=C.create(e,t);return this.x+=r.x,this.y+=r.y,this}equals(e){return null!=e&&e.x===this.x&&e.y===this.y&&e.a===this.a&&e.b===this.b}clone(){return new kn(this.x,this.y,this.a,this.b)}toJSON(){return{x:this.x,y:this.y,a:this.a,b:this.b}}serialize(){return`${this.x} ${this.y} ${this.a} ${this.b}`}}(function(n){n.isEllipse=function e(t){return null!=t&&t instanceof n}})(kn||(kn={})),function(n){function t(i){return n.isEllipse(i)?i.clone():Array.isArray(i)?new n(i[0],i[1],i[2],i[3]):new n(i.x,i.y,i.a,i.b)}n.create=function e(i,s,o,a){return null==i||"number"==typeof i?new n(i,s,o,a):t(i)},n.parse=t,n.fromRect=function r(i){const s=i.center;return new n(s.x,s.y,i.width/2,i.height/2)}}(kn||(kn={}));const _9=new RegExp("^[\\s\\dLMCZz,.]*$");function A9(n){return"string"==typeof n&&_9.test(n)}function Rm(n,e){return(n%e+e)%e}function fA(n,e={}){const t=[];return n&&n.length&&n.forEach(r=>{Array.isArray(r)?t.push({x:r[0],y:r[1]}):t.push({x:r.x,y:r.y})}),function M9(n,e,t,r,i){const s=[],o=n[n.length-1],a=null!=e&&e>0,l=e||0;if(r&&a){const d=(n=n.slice())[0],h=new C(o.x+(d.x-o.x)/2,o.y+(d.y-o.y)/2);n.splice(0,0,h)}let c=n[0],u=1;for(s.push(t?"M":"L",c.x,c.y);u<(r?n.length:n.length-1);){let d=n[Rm(u,n.length)],h=c.x-d.x,f=c.y-d.y;if(a&&(0!==h||0!==f)&&(null==i||i.indexOf(u-1)<0)){let g=Math.sqrt(h*h+f*f);const p=h*Math.min(l,g/2)/g,m=f*Math.min(l,g/2)/g;s.push("L",d.x+p,d.y+m);let y=n[Rm(u+1,n.length)];for(;u<n.length-2&&0===Math.round(y.x-d.x)&&0===Math.round(y.y-d.y);)y=n[Rm(u+2,n.length)],u+=1;h=y.x-d.x,f=y.y-d.y,g=Math.max(1,Math.sqrt(h*h+f*f));const w=h*Math.min(l,g/2)/g,D=f*Math.min(l,g/2)/g,x=d.x+w,S=d.y+D;s.push("Q",d.x,d.y,x,S),d=new C(x,S)}else s.push("L",d.x,d.y);c=d,u+=1}return r?s.push("Z"):s.push("L",o.x,o.y),s.map(d=>"string"==typeof d?d:+d.toFixed(3)).join(" ")}(t,e.round,null==e.initialMove||e.initialMove,e.close,e.exclude)}function ad(n,e,t,r,i=0,s=0,o=0,a,l){if(0===t||0===r)return[];a-=n,l-=e,t=Math.abs(t),r=Math.abs(r);const c=-a/2,u=-l/2,d=Math.cos(i*Math.PI/180),h=Math.sin(i*Math.PI/180),f=d*c+h*u,g=-1*h*c+d*u,p=f*f,m=g*g,v=t*t,b=r*r,y=p/v+m/b;let w;if(y>1)t=Math.sqrt(y)*t,r=Math.sqrt(y)*r,w=0;else{let Mr=1;s===o&&(Mr=-1),w=Mr*Math.sqrt((v*b-v*m-b*p)/(v*m+b*p))}const D=w*t*g/r,x=-1*w*r*f/t,S=d*D-h*x+a/2,M=h*D+d*x+l/2;let T=Math.atan2((g-x)/r,(f-D)/t)-Math.atan2(0,1),k=T>=0?T:2*Math.PI+T;T=Math.atan2((-g-x)/r,(-f-D)/t)-Math.atan2((g-x)/r,(f-D)/t);let I=T>=0?T:2*Math.PI+T;0===o&&I>0?I-=2*Math.PI:0!==o&&I<0&&(I+=2*Math.PI);const F=2*I/Math.PI,Me=Math.ceil(F<0?-1*F:F),le=I/Me,E=8/3*Math.sin(le/4)*Math.sin(le/4)/Math.sin(le/2),A=d*t,X=d*r,Ie=h*t,Oe=h*r;let at=Math.cos(k),It=Math.sin(k),Td=-E*(A*It+Oe*at),Pd=-E*(Ie*It-X*at),li=0,Il=0;const Ar=[];for(let Mr=0;Mr<Me;Mr+=1){k+=le,at=Math.cos(k),It=Math.sin(k),li=A*at-Oe*It+S,Il=Ie*at+X*It+M;const PM=-E*(A*It+Oe*at),IM=-E*(Ie*It-X*at),Io=6*Mr;Ar[Io]=Number(Td+n),Ar[Io+1]=Number(Pd+e),Ar[Io+2]=Number(li-PM+n),Ar[Io+3]=Number(Il-IM+e),Ar[Io+4]=Number(li+n),Ar[Io+5]=Number(Il+e),Td=li+PM,Pd=Il+IM}return Ar.map(Mr=>+Mr.toFixed(2))}function T9(n,e,t,r,i=0,s=0,o=0,a,l){const c=[],u=ad(n,e,t,r,i,s,o,a,l);if(null!=u)for(let d=0,h=u.length;d<h;d+=6)c.push("C",u[d],u[d+1],u[d+2],u[d+3],u[d+4],u[d+5]);return c.join(" ")}class Ge extends Kr{get start(){return this.points[0]||null}get end(){return this.points[this.points.length-1]||null}constructor(e){if(super(),null!=e){if("string"==typeof e)return Ge.parse(e);this.points=e.map(t=>C.create(t))}else this.points=[]}scale(e,t,r=new C){return this.points.forEach(i=>i.scale(e,t,r)),this}rotate(e,t){return this.points.forEach(r=>r.rotate(e,t)),this}translate(e,t){const r=C.create(e,t);return this.points.forEach(i=>i.translate(r.x,r.y)),this}round(e=0){return this.points.forEach(t=>t.round(e)),this}bbox(){if(0===this.points.length)return new P;let e=1/0,t=-1/0,r=1/0,i=-1/0;const s=this.points;for(let o=0,a=s.length;o<a;o+=1){const l=s[o],c=l.x,u=l.y;c<e&&(e=c),c>t&&(t=c),u<r&&(r=u),u>i&&(i=u)}return new P(e,r,t-e,i-r)}closestPoint(e){const t=this.closestPointLength(e);return this.pointAtLength(t)}closestPointLength(e){const t=this.points,r=t.length;if(0===r||1===r)return 0;let i=0,s=0,o=1/0;for(let a=0,l=r-1;a<l;a+=1){const c=new R(t[a],t[a+1]),u=c.length(),d=c.closestPointNormalizedLength(e),f=c.pointAt(d).squaredDistance(e);f<o&&(o=f,s=i+d*u),i+=u}return s}closestPointNormalizedLength(e){const t=this.length();return 0===t?0:this.closestPointLength(e)/t}closestPointTangent(e){const t=this.closestPointLength(e);return this.tangentAtLength(t)}containsPoint(e){if(0===this.points.length)return!1;const t=C.clone(e),r=t.x,i=t.y,s=this.points,o=s.length;let a=o-1,l=0;for(let c=0;c<o;c+=1){const u=s[a],d=s[c];if(t.equals(u))return!0;const h=new R(u,d);if(h.containsPoint(e))return!0;if(i<=u.y&&i>d.y||i>u.y&&i<=d.y){const f=u.x-r>d.x-r?u.x-r:d.x-r;if(f>=0){const g=new C(r+f,i),p=new R(e,g);h.intersectsWithLine(p)&&(l+=1)}}a=c}return l%2==1}intersectsWithLine(e){const t=[];for(let r=0,i=this.points.length-1;r<i;r+=1){const a=e.intersectsWithLine(new R(this.points[r],this.points[r+1]));a&&t.push(a)}return t.length>0?t:null}isDifferentiable(){for(let e=0,t=this.points.length-1;e<t;e+=1)if(new R(this.points[e],this.points[e+1]).isDifferentiable())return!0;return!1}length(){let e=0;for(let t=0,r=this.points.length-1;t<r;t+=1)e+=this.points[t].distance(this.points[t+1]);return e}pointAt(e){const t=this.points,r=t.length;if(0===r)return null;if(1===r||e<=0)return t[0].clone();if(e>=1)return t[r-1].clone();const s=this.length()*e;return this.pointAtLength(s)}pointAtLength(e){const t=this.points,r=t.length;if(0===r)return null;if(1===r)return t[0].clone();let i=!0;e<0&&(i=!1,e=-e);let s=0;for(let a=0,l=r-1;a<l;a+=1){const c=i?a:l-1-a,u=t[c],d=t[c+1],h=new R(u,d),f=u.distance(d);if(e<=s+f)return h.pointAtLength((i?1:-1)*(e-s));s+=f}return(i?t[r-1]:t[0]).clone()}tangentAt(e){const r=this.points.length;if(0===r||1===r)return null;e<0&&(e=0),e>1&&(e=1);const s=this.length()*e;return this.tangentAtLength(s)}tangentAtLength(e){const t=this.points,r=t.length;if(0===r||1===r)return null;let i=!0;e<0&&(i=!1,e=-e);let s,o=0;for(let a=0,l=r-1;a<l;a+=1){const c=i?a:l-1-a,u=t[c],d=t[c+1],h=new R(u,d),f=u.distance(d);if(h.isDifferentiable()){if(e<=o+f)return h.tangentAtLength((i?1:-1)*(e-o));s=h}o+=f}return s?s.tangentAt(i?1:0):null}simplify(e={}){const t=this.points;if(t.length<3)return this;const r=e.threshold||0;let i=0;for(;t[i+2];){const o=i+1,c=t[o];new R(t[i],t[i+2]).closestPoint(c).distance(c)<=r?t.splice(o,1):i+=1}return this}toHull(){const e=this.points,t=e.length;if(0===t)return new Ge;let r=e[0];for(let h=1;h<t;h+=1)(e[h].y<r.y||e[h].y===r.y&&e[h].x>r.x)&&(r=e[h]);const i=[];for(let h=0;h<t;h+=1){let f=r.theta(e[h]);0===f&&(f=360),i.push([e[h],h,f])}i.sort((h,f)=>{let g=h[2]-f[2];return 0===g&&(g=f[1]-h[1]),g}),i.length>2&&i.unshift(i[i.length-1]);const s={},o=[],a=h=>`${h[0].toString()}@${h[1]}`;for(;0!==i.length;){const h=i.pop(),f=h[0];if(s[a(h)])continue;let g=!1;for(;!g;)if(o.length<2)o.push(h),g=!0;else{const p=o.pop(),m=p[0],v=o.pop(),b=v[0],y=b.cross(m,f);if(y<0)o.push(v),o.push(p),o.push(h),g=!0;else if(0===y){const D=m.angleBetween(b,f);Math.abs(D-180)<1e-10||m.equals(f)||b.equals(m)?(s[a(p)]=m,o.push(v)):Math.abs((D+1)%360-1)<1e-10&&(o.push(v),i.push(p))}else s[a(p)]=m,o.push(v)}}o.length>2&&o.pop();let l,c=-1;for(let h=0,f=o.length;h<f;h+=1){const g=o[h][1];(void 0===l||g<l)&&(l=g,c=h)}let u=[];if(c>0){const h=o.slice(c),f=o.slice(0,c);u=h.concat(f)}else u=o;const d=[];for(let h=0,f=u.length;h<f;h+=1)d.push(u[h][0]);return new Ge(d)}equals(e){return null!=e&&e.points.length===this.points.length&&e.points.every((t,r)=>t.equals(this.points[r]))}clone(){return new Ge(this.points.map(e=>e.clone()))}toJSON(){return this.points.map(e=>e.toJSON())}serialize(){return this.points.map(e=>`${e.serialize()}`).join(" ")}}(function(n){n.isPolyline=function e(t){return null!=t&&t instanceof n}})(Ge||(Ge={})),function(n){n.parse=function e(t){const r=t.trim();if(""===r)return new n;const i=[],s=r.split(/\s*,\s*|\s+/);for(let o=0,a=s.length;o<a;o+=2)i.push({x:+s[o],y:+s[o+1]});return new n(i)}}(Ge||(Ge={}));class $e extends Kr{constructor(e,t,r,i){super(),this.PRECISION=3,this.start=C.create(e),this.controlPoint1=C.create(t),this.controlPoint2=C.create(r),this.end=C.create(i)}bbox(){const e=this.start,t=this.controlPoint1,r=this.controlPoint2,i=this.end,s=e.x,o=e.y,a=t.x,l=t.y,c=r.x,u=r.y,d=i.x,h=i.y,f=[],g=[],p=[[],[]];let m,v,b,y,w,D,x,S;for(let X=0;X<2;X+=1)if(0===X?(v=6*s-12*a+6*c,m=-3*s+9*a-9*c+3*d,b=3*a-3*s):(v=6*o-12*l+6*u,m=-3*o+9*l-9*u+3*h,b=3*l-3*o),Math.abs(m)<1e-12){if(Math.abs(v)<1e-12)continue;y=-b/v,y>0&&y<1&&g.push(y)}else x=v*v-4*b*m,S=Math.sqrt(x),!(x<0)&&(w=(-v+S)/(2*m),w>0&&w<1&&g.push(w),D=(-v-S)/(2*m),D>0&&D<1&&g.push(D));let M,T,k,I=g.length;const F=I;for(;I;)I-=1,y=g[I],k=1-y,M=k*k*k*s+3*k*k*y*a+3*k*y*y*c+y*y*y*d,p[0][I]=M,T=k*k*k*o+3*k*k*y*l+3*k*y*y*u+y*y*y*h,p[1][I]=T,f[I]={X:M,Y:T};g[F]=0,g[F+1]=1,f[F]={X:s,Y:o},f[F+1]={X:d,Y:h},p[0][F]=s,p[1][F]=o,p[0][F+1]=d,p[1][F+1]=h,g.length=F+2,p[0].length=F+2,p[1].length=F+2,f.length=F+2;const Me=Math.min.apply(null,p[0]),le=Math.min.apply(null,p[1]),E=Math.max.apply(null,p[0]),A=Math.max.apply(null,p[1]);return new P(Me,le,E-Me,A-le)}closestPoint(e,t={}){return this.pointAtT(this.closestPointT(e,t))}closestPointLength(e,t={}){const r=this.getOptions(t);return this.lengthAtT(this.closestPointT(e,r),r)}closestPointNormalizedLength(e,t={}){const r=this.getOptions(t),i=this.closestPointLength(e,r);if(!i)return 0;const s=this.length(r);return 0===s?0:i/s}closestPointT(e,t={}){const r=this.getPrecision(t),i=this.getDivisions(t),s=Math.pow(10,-r);let o=null,a=0,l=0,c=0,u=0,d=0,h=null;const f=i.length;let g=f>0?1/f:0;for(i.forEach((p,m)=>{const v=p.start.distance(e),b=p.end.distance(e),y=v+b;(null==h||y<h)&&(o=p,a=m*g,l=(m+1)*g,c=v,u=b,h=y,d=p.endpointDistance())});;){const p=c?Math.abs(c-u)/c:0,m=null!=u?Math.abs(c-u)/u:0;if(p<s||m<s||!c||c<d*s||!u||u<d*s)return c<=u?a:l;const D=o.divide(.5);g/=2;const x=D[0].start.distance(e),S=D[0].end.distance(e),M=x+S,T=D[1].start.distance(e),k=D[1].end.distance(e);M<=T+k?(o=D[0],l-=g,c=x,u=S):(o=D[1],a+=g,c=T,u=k)}}closestPointTangent(e,t={}){return this.tangentAtT(this.closestPointT(e,t))}containsPoint(e,t={}){return this.toPolyline(t).containsPoint(e)}divideAt(e,t={}){if(e<=0)return this.divideAtT(0);if(e>=1)return this.divideAtT(1);const r=this.tAt(e,t);return this.divideAtT(r)}divideAtLength(e,t={}){const r=this.tAtLength(e,t);return this.divideAtT(r)}divide(e){return this.divideAtT(e)}divideAtT(e){const t=this.start,r=this.controlPoint1,i=this.controlPoint2,s=this.end;if(e<=0)return[new $e(t,t,t,t),new $e(t,r,i,s)];if(e>=1)return[new $e(t,r,i,s),new $e(s,s,s,s)];const o=this.getSkeletonPoints(e),c=o.divider,u=o.dividerControlPoint1,d=o.dividerControlPoint2;return[new $e(t,o.startControlPoint1,o.startControlPoint2,c),new $e(c,u,d,s)]}endpointDistance(){return this.start.distance(this.end)}getSkeletonPoints(e){const t=this.start,r=this.controlPoint1,i=this.controlPoint2,s=this.end;if(e<=0)return{startControlPoint1:t.clone(),startControlPoint2:t.clone(),divider:t.clone(),dividerControlPoint1:r.clone(),dividerControlPoint2:i.clone()};if(e>=1)return{startControlPoint1:r.clone(),startControlPoint2:i.clone(),divider:s.clone(),dividerControlPoint1:s.clone(),dividerControlPoint2:s.clone()};const o=new R(t,r).pointAt(e),a=new R(r,i).pointAt(e),l=new R(i,s).pointAt(e),c=new R(o,a).pointAt(e),u=new R(a,l).pointAt(e);return{startControlPoint1:o,startControlPoint2:c,divider:new R(c,u).pointAt(e),dividerControlPoint1:u,dividerControlPoint2:l}}getSubdivisions(e={}){const t=this.getPrecision(e);let r=[new $e(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(0===t)return r;let i=this.endpointDistance();const s=Math.pow(10,-t);let o=0;for(;;){o+=1;const a=[];r.forEach(u=>{const d=u.divide(.5);a.push(d[0],d[1])});const l=a.reduce((u,d)=>u+d.endpointDistance(),0);if(o>1&&(0!==l?(l-i)/l:0)<s)return a;r=a,i=l}}length(e={}){return this.getDivisions(e).reduce((r,i)=>r+i.endpointDistance(),0)}lengthAtT(e,t={}){if(e<=0)return 0;const r=void 0===t.precision?this.PRECISION:t.precision;return this.divide(e)[0].length({precision:r})}pointAt(e,t={}){if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();const r=this.tAt(e,t);return this.pointAtT(r)}pointAtLength(e,t={}){const r=this.tAtLength(e,t);return this.pointAtT(r)}pointAtT(e){return e<=0?this.start.clone():e>=1?this.end.clone():this.getSkeletonPoints(e).divider}isDifferentiable(){const t=this.controlPoint1,r=this.controlPoint2,i=this.end;return!(this.start.equals(t)&&t.equals(r)&&r.equals(i))}tangentAt(e,t={}){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);const r=this.tAt(e,t);return this.tangentAtT(r)}tangentAtLength(e,t={}){if(!this.isDifferentiable())return null;const r=this.tAtLength(e,t);return this.tangentAtT(r)}tangentAtT(e){if(!this.isDifferentiable())return null;e<0&&(e=0),e>1&&(e=1);const t=this.getSkeletonPoints(e),r=t.startControlPoint2,s=t.divider,o=new R(r,t.dividerControlPoint1);return o.translate(s.x-r.x,s.y-r.y),o}getPrecision(e={}){return null==e.precision?this.PRECISION:e.precision}getDivisions(e={}){if(null!=e.subdivisions)return e.subdivisions;const t=this.getPrecision(e);return this.getSubdivisions({precision:t})}getOptions(e={}){return{precision:this.getPrecision(e),subdivisions:this.getDivisions(e)}}tAt(e,t={}){if(e<=0)return 0;if(e>=1)return 1;const r=this.getOptions(t),s=this.length(r)*e;return this.tAtLength(s,r)}tAtLength(e,t={}){let r=!0;e<0&&(r=!1,e=-e);const i=this.getPrecision(t),s=this.getDivisions(t),o={precision:i,subdivisions:s};let l,c,a=null,u=0,d=0,h=0;const f=s.length;let g=f>0?1/f:0;for(let v=0;v<f;v+=1){const b=r?v:f-1-v,y=s[v],w=y.endpointDistance();if(e<=h+w){a=y,l=b*g,c=(b+1)*g,u=r?e-h:w+h-e,d=r?w+h-e:e-h;break}h+=w}if(null==a)return r?1:0;const p=this.length(o),m=Math.pow(10,-i);for(;;){let v,b,y;if(v=0!==p?u/p:0,v<m)return l;if(v=0!==p?d/p:0,v<m)return c;const w=a.divide(.5);g/=2;const D=w[0].endpointDistance(),x=w[1].endpointDistance();u<=D?(a=w[0],c-=g,b=u,y=D-b):(a=w[1],l+=g,b=u-D,y=x-b),u=b,d=y}}toPoints(e={}){const t=this.getDivisions(e),r=[t[0].start.clone()];return t.forEach(i=>r.push(i.end.clone())),r}toPolyline(e={}){return new Ge(this.toPoints(e))}scale(e,t,r){return this.start.scale(e,t,r),this.controlPoint1.scale(e,t,r),this.controlPoint2.scale(e,t,r),this.end.scale(e,t,r),this}rotate(e,t){return this.start.rotate(e,t),this.controlPoint1.rotate(e,t),this.controlPoint2.rotate(e,t),this.end.rotate(e,t),this}translate(e,t){return"number"==typeof e?(this.start.translate(e,t),this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t)):(this.start.translate(e),this.controlPoint1.translate(e),this.controlPoint2.translate(e),this.end.translate(e)),this}equals(e){return null!=e&&this.start.equals(e.start)&&this.controlPoint1.equals(e.controlPoint1)&&this.controlPoint2.equals(e.controlPoint2)&&this.end.equals(e.end)}clone(){return new $e(this.start,this.controlPoint1,this.controlPoint2,this.end)}toJSON(){return{start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}serialize(){return[this.start.serialize(),this.controlPoint1.serialize(),this.controlPoint2.serialize(),this.end.serialize()].join(" ")}}(function(n){n.isCurve=function e(t){return null!=t&&t instanceof n}})($e||($e={})),function(n){function e(i){const s=i.length,o=[],a=[];let l=2;o[0]=i[0]/l;for(let c=1;c<s;c+=1)a[c]=1/l,l=(c<s-1?4:3.5)-a[c],o[c]=(i[c]-o[c-1])/l;for(let c=1;c<s;c+=1)o[s-c-1]-=a[s-c]*o[s-c];return o}n.throughPoints=function r(i){if(null==i||Array.isArray(i)&&i.length<2)throw new Error("At least 2 points are required");const s=function t(i){const s=i.map(h=>C.clone(h)),o=[],a=[],l=s.length-1;if(1===l)return o[0]=new C((2*s[0].x+s[1].x)/3,(2*s[0].y+s[1].y)/3),a[0]=new C(2*o[0].x-s[0].x,2*o[0].y-s[0].y),[o,a];const c=[];for(let h=1;h<l-1;h+=1)c[h]=4*s[h].x+2*s[h+1].x;c[0]=s[0].x+2*s[1].x,c[l-1]=(8*s[l-1].x+s[l].x)/2;const u=e(c);for(let h=1;h<l-1;h+=1)c[h]=4*s[h].y+2*s[h+1].y;c[0]=s[0].y+2*s[1].y,c[l-1]=(8*s[l-1].y+s[l].y)/2;const d=e(c);for(let h=0;h<l;h+=1)o.push(new C(u[h],d[h])),a.push(h<l-1?new C(2*s[h+1].x-u[h+1],2*s[h+1].y-d[h+1]):new C((s[l].x+u[l-1])/2,(s[l].y+d[l-1])/2));return[o,a]}(i),o=[];for(let a=0,l=s[0].length;a<l;a+=1){const c=new C(s[0][a].x,s[0][a].y),u=new C(s[1][a].x,s[1][a].y);o.push(new n(i[a],c,u,i[a+1]))}return o}}($e||($e={}));class ld extends Kr{constructor(){super(...arguments),this.isVisible=!0,this.isSegment=!0,this.isSubpathStart=!1}get end(){return this.endPoint}get start(){if(null==this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path, or segment has not yet been added to a path.)");return this.previousSegment.end}closestPointT(e,t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(e);throw new Error("Neither `closestPointT` nor `closestPointNormalizedLength` method is implemented.")}lengthAtT(e,t){if(e<=0)return 0;const r=this.length();return e>=1?r:r*e}divideAtT(e){if(this.divideAt)return this.divideAt(e);throw new Error("Neither `divideAtT` nor `divideAt` method is implemented.")}pointAtT(e){if(this.pointAt)return this.pointAt(e);throw new Error("Neither `pointAtT` nor `pointAt` method is implemented.")}tangentAtT(e){if(this.tangentAt)return this.tangentAt(e);throw new Error("Neither `tangentAtT` nor `tangentAt` method is implemented.")}}class Mt extends ld{constructor(e,t){super(),this.endPoint=R.isLine(e)?e.end.clone().round(2):C.create(e,t).round(2)}get type(){return"L"}get line(){return new R(this.start,this.end)}bbox(){return this.line.bbox()}closestPoint(e){return this.line.closestPoint(e)}closestPointLength(e){return this.line.closestPointLength(e)}closestPointNormalizedLength(e){return this.line.closestPointNormalizedLength(e)}closestPointTangent(e){return this.line.closestPointTangent(e)}length(){return this.line.length()}divideAt(e){const t=this.line.divideAt(e);return[new Mt(t[0]),new Mt(t[1])]}divideAtLength(e){const t=this.line.divideAtLength(e);return[new Mt(t[0]),new Mt(t[1])]}getSubdivisions(){return[]}pointAt(e){return this.line.pointAt(e)}pointAtLength(e){return this.line.pointAtLength(e)}tangentAt(e){return this.line.tangentAt(e)}tangentAtLength(e){return this.line.tangentAtLength(e)}isDifferentiable(){return null!=this.previousSegment&&!this.start.equals(this.end)}clone(){return new Mt(this.end)}scale(e,t,r){return this.end.scale(e,t,r),this}rotate(e,t){return this.end.rotate(e,t),this}translate(e,t){return"number"==typeof e?this.end.translate(e,t):this.end.translate(e),this}equals(e){return this.type===e.type&&this.start.equals(e.start)&&this.end.equals(e.end)}toJSON(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){const e=this.end;return`${this.type} ${e.x} ${e.y}`}}!function(n){n.create=function e(...t){const r=t.length,i=t[0];if(R.isLine(i))return new n(i);if(C.isPointLike(i))return 1===r?new n(i):t.map(o=>new n(o));if(2===r)return new n(+t[0],+t[1]);const s=[];for(let o=0;o<r;o+=2)s.push(new n(+t[o],+t[o+1]));return s}}(Mt||(Mt={}));class go extends ld{get end(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. MoveTo), or segment has not yet been added to a path.)");return this.subpathStartSegment.end}get type(){return"Z"}get line(){return new R(this.start,this.end)}bbox(){return this.line.bbox()}closestPoint(e){return this.line.closestPoint(e)}closestPointLength(e){return this.line.closestPointLength(e)}closestPointNormalizedLength(e){return this.line.closestPointNormalizedLength(e)}closestPointTangent(e){return this.line.closestPointTangent(e)}length(){return this.line.length()}divideAt(e){const t=this.line.divideAt(e);return[t[1].isDifferentiable()?new Mt(t[0]):this.clone(),new Mt(t[1])]}divideAtLength(e){const t=this.line.divideAtLength(e);return[t[1].isDifferentiable()?new Mt(t[0]):this.clone(),new Mt(t[1])]}getSubdivisions(){return[]}pointAt(e){return this.line.pointAt(e)}pointAtLength(e){return this.line.pointAtLength(e)}tangentAt(e){return this.line.tangentAt(e)}tangentAtLength(e){return this.line.tangentAtLength(e)}isDifferentiable(){return!(!this.previousSegment||!this.subpathStartSegment||this.start.equals(this.end))}scale(){return this}rotate(){return this}translate(){return this}equals(e){return this.type===e.type&&this.start.equals(e.start)&&this.end.equals(e.end)}clone(){return new go}toJSON(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){return this.type}}!function(n){n.create=function e(){return new n}}(go||(go={}));class po extends ld{constructor(e,t){super(),this.isVisible=!1,this.isSubpathStart=!0,this.endPoint=R.isLine(e)||$e.isCurve(e)?e.end.clone().round(2):C.create(e,t).round(2)}get start(){throw new Error("Illegal access. Moveto segments should not need a start property.")}get type(){return"M"}bbox(){return null}closestPoint(){return this.end.clone()}closestPointLength(){return 0}closestPointNormalizedLength(){return 0}closestPointT(){return 1}closestPointTangent(){return null}length(){return 0}lengthAtT(){return 0}divideAt(){return[this.clone(),this.clone()]}divideAtLength(){return[this.clone(),this.clone()]}getSubdivisions(){return[]}pointAt(){return this.end.clone()}pointAtLength(){return this.end.clone()}pointAtT(){return this.end.clone()}tangentAt(){return null}tangentAtLength(){return null}tangentAtT(){return null}isDifferentiable(){return!1}scale(e,t,r){return this.end.scale(e,t,r),this}rotate(e,t){return this.end.rotate(e,t),this}translate(e,t){return"number"==typeof e?this.end.translate(e,t):this.end.translate(e),this}clone(){return new po(this.end)}equals(e){return this.type===e.type&&this.end.equals(e.end)}toJSON(){return{type:this.type,end:this.end.toJSON()}}serialize(){const e=this.end;return`${this.type} ${e.x} ${e.y}`}}!function(n){n.create=function e(...t){const r=t.length,i=t[0];if(R.isLine(i))return new n(i);if($e.isCurve(i))return new n(i);if(C.isPointLike(i)){if(1===r)return new n(i);const o=[];for(let a=0;a<r;a+=1)o.push(0===a?new n(t[a]):new Mt(t[a]));return o}if(2===r)return new n(+t[0],+t[1]);const s=[];for(let o=0;o<r;o+=2){const a=+t[o],l=+t[o+1];s.push(0===o?new n(a,l):new Mt(a,l))}return s}}(po||(po={}));class bn extends ld{constructor(e,t,r,i,s,o){super(),$e.isCurve(e)?(this.controlPoint1=e.controlPoint1.clone().round(2),this.controlPoint2=e.controlPoint2.clone().round(2),this.endPoint=e.end.clone().round(2)):"number"==typeof e?(this.controlPoint1=new C(e,t).round(2),this.controlPoint2=new C(r,i).round(2),this.endPoint=new C(s,o).round(2)):(this.controlPoint1=C.create(e).round(2),this.controlPoint2=C.create(t).round(2),this.endPoint=C.create(r).round(2))}get type(){return"C"}get curve(){return new $e(this.start,this.controlPoint1,this.controlPoint2,this.end)}bbox(){return this.curve.bbox()}closestPoint(e){return this.curve.closestPoint(e)}closestPointLength(e){return this.curve.closestPointLength(e)}closestPointNormalizedLength(e){return this.curve.closestPointNormalizedLength(e)}closestPointTangent(e){return this.curve.closestPointTangent(e)}length(){return this.curve.length()}divideAt(e,t={}){const r=this.curve.divideAt(e,t);return[new bn(r[0]),new bn(r[1])]}divideAtLength(e,t={}){const r=this.curve.divideAtLength(e,t);return[new bn(r[0]),new bn(r[1])]}divideAtT(e){const t=this.curve.divideAtT(e);return[new bn(t[0]),new bn(t[1])]}getSubdivisions(){return[]}pointAt(e){return this.curve.pointAt(e)}pointAtLength(e){return this.curve.pointAtLength(e)}tangentAt(e){return this.curve.tangentAt(e)}tangentAtLength(e){return this.curve.tangentAtLength(e)}isDifferentiable(){if(!this.previousSegment)return!1;const t=this.controlPoint1,r=this.controlPoint2,i=this.end;return!(this.start.equals(t)&&t.equals(r)&&r.equals(i))}scale(e,t,r){return this.controlPoint1.scale(e,t,r),this.controlPoint2.scale(e,t,r),this.end.scale(e,t,r),this}rotate(e,t){return this.controlPoint1.rotate(e,t),this.controlPoint2.rotate(e,t),this.end.rotate(e,t),this}translate(e,t){return"number"==typeof e?(this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t)):(this.controlPoint1.translate(e),this.controlPoint2.translate(e),this.end.translate(e)),this}equals(e){return this.start.equals(e.start)&&this.end.equals(e.end)&&this.controlPoint1.equals(e.controlPoint1)&&this.controlPoint2.equals(e.controlPoint2)}clone(){return new bn(this.controlPoint1,this.controlPoint2,this.end)}toJSON(){return{type:this.type,start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}serialize(){const e=this.controlPoint1,t=this.controlPoint2,r=this.end;return[this.type,e.x,e.y,t.x,t.y,r.x,r.y].join(" ")}}function cd(n,e,t){return{x:n*Math.cos(t)-e*Math.sin(t),y:n*Math.sin(t)+e*Math.cos(t)}}function gA(n,e,t,r,i,s){const o=.3333333333333333,a=2/3;return[o*n+a*t,o*e+a*r,o*i+a*t,o*s+a*r,i,s]}function pA(n,e,t,r,i,s,o,a,l,c){const u=120*Math.PI/180,d=Math.PI/180*(+i||0);let f,g,p,m,v,h=[];if(c)g=c[0],p=c[1],m=c[2],v=c[3];else{f=cd(n,e,-d),n=f.x,e=f.y,f=cd(a,l,-d);const le=(n-(a=f.x))/2,E=(e-(l=f.y))/2;let A=le*le/(t*t)+E*E/(r*r);A>1&&(A=Math.sqrt(A),t*=A,r*=A);const X=t*t,Ie=r*r,Oe=(s===o?-1:1)*Math.sqrt(Math.abs((X*Ie-X*E*E-Ie*le*le)/(X*E*E+Ie*le*le)));m=Oe*t*E/r+(n+a)/2,v=Oe*-r*le/t+(e+l)/2,g=Math.asin((e-v)/r),p=Math.asin((l-v)/r),g=n<m?Math.PI-g:g,p=a<m?Math.PI-p:p,g<0&&(g=2*Math.PI+g),p<0&&(p=2*Math.PI+p),o&&g>p&&(g-=2*Math.PI),!o&&p>g&&(p-=2*Math.PI)}let b=p-g;if(Math.abs(b)>u){const le=p,E=a,A=l;p=g+u*(o&&p>g?1:-1),h=pA(a=m+t*Math.cos(p),l=v+r*Math.sin(p),t,r,i,0,o,E,A,[p,le,m,v])}b=p-g;const y=Math.cos(g),w=Math.sin(g),D=Math.cos(p),x=Math.sin(p),S=Math.tan(b/4),M=4/3*(t*S),T=4/3*(r*S),k=[n,e],I=[n+M*w,e-T*y],F=[a+M*x,l-T*D],Me=[a,l];if(I[0]=2*k[0]-I[0],I[1]=2*k[1]-I[1],c)return[I,F,Me].concat(h);{h=[I,F,Me].concat(h).join().split(",");const le=[],E=h.length;for(let A=0;A<E;A+=1)le[A]=A%2?cd(+h[A-1],+h[A],d).y:cd(+h[A],+h[A+1],d).x;return le}}function O9(n){const e=function I9(n){const e=function P9(n){if(!n)return null;const e="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029",t=new RegExp(`([a-z])[${e},]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[${e}]*,?[${e}]*)+)`,"ig"),r=new RegExp(`(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[${e}]*,?[${e}]*`,"ig"),i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},s=[];return n.replace(t,(o,a,l)=>{const c=[];let u=a.toLowerCase();l.replace(r,(h,f)=>(f&&c.push(+f),h)),"m"===u&&c.length>2&&(s.push([a,...c.splice(0,2)]),u="l",a="m"===a?"l":"L");const d=i[u];for(;c.length>=d&&(s.push([a,...c.splice(0,d)]),d););return o}),s}(n);if(!e||!e.length)return[["M",0,0]];let t=0,r=0,i=0,s=0;const o=[];for(let a=0,l=e.length;a<l;a+=1){const c=[];o.push(c);const u=e[a],d=u[0];if(d!==d.toUpperCase())switch(c[0]=d.toUpperCase(),c[0]){case"A":c[1]=u[1],c[2]=u[2],c[3]=u[3],c[4]=u[4],c[5]=u[5],c[6]=+u[6]+t,c[7]=+u[7]+r;break;case"V":c[1]=+u[1]+r;break;case"H":c[1]=+u[1]+t;break;case"M":i=+u[1]+t,s=+u[2]+r;for(let h=1,f=u.length;h<f;h+=1)c[h]=+u[h]+(h%2?t:r);break;default:for(let h=1,f=u.length;h<f;h+=1)c[h]=+u[h]+(h%2?t:r)}else for(let h=0,f=u.length;h<f;h+=1)c[h]=u[h];switch(c[0]){case"Z":t=+i,r=+s;break;case"H":t=c[1];break;case"V":r=c[1];break;case"M":i=c[c.length-2],s=c[c.length-1],t=c[c.length-2],r=c[c.length-1];break;default:t=c[c.length-2],r=c[c.length-1]}}return o}(n),t={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function r(l,c,u){let d,h;if(!l)return["C",c.x,c.y,c.x,c.y,c.x,c.y];switch(l[0]in{T:1,Q:1}||(c.qx=null,c.qy=null),l[0]){case"M":c.X=l[1],c.Y=l[2];break;case"A":return 0===parseFloat(l[1])||0===parseFloat(l[2])?["L",l[6],l[7]]:["C"].concat(pA.apply(0,[c.x,c.y].concat(l.slice(1))));case"S":return"C"===u||"S"===u?(d=2*c.x-c.bx,h=2*c.y-c.by):(d=c.x,h=c.y),["C",d,h].concat(l.slice(1));case"T":return"Q"===u||"T"===u?(c.qx=2*c.x-c.qx,c.qy=2*c.y-c.qy):(c.qx=c.x,c.qy=c.y),["C"].concat(gA(c.x,c.y,c.qx,c.qy,l[1],l[2]));case"Q":return c.qx=l[1],c.qy=l[2],["C"].concat(gA(c.x,c.y,l[1],l[2],l[3],l[4]));case"H":return["L"].concat(l[1],c.y);case"V":return["L"].concat(c.x,l[1])}return l}function i(l,c){if(l[c].length>7){l[c].shift();const u=l[c];for(;u.length;)s[c]="A",l.splice(c+=1,0,["C"].concat(u.splice(0,6)));l.splice(c,1),a=e.length}}const s=[];let o="",a=e.length;for(let l=0;l<a;l+=1){let c="";e[l]&&(c=e[l][0]),"C"!==c&&(s[l]=c,l>0&&(o=s[l-1])),e[l]=r(e[l],t,o),"A"!==s[l]&&"C"===c&&(s[l]="C"),i(e,l);const u=e[l],d=u.length;t.x=u[d-2],t.y=u[d-1],t.bx=parseFloat(u[d-4])||t.x,t.by=parseFloat(u[d-3])||t.y}return(!e[0][0]||"M"!==e[0][0])&&e.unshift(["M",0,0]),e}function N9(n){return O9(n).map(e=>e.map(t=>"string"==typeof t?t:Ce.round(t,2))).join(",").split(",").join(" ")}!function(n){n.create=function e(...t){const r=t.length,i=t[0];if($e.isCurve(i))return new n(i);if(C.isPointLike(i)){if(3===r)return new n(t[0],t[1],t[2]);const o=[];for(let a=0;a<r;a+=3)o.push(new n(t[a],t[a+1],t[a+2]));return o}if(6===r)return new n(t[0],t[1],t[2],t[3],t[4],t[5]);const s=[];for(let o=0;o<r;o+=6)s.push(new n(t[o],t[o+1],t[o+2],t[o+3],t[o+4],t[o+5]));return s}}(bn||(bn={}));class j extends Kr{constructor(e){if(super(),this.PRECISION=3,this.segments=[],Array.isArray(e))if(R.isLine(e[0])||$e.isCurve(e[0])){let t=null;e.forEach((i,s)=>{0===s&&this.appendSegment(j.createSegment("M",i.start)),null!=t&&!t.end.equals(i.start)&&this.appendSegment(j.createSegment("M",i.start)),R.isLine(i)?this.appendSegment(j.createSegment("L",i.end)):$e.isCurve(i)&&this.appendSegment(j.createSegment("C",i.controlPoint1,i.controlPoint2,i.end)),t=i})}else e.forEach(r=>{r.isSegment&&this.appendSegment(r)});else null!=e&&(R.isLine(e)?(this.appendSegment(j.createSegment("M",e.start)),this.appendSegment(j.createSegment("L",e.end))):$e.isCurve(e)?(this.appendSegment(j.createSegment("M",e.start)),this.appendSegment(j.createSegment("C",e.controlPoint1,e.controlPoint2,e.end))):Ge.isPolyline(e)?e.points&&e.points.length&&e.points.forEach((t,r)=>{const i=j.createSegment(0===r?"M":"L",t);this.appendSegment(i)}):e.isSegment&&this.appendSegment(e))}get start(){const e=this.segments,t=e.length;if(0===t)return null;for(let r=0;r<t;r+=1){const i=e[r];if(i.isVisible)return i.start}return e[t-1].end}get end(){const e=this.segments,t=e.length;if(0===t)return null;for(let r=t-1;r>=0;r-=1){const i=e[r];if(i.isVisible)return i.end}return e[t-1].end}moveTo(...e){return this.appendSegment(po.create.call(null,...e))}lineTo(...e){return this.appendSegment(Mt.create.call(null,...e))}curveTo(...e){return this.appendSegment(bn.create.call(null,...e))}arcTo(e,t,r,i,s,o,a){const l=this.end||new C,c="number"==typeof o?ad(l.x,l.y,e,t,r,i,s,o,a):ad(l.x,l.y,e,t,r,i,s,o.x,o.y);if(null!=c)for(let u=0,d=c.length;u<d;u+=6)this.curveTo(c[u],c[u+1],c[u+2],c[u+3],c[u+4],c[u+5]);return this}quadTo(e,t,r,i){const s=this.end||new C,o=["M",s.x,s.y];"number"==typeof e?o.push("Q",e,t,r,i):o.push("Q",e.x,e.y,t.x,t.y);const a=j.parse(o.join(" "));return this.appendSegment(a.segments.slice(1)),this}close(){return this.appendSegment(go.create())}drawPoints(e,t={}){const r=fA(e,t),i=j.parse(r);i&&i.segments&&this.appendSegment(i.segments)}bbox(){const e=this.segments,t=e.length;if(0===t)return null;let r;for(let s=0;s<t;s+=1){const o=e[s];if(o.isVisible){const a=o.bbox();null!=a&&(r=r?r.union(a):a)}}if(null!=r)return r;const i=e[t-1];return new P(i.end.x,i.end.y,0,0)}appendSegment(e){const t=this.segments.length;let i,r=0!==t?this.segments[t-1]:null;if(Array.isArray(e))for(let o=0,a=e.length;o<a;o+=1)i=this.prepareSegment(e[o],r,null),this.segments.push(i),r=i;else null!=e&&e.isSegment&&(i=this.prepareSegment(e,r,null),this.segments.push(i));return this}insertSegment(e,t){const r=this.segments.length;if(e<0&&(e=r+e+1),e>r||e<0)throw new Error("Index out of range.");let i,s=null,o=null;if(0!==r&&(e>=1?(s=this.segments[e-1],o=s.nextSegment):(s=null,o=this.segments[0])),Array.isArray(t))for(let a=0,l=t.length;a<l;a+=1)i=this.prepareSegment(t[a],s,o),this.segments.splice(e+a,0,i),s=i;else i=this.prepareSegment(t,s,o),this.segments.splice(e,0,i);return this}removeSegment(e){const t=this.fixIndex(e),r=this.segments.splice(t,1)[0],i=r.previousSegment,s=r.nextSegment;return i&&(i.nextSegment=s),s&&(s.previousSegment=i),r.isSubpathStart&&s&&this.updateSubpathStartSegment(s),r}replaceSegment(e,t){const r=this.fixIndex(e);let i;const s=this.segments[r];let o=s.previousSegment;const a=s.nextSegment;let l=s.isSubpathStart;if(Array.isArray(t)){this.segments.splice(e,1);for(let c=0,u=t.length;c<u;c+=1)i=this.prepareSegment(t[c],o,a),this.segments.splice(e+c,0,i),o=i,l&&i.isSubpathStart&&(l=!1)}else i=this.prepareSegment(t,o,a),this.segments.splice(r,1,i),l&&i.isSubpathStart&&(l=!1);l&&a&&this.updateSubpathStartSegment(a)}getSegment(e){const t=this.fixIndex(e);return this.segments[t]}fixIndex(e){const t=this.segments.length;if(0===t)throw new Error("Path has no segments.");let r=e;for(;r<0;)r=t+r;if(r>=t||r<0)throw new Error("Index out of range.");return r}segmentAt(e,t={}){const r=this.segmentIndexAt(e,t);return r?this.getSegment(r):null}segmentAtLength(e,t={}){const r=this.segmentIndexAtLength(e,t);return r?this.getSegment(r):null}segmentIndexAt(e,t={}){if(0===this.segments.length)return null;const r=Ce.clamp(e,0,1),i=this.getOptions(t),o=this.length(i)*r;return this.segmentIndexAtLength(o,i)}segmentIndexAtLength(e,t={}){const r=this.segments.length;if(0===r)return null;let i=!0;e<0&&(i=!1,e=-e);const s=this.getPrecision(t),o=this.getSubdivisions(t);let a=0,l=null;for(let c=0;c<r;c+=1){const u=i?c:r-1-c,d=this.segments[u],f=d.length({precision:s,subdivisions:o[u]});if(d.isVisible){if(e<=a+f)return u;l=u}a+=f}return l}getSegmentSubdivisions(e={}){const t=this.getPrecision(e),r=[];for(let i=0,s=this.segments.length;i<s;i+=1){const a=this.segments[i].getSubdivisions({precision:t});r.push(a)}return r}updateSubpathStartSegment(e){let t=e.previousSegment,r=e;for(;r&&!r.isSubpathStart;)r.subpathStartSegment=null!=t?t.subpathStartSegment:null,t=r,r=r.nextSegment}prepareSegment(e,t,r){e.previousSegment=t,e.nextSegment=r,null!=t&&(t.nextSegment=e),null!=r&&(r.previousSegment=e);let i=e;return e.isSubpathStart&&(e.subpathStartSegment=e,i=r),null!=i&&this.updateSubpathStartSegment(i),e}closestPoint(e,t={}){const r=this.closestPointT(e,t);return r?this.pointAtT(r):null}closestPointLength(e,t={}){const r=this.getOptions(t),i=this.closestPointT(e,r);return i?this.lengthAtT(i,r):0}closestPointNormalizedLength(e,t={}){const r=this.getOptions(t),i=this.closestPointLength(e,r);if(0===i)return 0;const s=this.length(r);return 0===s?0:i/s}closestPointT(e,t={}){if(0===this.segments.length)return null;const r=this.getPrecision(t),i=this.getSubdivisions(t);let s,o=1/0;for(let a=0,l=this.segments.length;a<l;a+=1){const c=this.segments[a];if(c.isVisible){const d=c.closestPointT(e,{precision:r,subdivisions:i[a]}),h=c.pointAtT(d),f=Ce.squaredLength(h,e);f<o&&(s={segmentIndex:a,value:d},o=f)}}return s||{segmentIndex:this.segments.length-1,value:1}}closestPointTangent(e,t={}){if(0===this.segments.length)return null;const r=this.getPrecision(t),i=this.getSubdivisions(t);let s,o=1/0;for(let a=0,l=this.segments.length;a<l;a+=1){const c=this.segments[a],u=i[a];if(c.isDifferentiable()){const d=c.closestPointT(e,{precision:r,subdivisions:u}),h=c.pointAtT(d),f=Ce.squaredLength(h,e);f<o&&(s=c.tangentAtT(d),o=f)}}return s||null}containsPoint(e,t={}){const r=this.toPolylines(t);if(!r)return!1;let i=0;for(let s=0,o=r.length;s<o;s+=1)r[s].containsPoint(e)&&(i+=1);return i%2==1}pointAt(e,t={}){if(0===this.segments.length)return null;if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();const r=this.getOptions(t),s=this.length(r)*e;return this.pointAtLength(s,r)}pointAtLength(e,t={}){if(0===this.segments.length)return null;if(0===e)return this.start.clone();let r=!0;e<0&&(r=!1,e=-e);const i=this.getPrecision(t),s=this.getSubdivisions(t);let o,a=0;for(let c=0,u=this.segments.length;c<u;c+=1){const d=r?c:u-1-c,h=this.segments[d],f=s[d],g=h.length({precision:i,subdivisions:f});if(h.isVisible){if(e<=a+g)return h.pointAtLength((r?1:-1)*(e-a),{precision:i,subdivisions:f});o=h}a+=g}return o?r?o.end:o.start:this.segments[this.segments.length-1].end.clone()}pointAtT(e){const t=this.segments,r=t.length;if(0===r)return null;const i=e.segmentIndex;if(i<0)return t[0].pointAtT(0);if(i>=r)return t[r-1].pointAtT(1);const s=Ce.clamp(e.value,0,1);return t[i].pointAtT(s)}divideAt(e,t={}){if(0===this.segments.length)return null;const r=Ce.clamp(e,0,1),i=this.getOptions(t),o=this.length(i)*r;return this.divideAtLength(o,i)}divideAtLength(e,t={}){if(0===this.segments.length)return null;let r=!0;e<0&&(r=!1,e=-e);const i=this.getPrecision(t),s=this.getSubdivisions(t);let a,l,c,u,d,o=0;for(let D=0,x=this.segments.length;D<x;D+=1){const S=r?D:x-1-D,M=this.getSegment(S),k={precision:i,subdivisions:s[S]},I=M.length(k);if(M.isDifferentiable()&&(c=M,u=S,e<=o+I)){l=S,a=M.divideAtLength((r?1:-1)*(e-o),k);break}o+=I}if(!c)return null;a||(l=u,d=r?1:0,a=c.divideAtT(d));const h=this.clone(),f=l;h.replaceSegment(f,a);const g=f;let p=f+1,m=f+2;a[0].isDifferentiable()||(h.removeSegment(g),p-=1,m-=1);const v=h.getSegment(p).start;h.insertSegment(p,j.createSegment("M",v)),m+=1,a[1].isDifferentiable()||(h.removeSegment(m-1),m-=1);const b=m-g-1;for(let D=m,x=h.segments.length;D<x;D+=1){const S=this.getSegment(D-b),M=h.getSegment(D);if("Z"===M.type&&!S.subpathStartSegment.end.equals(M.subpathStartSegment.end)){const T=j.createSegment("L",S.end);h.replaceSegment(D,T)}}return[new j(h.segments.slice(0,p)),new j(h.segments.slice(p))]}intersectsWithLine(e,t={}){const r=this.toPolylines(t);if(null==r)return null;let i=null;for(let s=0,o=r.length;s<o;s+=1){const l=e.intersect(r[s]);l&&(null==i&&(i=[]),Array.isArray(l)?i.push(...l):i.push(l))}return i}isDifferentiable(){for(let e=0,t=this.segments.length;e<t;e+=1)if(this.segments[e].isDifferentiable())return!0;return!1}isValid(){const e=this.segments;return 0===e.length||"M"===e[0].type}length(e={}){if(0===this.segments.length)return 0;const t=this.getSubdivisions(e);let r=0;for(let i=0,s=this.segments.length;i<s;i+=1)r+=this.segments[i].length({subdivisions:t[i]});return r}lengthAtT(e,t={}){const r=this.segments.length;if(0===r)return 0;let i=e.segmentIndex;if(i<0)return 0;let s=Ce.clamp(e.value,0,1);i>=r&&(i=r-1,s=1);const o=this.getPrecision(t),a=this.getSubdivisions(t);let l=0;for(let d=0;d<i;d+=1)l+=this.segments[d].length({precision:o,subdivisions:a[d]});return l+=this.segments[i].lengthAtT(s,{precision:o,subdivisions:a[i]}),l}tangentAt(e,t={}){if(0===this.segments.length)return null;const r=Ce.clamp(e,0,1),i=this.getOptions(t),o=this.length(i)*r;return this.tangentAtLength(o,i)}tangentAtLength(e,t={}){if(0===this.segments.length)return null;let r=!0;e<0&&(r=!1,e=-e);const i=this.getPrecision(t),s=this.getSubdivisions(t);let o,a=0;for(let l=0,c=this.segments.length;l<c;l+=1){const u=r?l:c-1-l,d=this.segments[u],h=s[u],f=d.length({precision:i,subdivisions:h});if(d.isDifferentiable()){if(e<=a+f)return d.tangentAtLength((r?1:-1)*(e-a),{precision:i,subdivisions:h});o=d}a+=f}return o?o.tangentAtT(r?1:0):null}tangentAtT(e){const t=this.segments.length;if(0===t)return null;const r=e.segmentIndex;if(r<0)return this.segments[0].tangentAtT(0);if(r>=t)return this.segments[t-1].tangentAtT(1);const i=Ce.clamp(e.value,0,1);return this.segments[r].tangentAtT(i)}getPrecision(e={}){return null==e.precision?this.PRECISION:e.precision}getSubdivisions(e={}){if(null==e.segmentSubdivisions){const t=this.getPrecision(e);return this.getSegmentSubdivisions({precision:t})}return e.segmentSubdivisions}getOptions(e={}){return{precision:this.getPrecision(e),segmentSubdivisions:this.getSubdivisions(e)}}toPoints(e={}){const t=this.segments,r=t.length;if(0===r)return null;const i=this.getSubdivisions(e),s=[];let o=[];for(let a=0;a<r;a+=1){const l=t[a];if(l.isVisible){const c=i[a];c.length>0?c.forEach(u=>o.push(u.start)):o.push(l.start)}else o.length>0&&(o.push(t[a-1].end),s.push(o),o=[])}return o.length>0&&(o.push(this.end),s.push(o)),s}toPolylines(e={}){const t=this.toPoints(e);return t?t.map(r=>new Ge(r)):null}scale(e,t,r){return this.segments.forEach(i=>i.scale(e,t,r)),this}rotate(e,t){return this.segments.forEach(r=>r.rotate(e,t)),this}translate(e,t){return this.segments.forEach("number"==typeof e?r=>r.translate(e,t):r=>r.translate(e)),this}clone(){const e=new j;return this.segments.forEach(t=>e.appendSegment(t.clone())),e}equals(e){if(null==e)return!1;const t=this.segments,r=e.segments,i=t.length;if(r.length!==i)return!1;for(let s=0;s<i;s+=1){const o=t[s],a=r[s];if(o.type!==a.type||!o.equals(a))return!1}return!0}toJSON(){return this.segments.map(e=>e.toJSON())}serialize(){if(!this.isValid())throw new Error("Invalid path segments.");return this.segments.map(e=>e.serialize()).join(" ")}toString(){return this.serialize()}}(function(n){n.isPath=function e(t){return null!=t&&t instanceof n}})(j||(j={})),function(n){function t(r,...i){if("M"===r)return po.create.call(null,...i);if("L"===r)return Mt.create.call(null,...i);if("C"===r)return bn.create.call(null,...i);if("z"===r||"Z"===r)return go.create();throw new Error(`Invalid path segment type "${r}"`)}n.parse=function e(r){if(!r)return new n;const i=new n,o=n.normalize(r).match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g);if(null!=o)for(let a=0,l=o.length;a<l;a+=1){const d=o[a].match(/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g);if(null!=d){const h=d[0],f=d.slice(1).map(p=>+p),g=t.call(null,h,...f);i.appendSegment(g)}}return i},n.createSegment=t}(j||(j={})),function(n){n.normalize=N9,n.isValid=A9,n.drawArc=T9,n.drawPoints=fA,n.arcToCurves=ad}(j||(j={}));class qe{constructor(e){this.options=Object.assign({},e),this.data=this.options.data||{},this.register=this.register.bind(this),this.unregister=this.unregister.bind(this)}get names(){return Object.keys(this.data)}register(e,t,r=!1){if("object"==typeof e)return void Object.keys(e).forEach(o=>{this.register(o,e[o],t)});this.exist(e)&&!r&&!Yr.isApplyingHMR()&&this.onDuplicated(e);const i=this.options.process,s=i?Z(i,this,e,t):t;return this.data[e]=s,s}unregister(e){const t=e?this.data[e]:null;return delete this.data[e],t}get(e){return e?this.data[e]:null}exist(e){return!!e&&null!=this.data[e]}onDuplicated(e){try{throw this.options.onConflict&&Z(this.options.onConflict,this,e),new Error(`${il(this.options.type)} with name '${e}' already registered.`)}catch(t){throw t}}onNotFound(e,t){throw new Error(this.getSpellingSuggestion(e,t))}getSpellingSuggestion(e,t){const r=this.getSpellingSuggestionForName(e),i=t?`${t} ${EW(this.options.type)}`:this.options.type;return`${il(i)} with name '${e}' does not exist.${r?` Did you mean '${r}'?`:""}`}getSpellingSuggestionForName(e){return function SW(n,e,t){const r=Math.min(2,Math.floor(.34*n.length));let s,i=Math.floor(.4*n.length)+1,o=!1;const a=n.toLowerCase();for(const l of e){const c=t(l);if(void 0!==c&&Math.abs(c.length-a.length)<=r){const u=c.toLowerCase();if(u===a){if(c===n)continue;return l}if(o||c.length<3)continue;const d=_W(a,u,i-1);if(void 0===d)continue;d<3?(o=!0,s=l):(i=d,s=l)}}return s}(e,Object.keys(this.data),t=>t)}}!function(n){n.create=function e(t){return new n(t)}}(qe||(qe={}));const R9={color:"#aaaaaa",thickness:1,markup:"rect",update(n,e){const t=e.thickness*e.sx,r=e.thickness*e.sy;we(n,{width:t,height:r,rx:t,ry:r,fill:e.color})}},L9={color:"#aaaaaa",thickness:1,markup:"rect",update(n,e){const t=e.sx<=1?e.thickness*e.sx:e.thickness;we(n,{width:t,height:t,rx:t,ry:t,fill:e.color})}},k9={color:"rgba(224,224,224,1)",thickness:1,markup:"path",update(n,e){let t;const r=e.width,i=e.height,s=e.thickness;t=r-s>=0&&i-s>=0?["M",r,0,"H0 M0 0 V0",i].join(" "):"M 0 0 0 0",we(n,{d:t,stroke:e.color,"stroke-width":e.thickness})}},F9=[{color:"rgba(224,224,224,1)",thickness:1,markup:"path",update(n,e){let t;const r=e.width,i=e.height,s=e.thickness;t=r-s>=0&&i-s>=0?["M",r,0,"H0 M0 0 V0",i].join(" "):"M 0 0 0 0",we(n,{d:t,stroke:e.color,"stroke-width":e.thickness})}},{color:"rgba(224,224,224,0.2)",thickness:3,factor:4,markup:"path",update(n,e){let t;const r=e.factor||1,i=e.width*r,s=e.height*r,o=e.thickness;t=i-o>=0&&s-o>=0?["M",i,0,"H0 M0 0 V0",s].join(" "):"M 0 0 0 0",e.width=i,e.height=s,we(n,{d:t,stroke:e.color,"stroke-width":e.thickness})}}];class Qr{constructor(){this.patterns={},this.root=W.create(Ju(),{width:"100%",height:"100%"},[Cr("defs")]).node}add(e,t){const r=this.root.childNodes[0];r&&r.appendChild(t),this.patterns[e]=t,W.create("rect",{width:"100%",height:"100%",fill:`url(#${e})`}).appendTo(this.root)}get(e){return this.patterns[e]}has(e){return null!=this.patterns[e]}}!function(n){n.presets=Tr,n.registry=qe.create({type:"grid"}),n.registry.register(n.presets,!0)}(Qr||(Qr={}));const mA=function(n){const e=document.createElement("canvas"),t=n.width,r=n.height;e.width=2*t,e.height=r;const i=e.getContext("2d");return i.drawImage(n,0,0,t,r),i.translate(2*t,0),i.scale(-1,1),i.drawImage(n,0,0,t,r),e},yA=function(n){const e=document.createElement("canvas"),t=n.width,r=n.height;e.width=t,e.height=2*r;const i=e.getContext("2d");return i.drawImage(n,0,0,t,r),i.translate(0,2*r),i.scale(1,-1),i.drawImage(n,0,0,t,r),e},vA=function(n){const e=document.createElement("canvas"),t=n.width,r=n.height;e.width=2*t,e.height=2*r;const i=e.getContext("2d");return i.drawImage(n,0,0,t,r),i.setTransform(-1,0,0,-1,e.width,e.height),i.drawImage(n,0,0,t,r),i.setTransform(-1,0,0,1,e.width,0),i.drawImage(n,0,0,t,r),i.setTransform(1,0,0,-1,0,e.height),i.drawImage(n,0,0,t,r),e},j9=function(n,e){const t=n.width,r=n.height,i=document.createElement("canvas");i.width=3*t,i.height=3*r;const s=i.getContext("2d"),a=_e.toRad(null!=e.angle?-e.angle:-20),l=i.width/4,c=i.height/4;for(let u=0;u<4;u+=1)for(let d=0;d<4;d+=1)(u+d)%2>0&&(s.setTransform(1,0,0,1,(2*u-1)*l,(2*d-1)*c),s.rotate(a),s.drawImage(n,-t/2,-r/2,t,r));return i};var bl,mo;function Lm(n,e){return n??e}function ft(n,e){return null!=n&&Number.isFinite(n)?n:e}function B9(n={}){const e=Lm(n.color,"blue"),t=ft(n.width,1),r=ft(n.margin,2);return`\n    <filter>\n      <feFlood flood-color="${e}" flood-opacity="${ft(n.opacity,1)}" result="colored"/>\n      <feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${r+t}" />\n      <feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${r}" />\n      <feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/>\n      <feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/>\n      <feMerge>\n        <feMergeNode in="outline"/>\n        <feMergeNode in="SourceGraphic"/>\n      </feMerge>\n    </filter>\n  `.trim()}function $9(n={}){const e=Lm(n.color,"red"),t=ft(n.blur,0),r=ft(n.width,1);return`\n      <filter>\n        <feFlood flood-color="${e}" flood-opacity="${ft(n.opacity,1)}" result="colored"/>\n        <feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${r}"/>\n        <feComposite result="composed" in="colored" in2="morphed" operator="in"/>\n        <feGaussianBlur result="blured" in="composed" stdDeviation="${t}"/>\n        <feBlend in="SourceGraphic" in2="blured" mode="normal"/>\n      </filter>\n    `.trim()}function V9(n={}){const e=ft(n.x,2);return`\n    <filter>\n      <feGaussianBlur stdDeviation="${null!=n.y&&Number.isFinite(n.y)?[e,n.y]:e}"/>\n    </filter>\n  `.trim()}function H9(n={}){const e=ft(n.dx,0),t=ft(n.dy,0),r=Lm(n.color,"black"),i=ft(n.blur,4),s=ft(n.opacity,1);return"SVGFEDropShadowElement"in window?`<filter>\n         <feDropShadow stdDeviation="${i}" dx="${e}" dy="${t}" flood-color="${r}" flood-opacity="${s}" />\n       </filter>`.trim():`<filter>\n         <feGaussianBlur in="SourceAlpha" stdDeviation="${i}" />\n         <feOffset dx="${e}" dy="${t}" result="offsetblur" />\n         <feFlood flood-color="${r}" />\n         <feComposite in2="offsetblur" operator="in" />\n         <feComponentTransfer>\n           <feFuncA type="linear" slope="${s}" />\n         </feComponentTransfer>\n         <feMerge>\n           <feMergeNode/>\n           <feMergeNode in="SourceGraphic"/>\n         </feMerge>\n       </filter>`.trim()}function U9(n={}){const e=ft(n.amount,1),r=.7152-.7152*(1-e);return`\n    <filter>\n      <feColorMatrix type="matrix" values="${.2126+.7874*(1-e)} ${r} ${.0722-.0722*(1-e)} 0 0 ${.2126-.2126*(1-e)} ${.7152+.2848*(1-e)} ${.0722-.0722*(1-e)} 0 0 ${.2126-.2126*(1-e)} ${r} ${.0722+.9278*(1-e)} 0 0 0 0 0 1 0"/>\n    </filter>\n  `.trim()}function z9(n={}){const e=ft(n.amount,1);return`\n      <filter>\n        <feColorMatrix type="matrix" values="${.393+.607*(1-e)} ${.769-.769*(1-e)} ${.189-.189*(1-e)} 0 0 ${.349-.349*(1-e)} ${.686+.314*(1-e)} ${.168-.168*(1-e)} 0 0 ${.272-.272*(1-e)} ${.534-.534*(1-e)} ${.131+.869*(1-e)} 0 0 0 0 0 1 0"/>\n      </filter>\n    `.trim()}function G9(n={}){return`\n      <filter>\n        <feColorMatrix type="saturate" values="${1-ft(n.amount,1)}"/>\n      </filter>\n    `.trim()}function q9(n={}){return`\n      <filter>\n        <feColorMatrix type="hueRotate" values="${ft(n.angle,0)}"/>\n      </filter>\n    `.trim()}function W9(n={}){const e=ft(n.amount,1),t=1-e;return`\n      <filter>\n        <feComponentTransfer>\n          <feFuncR type="table" tableValues="${e} ${t}"/>\n          <feFuncG type="table" tableValues="${e} ${t}"/>\n          <feFuncB type="table" tableValues="${e} ${t}"/>\n        </feComponentTransfer>\n      </filter>\n    `.trim()}function Y9(n={}){const e=ft(n.amount,1);return`\n    <filter>\n      <feComponentTransfer>\n        <feFuncR type="linear" slope="${e}"/>\n        <feFuncG type="linear" slope="${e}"/>\n        <feFuncB type="linear" slope="${e}"/>\n      </feComponentTransfer>\n    </filter>\n  `.trim()}function Z9(n={}){const e=ft(n.amount,1),t=.5-e/2;return`\n    <filter>\n     <feComponentTransfer>\n        <feFuncR type="linear" slope="${e}" intercept="${t}"/>\n        <feFuncG type="linear" slope="${e}" intercept="${t}"/>\n        <feFuncB type="linear" slope="${e}" intercept="${t}"/>\n      </feComponentTransfer>\n    </filter>\n  `.trim()}!function(n){n.presets=Object.assign({},ci),n.presets["flip-x"]=mA,n.presets["flip-y"]=yA,n.presets["flip-xy"]=vA,n.registry=qe.create({type:"background pattern"}),n.registry.register(n.presets,!0)}(bl||(bl={})),function(n){n.presets=Ro,n.registry=qe.create({type:"filter"}),n.registry.register(n.presets,!0)}(mo||(mo={}));const X9={xlinkHref:"xlink:href",xlinkShow:"xlink:show",xlinkRole:"xlink:role",xlinkType:"xlink:type",xlinkArcrole:"xlink:arcrole",xlinkTitle:"xlink:title",xlinkActuate:"xlink:actuate",xmlSpace:"xml:space",xmlBase:"xml:base",xmlLang:"xml:lang",preserveAspectRatio:"preserveAspectRatio",requiredExtension:"requiredExtension",requiredFeatures:"requiredFeatures",systemLanguage:"systemLanguage",externalResourcesRequired:"externalResourceRequired"},J9={},bA={position:ud("x","width","origin")},wA={position:ud("y","height","origin")},K9={position:ud("x","width","corner")},Q9={position:ud("y","height","corner")},CA={set:ei("width","width")},DA={set:ei("height","height")},e7={set:ei("rx","width")},t7={set:ei("ry","height")},xA={set:(n=>{const e=ei("r","width"),t=ei("r","height");return function(r,i){const s=i.refBBox;return Z(s.height>s.width?e:t,this,r,i)}})()},n7={set(n,{refBBox:e}){let t=parseFloat(n);const r=br(n);r&&(t/=100);const i=Math.sqrt(e.height*e.height+e.width*e.width);let s;return Number.isFinite(t)&&(s=r||t>=0&&t<=1?t*i:Math.max(t+i,0)),{r:s}}},r7={set:ei("cx","width")},i7={set:ei("cy","height")},EA={set:AA({resetOffset:!0})},s7={set:AA({resetOffset:!1})},SA={set:MA({resetOffset:!0})},o7={set:MA({resetOffset:!1})},a7=xA,l7=EA,c7=SA,u7=bA,d7=wA,h7=CA,f7=DA;function ud(n,e,t){return(r,{refBBox:i})=>{if(null==r)return null;let s=parseFloat(r);const o=br(r);let a;if(o&&(s/=100),Number.isFinite(s)){const c=i[t];a=o||s>0&&s<1?c[n]+i[e]*s:c[n]+s}const l=new C;return l[n]=a||0,l}}function ei(n,e){return function(t,{refBBox:r}){let i=parseFloat(t);const s=br(t);s&&(i/=100);const o={};if(Number.isFinite(i)){const a=s||i>=0&&i<=1?i*r[e]:Math.max(i+r[e],0);o[n]=a}return o}}function _A(n,e){const t="x6-shape",r=e&&e.resetOffset;return function(i,{elem:s,refBBox:o}){let a=Ui(s,t);if(!a||a.value!==i){const p=n(i);a={value:i,shape:p,shapeBBox:p.bbox()},Ui(s,t,a)}const l=a.shape.clone(),c=a.shapeBBox.clone(),u=c.getOrigin(),d=o.getOrigin();c.x=d.x,c.y=d.y;const h=o.getMaxScaleToFit(c,d);return l.scale(0===c.width||0===o.width?1:h.sx,0===c.height||0===o.height?1:h.sy,u),r&&l.translate(-u.x,-u.y),l}}function AA(n){const t=_A(function e(r){return j.parse(r)},n);return(r,i)=>({d:t(r,i).serialize()})}function MA(n){const e=_A(t=>new Ge(t),n);return(t,r)=>({points:e(t,r).serialize()})}const g7={qualify:Jn,set:(n,{view:e})=>`url(#${e.graph.defineGradient(n)})`},p7={qualify:Jn,set(n,{view:e}){const t=e.cell,r=Object.assign({},n);if(t.isEdge()&&"linearGradient"===r.type){const s=e.sourcePoint,o=e.targetPoint;r.id=`gradient-${r.type}-${t.id}`,r.attrs=Object.assign(Object.assign({},r.attrs),{x1:s.x,y1:s.y,x2:o.x,y2:o.y,gradientUnits:"userSpaceOnUse"}),e.graph.defs.remove(r.id)}return`url(#${e.graph.defineGradient(r)})`}},TA={qualify:(n,{attrs:e})=>null==e.textWrap||!Jn(e.textWrap),set(n,{view:e,elem:t,attrs:r}){const i="x6-text",s=Ui(t,i),o=u=>{try{return JSON.parse(u)}catch{return u}},a={x:r.x,eol:r.eol,annotations:o(r.annotations),textPath:o(r["text-path"]||r.textPath),textVerticalAnchor:r["text-vertical-anchor"]||r.textVerticalAnchor,displayEmpty:"true"===(r["display-empty"]||r.displayEmpty),lineHeight:r["line-height"]||r.lineHeight},l=r["font-size"]||r.fontSize,c=JSON.stringify([n,a]);if(l&&t.setAttribute("font-size",l),null==s||s!==c){const u=a.textPath;if(null!=u&&"object"==typeof u){const d=u.selector;if("string"==typeof d){const h=e.find(d)[0];h instanceof SVGPathElement&&(wm(h),a.textPath=Object.assign({"xlink:href":`#${h.id}`},u))}}rA(t,`${n}`,a),Ui(t,i,c)}}},m7={qualify:Jn,set(n,{view:e,elem:t,attrs:r,refBBox:i}){const s=n,o=s.width||0;br(o)?i.width*=parseFloat(o)/100:o<=0?i.width+=o:i.width=o;const a=s.height||0;br(a)?i.height*=parseFloat(a)/100:a<=0?i.height+=a:i.height=a;let l,c=s.text;null==c&&(c=r.text),l=null!=c?function n9(n,e,t={},r={}){const i=e.width,s=e.height,o=r.eol||"\n",{width:a}=ul(n,t);if(a<i)return n;const l=[],c=t.fontSize||14,u=t.lineHeight?parseFloat(t.lineHeight):Math.ceil(1.4*c),d=Math.floor(s/u);let h=n,f=a,g=r.ellipsis,p=0;g&&("string"!=typeof g&&(g="\u2026"),p=ul(g,t).width);for(let m=0;m<d;m+=1){if(!(f>i)){l.push(h);break}if(m===d-1){const[b]=iA(h,i-p,f,t);l.push(g?`${b}${g}`:b)}else{const[b,y]=iA(h,i,f,t);l.push(b),h=y,f=ul(h,t).width}}return l.join(o)}(`${c}`,i,{"font-weight":r["font-weight"]||r.fontWeight,"font-size":r["font-size"]||r.fontSize,"font-family":r["font-family"]||r.fontFamily,lineHeight:r.lineHeight},{ellipsis:s.ellipsis}):"",Z(TA.set,this,l,{view:e,elem:t,attrs:r,refBBox:i,cell:e.cell})}},yo=(n,{attrs:e})=>void 0!==e.text,y7={qualify:yo},v7={qualify:yo},b7={qualify:yo},w7={qualify:yo},C7={qualify:yo},D7={qualify:yo},x7={qualify:(n,{elem:e})=>e instanceof SVGElement,set(n,{elem:e}){const t="x6-title",r=`${n}`,i=Ui(e,t);if(null==i||i!==r){Ui(e,t,r);const s=e.firstChild;if(s&&"TITLE"===s.tagName.toUpperCase())s.textContent=r;else{const o=document.createElementNS(e.namespaceURI,"title");o.textContent=r,e.insertBefore(o,s)}}}},E7={offset:PA("x","width","right")},S7={offset:PA("y","height","bottom")},_7={offset:(n,{refBBox:e})=>n?{x:-e.x,y:-e.y}:{x:0,y:0}};function PA(n,e,t){return(r,{refBBox:i})=>{const s=new C;let o;return o="middle"===r?i[e]/2:r===t?i[e]:"number"==typeof r&&Number.isFinite(r)?r>-1&&r<1?-i[e]*r:-r:br(r)?i[e]*parseFloat(r)/100:0,s[n]=-(i[n]+o),s}}const A7={qualify:Jn,set(n,{elem:e}){cl(e,n)}},M7={set(n,{elem:e}){e.innerHTML=`${n}`}},T7={qualify:Jn,set:(n,{view:e})=>`url(#${e.graph.defineFilter(n)})`},P7={set:n=>null!=n&&"object"==typeof n&&n.id?n.id:n};function Gi(n,e,t){let r,i;"object"==typeof e?(r=e.x,i=e.y):(r=e,i=t);const s=j.parse(n),o=s.bbox();if(o){let a=-o.height/2-o.y,l=-o.width/2-o.x;"number"==typeof r&&(l-=r),"number"==typeof i&&(a-=i),s.translate(l,a)}return s.serialize()}var IA=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t};const I7=n=>{var{size:e,width:t,height:r,offset:i,open:s}=n;return OA({size:e,width:t,height:r,offset:i},!0===s,!0,void 0,IA(n,["size","width","height","offset","open"]))},O7=n=>{var{size:e,width:t,height:r,offset:i,factor:s}=n;return OA({size:e,width:t,height:r,offset:i},!1,!1,s,IA(n,["size","width","height","offset","factor"]))};function OA(n,e,t,r=3/4,i={}){const s=n.size||10,o=n.width||s,a=n.height||s,l=new j,c={};if(e)l.moveTo(o,0).lineTo(0,a/2).lineTo(o,a),c.fill="none";else{if(l.moveTo(0,a/2),l.lineTo(o,0),!t){const u=mn(r,0,1);l.lineTo(o*u,a/2)}l.lineTo(o,a),l.close()}return Object.assign(Object.assign(Object.assign({},c),i),{tagName:"path",d:Gi(l.serialize(),{x:null!=n.offset?n.offset:-o/2})})}const R7=n=>{var{size:e,width:t,height:r,offset:i}=n,s=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(n,["size","width","height","offset"]);const o=e||10,a=t||o,l=r||o,c=new j;return c.moveTo(0,l/2).lineTo(a/2,0).lineTo(a,l/2).lineTo(a/2,l).close(),Object.assign(Object.assign({},s),{tagName:"path",d:Gi(c.serialize(),i??-a/2)})},k7=n=>{var{d:e,offsetX:t,offsetY:r}=n,i=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(n,["d","offsetX","offsetY"]);return Object.assign(Object.assign({},i),{tagName:"path",d:Gi(e,t,r)})},j7=n=>{var{size:e,width:t,height:r,offset:i}=n,s=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(n,["size","width","height","offset"]);const o=e||10,a=t||o,l=r||o,c=new j;return c.moveTo(0,0).lineTo(a,l).moveTo(0,l).lineTo(a,0),Object.assign(Object.assign({},s),{tagName:"path",fill:"none",d:Gi(c.serialize(),i||-a/2)})},$7=n=>{var{width:e,height:t,offset:r,open:i,flip:s}=n,o=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(n,["width","height","offset","open","flip"]);let a=t||6;const l=e||10,c=!0===i,u=!0===s,d=Object.assign(Object.assign({},o),{tagName:"path"});u&&(a=-a);const h=new j;return h.moveTo(0,a).lineTo(l,0),c?d.fill="none":(h.lineTo(l,a),h.close()),d.d=Gi(h.serialize(),{x:r||-l/2,y:a/2}),d};var NA=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t};const RA=n=>{var{r:e}=n,t=NA(n,["r"]);const r=e||5;return Object.assign(Object.assign({cx:r},t),{tagName:"circle",r})},V7=n=>{var{r:e}=n,t=NA(n,["r"]);const r=e||5,i=new j;return i.moveTo(r,0).lineTo(r,2*r),i.moveTo(0,r).lineTo(2*r,r),{children:[Object.assign(Object.assign({},RA({r})),{fill:"none"}),Object.assign(Object.assign({},t),{tagName:"path",d:Gi(i.serialize(),-r)})]}},U7=n=>{var{rx:e,ry:t}=n,r=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(n,["rx","ry"]);const i=e||5,s=t||5;return Object.assign(Object.assign({cx:i},r),{tagName:"ellipse",rx:i,ry:s})};var ti;function km(n){return"string"==typeof n||Jn(n)}(function(n){n.presets=Id,n.registry=qe.create({type:"marker"}),n.registry.register(n.presets,!0)})(ti||(ti={})),function(n){n.normalize=Gi}(ti||(ti={}));const G7={qualify:km,set:(n,{view:e,attrs:t})=>Fm("marker-start",n,e,t)},q7={qualify:km,set:(n,{view:e,attrs:t})=>Fm("marker-end",n,e,t,{transform:"rotate(180)"})},W7={qualify:km,set:(n,{view:e,attrs:t})=>Fm("marker-mid",n,e,t)};function Fm(n,e,t,r,i={}){const s="string"==typeof e?{name:e}:e,{name:o,args:a}=s,l=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(s,["name","args"]);let c=l;if(o&&"string"==typeof o){const d=ti.registry.get(o);if(!d)return ti.registry.onNotFound(o);c=d(Object.assign(Object.assign({},l),a))}const u=Object.assign(Object.assign(Object.assign({},function Y7(n,e){const t={},r=n.stroke;"string"==typeof r&&(t.stroke=r,t.fill=r);let i=n.strokeOpacity;if(null==i&&(i=n["stroke-opacity"]),null==i&&(i=n.opacity),null!=i&&(t["stroke-opacity"]=i,t["fill-opacity"]=i),"marker-mid"!==e){const s=parseFloat(n.strokeWidth||n["stroke-width"]);if(Number.isFinite(s)&&s>1){const o=Math.ceil(s/2);t.refX="marker-start"===e?o:-o}}return t}(r,n)),i),c);return{[n]:`url(#${t.graph.defineMarker(u)})`}}const wl=(n,{view:e})=>e.cell.isEdge(),Z7={qualify:wl,set(n,e){var t,r,i,s;const o=e.view,a=n.reverse||!1,l=n.stubs||0;let c;if(Number.isFinite(l)&&0!==l)if(a){let u,d;const h=o.getConnectionLength()||0;l<0?(u=(h+l)/2,d=-l):(u=l,d=h-2*l),c=null===(s=null===(i=null===(r=null===(t=o.getConnection()?.divideAtLength(u))||void 0===t?void 0:t[1])||void 0===r?void 0:r.divideAtLength(d))||void 0===i?void 0:i[0])||void 0===s?void 0:s.serialize()}else{let u;u=l<0?((o.getConnectionLength()||0)+l)/2:l;const d=o.getConnection();if(d){const h=d.divideAtLength(u),f=d.divideAtLength(-u);h&&f&&(c=`${h[0].serialize()} ${f[1].serialize()}`)}}return{d:c||o.getConnectionPathData()}}},LA={qualify:wl,set:dd("getTangentAtLength",{rotate:!0})},X7={qualify:wl,set:dd("getTangentAtLength",{rotate:!1})},kA={qualify:wl,set:dd("getTangentAtRatio",{rotate:!0})},J7={qualify:wl,set:dd("getTangentAtRatio",{rotate:!1})},K7=LA,Q7=kA;function dd(n,e){const t={x:1,y:0};return(r,i)=>{let s,o;const a=i.view,l=a[n](Number(r));return l?(o=e.rotate?l.vector().vectorAngle(t):0,s=l.start):(s=a.path.start,o=0),0===o?{transform:`translate(${s.x},${s.y}')`}:{transform:`translate(${s.x},${s.y}') rotate(${o})`}}}var Qn;(function(n){n.isValidDefinition=function e(t,r,i){return!(null==t||"string"!=typeof t&&"function"==typeof t.qualify&&!Z(t.qualify,this,r,i))}})(Qn||(Qn={})),function(n){n.presets=Object.assign(Object.assign({},X9),Od),n.registry=qe.create({type:"attribute definition"}),n.registry.register(n.presets,!0)}(Qn||(Qn={}));const wt={prefixCls:"x6",autoInsertCSS:!0,useCSSSelector:!0,prefix:n=>`${wt.prefixCls}-${n}`},FA=wt.prefix("highlighted"),eY={highlight(n,e,t){he(e,t&&t.className||FA)},unhighlight(n,e,t){yn(e,t&&t.className||FA)}},jA=wt.prefix("highlight-opacity"),tY={highlight(n,e){he(e,jA)},unhighlight(n,e){yn(e,jA)}};var ve;!function(n){const e=Cr("svg");function t(f,g){const p=function f9(n,e){const t=id.createSVGPoint();return t.x=n,t.y=e,t}(f.x,f.y).matrixTransform(g);return new C(p.x,p.y)}function s(f,g){const p=e.createSVGPoint();p.x=f.x,p.y=f.y;const m=p.matrixTransform(g);p.x=f.x+f.width,p.y=f.y;const v=p.matrixTransform(g);p.x=f.x+f.width,p.y=f.y+f.height;const b=p.matrixTransform(g);p.x=f.x,p.y=f.y+f.height;const y=p.matrixTransform(g),w=Math.min(m.x,v.x,b.x,y.x),D=Math.max(m.x,v.x,b.x,y.x),x=Math.min(m.y,v.y,b.y,y.y),S=Math.max(m.y,v.y,b.y,y.y);return new P(w,x,D-w,S-x)}function a(f,g={}){let p;if(!f.ownerSVGElement||!Zr(f)){if(z_(f)){const{left:y,top:w,width:D,height:x}=l(f);return new P(y,w,D,x)}return new P(0,0,0,0)}let v=g.target;if(!g.recursive){try{p=f.getBBox()}catch{p={x:f.clientLeft,y:f.clientTop,width:f.clientWidth,height:f.clientHeight}}return v?s(p,fl(f,v)):P.create(p)}{const y=f.childNodes,w=y.length;if(0===w)return a(f,{target:v});v||(v=f);for(let D=0;D<w;D+=1){const x=y[D];let S;S=a(x,0===x.childNodes.length?{target:v}:{target:v,recursive:!0}),p=p?p.union(S):S}return p}}function l(f){let g=0,p=0,m=0,v=0;if(f){let b=f;for(;b;)g+=b.offsetLeft,p+=b.offsetTop,b=b.offsetParent,b&&(g+=parseInt(Am(b,"borderLeft"),10),p+=parseInt(Am(b,"borderTop"),10));m=f.offsetWidth,v=f.offsetHeight}return{left:g,top:p,width:m,height:v}}function c(f){const g=p=>{const m=f.getAttribute(p),v=m?parseFloat(m):0;return Number.isNaN(v)?0:v};switch(f instanceof SVGElement&&f.nodeName.toLowerCase()){case"rect":return new P(g("x"),g("y"),g("width"),g("height"));case"circle":return new kn(g("cx"),g("cy"),g("r"),g("r"));case"ellipse":return new kn(g("cx"),g("cy"),g("rx"),g("ry"));case"polyline":{const p=rd(f);return new Ge(p)}case"polygon":{const p=rd(f);return p.length>1&&p.push(p[0]),new Ge(p)}case"path":{let p=f.getAttribute("d");return j.isValid(p)||(p=j.normalize(p)),j.parse(p)}case"line":return new R(g("x1"),g("y1"),g("x2"),g("y2"))}return a(f)}function d(f){if(null==f)return null;let g=f;do{let p=g.tagName;if("string"!=typeof p)return null;if(p=p.toUpperCase(),Vi(g,"x6-port"))g=g.nextElementSibling;else if("G"===p)g=g.firstElementChild;else{if("TITLE"!==p)break;g=g.nextElementSibling}}while(g);return g}n.transformPoint=t,n.transformLine=function r(f,g){return new R(t(f.start,g),t(f.end,g))},n.transformPolyline=function i(f,g){let p=f instanceof Ge?f.points:f;return Array.isArray(p)||(p=[]),new Ge(p.map(m=>t(m,g)))},n.transformRectangle=s,n.bbox=function o(f,g,p){let m;const v=f.ownerSVGElement;if(!v)return new P(0,0,0,0);try{m=f.getBBox()}catch{m={x:f.clientLeft,y:f.clientTop,width:f.clientWidth,height:f.clientHeight}}return g?P.create(m):s(m,fl(f,p||v))},n.getBBox=a,n.getBoundingOffsetRect=l,n.toGeometryShape=c,n.translateAndAutoOrient=function u(f,g,p,m){const v=C.create(g),b=C.create(p);m||(m=f instanceof SVGSVGElement?f:f.ownerSVGElement);const y=Im(f);f.setAttribute("transform","");const w=a(f,{target:m}).scale(y.sx,y.sy),D=dl();D.setTranslate(-w.x-w.width/2,-w.y-w.height/2);const x=dl(),S=v.angleBetween(b,v.clone().translate(1,0));S&&x.setRotate(S,0,0);const M=dl(),T=v.clone().move(b,w.width/2);M.setTranslate(2*v.x-T.x,2*v.y-T.y);const k=fl(f,m),I=dl();I.setMatrix(M.matrix.multiply(x.matrix.multiply(D.matrix.multiply(k.scale(y.sx,y.sy))))),f.setAttribute("transform",uo(I.matrix))},n.findShapeNode=d,n.getBBoxV2=function h(f){const g=d(f);if(!Zr(g)){if(z_(f)){const{left:m,top:v,width:b,height:y}=l(f);return new P(m,v,b,y)}return new P(0,0,0,0)}return c(g).bbox()||P.create()}}(ve||(ve={}));const nY={padding:3,rx:0,ry:0,attrs:{"stroke-width":3,stroke:"#FEB663"}},rY={highlight(n,e,t){const r=ni.getHighlighterId(e,t);if(ni.hasCache(r))return;t=kS({},t,nY);const i=W.create(e);let s,o;try{s=i.toPathData()}catch{o=ve.bbox(i.node,!0),s=oA(Object.assign(Object.assign({},t),o))}const a=Cr("path");if(we(a,Object.assign({d:s,"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},t.attrs?ll(t.attrs):null)),n.isEdgeElement(e))we(a,"d",n.getConnectionPathData());else{let u=i.getTransformToElement(n.container);const d=t.padding;if(d){null==o&&(o=ve.bbox(i.node,!0));const h=o.x+o.width/2,f=o.y+o.height/2;o=ve.transformRectangle(o,u);const g=Math.max(o.width,1),p=Math.max(o.height,1),m=(g+d)/g,v=(p+d)/p,b=ht({a:m,b:0,c:0,d:v,e:h-m*h,f:f-v*f});u=u.multiply(b)}ho(a,u)}he(a,wt.prefix("highlight-stroke"));const l=n.cell,c=()=>ni.removeHighlighter(r);l.on("removed",c),l.model&&l.model.on("reseted",c),n.container.appendChild(a),ni.setCache(r,a)},unhighlight(n,e,t){ni.removeHighlighter(ni.getHighlighterId(e,t))}};var ni,xr;function jm(n,e={}){return new C(wr(e.x,n.width),wr(e.y,n.height))}function Bm(n,e,t){return Object.assign({angle:e,position:n.toJSON()},t)}!function(n){n.getHighlighterId=function e(o,a){return wm(o),o.id+JSON.stringify(a)};const t={};n.setCache=function r(o,a){t[o]=a},n.hasCache=function i(o){return null!=t[o]},n.removeHighlighter=function s(o){const a=t[o];a&&(co(a),delete t[o])}}(ni||(ni={})),function(n){n.check=function e(t,r){if("function"!=typeof r.highlight)throw new Error(`Highlighter '${t}' is missing required \`highlight()\` method`);if("function"!=typeof r.unhighlight)throw new Error(`Highlighter '${t}' is missing required \`unhighlight()\` method`)}}(xr||(xr={})),function(n){n.presets=Nd,n.registry=qe.create({type:"highlighter"}),n.registry.register(n.presets,!0)}(xr||(xr={}));const iY=(n,e)=>n.map(({x:t,y:r,angle:i})=>Bm(jm(e,{x:t,y:r}),i||0)),sY=(n,e,t)=>{const i=t.step||20;return BA(n,e,t.start||0,(s,o)=>(s+.5-o/2)*i)},oY=(n,e,t)=>{const i=t.step||360/n.length;return BA(n,e,t.start||0,s=>s*i)};function BA(n,e,t,r){const i=e.getCenter(),s=e.getTopCenter(),o=e.width/e.height,a=kn.fromRect(e),l=n.length;return n.map((c,u)=>{const d=t+r(u,l),h=s.clone().rotate(-d,i).scale(o,1,i),f=c.compensateRotate?-a.tangentTheta(h):0;return(c.dx||c.dy)&&h.translate(c.dx||0,c.dy||0),c.dr&&h.move(i,c.dr),Bm(h.round(),f,c)})}const lY=(n,e,t)=>Cl(n,jm(e,t.start||e.getOrigin()),jm(e,t.end||e.getCorner()),t),cY=(n,e,t)=>Cl(n,e.getTopLeft(),e.getBottomLeft(),t),uY=(n,e,t)=>Cl(n,e.getTopRight(),e.getBottomRight(),t),dY=(n,e,t)=>Cl(n,e.getTopLeft(),e.getTopRight(),t),hY=(n,e,t)=>Cl(n,e.getBottomLeft(),e.getBottomRight(),t);function Cl(n,e,t,r){const i=new R(e,t),s=n.length;return n.map((o,a)=>{var{strict:l}=o,c=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(o,["strict"]);const d=i.pointAt(l||r.strict?(a+1)/(s+1):(a+.5)/s);return(c.dx||c.dy)&&d.translate(c.dx||0,c.dy||0),Bm(d.round(),0,c)})}var qi;!function(n){n.presets=Rd,n.registry=qe.create({type:"port layout"}),n.registry.register(n.presets,!0)}(qi||(qi={}));const fY={position:{x:0,y:0},angle:0,attrs:{".":{y:"0","text-anchor":"start"}}};function ri(n,e){const{x:t,y:r,angle:i,attrs:s}=e||{};return kS({},{angle:i,attrs:s,position:{x:t,y:r}},n,fY)}const gY=(n,e,t)=>ri({position:e.getTopLeft()},t),pY=(n,e,t)=>ri({position:{x:-15,y:0},attrs:{".":{y:".3em","text-anchor":"end"}}},t),mY=(n,e,t)=>ri({position:{x:15,y:0},attrs:{".":{y:".3em","text-anchor":"start"}}},t),yY=(n,e,t)=>ri({position:{x:0,y:-15},attrs:{".":{"text-anchor":"middle"}}},t),vY=(n,e,t)=>ri({position:{x:0,y:15},attrs:{".":{y:".6em","text-anchor":"middle"}}},t),bY=(n,e,t)=>$A(n,e,!1,t),wY=(n,e,t)=>$A(n,e,!0,t),CY=(n,e,t)=>VA(n,e,!1,t),DY=(n,e,t)=>VA(n,e,!0,t);function $A(n,e,t,r){const i=null!=r.offset?r.offset:15,s=e.getCenter().theta(n),o=HA(e);let a,l,c,u,d=0;return s<o[1]||s>o[2]?(a=".3em",l=i,c=0,u="start"):s<o[0]?(a="0",l=0,c=-i,t?(d=-90,u="start"):u="middle"):s<o[3]?(a=".3em",l=-i,c=0,u="end"):(a=".6em",l=0,c=i,t?(d=90,u="start"):u="middle"),ri({position:{x:Math.round(l),y:Math.round(c)},angle:d,attrs:{".":{y:a,"text-anchor":u}}},r)}function VA(n,e,t,r){const i=null!=r.offset?r.offset:15,s=e.getCenter().theta(n),o=HA(e);let a,l,c,u,d=0;return s<o[1]||s>o[2]?(a=".3em",l=-i,c=0,u="end"):s<o[0]?(a=".6em",l=0,c=i,t?(d=90,u="start"):u="middle"):s<o[3]?(a=".3em",l=i,c=0,u="start"):(a="0em",l=0,c=-i,t?(d=-90,u="start"):u="middle"),ri({position:{x:Math.round(l),y:Math.round(c)},angle:d,attrs:{".":{y:a,"text-anchor":u}}},r)}function HA(n){const e=n.getCenter(),t=e.theta(n.getTopLeft()),r=e.theta(n.getBottomLeft()),i=e.theta(n.getBottomRight());return[t,e.theta(n.getTopRight()),i,r]}const xY=(n,e,t)=>UA(n.diff(e.getCenter()),!1,t),EY=(n,e,t)=>UA(n.diff(e.getCenter()),!0,t);function UA(n,e,t){const r=null!=t.offset?t.offset:20,i=new C(0,0),s=-n.theta(i);let l,a=".3em",c=s;return(s+90)%180==0?(l=e?"end":"middle",!e&&-270===s&&(a="0em")):s>-270&&s<-90?(l="start",c=s-180):l="end",ri({position:n.clone().move(i,r).diff(n).round().round().toJSON(),angle:e?c:0,attrs:{".":{y:a,"text-anchor":l}}},t)}var vo,$m,Ae;!function(n){n.presets=Ld,n.registry=qe.create({type:"port label layout"}),n.registry.register(n.presets,!0)}(vo||(vo={}));class ke extends pn{get priority(){return 2}constructor(){super(),this.cid=$m.uniqueId(),ke.views[this.cid]=this}confirmUpdate(e,t){return 0}empty(e=this.container){return ol(e),this}unmount(e=this.container){return co(e),this}remove(e=this.container){return e===this.container&&(this.removeEventListeners(document),this.onRemove(),delete ke.views[this.cid]),this.unmount(e),this}onRemove(){}setClass(e,t=this.container){t.classList.value=Array.isArray(e)?e.join(" "):e}addClass(e,t=this.container){return he(t,Array.isArray(e)?e.join(" "):e),this}removeClass(e,t=this.container){return yn(t,Array.isArray(e)?e.join(" "):e),this}setStyle(e,t=this.container){return cl(t,e),this}setAttrs(e,t=this.container){return null!=e&&null!=t&&we(t,e),this}findAttr(e,t=this.container){let r=t;for(;r&&1===r.nodeType;){const i=r.getAttribute(e);if(null!=i)return i;if(r===this.container)return null;r=r.parentNode}return null}find(e,t=this.container,r=this.selectors){return ke.find(e,t,r).elems}findOne(e,t=this.container,r=this.selectors){const i=this.find(e,t,r);return i.length>0?i[0]:null}findByAttr(e,t=this.container){let r=t;for(;r&&r.getAttribute;){const i=r.getAttribute(e);if((null!=i||r===this.container)&&"false"!==i)return r;r=r.parentNode}return null}getSelector(e,t){let r;if(e===this.container)return"string"==typeof t&&(r=`> ${t}`),r;if(e){const i=Dm(e)+1;r=`${e.tagName.toLowerCase()}:nth-child(${i})`,t&&(r+=` > ${t}`),r=this.getSelector(e.parentNode,r)}return r}prefixClassName(e){return wt.prefix(e)}delegateEvents(e,t){if(null==e)return this;t||this.undelegateEvents();const r=/^(\S+)\s*(.*)$/;return Object.keys(e).forEach(i=>{const s=i.match(r);if(null==s)return;const o=this.getEventHandler(e[i]);"function"==typeof o&&this.delegateEvent(s[1],s[2],o)}),this}undelegateEvents(){return Ht.off(this.container,this.getEventNamespace()),this}delegateDocumentEvents(e,t){return this.addEventListeners(document,e,t),this}undelegateDocumentEvents(){return this.removeEventListeners(document),this}delegateEvent(e,t,r){return Ht.on(this.container,e+this.getEventNamespace(),t,r),this}undelegateEvent(e,t,r){const i=e+this.getEventNamespace();return null==t?Ht.off(this.container,i):"string"==typeof t?Ht.off(this.container,i,t,r):Ht.off(this.container,i,t),this}addEventListeners(e,t,r){if(null==t)return this;const i=this.getEventNamespace();return Object.keys(t).forEach(s=>{const o=this.getEventHandler(t[s]);"function"==typeof o&&Ht.on(e,s+i,r,o)}),this}removeEventListeners(e){return null!=e&&Ht.off(e,this.getEventNamespace()),this}getEventNamespace(){return`.${wt.prefixCls}-event-${this.cid}`}getEventHandler(e){let t;if("string"==typeof e){const r=this[e];"function"==typeof r&&(t=(...i)=>r.call(this,...i))}else t=(...r)=>e.call(this,...r);return t}getEventTarget(e,t={}){const{target:r,type:i,clientX:s=0,clientY:o=0}=e;return t.fromPoint||"touchmove"===i||"touchend"===i?document.elementFromPoint(s,o):r}stopPropagation(e){return this.setEventData(e,{propagationStopped:!0}),this}isPropagationStopped(e){return!0===this.getEventData(e).propagationStopped}getEventData(e){return this.eventData(e)}setEventData(e,t){return this.eventData(e,t)}eventData(e,t){if(null==e)throw new TypeError("Event object required");let r=e.data;const i=`__${this.cid}__`;return null==t?null==r?{}:r[i]||{}:(null==r&&(r=e.data={}),r[i]=Object.assign(null==r[i]?{}:Object.assign({},r[i]),t),r[i])}normalizeEvent(e){return ke.normalizeEvent(e)}}(function(n){n.createElement=function e(i,s){return s?Cr(i||"g"):Cm(i||"div")},n.find=function t(i,s,o){if(!i||"."===i)return{elems:[s]};if(o){const a=o[i];if(a)return{elems:Array.isArray(a)?a:[a]}}if(wt.useCSSSelector){const a=i.includes(">")?`:scope ${i}`:i;return{isCSSSelector:!0,elems:Array.prototype.slice.call(s.querySelectorAll(a))}}return{elems:[]}},n.normalizeEvent=function r(i){let s=i;const o=i.originalEvent,a=o&&o.changedTouches&&o.changedTouches[0];if(a){for(const c in i)void 0===a[c]&&(a[c]=i[c]);s=a}const l=s.target;if(l){const c=l.correspondingUseElement;c&&(s.target=c)}return s}})(ke||(ke={})),function(n){n.views={},n.getView=function e(t){return n.views[t]||null}}(ke||(ke={})),function(n){let e=0;n.uniqueId=function t(){const r=`v${e}`;return e+=1,r}}($m||($m={}));class SY{constructor(e){this.view=e,this.clean()}clean(){this.elemCache&&this.elemCache.dispose(),this.elemCache=new Nm,this.pathCache={}}get(e){return this.elemCache.has(e)||this.elemCache.set(e,{}),this.elemCache.get(e)}getData(e){const t=this.get(e);return t.data||(t.data={}),t.data}getMatrix(e){const t=this.get(e);return null==t.matrix&&(t.matrix=function v9(n,e){let t=ht();if(Zr(e)&&Zr(n)){let r=n;const i=[];for(;r&&r!==e;){const o=hl(r.getAttribute("transform")||null);i.push(o),r=r.parentNode}i.reverse().forEach(s=>{t=t.multiply(s)})}return t}(e,this.view.container)),ht(t.matrix)}getShape(e){const t=this.get(e);return null==t.shape&&(t.shape=ve.toGeometryShape(e)),t.shape.clone()}getBoundingRect(e){const t=this.get(e);return null==t.boundingRect&&(t.boundingRect=ve.getBBoxV2(e)),t.boundingRect.clone()}}(function(n){function t(c){return null!=c&&"string"==typeof c}function s(c,u={ns:dt.svg}){const d=document.createDocumentFragment(),h={},f={},g=[{markup:Array.isArray(c)?c:[c],parent:d,ns:u.ns}];for(;g.length>0;){const p=g.pop();let m=p.ns||dt.svg;const b=p.parent;p.markup.forEach(y=>{const w=y.tagName;if(!w)throw new TypeError("Invalid tagName");y.ns&&(m=y.ns);const D=m?Cm(w,m):V_(w),x=y.attrs;x&&we(D,ll(x));const S=y.style;S&&cl(D,S);const M=y.className;null!=M&&D.setAttribute("class",Array.isArray(M)?M.join(" "):M),y.textContent&&(D.textContent=y.textContent);const T=y.selector;if(null!=T){if(f[T])throw new TypeError("Selector must be unique");f[T]=D}if(y.groupSelector){let I=y.groupSelector;Array.isArray(I)||(I=[I]),I.forEach(F=>{h[F]||(h[F]=[]),h[F].push(D)})}b.appendChild(D);const k=y.children;Array.isArray(k)&&g.push({ns:m,markup:k,parent:D})})}return Object.keys(h).forEach(p=>{if(f[p])throw new Error("Ambiguous group selector");f[p]=h[p]}),{fragment:d,selectors:f,groups:h}}function o(c){return c instanceof SVGElement?Cr("g"):V_("div")}n.isJSONMarkup=function e(c){return null!=c&&!t(c)},n.isStringMarkup=t,n.clone=function r(c){return null==c||t(c)?c:Be(c)},n.sanitize=function i(c){return`${c}`.trim().replace(/[\r|\n]/g," ").replace(/>\s+</g,"><")},n.parseJSONMarkup=s,n.renderMarkup=function a(c){if(t(c)){const f=W.createVectors(c),g=f.length;if(1===g)return{elem:f[0].node};if(g>1){const p=o(f[0].node);return f.forEach(m=>{p.appendChild(m.node)}),{elem:p}}return{}}const u=s(c),d=u.fragment;let h=null;return d.childNodes.length>1?(h=o(d.firstChild),h.appendChild(d)):h=d.firstChild,{elem:h,selectors:u.selectors}},n.parseLabelStringMarkup=function l(c){const u=W.createVectors(c),d=document.createDocumentFragment();for(let h=0,f=u.length;h<f;h+=1)d.appendChild(u[h].node);return{fragment:d,selectors:{}}}})(Ae||(Ae={})),function(n){n.getSelector=function e(t,r,i){if(null!=t){let s;const o=t.tagName.toLowerCase();if(t===r)return s="string"==typeof i?`> ${o} > ${i}`:`> ${o}`,s;const a=t.parentNode;return s=a&&a.childNodes.length>1?`${o}:nth-child(${Dm(t)+1})`:o,i&&(s+=` > ${i}`),e(t.parentNode,r,s)}return i}}(Ae||(Ae={})),function(n){n.getPortContainerMarkup=function e(){return"g"},n.getPortMarkup=function t(){return{tagName:"circle",selector:"circle",attrs:{r:10,fill:"#FFFFFF",stroke:"#000000"}}},n.getPortLabelMarkup=function r(){return{tagName:"text",selector:"text",attrs:{fill:"#000000"}}}}(Ae||(Ae={})),function(n){n.getEdgeMarkup=function e(){return[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}]}}(Ae||(Ae={})),function(n){n.getForeignObjectMarkup=function e(t=!1){return{tagName:"foreignObject",selector:"fo",children:[{ns:dt.xhtml,tagName:"body",selector:"foBody",attrs:{xmlns:dt.xhtml},style:{width:"100%",height:"100%",background:"transparent"},children:t?[]:[{tagName:"div",selector:"foContent",style:{width:"100%",height:"100%"}}]}]}}}(Ae||(Ae={}));class zA{constructor(e){this.view=e}get cell(){return this.view.cell}getDefinition(e){return this.cell.getAttrDefinition(e)}processAttrs(e,t){let r,i,s,o;const a=[];return Object.keys(t).forEach(l=>{const c=t[l],u=this.getDefinition(l),d=Z(Qn.isValidDefinition,this.view,u,c,{elem:e,attrs:t,cell:this.cell,view:this.view});if(u&&d)"string"==typeof u?(null==r&&(r={}),r[u]=c):null!==c&&a.push({name:l,definition:u});else{null==r&&(r={});const h=G_.includes(l)?l:C_(l);r[h]=c}}),a.forEach(({name:l,definition:c})=>{const u=t[l];"function"==typeof c.set&&(null==i&&(i={}),i[l]=u),"function"==typeof c.offset&&(null==s&&(s={}),s[l]=u),"function"==typeof c.position&&(null==o&&(o={}),o[l]=u)}),{raw:t,normal:r,set:i,offset:s,position:o}}mergeProcessedAttrs(e,t){e.set=Object.assign(Object.assign({},e.set),t.set),e.position=Object.assign(Object.assign({},e.position),t.position),e.offset=Object.assign(Object.assign({},e.offset),t.offset);const r=e.normal&&e.normal.transform;null!=r&&t.normal&&(t.normal.transform=r),e.normal=t.normal}findAttrs(e,t,r,i){const s=[],o=new Nm;return Object.keys(e).forEach(a=>{const l=e[a];if(!Jn(l))return;const{isCSSSelector:c,elems:u}=ke.find(a,t,i);r[a]=u;for(let d=0,h=u.length;d<h;d+=1){const f=u[d],g=i&&i[a]===f,p=o.get(f);if(p){p.array||(s.push(f),p.array=!0,p.attrs=[p.attrs],p.priority=[p.priority]);const m=p.attrs,v=p.priority;if(g)m.unshift(l),v.unshift(-1);else{const b=PG(v,c?-1:h);m.splice(b,0,l),v.splice(b,0,h)}}else o.set(f,{elem:f,attrs:l,priority:g?-1:h,array:!1})}}),s.forEach(a=>{const l=o.get(a);l.attrs=l.attrs.reduceRight((u,d)=>ze(u,d),{})}),o}updateRelativeAttrs(e,t,r){const i=t.raw||{};let s=t.normal||{};const o=t.set,a=t.position,l=t.offset,c=()=>({elem:e,cell:this.cell,view:this.view,attrs:i,refBBox:r.clone()});if(null!=o&&Object.keys(o).forEach(m=>{const v=o[m],b=this.getDefinition(m);if(null!=b){const y=Z(b.set,this.view,v,c());"object"==typeof y?s=Object.assign(Object.assign({},s),y):null!=y&&(s[m]=y)}}),e instanceof HTMLElement)return void this.view.setAttrs(s,e);const u=s.transform,h=hl(u?`${u}`:null),f=new C(h.e,h.f);u&&(delete s.transform,h.e=0,h.f=0);let g=!1;null!=a&&Object.keys(a).forEach(m=>{const v=a[m],b=this.getDefinition(m);if(null!=b){const y=Z(b.position,this.view,v,c());null!=y&&(g=!0,f.translate(C.create(y)))}}),this.view.setAttrs(s,e);let p=!1;if(null!=l){const m=this.view.getBoundingRectOfElement(e);if(m.width>0&&m.height>0){const v=ve.transformRectangle(m,h);Object.keys(l).forEach(b=>{const y=l[b],w=this.getDefinition(b);if(null!=w){const D=Z(w.offset,this.view,y,{elem:e,cell:this.cell,view:this.view,attrs:i,refBBox:v});null!=D&&(p=!0,f.translate(C.create(D)))}})}}(null!=u||g||p)&&(f.round(1),h.e=f.x,h.f=f.y,e.setAttribute("transform",uo(h)))}update(e,t,r){const i={},s=this.findAttrs(r.attrs||t,e,i,r.selectors),o=r.attrs?this.findAttrs(t,e,i,r.selectors):s,a=[];s.each(u=>{const d=u.elem,h=u.attrs,f=this.processAttrs(d,h);if(null==f.set&&null==f.position&&null==f.offset)this.view.setAttrs(f.normal,d);else{const g=o.get(d),p=g?g.attrs:null,m=p&&null==h.ref?p.ref:h.ref;let v;if(m){if(v=(i[m]||this.view.find(m,e,r.selectors))[0],!v)throw new Error(`"${m}" reference does not exist.`)}else v=null;const b={node:d,refNode:v,attributes:p,processedAttributes:f},y=a.findIndex(w=>w.refNode===d);y>-1?a.splice(y,0,b):a.push(b)}});const l=new Nm;let c;a.forEach(u=>{const d=u.node,h=u.refNode;let f;const g=null!=h&&null!=r.rotatableNode&&U_(r.rotatableNode,h);let p;h&&(f=l.get(h)),f||(f=h?ve.getBBox(h,{target:g?r.rotatableNode:e}):r.rootBBox,h&&l.set(h,f)),r.attrs&&u.attributes?(p=this.processAttrs(d,u.attributes),this.mergeProcessedAttrs(p,u.processedAttributes)):p=u.processedAttributes;let m=f;g&&null!=r.rotatableNode&&!r.rotatableNode.contains(d)&&(c||(c=hl(we(r.rotatableNode,"transform"))),m=ve.transformRectangle(f,c)),this.updateRelativeAttrs(d,p,m)})}}class GA{get cell(){return this.view.cell}constructor(e,t,r=[]){this.view=e;const i={},s={};let o=0;Object.keys(t).forEach(l=>{let c=t[l];Array.isArray(c)||(c=[c]),c.forEach(u=>{let d=i[u];d||(o+=1,d=i[u]=1<<o),s[l]|=d})});let a=r;if(Array.isArray(a)||(a=[a]),a.forEach(l=>{i[l]||(o+=1,i[l]=1<<o)}),o>25)throw new Error("Maximum number of flags exceeded.");this.flags=i,this.attrs=s,this.bootstrap=r}getFlag(e){const t=this.flags;return null==t?0:Array.isArray(e)?e.reduce((r,i)=>r|t[i],0):0|t[e]}hasAction(e,t){return e&this.getFlag(t)}removeAction(e,t){return e^e&this.getFlag(t)}getBootstrapFlag(){return this.getFlag(this.bootstrap)}getChangedFlag(){let e=0;return this.attrs&&Object.keys(this.attrs).forEach(t=>{this.cell.hasChanged(t)&&(e|=this.attrs[t])}),e}}let Tt=(()=>{class n extends ke{static getDefaults(){return this.defaults}static config(t){this.defaults=this.getOptions(t)}static getOptions(t){const r=(u,d)=>null!=d?HS([...Array.isArray(u)?u:[u],...Array.isArray(d)?d:[d]]):Array.isArray(u)?[...u]:[u],i=Be(this.getDefaults()),{bootstrap:s,actions:o,events:a,documentEvents:l}=t,c=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(t,["bootstrap","actions","events","documentEvents"]);return s&&(i.bootstrap=r(i.bootstrap,s)),o&&Object.keys(o).forEach(u=>{const d=o[u],h=i.actions[u];d&&h?i.actions[u]=r(h,d):d&&(i.actions[u]=r(d))}),a&&(i.events=Object.assign(Object.assign({},i.events),a)),t.documentEvents&&(i.documentEvents=Object.assign(Object.assign({},i.documentEvents),l)),ze(i,c)}get[Symbol.toStringTag](){return n.toStringTag}constructor(t,r={}){super(),this.cell=t,this.options=this.ensureOptions(r),this.graph=this.options.graph,this.attr=new zA(this),this.flag=new GA(this,this.options.actions,this.options.bootstrap),this.cache=new SY(this),this.setContainer(this.ensureContainer()),this.setup(),this.init()}init(){}onRemove(){this.removeTools()}get priority(){return this.options.priority}get rootSelector(){return this.options.rootSelector}getConstructor(){return this.constructor}ensureOptions(t){return this.getConstructor().getOptions(t)}getContainerTagName(){return this.options.isSvgElement?"g":"div"}getContainerStyle(){}getContainerAttrs(){return{"data-cell-id":this.cell.id,"data-shape":this.cell.shape}}getContainerClassName(){return this.prefixClassName("cell")}ensureContainer(){return ke.createElement(this.getContainerTagName(),this.options.isSvgElement)}setContainer(t){if(this.container!==t){this.undelegateEvents(),this.container=t,null!=this.options.events&&this.delegateEvents(this.options.events);const r=this.getContainerAttrs();null!=r&&this.setAttrs(r,t);const i=this.getContainerStyle();null!=i&&this.setStyle(i,t);const s=this.getContainerClassName();null!=s&&this.addClass(s,t)}return this}isNodeView(){return!1}isEdgeView(){return!1}render(){return this}confirmUpdate(t,r={}){return 0}getBootstrapFlag(){return this.flag.getBootstrapFlag()}getFlag(t){return this.flag.getFlag(t)}hasAction(t,r){return this.flag.hasAction(t,r)}removeAction(t,r){return this.flag.removeAction(t,r)}handleAction(t,r,i,s){if(this.hasAction(t,r)){i();const o=[r];return s&&("string"==typeof s?o.push(s):o.push(...s)),this.removeAction(t,o)}return t}setup(){this.cell.on("changed",({options:t})=>this.onAttrsChange(t))}onAttrsChange(t){let r=this.flag.getChangedFlag();t.updated||!r||(t.dirty&&this.hasAction(r,"update")&&(r|=this.getFlag("render")),t.toolId&&(t.async=!1),null!=this.graph&&this.graph.renderer.requestViewUpdate(this,r,t))}parseJSONMarkup(t,r){const i=Ae.parseJSONMarkup(t),s=i.selectors,o=this.rootSelector;if(r&&o){if(s[o])throw new Error("Invalid root selector");s[o]=r}return i}can(t){let r=this.graph.options.interacting;if("function"==typeof r&&(r=Z(r,this.graph,this)),"object"==typeof r){let i=r[t];return"function"==typeof i&&(i=Z(i,this.graph,this)),!1!==i}return"boolean"==typeof r&&r}cleanCache(){return this.cache.clean(),this}getCache(t){return this.cache.get(t)}getDataOfElement(t){return this.cache.getData(t)}getMatrixOfElement(t){return this.cache.getMatrix(t)}getShapeOfElement(t){return this.cache.getShape(t)}getBoundingRectOfElement(t){return this.cache.getBoundingRect(t)}getBBoxOfElement(t){const r=this.getBoundingRectOfElement(t),i=this.getMatrixOfElement(t),s=this.getRootRotatedMatrix(),o=this.getRootTranslatedMatrix();return ve.transformRectangle(r,o.multiply(s).multiply(i))}getUnrotatedBBoxOfElement(t){const r=this.getBoundingRectOfElement(t),i=this.getMatrixOfElement(t),s=this.getRootTranslatedMatrix();return ve.transformRectangle(r,s.multiply(i))}getBBox(t={}){let r;if(t.useCellGeometry){const i=this.cell,s=i.isNode()?i.getAngle():0;r=i.getBBox().bbox(s)}else r=this.getBBoxOfElement(this.container);return this.graph.coord.localToGraphRect(r)}getRootTranslatedMatrix(){const t=this.cell,r=t.isNode()?t.getPosition():{x:0,y:0};return ht().translate(r.x,r.y)}getRootRotatedMatrix(){let t=ht();const r=this.cell,i=r.isNode()?r.getAngle():0;if(i){const s=r.getBBox(),o=s.width/2,a=s.height/2;t=t.translate(o,a).rotate(i).translate(-o,-a)}return t}findMagnet(t=this.container){return this.findByAttr("magnet",t)}updateAttrs(t,r,i={}){null==i.rootBBox&&(i.rootBBox=new P),null==i.selectors&&(i.selectors=this.selectors),this.attr.update(t,r,i)}isEdgeElement(t){return this.cell.isEdge()&&(null==t||t===this.container)}prepareHighlight(t,r={}){const i=t||this.container;return r.partial=i===this.container,i}highlight(t,r={}){const i=this.prepareHighlight(t,r);return this.notify("cell:highlight",{magnet:i,options:r,view:this,cell:this.cell}),this.isEdgeView()?this.notify("edge:highlight",{magnet:i,options:r,view:this,edge:this.cell,cell:this.cell}):this.isNodeView()&&this.notify("node:highlight",{magnet:i,options:r,view:this,node:this.cell,cell:this.cell}),this}unhighlight(t,r={}){const i=this.prepareHighlight(t,r);return this.notify("cell:unhighlight",{magnet:i,options:r,view:this,cell:this.cell}),this.isNodeView()?this.notify("node:unhighlight",{magnet:i,options:r,view:this,node:this.cell,cell:this.cell}):this.isEdgeView()&&this.notify("edge:unhighlight",{magnet:i,options:r,view:this,edge:this.cell,cell:this.cell}),this}notifyUnhighlight(t,r){}getEdgeTerminal(t,r,i,s,o){const a=this.cell,l=this.findAttr("port",t),c=t.getAttribute("data-selector"),u={cell:a.id};return null!=c&&(u.magnet=c),null!=l?(u.port=l,a.isNode()&&!a.hasPort(l)&&null==c&&(u.selector=this.getSelector(t))):null==c&&this.container!==t&&(u.selector=this.getSelector(t)),u}getMagnetFromEdgeTerminal(t){const r=this.cell,i=this.container,s=t.port;let a,o=t.magnet;return null!=s&&r.isNode()&&r.hasPort(s)?a=this.findPortElem(s,o)||i:(o||(o=t.selector),!o&&null!=s&&(o=`[port="${s}"]`),a=this.findOne(o,i,this.selectors)),a}hasTools(t){const r=this.tools;return null!=r&&(null==t||r.name===t)}addTools(t){if(!this.can("toolsAddable"))return this;if(this.removeTools(),t){const r=Qe.isToolsView(t)?t:new Qe(t);this.tools=r,r.config({view:this}),r.mount()}return this}updateTools(t={}){return this.tools&&this.tools.update(t),this}removeTools(){return this.tools&&(this.tools.remove(),this.tools=null),this}hideTools(){return this.tools&&this.tools.hide(),this}showTools(){return this.tools&&this.tools.show(),this}renderTools(){const t=this.cell.getTools();return this.addTools(t),this}notify(t,r){return this.trigger(t,r),this.graph.trigger(t,r),this}getEventArgs(t,r,i){const s=this,o=s.cell;return null==r||null==i?{e:t,view:s,cell:o}:{e:t,x:r,y:i,view:s,cell:o}}onClick(t,r,i){this.notify("cell:click",this.getEventArgs(t,r,i))}onDblClick(t,r,i){this.notify("cell:dblclick",this.getEventArgs(t,r,i))}onContextMenu(t,r,i){this.notify("cell:contextmenu",this.getEventArgs(t,r,i))}onMouseDown(t,r,i){this.cell.model&&(this.cachedModelForMouseEvent=this.cell.model,this.cachedModelForMouseEvent.startBatch("mouse")),this.notify("cell:mousedown",this.getEventArgs(t,r,i))}onMouseUp(t,r,i){this.notify("cell:mouseup",this.getEventArgs(t,r,i)),this.cachedModelForMouseEvent&&(this.cachedModelForMouseEvent.stopBatch("mouse",{cell:this.cell}),this.cachedModelForMouseEvent=null)}onMouseMove(t,r,i){this.notify("cell:mousemove",this.getEventArgs(t,r,i))}onMouseOver(t){this.notify("cell:mouseover",this.getEventArgs(t))}onMouseOut(t){this.notify("cell:mouseout",this.getEventArgs(t))}onMouseEnter(t){this.notify("cell:mouseenter",this.getEventArgs(t))}onMouseLeave(t){this.notify("cell:mouseleave",this.getEventArgs(t))}onMouseWheel(t,r,i,s){this.notify("cell:mousewheel",Object.assign({delta:s},this.getEventArgs(t,r,i)))}onCustomEvent(t,r,i,s){this.notify("cell:customevent",Object.assign({name:r},this.getEventArgs(t,i,s))),this.notify(r,Object.assign({},this.getEventArgs(t,i,s)))}onMagnetMouseDown(t,r,i,s){}onMagnetDblClick(t,r,i,s){}onMagnetContextMenu(t,r,i,s){}onLabelMouseDown(t,r,i){}checkMouseleave(t){const r=this.getEventTarget(t,{fromPoint:!0}),i=this.graph.findViewByElem(r);i!==this&&(this.onMouseLeave(t),i&&i.onMouseEnter(t))}}return n.defaults={isSvgElement:!0,rootSelector:"root",priority:0,bootstrap:[],actions:{}},n})();(function(n){n.Flag=GA,n.Attr=zA})(Tt||(Tt={})),function(n){n.toStringTag=`X6.${n.name}`,n.isCellView=function e(t){if(null==t)return!1;if(t instanceof n)return!0;const r=t[Symbol.toStringTag];return(null==r||r===n.toStringTag)&&"function"==typeof t.isNodeView&&"function"==typeof t.isEdgeView&&"function"==typeof t.confirmUpdate}}(Tt||(Tt={})),function(n){n.priority=function e(r){return function(i){i.config({priority:r})}},n.bootstrap=function t(r){return function(i){i.config({bootstrap:r})}}}(Tt||(Tt={})),function(n){n.registry=qe.create({type:"view"})}(Tt||(Tt={}));class Qe extends ke{get name(){return this.options.name}get graph(){return this.cellView.graph}get cell(){return this.cellView.cell}get[Symbol.toStringTag](){return Qe.toStringTag}constructor(e={}){super(),this.svgContainer=this.createContainer(!0,e),this.htmlContainer=this.createContainer(!1,e),this.config(e)}createContainer(e,t){const r=e?ke.createElement("g",!0):ke.createElement("div",!1);return he(r,this.prefixClassName("cell-tools")),t.className&&he(r,t.className),r}config(e){if(this.options=Object.assign(Object.assign({},this.options),e),!Tt.isCellView(e.view)||e.view===this.cellView)return this;this.cellView=e.view,this.cell.isEdge()?(he(this.svgContainer,this.prefixClassName("edge-tools")),he(this.htmlContainer,this.prefixClassName("edge-tools"))):this.cell.isNode()&&(he(this.svgContainer,this.prefixClassName("node-tools")),he(this.htmlContainer,this.prefixClassName("node-tools"))),this.svgContainer.setAttribute("data-cell-id",this.cell.id),this.htmlContainer.setAttribute("data-cell-id",this.cell.id),this.name&&(this.svgContainer.setAttribute("data-tools-name",this.name),this.htmlContainer.setAttribute("data-tools-name",this.name));const t=this.options.items;if(!Array.isArray(t))return this;this.tools=[];const r=[];t.forEach(i=>{Qe.ToolItem.isToolItem(i)?"vertices"===i.name?r.unshift(i):r.push(i):"vertices"===("object"==typeof i?i.name:i)?r.unshift(i):r.push(i)});for(let i=0;i<r.length;i+=1){const s=r[i];let o;if(Qe.ToolItem.isToolItem(s))o=s;else{const a="object"==typeof s?s.name:s,l="object"==typeof s&&s.args||{};if(a)if(this.cell.isNode()){const c=wo.registry.get(a);if(!c)return wo.registry.onNotFound(a);o=new c(l)}else if(this.cell.isEdge()){const c=Co.registry.get(a);if(!c)return Co.registry.onNotFound(a);o=new c(l)}}o&&(o.config(this.cellView,this),o.render(),(!1!==o.options.isSVGElement?this.svgContainer:this.htmlContainer).appendChild(o.container),this.tools.push(o))}return this}update(e={}){const t=this.tools;return t&&t.forEach(r=>{e.toolId!==r.cid&&r.isVisible()&&r.update()}),this}focus(e){const t=this.tools;return t&&t.forEach(r=>{e===r?r.show():r.hide()}),this}blur(e){const t=this.tools;return t&&t.forEach(r=>{r!==e&&!r.isVisible()&&(r.show(),r.update())}),this}hide(){return this.focus(null)}show(){return this.blur(null)}remove(){const e=this.tools;return e&&(e.forEach(t=>t.remove()),this.tools=null),co(this.svgContainer),co(this.htmlContainer),super.remove()}mount(){const e=this.tools,t=this.cellView;if(t&&e){const r=e.some(s=>!1!==s.options.isSVGElement),i=e.some(s=>!1===s.options.isSVGElement);r&&(this.options.local?t.container:t.graph.view.decorator).appendChild(this.svgContainer),i&&this.graph.container.appendChild(this.htmlContainer)}return this}}(function(n){n.toStringTag=`X6.${n.name}`,n.isToolsView=function e(t){if(null==t)return!1;if(t instanceof n)return!0;const r=t[Symbol.toStringTag];return(null==r||r===n.toStringTag)&&null!=t.graph&&null!=t.cell&&"function"==typeof t.config&&"function"==typeof t.update&&"function"==typeof t.focus&&"function"==typeof t.blur&&"function"==typeof t.show&&"function"==typeof t.hide}})(Qe||(Qe={})),function(n){let e=(()=>{class t extends ke{static getDefaults(){return this.defaults}static config(i){this.defaults=this.getOptions(i)}static getOptions(i){return ze(Be(this.getDefaults()),i)}get graph(){return this.cellView.graph}get cell(){return this.cellView.cell}get name(){return this.options.name}get[Symbol.toStringTag](){return t.toStringTag}constructor(i={}){super(),this.visible=!0,this.options=this.getOptions(i),this.container=ke.createElement(this.options.tagName||"g",!1!==this.options.isSVGElement),he(this.container,this.prefixClassName("cell-tool")),"string"==typeof this.options.className&&he(this.container,this.options.className),this.init()}init(){}getOptions(i){return this.constructor.getOptions(i)}delegateEvents(){return this.options.events&&super.delegateEvents(this.options.events),this}config(i,s){return this.cellView=i,this.parent=s,this.stamp(this.container),this.cell.isEdge()?he(this.container,this.prefixClassName("edge-tool")):this.cell.isNode()&&he(this.container,this.prefixClassName("node-tool")),this.name&&this.container.setAttribute("data-tool-name",this.name),this.delegateEvents(),this}render(){this.empty();const i=this.options.markup;if(i){const s=Ae.parseJSONMarkup(i);this.container.appendChild(s.fragment),this.childNodes=s.selectors}return this.onRender(),this}onRender(){}update(){return this}stamp(i){i&&i.setAttribute("data-cell-id",this.cellView.cell.id)}show(){return this.container.style.display="",this.visible=!0,this}hide(){return this.container.style.display="none",this.visible=!1,this}isVisible(){return this.visible}focus(){const i=this.options.focusOpacity;return null!=i&&Number.isFinite(i)&&(this.container.style.opacity=`${i}`),this.parent.focus(this),this}blur(){return this.container.style.opacity="",this.parent.blur(this),this}guard(i){return null==this.graph||null==this.cellView||this.graph.view.guard(i,this.cellView)}}return t.defaults={isSVGElement:!0,tagName:"g"},t})();var t;n.ToolItem=e,function(t){let r=0;t.define=function s(o){const a=lm(function i(o){return o?gm(o):(r+=1,`CustomTool${r}`)}(o.name),this);return a.config(o),a}}(e=n.ToolItem||(n.ToolItem={})),(t=e=n.ToolItem||(n.ToolItem={})).toStringTag=`X6.${t.name}`,t.isToolItem=function r(i){if(null==i)return!1;if(i instanceof t)return!0;const s=i[Symbol.toStringTag];return(null==s||s===t.toStringTag)&&null!=i.graph&&null!=i.cell&&"function"==typeof i.config&&"function"==typeof i.update&&"function"==typeof i.focus&&"function"==typeof i.blur&&"function"==typeof i.show&&"function"==typeof i.hide&&"function"==typeof i.isVisible}}(Qe||(Qe={}));const AY=n=>n;function qA(n,e){return 0===e?"0%":`${Math.round(n/e*100)}%`}function WA(n){return(t,r,i,s)=>r.isEdgeElement(i)?function TY(n,e,t,r,i){const s=t.getConnection();if(!s)return e;const o=s.closestPointLength(i);if(n){const a=s.length();e.anchor={name:"ratio",args:{ratio:o/a}}}else e.anchor={name:"length",args:{length:o}};return e}(n,t,r,0,s):function MY(n,e,t,r,i){const s=t.cell,o=s.getAngle(),a=t.getUnrotatedBBoxOfElement(r),l=s.getBBox().getCenter(),c=C.create(i).rotate(o,l);let u=c.x-a.x,d=c.y-a.y;return n&&(u=qA(u,a.width),d=qA(d,a.height)),e.anchor={name:"topLeft",args:{dx:u,dy:d,rotate:!0}},e}(n,t,r,i,s)}const PY=WA(!0),IY=WA(!1);var Vm;function YA(n,e,t,r){return Z(Vm.presets.pinRelative,this.graph,{},e,t,n,this.cell,r,{}).anchor}function ZA(n,e){return e?n.cell.getBBox():n.cell.isEdge()?n.getConnection().bbox():n.getUnrotatedBBoxOfElement(n.container)}!function(n){n.presets=kd,n.registry=qe.create({type:"connection strategy"}),n.registry.register(n.presets,!0)}(Vm||(Vm={}));class ii extends Qe.ToolItem{onRender(){he(this.container,this.prefixClassName("cell-tool-button")),this.update()}update(){return this.updatePosition(),this}updatePosition(){const t=this.cellView.cell.isEdge()?this.getEdgeMatrix():this.getNodeMatrix();ho(this.container,t,{absolute:!0})}getNodeMatrix(){const e=this.cellView,t=this.options;let{x:r=0,y:i=0}=t;const{offset:s,useCellGeometry:o,rotate:a}=t;let l=ZA(e,o);const c=e.cell.getAngle();a||(l=l.bbox(c));let u=0,d=0;"number"==typeof s?(u=s,d=s):"object"==typeof s&&(u=s.x,d=s.y),r=wr(r,l.width),i=wr(i,l.height);let h=ht().translate(l.x+l.width/2,l.y+l.height/2);return a&&(h=h.rotate(c)),h=h.translate(r+u-l.width/2,i+d-l.height/2),h}getEdgeMatrix(){const e=this.cellView,t=this.options,{offset:r=0,distance:i=0,rotate:s}=t;let o,a,l;const c=wr(i,1);o=c>=0&&c<=1?e.getTangentAtRatio(c):e.getTangentAtLength(c),o?(a=o.start,l=o.vector().vectorAngle(new C(1,0))||0):(a=e.getConnection().start,l=0);let u=ht().translate(a.x,a.y).rotate(l);return u="object"==typeof r?u.translate(r.x||0,r.y||0):u.translate(0,r),s||(u=u.rotate(-l)),u}onMouseDown(e){if(this.guard(e))return;e.stopPropagation(),e.preventDefault();const t=this.options.onClick;"function"==typeof t&&Z(t,this.cellView,{e,view:this.cellView,cell:this.cellView.cell,btn:this})}}(function(n){n.config({name:"button",useCellGeometry:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"}})})(ii||(ii={})),function(n){n.Remove=n.define({name:"button-remove",markup:[{tagName:"circle",selector:"button",attrs:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attrs:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],distance:60,offset:0,useCellGeometry:!0,onClick({view:e,btn:t}){t.parent.remove(),e.cell.remove({ui:!0,toolId:t.cid})}})}(ii||(ii={}));class hd extends Qe.ToolItem{onRender(){if(he(this.container,this.prefixClassName("cell-tool-boundary")),this.options.attrs){const e=this.options.attrs,{class:t}=e,r=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(e,["class"]);we(this.container,ll(r)),t&&he(this.container,t)}this.update()}update(){const e=this.cellView,t=this.options,{useCellGeometry:r,rotate:i}=t,s=$i(t.padding);let o=ZA(e,r).moveAndExpand({x:-s.left,y:-s.top,width:s.left+s.right,height:s.top+s.bottom});const a=e.cell;if(a.isNode()){const l=a.getAngle();if(l)if(i){const c=a.getBBox().getCenter();Pm(this.container,l,c.x,c.y,{absolute:!0})}else o=o.bbox(l)}return we(this.container,o.toJSON()),this}}!function(n){n.config({name:"boundary",tagName:"rect",padding:10,useCellGeometry:!0,attrs:{fill:"none",stroke:"#333","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"}})}(hd||(hd={}));class Dl extends Qe.ToolItem{constructor(){super(...arguments),this.handles=[]}get vertices(){return this.cellView.cell.getVertices()}onRender(){return this.addClass(this.prefixClassName("edge-tool-vertices")),this.options.addable&&this.updatePath(),this.resetHandles(),this.renderHandles(),this}update(){return this.vertices.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.addable&&this.updatePath(),this}resetHandles(){const e=this.handles;this.handles=[],e&&e.forEach(t=>{this.stopHandleListening(t),t.remove()})}renderHandles(){const e=this.vertices;for(let t=0,r=e.length;t<r;t+=1){const i=e[t],o=this.options.processHandle,a=(0,this.options.createHandle)({index:t,graph:this.graph,guard:l=>this.guard(l),attrs:this.options.attrs||{}});o&&o(a),a.updatePosition(i.x,i.y),this.stamp(a.container),this.container.appendChild(a.container),this.handles.push(a),this.startHandleListening(a)}}updateHandles(){const e=this.vertices;for(let t=0,r=e.length;t<r;t+=1){const i=e[t],s=this.handles[t];s&&s.updatePosition(i.x,i.y)}}updatePath(){const e=this.childNodes.connection;e&&e.setAttribute("d",this.cellView.getConnectionPathData())}startHandleListening(e){const t=this.cellView;t.can("vertexMovable")&&(e.on("change",this.onHandleChange,this),e.on("changing",this.onHandleChanging,this),e.on("changed",this.onHandleChanged,this)),t.can("vertexDeletable")&&e.on("remove",this.onHandleRemove,this)}stopHandleListening(e){const t=this.cellView;t.can("vertexMovable")&&(e.off("change",this.onHandleChange,this),e.off("changing",this.onHandleChanging,this),e.off("changed",this.onHandleChanged,this)),t.can("vertexDeletable")&&e.off("remove",this.onHandleRemove,this)}getNeighborPoints(e){const t=this.cellView,r=this.vertices,s=e<r.length-1?r[e+1]:t.targetAnchor;return{prev:C.create(e>0?r[e-1]:t.sourceAnchor),next:C.create(s)}}getMouseEventArgs(e){const t=this.normalizeEvent(e),{x:r,y:i}=this.graph.snapToGrid(t.clientX,t.clientY);return{e:t,x:r,y:i}}onHandleChange({e}){this.focus();const t=this.cellView;if(t.cell.startBatch("move-vertex",{ui:!0,toolId:this.cid}),!this.options.stopPropagation){const{e:r,x:i,y:s}=this.getMouseEventArgs(e);t.notifyMouseDown(r,i,s)}}onHandleChanging({handle:e,e:t}){const r=this.cellView,i=e.options.index,{e:s,x:o,y:a}=this.getMouseEventArgs(t),l={x:o,y:a};this.snapVertex(l,i),r.cell.setVertexAt(i,l,{ui:!0,toolId:this.cid}),e.updatePosition(l.x,l.y),this.options.stopPropagation||r.notifyMouseMove(s,o,a)}onHandleChanged({e}){const t=this.options,r=this.cellView;if(t.addable&&this.updatePath(),!t.removeRedundancies)return;r.removeRedundantLinearVertices({ui:!0,toolId:this.cid})&&this.render(),this.blur(),r.cell.stopBatch("move-vertex",{ui:!0,toolId:this.cid}),this.eventData(e).vertexAdded&&r.cell.stopBatch("add-vertex",{ui:!0,toolId:this.cid});const{e:s,x:o,y:a}=this.getMouseEventArgs(e);this.options.stopPropagation||r.notifyMouseUp(s,o,a),r.checkMouseleave(s),t.onChanged&&t.onChanged({edge:r.cell,edgeView:r})}snapVertex(e,t){const r=this.options.snapRadius||0;if(r>0){const i=this.getNeighborPoints(t),s=i.prev,o=i.next;Math.abs(e.x-s.x)<r?e.x=s.x:Math.abs(e.x-o.x)<r&&(e.x=o.x),Math.abs(e.y-s.y)<r?e.y=i.prev.y:Math.abs(e.y-o.y)<r&&(e.y=o.y)}}onHandleRemove({handle:e,e:t}){if(this.options.removable){const i=this.cellView;i.cell.removeVertexAt(e.options.index,{ui:!0}),this.options.addable&&this.updatePath(),i.checkMouseleave(this.normalizeEvent(t))}}onPathMouseDown(e){const t=this.cellView;if(this.guard(e)||!this.options.addable||!t.can("vertexAddable"))return;e.stopPropagation(),e.preventDefault();const r=this.normalizeEvent(e),i=this.graph.snapToGrid(r.clientX,r.clientY).toJSON();t.cell.startBatch("add-vertex",{ui:!0,toolId:this.cid});const s=t.getVertexIndex(i.x,i.y);this.snapVertex(i,s),t.cell.insertVertex(i,s,{ui:!0,toolId:this.cid}),this.render();const o=this.handles[s];this.eventData(r,{vertexAdded:!0}),o.onMouseDown(r)}onRemove(){this.resetHandles()}}(function(n){n.Handle=class e extends ke{get graph(){return this.options.graph}constructor(r){super(),this.options=r,this.render(),this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDoubleClick"})}render(){this.container=ke.createElement("circle",!0);const r=this.options.attrs;if("function"==typeof r){const i=n.getDefaults();this.setAttrs(Object.assign(Object.assign({},i.attrs),r(this)))}else this.setAttrs(r);this.addClass(this.prefixClassName("edge-tool-vertex"))}updatePosition(r,i){this.setAttrs({cx:r,cy:i})}onMouseDown(r){this.options.guard(r)||(r.stopPropagation(),r.preventDefault(),this.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},r.data),this.emit("change",{e:r,handle:this}))}onMouseMove(r){this.emit("changing",{e:r,handle:this})}onMouseUp(r){this.emit("changed",{e:r,handle:this}),this.undelegateDocumentEvents(),this.graph.view.delegateEvents()}onDoubleClick(r){this.emit("remove",{e:r,handle:this})}}})(Dl||(Dl={})),function(n){const e=wt.prefix("edge-tool-vertex-path");n.config({name:"vertices",snapRadius:20,addable:!0,removable:!0,removeRedundancies:!0,stopPropagation:!0,attrs:{r:6,fill:"#333",stroke:"#fff",cursor:"move","stroke-width":2},createHandle:t=>new n.Handle(t),markup:[{tagName:"path",selector:"connection",className:e,attrs:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"pointer"}}],events:{[`mousedown .${e}`]:"onPathMouseDown",[`touchstart .${e}`]:"onPathMouseDown"}})}(Dl||(Dl={}));class xl extends Qe.ToolItem{constructor(){super(...arguments),this.handles=[]}get vertices(){return this.cellView.cell.getVertices()}update(){return this.render(),this}onRender(){he(this.container,this.prefixClassName("edge-tool-segments")),this.resetHandles();const e=this.cellView,t=[...this.vertices];t.unshift(e.sourcePoint),t.push(e.targetPoint);for(let r=0,i=t.length;r<i-1;r+=1){const a=this.renderHandle(t[r],t[r+1],r);this.stamp(a.container),this.handles.push(a)}return this}renderHandle(e,t,r){const i=this.options.createHandle({index:r,graph:this.graph,guard:s=>this.guard(s),attrs:this.options.attrs||{}});return this.options.processHandle&&this.options.processHandle(i),this.updateHandle(i,e,t),this.container.appendChild(i.container),this.startHandleListening(i),i}startHandleListening(e){e.on("change",this.onHandleChange,this),e.on("changing",this.onHandleChanging,this),e.on("changed",this.onHandleChanged,this)}stopHandleListening(e){e.off("change",this.onHandleChange,this),e.off("changing",this.onHandleChanging,this),e.off("changed",this.onHandleChanged,this)}resetHandles(){const e=this.handles;this.handles=[],e&&e.forEach(t=>{this.stopHandleListening(t),t.remove()})}shiftHandleIndexes(e){const t=this.handles;for(let r=0,i=t.length;r<i;r+=1)t[r].options.index+=e}resetAnchor(e,t){const r=this.cellView.cell,i={ui:!0,toolId:this.cid};t?r.prop([e,"anchor"],t,i):r.removeProp([e,"anchor"],i)}snapHandle(e,t,r){const i=e.options.axis,s=e.options.index,l=this.cellView.cell.getVertices(),c=l[s-2]||r.sourceAnchor,u=l[s+1]||r.targetAnchor,d=this.options.snapRadius;return Math.abs(t[i]-c[i])<d?t[i]=c[i]:Math.abs(t[i]-u[i])<d&&(t[i]=u[i]),t}onHandleChanging({handle:e,e:t}){const r=this.graph,i=this.options,s=this.cellView,o=i.anchor,a=e.options.axis,l=e.options.index-1,c=this.getEventData(t),u=this.normalizeEvent(t),d=r.snapToGrid(u.clientX,u.clientY),h=this.snapHandle(e,d.clone(),c),f=Be(this.vertices);let g=f[l],p=f[l+1];const m=s.sourceView,v=s.sourceBBox;let b=!1,y=!1;if(g?0===l?v.containsPoint(g)?(f.shift(),this.shiftHandleIndexes(-1),b=!0):(g[a]=h[a],y=!0):g[a]=h[a]:(g=s.sourceAnchor.toJSON(),g[a]=h[a],v.containsPoint(g)?b=!0:(f.unshift(g),this.shiftHandleIndexes(1),y=!0)),"function"==typeof o&&m){if(b){const M=c.sourceAnchor.clone();M[a]=h[a];const T=Z(o,s,M,m,s.sourceMagnet||m.container,"source",s,this);this.resetAnchor("source",T)}y&&this.resetAnchor("source",c.sourceAnchorDef)}const w=s.targetView,D=s.targetBBox;let x=!1,S=!1;if(p?l===f.length-2?D.containsPoint(p)?(f.pop(),x=!0):(p[a]=h[a],S=!0):p[a]=h[a]:(p=s.targetAnchor.toJSON(),p[a]=h[a],D.containsPoint(p)?x=!0:(f.push(p),S=!0)),"function"==typeof o&&w){if(x){const M=c.targetAnchor.clone();M[a]=h[a];const T=Z(o,s,M,w,s.targetMagnet||w.container,"target",s,this);this.resetAnchor("target",T)}S&&this.resetAnchor("target",c.targetAnchorDef)}C.equalPoints(f,this.vertices)||this.cellView.cell.setVertices(f,{ui:!0,toolId:this.cid}),this.updateHandle(e,g,p,0),i.stopPropagation||s.notifyMouseMove(u,d.x,d.y)}onHandleChange({handle:e,e:t}){const r=this.options,i=this.handles,s=this.cellView,o=e.options.index;if(Array.isArray(i)){for(let a=0,l=i.length;a<l;a+=1)a!==o&&i[a].hide();if(this.focus(),this.setEventData(t,{sourceAnchor:s.sourceAnchor.clone(),targetAnchor:s.targetAnchor.clone(),sourceAnchorDef:Be(this.cell.prop(["source","anchor"])),targetAnchorDef:Be(this.cell.prop(["target","anchor"]))}),this.cell.startBatch("move-segment",{ui:!0,toolId:this.cid}),!r.stopPropagation){const a=this.normalizeEvent(t),l=this.graph.snapToGrid(a.clientX,a.clientY);s.notifyMouseDown(a,l.x,l.y)}}}onHandleChanged({e}){const t=this.options,r=this.cellView;t.removeRedundancies&&r.removeRedundantLinearVertices({ui:!0,toolId:this.cid});const i=this.normalizeEvent(e),s=this.graph.snapToGrid(i.clientX,i.clientY);this.render(),this.blur(),this.cell.stopBatch("move-segment",{ui:!0,toolId:this.cid}),t.stopPropagation||r.notifyMouseUp(i,s.x,s.y),r.checkMouseleave(i),t.onChanged&&t.onChanged({edge:r.cell,edgeView:r})}updateHandle(e,t,r,i=0){const s=this.options.precision||0,o=Math.abs(t.x-r.x)<s,a=Math.abs(t.y-r.y)<s;if(o||a){const l=new R(t,r);if(l.length()<this.options.threshold)e.hide();else{const u=l.getCenter(),d=o?"x":"y";u[d]+=i||0;const h=l.vector().vectorAngle(new C(1,0));e.updatePosition(u.x,u.y,h,this.cellView),e.show(),e.options.axis=d}}else e.hide()}onRemove(){this.resetHandles()}}(function(n){n.Handle=class e extends ke{constructor(r){super(),this.options=r,this.render(),this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"})}render(){this.container=ke.createElement("rect",!0);const r=this.options.attrs;if("function"==typeof r){const i=n.getDefaults();this.setAttrs(Object.assign(Object.assign({},i.attrs),r(this)))}else this.setAttrs(r);this.addClass(this.prefixClassName("edge-tool-segment"))}updatePosition(r,i,s,o){const a=o.getClosestPoint(new C(r,i))||new C(r,i);let l=ht().translate(a.x,a.y);if(a.equals({x:r,y:i}))l=l.rotate(s);else{let u=new R(r,i,a.x,a.y).vector().vectorAngle(new C(1,0));0!==u&&(u+=90),l=l.rotate(u)}this.setAttrs({transform:uo(l),cursor:s%180==0?"row-resize":"col-resize"})}onMouseDown(r){this.options.guard(r)||(this.trigger("change",{e:r,handle:this}),r.stopPropagation(),r.preventDefault(),this.options.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},r.data))}onMouseMove(r){this.emit("changing",{e:r,handle:this})}onMouseUp(r){this.emit("changed",{e:r,handle:this}),this.undelegateDocumentEvents(),this.options.graph.view.delegateEvents()}show(){this.container.style.display=""}hide(){this.container.style.display="none"}}})(xl||(xl={})),function(n){n.config({name:"segments",precision:.5,threshold:40,snapRadius:10,stopPropagation:!0,removeRedundancies:!0,attrs:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#333",stroke:"#fff","stroke-width":2},createHandle:e=>new n.Handle(e),anchor:YA})}(xl||(xl={}));class fd extends Qe.ToolItem{get type(){return this.options.type}onRender(){he(this.container,this.prefixClassName(`edge-tool-${this.type}-anchor`)),this.toggleArea(!1),this.update()}update(){return this.cellView.getTerminalView(this.type)?(this.updateAnchor(),this.updateArea(),this.container.style.display=""):this.container.style.display="none",this}updateAnchor(){const e=this.childNodes;if(!e)return;const t=e.anchor;if(!t)return;const r=this.type,i=this.cellView,s=this.options,o=i.getTerminalAnchor(r),a=i.cell.prop([r,"anchor"]);t.setAttribute("transform",`translate(${o.x}, ${o.y})`);const l=a?s.customAnchorAttrs:s.defaultAnchorAttrs;l&&Object.keys(l).forEach(c=>{t.setAttribute(c,l[c])})}updateArea(){const e=this.childNodes;if(!e)return;const t=e.area;if(!t)return;const r=this.type,i=this.cellView,s=i.getTerminalView(r);if(s){const o=s.cell,a=i.getTerminalMagnet(r);let c,u,d,l=this.options.areaPadding||0;Number.isFinite(l)||(l=0),s.isEdgeElement(a)?(c=s.getBBox(),u=0,d=c.getCenter()):(c=s.getUnrotatedBBoxOfElement(a),u=o.getAngle(),d=c.getCenter(),u&&d.rotate(-u,o.getBBox().getCenter())),c.inflate(l),we(t,{x:-c.width/2,y:-c.height/2,width:c.width,height:c.height,transform:`translate(${d.x}, ${d.y}) rotate(${u})`})}}toggleArea(e){if(this.childNodes){const t=this.childNodes.area;t&&(t.style.display=e?"":"none")}}onMouseDown(e){this.guard(e)||(e.stopPropagation(),e.preventDefault(),this.graph.view.undelegateEvents(),this.options.documentEvents&&this.delegateDocumentEvents(this.options.documentEvents),this.focus(),this.toggleArea(this.options.restrictArea),this.cell.startBatch("move-anchor",{ui:!0,toolId:this.cid}))}resetAnchor(e){const t=this.type,r=this.cell;e?r.prop([t,"anchor"],e,{rewrite:!0,ui:!0,toolId:this.cid}):r.removeProp([t,"anchor"],{ui:!0,toolId:this.cid})}onMouseMove(e){const t=this.type,r=this.cellView,i=r.getTerminalView(t);if(null==i)return;const s=this.normalizeEvent(e),o=i.cell,a=r.getTerminalMagnet(t);let l=this.graph.coord.clientToLocalPoint(s.clientX,s.clientY);const c=this.options.snap;if("function"==typeof c){const h=Z(c,r,l,i,a,t,r,this);l=C.create(h)}if(this.options.restrictArea)if(i.isEdgeElement(a)){const h=i.getClosestPoint(l);h&&(l=h)}else{const h=i.getUnrotatedBBoxOfElement(a),f=o.getAngle(),g=o.getBBox().getCenter(),p=l.clone().rotate(f,g);h.containsPoint(p)||(l=h.getNearestPointToPoint(p).rotate(-f,g))}let u;const d=this.options.anchor;"function"==typeof d&&(u=Z(d,r,l,i,a,t,r,this)),this.resetAnchor(u),this.update()}onMouseUp(e){this.graph.view.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1),this.options.removeRedundancies&&this.cellView.removeRedundantLinearVertices({ui:!0,toolId:this.cid}),this.cell.stopBatch("move-anchor",{ui:!0,toolId:this.cid})}onDblClick(){const e=this.options.resetAnchor;e&&this.resetAnchor(!0===e?void 0:e),this.update()}}!function(n){n.config({tagName:"g",markup:[{tagName:"circle",selector:"anchor",attrs:{cursor:"pointer"}},{tagName:"rect",selector:"area",attrs:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDblClick"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},customAnchorAttrs:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttrs:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,resetAnchor:!0,restrictArea:!0,removeRedundancies:!0,anchor:YA,snap(e,t,r,i,s,o){const a=o.options.snapRadius||0,l="source"===i,u=this.cell.getVertexAt(l?0:-1)||this.getTerminalAnchor(l?"target":"source");return u&&(Math.abs(u.x-e.x)<a&&(e.x=u.x),Math.abs(u.y-e.y)<a&&(e.y=u.y)),e}})}(fd||(fd={}));const NY=fd.define({name:"source-anchor",type:"source"}),RY=fd.define({name:"target-anchor",type:"target"});class gd extends Qe.ToolItem{get type(){return this.options.type}get ratio(){return this.options.ratio}init(){if(this.options.attrs){const e=this.options.attrs,{class:t}=e,r=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(e,["class"]);this.setAttrs(r,this.container),t&&he(this.container,t)}}onRender(){he(this.container,this.prefixClassName(`edge-tool-${this.type}-arrowhead`)),this.update()}update(){const e=this.ratio,t=this.cellView,r=t.getTangentAtRatio(e),i=r?r.start:t.getPointAtRatio(e),s=r&&r.vector().vectorAngle(new C(1,0))||0;if(!i)return this;const o=ht().translate(i.x,i.y).rotate(s);return ho(this.container,o,{absolute:!0}),this}onMouseDown(e){if(this.guard(e))return;e.stopPropagation(),e.preventDefault();const t=this.cellView;if(t.can("arrowheadMovable")){t.cell.startBatch("move-arrowhead",{ui:!0,toolId:this.cid});const r=this.graph.snapToGrid(e.clientX,e.clientY),i=t.prepareArrowheadDragging(this.type,{x:r.x,y:r.y,options:Object.assign(Object.assign({},this.options),{toolId:this.cid})});this.cellView.setEventData(e,i),this.delegateDocumentEvents(this.options.documentEvents,e.data),t.graph.view.undelegateEvents(),this.container.style.pointerEvents="none"}this.focus()}onMouseMove(e){const t=this.normalizeEvent(e),r=this.graph.snapToGrid(t.clientX,t.clientY);this.cellView.onMouseMove(t,r.x,r.y),this.update()}onMouseUp(e){this.undelegateDocumentEvents();const t=this.normalizeEvent(e),r=this.cellView,i=this.graph.snapToGrid(t.clientX,t.clientY);r.onMouseUp(t,i.x,i.y),this.graph.view.delegateEvents(),this.blur(),this.container.style.pointerEvents="",r.cell.stopBatch("move-arrowhead",{ui:!0,toolId:this.cid})}}!function(n){n.config({tagName:"path",isSVGElement:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}})}(gd||(gd={}));const kY=gd.define({name:"source-arrowhead",type:"source",ratio:0,attrs:{d:"M 10 -8 -10 0 10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),FY=gd.define({name:"target-arrowhead",type:"target",ratio:1,attrs:{d:"M -10 -8 10 0 -10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}});class bo extends Qe.ToolItem{constructor(){super(...arguments),this.labelIndex=-1,this.distance=.5}render(){return this.createElement(),this.updateEditor(),this.autoFocus(),this.delegateDocumentEvents(this.options.documentEvents),this}createElement(){const{cell:e}=this,t=[this.prefixClassName((e.isEdge()?"edge":"node")+"-tool-editor"),this.prefixClassName("cell-tool-editor")];this.editor=Qe.createElement("div",!1),this.addClass(t,this.editor),this.editor.contentEditable="true",this.container.appendChild(this.editor)}updateEditor(){const{graph:e,cell:t,editor:r}=this,i=r.style;let s=new C,o=20;if(t.isNode())s=t.getBBox().center,o=t.size().width-4;else if(t.isEdge()){const d=this.options.event,h=d.target,f=h.parentElement;if(f&&Vi(f,this.prefixClassName("edge-label"))){const p=f.getAttribute("data-index")||"0";this.labelIndex=parseInt(p,10);const m=f.getAttribute("transform"),{translation:v}=sd(m);s=new C(v.tx,v.ty),o=ve.getBBox(h).width}else{if(!this.options.labelAddable)return this;s=e.clientToLocal(C.create(d.clientX,d.clientY));const m=this.cellView.path.closestPointLength(s);this.distance=m}}s=e.localToGraph(s),i.left=`${s.x}px`,i.top=`${s.y}px`,i.minWidth=`${o}px`;const a=e.scale();i.transform=`scale(${a.sx}, ${a.sy}) translate(-50%, -50%)`;const l=this.options.attrs;i.fontSize=`${l.fontSize}px`,i.fontFamily=l.fontFamily,i.color=l.color,i.backgroundColor=l.backgroundColor;const c=this.options.getText;let u;return"function"==typeof c&&(u=Z(c,this.cellView,{cell:this.cell,index:this.labelIndex})),r.innerText=u||"",this.setCellText(""),this}onDocumentMouseDown(e){if(e.target!==this.editor){const t=this.cell,r=this.editor.innerText.replace(/\n$/,"")||"";this.setCellText(r),t.removeTool(t.isEdge()?"edge-editor":"node-editor"),this.undelegateDocumentEvents()}}onDblClick(e){e.stopPropagation()}onMouseDown(e){e.stopPropagation()}autoFocus(){setTimeout(()=>{this.editor.focus(),this.selectText()})}selectText(){if(window.getSelection){const e=document.createRange(),t=window.getSelection();e.selectNodeContents(this.editor),t.removeAllRanges(),t.addRange(e)}}setCellText(e){const t=this.options.setText;"function"==typeof t&&Z(t,this.cellView,{cell:this.cell,value:e,index:this.labelIndex,distance:this.distance})}}(function(n){n.config({tagName:"div",isSVGElement:!1,events:{dblclick:"onDblClick",mousedown:"onMouseDown"},documentEvents:{mousedown:"onDocumentMouseDown"}})})(bo||(bo={})),function(n){n.NodeEditor=n.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},getText:({cell:e})=>e.attr("text/text"),setText({cell:e,value:t}){e.attr("text/text",t)}}),n.EdgeEditor=n.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},labelAddable:!0,getText:({cell:e,index:t})=>-1===t?"":e.prop(`labels/${t}/attrs/label/text`),setText({cell:e,value:t,index:r,distance:i}){const s=e;-1===r?s.appendLabel({position:{distance:i},attrs:{label:{text:t}}}):t?s.prop(`labels/${r}/attrs/label/text`,t):"number"==typeof r&&s.removeLabelAt(r)}})}(bo||(bo={}));var wo,Co,XA=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t};!function(n){n.presets={boundary:hd,button:ii,"button-remove":ii.Remove,"node-editor":bo.NodeEditor},n.registry=qe.create({type:"node tool",process(e,t){if("function"==typeof t)return t;let r=Qe.ToolItem;const{inherit:i}=t,s=XA(t,["inherit"]);if(i){const o=this.get(i);null==o?this.onNotFound(i,"inherited"):r=o}return null==s.name&&(s.name=e),r.define.call(r,s)}}),n.registry.register(n.presets,!0)}(wo||(wo={})),function(n){n.presets={boundary:hd,vertices:Dl,segments:xl,button:ii,"button-remove":ii.Remove,"source-anchor":NY,"target-anchor":RY,"source-arrowhead":kY,"target-arrowhead":FY,"edge-editor":bo.EdgeEditor},n.registry=qe.create({type:"edge tool",process(e,t){if("function"==typeof t)return t;let r=Qe.ToolItem;const{inherit:i}=t,s=XA(t,["inherit"]);if(i){const o=this.get(i);null==o?this.onNotFound(i,"inherited"):r=o}return null==s.name&&(s.name=e),r.define.call(r,s)}}),n.registry.register(n.presets,!0)}(Co||(Co={}));const jY=Er("center"),BY=Er("topCenter"),$Y=Er("bottomCenter"),VY=Er("leftMiddle"),HY=Er("rightMiddle"),UY=Er("topLeft"),zY=Er("topRight"),GY=Er("bottomLeft"),qY=Er("bottomRight");function Er(n){return function(e,t,r,i={}){const s=i.rotate?e.getUnrotatedBBoxOfElement(t):e.getBBoxOfElement(t),o=s[n];o.x+=wr(i.dx,s.width),o.y+=wr(i.dy,s.height);const a=e.cell;return i.rotate?o.rotate(-a.getAngle(),a.getBBox().getCenter()):o}}function pd(n){return function(e,t,r,i){if(r instanceof Element){const s=this.graph.findViewByElem(r);let o;return o=s?s.isEdgeElement(r)?JA(s,null!=i.fixedAt?i.fixedAt:"50%"):s.getBBoxOfElement(r).getCenter():new C,n.call(this,e,t,o,i)}return n.apply(this,arguments)}}function JA(n,e){const t=br(e),r="string"==typeof e?parseFloat(e):e;return t?n.getPointAtRatio(r/100):n.getPointAtLength(r)}const WY=pd(function(n,e,t,r){const i=n.cell.getAngle(),s=n.getBBoxOfElement(e),o=s.getCenter(),a=s.getTopLeft(),l=s.getBottomRight();let c=r.padding;if(Number.isFinite(c)||(c=0),a.y+c<=t.y&&t.y<=l.y-c){const u=t.y-o.y;o.x+=0===i||180===i?0:1*u/Math.tan(_e.toRad(i)),o.y+=u}else if(a.x+c<=t.x&&t.x<=l.x-c){const u=t.x-o.x;o.y+=90===i||270===i?0:u*Math.tan(_e.toRad(i)),o.x+=u}return o}),YY=function(n,e,t,r,i){const s=n.cell.getConnectionPoint(this.cell,i);return(r.dx||r.dy)&&s.translate(r.dx||0,r.dy||0),s},ZY=pd(function(n,e,t,r){let i,o,s=0;const a=n.cell;r.rotate?(i=n.getUnrotatedBBoxOfElement(e),o=a.getBBox().getCenter(),s=a.getAngle()):i=n.getBBoxOfElement(e);const l=r.padding;null!=l&&Number.isFinite(l)&&i.inflate(l),r.rotate&&t.rotate(s,o);const c=i.getNearestSideToPoint(t);let u;switch(c){case"left":u=i.getLeftMiddle();break;case"right":u=i.getRightMiddle();break;case"top":u=i.getTopCenter();break;case"bottom":u=i.getBottomCenter()}const d=r.direction;return"H"===d?("top"===c||"bottom"===c)&&(u=t.x<=i.x+i.width?i.getLeftMiddle():i.getRightMiddle()):"V"===d&&(u=t.y<=i.y+i.height?i.getTopCenter():i.getBottomCenter()),r.rotate?u.rotate(-s,o):u});var Do;!function(n){n.presets=Fd,n.registry=qe.create({type:"node endpoint"}),n.registry.register(n.presets,!0)}(Do||(Do={}));const XY=function(n,e,t,r){let i=null!=r.ratio?r.ratio:.5;return i>1&&(i/=100),n.getPointAtRatio(i)},JY=function(n,e,t,r){return n.getPointAtLength(null!=r.length?r.length:20)},KA=function(n,e,t,r){return n.getClosestPoint(t)??new C},KY=pd(KA),QY=pd(function(n,e,t,r){const s=n.getConnection(),o=n.getConnectionSubdivisions(),a=new R(t.clone().translate(0,1e6),t.clone().translate(0,-1e6)),l=new R(t.clone().translate(1e6,0),t.clone().translate(-1e6,0)),c=a.intersect(s,{segmentSubdivisions:o}),u=l.intersect(s,{segmentSubdivisions:o}),d=[];return c&&d.push(...c),u&&d.push(...u),d.length>0?t.closest(d):null!=r.fallbackAt?JA(n,r.fallbackAt):Z(KA,this,n,e,t,r)});var xo;function md(n,e,t){let r;if("object"==typeof t){if(Number.isFinite(t.y)){const s=new R(e,n),{start:o,end:a}=s.parallel(t.y);e=o,n=a}r=t.x}else r=t;if(null==r||!Number.isFinite(r))return n;const i=n.distance(e);return 0===r&&i>0?n:n.move(e,-Math.min(r,i-1))}function yd(n){const e=n.getAttribute("stroke-width");return null===e?0:parseFloat(e)||0}!function(n){n.presets=jd,n.registry=qe.create({type:"edge endpoint"}),n.registry.register(n.presets,!0)}(xo||(xo={}));const QA=function(n,e,t,r){const i=e.getBBoxOfElement(t);r.stroked&&i.inflate(yd(t)/2);const s=n.intersect(i);return md(s&&s.length?n.start.closest(s):n.end,n.start,r.offset)},tZ=function(n,e,t,r,i){const s=e.cell,o=s.isNode()?s.getAngle():0;if(0===o)return Z(QA,this,n,e,t,r,i);const a=e.getUnrotatedBBoxOfElement(t);r.stroked&&a.inflate(yd(t)/2);const l=a.getCenter(),c=n.clone().rotate(o,l),u=c.setLength(1e6).intersect(a);return md(u&&u.length?c.start.closest(u).rotate(-o,l):n.end,n.start,r.offset)},nZ=function(n,e,t,r){let i,s;const o=n.end,a=r.selector;if(i="string"==typeof a?e.findOne(a):Array.isArray(a)?cm(t,a):function eZ(n){if(null==n)return null;let e=n;do{let t=e.tagName;if("string"!=typeof t)return null;if(t=t.toUpperCase(),"G"===t)e=e.firstElementChild;else{if("TITLE"!==t)break;e=e.nextElementSibling}}while(e);return e}(t),!Zr(i)){if(i===t||!Zr(t))return o;i=t}const l=e.getShapeOfElement(i),c=e.getMatrixOfElement(i),u=e.getRootTranslatedMatrix(),d=e.getRootRotatedMatrix(),h=u.multiply(d).multiply(c),f=h.inverse(),g=ve.transformLine(n,f),p=g.start.clone(),m=e.getDataOfElement(i);if(!1===r.insideout){null==m.shapeBBox&&(m.shapeBBox=l.bbox());const w=m.shapeBBox;if(null!=w&&w.containsPoint(p))return o}let v;if(!0===r.extrapolate&&g.setLength(1e6),j.isPath(l)){const w=r.precision||2;null==m.segmentSubdivisions&&(m.segmentSubdivisions=l.getSegmentSubdivisions({precision:w})),v={precision:w,segmentSubdivisions:m.segmentSubdivisions},s=g.intersect(l,v)}else s=g.intersect(l);s?Array.isArray(s)&&(s=p.closest(s)):!0===r.sticky&&(s=P.isRectangle(l)?l.getNearestPointToPoint(p):kn.isEllipse(l)?l.intersectsWithLineFromCenterToPoint(p):l.closestPoint(p,v));const b=s?ve.transformPoint(s,h):o;let y=r.offset||0;return!1!==r.stroked&&("object"==typeof y?(y=Object.assign({},y),null==y.x&&(y.x=0),y.x+=yd(i)/2):y+=yd(i)/2),md(b,n.start,y)},iZ=function(n,e,t,r){const{alignOffset:i,align:s}=r;return s&&function rZ(n,e,t=0){const{start:r,end:i}=n;let s,o,a,l;switch(e){case"left":l="x",s=i,o=r,a=-1;break;case"right":l="x",s=r,o=i,a=1;break;case"top":l="y",s=i,o=r,a=-1;break;case"bottom":l="y",s=r,o=i,a=1;break;default:return}r[l]<i[l]?s[l]=o[l]:o[l]=s[l],Number.isFinite(t)&&(s[l]+=a*t,o[l]+=a*t)}(n,s,i),md(n.end,n.start,r.offset)};var Eo;!function(n){n.presets=Bd,n.registry=qe.create({type:"connection point"}),n.registry.register(n.presets,!0)}(Eo||(Eo={}));const sZ=function(n){return[...n]},oZ=function(n,e,t){const r=e.side||"bottom",i=$i(e.padding||40),s=t.sourceBBox,o=t.targetBBox,a=s.getCenter(),l=o.getCenter();let c,u,d;switch(r){case"top":d=-1,c="y",u="height";break;case"left":d=-1,c="x",u="width";break;case"right":d=1,c="x",u="width";break;default:d=1,c="y",u="height"}return a[c]+=d*(s[u]/2+i[r]),l[c]+=d*(o[u]/2+i[r]),d*(a[c]-l[c])>0?l[c]=a[c]:a[c]=l[c],[a.toJSON(),...n,l.toJSON()]};function vd(n){return new P(n.x,n.y,0,0)}function bd(n={}){const e=$i(n.padding||20);return{x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}function eM(n,e={}){return n.sourceBBox.clone().moveAndExpand(bd(e))}function tM(n,e={}){return n.targetBBox.clone().moveAndExpand(bd(e))}const nM=function(n,e,t){let r=eM(t,e),i=tM(t,e);const s=function aZ(n,e={}){return n.sourceAnchor?n.sourceAnchor:eM(n,e).getCenter()}(t,e),o=function lZ(n,e={}){return n.targetAnchor?n.targetAnchor:tM(n,e).getCenter()}(t,e);r=r.union(vd(s)),i=i.union(vd(o));const a=n.map(u=>C.create(u));a.unshift(s),a.push(o);let l=null;const c=[];for(let u=0,d=a.length-1;u<d;u+=1){let h=null;const f=a[u],g=a[u+1],p=null!=wn.getBearing(f,g);if(0===u)u+1===d?r.intersectsWithRect(i.clone().inflate(1))?h=wn.insideNode(f,g,r,i):p||(h=wn.nodeToNode(f,g,r,i)):r.containsPoint(g)?h=wn.insideNode(f,g,r,vd(g).moveAndExpand(bd(e))):p||(h=wn.nodeToVertex(f,g,r));else if(u+1===d){const m=p&&wn.getBearing(g,f)===l;i.containsPoint(f)||m?h=wn.insideNode(f,g,vd(f).moveAndExpand(bd(e)),i,l):p||(h=wn.vertexToNode(f,g,i,l))}else p||(h=wn.vertexToVertex(f,g,l));h?(c.push(...h.points),l=h.direction):l=wn.getBearing(f,g),u+1<d&&c.push(g)}return c};var wn;!function(n){const e={N:"S",S:"N",E:"W",W:"E"},t={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function r(d,h,f){let g=new C(d.x,h.y);return f.containsPoint(g)&&(g=new C(h.x,d.y)),g}function i(d,h){return d["W"===h||"E"===h?"width":"height"]}function s(d,h){return d.x===h.x?d.y>h.y?"N":"S":d.y===h.y?d.x>h.x?"W":"E":null}function o(d,h,f){const g=new C(d.x,h.y),p=new C(h.x,d.y),m=s(d,g),v=s(d,p),b=f?e[f]:null,y=m===f||m!==b&&(v===b||v!==f)?g:p;return{points:[y],direction:s(y,h)}}function a(d,h,f){const g=r(d,h,f);return{points:[g],direction:s(g,h)}}n.getBBoxSize=i,n.getBearing=s,n.vertexToVertex=o,n.nodeToVertex=a,n.vertexToNode=function l(d,h,f,g){const p=[new C(d.x,h.y),new C(h.x,d.y)],m=p.filter(y=>!f.containsPoint(y)),v=m.filter(y=>s(y,d)!==g);let b;if(v.length>0)return b=v.filter(y=>s(d,y)===g).pop(),b=b||v[0],{points:[b],direction:s(b,h)};{b=I4(p,m)[0];const y=C.create(h).move(b,-i(f,g)/2);return{points:[r(y,d,f),y],direction:s(y,h)}}},n.nodeToNode=function c(d,h,f,g){let p=a(h,d,g);const m=p.points[0];if(f.containsPoint(m)){p=a(d,h,f);const v=p.points[0];if(g.containsPoint(v)){const b=C.create(d).move(v,-i(f,s(d,v))/2),y=C.create(h).move(m,-i(g,s(h,m))/2),w=new R(b,y).getCenter(),D=a(d,w,f),x=o(w,h,D.direction);p.points=[D.points[0],x.points[0]],p.direction=x.direction}}return p},n.insideNode=function u(d,h,f,g,p){const m=f.union(g).inflate(1),v=m.getCenter(),b=v.distance(h)>v.distance(d),y=b?h:d,w=b?d:h;let D,x,S,M;return p?(D=C.fromPolar(m.width+m.height,t[p],y),D=m.getNearestPointToPoint(D).move(D,-1)):D=m.getNearestPointToPoint(y).move(y,1),x=r(D,w,m),D.round().equals(x.round())?(x=C.fromPolar(m.width+m.height,_e.toRad(D.theta(y))+Math.PI/2,w),x=m.getNearestPointToPoint(x).move(w,1).round(),S=r(D,x,m),M=b?[x,S,D]:[D,S,x]):M=b?[x,D]:[D,x],{points:M,direction:s(b?D:x,h)}}}(wn||(wn={}));const cZ={step:10,maxLoopCount:2e3,precision:1,maxDirectionChange:90,perpendicular:!0,excludeTerminals:[],excludeNodes:[],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost(){return si(this.step,this)},directions(){const n=si(this.step,this),e=si(this.cost,this);return[{cost:e,offsetX:n,offsetY:0},{cost:e,offsetX:-n,offsetY:0},{cost:e,offsetX:0,offsetY:n},{cost:e,offsetX:0,offsetY:-n}]},penalties(){const n=si(this.step,this);return{0:0,45:n/2,90:n/2}},paddingBox(){const n=si(this.step,this);return{x:-n,y:-n,width:2*n,height:2*n}},fallbackRouter:nM,draggingRouter:null,snapToGrid:!0};function si(n,e){return"function"==typeof n?n.call(e):n}class dZ{constructor(){this.items=[],this.hash={},this.values={}}add(e,t){this.hash[e]?this.items.splice(this.items.indexOf(e),1):this.hash[e]=1,this.values[e]=t;const r=function e4(n,e,t){return zS(n,e,um(t))}(this.items,e,i=>this.values[i]);this.items.splice(r,0,e)}pop(){const e=this.items.shift();return e&&(this.hash[e]=2),e}isOpen(e){return 1===this.hash[e]}isClose(e){return 2===this.hash[e]}isEmpty(){return 0===this.items.length}}class hZ{constructor(e){this.options=e,this.mapGridSize=100,this.map={}}build(e,t){const r=this.options,i=r.excludeTerminals.reduce((c,u)=>{const d=t[u];if(d){const h=e.getCell(d.cell);h&&c.push(h)}return c},[]);let s=[];const o=e.getCell(t.getSourceCellId());o&&(s=US(s,o.getAncestors().map(c=>c.id)));const a=e.getCell(t.getTargetCellId());a&&(s=US(s,a.getAncestors().map(c=>c.id)));const l=this.mapGridSize;return e.getNodes().reduce((c,u)=>{const d=i.some(p=>p.id===u.id),h=r.excludeNodes.some(p=>"string"==typeof p?u.id===p:p===u),f=s.includes(u.id);if(!(d||h||f)){const p=u.getBBox().moveAndExpand(r.paddingBox),m=p.getOrigin().snapToGrid(l),v=p.getCorner().snapToGrid(l);for(let b=m.x;b<=v.x;b+=l)for(let y=m.y;y<=v.y;y+=l){const w=new C(b,y).toString();null==c[w]&&(c[w]=[]),c[w].push(p)}}return c},this.map),this}isAccessible(e){const t=e.clone().snapToGrid(this.mapGridSize).toString(),r=this.map[t];return!r||r.every(i=>!i.containsPoint(e))}}function sM(n,e){const t=n.sourceBBox.clone();return e&&e.paddingBox?t.moveAndExpand(e.paddingBox):t}function oM(n,e){const t=n.targetBBox.clone();return e&&e.paddingBox?t.moveAndExpand(e.paddingBox):t}function aM(n,e){return n.sourceAnchor?n.sourceAnchor:sM(n,e).getCenter()}function Hm(n,e,t,r,i){const s=360/t,o=n.theta(function gZ(n,e,t,r){const i=r.step;return new C(n.x+(e.x-n.x)/t.x*i,n.y+(e.y-n.y)/t.y*i)}(n,e,r,i)),a=_e.normalize(o+s/2);return s*Math.floor(a/s)}function lM(n,e){const t=Math.abs(n-e);return t>180?360-t:t}function cM(n,e){if(!n)return e;const t=Math.abs(n),r=Math.round(t/e);return r?e+(t-r*e)/r:t}function El(n,e){return n.round(e)}function wd(n,e,t){return El(function yZ(n,e){const t=e.source,r=Ce.snapToGrid(n.x-t.x,e.x)+t.x,i=Ce.snapToGrid(n.y-t.y,e.y)+t.y;return new C(r,i)}(n.clone(),e),t)}function Sl(n){return n.toString()}function Um(n){return new C(0===n.x?0:Math.abs(n.x)/n.x,0===n.y?0:Math.abs(n.y)/n.y)}function uM(n,e){let t=1/0;for(let r=0,i=e.length;r<i;r+=1){const s=n.manhattanDistance(e[r]);s<t&&(t=s)}return t}function dM(n,e,t,r,i){const s=i.precision,o=i.directionMap,a=n.diff(e.getCenter()),l=Object.keys(o).reduce((c,u)=>{if(t.includes(u)){const d=o[u],h=new C(n.x+d.x*(Math.abs(a.x)+e.width),n.y+d.y*(Math.abs(a.y)+e.height)),g=new R(n,h).intersect(e)||[];let p,m=null;for(let v=0;v<g.length;v+=1){const b=g[v],y=n.squaredDistance(b);(null==p||y>p)&&(p=y,m=b)}if(m){let v=wd(m,r,s);e.containsPoint(v)&&(v=wd(v.translate(d.x*r.x,d.y*r.y),r,s)),c.push(v)}}return c},[]);return e.containsPoint(n)||l.push(wd(n,r,s)),l}function vZ(n,e,t,r,i){const s=[];let c,o=Um(i.diff(t)),a=Sl(t),l=n[a];for(;l;){c=e[a];const h=Um(c.diff(l));h.equals(o)||(s.unshift(c),o=h),a=Sl(l),l=n[a]}const u=e[a];return Um(u.diff(r)).equals(o)||s.unshift(u),s}function bZ(n,e,t,r,i){const s=i.precision;let o,a;o=P.isRectangle(e)?El(aM(n,i).clone(),s):El(e.clone(),s),a=P.isRectangle(t)?El(function fZ(n,e){return n.targetAnchor?n.targetAnchor:oM(n,e).getCenter()}(n,i).clone(),s):El(t.clone(),s);const l=function mZ(n,e,t){return{source:e.clone(),x:cM(t.x-e.x,n),y:cM(t.y-e.y,n)}}(i.step,o,a),c=o,u=a;let d,h;if(d=P.isRectangle(e)?dM(c,e,i.startDirections,l,i):[c],h=P.isRectangle(t)?dM(a,t,i.endDirections,l,i):[u],d=d.filter(f=>r.isAccessible(f)),h=h.filter(f=>r.isAccessible(f)),d.length>0&&h.length>0){const f=new dZ,g={},p={},m={};for(let k=0,I=d.length;k<I;k+=1){const F=d[k],Me=Sl(F);f.add(Me,uM(F,h)),g[Me]=F,m[Me]=0}const v=i.previousDirectionAngle,b=void 0===v;let y,w;const D=function pZ(n,e){const t=e.step;return e.directions.forEach(r=>{r.gridOffsetX=r.offsetX/t*n.x,r.gridOffsetY=r.offsetY/t*n.y}),e.directions}(l,i),x=D.length,S=h.reduce((k,I)=>{const F=Sl(I);return k.push(F),k},[]),M=C.equalPoints(d,h);let T=i.maxLoopCount;for(;!f.isEmpty()&&T>0;){const k=f.pop(),I=g[k],F=p[k],Me=m[k],le=I.equals(c),E=null==F;let A;if(A=E?b?le?null:Hm(c,I,x,l,i):v:Hm(F,I,x,l,i),(!E||!M)&&S.indexOf(k)>=0)return i.previousDirectionAngle=A,vZ(p,g,I,c,u);for(let Ie=0;Ie<x;Ie+=1){y=D[Ie];const Oe=y.angle;if(w=lM(A,Oe),(!b||!le)&&w>i.maxDirectionChange)continue;const at=wd(I.clone().translate(y.gridOffsetX||0,y.gridOffsetY||0),l,s),It=Sl(at);if(f.isClose(It)||!r.isAccessible(at))continue;if(S.indexOf(It)>=0&&!at.equals(u)&&lM(Oe,Hm(at,u,x,l,i))>i.maxDirectionChange)continue;const li=Me+y.cost+(le?0:i.penalties[w]);(!f.isOpen(It)||li<m[It])&&(g[It]=at,p[It]=I,m[It]=li,f.add(It,li+uM(at,h)))}T-=1}}return i.fallbackRoute?Z(i.fallbackRoute,this,c,u,i):null}const CZ=function(n,e,t){const r=function uZ(n){const e=Object.keys(n).reduce((t,r)=>(t[r]="fallbackRouter"===r||"draggingRouter"===r||"fallbackRoute"===r?n[r]:si(n[r],n),t),{});if(e.padding){const t=$i(e.padding);e.paddingBox={x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}return e.directions.forEach(t=>{const r=new C(0,0),i=new C(t.offsetX,t.offsetY);t.angle=_e.normalize(r.theta(i))}),e}(e),i=sM(t,r),s=oM(t,r),o=aM(t,r),a=new hZ(r).build(t.graph.model,t.cell),l=n.map(f=>C.create(f)),c=[];let d,h,u=o;for(let f=0,g=l.length;f<=g;f+=1){let p=null;if(d=h||i,h=l[f],null==h){h=s;const v=t.cell;if((null==v.getSourceCellId()||null==v.getTargetCellId())&&"function"==typeof r.draggingRouter){const y=d===i?o:d,w=h.getOrigin();p=Z(r.draggingRouter,t,y,w,r)}}if(null==p&&(p=bZ(t,d,h,a,r)),null===p)return console.warn("Unable to execute manhattan algorithm, use orth instead"),Z(r.fallbackRouter,this,n,r,t);const m=p[0];m&&m.equals(u)&&p.shift(),u=p[p.length-1]||u,c.push(...p)}return r.snapToGrid?function wZ(n,e=10){if(n.length<=1)return n;for(let t=0,r=n.length;t<r-1;t+=1){const i=n[t],s=n[t+1];if(i.x===s.x){const o=e*Math.round(i.x/e);i.x!==o&&(i.x=o,s.x=o)}else if(i.y===s.y){const o=e*Math.round(i.y/e);i.y!==o&&(i.y=o,s.y=o)}}return n}(c,t.graph.grid.getGridSize()):c},hM=function(n,e,t){return Z(CZ,this,n,Object.assign(Object.assign({},cZ),e),t)},DZ={maxDirectionChange:45,directions(){const n=si(this.step,this),e=si(this.cost,this),t=Math.ceil(Math.sqrt(n*n<<1));return[{cost:e,offsetX:n,offsetY:0},{cost:t,offsetX:n,offsetY:n},{cost:e,offsetX:0,offsetY:n},{cost:t,offsetX:-n,offsetY:n},{cost:e,offsetX:-n,offsetY:0},{cost:t,offsetX:-n,offsetY:-n},{cost:e,offsetX:0,offsetY:-n},{cost:t,offsetX:n,offsetY:-n}]},fallbackRoute(n,e,t){const r=n.theta(e),i=[];let s={x:e.x,y:n.y},o={x:n.x,y:e.y};if(r%180>90){const y=s;s=o,o=y}const a=r%90<45?s:o,l=new R(n,a),c=90*Math.ceil(r/90),u=C.fromPolar(l.squaredLength(),_e.toRad(c+135),a),d=new R(e,u),h=l.intersectsWithLine(d),f=h||e,p=360/t.directions.length,m=(h?f:n).theta(e),v=_e.normalize(m+p/2),b=p*Math.floor(v/p);return t.previousDirectionAngle=b,f&&i.push(f.round()),i.push(e),i}},xZ=function(n,e,t){return Z(hM,this,n,Object.assign(Object.assign({},DZ),e),t)},EZ=function(n,e,t){const r=e.offset||32,i=null==e.min?16:e.min;let s=0,o=e.direction;const a=t.sourceBBox,l=t.targetBBox,c=a.getCenter(),u=l.getCenter();if("number"==typeof r&&(s=r),null==o){let v=l.left-a.right,b=l.top-a.bottom;v>=0&&b>=0?o=v>=b?"L":"T":v<=0&&b>=0?(v=a.left-l.right,o=v>=0&&v>=b?"R":"T"):v>=0&&b<=0?(b=a.top-l.bottom,o=b>=0?v>=b?"L":"B":"L"):(v=a.left-l.right,b=a.top-l.bottom,o=v>=0&&b>=0?v>=b?"R":"B":v<=0&&b>=0?"B":v>=0&&b<=0||Math.abs(v)>Math.abs(b)?"R":"B")}let d,h,f;"H"===o?o=u.x-c.x>=0?"L":"R":"V"===o&&(o=u.y-c.y>=0?"T":"B"),"center"===r&&("L"===o?s=(l.left-a.right)/2:"R"===o?s=(a.left-l.right)/2:"T"===o?s=(l.top-a.bottom)/2:"B"===o&&(s=(a.top-l.bottom)/2));const g="L"===o||"R"===o;if(g){if(u.y===c.y)return[...n];f="L"===o?1:-1,d="x",h="width"}else{if(u.x===c.x)return[...n];f="T"===o?1:-1,d="y",h="height"}const p=c.clone(),m=u.clone();if(p[d]+=f*(a[h]/2+s),m[d]-=f*(l[h]/2+s),g){const v=p.x,b=m.x,y=a.width/2+i,w=l.width/2+i;u.x>c.x?b<=v&&(p.x=Math.max(b,c.x+y),m.x=Math.min(v,u.x-w)):b>=v&&(p.x=Math.min(b,c.x-y),m.x=Math.max(v,u.x+w))}else{const v=p.y,b=m.y,y=a.height/2+i,w=l.height/2+i;u.y>c.y?b<=v&&(p.y=Math.max(b,c.y+y),m.y=Math.min(v,u.y-w)):b>=v&&(p.y=Math.min(b,c.y-y),m.y=Math.max(v,u.y+w))}return[p.toJSON(),...n,m.toJSON()]};function So(n,e){if(null!=e&&!1!==e){const t="boolean"==typeof e?0:e;if(t>0){const r=C.create(n[1]).move(n[2],t),i=C.create(n[1]).move(n[0],t);return[r.toJSON(),...n,i.toJSON()]}{const r=n[1];return[Object.assign({},r),...n,Object.assign({},r)]}}return n}const SZ=function(n,e,t){const r=e.width||50,s=(e.height||80)/2,o=e.angle||"auto",a=t.sourceAnchor,l=t.targetAnchor,c=t.sourceBBox,u=t.targetBBox;if(a.equals(l)){const d=v=>{const b=_e.toRad(v),y=Math.sin(b),w=Math.cos(b),D=new C(a.x+w*r,a.y+y*r),x=new C(D.x-w*s,D.y-y*s),S=x.clone().rotate(-90,D),M=x.clone().rotate(90,D);return[S.toJSON(),D.toJSON(),M.toJSON()]},h=v=>{const b=a.clone().move(v,-1),y=new R(b,v);return!c.containsPoint(v)&&!c.intersectsWithLine(y)},f=[0,90,180,270,45,135,225,315];if("number"==typeof o)return So(d(o),e.merge);const g=c.getCenter();if(g.equals(a))return So(d(0),e.merge);const p=g.angleBetween(a,g.clone().translate(1,0));let m=d(p);if(h(m[1]))return So(m,e.merge);for(let v=1,b=f.length;v<b;v+=1)if(m=d(p+f[v]),h(m[1]))return So(m,e.merge);return So(m,e.merge)}{const d=new R(a,l);let h=d.parallel(-r),f=h.getCenter(),g=h.start.clone().move(h.end,s),p=h.end.clone().move(h.start,s);const m=d.parallel(-1),v=new R(m.start,f),b=new R(m.end,f);if((c.containsPoint(f)||u.containsPoint(f)||c.intersectsWithLine(v)||c.intersectsWithLine(b)||u.intersectsWithLine(v)||u.intersectsWithLine(b))&&(h=d.parallel(r),f=h.getCenter(),g=h.start.clone().move(h.end,s),p=h.end.clone().move(h.start,s)),e.merge){const y=new R(a,l),w=new R(f,y.center).setLength(Number.MAX_SAFE_INTEGER),D=c.intersectsWithLine(w),x=u.intersectsWithLine(w),S=D?Array.isArray(D)?D:[D]:[];x&&(Array.isArray(x)?S.push(...x):S.push(x));const M=y.center.closest(S);M?(t.sourceAnchor=M.clone(),t.targetAnchor=M.clone()):(t.sourceAnchor=y.center.clone(),t.targetAnchor=y.center.clone())}return So([g.toJSON(),f.toJSON(),p.toJSON()],e.merge)}};var oi;!function(n){n.presets=$d,n.registry=qe.create({type:"router"}),n.registry.register(n.presets,!0)}(oi||(oi={}));const _Z=function(n,e,t,r={}){const i=[n,...t,e],s=new Ge(i),o=new j(s);return r.raw?o:o.serialize()},AZ=function(n,e,t,r={}){const i=3===t.length?0:1,s=C.create(t[0+i]),o=C.create(t[2+i]),a=C.create(t[1+i]);if(!C.equals(n,e)){const c=new C((n.x+e.x)/2,(n.y+e.y)/2),u=c.angleBetween(C.create(n).rotate(90,c),a);u>1&&(s.rotate(180-u,c),o.rotate(180-u,c),a.rotate(180-u,c))}const l=`\n     M ${n.x} ${n.y}\n     Q ${s.x} ${s.y} ${a.x} ${a.y}\n     Q ${o.x} ${o.y} ${e.x} ${e.y}\n  `;return r.raw?j.parse(l):l},MZ=function(n,e,t,r={}){const i=new j;i.appendSegment(j.createSegment("M",n));const s=1/3,o=2/3,a=r.radius||10;let l,c;for(let u=0,d=t.length;u<d;u+=1){const h=C.create(t[u]),f=t[u-1]||n,g=t[u+1]||e;l=c||h.distance(f)/2,c=h.distance(g)/2;const p=-Math.min(a,l),m=-Math.min(a,c),v=h.clone().move(f,p).round(),b=h.clone().move(g,m).round(),y=new C(s*v.x+o*h.x,o*h.y+s*v.y),w=new C(s*b.x+o*h.x,o*h.y+s*b.y);i.appendSegment(j.createSegment("L",v)),i.appendSegment(j.createSegment("C",y,w,b))}return i.appendSegment(j.createSegment("L",e)),r.raw?i:i.serialize()},TZ=function(n,e,t,r={}){let i,s=r.direction;if(t&&0!==t.length){const o=[n,...t,e],a=$e.throughPoints(o);i=new j(a)}else if(i=new j,i.appendSegment(j.createSegment("M",n)),s||(s=Math.abs(n.x-e.x)>=Math.abs(n.y-e.y)?"H":"V"),"H"===s){const o=(n.x+e.x)/2;i.appendSegment(j.createSegment("C",o,n.y,o,e.y,e.x,e.y))}else{const o=(n.y+e.y)/2;i.appendSegment(j.createSegment("C",n.x,o,e.x,o,e.x,e.y))}return r.raw?i:i.serialize()},Cd=1/3,Dd=2/3;function zm(n,e,t=[]){const r=[n,...t,e],i=[];return r.forEach((s,o)=>{const a=r[o+1];null!=a&&i.push(new R(s,a))}),i}function gM(n,e){return new R(n,e).squaredLength()}function pM(n,e,t,r){const i=new j;let s;return s=j.createSegment("M",n[0].start),i.appendSegment(s),n.forEach((o,a)=>{if(_l.includes(o)){let l,c,u,d;if("arc"===t){l=-90,c=o.start.diff(o.end),(c.x<0||0===c.x&&c.y<0)&&(l+=180);const f=o.getCenter(),g=new R(f,o.end).rotate(l,f);let p;p=new R(o.start,f),u=p.pointAt(2/3).rotate(l,o.start),d=g.pointAt(1/3).rotate(-l,g.end),s=j.createSegment("C",u,d,g.end),i.appendSegment(s),p=new R(f,o.end),u=g.pointAt(1/3).rotate(l,g.end),d=p.pointAt(1/3).rotate(-l,o.end),s=j.createSegment("C",u,d,o.end),i.appendSegment(s)}else if("gap"===t)s=j.createSegment("M",o.end),i.appendSegment(s);else if("cubic"===t){l=o.start.theta(o.end);const h=.6*e;let f=1.35*e;c=o.start.diff(o.end),(c.x<0||0===c.x&&c.y<0)&&(f*=-1),u=new C(o.start.x+h,o.start.y+f).rotate(l,o.start),d=new C(o.end.x-h,o.end.y+f).rotate(l,o.end),s=j.createSegment("C",u,d,o.end),i.appendSegment(s)}}else{const l=n[a+1];0===r||!l||_l.includes(l)?(s=j.createSegment("L",o.end),i.appendSegment(s)):function NZ(n,e,t,r,i){const s=t.distance(r)/2,o=t.distance(i)/2,a=-Math.min(n,s),l=-Math.min(n,o),c=t.clone().move(r,a).round(),u=t.clone().move(i,l).round(),d=new C(Cd*c.x+Dd*t.x,Dd*t.y+Cd*c.y),h=new C(Cd*u.x+Dd*t.x,Dd*t.y+Cd*u.y);let f;f=j.createSegment("L",c),e.appendSegment(f),f=j.createSegment("C",d,h,u),e.appendSegment(f)}(r,i,o.end,o.start,l.end)}}),i}let _l,xd;const RZ=function(n,e,t,r={}){_l=[],xd=[],function PZ(n){let e=n.graph._jumpOverUpdateList;if(null==e&&(e=n.graph._jumpOverUpdateList=[],n.graph.on("cell:mouseup",()=>{const t=n.graph._jumpOverUpdateList;for(let r=0;r<t.length;r+=1)t[r].update()}),n.graph.on("model:reseted",()=>{e=n.graph._jumpOverUpdateList=[]})),e.indexOf(n)<0){e.push(n);const t=()=>e.splice(e.indexOf(n),1);n.cell.once("change:connector",t),n.cell.once("removed",t)}}(this);const i=r.size||5,s=r.type||"arc",o=r.radius||0,a=r.ignoreConnectors||["smooth"],l=this.graph,u=l.model.getEdges();if(1===u.length)return pM(zm(n,e,t),i,s,o);const d=this.cell,h=u.indexOf(d),f=l.options.connecting.connector||{},g=u.filter((w,D)=>{const x=w.getConnector()||f;return!(a.includes(x.name)||D>h&&"jumpover"===x.name)}),p=g.map(w=>l.findViewByCell(w)),m=zm(n,e,t),v=p.map(w=>null==w?[]:w===this?m:zm(w.sourcePoint,w.targetPoint,w.routePoints)),b=[];m.forEach(w=>{const D=g.reduce((x,S,M)=>{if(S!==d){const T=function IZ(n,e){const t=[];return e.forEach(r=>{const i=n.intersectsWithLine(r);i&&t.push(i)}),t}(w,v[M]);x.push(...T)}return x},[]).sort((x,S)=>gM(w.start,x)-gM(w.start,S));D.length>0?b.push(...function OZ(n,e,t){return e.reduce((r,i,s)=>{if(xd.includes(i))return r;const o=r.pop()||n,a=C.create(i).move(o.start,-t);let l=C.create(i).move(o.start,+t);const c=e[s+1];if(null!=c){const h=l.distance(c);h<=t&&(l=c.move(o.start,h),xd.push(c))}else if(a.distance(o.end)<2*t+1)return r.push(o),r;if(l.distance(o.start)<2*t+1)return r.push(o),r;const d=new R(a,l);return _l.push(d),r.push(new R(o.start,a),d,new R(l,o.end)),r},[])}(w,D,i)):b.push(w)});const y=pM(b,i,s,o);return _l=[],xd=[],r.raw?y:y.serialize()};var Wi;!function(n){n.presets=Vd,n.registry=qe.create({type:"connector"}),n.registry.register(n.presets,!0)}(Wi||(Wi={}));class mM extends pn{constructor(e={}){super(),this.pending=!1,this.changing=!1,this.data={},this.mutate(Be(e)),this.changed={}}mutate(e,t={}){const r=!0===t.unset,i=!0===t.silent,s=[],o=this.changing;this.changing=!0,o||(this.previous=Be(this.data),this.changed={});const a=this.data,l=this.previous,c=this.changed;if(Object.keys(e).forEach(u=>{const d=u,h=e[d];vr(a[d],h)||s.push(d),vr(l[d],h)?delete c[d]:c[d]=h,r?delete a[d]:a[d]=h}),!i&&s.length>0&&(this.pending=!0,this.pendingOptions=t,s.forEach(u=>{this.emit("change:*",{key:u,options:t,store:this,current:a[u],previous:l[u]})})),o)return this;if(!i)for(;this.pending;)this.pending=!1,this.emit("changed",{current:a,previous:l,store:this,options:this.pendingOptions});return this.pending=!1,this.changing=!1,this.pendingOptions=null,this}get(e,t){return null==e?this.data:this.data[e]??t}getPrevious(e){if(this.previous)return this.previous[e]??void 0}set(e,t,r){return null!=e&&("object"==typeof e?this.mutate(e,t):this.mutate({[e]:t},r)),this}remove(e,t){const i={};let s;if("string"==typeof e)i[e]=void 0,s=t;else if(Array.isArray(e))e.forEach(o=>i[o]=void 0),s=t;else{for(const o in this.data)i[o]=void 0;s=e}return this.mutate(i,Object.assign(Object.assign({},s),{unset:!0})),this}getByPath(e){return cm(this.data,e,"/")}setByPath(e,t,r={}){const i="/",s=Array.isArray(e)?[...e]:e.split(i),o=Array.isArray(e)?e.join(i):e,a=s[0],l=s.length;if(r.propertyPath=o,r.propertyValue=t,r.propertyPathArray=s,1===l)this.set(a,t,r);else{const c={};let u=c,d=a;for(let g=1;g<l;g+=1){const p=s[g],m=Number.isFinite(Number(p));u=u[d]=m?[]:{},d=p}rl(c,s,t,i);const h=Be(this.data);r.rewrite&&jS(h,e,i);const f=ze(h,c);this.set(a,f[a],r)}return this}removeByPath(e,t){const r=Array.isArray(e)?e:e.split("/"),i=r[0];if(1===r.length)this.remove(i,t);else{const s=r.slice(1),o=Be(this.get(i));o&&jS(o,s),this.set(i,o,t)}return this}hasChanged(e){return null==e?Object.keys(this.changed).length>0:e in this.changed}getChanges(e){if(null==e)return this.hasChanged()?Be(this.changed):null;const t=this.changing?this.previous:this.data,r={};let i;for(const s in e){const o=e[s];vr(t[s],o)||(r[s]=o,i=!0)}return i?Be(r):null}toJSON(){return Be(this.data)}clone(){return new(0,this.constructor)(this.data)}dispose(){this.off(),this.data={},this.previous={},this.changed={},this.pending=!1,this.changing=!1,this.pendingOptions=null,this.trigger("disposed",{store:this})}}!function(n,e,t,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([pn.dispose()],mM.prototype,"dispose",null);class Al{constructor(e){this.cell=e,this.ids={},this.cache={}}get(){return Object.keys(this.ids)}start(e,t,r={},i="/"){const s=this.cell.getPropByPath(e),o=U5(r,Al.defaultOptions),a=this.getTiming(o.timing),l=this.getInterp(o.interp,s,t);let c=0;const u=Array.isArray(e)?e.join(i):e,d=Array.isArray(e)?e:e.split(i),h=()=>{const f=(new Date).getTime();0===c&&(c=f);let p=(f-c)/o.duration;p<1?this.ids[u]=requestAnimationFrame(h):p=1;const m=l(a(p));this.cell.setPropByPath(d,m),r.progress&&r.progress(Object.assign({progress:p,currentValue:m},this.getArgs(u))),1===p&&(this.cell.notify("transition:complete",this.getArgs(u)),r.complete&&r.complete(this.getArgs(u)),this.cell.notify("transition:finish",this.getArgs(u)),r.finish&&r.finish(this.getArgs(u)),this.clean(u))};return setTimeout(()=>{this.stop(e,void 0,i),this.cache[u]={startValue:s,targetValue:t,options:o},this.ids[u]=requestAnimationFrame(h),this.cell.notify("transition:start",this.getArgs(u)),r.start&&r.start(this.getArgs(u))},r.delay),this.stop.bind(this,e,i,r)}stop(e,t={},r="/"){const i=Array.isArray(e)?e:e.split(r);return Object.keys(this.ids).filter(s=>vr(i,s.split(r).slice(0,i.length))).forEach(s=>{cancelAnimationFrame(this.ids[s]);const o=this.cache[s],a=this.getArgs(s),l=Object.assign(Object.assign({},o.options),t),c=l.jumpedToEnd;c&&null!=o.targetValue&&(this.cell.setPropByPath(s,o.targetValue),this.cell.notify("transition:end",Object.assign({},a)),this.cell.notify("transition:complete",Object.assign({},a)),l.complete&&l.complete(Object.assign({},a)));const u=Object.assign({jumpedToEnd:c},a);this.cell.notify("transition:stop",Object.assign({},u)),l.stop&&l.stop(Object.assign({},u)),this.cell.notify("transition:finish",Object.assign({},a)),l.finish&&l.finish(Object.assign({},a)),this.clean(s)}),this}clean(e){delete this.ids[e],delete this.cache[e]}getTiming(e){return"string"==typeof e?Xr[e]:e}getInterp(e,t,r){return e?e(t,r):"number"==typeof r?Jr.number(t,r):"string"==typeof r?"#"===r[0]?Jr.color(t,r):Jr.unit(t,r):Jr.object(t,r)}getArgs(e){const t=this.cache[e];return{path:e,startValue:t.startValue,targetValue:t.targetValue,cell:this.cell}}}!function(n){n.defaultOptions={delay:10,duration:100,timing:"linear"}}(Al||(Al={}));var _o,yM=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t};class ae extends pn{static config(e){const{markup:t,propHooks:r,attrHooks:i}=e,s=yM(e,["markup","propHooks","attrHooks"]);null!=t&&(this.markup=t),r&&(this.propHooks=this.propHooks.slice(),Array.isArray(r)?this.propHooks.push(...r):"function"==typeof r?this.propHooks.push(r):Object.keys(r).forEach(o=>{const a=r[o];"function"==typeof a&&this.propHooks.push(a)})),i&&(this.attrHooks=Object.assign(Object.assign({},this.attrHooks),i)),this.defaults=ze({},this.defaults,s)}static getMarkup(){return this.markup}static getDefaults(e){return e?this.defaults:Be(this.defaults)}static getAttrHooks(){return this.attrHooks}static applyPropHooks(e,t){return this.propHooks.reduce((r,i)=>i?Z(i,e,r):r,t)}get[Symbol.toStringTag](){return ae.toStringTag}constructor(e={}){super();const r=this.constructor.getDefaults(!0),i=ze({},this.preprocess(r),this.preprocess(e));this.id=i.id||mm(),this.store=new mM(i),this.animation=new Al(this),this.setup(),this.init(),this.postprocess(e)}init(){}get model(){return this._model}set model(e){this._model!==e&&(this._model=e)}preprocess(e,t){const r=e.id,s=this.constructor.applyPropHooks(this,e);return null==r&&!0!==t&&(s.id=mm()),s}postprocess(e){}setup(){this.store.on("change:*",e=>{const{key:t,current:r,previous:i,options:s}=e;this.notify("change:*",{key:t,options:s,current:r,previous:i,cell:this}),this.notify(`change:${t}`,{options:s,current:r,previous:i,cell:this}),("source"===t||"target"===t)&&this.notify("change:terminal",{type:t,current:r,previous:i,options:s,cell:this})}),this.store.on("changed",({options:e})=>this.notify("changed",{options:e,cell:this}))}notify(e,t){this.trigger(e,t);const r=this.model;return r&&(r.notify(`cell:${e}`,t),this.isNode()?r.notify(`node:${e}`,Object.assign(Object.assign({},t),{node:this})):this.isEdge()&&r.notify(`edge:${e}`,Object.assign(Object.assign({},t),{edge:this}))),this}isNode(){return!1}isEdge(){return!1}isSameStore(e){return this.store===e.store}get view(){return this.store.get("view")}get shape(){return this.store.get("shape","")}getProp(e,t){return null==e?this.store.get():this.store.get(e,t)}setProp(e,t,r){if("string"==typeof e)this.store.set(e,t,r);else{const i=this.preprocess(e,!0);this.store.set(ze({},this.getProp(),i),t),this.postprocess(e)}return this}removeProp(e,t){return"string"==typeof e||Array.isArray(e)?this.store.removeByPath(e,t):this.store.remove(t),this}hasChanged(e){return null==e?this.store.hasChanged():this.store.hasChanged(e)}getPropByPath(e){return this.store.getByPath(e)}setPropByPath(e,t,r={}){return this.model&&("children"===e?this._children=t?t.map(i=>this.model.getCell(i)).filter(i=>null!=i):null:"parent"===e&&(this._parent=t?this.model.getCell(t):null)),this.store.setByPath(e,t,r),this}removePropByPath(e,t={}){const r=Array.isArray(e)?e:e.split("/");return"attrs"===r[0]&&(t.dirty=!0),this.store.removeByPath(r,t),this}prop(e,t,r){return null==e?this.getProp():"string"==typeof e||Array.isArray(e)?1===arguments.length?this.getPropByPath(e):null==t?this.removePropByPath(e,r||{}):this.setPropByPath(e,t,r||{}):this.setProp(e,t||{})}previous(e){return this.store.getPrevious(e)}get zIndex(){return this.getZIndex()}set zIndex(e){null==e?this.removeZIndex():this.setZIndex(e)}getZIndex(){return this.store.get("zIndex")}setZIndex(e,t={}){return this.store.set("zIndex",e,t),this}removeZIndex(e={}){return this.store.remove("zIndex",e),this}toFront(e={}){const t=this.model;if(t){let i,r=t.getMaxZIndex();e.deep?(i=this.getDescendants({deep:!0,breadthFirst:!0}),i.unshift(this)):i=[this],r=r-i.length+1;const s=t.total();let o=t.indexOf(this)!==s-i.length;o||(o=i.some((a,l)=>a.getZIndex()!==r+l)),o&&this.batchUpdate("to-front",()=>{r+=i.length,i.forEach((a,l)=>{a.setZIndex(r+l,e)})})}return this}toBack(e={}){const t=this.model;if(t){let i,r=t.getMinZIndex();e.deep?(i=this.getDescendants({deep:!0,breadthFirst:!0}),i.unshift(this)):i=[this];let s=0!==t.indexOf(this);s||(s=i.some((o,a)=>o.getZIndex()!==r+a)),s&&this.batchUpdate("to-back",()=>{r-=i.length,i.forEach((o,a)=>{o.setZIndex(r+a,e)})})}return this}get markup(){return this.getMarkup()}set markup(e){null==e?this.removeMarkup():this.setMarkup(e)}getMarkup(){let e=this.store.get("markup");return null==e&&(e=this.constructor.getMarkup()),e}setMarkup(e,t={}){return this.store.set("markup",e,t),this}removeMarkup(e={}){return this.store.remove("markup",e),this}get attrs(){return this.getAttrs()}set attrs(e){null==e?this.removeAttrs():this.setAttrs(e)}getAttrs(){const e=this.store.get("attrs");return e?Object.assign({},e):{}}setAttrs(e,t={}){if(null==e)this.removeAttrs(t);else{const r=i=>this.store.set("attrs",i,t);if(!0===t.overwrite)r(e);else{const i=this.getAttrs();r(!1===t.deep?Object.assign(Object.assign({},i),e):ze({},i,e))}}return this}replaceAttrs(e,t={}){return this.setAttrs(e,Object.assign(Object.assign({},t),{overwrite:!0}))}updateAttrs(e,t={}){return this.setAttrs(e,Object.assign(Object.assign({},t),{deep:!1}))}removeAttrs(e={}){return this.store.remove("attrs",e),this}getAttrDefinition(e){if(!e)return null;const r=this.constructor.getAttrHooks()||{};let i=r[e]||Qn.registry.get(e);if(!i){const s=sl(e);i=r[s]||Qn.registry.get(s)}return i||null}getAttrByPath(e){return null==e||""===e?this.getAttrs():this.getPropByPath(this.prefixAttrPath(e))}setAttrByPath(e,t,r={}){return this.setPropByPath(this.prefixAttrPath(e),t,r),this}removeAttrByPath(e,t={}){return this.removePropByPath(this.prefixAttrPath(e),t),this}prefixAttrPath(e){return Array.isArray(e)?["attrs"].concat(e):`attrs/${e}`}attr(e,t,r){return null==e?this.getAttrByPath():"string"==typeof e||Array.isArray(e)?1===arguments.length?this.getAttrByPath(e):null==t?this.removeAttrByPath(e,r||{}):this.setAttrByPath(e,t,r||{}):this.setAttrs(e,t||{})}get visible(){return this.isVisible()}set visible(e){this.setVisible(e)}setVisible(e,t={}){return this.store.set("visible",e,t),this}isVisible(){return!1!==this.store.get("visible")}show(e={}){return this.isVisible()||this.setVisible(!0,e),this}hide(e={}){return this.isVisible()&&this.setVisible(!1,e),this}toggleVisible(e,t={}){const i="boolean"==typeof e?t:e;return("boolean"==typeof e?e:!this.isVisible())?this.show(i):this.hide(i),this}get data(){return this.getData()}set data(e){this.setData(e)}getData(){return this.store.get("data")}setData(e,t={}){if(null==e)this.removeData(t);else{const r=i=>this.store.set("data",i,t);if(!0===t.overwrite)r(e);else{const i=this.getData();r(!1===t.deep?"object"==typeof e?Object.assign(Object.assign({},i),e):e:ze({},i,e))}}return this}replaceData(e,t={}){return this.setData(e,Object.assign(Object.assign({},t),{overwrite:!0}))}updateData(e,t={}){return this.setData(e,Object.assign(Object.assign({},t),{deep:!1}))}removeData(e={}){return this.store.remove("data",e),this}get parent(){return this.getParent()}get children(){return this.getChildren()}getParentId(){return this.store.get("parent")}getParent(){const e=this.getParentId();if(e&&this.model){const t=this.model.getCell(e);return this._parent=t,t}return null}getChildren(){const e=this.store.get("children");if(e&&e.length&&this.model){const t=e.map(r=>{var i;return null===(i=this.model)||void 0===i?void 0:i.getCell(r)}).filter(r=>null!=r);return this._children=t,[...t]}return null}hasParent(){return null!=this.parent}isParentOf(e){return null!=e&&e.getParent()===this}isChildOf(e){return null!=e&&this.getParent()===e}eachChild(e,t){return this.children&&this.children.forEach(e,t),this}filterChild(e,t){return this.children?this.children.filter(e,t):[]}getChildCount(){return null==this.children?0:this.children.length}getChildIndex(e){return null==this.children?-1:this.children.indexOf(e)}getChildAt(e){return null!=this.children&&e>=0?this.children[e]:null}getAncestors(e={}){const t=[];let r=this.getParent();for(;r;)t.push(r),r=!1!==e.deep?r.getParent():null;return t}getDescendants(e={}){if(!1!==e.deep){if(e.breadthFirst){const t=[],r=this.getChildren()||[];for(;r.length>0;){const i=r.shift(),s=i.getChildren();t.push(i),s&&r.push(...s)}return t}{const t=this.getChildren()||[];return t.forEach(r=>{t.push(...r.getDescendants(e))}),t}}return this.getChildren()||[]}isDescendantOf(e,t={}){if(null==e)return!1;if(!1!==t.deep){let r=this.getParent();for(;r;){if(r===e)return!0;r=r.getParent()}return!1}return this.isChildOf(e)}isAncestorOf(e,t={}){return null!=e&&e.isDescendantOf(this,t)}contains(e){return this.isAncestorOf(e)}getCommonAncestor(...e){return ae.getCommonAncestor(this,...e)}setParent(e,t={}){return this._parent=e,e?this.store.set("parent",e.id,t):this.store.remove("parent",t),this}setChildren(e,t={}){return this._children=e,null!=e?this.store.set("children",e.map(r=>r.id),t):this.store.remove("children",t),this}unembed(e,t={}){const r=this.children;if(null!=r&&null!=e){const i=this.getChildIndex(e);-1!==i&&(r.splice(i,1),e.setParent(null,t),this.setChildren(r,t))}return this}embed(e,t={}){return e.addTo(this,t),this}addTo(e,t={}){return ae.isCell(e)?e.addChild(this,t):e.addCell(this,t),this}insertTo(e,t,r={}){return e.insertChild(this,t,r),this}addChild(e,t={}){return this.insertChild(e,void 0,t)}insertChild(e,t,r={}){if(null!=e&&e!==this){const i=e.getParent(),s=this!==i;let o=t;if(null==o&&(o=this.getChildCount(),s||(o-=1)),i){const l=i.getChildren();if(l){const c=l.indexOf(e);c>=0&&(e.setParent(null,r),l.splice(c,1),i.setChildren(l,r))}}let a=this.children;if(null==a?(a=[],a.push(e)):a.splice(o,0,e),e.setParent(this,r),this.setChildren(a,r),s&&this.model){const l=this.model.getIncomingEdges(this),c=this.model.getOutgoingEdges(this);l&&l.forEach(u=>u.updateParent(r)),c&&c.forEach(u=>u.updateParent(r))}this.model&&this.model.addCell(e,r)}return this}removeFromParent(e={}){const t=this.getParent();if(null!=t){const r=t.getChildIndex(this);t.removeChildAt(r,e)}return this}removeChild(e,t={}){const r=this.getChildIndex(e);return this.removeChildAt(r,t)}removeChildAt(e,t={}){const r=this.getChildAt(e);return null!=this.children&&null!=r&&(this.unembed(r,t),r.remove(t)),r}remove(e={}){return this.batchUpdate("remove",()=>{const t=this.getParent();t&&t.removeChild(this,e),!1!==e.deep&&this.eachChild(r=>r.remove(e)),this.model&&this.model.removeCell(this,e)}),this}transition(e,t,r={},i="/"){return this.animation.start(e,t,r,i)}stopTransition(e,t,r="/"){return this.animation.stop(e,t,r),this}getTransitions(){return this.animation.get()}translate(e,t,r){return this}scale(e,t,r,i){return this}addTools(e,t,r){const i=Array.isArray(e)?e:[e],s="string"==typeof t?t:null,o="object"==typeof t?t:"object"==typeof r?r:{};if(o.reset)return this.setTools({name:s,items:i,local:o.local},o);let a=Be(this.getTools());return null==a||null==s||a.name===s?(null==a&&(a={}),a.items||(a.items=[]),a.name=s,a.items=[...a.items,...i],this.setTools(Object.assign({},a),o)):void 0}setTools(e,t={}){return null==e?this.removeTools():this.store.set("tools",ae.normalizeTools(e),t),this}getTools(){return this.store.get("tools")}removeTools(e={}){return this.store.remove("tools",e),this}hasTools(e){const t=this.getTools();return null!=t&&(null==e||t.name===e)}hasTool(e){const t=this.getTools();return null!=t&&t.items.some(r=>"string"==typeof r?r===e:r.name===e)}removeTool(e,t={}){const r=Be(this.getTools());if(r){let i=!1;const s=r.items.slice(),o=a=>{s.splice(a,1),i=!0};if("number"==typeof e)o(e);else for(let a=s.length-1;a>=0;a-=1){const l=s[a];("string"==typeof l?l===e:l.name===e)&&o(a)}i&&(r.items=s,this.setTools(r,t))}return this}getBBox(e){return new P}getConnectionPoint(e,t){return new C}toJSON(e={}){const t=Object.assign({},this.store.get()),r=Object.prototype.toString,i=this.isNode()?"node":this.isEdge()?"edge":"cell";if(!t.shape){const g=this.constructor;throw new Error(`Unable to serialize ${i} missing "shape" prop, check the ${i} "${g.name||r.call(g)}"`)}const o=!0===e.diff,a=t.attrs||{},l=this.constructor.getDefaults(!0),c=o?this.preprocess(l,!0):l,u=c.attrs||{},d={};Object.keys(t).forEach(g=>{const p=t[g];if(null!=p&&!Array.isArray(p)&&"object"==typeof p&&!Jn(p))throw new Error(`Can only serialize ${i} with plain-object props, but got a "${r.call(p)}" type of key "${g}" on ${i} "${this.id}"`);"attrs"!==g&&"shape"!==g&&o&&vr(p,c[g])&&delete t[g]}),Object.keys(a).forEach(g=>{const p=a[g],m=u[g];Object.keys(p).forEach(v=>{const b=p[v],y=m?m[v]:null;null==b||"object"!=typeof b||Array.isArray(b)?(null==m||!vr(y,b))&&(null==d[g]&&(d[g]={}),d[g][v]=b):Object.keys(b).forEach(w=>{const D=b[w];null!=m&&null!=y&&Ue(y)&&vr(y[w],D)||(null==d[g]&&(d[g]={}),null==d[g][v]&&(d[g][v]={}),d[g][v][w]=D)})})});const h=Object.assign(Object.assign({},t),{attrs:ES(d)?void 0:d});null==h.attrs&&delete h.attrs;const f=h;return 0===f.angle&&delete f.angle,Be(f)}clone(e={}){if(!e.deep){const r=Object.assign({},this.store.get());return e.keepId||delete r.id,delete r.parent,delete r.children,new(0,this.constructor)(r)}return ae.deepClone(this)[this.id]}findView(e){return e.findViewByCell(this)}startBatch(e,t={},r=this.model){return this.notify("batch:start",{name:e,data:t,cell:this}),r&&r.startBatch(e,Object.assign(Object.assign({},t),{cell:this})),this}stopBatch(e,t={},r=this.model){return r&&r.stopBatch(e,Object.assign(Object.assign({},t),{cell:this})),this.notify("batch:stop",{name:e,data:t,cell:this}),this}batchUpdate(e,t,r){const i=this.model;this.startBatch(e,r,i);const s=t();return this.stopBatch(e,r,i),s}dispose(){this.removeFromParent(),this.store.dispose()}}ae.defaults={},ae.attrHooks={},ae.propHooks=[],function(n,e,t,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([pn.dispose()],ae.prototype,"dispose",null),function(n){n.normalizeTools=function e(t){return"string"==typeof t?{items:[t]}:Array.isArray(t)?{items:t}:t.items?t:{items:[t]}}}(ae||(ae={})),function(n){n.toStringTag=`X6.${n.name}`,n.isCell=function e(t){if(null==t)return!1;if(t instanceof n)return!0;const r=t[Symbol.toStringTag];return(null==r||r===n.toStringTag)&&"function"==typeof t.isNode&&"function"==typeof t.isEdge&&"function"==typeof t.prop&&"function"==typeof t.attr}}(ae||(ae={})),function(n){n.getCommonAncestor=function e(...s){const o=s.filter(l=>null!=l).map(l=>l.getAncestors()).sort((l,c)=>l.length-c.length);return o.shift().find(l=>o.every(c=>c.includes(l)))||null},n.getCellsBBox=function t(s,o={}){let a=null;for(let l=0,c=s.length;l<c;l+=1){const u=s[l];let d=u.getBBox(o);if(d){if(u.isNode()){const h=u.getAngle();null!=h&&0!==h&&(d=d.bbox(h))}a=null==a?d:a.union(d)}}return a},n.deepClone=function r(s){const o=[s,...s.getDescendants({deep:!0})];return n.cloneCells(o)},n.cloneCells=function i(s){const o=HS(s),a=o.reduce((l,c)=>(l[c.id]=c.clone(),l),{});return o.forEach(l=>{const c=a[l.id];if(c.isEdge()){const h=c.getSourceCellId(),f=c.getTargetCellId();h&&a[h]&&c.setSource(Object.assign(Object.assign({},c.getSource()),{cell:a[h].id})),f&&a[f]&&c.setTarget(Object.assign(Object.assign({},c.getTarget()),{cell:a[f].id}))}const u=l.getParent();u&&a[u.id]&&c.setParent(a[u.id]);const d=l.getChildren();if(d&&d.length){const h=d.reduce((f,g)=>(a[g.id]&&f.push(a[g.id]),f),[]);h.length>0&&c.setChildren(h)}}),a}}(ae||(ae={})),function(n){n.config({propHooks(e){var{tools:t}=e,r=yM(e,["tools"]);return t&&(r.tools=n.normalizeTools(t)),r}})}(ae||(ae={})),function(n){let e,t;n.exist=function r(o,a){return a?null!=e&&e.exist(o):null!=t&&t.exist(o)},n.setEdgeRegistry=function i(o){e=o},n.setNodeRegistry=function s(o){t=o}}(_o||(_o={}));class FZ{constructor(e){this.ports=[],this.groups={},this.init(Be(e))}getPorts(){return this.ports}getGroup(e){return null!=e?this.groups[e]:null}getPortsByGroup(e){return this.ports.filter(t=>t.group===e||null==t.group&&null==e)}getPortsLayoutByGroup(e,t){const r=this.getPortsByGroup(e),i=e?this.getGroup(e):null,s=i?i.position:null,o=s?s.name:null;let a;if(null!=o){const d=qi.registry.get(o);if(null==d)return qi.registry.onNotFound(o);a=d}else a=qi.presets.left;return a(r.map(d=>d&&d.position&&d.position.args||{}),t,s&&s.args||{}).map((d,h)=>{const f=r[h];return{portLayout:d,portId:f.id,portSize:f.size,portAttrs:f.attrs,labelSize:f.label.size,labelLayout:this.getPortLabelLayout(f,C.create(d.position),t)}})}init(e){const{groups:t,items:r}=e;null!=t&&Object.keys(t).forEach(i=>{this.groups[i]=this.parseGroup(t[i])}),Array.isArray(r)&&r.forEach(i=>{this.ports.push(this.parsePort(i))})}parseGroup(e){return Object.assign(Object.assign({},e),{label:this.getLabel(e,!0),position:this.getPortPosition(e.position,!0)})}parsePort(e){const t=Object.assign({},e),r=this.getGroup(e.group)||{};return t.markup=t.markup||r.markup,t.attrs=ze({},r.attrs,t.attrs),t.position=this.createPosition(r,t),t.label=ze({},r.label,this.getLabel(t)),t.zIndex=this.getZIndex(r,t),t.size=Object.assign(Object.assign({},r.size),t.size),t}getZIndex(e,t){return"number"==typeof t.zIndex?t.zIndex:"number"==typeof e.zIndex||"auto"===e.zIndex?e.zIndex:"auto"}createPosition(e,t){return ze({name:"left",args:{}},e.position,{args:t.args})}getPortPosition(e,t=!1){if(null==e){if(t)return{name:"left",args:{}}}else{if("string"==typeof e)return{name:e,args:{}};if(Array.isArray(e))return{name:"absolute",args:{x:e[0],y:e[1]}};if("object"==typeof e)return e}return{args:{}}}getPortLabelPosition(e,t=!1){if(null==e){if(t)return{name:"left",args:{}}}else{if("string"==typeof e)return{name:e,args:{}};if("object"==typeof e)return e}return{args:{}}}getLabel(e,t=!1){const r=e.label||{};return r.position=this.getPortLabelPosition(r.position,t),r}getPortLabelLayout(e,t,r){const s=e.label.position.args||{},o=vo.registry.get(e.label.position.name||"left")||vo.presets.left;return o?o(t,r,s):null}}var Ed=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t};let et=(()=>{class n extends ae{get[Symbol.toStringTag](){return n.toStringTag}constructor(t={}){super(t),this.initPorts()}preprocess(t,r){const{x:i,y:s,width:o,height:a}=t,l=Ed(t,["x","y","width","height"]);if(null!=i||null!=s){const c=l.position;l.position=Object.assign(Object.assign({},c),{x:i??(c?c.x:0),y:s??(c?c.y:0)})}if(null!=o||null!=a){const c=l.size;l.size=Object.assign(Object.assign({},c),{width:o??(c?c.width:0),height:a??(c?c.height:0)})}return super.preprocess(l,r)}isNode(){return!0}size(t,r,i){return void 0===t?this.getSize():"number"==typeof t?this.setSize(t,r,i):this.setSize(t,r)}getSize(){const t=this.store.get("size");return t?Object.assign({},t):{width:1,height:1}}setSize(t,r,i){return"object"==typeof t?this.resize(t.width,t.height,r):this.resize(t,r,i),this}resize(t,r,i={}){this.startBatch("resize",i);const s=i.direction;if(s){const o=this.getSize();switch(s){case"left":case"right":r=o.height;break;case"top":case"bottom":t=o.width}let l={right:0,"top-right":0,top:1,"top-left":1,left:2,"bottom-left":2,bottom:3,"bottom-right":3}[s];const c=_e.normalize(this.getAngle()||0);i.absolute&&(l+=Math.floor((c+45)/90),l%=4);const u=this.getBBox();let d;d=0===l?u.getBottomLeft():1===l?u.getCorner():2===l?u.getTopRight():u.getOrigin();const h=d.clone().rotate(-c,u.getCenter()),f=Math.sqrt(t*t+r*r)/2;let g=l*Math.PI/2;g+=Math.atan(l%2==0?r/t:t/r),g-=_e.toRad(c);const m=C.fromPolar(f,g,h).clone().translate(t/-2,r/-2);this.store.set("size",{width:t,height:r},i),this.setPosition(m.x,m.y,i)}else this.store.set("size",{width:t,height:r},i);return this.stopBatch("resize",i),this}scale(t,r,i,s={}){const o=this.getBBox().scale(t,r,i??void 0);return this.startBatch("scale",s),this.setPosition(o.x,o.y,s),this.resize(o.width,o.height,s),this.stopBatch("scale"),this}position(t,r,i){return"number"==typeof t?this.setPosition(t,r,i):this.getPosition(t)}getPosition(t={}){if(t.relative){const i=this.getParent();if(null!=i&&i.isNode()){const s=this.getPosition(),o=i.getPosition();return{x:s.x-o.x,y:s.y-o.y}}}const r=this.store.get("position");return r?Object.assign({},r):{x:0,y:0}}setPosition(t,r,i={}){let s,o,a;if("object"==typeof t?(s=t.x,o=t.y,a=r||{}):(s=t,o=r,a=i||{}),a.relative){const l=this.getParent();if(null!=l&&l.isNode()){const c=l.getPosition();s+=c.x,o+=c.y}}if(a.deep){const l=this.getPosition();this.translate(s-l.x,o-l.y,a)}else this.store.set("position",{x:s,y:o},a);return this}translate(t=0,r=0,i={}){if(0===t&&0===r)return this;i.translateBy=i.translateBy||this.id;const s=this.getPosition();if(null!=i.restrict&&i.translateBy===this.id){const a=this.getBBox({deep:!0}),l=i.restrict,c=s.x-a.x,u=s.y-a.y,d=Math.max(l.x+c,Math.min(l.x+l.width+c-a.width,s.x+t)),h=Math.max(l.y+u,Math.min(l.y+l.height+u-a.height,s.y+r));t=d-s.x,r=h-s.y}const o={x:s.x+t,y:s.y+r};return i.tx=t,i.ty=r,i.transition?("object"!=typeof i.transition&&(i.transition={}),this.transition("position",o,Object.assign(Object.assign({},i.transition),{interp:Jr.object})),this.eachChild(a=>{var l;(null===(l=i.exclude)||void 0===l?void 0:l.includes(a))||a.translate(t,r,i)})):(this.startBatch("translate",i),this.store.set("position",o,i),this.eachChild(a=>{var l;(null===(l=i.exclude)||void 0===l?void 0:l.includes(a))||a.translate(t,r,i)}),this.stopBatch("translate",i)),this}angle(t,r){return null==t?this.getAngle():this.rotate(t,r)}getAngle(){return this.store.get("angle",0)}rotate(t,r={}){const i=this.getAngle();if(r.center){const s=this.getSize(),o=this.getPosition(),a=this.getBBox().getCenter();a.rotate(i-t,r.center);const l=a.x-s.width/2-o.x,c=a.y-s.height/2-o.y;this.startBatch("rotate",{angle:t,options:r}),this.setPosition(o.x+l,o.y+c,r),this.rotate(t,Object.assign(Object.assign({},r),{center:null})),this.stopBatch("rotate")}else this.store.set("angle",r.absolute?t:(i+t)%360,r);return this}getBBox(t={}){if(t.deep){const r=this.getDescendants({deep:!0,breadthFirst:!0});return r.push(this),ae.getCellsBBox(r)}return P.fromPositionAndSize(this.getPosition(),this.getSize())}getConnectionPoint(t,r){const i=this.getBBox(),s=i.getCenter(),o=t.getTerminal(r);if(null==o)return s;const a=o.port;if(!a||!this.hasPort(a))return s;const l=this.getPort(a);if(!l||!l.group)return s;const u=this.getPortsPosition(l.group)[a].position,d=C.create(u).translate(i.getOrigin()),h=this.getAngle();return h&&d.rotate(-h,s),d}fit(t={}){const i=(this.getChildren()||[]).filter(u=>u.isNode());if(0===i.length)return this;this.startBatch("fit-embeds",t),t.deep&&i.forEach(u=>u.fit(t));let{x:s,y:o,width:a,height:l}=ae.getCellsBBox(i);const c=$i(t.padding);return s-=c.left,o-=c.top,a+=c.left+c.right,l+=c.bottom+c.top,this.store.set({position:{x:s,y:o},size:{width:a,height:l}},t),this.stopBatch("fit-embeds"),this}get portContainerMarkup(){return this.getPortContainerMarkup()}set portContainerMarkup(t){this.setPortContainerMarkup(t)}getDefaultPortContainerMarkup(){return this.store.get("defaultPortContainerMarkup")||Ae.getPortContainerMarkup()}getPortContainerMarkup(){return this.store.get("portContainerMarkup")||this.getDefaultPortContainerMarkup()}setPortContainerMarkup(t,r={}){return this.store.set("portContainerMarkup",Ae.clone(t),r),this}get portMarkup(){return this.getPortMarkup()}set portMarkup(t){this.setPortMarkup(t)}getDefaultPortMarkup(){return this.store.get("defaultPortMarkup")||Ae.getPortMarkup()}getPortMarkup(){return this.store.get("portMarkup")||this.getDefaultPortMarkup()}setPortMarkup(t,r={}){return this.store.set("portMarkup",Ae.clone(t),r),this}get portLabelMarkup(){return this.getPortLabelMarkup()}set portLabelMarkup(t){this.setPortLabelMarkup(t)}getDefaultPortLabelMarkup(){return this.store.get("defaultPortLabelMarkup")||Ae.getPortLabelMarkup()}getPortLabelMarkup(){return this.store.get("portLabelMarkup")||this.getDefaultPortLabelMarkup()}setPortLabelMarkup(t,r={}){return this.store.set("portLabelMarkup",Ae.clone(t),r),this}get ports(){const t=this.store.get("ports",{items:[]});return null==t.items&&(t.items=[]),t}getPorts(){return Be(this.ports.items)}getPortsByGroup(t){return this.getPorts().filter(r=>r.group===t)}getPort(t){return Be(this.ports.items.find(r=>r.id&&r.id===t))}getPortAt(t){return this.ports.items[t]||null}hasPorts(){return this.ports.items.length>0}hasPort(t){return-1!==this.getPortIndex(t)}getPortIndex(t){const r="string"==typeof t?t:t.id;return null!=r?this.ports.items.findIndex(i=>i.id===r):-1}getPortsPosition(t){const r=this.getSize();return this.port.getPortsLayoutByGroup(t,new P(0,0,r.width,r.height)).reduce((s,o)=>{const a=o.portLayout;return s[o.portId]={position:Object.assign({},a.position),angle:a.angle||0},s},{})}getPortProp(t,r){return this.getPropByPath(this.prefixPortPath(t,r))}setPortProp(t,r,i,s){if("string"==typeof r||Array.isArray(r)){const l=this.prefixPortPath(t,r);return this.setPropByPath(l,i,s)}const o=this.prefixPortPath(t);return this.setPropByPath(o,r,i)}removePortProp(t,r,i){return"string"==typeof r||Array.isArray(r)?this.removePropByPath(this.prefixPortPath(t,r),i):this.removePropByPath(this.prefixPortPath(t),r)}portProp(t,r,i,s){return null==r?this.getPortProp(t):"string"==typeof r||Array.isArray(r)?2===arguments.length?this.getPortProp(t,r):null==i?this.removePortProp(t,r,s):this.setPortProp(t,r,i,s):this.setPortProp(t,r,i)}prefixPortPath(t,r){const i=this.getPortIndex(t);if(-1===i)throw new Error(`Unable to find port with id: "${t}"`);return null==r||""===r?["ports","items",`${i}`]:Array.isArray(r)?["ports","items",`${i}`,...r]:`ports/items/${i}/${r}`}addPort(t,r){const i=[...this.ports.items];return i.push(t),this.setPropByPath("ports/items",i,r),this}addPorts(t,r){return this.setPropByPath("ports/items",[...this.ports.items,...t],r),this}insertPort(t,r,i){const s=[...this.ports.items];return s.splice(t,0,r),this.setPropByPath("ports/items",s,i),this}removePort(t,r={}){return this.removePortAt(this.getPortIndex(t),r)}removePortAt(t,r={}){if(t>=0){const i=[...this.ports.items];i.splice(t,1),r.rewrite=!0,this.setPropByPath("ports/items",i,r)}return this}removePorts(t,r){let i;if(Array.isArray(t)){if(i=r||{},t.length){i.rewrite=!0;const o=[...this.ports.items].filter(a=>!t.some(l=>a.id===("string"==typeof l?l:l.id)));this.setPropByPath("ports/items",o,i)}}else i=t||{},i.rewrite=!0,this.setPropByPath("ports/items",[],i);return this}getParsedPorts(){return this.port.getPorts()}getParsedGroups(){return this.port.groups}getPortsLayoutByGroup(t,r){return this.port.getPortsLayoutByGroup(t,r)}initPorts(){this.updatePortData(),this.on("change:ports",()=>{this.processRemovedPort(),this.updatePortData()})}processRemovedPort(){const r={};this.ports.items.forEach(a=>{a.id&&(r[a.id]=!0)});const i={};(this.store.getPrevious("ports")||{items:[]}).items.forEach(a=>{a.id&&!r[a.id]&&(i[a.id]=!0)});const o=this.model;o&&!ES(i)&&(o.getConnectedEdges(this,{incoming:!0}).forEach(c=>{const u=c.getTargetPortId();u&&i[u]&&c.remove()}),o.getConnectedEdges(this,{outgoing:!0}).forEach(c=>{const u=c.getSourcePortId();u&&i[u]&&c.remove()}))}validatePorts(){const t={},r=[];return this.ports.items.forEach(i=>{"object"!=typeof i&&r.push(`Invalid port ${i}.`),null==i.id&&(i.id=this.generatePortId()),t[i.id]&&r.push("Duplicitied port id."),t[i.id]=!0}),r}generatePortId(){return mm()}updatePortData(){const t=this.validatePorts();if(t.length>0)throw this.store.set("ports",this.store.getPrevious("ports")),new Error(t.join(" "));const r=this.port?this.port.getPorts():null;this.port=new FZ(this.ports);const i=this.port.getPorts(),s=r?i.filter(a=>r.find(l=>l.id===a.id)?null:a):[...i],o=r?r.filter(a=>i.find(l=>l.id===a.id)?null:a):[];s.length>0&&this.notify("ports:added",{added:s,cell:this,node:this}),o.length>0&&this.notify("ports:removed",{removed:o,cell:this,node:this})}}return n.defaults={angle:0,position:{x:0,y:0},size:{width:1,height:1}},n})();(function(n){n.toStringTag=`X6.${n.name}`,n.isNode=function e(t){if(null==t)return!1;if(t instanceof n)return!0;const r=t[Symbol.toStringTag];return(null==r||r===n.toStringTag)&&"function"==typeof t.isNode&&"function"==typeof t.isEdge&&"function"==typeof t.prop&&"function"==typeof t.attr&&"function"==typeof t.size&&"function"==typeof t.position}})(et||(et={})),function(n){n.config({propHooks(e){var{ports:t}=e,r=Ed(e,["ports"]);return t&&(r.ports=Array.isArray(t)?{items:t}:t),r}})}(et||(et={})),function(n){n.registry=qe.create({type:"node",process(e,t){if(_o.exist(e,!0))throw new Error(`Node with name '${e}' was registered by anthor Edge`);if("function"==typeof t)return t.config({shape:e}),t;let r=n;const{inherit:i}=t,s=Ed(t,["inherit"]);if(i)if("string"==typeof i){const a=this.get(i);null==a?this.onNotFound(i,"inherited"):r=a}else r=i;null==s.constructorName&&(s.constructorName=e);const o=r.define.call(r,s);return o.config({shape:e}),o}}),_o.setNodeRegistry(n.registry)}(et||(et={})),function(n){let e=0;n.define=function r(s){const{constructorName:o,overwrite:a}=s,l=Ed(s,["constructorName","overwrite"]),c=lm(function t(s){return s?gm(s):(e+=1,`CustomNode${e}`)}(o||l.shape),this);return c.config(l),l.shape&&n.registry.register(l.shape,c,a),c},n.create=function i(s){const o=s.shape||"rect",a=n.registry.get(o);return a?new a(s):n.registry.onNotFound(o)}}(et||(et={}));var Sd=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t};let We=(()=>{class n extends ae{get[Symbol.toStringTag](){return n.toStringTag}constructor(t={}){super(t)}preprocess(t,r){const{source:i,sourceCell:s,sourcePort:o,sourcePoint:a,target:l,targetCell:c,targetPort:u,targetPoint:d}=t,f=Sd(t,["source","sourceCell","sourcePort","sourcePoint","target","targetCell","targetPort","targetPoint"]),g=p=>"string"==typeof p||"number"==typeof p;if(null!=i)if(ae.isCell(i))f.source={cell:i.id};else if(g(i))f.source={cell:i};else if(C.isPoint(i))f.source=i.toJSON();else if(Array.isArray(i))f.source={x:i[0],y:i[1]};else{const p=i.cell;f.source=ae.isCell(p)?Object.assign(Object.assign({},i),{cell:p.id}):i}if(null!=s||null!=o){let p=f.source;if(null!=s){const m=g(s)?s:s.id;p?p.cell=m:p=f.source={cell:m}}null!=o&&p&&(p.port=o)}else null!=a&&(f.source=C.create(a).toJSON());if(null!=l)if(ae.isCell(l))f.target={cell:l.id};else if(g(l))f.target={cell:l};else if(C.isPoint(l))f.target=l.toJSON();else if(Array.isArray(l))f.target={x:l[0],y:l[1]};else{const p=l.cell;f.target=ae.isCell(p)?Object.assign(Object.assign({},l),{cell:p.id}):l}if(null!=c||null!=u){let p=f.target;if(null!=c){const m=g(c)?c:c.id;p?p.cell=m:p=f.target={cell:m}}null!=u&&p&&(p.port=u)}else null!=d&&(f.target=C.create(d).toJSON());return super.preprocess(f,r)}setup(){super.setup(),this.on("change:labels",t=>this.onLabelsChanged(t)),this.on("change:vertices",t=>this.onVertexsChanged(t))}isEdge(){return!0}disconnect(t={}){return this.store.set({source:{x:0,y:0},target:{x:0,y:0}},t),this}get source(){return this.getSource()}set source(t){this.setSource(t)}getSource(){return this.getTerminal("source")}getSourceCellId(){return this.source.cell}getSourcePortId(){return this.source.port}setSource(t,r,i={}){return this.setTerminal("source",t,r,i)}get target(){return this.getTarget()}set target(t){this.setTarget(t)}getTarget(){return this.getTerminal("target")}getTargetCellId(){return this.target.cell}getTargetPortId(){return this.target.port}setTarget(t,r,i={}){return this.setTerminal("target",t,r,i)}getTerminal(t){return Object.assign({},this.store.get(t))}setTerminal(t,r,i,s={}){if(ae.isCell(r))return this.store.set(t,ze({},i,{cell:r.id}),s),this;const o=r;return C.isPoint(r)||null!=o.x&&null!=o.y?(this.store.set(t,ze({},i,{x:o.x,y:o.y}),s),this):(this.store.set(t,Be(r),s),this)}getSourcePoint(){return this.getTerminalPoint("source")}getTargetPoint(){return this.getTerminalPoint("target")}getTerminalPoint(t){const r=this[t];if(C.isPointLike(r))return C.create(r);const i=this.getTerminalCell(t);return i?i.getConnectionPoint(this,t):new C}getSourceCell(){return this.getTerminalCell("source")}getTargetCell(){return this.getTerminalCell("target")}getTerminalCell(t){if(this.model){const r="source"===t?this.getSourceCellId():this.getTargetCellId();if(r)return this.model.getCell(r)}return null}getSourceNode(){return this.getTerminalNode("source")}getTargetNode(){return this.getTerminalNode("target")}getTerminalNode(t){let r=this;const i={};for(;r&&r.isEdge();){if(i[r.id])return null;i[r.id]=!0,r=r.getTerminalCell(t)}return r&&r.isNode()?r:null}get router(){return this.getRouter()}set router(t){null==t?this.removeRouter():this.setRouter(t)}getRouter(){return this.store.get("router")}setRouter(t,r,i){return"object"==typeof t?this.store.set("router",t,r):this.store.set("router",{name:t,args:r},i),this}removeRouter(t={}){return this.store.remove("router",t),this}get connector(){return this.getConnector()}set connector(t){null==t?this.removeConnector():this.setConnector(t)}getConnector(){return this.store.get("connector")}setConnector(t,r,i){return"object"==typeof t?this.store.set("connector",t,r):this.store.set("connector",{name:t,args:r},i),this}removeConnector(t={}){return this.store.remove("connector",t)}getDefaultLabel(){const t=this.constructor,r=this.store.get("defaultLabel")||t.defaultLabel||{};return Be(r)}get labels(){return this.getLabels()}set labels(t){this.setLabels(t)}getLabels(){return[...this.store.get("labels",[])].map(t=>this.parseLabel(t))}setLabels(t,r={}){return this.store.set("labels",Array.isArray(t)?t:[t],r),this}insertLabel(t,r,i={}){const s=this.getLabels(),o=s.length;let a=null!=r&&Number.isFinite(r)?r:o;return a<0&&(a=o+a+1),s.splice(a,0,this.parseLabel(t)),this.setLabels(s,i)}appendLabel(t,r={}){return this.insertLabel(t,-1,r)}getLabelAt(t){const r=this.getLabels();return null!=t&&Number.isFinite(t)?this.parseLabel(r[t]):null}setLabelAt(t,r,i={}){if(null!=t&&Number.isFinite(t)){const s=this.getLabels();s[t]=this.parseLabel(r),this.setLabels(s,i)}return this}removeLabelAt(t,r={}){const i=this.getLabels(),s=null!=t&&Number.isFinite(t)?t:-1,o=i.splice(s,1);return this.setLabels(i,r),o.length?o[0]:null}parseLabel(t){return"string"==typeof t?this.constructor.parseStringLabel(t):t}onLabelsChanged({previous:t,current:r}){const i=t&&r?r.filter(o=>t.find(a=>o===a||vr(o,a))?null:o):r?[...r]:[],s=t&&r?t.filter(o=>r.find(a=>o===a||vr(o,a))?null:o):t?[...t]:[];i.length>0&&this.notify("labels:added",{added:i,cell:this,edge:this}),s.length>0&&this.notify("labels:removed",{removed:s,cell:this,edge:this})}get vertices(){return this.getVertices()}set vertices(t){this.setVertices(t)}getVertices(){return[...this.store.get("vertices",[])]}setVertices(t,r={}){const i=Array.isArray(t)?t:[t];return this.store.set("vertices",i.map(s=>C.toJSON(s)),r),this}insertVertex(t,r,i={}){const s=this.getVertices(),o=s.length;let a=null!=r&&Number.isFinite(r)?r:o;return a<0&&(a=o+a+1),s.splice(a,0,C.toJSON(t)),this.setVertices(s,i)}appendVertex(t,r={}){return this.insertVertex(t,-1,r)}getVertexAt(t){return null!=t&&Number.isFinite(t)?this.getVertices()[t]:null}setVertexAt(t,r,i={}){if(null!=t&&Number.isFinite(t)){const s=this.getVertices();s[t]=r,this.setVertices(s,i)}return this}removeVertexAt(t,r={}){const i=this.getVertices(),s=null!=t&&Number.isFinite(t)?t:-1;return i.splice(s,1),this.setVertices(i,r)}onVertexsChanged({previous:t,current:r}){const i=t&&r?r.filter(o=>t.find(a=>C.equals(o,a))?null:o):r?[...r]:[],s=t&&r?t.filter(o=>r.find(a=>C.equals(o,a))?null:o):t?[...t]:[];i.length>0&&this.notify("vertexs:added",{added:i,cell:this,edge:this}),s.length>0&&this.notify("vertexs:removed",{removed:s,cell:this,edge:this})}getDefaultMarkup(){return this.store.get("defaultMarkup")||Ae.getEdgeMarkup()}getMarkup(){return super.getMarkup()||this.getDefaultMarkup()}translate(t,r,i={}){return i.translateBy=i.translateBy||this.id,i.tx=t,i.ty=r,this.applyToPoints(s=>({x:(s.x||0)+t,y:(s.y||0)+r}),i)}scale(t,r,i,s={}){return this.applyToPoints(o=>C.create(o).scale(t,r,i).toJSON(),s)}applyToPoints(t,r={}){const i={},s=this.getSource(),o=this.getTarget();C.isPointLike(s)&&(i.source=t(s)),C.isPointLike(o)&&(i.target=t(o));const a=this.getVertices();return a.length>0&&(i.vertices=a.map(t)),this.store.set(i,r),this}getBBox(){return this.getPolyline().bbox()}getConnectionPoint(){return this.getPolyline().pointAt(.5)}getPolyline(){const t=[this.getSourcePoint(),...this.getVertices().map(r=>C.create(r)),this.getTargetPoint()];return new Ge(t)}updateParent(t){let r=null;const i=this.getSourceCell(),s=this.getTargetCell(),o=this.getParent();return i&&s&&(r=i===s||i.isDescendantOf(s)?s:s.isDescendantOf(i)?i:ae.getCommonAncestor(i,s)),o&&(!r||r.id!==o.id)&&o.unembed(this,t),r&&r.embed(this,t),r}hasLoop(t={}){const r=this.getSource(),i=this.getTarget(),s=r.cell,o=i.cell;if(!s||!o)return!1;let a=s===o;if(!a&&t.deep&&this._model){const l=this.getSourceCell(),c=this.getTargetCell();l&&c&&(a=l.isAncestorOf(c,t)||c.isAncestorOf(l,t))}return a}getFragmentAncestor(){const t=[this,this.getSourceNode(),this.getTargetNode()].filter(r=>null!=r);return this.getCommonAncestor(...t)}isFragmentDescendantOf(t){const r=this.getFragmentAncestor();return!!r&&(r.id===t.id||r.isDescendantOf(t))}}return n.defaults={},n})();(function(n){n.equalTerminals=function e(t,r){return t.cell===r.cell&&(t.port===r.port||null==t.port&&null==r.port)}})(We||(We={})),function(n){n.defaultLabel={markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}],attrs:{text:{fill:"#000",fontSize:14,textAnchor:"middle",textVerticalAnchor:"middle",pointerEvents:"none"},rect:{ref:"label",fill:"#fff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}},n.parseStringLabel=function e(t){return{attrs:{label:{text:t}}}}}(We||(We={})),function(n){n.toStringTag=`X6.${n.name}`,n.isEdge=function e(t){if(null==t)return!1;if(t instanceof n)return!0;const r=t[Symbol.toStringTag];return(null==r||r===n.toStringTag)&&"function"==typeof t.isNode&&"function"==typeof t.isEdge&&"function"==typeof t.prop&&"function"==typeof t.attr&&"function"==typeof t.disconnect&&"function"==typeof t.getSource&&"function"==typeof t.getTarget}}(We||(We={})),function(n){n.registry=qe.create({type:"edge",process(e,t){if(_o.exist(e,!1))throw new Error(`Edge with name '${e}' was registered by anthor Node`);if("function"==typeof t)return t.config({shape:e}),t;let r=n;const{inherit:i="edge"}=t,s=Sd(t,["inherit"]);if("string"==typeof i){const a=this.get(i||"edge");null==a&&i?this.onNotFound(i,"inherited"):r=a}else r=i;null==s.constructorName&&(s.constructorName=e);const o=r.define.call(r,s);return o.config({shape:e}),o}}),_o.setEdgeRegistry(n.registry)}(We||(We={})),function(n){let e=0;n.define=function r(s){const{constructorName:o,overwrite:a}=s,l=Sd(s,["constructorName","overwrite"]),c=lm(function t(s){return s?gm(s):(e+=1,`CustomEdge${e}`)}(o||l.shape),this);return c.config(l),l.shape&&n.registry.register(l.shape,c,a),c},n.create=function i(s){const o=s.shape||"edge",a=n.registry.get(o);return a?new a(s):n.registry.onNotFound(o)}}(We||(We={})),function(n){const e="basic.edge";n.config({shape:e,propHooks(t){const{label:r,vertices:i}=t,s=Sd(t,["label","vertices"]);if(r){null==s.labels&&(s.labels=[]);const o="string"==typeof r?n.parseStringLabel(r):r;s.labels.push(o)}return i&&Array.isArray(i)&&(s.vertices=i.map(o=>C.create(o).toJSON())),s}}),n.registry.register(e,n)}(We||(We={}));class jZ extends pn{constructor(e,t={}){super(),this.length=0,this.comparator=t.comparator||"zIndex",this.clean(),e&&this.reset(e,{silent:!0})}toJSON(){return this.cells.map(e=>e.toJSON())}add(e,t,r){let i,s;"number"==typeof t?(i=t,s=Object.assign({merge:!1},r)):(i=this.length,s=Object.assign({merge:!1},t)),i>this.length&&(i=this.length),i<0&&(i+=this.length+1);const o=Array.isArray(e)?e:[e],a=this.comparator&&"number"!=typeof t&&!1!==s.sort,l=this.comparator||null;let c=!1;const u=[],d=[];return o.forEach(h=>{const f=this.get(h);f?s.merge&&!h.isSameStore(f)&&(f.setProp(h.getProp(),r),d.push(f),a&&!c&&(c=null==l||"function"==typeof l?f.hasChanged():"string"==typeof l?f.hasChanged(l):l.some(g=>f.hasChanged(g)))):(u.push(h),this.reference(h))}),u.length&&(a&&(c=!0),this.cells.splice(i,0,...u),this.length=this.cells.length),c&&this.sort({silent:!0}),s.silent||(u.forEach((h,f)=>{const g={cell:h,index:i+f,options:s};this.trigger("added",g),s.dryrun||h.notify("added",Object.assign({},g))}),c&&this.trigger("sorted"),(u.length||d.length)&&this.trigger("updated",{added:u,merged:d,removed:[],options:s})),this}remove(e,t={}){const r=Array.isArray(e)?e:[e],i=this.removeCells(r,t);return!t.silent&&i.length>0&&this.trigger("updated",{options:t,removed:i,added:[],merged:[]}),Array.isArray(e)?i:i[0]}removeCells(e,t){const r=[];for(let i=0;i<e.length;i+=1){const s=this.get(e[i]);if(null==s)continue;const o=this.cells.indexOf(s);this.cells.splice(o,1),this.length-=1,delete this.map[s.id],r.push(s),this.unreference(s),t.dryrun||s.remove(),t.silent||(this.trigger("removed",{cell:s,index:o,options:t}),t.dryrun||s.notify("removed",{cell:s,index:o,options:t}))}return r}reset(e,t={}){const r=this.cells.slice();if(r.forEach(i=>this.unreference(i)),this.clean(),this.add(e,Object.assign({silent:!0},t)),!t.silent){const i=this.cells.slice();this.trigger("reseted",{options:t,previous:r,current:i});const s=[],o=[];i.forEach(a=>{r.some(c=>c.id===a.id)||s.push(a)}),r.forEach(a=>{i.some(c=>c.id===a.id)||o.push(a)}),this.trigger("updated",{options:t,added:s,removed:o,merged:[]})}return this}push(e,t){return this.add(e,this.length,t)}pop(e){const t=this.at(this.length-1);return this.remove(t,e)}unshift(e,t){return this.add(e,0,t)}shift(e){const t=this.at(0);return this.remove(t,e)}get(e){return null==e?null:this.map["string"==typeof e||"number"==typeof e?e:e.id]||null}has(e){return null!=this.get(e)}at(e){return e<0&&(e+=this.length),this.cells[e]||null}first(){return this.at(0)}last(){return this.at(-1)}indexOf(e){return this.cells.indexOf(e)}toArray(){return this.cells.slice()}sort(e={}){return null!=this.comparator&&(this.cells=y4(this.cells,this.comparator),e.silent||this.trigger("sorted")),this}clone(){return new(0,this.constructor)(this.cells.slice(),{comparator:this.comparator})}reference(e){this.map[e.id]=e,e.on("*",this.notifyCellEvent,this)}unreference(e){e.off("*",this.notifyCellEvent,this),delete this.map[e.id]}notifyCellEvent(e,t){const r=t.cell;this.trigger(`cell:${e}`,t),r&&(r.isNode()?this.trigger(`node:${e}`,Object.assign(Object.assign({},t),{node:r})):r.isEdge()&&this.trigger(`edge:${e}`,Object.assign(Object.assign({},t),{edge:r})))}clean(){this.length=0,this.cells=[],this.map={}}}class Sr extends pn{get[Symbol.toStringTag](){return Sr.toStringTag}constructor(e=[]){super(),this.batches={},this.addings=new WeakMap,this.nodes={},this.edges={},this.outgoings={},this.incomings={},this.collection=new jZ(e),this.setup()}notify(e,t){this.trigger(e,t);const r=this.graph;return r&&r.trigger("sorted"===e||"reseted"===e||"updated"===e?`model:${e}`:e,t),this}setup(){const e=this.collection;e.on("sorted",()=>this.notify("sorted",null)),e.on("updated",t=>this.notify("updated",t)),e.on("cell:change:zIndex",()=>this.sortOnChangeZ()),e.on("added",({cell:t})=>{this.onCellAdded(t)}),e.on("removed",t=>{const r=t.cell;this.onCellRemoved(r,t.options),this.notify("cell:removed",t),r.isNode()?this.notify("node:removed",Object.assign(Object.assign({},t),{node:r})):r.isEdge()&&this.notify("edge:removed",Object.assign(Object.assign({},t),{edge:r}))}),e.on("reseted",t=>{this.onReset(t.current),this.notify("reseted",t)}),e.on("edge:change:source",({edge:t})=>this.onEdgeTerminalChanged(t,"source")),e.on("edge:change:target",({edge:t})=>{this.onEdgeTerminalChanged(t,"target")})}sortOnChangeZ(){this.collection.sort()}onCellAdded(e){const t=e.id;e.isEdge()?(e.updateParent(),this.edges[t]=!0,this.onEdgeTerminalChanged(e,"source"),this.onEdgeTerminalChanged(e,"target")):this.nodes[t]=!0}onCellRemoved(e,t){const r=e.id;if(e.isEdge()){delete this.edges[r];const i=e.getSource(),s=e.getTarget();if(i&&i.cell){const o=this.outgoings[i.cell],a=o?o.indexOf(r):-1;a>=0&&(o.splice(a,1),0===o.length&&delete this.outgoings[i.cell])}if(s&&s.cell){const o=this.incomings[s.cell],a=o?o.indexOf(r):-1;a>=0&&(o.splice(a,1),0===o.length&&delete this.incomings[s.cell])}}else delete this.nodes[r];t.clear||(t.disconnectEdges?this.disconnectConnectedEdges(e,t):this.removeConnectedEdges(e,t)),e.model===this&&(e.model=null)}onReset(e){this.nodes={},this.edges={},this.outgoings={},this.incomings={},e.forEach(t=>this.onCellAdded(t))}onEdgeTerminalChanged(e,t){const r="source"===t?this.outgoings:this.incomings,i=e.previous(t);if(i&&i.cell){const o=ae.isCell(i.cell)?i.cell.id:i.cell,a=r[o],l=a?a.indexOf(e.id):-1;l>=0&&(a.splice(l,1),0===a.length&&delete r[o])}const s=e.getTerminal(t);if(s&&s.cell){const o=ae.isCell(s.cell)?s.cell.id:s.cell,a=r[o]||[];-1===a.indexOf(e.id)&&a.push(e.id),r[o]=a}}prepareCell(e,t){return!e.model&&(!t||!t.dryrun)&&(e.model=this),null==e.zIndex&&e.setZIndex(this.getMaxZIndex()+1,{silent:!0}),e}resetCells(e,t={}){return e.map(r=>this.prepareCell(r,Object.assign(Object.assign({},t),{dryrun:!0}))),this.collection.reset(e,t),e.map(r=>this.prepareCell(r,{options:t})),this}clear(e={}){const t=this.getCells();if(0===t.length)return this;const r=Object.assign(Object.assign({},e),{clear:!0});return this.batchUpdate("clear",()=>{const i=t.sort((s,o)=>(s.isEdge()?1:2)-(o.isEdge()?1:2));for(;i.length>0;){const s=i.shift();s&&s.remove(r)}},r),this}addNode(e,t={}){const r=et.isNode(e)?e:this.createNode(e);return this.addCell(r,t),r}updateNode(e,t={}){const r=this.createNode(e),i=r.getProp();return r.dispose(),this.updateCell(i,t)}createNode(e){return et.create(e)}addEdge(e,t={}){const r=We.isEdge(e)?e:this.createEdge(e);return this.addCell(r,t),r}createEdge(e){return We.create(e)}updateEdge(e,t={}){const r=this.createEdge(e),i=r.getProp();return r.dispose(),this.updateCell(i,t)}addCell(e,t={}){return Array.isArray(e)?this.addCells(e,t):(!this.collection.has(e)&&!this.addings.has(e)&&(this.addings.set(e,!0),this.collection.add(this.prepareCell(e,t),t),e.eachChild(r=>this.addCell(r,t)),this.addings.delete(e)),this)}addCells(e,t={}){const r=e.length;if(0===r)return this;const i=Object.assign(Object.assign({},t),{position:r-1,maxPosition:r-1});return this.startBatch("add",Object.assign(Object.assign({},i),{cells:e})),e.forEach(s=>{this.addCell(s,i),i.position-=1}),this.stopBatch("add",Object.assign(Object.assign({},i),{cells:e})),this}updateCell(e,t={}){const r=e.id&&this.getCell(e.id);return!!r&&this.batchUpdate("update",()=>(Object.keys(e).forEach(i=>r.setProp(i,e[i],t)),!0),e)}removeCell(e,t={}){const r="string"==typeof e?this.getCell(e):e;return r&&this.has(r)?this.collection.remove(r,t):null}updateCellId(e,t){this.startBatch("update",{id:t}),e.prop("id",t);const r=e.clone({keepId:!0});return this.addCell(r),this.getConnectedEdges(e).forEach(s=>{const o=s.getSourceCell(),a=s.getTargetCell();o===e&&s.setSource(Object.assign(Object.assign({},s.getSource()),{cell:t})),a===e&&s.setTarget(Object.assign(Object.assign({},s.getTarget()),{cell:t}))}),this.removeCell(e),this.stopBatch("update",{id:t}),r}removeCells(e,t={}){return e.length?this.batchUpdate("remove",()=>e.map(r=>this.removeCell(r,t))):[]}removeConnectedEdges(e,t={}){const r=this.getConnectedEdges(e);return r.forEach(i=>{i.remove(t)}),r}disconnectConnectedEdges(e,t={}){const r="string"==typeof e?e:e.id;this.getConnectedEdges(e).forEach(i=>{const s=i.getSourceCellId(),o=i.getTargetCellId();s===r&&i.setSource({x:0,y:0},t),o===r&&i.setTarget({x:0,y:0},t)})}has(e){return this.collection.has(e)}total(){return this.collection.length}indexOf(e){return this.collection.indexOf(e)}getCell(e){return this.collection.get(e)}getCells(){return this.collection.toArray()}getFirstCell(){return this.collection.first()}getLastCell(){return this.collection.last()}getMinZIndex(){const e=this.collection.first();return e&&e.getZIndex()||0}getMaxZIndex(){const e=this.collection.last();return e&&e.getZIndex()||0}getCellsFromCache(e){return e?Object.keys(e).map(t=>this.getCell(t)).filter(t=>null!=t):[]}getNodes(){return this.getCellsFromCache(this.nodes)}getEdges(){return this.getCellsFromCache(this.edges)}getOutgoingEdges(e){const r=this.outgoings["string"==typeof e?e:e.id];return r?r.map(i=>this.getCell(i)).filter(i=>i&&i.isEdge()):null}getIncomingEdges(e){const r=this.incomings["string"==typeof e?e:e.id];return r?r.map(i=>this.getCell(i)).filter(i=>i&&i.isEdge()):null}getConnectedEdges(e,t={}){const r=[],i="string"==typeof e?this.getCell(e):e;if(null==i)return r;const s={},o=t.indirect;let a=t.incoming,l=t.outgoing;null==a&&null==l&&(a=l=!0);const c=(u,d)=>{if((d?this.getOutgoingEdges(u):this.getIncomingEdges(u))?.forEach(f=>{s[f.id]||(r.push(f),s[f.id]=!0,o&&(a&&c(f,!1),l&&c(f,!0)))}),o&&u.isEdge()){const f=d?u.getTargetCell():u.getSourceCell();f&&f.isEdge()&&(s[f.id]||(r.push(f),c(f,d)))}};if(l&&c(i,!0),a&&c(i,!1),t.deep){const u=i.getDescendants({deep:!0}),d={};u.forEach(f=>{f.isNode()&&(d[f.id]=!0)});const h=(f,g)=>{(g?this.getOutgoingEdges(f.id):this.getIncomingEdges(f.id))?.forEach(m=>{if(!s[m.id]){const v=m.getSourceCell(),b=m.getTargetCell();if(!t.enclosed&&v&&d[v.id]&&b&&d[b.id])return;r.push(m),s[m.id]=!0}})};u.forEach(f=>{f.isEdge()||(l&&h(f,!0),a&&h(f,!1))})}return r}isBoundary(e,t){const r="string"==typeof e?this.getCell(e):e,i=t?this.getIncomingEdges(r):this.getOutgoingEdges(r);return null==i||0===i.length}getBoundaryNodes(e){const t=[];return Object.keys(this.nodes).forEach(r=>{if(this.isBoundary(r,e)){const i=this.getCell(r);i&&t.push(i)}}),t}getRoots(){return this.getBoundaryNodes(!0)}getLeafs(){return this.getBoundaryNodes(!1)}isRoot(e){return this.isBoundary(e,!0)}isLeaf(e){return this.isBoundary(e,!1)}getNeighbors(e,t={}){let r=t.incoming,i=t.outgoing;null==r&&null==i&&(r=i=!0);const o=this.getConnectedEdges(e,t).reduce((a,l)=>{const c=l.hasLoop(t),u=l.getSourceCell(),d=l.getTargetCell();return r&&u&&u.isNode()&&!a[u.id]&&(c||u!==e&&(!t.deep||!u.isDescendantOf(e)))&&(a[u.id]=u),i&&d&&d.isNode()&&!a[d.id]&&(c||d!==e&&(!t.deep||!d.isDescendantOf(e)))&&(a[d.id]=d),a},{});if(e.isEdge()){if(r){const a=e.getSourceCell();a&&a.isNode()&&!o[a.id]&&(o[a.id]=a)}if(i){const a=e.getTargetCell();a&&a.isNode()&&!o[a.id]&&(o[a.id]=a)}}return Object.keys(o).map(a=>o[a])}isNeighbor(e,t,r={}){let i=r.incoming,s=r.outgoing;return null==i&&null==s&&(i=s=!0),this.getConnectedEdges(e,r).some(o=>{const a=o.getSourceCell(),l=o.getTargetCell();return!!(i&&a&&a.id===t.id||s&&l&&l.id===t.id)})}getSuccessors(e,t={}){const r=[];return this.search(e,(i,s)=>{i!==e&&this.matchDistance(s,t.distance)&&r.push(i)},Object.assign(Object.assign({},t),{outgoing:!0})),r}isSuccessor(e,t,r={}){let i=!1;return this.search(e,(s,o)=>{if(s===t&&s!==e&&this.matchDistance(o,r.distance))return i=!0,!1},Object.assign(Object.assign({},r),{outgoing:!0})),i}getPredecessors(e,t={}){const r=[];return this.search(e,(i,s)=>{i!==e&&this.matchDistance(s,t.distance)&&r.push(i)},Object.assign(Object.assign({},t),{incoming:!0})),r}isPredecessor(e,t,r={}){let i=!1;return this.search(e,(s,o)=>{if(s===t&&s!==e&&this.matchDistance(o,r.distance))return i=!0,!1},Object.assign(Object.assign({},r),{incoming:!0})),i}matchDistance(e,t){return null==t||("function"==typeof t?t(e):!(!Array.isArray(t)||!t.includes(e))||e===t)}getCommonAncestor(...e){const t=[];return e.forEach(r=>{r&&(Array.isArray(r)?t.push(...r):t.push(r))}),ae.getCommonAncestor(...t)}getSubGraph(e,t={}){const r=[],i={},s=[],o=[],a=l=>{i[l.id]||(r.push(l),i[l.id]=l,l.isEdge()&&o.push(l),l.isNode()&&s.push(l))};return e.forEach(l=>{a(l),t.deep&&l.getDescendants({deep:!0}).forEach(u=>a(u))}),o.forEach(l=>{const c=l.getSourceCell(),u=l.getTargetCell();c&&!i[c.id]&&(r.push(c),i[c.id]=c,c.isNode()&&s.push(c)),u&&!i[u.id]&&(r.push(u),i[u.id]=u,u.isNode()&&s.push(u))}),s.forEach(l=>{this.getConnectedEdges(l,t).forEach(u=>{const d=u.getSourceCell(),h=u.getTargetCell();!i[u.id]&&d&&i[d.id]&&h&&i[h.id]&&(r.push(u),i[u.id]=u)})}),r}cloneSubGraph(e,t={}){const r=this.getSubGraph(e,t);return this.cloneCells(r)}cloneCells(e){return ae.cloneCells(e)}getNodesFromPoint(e,t){const r="number"==typeof e?{x:e,y:t||0}:e;return this.getNodes().filter(i=>i.getBBox().containsPoint(r))}getNodesInArea(e,t,r,i,s){const o="number"==typeof e?new P(e,t,r,i):P.create(e),a="number"==typeof e?s:t,l=a&&a.strict;return this.getNodes().filter(c=>{const u=c.getBBox();return l?o.containsRect(u):o.isIntersectWithRect(u)})}getEdgesInArea(e,t,r,i,s){const o="number"==typeof e?new P(e,t,r,i):P.create(e),a="number"==typeof e?s:t,l=a&&a.strict;return this.getEdges().filter(c=>{const u=c.getBBox();return 0===u.width?u.inflate(1,0):0===u.height&&u.inflate(0,1),l?o.containsRect(u):o.isIntersectWithRect(u)})}getNodesUnderNode(e,t={}){const r=e.getBBox();return(null==t.by||"bbox"===t.by?this.getNodesInArea(r):this.getNodesFromPoint(r[t.by])).filter(s=>e.id!==s.id&&!s.isDescendantOf(e))}getAllCellsBBox(){return this.getCellsBBox(this.getCells())}getCellsBBox(e,t={}){return ae.getCellsBBox(e,t)}search(e,t,r={}){r.breadthFirst?this.breadthFirstSearch(e,t,r):this.depthFirstSearch(e,t,r)}breadthFirstSearch(e,t,r={}){const i=[],s={},o={};for(i.push(e),o[e.id]=0;i.length>0;){const a=i.shift();null==a||s[a.id]||(s[a.id]=!0,!1===Z(t,this,a,o[a.id]))||this.getNeighbors(a,r).forEach(c=>{o[c.id]=o[a.id]+1,i.push(c)})}}depthFirstSearch(e,t,r={}){const i=[],s={},o={};for(i.push(e),o[e.id]=0;i.length>0;){const a=i.pop();if(null==a||s[a.id]||(s[a.id]=!0,!1===Z(t,this,a,o[a.id])))continue;const l=this.getNeighbors(a,r),c=i.length;l.forEach(u=>{o[u.id]=o[a.id]+1,i.splice(c,0,u)})}}getShortestPath(e,t,r={}){const i={};this.getEdges().forEach(c=>{const u=c.getSourceCellId(),d=c.getTargetCellId();u&&d&&(i[u]||(i[u]=[]),i[d]||(i[d]=[]),i[u].push(d),r.directed||i[d].push(u))});const o=Om.run(i,"string"==typeof e?e:e.id,r.weight),a=[];let l="string"==typeof t?t:t.id;for(o[l]&&a.push(l);l=o[l];)a.unshift(l);return a}translate(e,t,r){return this.getCells().filter(i=>!i.hasParent()).forEach(i=>i.translate(e,t,r)),this}resize(e,t,r){return this.resizeCells(e,t,this.getCells(),r)}resizeCells(e,t,r,i={}){const s=this.getCellsBBox(r);if(s){const o=Math.max(e/s.width,0),a=Math.max(t/s.height,0),l=s.getOrigin();r.forEach(c=>c.scale(o,a,l,i))}return this}toJSON(e={}){return Sr.toJSON(this.getCells(),e)}parseJSON(e){return Sr.fromJSON(e)}fromJSON(e,t={}){const r=this.parseJSON(e);return this.resetCells(r,t),this}startBatch(e,t={}){return this.batches[e]=(this.batches[e]||0)+1,this.notify("batch:start",{name:e,data:t}),this}stopBatch(e,t={}){return this.batches[e]=(this.batches[e]||0)-1,this.notify("batch:stop",{name:e,data:t}),this}batchUpdate(e,t,r={}){this.startBatch(e,r);const i=t();return this.stopBatch(e,r),i}hasActiveBatch(e=Object.keys(this.batches)){return(Array.isArray(e)?e:[e]).some(r=>this.batches[r]>0)}}(function(n){n.toStringTag=`X6.${n.name}`,n.isModel=function e(t){if(null==t)return!1;if(t instanceof n)return!0;const r=t[Symbol.toStringTag];return(null==r||r===n.toStringTag)&&"function"==typeof t.addNode&&"function"==typeof t.addEdge&&null!=t.collection}})(Sr||(Sr={})),function(n){n.toJSON=function e(r,i={}){return{cells:r.map(s=>s.toJSON(i))}},n.fromJSON=function t(r){const i=[];return Array.isArray(r)?i.push(...r):(r.cells&&i.push(...r.cells),r.nodes&&r.nodes.forEach(s=>{null==s.shape&&(s.shape="rect"),i.push(s)}),r.edges&&r.edges.forEach(s=>{null==s.shape&&(s.shape="edge"),i.push(s)})),i.map(s=>{const o=s.shape;if(o){if(et.registry.exist(o))return et.create(s);if(We.registry.exist(o))return We.create(s)}throw new Error("The `shape` should be specified when creating a node/edge instance")})}}(Sr||(Sr={}));class ai extends et{get label(){return this.getLabel()}set label(e){this.setLabel(e)}getLabel(){return this.getAttrByPath("text/text")}setLabel(e,t){return null==e?this.removeLabel():this.setAttrByPath("text/text",e,t),this}removeLabel(){return this.removeAttrByPath("text/text"),this}}function VZ(n,e="body"){return[{tagName:n,selector:e},{tagName:"text",selector:"label"}]}function Ao(n,e,t={}){const r={constructorName:n,markup:VZ(n,t.selector),attrs:{[n]:Object.assign({},ai.bodyAttr)}};return(t.parent||ai).define(ze(r,e,{shape:n}))}!function(n){n.bodyAttr={fill:"#ffffff",stroke:"#333333",strokeWidth:2},n.labelAttr={fontSize:14,fill:"#000000",refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontFamily:"Arial, helvetica, sans-serif"},n.config({attrs:{text:Object.assign({},n.labelAttr)},propHooks(e){const{label:t}=e,r=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(e,["label"]);return t&&rl(r,"attrs/text/text",t),r},visible:!0})}(ai||(ai={})),Ao("rect",{attrs:{body:{refWidth:"100%",refHeight:"100%"}}});const UZ=We.define({shape:"edge",markup:[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}],attrs:{lines:{connection:!0,strokeLinejoin:"round"},wrap:{strokeWidth:10},line:{stroke:"#333",strokeWidth:2,targetMarker:"classic"}}});Ao("ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}}});class Mo extends ai{get points(){return this.getPoints()}set points(e){this.setPoints(e)}getPoints(){return this.getAttrByPath("body/refPoints")}setPoints(e,t){return null==e?this.removePoints():this.setAttrByPath("body/refPoints",Mo.pointsToString(e),t),this}removePoints(){return this.removeAttrByPath("body/refPoints"),this}}!function(n){function e(t){return"string"==typeof t?t:t.map(r=>Array.isArray(r)?r.join(","):C.isPointLike(r)?`${r.x}, ${r.y}`:"").join(" ")}n.pointsToString=e,n.config({propHooks(t){const{points:r}=t,i=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(t,["points"]);if(r){const s=e(r);s&&rl(i,"attrs/body/refPoints",s)}return i}})}(Mo||(Mo={})),Ao("polygon",{},{parent:Mo}),Ao("polyline",{},{parent:Mo}),ai.define({shape:"path",markup:[{tagName:"rect",selector:"bg"},{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}],attrs:{bg:{refWidth:"100%",refHeight:"100%",fill:"none",stroke:"none",pointerEvents:"all"},body:{fill:"none",stroke:"#000",strokeWidth:2}},propHooks(n){const{path:e}=n,t=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(n,["path"]);return e&&rl(t,"attrs/body/refD",e),t}}),ai.define({shape:"text-block",markup:[{tagName:"rect",selector:"body"},Yr.SUPPORT_FOREIGNOBJECT?{tagName:"foreignObject",selector:"foreignObject",children:[{tagName:"div",ns:dt.xhtml,selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attrs:{textAnchor:"middle"}}],attrs:{body:Object.assign(Object.assign({},ai.bodyAttr),{refWidth:"100%",refHeight:"100%"}),foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}},propHooks(n){const{text:e}=n,t=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(n,["text"]);return e&&rl(t,"attrs/label/text",e),t},attrHooks:{text:{set(n,{cell:e,view:t,refBBox:r,elem:i,attrs:s}){if(!(i instanceof HTMLElement)){const o=s.style||{},a={text:n,width:-5,height:"100%"},l=Object.assign({textVerticalAnchor:"middle"},o);return Z(Qn.presets.textWrap.set,this,a,{cell:e,view:t,elem:i,refBBox:r,attrs:l}),{fill:o.color||null}}i.textContent=n},position(n,{refBBox:e,elem:t}){if(t instanceof SVGElement)return e.getCenter()}}}}),Ao("image",{attrs:{image:{refWidth:"100%",refHeight:"100%"}},propHooks:function HZ(n="xlink:href"){return t=>{const{imageUrl:r,imageWidth:i,imageHeight:s}=t,o=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(t,["imageUrl","imageWidth","imageHeight"]);if(null!=r||null!=i||null!=s){const a=()=>{if(o.attrs){const l=o.attrs.image;null!=r&&(l[n]=r),null!=i&&(l.width=i),null!=s&&(l.height=s),o.attrs.image=l}};o.attrs?(null==o.attrs.image&&(o.attrs.image={}),a()):(o.attrs={image:{}},a())}return o}}()},{selector:"image"}),Ao("circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%"}}});class nn extends Tt{constructor(){super(...arguments),this.portsCache={}}get[Symbol.toStringTag](){return nn.toStringTag}getContainerClassName(){const e=[super.getContainerClassName(),this.prefixClassName("node")];return this.can("nodeMovable")||e.push(this.prefixClassName("node-immovable")),e.join(" ")}updateClassName(e){const t=e.target;if(t.hasAttribute("magnet")){const r=this.prefixClassName("port-unconnectable");this.can("magnetConnectable")?yn(t,r):he(t,r)}else{const r=this.prefixClassName("node-immovable");this.can("nodeMovable")?this.removeClass(r):this.addClass(r)}}isNodeView(){return!0}confirmUpdate(e){let t=e;return this.hasAction(t,"ports")&&(this.removePorts(),this.cleanPortsCache()),this.hasAction(t,"render")?(this.render(),t=this.removeAction(t,["render","update","resize","translate","rotate","ports","tools"])):(t=this.handleAction(t,"resize",()=>this.resize(),"update"),t=this.handleAction(t,"update",()=>this.update(),wt.useCSSSelector?"ports":null),t=this.handleAction(t,"translate",()=>this.translate()),t=this.handleAction(t,"rotate",()=>this.rotate()),t=this.handleAction(t,"ports",()=>this.renderPorts()),t=this.handleAction(t,"tools",()=>this.renderTools())),t}update(e){this.cleanCache(),wt.useCSSSelector&&this.removePorts();const t=this.cell,r=t.getSize(),i=t.getAttrs();this.updateAttrs(this.container,i,{attrs:e===i?null:e,rootBBox:new P(0,0,r.width,r.height),selectors:this.selectors}),wt.useCSSSelector&&this.renderPorts()}renderMarkup(){const e=this.cell.markup;if(e){if("string"==typeof e)throw new TypeError("Not support string markup.");return this.renderJSONMarkup(e)}throw new TypeError("Invalid node markup.")}renderJSONMarkup(e){const t=this.parseJSONMarkup(e,this.container);this.selectors=t.selectors,this.container.appendChild(t.fragment)}render(){return this.empty(),this.renderMarkup(),this.resize(),this.updateTransform(),wt.useCSSSelector||this.renderPorts(),this.renderTools(),this}resize(){this.cell.getAngle()&&this.rotate(),this.update()}translate(){this.updateTransform()}rotate(){this.updateTransform()}getTranslationString(){const e=this.cell.getPosition();return`translate(${e.x},${e.y})`}getRotationString(){const e=this.cell.getAngle();if(e){const t=this.cell.getSize();return`rotate(${e},${t.width/2},${t.height/2})`}}updateTransform(){let e=this.getTranslationString();const t=this.getRotationString();t&&(e+=` ${t}`),this.container.setAttribute("transform",e)}findPortElem(e,t){const r=e?this.portsCache[e]:null;return r?this.findOne(t,r.portContentElement,r.portContentSelectors||{}):null}cleanPortsCache(){this.portsCache={}}removePorts(){Object.keys(this.portsCache).forEach(e=>{co(this.portsCache[e].portElement)})}renderPorts(){const e=this.container,t=[];e.childNodes.forEach(o=>{t.push(o)});const r=this.cell.getParsedPorts(),i=YS(r,"zIndex"),s="auto";i[s]&&i[s].forEach(o=>{const a=this.getPortElement(o);e.append(a),t.push(a)}),Object.keys(i).forEach(o=>{if(o!==s){const a=parseInt(o,10);this.appendPorts(i[o],a,t)}}),this.updatePorts()}appendPorts(e,t,r){const i=e.map(s=>this.getPortElement(s));r[t]||t<0?xm(r[Math.max(t,0)],i):al(this.container,i)}getPortElement(e){const t=this.portsCache[e.id];return t?t.portElement:this.createPortElement(e)}createPortElement(e){let t=Ae.renderMarkup(this.cell.getPortContainerMarkup());const r=t.elem;if(null==r)throw new Error("Invalid port container markup.");t=Ae.renderMarkup(this.getPortMarkup(e));const i=t.elem,s=t.selectors;if(null==i)throw new Error("Invalid port markup.");this.setAttrs({port:e.id,"port-group":e.group},i);let o="x6-port";e.group&&(o+=` x6-port-${e.group}`),he(r,o),he(r,"x6-port"),he(i,"x6-port-body"),r.appendChild(i);let l,c,a=s;if(this.existPortLabel(e)){if(t=Ae.renderMarkup(this.getPortLabelMarkup(e.label)),l=t.elem,c=t.selectors,null==l)throw new Error("Invalid port label markup.");if(s&&c){for(const d in c)if(s[d]&&d!==this.rootSelector)throw new Error("Selectors within port must be unique.");a=Object.assign(Object.assign({},s),c)}he(l,"x6-port-label"),r.appendChild(l)}return this.portsCache[e.id]={portElement:r,portSelectors:a,portLabelElement:l,portLabelSelectors:c,portContentElement:i,portContentSelectors:s},this.graph.options.onPortRendered&&this.graph.options.onPortRendered({port:e,node:this.cell,container:r,selectors:a,labelContainer:l,labelSelectors:c,contentContainer:i,contentSelectors:s}),r}updatePorts(){const e=this.cell.getParsedGroups(),t=Object.keys(e);0===t.length?this.updatePortGroup():t.forEach(r=>this.updatePortGroup(r))}updatePortGroup(e){const t=P.fromSize(this.cell.getSize()),r=this.cell.getPortsLayoutByGroup(e,t);for(let i=0,s=r.length;i<s;i+=1){const o=r[i],l=this.portsCache[o.portId]||{},c=o.portLayout;if(this.applyPortTransform(l.portElement,c),null!=o.portAttrs){const d={selectors:l.portSelectors||{}};o.portSize&&(d.rootBBox=P.fromSize(o.portSize)),this.updateAttrs(l.portElement,o.portAttrs,d)}const u=o.labelLayout;if(u&&l.portLabelElement&&(this.applyPortTransform(l.portLabelElement,u,-(c.angle||0)),u.attrs)){const d={selectors:l.portLabelSelectors||{}};o.labelSize&&(d.rootBBox=P.fromSize(o.labelSize)),this.updateAttrs(l.portLabelElement,u.attrs,d)}}}applyPortTransform(e,t,r=0){const i=t.angle,s=t.position;ho(e,ht().rotate(r).translate(s.x||0,s.y||0).rotate(i||0),{absolute:!0})}getPortMarkup(e){return e.markup||this.cell.portMarkup}getPortLabelMarkup(e){return e.markup||this.cell.portLabelMarkup}existPortLabel(e){return e.attrs&&e.attrs.text}getEventArgs(e,t,r){const i=this,s=i.cell;return null==t||null==r?{e,view:i,node:s,cell:s}:{e,x:t,y:r,view:i,node:s,cell:s}}getPortEventArgs(e,t,r){const i=this,s=i.cell;return r?{e,x:r.x,y:r.y,view:i,node:s,cell:s,port:t}:{e,view:i,node:s,cell:s,port:t}}notifyMouseDown(e,t,r){super.onMouseDown(e,t,r),this.notify("node:mousedown",this.getEventArgs(e,t,r))}notifyMouseMove(e,t,r){super.onMouseMove(e,t,r),this.notify("node:mousemove",this.getEventArgs(e,t,r))}notifyMouseUp(e,t,r){super.onMouseUp(e,t,r),this.notify("node:mouseup",this.getEventArgs(e,t,r))}notifyPortEvent(e,t,r){const i=this.findAttr("port",t.target);i&&this.notify(e,this.getPortEventArgs(t,i,r))}onClick(e,t,r){super.onClick(e,t,r),this.notify("node:click",this.getEventArgs(e,t,r)),this.notifyPortEvent("node:port:click",e,{x:t,y:r})}onDblClick(e,t,r){super.onDblClick(e,t,r),this.notify("node:dblclick",this.getEventArgs(e,t,r)),this.notifyPortEvent("node:port:dblclick",e,{x:t,y:r})}onContextMenu(e,t,r){super.onContextMenu(e,t,r),this.notify("node:contextmenu",this.getEventArgs(e,t,r)),this.notifyPortEvent("node:port:contextmenu",e,{x:t,y:r})}onMouseDown(e,t,r){this.isPropagationStopped(e)||(this.notifyMouseDown(e,t,r),this.notifyPortEvent("node:port:mousedown",e,{x:t,y:r}),this.startNodeDragging(e,t,r))}onMouseMove(e,t,r){const i=this.getEventData(e),s=i.action;if("magnet"===s)this.dragMagnet(e,t,r);else{if("move"===s){const a=i.targetView||this;a.dragNode(e,t,r),a.notify("node:moving",{e,x:t,y:r,view:a,cell:a.cell,node:a.cell})}this.notifyMouseMove(e,t,r),this.notifyPortEvent("node:port:mousemove",e,{x:t,y:r})}this.setEventData(e,i)}onMouseUp(e,t,r){const i=this.getEventData(e),s=i.action;"magnet"===s?this.stopMagnetDragging(e,t,r):(this.notifyMouseUp(e,t,r),this.notifyPortEvent("node:port:mouseup",e,{x:t,y:r}),"move"===s&&(i.targetView||this).stopNodeDragging(e,t,r));const o=i.targetMagnet;o&&this.onMagnetClick(e,o,t,r),this.checkMouseleave(e)}onMouseOver(e){super.onMouseOver(e),this.notify("node:mouseover",this.getEventArgs(e)),this.notifyPortEvent("node:port:mouseover",e)}onMouseOut(e){super.onMouseOut(e),this.notify("node:mouseout",this.getEventArgs(e)),this.notifyPortEvent("node:port:mouseout",e)}onMouseEnter(e){this.updateClassName(e),super.onMouseEnter(e),this.notify("node:mouseenter",this.getEventArgs(e)),this.notifyPortEvent("node:port:mouseenter",e)}onMouseLeave(e){super.onMouseLeave(e),this.notify("node:mouseleave",this.getEventArgs(e)),this.notifyPortEvent("node:port:mouseleave",e)}onMouseWheel(e,t,r,i){super.onMouseWheel(e,t,r,i),this.notify("node:mousewheel",Object.assign({delta:i},this.getEventArgs(e,t,r)))}onMagnetClick(e,t,r,i){const s=this.graph;s.view.getMouseMovedCount(e)>s.options.clickThreshold||this.notify("node:magnet:click",Object.assign({magnet:t},this.getEventArgs(e,r,i)))}onMagnetDblClick(e,t,r,i){this.notify("node:magnet:dblclick",Object.assign({magnet:t},this.getEventArgs(e,r,i)))}onMagnetContextMenu(e,t,r,i){this.notify("node:magnet:contextmenu",Object.assign({magnet:t},this.getEventArgs(e,r,i)))}onMagnetMouseDown(e,t,r,i){this.startMagnetDragging(e,r,i)}onCustomEvent(e,t,r,i){this.notify("node:customevent",Object.assign({name:t},this.getEventArgs(e,r,i))),super.onCustomEvent(e,t,r,i)}prepareEmbedding(e){const t=this.graph,i=this.getEventData(e).cell||this.cell,s=t.findViewByCell(i),o=t.snapToGrid(e.clientX,e.clientY);this.notify("node:embed",{e,node:i,view:s,cell:i,x:o.x,y:o.y,currentParent:i.getParent()})}processEmbedding(e,t){const r=t.cell||this.cell,i=t.graph||this.graph,s=i.options.embedding,o=s.findParent;let a="function"==typeof o?Z(o,i,{view:this,node:this.cell}).filter(h=>ae.isCell(h)&&this.cell.id!==h.id&&!h.isDescendantOf(this.cell)):i.model.getNodesUnderNode(r,{by:o});if(s.frontOnly&&a.length>0){const h=YS(a,"zIndex"),f=F4(Object.keys(h));f&&(a=h[f])}a=a.filter(h=>h.visible);let l=null;const c=t.candidateEmbedView,u=s.validate;for(let h=a.length-1;h>=0;h-=1){const f=a[h];if(c&&c.cell.id===f.id){l=c;break}{const g=f.findView(i);if(Z(u,i,{child:this.cell,parent:g.cell,childView:this,parentView:g})){l=g;break}}}this.clearEmbedding(t),l&&l.highlight(null,{type:"embedding"}),t.candidateEmbedView=l;const d=i.snapToGrid(e.clientX,e.clientY);this.notify("node:embedding",{e,cell:r,node:r,view:i.findViewByCell(r),x:d.x,y:d.y,currentParent:r.getParent(),candidateParent:l?l.cell:null})}clearEmbedding(e){const t=e.candidateEmbedView;t&&(t.unhighlight(null,{type:"embedding"}),e.candidateEmbedView=null)}finalizeEmbedding(e,t){this.graph.startBatch("embedding");const r=t.cell||this.cell,i=t.graph||this.graph,s=i.findViewByCell(r),o=r.getParent(),a=t.candidateEmbedView;if(a?(a.unhighlight(null,{type:"embedding"}),t.candidateEmbedView=null,(null==o||o.id!==a.cell.id)&&a.cell.insertChild(r,void 0,{ui:!0})):o&&o.unembed(r,{ui:!0}),i.model.getConnectedEdges(r,{deep:!0}).forEach(l=>{l.updateParent({ui:!0})}),s&&a){const l=i.snapToGrid(e.clientX,e.clientY);s.notify("node:embedded",{e,cell:r,x:l.x,y:l.y,node:r,view:i.findViewByCell(r),previousParent:o,currentParent:r.getParent()})}this.graph.stopBatch("embedding")}getDelegatedView(){let e=this.cell,t=this;for(;t&&!e.isEdge();){if(!e.hasParent()||t.can("stopDelegateOnDragging"))return t;e=e.getParent(),t=this.graph.findViewByCell(e)}return null}validateMagnet(e,t,r){if("passive"!==t.getAttribute("magnet")){const i=this.graph.options.connecting.validateMagnet;return!i||Z(i,this.graph,{e:r,magnet:t,view:e,cell:e.cell})}return!1}startMagnetDragging(e,t,r){if(!this.can("magnetConnectable"))return;e.stopPropagation();const i=e.currentTarget,s=this.graph;this.setEventData(e,{targetMagnet:i}),this.validateMagnet(this,i,e)?(s.options.magnetThreshold<=0&&this.startConnectting(e,i,t,r),this.setEventData(e,{action:"magnet"}),this.stopPropagation(e)):((Vi(i,"x6-port-body")||i.closest(".x6-port-body"))&&this.stopPropagation(e),this.onMouseDown(e,t,r)),s.view.delegateDragEvents(e,this)}startConnectting(e,t,r,i){this.graph.model.startBatch("add-edge");const s=this.createEdgeFromMagnet(t,r,i);s.setEventData(e,s.prepareArrowheadDragging("target",{x:r,y:i,isNewEdge:!0,fallbackAction:"remove"})),this.setEventData(e,{edgeView:s}),s.notifyMouseDown(e,r,i)}getDefaultEdge(e,t){let r;const i=this.graph.options.connecting.createEdge;return i&&(r=Z(i,this.graph,{sourceMagnet:t,sourceView:e,sourceCell:e.cell})),r}createEdgeFromMagnet(e,t,r){const i=this.graph,s=i.model,o=this.getDefaultEdge(this,e);return o.setSource(Object.assign(Object.assign({},o.getSource()),this.getEdgeTerminal(e,t,r,o,"source"))),o.setTarget(Object.assign(Object.assign({},o.getTarget()),{x:t,y:r})),o.addTo(s,{async:!1,ui:!0}),o.findView(i)}dragMagnet(e,t,r){const i=this.getEventData(e),s=i.edgeView;if(s)s.onMouseMove(e,t,r),this.autoScrollGraph(e.clientX,e.clientY);else{const o=this.graph,a=o.options.magnetThreshold,l=this.getEventTarget(e),c=i.targetMagnet;if("onleave"===a){if(c===l||c.contains(l))return}else if(o.view.getMouseMovedCount(e)<=a)return;this.startConnectting(e,c,t,r)}}stopMagnetDragging(e,t,r){const s=this.eventData(e).edgeView;s&&(s.onMouseUp(e,t,r),this.graph.model.stopBatch("add-edge"))}notifyUnhandledMouseDown(e,t,r){this.notify("node:unhandled:mousedown",{e,x:t,y:r,view:this,cell:this.cell,node:this.cell})}notifyNodeMove(e,t,r,i,s){let o=[s];const a=this.graph.getPlugin("selection");if(a&&a.isSelectionMovable()){const l=a.getSelectedCells();l.includes(s)&&(o=l.filter(c=>c.isNode()))}o.forEach(l=>{this.notify(e,{e:t,x:r,y:i,cell:l,node:l,view:l.findView(this.graph)})})}getRestrictArea(e){const t=this.graph.options.translating.restrict,r="function"==typeof t?Z(t,this.graph,e):t;return"number"==typeof r?this.graph.transform.getGraphArea().inflate(r):!0===r?this.graph.transform.getGraphArea():r||null}startNodeDragging(e,t,r){const i=this.getDelegatedView();if(null==i||!i.can("nodeMovable"))return this.notifyUnhandledMouseDown(e,t,r);this.setEventData(e,{targetView:i,action:"move"});const s=C.create(i.cell.getPosition());i.setEventData(e,{moving:!1,offset:s.diff(t,r),restrict:this.getRestrictArea(i)})}dragNode(e,t,r){const i=this.cell,s=this.graph,o=s.getGridSize(),a=this.getEventData(e),l=a.offset,c=a.restrict;a.moving||(a.moving=!0,this.addClass("node-moving"),this.notifyNodeMove("node:move",e,t,r,this.cell)),this.autoScrollGraph(e.clientX,e.clientY);const u=Ce.snapToGrid(t+l.x,o),d=Ce.snapToGrid(r+l.y,o);i.setPosition(u,d,{restrict:c,deep:!0,ui:!0}),s.options.embedding.enabled&&(a.embedding||(this.prepareEmbedding(e),a.embedding=!0),this.processEmbedding(e,a))}stopNodeDragging(e,t,r){const i=this.getEventData(e);i.embedding&&this.finalizeEmbedding(e,i),i.moving&&(this.removeClass("node-moving"),this.notifyNodeMove("node:moved",e,t,r,this.cell)),i.moving=!1,i.embedding=!1}autoScrollGraph(e,t){const r=this.graph.getPlugin("scroller");r&&r.autoScroll(e,t)}}(function(n){n.toStringTag=`X6.${n.name}`,n.isNodeView=function e(t){if(null==t)return!1;if(t instanceof n)return!0;const r=t[Symbol.toStringTag];return(null==r||r===n.toStringTag)&&"function"==typeof t.isNodeView&&"function"==typeof t.isEdgeView&&"function"==typeof t.confirmUpdate&&"function"==typeof t.update&&"function"==typeof t.findPortElem&&"function"==typeof t.resize&&"function"==typeof t.rotate&&"function"==typeof t.translate}})(nn||(nn={})),nn.config({isSvgElement:!0,priority:0,bootstrap:["render"],actions:{view:["render"],markup:["render"],attrs:["update"],size:["resize","ports","tools"],angle:["rotate","tools"],position:["translate","tools"],ports:["ports"],tools:["tools"]}}),nn.registry.register("node",nn,!0);class _r extends Tt{constructor(){super(...arguments),this.POINT_ROUNDING=2}get[Symbol.toStringTag](){return _r.toStringTag}getContainerClassName(){return[super.getContainerClassName(),this.prefixClassName("edge")].join(" ")}get sourceBBox(){const e=this.sourceView;if(!e){const r=this.cell.getSource();return new P(r.x,r.y)}const t=this.sourceMagnet;return e.isEdgeElement(t)?new P(this.sourceAnchor.x,this.sourceAnchor.y):e.getBBoxOfElement(t||e.container)}get targetBBox(){const e=this.targetView;if(!e){const r=this.cell.getTarget();return new P(r.x,r.y)}const t=this.targetMagnet;return e.isEdgeElement(t)?new P(this.targetAnchor.x,this.targetAnchor.y):e.getBBoxOfElement(t||e.container)}isEdgeView(){return!0}confirmUpdate(e,t={}){let r=e;if(this.hasAction(r,"source")){if(!this.updateTerminalProperties("source"))return r;r=this.removeAction(r,"source")}if(this.hasAction(r,"target")){if(!this.updateTerminalProperties("target"))return r;r=this.removeAction(r,"target")}const i=this.graph,s=this.sourceView,o=this.targetView;return i&&(s&&!i.renderer.isViewMounted(s)||o&&!i.renderer.isViewMounted(o))?r:this.hasAction(r,"render")?(this.render(),r=this.removeAction(r,["render","update","labels","tools"]),r):(r=this.handleAction(r,"update",()=>this.update(t)),r=this.handleAction(r,"labels",()=>this.onLabelsChange(t)),r=this.handleAction(r,"tools",()=>this.renderTools()),r)}render(){return this.empty(),this.renderMarkup(),this.labelContainer=null,this.renderLabels(),this.update(),this.renderTools(),this}renderMarkup(){const e=this.cell.markup;if(e){if("string"==typeof e)throw new TypeError("Not support string markup.");return this.renderJSONMarkup(e)}throw new TypeError("Invalid edge markup.")}renderJSONMarkup(e){const t=this.parseJSONMarkup(e,this.container);this.selectors=t.selectors,this.container.append(t.fragment)}customizeLabels(){if(this.labelContainer){const e=this.cell,t=e.labels;for(let r=0,i=t.length;r<i;r+=1){const l=this.graph.options.onEdgeLabelRendered;l&&l({edge:e,label:t[r],container:this.labelCache[r],selectors:this.labelSelectors[r]})}}}renderLabels(){const e=this.cell,t=e.getLabels(),r=t.length;let i=this.labelContainer;if(this.labelCache={},this.labelSelectors={},r<=0)return i&&i.parentNode&&i.parentNode.removeChild(i),this;i?this.empty(i):(i=Cr("g"),this.addClass(this.prefixClassName("edge-labels"),i),this.labelContainer=i);for(let s=0,o=t.length;s<o;s+=1){const l=this.normalizeLabelMarkup(this.parseLabelMarkup(t[s].markup));let c,u;if(l)c=l.node,u=l.selectors;else{const h=e.getDefaultLabel(),f=this.normalizeLabelMarkup(this.parseLabelMarkup(h.markup));c=f.node,u=f.selectors}c.setAttribute("data-index",`${s}`),i.appendChild(c);const d=this.rootSelector;if(u[d])throw new Error("Ambiguous label root selector.");u[d]=c,this.labelCache[s]=c,this.labelSelectors[s]=u}return null==i.parentNode&&this.container.appendChild(i),this.updateLabels(),this.customizeLabels(),this}onLabelsChange(e={}){this.shouldRerenderLabels(e)?this.renderLabels():this.updateLabels(),this.updateLabelPositions()}shouldRerenderLabels(e={}){const t=this.cell.previous("labels");if(null==t)return!0;if("propertyPathArray"in e&&"propertyValue"in e){const r=e.propertyPathArray||[],i=r.length;if(i>1&&t[r[1]]){if(2===i)return"object"==typeof e.propertyValue&&ju(e.propertyValue,"markup");if("markup"!==r[2])return!1}}return!0}parseLabelMarkup(e){return e?"string"==typeof e?this.parseLabelStringMarkup(e):this.parseJSONMarkup(e):null}parseLabelStringMarkup(e){const t=W.createVectors(e),r=document.createDocumentFragment();for(let i=0,s=t.length;i<s;i+=1)r.appendChild(t[i].node);return{fragment:r,selectors:{}}}normalizeLabelMarkup(e){if(null==e)return;const t=e.fragment;if(!(t instanceof DocumentFragment&&t.hasChildNodes()))throw new Error("Invalid label markup.");let r;const i=t.childNodes;return r=i.length>1||"G"!==i[0].nodeName.toUpperCase()?W.create("g").append(t):W.create(i[0]),r.addClass(this.prefixClassName("edge-label")),{node:r.node,selectors:e.selectors}}updateLabels(){if(this.labelContainer){const e=this.cell,t=e.labels,r=this.can("edgeLabelMovable"),i=e.getDefaultLabel();for(let s=0,o=t.length;s<o;s+=1){const a=this.labelCache[s],l=this.labelSelectors[s];a.setAttribute("cursor",r?"move":"default");const c=t[s],u=ze({},i.attrs,c.attrs);this.updateAttrs(a,u,{selectors:l,rootBBox:c.size?P.fromSize(c.size):void 0})}}}renderTools(){const e=this.cell.getTools();return this.addTools(e),this}update(e={}){this.cleanCache(),this.updateConnection(e);const t=this.cell.getAttrs();return null!=t&&this.updateAttrs(this.container,t,{selectors:this.selectors}),this.updateLabelPositions(),this.updateTools(e),this}removeRedundantLinearVertices(e={}){const t=this.cell,r=t.getVertices(),i=[this.sourceAnchor,...r,this.targetAnchor],s=i.length,o=new Ge(i);o.simplify({threshold:.01});const a=o.points.map(c=>c.toJSON()),l=a.length;return s===l?0:(t.setVertices(a.slice(1,l-1),e),s-l)}getTerminalView(e){switch(e){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error(`Unknown terminal type '${e}'`)}}getTerminalAnchor(e){switch(e){case"source":return C.create(this.sourceAnchor);case"target":return C.create(this.targetAnchor);default:throw new Error(`Unknown terminal type '${e}'`)}}getTerminalConnectionPoint(e){switch(e){case"source":return C.create(this.sourcePoint);case"target":return C.create(this.targetPoint);default:throw new Error(`Unknown terminal type '${e}'`)}}getTerminalMagnet(e,t={}){switch(e){case"source":{if(t.raw)return this.sourceMagnet;const r=this.sourceView;return r?this.sourceMagnet||r.container:null}case"target":{if(t.raw)return this.targetMagnet;const r=this.targetView;return r?this.targetMagnet||r.container:null}default:throw new Error(`Unknown terminal type '${e}'`)}}updateConnection(e={}){const t=this.cell;if(e.translateBy&&t.isFragmentDescendantOf(e.translateBy)){const r=e.tx||0,i=e.ty||0;this.routePoints=new Ge(this.routePoints).translate(r,i).points,this.translateConnectionPoints(r,i),this.path.translate(r,i)}else{const r=t.getVertices(),i=this.findAnchors(r);this.sourceAnchor=i.source,this.targetAnchor=i.target,this.routePoints=this.findRoutePoints(r);const s=this.findConnectionPoints(this.routePoints,this.sourceAnchor,this.targetAnchor);this.sourcePoint=s.source,this.targetPoint=s.target;const o=this.findMarkerPoints(this.routePoints,this.sourcePoint,this.targetPoint);this.path=this.findPath(this.routePoints,o.source||this.sourcePoint,o.target||this.targetPoint)}this.cleanCache()}findAnchors(e){const t=this.cell,s=e[0],o=e[e.length-1];return t.target.priority&&!t.source.priority?this.findAnchorsOrdered("target",o,"source",s):this.findAnchorsOrdered("source",s,"target",o)}findAnchorsOrdered(e,t,r,i){let s,o;const a=this.cell,l=a[e],c=a[r],u=this.getTerminalView(e),d=this.getTerminalView(r),h=this.getTerminalMagnet(e),f=this.getTerminalMagnet(r);if(u){let g;g=t?C.create(t):d?f:C.create(c),s=this.getAnchor(l.anchor,u,h,g,e)}else s=C.create(l);if(d){const g=C.create(i||s);o=this.getAnchor(c.anchor,d,f,g,r)}else o=C.isPointLike(c)?C.create(c):new C;return{[e]:s,[r]:o}}getAnchor(e,t,r,i,s){const o=t.isEdgeElement(r),a=this.graph.options.connecting;let c,l="string"==typeof e?{name:e}:e;if(!l){const d=o?("source"===s?a.sourceEdgeAnchor:a.targetEdgeAnchor)||a.edgeAnchor:("source"===s?a.sourceAnchor:a.targetAnchor)||a.anchor;l="string"==typeof d?{name:d}:d}if(!l)throw new Error("Anchor should be specified.");const u=l.name;if(o){const d=xo.registry.get(u);if("function"!=typeof d)return xo.registry.onNotFound(u);c=Z(d,this,t,r,i,l.args||{},s)}else{const d=Do.registry.get(u);if("function"!=typeof d)return Do.registry.onNotFound(u);c=Z(d,this,t,r,i,l.args||{},s)}return c?c.round(this.POINT_ROUNDING):new C}findRoutePoints(e=[]){const t=this.graph.options.connecting.router||oi.presets.normal,r=this.cell.getRouter()||t;let i;if("function"==typeof r)i=Z(r,this,e,{},this);else{const s="string"==typeof r?r:r.name,o="string"==typeof r?{}:r.args||{},a=s?oi.registry.get(s):oi.presets.normal;if("function"!=typeof a)return oi.registry.onNotFound(s);i=Z(a,this,e,o,this)}return null==i?e.map(s=>C.create(s)):i.map(s=>C.create(s))}findConnectionPoints(e,t,r){const i=this.cell,s=this.graph.options.connecting,o=i.getSource(),a=i.getTarget(),l=this.sourceView,c=this.targetView,u=e[0],d=e[e.length-1];let h,f;if(l&&!l.isEdgeElement(this.sourceMagnet)){const g=this.sourceMagnet||l.container,m=new R(u||r,t);h=this.getConnectionPoint(o.connectionPoint||s.sourceConnectionPoint||s.connectionPoint,l,g,m,"source")}else h=t;if(c&&!c.isEdgeElement(this.targetMagnet)){const g=this.targetMagnet||c.container,p=a.connectionPoint||s.targetConnectionPoint||s.connectionPoint,v=new R(d||t,r);f=this.getConnectionPoint(p,c,g,v,"target")}else f=r;return{source:h,target:f}}getConnectionPoint(e,t,r,i,s){const o=i.end;if(null==e)return o;const a="string"==typeof e?e:e.name,l="string"==typeof e?{}:e.args,c=Eo.registry.get(a);if("function"!=typeof c)return Eo.registry.onNotFound(a);const u=Z(c,this,i,t,r,l||{},s);return u?u.round(this.POINT_ROUNDING):o}findMarkerPoints(e,t,r){const i=d=>{const h=this.cell.getAttrs(),f=Object.keys(h);for(let g=0,p=f.length;g<p;g+=1){const m=h[f[g]];if(m[`${d}Marker`]||m[`${d}-marker`]){const v=m.strokeWidth||m["stroke-width"];if(v)return parseFloat(v);break}}return null},s=e[0],o=e[e.length-1];let a,l;const c=i("source");c&&(a=t.clone().move(s||r,-c));const u=i("target");return u&&(l=r.clone().move(o||t,-u)),this.sourceMarkerPoint=a||t.clone(),this.targetMarkerPoint=l||r.clone(),{source:a,target:l}}findPath(e,t,r){const i=this.cell.getConnector()||this.graph.options.connecting.connector;let s,o,a;if("string"==typeof i?s=i:(s=i.name,o=i.args),s){const c=Wi.registry.get(s);if("function"!=typeof c)return Wi.registry.onNotFound(s);a=c}else a=Wi.presets.normal;const l=Z(a,this,t,r,e,Object.assign(Object.assign({},o),{raw:!0}),this);return"string"==typeof l?j.parse(l):l}translateConnectionPoints(e,t){this.sourcePoint.translate(e,t),this.targetPoint.translate(e,t),this.sourceAnchor.translate(e,t),this.targetAnchor.translate(e,t),this.sourceMarkerPoint.translate(e,t),this.targetMarkerPoint.translate(e,t)}updateLabelPositions(){if(null==this.labelContainer)return this;if(!this.path)return this;const t=this.cell,r=t.getLabels();if(0===r.length)return this;const i=t.getDefaultLabel(),s=this.normalizeLabelPosition(i.position);for(let o=0,a=r.length;o<a;o+=1){const c=this.normalizeLabelPosition(r[o].position),u=ze({},s,c),d=this.getLabelTransformationMatrix(u);this.labelCache[o].setAttribute("transform",uo(d))}return this}updateTerminalProperties(e){const r=this.graph,i=this.cell[e],s=i&&i.cell,o=`${e}View`;if(!s)return this[o]=null,this.updateTerminalMagnet(e),!0;const a=r.getCellById(s);if(!a)throw new Error(`Edge's ${e} node with id "${s}" not exists`);const l=a.findView(r);return!!l&&(this[o]=l,this.updateTerminalMagnet(e),!0)}updateTerminalMagnet(e){const t=`${e}Magnet`,r=this.getTerminalView(e);if(r){let i=r.getMagnetFromEdgeTerminal(this.cell[e]);i===r.container&&(i=null),this[t]=i}else this[t]=null}getLabelPositionAngle(e){const t=this.cell.getLabelAt(e);return t&&t.position&&"object"==typeof t.position&&t.position.angle||0}getLabelPositionArgs(e){const t=this.cell.getLabelAt(e);if(t&&t.position&&"object"==typeof t.position)return t.position.options}getDefaultLabelPositionArgs(){const e=this.cell.getDefaultLabel();if(e&&e.position&&"object"==typeof e.position)return e.position.options}mergeLabelPositionArgs(e,t){return null===e?null:void 0===e?null===t?null:t:ze({},t,e)}getConnection(){return null!=this.path?this.path.clone():null}getConnectionPathData(){if(null==this.path)return"";const e=this.cache.pathCache;return ju(e,"data")||(e.data=this.path.serialize()),e.data||""}getConnectionSubdivisions(){if(null==this.path)return null;const e=this.cache.pathCache;return ju(e,"segmentSubdivisions")||(e.segmentSubdivisions=this.path.getSegmentSubdivisions()),e.segmentSubdivisions}getConnectionLength(){if(null==this.path)return 0;const e=this.cache.pathCache;return ju(e,"length")||(e.length=this.path.length({segmentSubdivisions:this.getConnectionSubdivisions()})),e.length}getPointAtLength(e){return null==this.path?null:this.path.pointAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getPointAtRatio(e){return null==this.path?null:(br(e)&&(e=parseFloat(e)/100),this.path.pointAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()}))}getTangentAtLength(e){return null==this.path?null:this.path.tangentAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getTangentAtRatio(e){return null==this.path?null:this.path.tangentAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPoint(e){return null==this.path?null:this.path.closestPoint(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPointLength(e){return null==this.path?null:this.path.closestPointLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPointRatio(e){return null==this.path?null:this.path.closestPointNormalizedLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getLabelPosition(e,t,r,i){const s={distance:0};let a,o=0;"number"==typeof r?(o=r,a=i):a=r,null!=a&&(s.options=a);const l=a&&a.absoluteOffset,c=!(a&&a.absoluteDistance),u=a&&a.absoluteDistance&&a.reverseDistance,d=this.path,h={segmentSubdivisions:this.getConnectionSubdivisions()},f=new C(e,t),g=d.closestPointT(f,h),p=this.getConnectionLength()||0;let v,b,m=d.lengthAtT(g,h);if(c&&(m=p>0?m/p:0),u&&(m=-1*(p-m)||1),s.distance=m,l||(v=d.tangentAtT(g)),v)b=v.pointOffset(f);else{const y=d.pointAtT(g),w=f.diff(y);b={x:w.x,y:w.y}}return s.offset=b,s.angle=o,s}normalizeLabelPosition(e){return"number"==typeof e?{distance:e}:e}getLabelTransformationMatrix(e){const t=this.normalizeLabelPosition(e),r=t.options||{},i=t.angle||0,s=t.distance,o=s>0&&s<=1;let a=0;const l={x:0,y:0},c=t.offset;c&&("number"==typeof c?a=c:(null!=c.x&&(l.x=c.x),null!=c.y&&(l.y=c.y)));const u=0!==l.x||0!==l.y||0===a,d=r.keepGradient,h=r.ensureLegibility,f=this.path,g={segmentSubdivisions:this.getConnectionSubdivisions()},p=o?s*this.getConnectionLength():s,m=f.tangentAtLength(p,g);let v,b=i;if(m){if(u)v=m.start,v.translate(l);else{const y=m.clone();y.rotate(-90,m.start),y.setLength(a),v=y.end}d&&(b=m.angle()+i,h&&(b=_e.normalize((b+90)%180-90)))}else v=f.start,u&&v.translate(l);return ht().translate(v.x,v.y).rotate(b)}getVertexIndex(e,t){const i=this.cell.getVertices(),s=this.getClosestPointLength(new C(e,t));let o=0;if(null!=s)for(const a=i.length;o<a;o+=1){const c=this.getClosestPointLength(i[o]);if(null!=c&&s<c)break}return o}getEventArgs(e,t,r){const i=this,s=i.cell;return null==t||null==r?{e,view:i,edge:s,cell:s}:{e,x:t,y:r,view:i,edge:s,cell:s}}notifyUnhandledMouseDown(e,t,r){this.notify("edge:unhandled:mousedown",{e,x:t,y:r,view:this,cell:this.cell,edge:this.cell})}notifyMouseDown(e,t,r){super.onMouseDown(e,t,r),this.notify("edge:mousedown",this.getEventArgs(e,t,r))}notifyMouseMove(e,t,r){super.onMouseMove(e,t,r),this.notify("edge:mousemove",this.getEventArgs(e,t,r))}notifyMouseUp(e,t,r){super.onMouseUp(e,t,r),this.notify("edge:mouseup",this.getEventArgs(e,t,r))}onClick(e,t,r){super.onClick(e,t,r),this.notify("edge:click",this.getEventArgs(e,t,r))}onDblClick(e,t,r){super.onDblClick(e,t,r),this.notify("edge:dblclick",this.getEventArgs(e,t,r))}onContextMenu(e,t,r){super.onContextMenu(e,t,r),this.notify("edge:contextmenu",this.getEventArgs(e,t,r))}onMouseDown(e,t,r){this.notifyMouseDown(e,t,r),this.startEdgeDragging(e,t,r)}onMouseMove(e,t,r){const i=this.getEventData(e);switch(i.action){case"drag-label":this.dragLabel(e,t,r);break;case"drag-arrowhead":this.dragArrowhead(e,t,r);break;case"drag-edge":this.dragEdge(e,t,r)}return this.notifyMouseMove(e,t,r),i}onMouseUp(e,t,r){const i=this.getEventData(e);switch(i.action){case"drag-label":this.stopLabelDragging(e,t,r);break;case"drag-arrowhead":this.stopArrowheadDragging(e,t,r);break;case"drag-edge":this.stopEdgeDragging(e,t,r)}return this.notifyMouseUp(e,t,r),this.checkMouseleave(e),i}onMouseOver(e){super.onMouseOver(e),this.notify("edge:mouseover",this.getEventArgs(e))}onMouseOut(e){super.onMouseOut(e),this.notify("edge:mouseout",this.getEventArgs(e))}onMouseEnter(e){super.onMouseEnter(e),this.notify("edge:mouseenter",this.getEventArgs(e))}onMouseLeave(e){super.onMouseLeave(e),this.notify("edge:mouseleave",this.getEventArgs(e))}onMouseWheel(e,t,r,i){super.onMouseWheel(e,t,r,i),this.notify("edge:mousewheel",Object.assign({delta:i},this.getEventArgs(e,t,r)))}onCustomEvent(e,t,r,i){if(H_(e.target,"edge-tool",this.container)){if(e.stopPropagation(),this.can("useEdgeTools")){if("edge:remove"===t)return void this.cell.remove({ui:!0});this.notify("edge:customevent",Object.assign({name:t},this.getEventArgs(e,r,i)))}this.notifyMouseDown(e,r,i)}else this.notify("edge:customevent",Object.assign({name:t},this.getEventArgs(e,r,i))),super.onCustomEvent(e,t,r,i)}onLabelMouseDown(e,t,r){this.notifyMouseDown(e,t,r),this.startLabelDragging(e,t,r),this.getEventData(e).stopPropagation&&e.stopPropagation()}startEdgeDragging(e,t,r){this.can("edgeMovable")?this.setEventData(e,{x:t,y:r,moving:!1,action:"drag-edge"}):this.notifyUnhandledMouseDown(e,t,r)}dragEdge(e,t,r){const i=this.getEventData(e);i.moving||(i.moving=!0,this.addClass("edge-moving"),this.notify("edge:move",{e,x:t,y:r,view:this,cell:this.cell,edge:this.cell})),this.cell.translate(t-i.x,r-i.y,{ui:!0}),this.setEventData(e,{x:t,y:r}),this.notify("edge:moving",{e,x:t,y:r,view:this,cell:this.cell,edge:this.cell})}stopEdgeDragging(e,t,r){const i=this.getEventData(e);i.moving&&(this.removeClass("edge-moving"),this.notify("edge:moved",{e,x:t,y:r,view:this,cell:this.cell,edge:this.cell})),i.moving=!1}prepareArrowheadDragging(e,t){const r=this.getTerminalMagnet(e),i={action:"drag-arrowhead",x:t.x,y:t.y,isNewEdge:!0===t.isNewEdge,terminalType:e,initialMagnet:r,initialTerminal:am(this.cell[e]),fallbackAction:t.fallbackAction||"revert",getValidateConnectionArgs:this.createValidateConnectionArgs(e),options:t.options};return this.beforeArrowheadDragging(i),i}createValidateConnectionArgs(e){const t=[];t[4]=e,t[5]=this;let r,i=0,s=0;"source"===e?(i=2,r="target"):(s=2,r="source");const o=this.cell[r],a=o.cell;if(a){let l;const c=t[i]=this.graph.findViewByCell(a);c&&(l=c.getMagnetFromEdgeTerminal(o),l===c.container&&(l=void 0)),t[i+1]=l}return(l,c)=>(t[s]=l,t[s+1]=l.container===c?void 0:c,t)}beforeArrowheadDragging(e){e.zIndex=this.cell.zIndex,this.cell.toFront();const t=this.container.style;e.pointerEvents=t.pointerEvents,t.pointerEvents="none",this.graph.options.connecting.highlight&&this.highlightAvailableMagnets(e)}afterArrowheadDragging(e){null!=e.zIndex&&(this.cell.setZIndex(e.zIndex,{ui:!0}),e.zIndex=null),this.container.style.pointerEvents=e.pointerEvents||"",this.graph.options.connecting.highlight&&this.unhighlightAvailableMagnets(e)}validateConnection(e,t,r,i,s,o,a){const l=this.graph.options.connecting,c=l.allowLoop,u=l.allowNode,d=l.allowEdge,h=l.allowPort,f=l.allowMulti,g=l.validateConnection,p=o?o.cell:null,m="target"===s?r:e,v="target"===s?i:t;let b=!0;const y=w=>{const D="source"===s?a?a.port:null:p?p.getSourcePortId():null,x="target"===s?a?a.port:null:p?p.getTargetPortId():null;return Z(w,this.graph,{edge:p,edgeView:o,sourceView:e,targetView:r,sourcePort:D,targetPort:x,sourceMagnet:t,targetMagnet:i,sourceCell:e?e.cell:null,targetCell:r?r.cell:null,type:s})};if(null!=c&&("boolean"==typeof c?!c&&e===r&&(b=!1):b=y(c)),b&&null!=h&&("boolean"==typeof h?!h&&v&&(b=!1):b=y(h)),b&&null!=d&&("boolean"==typeof d?!d&&_r.isEdgeView(m)&&(b=!1):b=y(d)),b&&null!=u&&null==v&&("boolean"==typeof u?!u&&nn.isNodeView(m)&&(b=!1):b=y(u)),b&&null!=f&&o){const w=o.cell,D="source"===s?a:w.getSource(),x="target"===s?a:w.getTarget(),S=a?this.graph.getCellById(a.cell):null;if(D&&x&&D.cell&&x.cell&&S)if("function"==typeof f)b=y(f);else{const M=this.graph.model.getConnectedEdges(S,{outgoing:"source"===s,incoming:"target"===s});M.length&&("withPort"===f?M.some(k=>{const I=k.getSource(),F=k.getTarget();return I&&F&&I.cell===D.cell&&F.cell===x.cell&&null!=I.port&&I.port===D.port&&null!=F.port&&F.port===x.port})&&(b=!1):f||M.some(k=>{const I=k.getSource(),F=k.getTarget();return I&&F&&I.cell===D.cell&&F.cell===x.cell})&&(b=!1))}}return b&&null!=g&&(b=y(g)),b}allowConnectToBlank(e){const t=this.graph,i=t.options.connecting.allowBlank;if("function"!=typeof i)return!!i;const s=t.findViewByCell(e),o=e.getSourceCell(),a=e.getTargetCell(),l=t.findViewByCell(o),c=t.findViewByCell(a);return Z(i,t,{edge:e,edgeView:s,sourceCell:o,targetCell:a,sourceView:l,targetView:c,sourcePort:e.getSourcePortId(),targetPort:e.getTargetPortId(),sourceMagnet:s.sourceMagnet,targetMagnet:s.targetMagnet})}validateEdge(e,t,r){const i=this.graph;if(!this.allowConnectToBlank(e)){const o=e.getSourceCellId(),a=e.getTargetCellId();if(!o||!a)return!1}const s=i.options.connecting.validateEdge;return!s||Z(s,i,{edge:e,type:t,previous:r})}arrowheadDragging(e,t,r,i){i.x=t,i.y=r,i.currentTarget!==e&&(i.currentMagnet&&i.currentView&&i.currentView.unhighlight(i.currentMagnet,{type:"magnetAdsorbed"}),i.currentView=this.graph.findViewByElem(e),i.currentView?(i.currentMagnet=i.currentView.findMagnet(e),i.currentMagnet&&this.validateConnection(...i.getValidateConnectionArgs(i.currentView,i.currentMagnet),i.currentView.getEdgeTerminal(i.currentMagnet,t,r,this.cell,i.terminalType))?i.currentView.highlight(i.currentMagnet,{type:"magnetAdsorbed"}):i.currentMagnet=null):i.currentMagnet=null),i.currentTarget=e,this.cell.prop(i.terminalType,{x:t,y:r},Object.assign(Object.assign({},i.options),{ui:!0}))}arrowheadDragged(e,t,r){const i=e.currentView,s=e.currentMagnet;if(!s||!i)return;i.unhighlight(s,{type:"magnetAdsorbed"});const o=e.terminalType,a=i.getEdgeTerminal(s,t,r,this.cell,o);this.cell.setTerminal(o,a,{ui:!0})}snapArrowhead(e,t,r){const i=this.graph,{snap:s,allowEdge:o}=i.options.connecting,a="object"==typeof s&&s.radius||50,l={x:e-a,y:t-a,width:2*a,height:2*a},c=i.renderer.findViewsInArea(l);if(o){const w=i.renderer.findEdgeViewsInArea(l).filter(D=>D!==this);c.push(...w)}const u=r.closestView||null,d=r.closestMagnet||null;r.closestView=null,r.closestMagnet=null;let h,f=Number.MAX_SAFE_INTEGER;const g=new C(e,t);let p;c.forEach(w=>{"false"!==w.container.getAttribute("magnet")&&(h=w.cell.getBBox().getCenter().distance(g),h<a&&h<f&&(d===w.container||this.validateConnection(...r.getValidateConnectionArgs(w,null),w.getEdgeTerminal(w.container,e,t,this.cell,r.terminalType)))&&(f=h,r.closestView=w,r.closestMagnet=w.container)),w.container.querySelectorAll("[magnet]").forEach(D=>{if("false"!==D.getAttribute("magnet")){const x=w.getBBoxOfElement(D);h=g.distance(x.getCenter()),h<a&&h<f&&(d===D||this.validateConnection(...r.getValidateConnectionArgs(w,D),w.getEdgeTerminal(D,e,t,this.cell,r.terminalType)))&&(f=h,r.closestView=w,r.closestMagnet=D)}})});const m=r.terminalType,v=r.closestView,b=r.closestMagnet,y=d!==b;if(u&&y&&u.unhighlight(d,{type:"magnetAdsorbed"}),v){if(!y)return;v.highlight(b,{type:"magnetAdsorbed"}),p=v.getEdgeTerminal(b,e,t,this.cell,m)}else p={x:e,y:t};this.cell.setTerminal(m,p,{},Object.assign(Object.assign({},r.options),{ui:!0}))}snapArrowheadEnd(e){const t=e.closestView,r=e.closestMagnet;t&&r&&(t.unhighlight(r,{type:"magnetAdsorbed"}),e.currentMagnet=t.findMagnet(r)),e.closestView=null,e.closestMagnet=null}finishEmbedding(e){this.graph.options.embedding.enabled&&this.cell.updateParent()&&(e.zIndex=null)}fallbackConnection(e){"remove"===e.fallbackAction?this.cell.remove({ui:!0}):this.cell.prop(e.terminalType,e.initialTerminal,{ui:!0})}notifyConnectionEvent(e,t){const r=e.terminalType,i=e.initialTerminal,s=this.cell[r];if(s&&!We.equalTerminals(i,s)){const a=this.graph,l=i,c=l.cell?a.getCellById(l.cell):null,u=l.port,d=c?a.findViewByCell(c):null,h=c||e.isNewEdge?null:C.create(i).toJSON(),f=s,g=f.cell?a.getCellById(f.cell):null,p=f.port,m=g?a.findViewByCell(g):null,v=g?null:C.create(s).toJSON();this.notify("edge:connected",{e:t,previousCell:c,previousPort:u,previousView:d,previousPoint:h,currentCell:g,currentView:m,currentPort:p,currentPoint:v,previousMagnet:e.initialMagnet,currentMagnet:e.currentMagnet,edge:this.cell,view:this,type:r,isNew:e.isNewEdge})}}highlightAvailableMagnets(e){const t=this.graph,r=t.model.getCells();e.marked={};for(let i=0,s=r.length;i<s;i+=1){const o=t.findViewByCell(r[i]);if(!o||o.cell.id===this.cell.id)continue;const a=Array.prototype.slice.call(o.container.querySelectorAll("[magnet]"));"false"!==o.container.getAttribute("magnet")&&a.push(o.container);const l=a.filter(c=>this.validateConnection(...e.getValidateConnectionArgs(o,c),o.getEdgeTerminal(c,e.x,e.y,this.cell,e.terminalType)));if(l.length>0){for(let c=0,u=l.length;c<u;c+=1)o.highlight(l[c],{type:"magnetAvailable"});o.highlight(null,{type:"nodeAvailable"}),e.marked[o.cell.id]=l}}}unhighlightAvailableMagnets(e){const t=e.marked||{};Object.keys(t).forEach(r=>{const i=this.graph.findViewByCell(r);i&&(t[r].forEach(o=>{i.unhighlight(o,{type:"magnetAvailable"})}),i.unhighlight(null,{type:"nodeAvailable"}))}),e.marked=null}startArrowheadDragging(e,t,r){if(!this.can("arrowheadMovable"))return void this.notifyUnhandledMouseDown(e,t,r);const s=e.target.getAttribute("data-terminal"),o=this.prepareArrowheadDragging(s,{x:t,y:r});this.setEventData(e,o)}dragArrowhead(e,t,r){const i=this.getEventData(e);this.graph.options.connecting.snap?this.snapArrowhead(t,r,i):this.arrowheadDragging(this.getEventTarget(e),t,r,i)}stopArrowheadDragging(e,t,r){const i=this.graph,s=this.getEventData(e);i.options.connecting.snap?this.snapArrowheadEnd(s):this.arrowheadDragged(s,t,r),this.validateEdge(this.cell,s.terminalType,s.initialTerminal)?(this.finishEmbedding(s),this.notifyConnectionEvent(s,e)):this.fallbackConnection(s),this.afterArrowheadDragging(s)}startLabelDragging(e,t,r){if(this.can("edgeLabelMovable")){const s=parseInt(e.currentTarget.getAttribute("data-index"),10),o=this.getLabelPositionAngle(s),a=this.getLabelPositionArgs(s),l=this.getDefaultLabelPositionArgs(),c=this.mergeLabelPositionArgs(a,l);this.setEventData(e,{index:s,positionAngle:o,positionArgs:c,stopPropagation:!0,action:"drag-label"})}else this.setEventData(e,{stopPropagation:!0});this.graph.view.delegateDragEvents(e,this)}dragLabel(e,t,r){const i=this.getEventData(e),s=this.cell.getLabelAt(i.index),o=ze({},s,{position:this.getLabelPosition(t,r,i.positionAngle,i.positionArgs)});this.cell.setLabelAt(i.index,o)}stopLabelDragging(e,t,r){}}(function(n){n.toStringTag=`X6.${n.name}`,n.isEdgeView=function e(t){if(null==t)return!1;if(t instanceof n)return!0;const r=t[Symbol.toStringTag];return(null==r||r===n.toStringTag)&&"function"==typeof t.isNodeView&&"function"==typeof t.isEdgeView&&"function"==typeof t.confirmUpdate&&"function"==typeof t.update&&"function"==typeof t.getConnection}})(_r||(_r={})),_r.config({isSvgElement:!0,priority:1,bootstrap:["render","source","target"],actions:{view:["render"],markup:["render"],attrs:["update"],source:["source","update"],target:["target","update"],router:["update"],connector:["update"],labels:["labels"],defaultLabel:["labels"],tools:["tools"],vertices:["vertices","update"]}}),_r.registry.register("edge",_r,!0);class er extends ke{get options(){return this.graph.options}constructor(e){super(),this.graph=e;const{selectors:t,fragment:r}=Ae.parseJSONMarkup(er.markup);this.background=t.background,this.grid=t.grid,this.svg=t.svg,this.defs=t.defs,this.viewport=t.viewport,this.primer=t.primer,this.stage=t.stage,this.decorator=t.decorator,this.overlay=t.overlay,this.container=this.options.container,this.restore=er.snapshoot(this.container),he(this.container,this.prefixClassName("graph")),al(this.container,r),this.delegateEvents()}delegateEvents(){return super.delegateEvents(this.constructor.events),this}guard(e,t){return!!("mousedown"===e.type&&2===e.button||this.options.guard&&this.options.guard(e,t))||(e.data&&void 0!==e.data.guarded?e.data.guarded:!(t&&t.cell&&ae.isCell(t.cell)||this.svg===e.target||this.container===e.target||this.svg.contains(e.target)))}findView(e){return this.graph.findViewByElem(e)}onDblClick(e){this.options.preventDefaultDblClick&&e.preventDefault();const t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;const i=this.graph.snapToGrid(t.clientX,t.clientY);r?r.onDblClick(t,i.x,i.y):this.graph.trigger("blank:dblclick",{e:t,x:i.x,y:i.y})}onClick(e){if(this.getMouseMovedCount(e)<=this.options.clickThreshold){const t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;const i=this.graph.snapToGrid(t.clientX,t.clientY);r?r.onClick(t,i.x,i.y):this.graph.trigger("blank:click",{e:t,x:i.x,y:i.y})}}isPreventDefaultContextMenu(e){let t=this.options.preventDefaultContextMenu;return"function"==typeof t&&(t=Z(t,this.graph,{view:e})),t}onContextMenu(e){const t=this.normalizeEvent(e),r=this.findView(t.target);if(this.isPreventDefaultContextMenu(r)&&e.preventDefault(),this.guard(t,r))return;const i=this.graph.snapToGrid(t.clientX,t.clientY);r?r.onContextMenu(t,i.x,i.y):this.graph.trigger("blank:contextmenu",{e:t,x:i.x,y:i.y})}delegateDragEvents(e,t){null==e.data&&(e.data={}),this.setEventData(e,{currentView:t||null,mouseMovedCount:0,startPosition:{x:e.clientX,y:e.clientY}}),this.delegateDocumentEvents(this.constructor.documentEvents,e.data),this.undelegateEvents()}getMouseMovedCount(e){return this.getEventData(e).mouseMovedCount||0}onMouseDown(e){const t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;this.options.preventDefaultMouseDown&&e.preventDefault();const i=this.graph.snapToGrid(t.clientX,t.clientY);r?r.onMouseDown(t,i.x,i.y):(this.options.preventDefaultBlankAction&&["touchstart"].includes(t.type)&&e.preventDefault(),this.graph.trigger("blank:mousedown",{e:t,x:i.x,y:i.y})),this.delegateDragEvents(t,r)}onMouseMove(e){const t=this.getEventData(e),r=t.startPosition;if(r&&r.x===e.clientX&&r.y===e.clientY||(null==t.mouseMovedCount&&(t.mouseMovedCount=0),t.mouseMovedCount+=1,t.mouseMovedCount<=this.options.moveThreshold))return;const s=this.normalizeEvent(e),o=this.graph.snapToGrid(s.clientX,s.clientY),a=t.currentView;a?a.onMouseMove(s,o.x,o.y):this.graph.trigger("blank:mousemove",{e:s,x:o.x,y:o.y}),this.setEventData(s,t)}onMouseUp(e){this.undelegateDocumentEvents();const t=this.normalizeEvent(e),r=this.graph.snapToGrid(t.clientX,t.clientY),s=this.getEventData(e).currentView;if(s?s.onMouseUp(t,r.x,r.y):this.graph.trigger("blank:mouseup",{e:t,x:r.x,y:r.y}),!e.isPropagationStopped()){const o=new Kn(e,{type:"click",data:e.data});this.onClick(o)}e.stopImmediatePropagation(),this.delegateEvents()}onMouseOver(e){const t=this.normalizeEvent(e),r=this.findView(t.target);if(!this.guard(t,r))if(r)r.onMouseOver(t);else{if(this.container===t.target)return;this.graph.trigger("blank:mouseover",{e:t})}}onMouseOut(e){const t=this.normalizeEvent(e),r=this.findView(t.target);if(!this.guard(t,r))if(r)r.onMouseOut(t);else{if(this.container===t.target)return;this.graph.trigger("blank:mouseout",{e:t})}}onMouseEnter(e){const t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;const i=this.graph.findViewByElem(t.relatedTarget);if(r){if(i===r)return;r.onMouseEnter(t)}else{if(i)return;this.graph.trigger("graph:mouseenter",{e:t})}}onMouseLeave(e){const t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;const i=this.graph.findViewByElem(t.relatedTarget);if(r){if(i===r)return;r.onMouseLeave(t)}else{if(i)return;this.graph.trigger("graph:mouseleave",{e:t})}}onMouseWheel(e){const t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;const i=t.originalEvent,s=this.graph.snapToGrid(i.clientX,i.clientY),o=Math.max(-1,Math.min(1,i.wheelDelta||-i.detail));r?r.onMouseWheel(t,s.x,s.y,o):this.graph.trigger("blank:mousewheel",{e:t,delta:o,x:s.x,y:s.y})}onCustomEvent(e){const t=e.currentTarget,r=t.getAttribute("event")||t.getAttribute("data-event");if(r){const i=this.findView(t);if(i){const s=this.normalizeEvent(e);if(this.guard(s,i))return;const o=this.graph.snapToGrid(s.clientX,s.clientY);i.onCustomEvent(s,r,o.x,o.y)}}}handleMagnetEvent(e,t){const r=e.currentTarget,i=r.getAttribute("magnet");if(i&&"false"!==i.toLowerCase()){const s=this.findView(r);if(s){const o=this.normalizeEvent(e);if(this.guard(o,s))return;const a=this.graph.snapToGrid(o.clientX,o.clientY);Z(t,this.graph,s,o,r,a.x,a.y)}}}onMagnetMouseDown(e){this.handleMagnetEvent(e,(t,r,i,s,o)=>{t.onMagnetMouseDown(r,i,s,o)})}onMagnetDblClick(e){this.handleMagnetEvent(e,(t,r,i,s,o)=>{t.onMagnetDblClick(r,i,s,o)})}onMagnetContextMenu(e){const t=this.findView(e.target);this.isPreventDefaultContextMenu(t)&&e.preventDefault(),this.handleMagnetEvent(e,(r,i,s,o,a)=>{r.onMagnetContextMenu(i,s,o,a)})}onLabelMouseDown(e){const r=this.findView(e.currentTarget);if(r){const i=this.normalizeEvent(e);if(this.guard(i,r))return;const s=this.graph.snapToGrid(i.clientX,i.clientY);r.onLabelMouseDown(i,s.x,s.y)}}onImageDragStart(){return!1}dispose(){this.undelegateEvents(),this.undelegateDocumentEvents(),this.restore(),this.restore=()=>{}}}(function(n,e,t,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)})([ke.dispose()],er.prototype,"dispose",null),function(n){const e=`${wt.prefixCls}-graph`;n.markup=[{ns:dt.xhtml,tagName:"div",selector:"background",className:`${e}-background`},{ns:dt.xhtml,tagName:"div",selector:"grid",className:`${e}-grid`},{ns:dt.svg,tagName:"svg",selector:"svg",className:`${e}-svg`,attrs:{width:"100%",height:"100%","xmlns:xlink":dt.xlink},children:[{tagName:"defs",selector:"defs"},{tagName:"g",selector:"viewport",className:`${e}-svg-viewport`,children:[{tagName:"g",selector:"primer",className:`${e}-svg-primer`},{tagName:"g",selector:"stage",className:`${e}-svg-stage`},{tagName:"g",selector:"decorator",className:`${e}-svg-decorator`},{tagName:"g",selector:"overlay",className:`${e}-svg-overlay`}]}]}],n.snapshoot=function t(r){const i=r.cloneNode();return r.childNodes.forEach(s=>i.appendChild(s)),()=>{for(ol(r);r.attributes.length>0;)r.removeAttribute(r.attributes[0].name);for(let s=0,o=i.attributes.length;s<o;s+=1){const a=i.attributes[s];r.setAttribute(a.name,a.value)}i.childNodes.forEach(s=>r.appendChild(s))}}}(er||(er={})),function(n){const e=wt.prefixCls;n.events={dblclick:"onDblClick",contextmenu:"onContextMenu",touchstart:"onMouseDown",mousedown:"onMouseDown",mouseover:"onMouseOver",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousewheel:"onMouseWheel",DOMMouseScroll:"onMouseWheel",[`mouseenter  .${e}-cell`]:"onMouseEnter",[`mouseleave  .${e}-cell`]:"onMouseLeave",[`mouseenter  .${e}-cell-tools`]:"onMouseEnter",[`mouseleave  .${e}-cell-tools`]:"onMouseLeave",[`mousedown   .${e}-cell [event]`]:"onCustomEvent",[`touchstart  .${e}-cell [event]`]:"onCustomEvent",[`mousedown   .${e}-cell [data-event]`]:"onCustomEvent",[`touchstart  .${e}-cell [data-event]`]:"onCustomEvent",[`dblclick    .${e}-cell [magnet]`]:"onMagnetDblClick",[`contextmenu .${e}-cell [magnet]`]:"onMagnetContextMenu",[`mousedown   .${e}-cell [magnet]`]:"onMagnetMouseDown",[`touchstart  .${e}-cell [magnet]`]:"onMagnetMouseDown",[`dblclick    .${e}-cell [data-magnet]`]:"onMagnetDblClick",[`contextmenu .${e}-cell [data-magnet]`]:"onMagnetContextMenu",[`mousedown   .${e}-cell [data-magnet]`]:"onMagnetMouseDown",[`touchstart  .${e}-cell [data-magnet]`]:"onMagnetMouseDown",[`dragstart   .${e}-cell image`]:"onImageDragStart",[`mousedown   .${e}-edge .${e}-edge-label`]:"onLabelMouseDown",[`touchstart  .${e}-edge .${e}-edge-label`]:"onLabelMouseDown"},n.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}}(er||(er={}));class gt extends qr{get options(){return this.graph.options}get model(){return this.graph.model}get view(){return this.graph.view}constructor(e){super(),this.graph=e,this.init()}init(){}}class Gm extends gt{init(){wt.autoInsertCSS&&function E9(n,e){const t=vl.find(r=>r.name===n);if(!(t&&(t.loadTimes+=1,t.loadTimes>1)||Yr.isApplyingHMR())){const r=document.createElement("style");r.setAttribute("type","text/css"),r.textContent=e;const i=document.querySelector("head");i&&i.insertBefore(r,i.firstChild),vl.push({name:n,loadTimes:1,styleElement:r})}}("core",".x6-graph {\n  position: relative;\n  outline: none;\n  touch-action: none;\n}\n.x6-graph-background,\n.x6-graph-grid,\n.x6-graph-svg {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.x6-graph-background-stage,\n.x6-graph-grid-stage,\n.x6-graph-svg-stage {\n  user-select: none;\n}\n.x6-graph.x6-graph-pannable {\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n.x6-graph.x6-graph-panning {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n  user-select: none;\n}\n.x6-node {\n  cursor: move;\n  /* stylelint-disable-next-line */\n}\n.x6-node.x6-node-immovable {\n  cursor: default;\n}\n.x6-node * {\n  -webkit-user-drag: none;\n}\n.x6-node .scalable * {\n  vector-effect: non-scaling-stroke;\n}\n.x6-node [magnet='true'] {\n  cursor: crosshair;\n  transition: opacity 0.3s;\n}\n.x6-node [magnet='true']:hover {\n  opacity: 0.7;\n}\n.x6-node foreignObject {\n  display: block;\n  overflow: visible;\n  background-color: transparent;\n}\n.x6-node foreignObject > body {\n  position: static;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  overflow: visible;\n  background-color: transparent;\n}\n.x6-edge .source-marker,\n.x6-edge .target-marker {\n  vector-effect: non-scaling-stroke;\n}\n.x6-edge .connection {\n  stroke-linejoin: round;\n  fill: none;\n}\n.x6-edge .connection-wrap {\n  cursor: move;\n  opacity: 0;\n  fill: none;\n  stroke: #000;\n  stroke-width: 15;\n  stroke-linecap: round;\n  stroke-linejoin: round;\n}\n.x6-edge .connection-wrap:hover {\n  opacity: 0.4;\n  stroke-opacity: 0.4;\n}\n.x6-edge .vertices {\n  cursor: move;\n  opacity: 0;\n}\n.x6-edge .vertices .vertex {\n  fill: #1abc9c;\n}\n.x6-edge .vertices .vertex :hover {\n  fill: #34495e;\n  stroke: none;\n}\n.x6-edge .vertices .vertex-remove {\n  cursor: pointer;\n  fill: #fff;\n}\n.x6-edge .vertices .vertex-remove-area {\n  cursor: pointer;\n  opacity: 0.1;\n}\n.x6-edge .vertices .vertex-group:hover .vertex-remove-area {\n  opacity: 1;\n}\n.x6-edge .arrowheads {\n  cursor: move;\n  opacity: 0;\n}\n.x6-edge .arrowheads .arrowhead {\n  fill: #1abc9c;\n}\n.x6-edge .arrowheads .arrowhead :hover {\n  fill: #f39c12;\n  stroke: none;\n}\n.x6-edge .tools {\n  cursor: pointer;\n  opacity: 0;\n}\n.x6-edge .tools .tool-options {\n  display: none;\n}\n.x6-edge .tools .tool-remove circle {\n  fill: #f00;\n}\n.x6-edge .tools .tool-remove path {\n  fill: #fff;\n}\n.x6-edge:hover .vertices,\n.x6-edge:hover .arrowheads,\n.x6-edge:hover .tools {\n  opacity: 1;\n}\n.x6-highlight-opacity {\n  opacity: 0.3;\n}\n.x6-cell-tool-editor {\n  position: relative;\n  display: inline-block;\n  min-height: 1em;\n  margin: 0;\n  padding: 0;\n  line-height: 1;\n  white-space: normal;\n  text-align: center;\n  vertical-align: top;\n  overflow-wrap: normal;\n  outline: none;\n  transform-origin: 0 0;\n  -webkit-user-drag: none;\n}\n.x6-edge-tool-editor {\n  border: 1px solid #275fc5;\n  border-radius: 2px;\n}\n")}dispose(){!function S9(n){const e=vl.findIndex(t=>t.name===n);if(e>-1){const t=vl[e];if(t.loadTimes-=1,t.loadTimes>0)return;let r=t.styleElement;r&&r.parentNode&&r.parentNode.removeChild(r),r=null,vl.splice(e,1)}}("core")}}var Ml;!function(n,e,t,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([Gm.dispose()],Gm.prototype,"dispose",null),function(n){n.get=function e(t){const{grid:r}=t,a=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(t,["grid","panning","mousewheel","embedding"]),l=t.container;if(null==l)throw new Error("Ensure the container of the graph is specified and valid");null==a.width&&(a.width=l.clientWidth),null==a.height&&(a.height=l.clientHeight);const c=ze({},n.defaults,a);return c.grid="number"==typeof r?{size:r,visible:!1}:Object.assign(Object.assign({},{size:10,visible:!1}),"boolean"==typeof r?{visible:r}:r),["panning","mousewheel","embedding"].forEach(h=>{const f=t[h];"boolean"==typeof f?c[h].enabled=f:c[h]=Object.assign(Object.assign({},c[h]),f)}),c}}(Ml||(Ml={})),function(n){n.defaults={x:0,y:0,scaling:{min:.01,max:16},grid:{size:10,visible:!1},background:!1,panning:{enabled:!1,eventTypes:["leftMouseDown"]},mousewheel:{enabled:!1,factor:1.2,zoomAtMousePosition:!0},highlighting:{default:{name:"stroke",args:{padding:3}},nodeAvailable:{name:"className",args:{className:wt.prefix("available-node")}},magnetAvailable:{name:"className",args:{className:wt.prefix("available-magnet")}}},connecting:{snap:!1,allowLoop:!0,allowNode:!0,allowEdge:!1,allowPort:!0,highlight:!1,anchor:"center",edgeAnchor:"ratio",connectionPoint:"boundary",router:"normal",connector:"normal",validateConnection:({type:e,sourceView:t,targetView:r})=>null!=("target"===e?r:t),createEdge:()=>new UZ},translating:{restrict:!1},embedding:{enabled:!1,findParent:"bbox",frontOnly:!0,validate:()=>!0},moveThreshold:0,clickThreshold:0,magnetThreshold:0,preventDefaultDblClick:!0,preventDefaultMouseDown:!1,preventDefaultContextMenu:!0,preventDefaultBlankAction:!0,interacting:{edgeLabelMovable:!1},async:!0,virtual:!1,guard:()=>!1}}(Ml||(Ml={}));class qm extends gt{get elem(){return this.view.grid}get grid(){return this.options.grid}init(){this.startListening(),this.draw(this.grid)}startListening(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}stopListening(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}setVisible(e){this.grid.visible!==e&&(this.grid.visible=e,this.update())}getGridSize(){return this.grid.size}setGridSize(e){this.grid.size=Math.max(e,1),this.update()}show(){this.setVisible(!0),this.update()}hide(){this.setVisible(!1),this.update()}clear(){this.elem.style.backgroundImage=""}draw(e){this.clear(),this.instance=null,Object.assign(this.grid,e),this.patterns=this.resolveGrid(e),this.update()}update(e={}){const t=this.grid.size;if(t<=1||!this.grid.visible)return this.clear();const r=this.graph.matrix(),i=this.getInstance(),s=Array.isArray(e)?e:[e];this.patterns.forEach((l,c)=>{const u=`pattern_${c}`,d=r.a||1,h=r.d||1,{update:f,markup:g}=l,p=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(l,["update","markup"]),m=Object.assign(Object.assign(Object.assign({},p),s[c]),{sx:d,sy:h,ox:r.e||0,oy:r.f||0,width:t*d,height:t*h});i.has(u)||i.add(u,W.create("pattern",{id:u,patternUnits:"userSpaceOnUse"},W.createVectors(g)).node);const v=i.get(u);"function"==typeof f&&f(v.childNodes[0],m);let b=m.ox%m.width;b<0&&(b+=m.width);let y=m.oy%m.height;y<0&&(y+=m.height),we(v,{x:b,y,width:m.width,height:m.height})});const o=(new XMLSerializer).serializeToString(i.root),a=`url(data:image/svg+xml;base64,${btoa(o)})`;this.elem.style.backgroundImage=a}getInstance(){return this.instance||(this.instance=new Qr),this.instance}resolveGrid(e){if(!e)return[];const t=e.type;if(null==t)return[Object.assign(Object.assign({},Qr.presets.dot),e.args)];const r=Qr.registry.get(t);if(r){let i=e.args||[];return Array.isArray(i)||(i=[i]),Array.isArray(r)?r.map((s,o)=>Object.assign(Object.assign({},s),i[o])):[Object.assign(Object.assign({},r),i[0])]}return Qr.registry.onNotFound(t)}dispose(){this.stopListening(),this.clear()}}!function(n,e,t,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([gt.dispose()],qm.prototype,"dispose",null);class vM extends gt{get container(){return this.graph.view.container}get viewport(){return this.graph.view.viewport}get stage(){return this.graph.view.stage}init(){this.resize()}getMatrix(){const e=this.viewport.getAttribute("transform");return e!==this.viewportTransformString&&(this.viewportMatrix=this.viewport.getCTM(),this.viewportTransformString=e),ht(this.viewportMatrix)}setMatrix(e){const t=ht(e),r=uo(t);this.viewport.setAttribute("transform",r),this.viewportMatrix=t,this.viewportTransformString=r}resize(e,t){let r=void 0===e?this.options.width:e,i=void 0===t?this.options.height:t;this.options.width=r,this.options.height=i,"number"==typeof r&&(r=Math.round(r)),"number"==typeof i&&(i=Math.round(i)),this.container.style.width=null==r?"":`${r}px`,this.container.style.height=null==i?"":`${i}px`;const s=this.getComputedSize();return this.graph.trigger("resize",Object.assign({},s)),this}getComputedSize(){let e=this.options.width,t=this.options.height;return D_(e)||(e=this.container.clientWidth),D_(t)||(t=this.container.clientHeight),{width:e,height:t}}getScale(){return function p9(n){let e,t,r,i;return n?(e=null==n.a?1:n.a,i=null==n.d?1:n.d,t=n.b,r=n.c):e=i=1,{sx:t?Math.sqrt(e*e+t*t):e,sy:r?Math.sqrt(r*r+i*i):i}}(this.getMatrix())}scale(e,t=e,r=0,i=0){if(e=this.clampScale(e),t=this.clampScale(t),r||i){const o=this.getTranslation(),a=o.tx-r*(e-1),l=o.ty-i*(t-1);(a!==o.tx||l!==o.ty)&&this.translate(a,l)}const s=this.getMatrix();return s.a=e,s.d=t,this.setMatrix(s),this.graph.trigger("scale",{sx:e,sy:t,ox:r,oy:i}),this}clampScale(e){const t=this.graph.options.scaling;return mn(e,t.min||.01,t.max||16)}getZoom(){return this.getScale().sx}zoom(e,t){t=t||{};let r=e,i=e;const s=this.getScale(),o=this.getComputedSize();let a=o.width/2,l=o.height/2;if(t.absolute||(r+=s.sx,i+=s.sy),t.scaleGrid&&(r=Math.round(r/t.scaleGrid)*t.scaleGrid,i=Math.round(i/t.scaleGrid)*t.scaleGrid),t.maxScale&&(r=Math.min(t.maxScale,r),i=Math.min(t.maxScale,i)),t.minScale&&(r=Math.max(t.minScale,r),i=Math.max(t.minScale,i)),t.center&&(a=t.center.x,l=t.center.y),r=this.clampScale(r),i=this.clampScale(i),a||l){const c=this.getTranslation(),u=a-r/s.sx*(a-c.tx),d=l-i/s.sy*(l-c.ty);(u!==c.tx||d!==c.ty)&&this.translate(u,d)}return this.scale(r,i),this}getRotation(){return function m9(n){let e={x:0,y:1};n&&(e=Tm(n,e));const t=180*Math.atan2(e.y,e.x)/Math.PI%360-90;return{angle:t%360+(t<0?360:0)}}(this.getMatrix())}rotate(e,t,r){if(null==t||null==r){const s=ve.getBBox(this.stage);t=s.width/2,r=s.height/2}const i=this.getMatrix().translate(t,r).rotate(e).translate(-t,-r);return this.setMatrix(i),this}getTranslation(){return function y9(n){return{tx:n&&n.e||0,ty:n&&n.f||0}}(this.getMatrix())}translate(e,t){const r=this.getMatrix();r.e=e||0,r.f=t||0,this.setMatrix(r);const i=this.getTranslation();return this.options.x=i.tx,this.options.y=i.ty,this.graph.trigger("translate",Object.assign({},i)),this}setOrigin(e,t){return this.translate(e||0,t||0)}fitToContent(e,t,r,i){if("object"==typeof e){const y=e;e=y.gridWidth||1,t=y.gridHeight||1,r=y.padding||0,i=y}else e=e||1,t=t||1,r=r||0,null==i&&(i={});const s=$i(r),o=i.border||0,a=i.contentArea?P.create(i.contentArea):this.getContentArea(i);o>0&&a.inflate(o);const l=this.getScale(),c=this.getTranslation(),u=l.sx,d=l.sy;a.x*=u,a.y*=d,a.width*=u,a.height*=d;let h=Math.max(Math.ceil((a.width+a.x)/e),1)*e,f=Math.max(Math.ceil((a.height+a.y)/t),1)*t,g=0,p=0;("negative"===i.allowNewOrigin&&a.x<0||"positive"===i.allowNewOrigin&&a.x>=0||"any"===i.allowNewOrigin)&&(g=Math.ceil(-a.x/e)*e,g+=s.left,h+=g),("negative"===i.allowNewOrigin&&a.y<0||"positive"===i.allowNewOrigin&&a.y>=0||"any"===i.allowNewOrigin)&&(p=Math.ceil(-a.y/t)*t,p+=s.top,f+=p),h+=s.right,f+=s.bottom,h=Math.max(h,i.minWidth||0),f=Math.max(f,i.minHeight||0),h=Math.min(h,i.maxWidth||Number.MAX_SAFE_INTEGER),f=Math.min(f,i.maxHeight||Number.MAX_SAFE_INTEGER);const m=this.getComputedSize(),v=h!==m.width||f!==m.height;return(g!==c.tx||p!==c.ty)&&this.translate(g,p),v&&this.resize(h,f),new P(-g/u,-p/d,h/u,f/d)}scaleContentToFit(e={}){this.scaleContentToFitImpl(e)}scaleContentToFitImpl(e={},t=!0){let r,i;if(e.contentArea){const v=e.contentArea;r=this.graph.localToGraph(v),i=C.create(v)}else r=this.getContentBBox(e),i=this.graph.graphToLocal(r);if(!r.width||!r.height)return;const s=$i(e.padding),o=e.minScale||0,a=e.maxScale||Number.MAX_SAFE_INTEGER,l=e.minScaleX||o,c=e.maxScaleX||a,u=e.minScaleY||o,d=e.maxScaleY||a;let h;if(e.viewportArea)h=e.viewportArea;else{const v=this.getComputedSize(),b=this.getTranslation();h={x:b.tx,y:b.ty,width:v.width,height:v.height}}h=P.create(h).moveAndExpand({x:s.left,y:s.top,width:-s.left-s.right,height:-s.top-s.bottom});const f=this.getScale();let g=h.width/r.width*f.sx,p=h.height/r.height*f.sy;!1!==e.preserveAspectRatio&&(g=p=Math.min(g,p));const m=e.scaleGrid;if(m&&(g=m*Math.floor(g/m),p=m*Math.floor(p/m)),g=mn(g,l,c),p=mn(p,u,d),this.scale(g,p),t){const v=this.options;this.translate(h.x-i.x*g-v.x,h.y-i.y*p-v.y)}}getContentArea(e={}){return!1!==e.useCellGeometry?this.model.getAllCellsBBox()||new P:ve.getBBox(this.stage)}getContentBBox(e={}){return this.graph.localToGraph(this.getContentArea(e))}getGraphArea(){const e=P.fromSize(this.getComputedSize());return this.graph.graphToLocal(e)}zoomToRect(e,t={}){const r=P.create(e),i=this.graph;t.contentArea=r,null==t.viewportArea&&(t.viewportArea={x:i.options.x,y:i.options.y,width:this.options.width,height:this.options.height}),this.scaleContentToFitImpl(t,!1);const s=r.getCenter();return this.centerPoint(s.x,s.y),this}zoomToFit(e={}){return this.zoomToRect(this.getContentArea(e),e)}centerPoint(e,t){const r=this.getComputedSize(),i=this.getScale(),s=this.getTranslation(),o=r.width/2,a=r.height/2;t=a-(t="number"==typeof t?t:a)*i.sy,(s.tx!==(e=o-(e="number"==typeof e?e:o)*i.sx)||s.ty!==t)&&this.translate(e,t)}centerContent(e){const r=this.graph.getContentArea(e).getCenter();this.centerPoint(r.x,r.y)}centerCell(e){return this.positionCell(e,"center")}positionPoint(e,t,r){const i=this.getComputedSize();(t=wr(t,Math.max(0,i.width)))<0&&(t=i.width+t),(r=wr(r,Math.max(0,i.height)))<0&&(r=i.height+r);const s=this.getTranslation(),o=this.getScale(),a=t-e.x*o.sx,l=r-e.y*o.sy;(s.tx!==a||s.ty!==l)&&this.translate(a,l)}positionRect(e,t){const r=P.create(e);switch(t){case"center":return this.positionPoint(r.getCenter(),"50%","50%");case"top":return this.positionPoint(r.getTopCenter(),"50%",0);case"top-right":return this.positionPoint(r.getTopRight(),"100%",0);case"right":return this.positionPoint(r.getRightMiddle(),"100%","50%");case"bottom-right":return this.positionPoint(r.getBottomRight(),"100%","100%");case"bottom":return this.positionPoint(r.getBottomCenter(),"50%","100%");case"bottom-left":return this.positionPoint(r.getBottomLeft(),0,"100%");case"left":return this.positionPoint(r.getLeftMiddle(),0,"50%");case"top-left":return this.positionPoint(r.getTopLeft(),0,0);default:return this}}positionCell(e,t){const r=e.getBBox();return this.positionRect(r,t)}positionContent(e,t){const r=this.graph.getContentArea(t);return this.positionRect(r,e)}}class Wm extends gt{get elem(){return this.view.background}init(){this.startListening(),this.options.background&&this.draw(this.options.background)}startListening(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}stopListening(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}updateBackgroundImage(e={}){let t=e.size||"auto auto",r=e.position||"center";const i=this.graph.transform.getScale(),s=this.graph.translate();"object"==typeof r&&(r=`${s.tx+i.sx*(r.x||0)}px ${s.ty+i.sy*(r.y||0)}px`),"object"==typeof t&&(t=P.fromSize(t).scale(i.sx,i.sy),t=`${t.width}px ${t.height}px`),this.elem.style.backgroundSize=t,this.elem.style.backgroundPosition=r}drawBackgroundImage(e,t={}){if(!(e instanceof HTMLImageElement))return void(this.elem.style.backgroundImage="");const r=this.optionsCache;if(r&&r.image!==t.image)return;let i;const s=t.opacity,o=t.size;let a=t.repeat||"no-repeat";const l=bl.registry.get(a);if("function"==typeof l){const u=t.quality||1;e.width*=u,e.height*=u;const d=l(e,t);if(!(d instanceof HTMLCanvasElement))throw new Error("Background pattern must return an HTML Canvas instance");i=d.toDataURL("image/png"),a=t.repeat&&a!==t.repeat?t.repeat:"repeat","object"==typeof o?(o.width*=d.width/e.width,o.height*=d.height/e.height):void 0===o&&(t.size={width:d.width/u,height:d.height/u})}else i=e.src,void 0===o&&(t.size={width:e.width,height:e.height});null!=r&&"object"==typeof t.size&&t.image===r.image&&t.repeat===r.repeat&&t.quality===r.quality&&(r.size=am(t.size));const c=this.elem.style;c.backgroundImage=`url(${i})`,c.backgroundRepeat=a,c.opacity=null==s||s>=1?"":`${s}`,this.updateBackgroundImage(t)}updateBackgroundColor(e){this.elem.style.backgroundColor=e||""}updateBackgroundOptions(e){this.graph.options.background=e}update(){this.optionsCache&&this.updateBackgroundImage(this.optionsCache)}draw(e){const t=e||{};if(this.updateBackgroundOptions(e),this.updateBackgroundColor(t.color),t.image){this.optionsCache=am(t);const r=document.createElement("img");r.onload=()=>this.drawBackgroundImage(r,e),r.setAttribute("crossorigin","anonymous"),r.src=t.image}else this.drawBackgroundImage(null),this.optionsCache=null}clear(){this.draw()}dispose(){this.clear(),this.stopListening()}}!function(n,e,t,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([gt.dispose()],Wm.prototype,"dispose",null);class bM extends gt{get widgetOptions(){return this.options.panning}get pannable(){return this.widgetOptions&&!0===this.widgetOptions.enabled}init(){this.startListening(),this.updateClassName()}startListening(){const e=this.widgetOptions.eventTypes;e&&(e.includes("leftMouseDown")&&(this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&(this.onRightMouseDown=this.onRightMouseDown.bind(this),Ht.on(this.graph.container,"mousedown",this.onRightMouseDown)),e.includes("mouseWheel")&&(this.mousewheelHandle=new uA(this.graph.container,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.mousewheelHandle.enable()))}stopListening(){const e=this.widgetOptions.eventTypes;e&&(e.includes("leftMouseDown")&&(this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&Ht.off(this.graph.container,"mousedown",this.onRightMouseDown),e.includes("mouseWheel")&&this.mousewheelHandle&&this.mousewheelHandle.disable())}preparePanning({e}){const t=this.graph.getPlugin("selection"),r=t&&t.allowRubberband(e,!0);(this.allowPanning(e,!0)||this.allowPanning(e)&&!r)&&this.startPanning(e)}allowPanning(e,t){return this.pannable&&yl.isMatch(e,this.widgetOptions.modifiers,t)}startPanning(e){const t=this.view.normalizeEvent(e);this.clientX=t.clientX,this.clientY=t.clientY,this.panning=!0,this.updateClassName(),Ht.on(document.body,{"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),Ht.on(window,"mouseup.panning",this.stopPanning.bind(this))}pan(e){const t=this.view.normalizeEvent(e),r=t.clientX-this.clientX,i=t.clientY-this.clientY;this.clientX=t.clientX,this.clientY=t.clientY,this.graph.translateBy(r,i)}stopPanning(e){this.panning=!1,this.updateClassName(),Ht.off(document.body,".panning"),Ht.off(window,".panning")}updateClassName(){const e=this.view.container,t=this.view.prefixClassName("graph-panning"),r=this.view.prefixClassName("graph-pannable");this.pannable?this.panning?(he(e,t),yn(e,r)):(yn(e,t),he(e,r)):(yn(e,t),yn(e,r))}onRightMouseDown(e){2===e.button&&this.allowPanning(e,!0)&&this.startPanning(e)}allowMouseWheel(e){return this.pannable&&!e.ctrlKey}onMouseWheel(e,t,r){e.ctrlKey||this.graph.translateBy(-t,-r)}autoPanning(e,t){const i=this.graph.getGraphArea();let s=0,o=0;e<=i.left+10&&(s=-10),t<=i.top+10&&(o=-10),e>=i.right-10&&(s=10),t>=i.bottom-10&&(o=10),(0!==s||0!==o)&&this.graph.translateBy(-s,-o)}enablePanning(){this.pannable||(this.widgetOptions.enabled=!0,this.updateClassName())}disablePanning(){this.pannable&&(this.widgetOptions.enabled=!1,this.updateClassName())}dispose(){this.stopListening()}}!function(n,e,t,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([gt.dispose()],bM.prototype,"dispose",null);class Ym extends gt{constructor(){super(...arguments),this.cumulatedFactor=1}get widgetOptions(){return this.options.mousewheel}init(){this.container=this.graph.container,this.target=this.widgetOptions.global?document:this.container,this.mousewheelHandle=new uA(this.target,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.widgetOptions.enabled&&this.enable(!0)}get disabled(){return!0!==this.widgetOptions.enabled}enable(e){(this.disabled||e)&&(this.widgetOptions.enabled=!0,this.mousewheelHandle.enable())}disable(){this.disabled||(this.widgetOptions.enabled=!1,this.mousewheelHandle.disable())}allowMouseWheel(e){const t=this.widgetOptions.guard;return(null==t||t.call(e))&&yl.isMatch(e,this.widgetOptions.modifiers)}onMouseWheel(e){const t=this.widgetOptions.guard;if((null==t||t.call(e))&&yl.isMatch(e,this.widgetOptions.modifiers)){const r=this.widgetOptions.factor||1.2;null==this.currentScale&&(this.startPos={x:e.clientX,y:e.clientY},this.currentScale=this.graph.transform.getScale().sx),this.cumulatedFactor=e.deltaY<0?this.currentScale<.15?(this.currentScale+.01)/this.currentScale:Math.round(this.currentScale*r*20)/20/this.currentScale:this.currentScale<=.15?(this.currentScale-.01)/this.currentScale:Math.round(this.currentScale*(1/r)*20)/20/this.currentScale,this.cumulatedFactor=Math.max(.01,Math.min(this.currentScale*this.cumulatedFactor,160)/this.currentScale);const s=this.currentScale;let o=this.graph.transform.clampScale(s*this.cumulatedFactor);if(o=mn(o,this.widgetOptions.minScale||Number.MIN_SAFE_INTEGER,this.widgetOptions.maxScale||Number.MAX_SAFE_INTEGER),o!==s)if(this.widgetOptions.zoomAtMousePosition){const u=this.graph.getPlugin("scroller")?this.graph.clientToLocal(this.startPos):this.graph.clientToGraph(this.startPos);this.graph.zoom(o,{absolute:!0,center:u.clone()})}else this.graph.zoom(o,{absolute:!0});this.currentScale=null,this.cumulatedFactor=1}}dispose(){this.disable()}}!function(n,e,t,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([qr.dispose()],Ym.prototype,"dispose",null);class wM extends gt{init(){this.resetRenderArea=function PV(n,e,t){var r,i,s,o,a,l,c=0,u=!1,d=!1,h=!0;if("function"!=typeof n)throw new TypeError("Expected a function");function f(x){var S=r,M=i;return r=i=void 0,c=x,o=n.apply(M,S)}function g(x){return c=x,a=setTimeout(v,e),u?f(x):o}function m(x){var S=x-l;return void 0===l||S>=e||S<0||d&&x-c>=s}function v(){var x=Lp();if(m(x))return b(x);a=setTimeout(v,function p(x){var T=e-(x-l);return d?TV(T,s-(x-c)):T}(x))}function b(x){return a=void 0,h&&r?f(x):(r=i=void 0,o)}function D(){var x=Lp(),S=m(x);if(r=arguments,i=this,l=x,S){if(void 0===a)return g(l);if(d)return clearTimeout(a),a=setTimeout(v,e),f(l)}return void 0===a&&(a=setTimeout(v,e)),o}return e=zs(e)||0,Ue(t)&&(u=!!t.leading,s=(d="maxWait"in t)?MV(zs(t.maxWait)||0,e):s,h="trailing"in t?!!t.trailing:h),D.cancel=function y(){void 0!==a&&clearTimeout(a),c=0,r=l=i=a=void 0},D.flush=function w(){return void 0===a?o:b(Lp())},D}(this.resetRenderArea,200),this.resetRenderArea(),this.startListening()}startListening(){this.graph.on("translate",this.resetRenderArea,this),this.graph.on("scale",this.resetRenderArea,this),this.graph.on("resize",this.resetRenderArea,this)}stopListening(){this.graph.off("translate",this.resetRenderArea,this),this.graph.off("scale",this.resetRenderArea,this),this.graph.off("resize",this.resetRenderArea,this)}enableVirtualRender(){this.options.virtual=!0,this.resetRenderArea()}disableVirtualRender(){this.options.virtual=!1,this.graph.renderer.setRenderArea(void 0)}resetRenderArea(){if(this.options.virtual){const e=this.graph.getGraphArea();this.graph.renderer.setRenderArea(e)}}dispose(){this.stopListening()}}!function(n,e,t,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([gt.dispose()],wM.prototype,"dispose",null);class rX{constructor(){this.isFlushing=!1,this.isFlushPending=!1,this.scheduleId=0,this.queue=[],this.frameInterval=33,this.initialTime=Date.now()}queueJob(e){if(e.priority&tr.PRIOR)e.cb();else{const t=this.findInsertionIndex(e);t>=0&&this.queue.splice(t,0,e)}}queueFlush(){!this.isFlushing&&!this.isFlushPending&&(this.isFlushPending=!0,this.scheduleJob())}queueFlushSync(){!this.isFlushing&&!this.isFlushPending&&(this.isFlushPending=!0,this.flushJobsSync())}clearJobs(){this.queue.length=0,this.isFlushing=!1,this.isFlushPending=!1,this.cancelScheduleJob()}flushJobs(){this.isFlushPending=!1,this.isFlushing=!0;const e=this.getCurrentTime();let t;for(;t=this.queue.shift();){try{t.cb()}catch{}if(this.getCurrentTime()-e>=this.frameInterval)break}this.isFlushing=!1,this.queue.length&&this.queueFlush()}flushJobsSync(){let e;for(this.isFlushPending=!1,this.isFlushing=!0;e=this.queue.shift();)try{e.cb()}catch(t){console.log(t)}this.isFlushing=!1}findInsertionIndex(e){let t=0,r=this.queue.length,i=r-1;const s=e.priority;for(;t<=i;){const o=(i-t>>1)+t;s<=this.queue[o].priority?t=o+1:(r=o,i=o-1)}return r}scheduleJob(){"requestIdleCallback"in window?(this.scheduleId&&this.cancelScheduleJob(),this.scheduleId=window.requestIdleCallback(this.flushJobs.bind(this),{timeout:100})):(this.scheduleId&&this.cancelScheduleJob(),this.scheduleId=window.setTimeout(this.flushJobs.bind(this)))}cancelScheduleJob(){"cancelIdleCallback"in window?(this.scheduleId&&window.cancelIdleCallback(this.scheduleId),this.scheduleId=0):(this.scheduleId&&clearTimeout(this.scheduleId),this.scheduleId=0)}getCurrentTime(){return"object"==typeof performance&&"function"==typeof performance.now?performance.now():Date.now()-this.initialTime}}var tr=(()=>(function(n){n[n.RenderEdge=2]="RenderEdge",n[n.RenderNode=4]="RenderNode",n[n.Update=8]="Update",n[n.PRIOR=1048576]="PRIOR"}(tr||(tr={})),tr))();class ot extends qr{get model(){return this.graph.model}get container(){return this.graph.view.stage}constructor(e){super(),this.views={},this.willRemoveViews={},this.queue=new rX,this.graph=e,this.init()}init(){this.startListening()}startListening(){this.model.on("reseted",this.onModelReseted,this),this.model.on("cell:added",this.onCellAdded,this),this.model.on("cell:removed",this.onCellRemoved,this),this.model.on("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.on("cell:change:visible",this.onCellVisibleChanged,this)}stopListening(){this.model.off("reseted",this.onModelReseted,this),this.model.off("cell:added",this.onCellAdded,this),this.model.off("cell:removed",this.onCellRemoved,this),this.model.off("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.off("cell:change:visible",this.onCellVisibleChanged,this)}onModelReseted({options:e}){this.queue.clearJobs(),this.removeZPivots(),this.resetViews(),this.renderViews(this.model.getCells(),e)}onCellAdded({cell:e,options:t}){this.renderViews([e],t)}onCellRemoved({cell:e}){this.removeViews([e])}onCellZIndexChanged({cell:e,options:t}){const r=this.views[e.id];r&&this.requestViewUpdate(r.view,ot.FLAG_INSERT,t,tr.Update,!0)}onCellVisibleChanged({cell:e,current:t}){this.toggleVisible(e,!!t)}requestViewUpdate(e,t,r={},i=tr.Update,s=!0){const o=e.cell.id,a=this.views[o];if(!a)return;a.flag=t,a.options=r;const l=e.hasAction(t,["translate","resize","rotate"]);e.isNodeView()&&l&&(i=tr.PRIOR,s=!1),this.queue.queueJob({id:o,priority:i,cb:()=>{this.renderViewInArea(e,t,r)}}),this.getEffectedEdges(e).forEach(u=>{this.requestViewUpdate(u.view,u.flag,r,i,!1)}),s&&this.flush()}setRenderArea(e){this.renderArea=e,this.flushWaittingViews()}isViewMounted(e){if(null==e)return!1;const t=this.views[e.cell.id];return!!t&&t.state===ot.ViewState.MOUNTED}renderViews(e,t={}){e.sort((r,i)=>r.isNode()&&i.isEdge()?-1:0),e.forEach(r=>{const i=r.id;let o=0,a=this.views[i];if(a)o=ot.FLAG_INSERT;else{const l=this.createCellView(r);l&&(l.graph=this.graph,o=ot.FLAG_INSERT|l.getBootstrapFlag(),a={view:l,flag:o,options:t,state:ot.ViewState.CREATED},this.views[i]=a)}a&&this.requestViewUpdate(a.view,o,t,this.getRenderPriority(a.view),!1)}),this.flush()}renderViewInArea(e,t,r={}){const i=e.cell,s=i.id,o=this.views[s];if(!o)return;let a=0;this.isInRenderArea(e)||o.state===ot.ViewState.MOUNTED?(a=this.updateView(e,t,r),o.flag=a):o.state=ot.ViewState.WAITTING,a&&i.isEdge()&&!(a&e.getFlag(["source","target"]))&&this.queue.queueJob({id:s,priority:tr.RenderEdge,cb:()=>{this.updateView(e,t,r)}})}removeViews(e){e.forEach(t=>{const r=t.id,i=this.views[r];i&&(this.willRemoveViews[r]=i,delete this.views[r],this.queue.queueJob({id:r,priority:this.getRenderPriority(i.view),cb:()=>{this.removeView(i.view)}}))}),this.flush()}flush(){this.graph.options.async?this.queue.queueFlush():this.queue.queueFlushSync()}flushWaittingViews(){const e=Object.keys(this.views);for(let t=0,r=e.length;t<r;t+=1){const i=this.views[e[t]];if(i&&i.state===ot.ViewState.WAITTING){const{view:s,flag:o,options:a}=i;this.requestViewUpdate(s,o,a,this.getRenderPriority(s),!1)}}this.flush()}updateView(e,t,r={}){if(null==e)return 0;if(Tt.isCellView(e)){if(t&ot.FLAG_REMOVE)return this.removeView(e.cell),0;t&ot.FLAG_INSERT&&(this.insertView(e),t^=ot.FLAG_INSERT)}return t?e.confirmUpdate(t,r):0}insertView(e){const t=this.views[e.cell.id];if(t){const r=e.cell.getZIndex(),i=this.addZPivot(r);this.container.insertBefore(e.container,i),e.cell.isVisible()||this.toggleVisible(e.cell,!1),t.state=ot.ViewState.MOUNTED}}resetViews(){this.willRemoveViews=Object.assign({},this.views),Object.keys(this.willRemoveViews).forEach(e=>{const t=this.willRemoveViews[e];t&&this.removeView(t.view)}),this.views={},this.willRemoveViews={}}removeView(e){const t=e.cell;e&&(this.willRemoveViews[t.id].view.remove(),delete this.willRemoveViews[t.id])}toggleVisible(e,t){const r=this.model.getConnectedEdges(e);for(let s=0,o=r.length;s<o;s+=1){const a=r[s];if(t){const l=a.getSourceCell(),c=a.getTargetCell();if(l&&!l.isVisible()||c&&!c.isVisible())continue;this.toggleVisible(a,!0)}else this.toggleVisible(a,!1)}const i=this.views[e.id];i&&cl(i.view.container,{display:t?"unset":"none"})}addZPivot(e=0){null==this.zPivots&&(this.zPivots={});const t=this.zPivots;let r=t[e];if(r)return r;r=t[e]=document.createComment(`z-index:${e+1}`);let i=-1/0;for(const o in t){const a=+o;a<e&&a>i&&(i=a)}const s=this.container;return s.insertBefore(r,i!==-1/0?t[i].nextSibling:s.firstChild),r}removeZPivots(){this.zPivots&&Object.keys(this.zPivots).forEach(e=>{const t=this.zPivots[e];t&&t.parentNode&&t.parentNode.removeChild(t)}),this.zPivots={}}createCellView(e){const t=this.graph.options.createCellView;if(t){const s=Z(t,this.graph,e);if(s||null===s)return s}const r=e.view,i={graph:this.graph};if(null!=r&&"string"==typeof r){const s=Tt.registry.get(r);return s?new s(e,i):Tt.registry.onNotFound(r)}return e.isNode()?new nn(e,i):e.isEdge()?new _r(e,i):null}getEffectedEdges(e){const t=[],r=e.cell,i=this.model.getConnectedEdges(r);for(let s=0,o=i.length;s<o;s+=1){const a=i[s],l=this.views[a.id];if(!l)continue;const c=l.view,u=["update"];a.getTargetCell()===r&&u.push("target"),a.getSourceCell()===r&&u.push("source"),t.push({id:a.id,view:c,flag:c.getFlag(u)})}return t}isInRenderArea(e){return!this.renderArea||this.renderArea.isIntersectWithRect(e.cell.getBBox())}getRenderPriority(e){return e.cell.isNode()?tr.RenderNode:tr.RenderEdge}dispose(){this.stopListening()}}(function(n,e,t,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)})([qr.dispose()],ot.prototype,"dispose",null),function(n){n.FLAG_INSERT=1<<30,n.FLAG_REMOVE=1<<29,n.FLAG_RENDER=67108863}(ot||(ot={})),function(n){let e;var t;(t=e=n.ViewState||(n.ViewState={}))[t.CREATED=0]="CREATED",t[t.MOUNTED=1]="MOUNTED",t[t.WAITTING=2]="WAITTING"}(ot||(ot={}));class Zm extends gt{constructor(){super(...arguments),this.schedule=new ot(this.graph)}requestViewUpdate(e,t,r={}){this.schedule.requestViewUpdate(e,t,r)}isViewMounted(e){return this.schedule.isViewMounted(e)}setRenderArea(e){this.schedule.setRenderArea(e)}findViewByElem(e){if(null==e)return null;const r="string"==typeof e?this.options.container.querySelector(e):e instanceof Element?e:e[0];if(r){const i=this.graph.view.findAttr("data-cell-id",r);if(i){const s=this.schedule.views;if(s[i])return s[i].view}}return null}findViewByCell(e){if(null==e)return null;const t=ae.isCell(e)?e.id:e,r=this.schedule.views;return r[t]?r[t].view:null}findViewsFromPoint(e){const t={x:e.x,y:e.y};return this.model.getCells().map(r=>this.findViewByCell(r)).filter(r=>null!=r&&ve.getBBox(r.container,{target:this.view.stage}).containsPoint(t))}findViewsInArea(e,t={}){const r=P.create(e);return this.model.getNodes().map(i=>this.findViewByCell(i)).filter(i=>{if(i){const s=ve.getBBox(i.container,{target:this.graph.view.stage});return t.strict?r.containsRect(s):r.isIntersectWithRect(s)}return!1})}findEdgeViewsInArea(e,t={}){const r=P.create(e);return this.model.getEdges().map(i=>this.findViewByCell(i)).filter(i=>{if(i){const s=ve.getBBox(i.container,{target:this.view.stage});return 0===s.width?s.inflate(1,0):0===s.height&&s.inflate(0,1),t.strict?r.containsRect(s):r.isIntersectWithRect(s)}return!1})}dispose(){this.schedule.dispose()}}!function(n,e,t,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([gt.dispose()],Zm.prototype,"dispose",null);var CM=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t};class DM extends gt{get cid(){return this.graph.view.cid}get svg(){return this.view.svg}get defs(){return this.view.defs}isDefined(e){return null!=this.svg.getElementById(e)}filter(e){let t=e.id;const r=e.name;if(t||(t=`filter-${r}-${this.cid}-${pm(JSON.stringify(e))}`),!this.isDefined(t)){const i=mo.registry.get(r);if(null==i)return mo.registry.onNotFound(r);const s=i(e.args||{}),o=Object.assign(Object.assign({x:-1,y:-1,width:3,height:3,filterUnits:"objectBoundingBox"},e.attrs),{id:t});W.create(Ae.sanitize(s),o).appendTo(this.defs)}return t}gradient(e){let t=e.id;const r=e.type;if(t||(t=`gradient-${r}-${this.cid}-${pm(JSON.stringify(e))}`),!this.isDefined(t)){const o=`<${r}>${e.stops.map(l=>{const c=null!=l.opacity&&Number.isFinite(l.opacity)?l.opacity:1;return`<stop offset="${l.offset}" stop-color="${l.color}" stop-opacity="${c}"/>`}).join("")}</${r}>`,a=Object.assign({id:t},e.attrs);W.create(o,a).appendTo(this.defs)}return t}marker(e){const{id:t,refX:r,refY:i,markerUnits:s,markerOrient:o,tagName:a,children:l}=e,c=CM(e,["id","refX","refY","markerUnits","markerOrient","tagName","children"]);let u=t;if(u||(u=`marker-${this.cid}-${pm(JSON.stringify(e))}`),!this.isDefined(u)){"path"!==a&&delete c.d;const d=W.create("marker",{refX:r,refY:i,id:u,overflow:"visible",orient:o??"auto",markerUnits:s||"userSpaceOnUse"},l?l.map(h=>{var{tagName:f}=h,g=CM(h,["tagName"]);return W.create(`${f}`||"path",ll(Object.assign(Object.assign({},c),g)))}):[W.create(a||"path",ll(c))]);this.defs.appendChild(d.node)}return u}remove(e){const t=this.svg.getElementById(e);t&&t.parentNode&&t.parentNode.removeChild(t)}}class xM extends gt{getClientMatrix(){return ht(this.view.stage.getScreenCTM())}getClientOffset(){const e=this.view.svg.getBoundingClientRect();return new C(e.left,e.top)}getPageOffset(){return this.getClientOffset().translate(window.scrollX,window.scrollY)}snapToGrid(e,t){return("number"==typeof e?this.clientToLocalPoint(e,t):this.clientToLocalPoint(e.x,e.y)).snapToGrid(this.graph.getGridSize())}localToGraphPoint(e,t){const r=C.create(e,t);return ve.transformPoint(r,this.graph.matrix())}localToClientPoint(e,t){const r=C.create(e,t);return ve.transformPoint(r,this.getClientMatrix())}localToPagePoint(e,t){return("number"==typeof e?this.localToGraphPoint(e,t):this.localToGraphPoint(e)).translate(this.getPageOffset())}localToGraphRect(e,t,r,i){const s=P.create(e,t,r,i);return ve.transformRectangle(s,this.graph.matrix())}localToClientRect(e,t,r,i){const s=P.create(e,t,r,i);return ve.transformRectangle(s,this.getClientMatrix())}localToPageRect(e,t,r,i){return("number"==typeof e?this.localToGraphRect(e,t,r,i):this.localToGraphRect(e)).translate(this.getPageOffset())}graphToLocalPoint(e,t){const r=C.create(e,t);return ve.transformPoint(r,this.graph.matrix().inverse())}clientToLocalPoint(e,t){const r=C.create(e,t);return ve.transformPoint(r,this.getClientMatrix().inverse())}clientToGraphPoint(e,t){const r=C.create(e,t);return ve.transformPoint(r,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}pageToLocalPoint(e,t){const i=C.create(e,t).diff(this.getPageOffset());return this.graphToLocalPoint(i)}graphToLocalRect(e,t,r,i){const s=P.create(e,t,r,i);return ve.transformRectangle(s,this.graph.matrix().inverse())}clientToLocalRect(e,t,r,i){const s=P.create(e,t,r,i);return ve.transformRectangle(s,this.getClientMatrix().inverse())}clientToGraphRect(e,t,r,i){const s=P.create(e,t,r,i);return ve.transformRectangle(s,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}pageToLocalRect(e,t,r,i){const s=P.create(e,t,r,i),o=this.getPageOffset();return s.x-=o.x,s.y-=o.y,this.graphToLocalRect(s)}}class _d extends gt{constructor(){super(...arguments),this.highlights={}}init(){this.startListening()}startListening(){this.graph.on("cell:highlight",this.onCellHighlight,this),this.graph.on("cell:unhighlight",this.onCellUnhighlight,this)}stopListening(){this.graph.off("cell:highlight",this.onCellHighlight,this),this.graph.off("cell:unhighlight",this.onCellUnhighlight,this)}onCellHighlight({view:e,magnet:t,options:r={}}){const i=this.resolveHighlighter(r);if(!i)return;const s=this.getHighlighterId(t,i);if(!this.highlights[s]){const o=i.highlighter;o.highlight(e,t,Object.assign({},i.args)),this.highlights[s]={cellView:e,magnet:t,highlighter:o,args:i.args}}}onCellUnhighlight({magnet:e,options:t={}}){const r=this.resolveHighlighter(t);if(!r)return;const i=this.getHighlighterId(e,r);this.unhighlight(i)}resolveHighlighter(e){const t=this.options;let r=e.highlighter;if(null==r){const a=e.type;r=a&&t.highlighting[a]||t.highlighting.default}if(null==r)return null;const i="string"==typeof r?{name:r}:r,s=i.name,o=xr.registry.get(s);return null==o?xr.registry.onNotFound(s):(xr.check(s,o),{name:s,highlighter:o,args:i.args||{}})}getHighlighterId(e,t){return wm(e),t.name+e.id+JSON.stringify(t.args)}unhighlight(e){const t=this.highlights[e];t&&(t.highlighter.unhighlight(t.cellView,t.magnet,t.args),delete this.highlights[e])}dispose(){Object.keys(this.highlights).forEach(e=>this.unhighlight(e)),this.stopListening()}}!function(n,e,t,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([_d.dispose()],_d.prototype,"dispose",null);class EM extends gt{getScroller(){const e=this.graph.getPlugin("scroller");return e&&e.options.enabled?e:null}getContainer(){const e=this.getScroller();return e?e.container.parentElement:this.graph.container.parentElement}getSensorTarget(){const e=this.options.autoResize;if(e)return"boolean"==typeof e?this.getContainer():e}init(){if(this.options.autoResize){const t=this.getSensorTarget();t&&od.bind(t,()=>{this.resize(t.offsetWidth,t.offsetHeight)})}}resize(e,t){const r=this.getScroller();r?r.resize(e,t):this.graph.transform.resize(e,t)}dispose(){od.clear(this.graph.container)}}!function(n,e,t,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([gt.dispose()],EM.prototype,"dispose",null);class Pt extends pn{get container(){return this.options.container}get[Symbol.toStringTag](){return Pt.toStringTag}constructor(e){super(),this.installedPlugins=new Set,this.options=Ml.get(e),this.css=new Gm(this),this.view=new er(this),this.defs=new DM(this),this.coord=new xM(this),this.transform=new vM(this),this.highlight=new _d(this),this.grid=new qm(this),this.background=new Wm(this),this.options.model?this.model=this.options.model:(this.model=new Sr,this.model.graph=this),this.renderer=new Zm(this),this.panning=new bM(this),this.mousewheel=new Ym(this),this.virtualRender=new wM(this),this.size=new EM(this)}isNode(e){return e.isNode()}isEdge(e){return e.isEdge()}resetCells(e,t={}){return this.model.resetCells(e,t),this}clearCells(e={}){return this.model.clear(e),this}toJSON(e={}){return this.model.toJSON(e)}parseJSON(e){return this.model.parseJSON(e)}fromJSON(e,t={}){return this.model.fromJSON(e,t),this}getCellById(e){return this.model.getCell(e)}addNode(e,t={}){return this.model.addNode(e,t)}addNodes(e,t={}){return this.addCell(e.map(r=>et.isNode(r)?r:this.createNode(r)),t)}createNode(e){return this.model.createNode(e)}removeNode(e,t={}){return this.model.removeCell(e,t)}addEdge(e,t={}){return this.model.addEdge(e,t)}addEdges(e,t={}){return this.addCell(e.map(r=>We.isEdge(r)?r:this.createEdge(r)),t)}removeEdge(e,t={}){return this.model.removeCell(e,t)}createEdge(e){return this.model.createEdge(e)}addCell(e,t={}){return this.model.addCell(e,t),this}removeCell(e,t={}){return this.model.removeCell(e,t)}removeCells(e,t={}){return this.model.removeCells(e,t)}removeConnectedEdges(e,t={}){return this.model.removeConnectedEdges(e,t)}disconnectConnectedEdges(e,t={}){return this.model.disconnectConnectedEdges(e,t),this}hasCell(e){return this.model.has(e)}getCells(){return this.model.getCells()}getCellCount(){return this.model.total()}getNodes(){return this.model.getNodes()}getEdges(){return this.model.getEdges()}getOutgoingEdges(e){return this.model.getOutgoingEdges(e)}getIncomingEdges(e){return this.model.getIncomingEdges(e)}getConnectedEdges(e,t={}){return this.model.getConnectedEdges(e,t)}getRootNodes(){return this.model.getRoots()}getLeafNodes(){return this.model.getLeafs()}isRootNode(e){return this.model.isRoot(e)}isLeafNode(e){return this.model.isLeaf(e)}getNeighbors(e,t={}){return this.model.getNeighbors(e,t)}isNeighbor(e,t,r={}){return this.model.isNeighbor(e,t,r)}getSuccessors(e,t={}){return this.model.getSuccessors(e,t)}isSuccessor(e,t,r={}){return this.model.isSuccessor(e,t,r)}getPredecessors(e,t={}){return this.model.getPredecessors(e,t)}isPredecessor(e,t,r={}){return this.model.isPredecessor(e,t,r)}getCommonAncestor(...e){return this.model.getCommonAncestor(...e)}getSubGraph(e,t={}){return this.model.getSubGraph(e,t)}cloneSubGraph(e,t={}){return this.model.cloneSubGraph(e,t)}cloneCells(e){return this.model.cloneCells(e)}getNodesFromPoint(e,t){return this.model.getNodesFromPoint(e,t)}getNodesInArea(e,t,r,i,s){return this.model.getNodesInArea(e,t,r,i,s)}getNodesUnderNode(e,t={}){return this.model.getNodesUnderNode(e,t)}searchCell(e,t,r={}){return this.model.search(e,t,r),this}getShortestPath(e,t,r={}){return this.model.getShortestPath(e,t,r)}getAllCellsBBox(){return this.model.getAllCellsBBox()}getCellsBBox(e,t={}){return this.model.getCellsBBox(e,t)}startBatch(e,t={}){this.model.startBatch(e,t)}stopBatch(e,t={}){this.model.stopBatch(e,t)}batchUpdate(e,t,r){const i="string"==typeof e?e:"update",s="string"==typeof e?t:e,o="function"==typeof t?r:t;this.startBatch(i,o);const a=s();return this.stopBatch(i,o),a}updateCellId(e,t){return this.model.updateCellId(e,t)}findView(e){return ae.isCell(e)?this.findViewByCell(e):this.findViewByElem(e)}findViews(e){return P.isRectangleLike(e)?this.findViewsInArea(e):C.isPointLike(e)?this.findViewsFromPoint(e):[]}findViewByCell(e){return this.renderer.findViewByCell(e)}findViewByElem(e){return this.renderer.findViewByElem(e)}findViewsFromPoint(e,t){return this.renderer.findViewsFromPoint("number"==typeof e?{x:e,y:t}:e)}findViewsInArea(e,t,r,i,s){return this.renderer.findViewsInArea("number"==typeof e?{x:e,y:t,width:r,height:i}:e,"number"==typeof e?s:t)}matrix(e){return typeof e>"u"?this.transform.getMatrix():(this.transform.setMatrix(e),this)}resize(e,t){const r=this.getPlugin("scroller");return r?r.resize(e,t):this.transform.resize(e,t),this}scale(e,t=e,r=0,i=0){return typeof e>"u"?this.transform.getScale():(this.transform.scale(e,t,r,i),this)}zoom(e,t){const r=this.getPlugin("scroller");if(r){if(typeof e>"u")return r.zoom();r.zoom(e,t)}else{if(typeof e>"u")return this.transform.getZoom();this.transform.zoom(e,t)}return this}zoomTo(e,t={}){const r=this.getPlugin("scroller");return r?r.zoom(e,Object.assign(Object.assign({},t),{absolute:!0})):this.transform.zoom(e,Object.assign(Object.assign({},t),{absolute:!0})),this}zoomToRect(e,t={}){const r=this.getPlugin("scroller");return r?r.zoomToRect(e,t):this.transform.zoomToRect(e,t),this}zoomToFit(e={}){const t=this.getPlugin("scroller");return t?t.zoomToFit(e):this.transform.zoomToFit(e),this}rotate(e,t,r){return typeof e>"u"?this.transform.getRotation():(this.transform.rotate(e,t,r),this)}translate(e,t){return typeof e>"u"?this.transform.getTranslation():(this.transform.translate(e,t),this)}translateBy(e,t){const r=this.translate();return this.translate(r.tx+e,r.ty+t)}getGraphArea(){return this.transform.getGraphArea()}getContentArea(e={}){return this.transform.getContentArea(e)}getContentBBox(e={}){return this.transform.getContentBBox(e)}fitToContent(e,t,r,i){return this.transform.fitToContent(e,t,r,i)}scaleContentToFit(e={}){return this.transform.scaleContentToFit(e),this}center(e){return this.centerPoint(e)}centerPoint(e,t,r){const i=this.getPlugin("scroller");return i?i.centerPoint(e,t,r):this.transform.centerPoint(e,t),this}centerContent(e){const t=this.getPlugin("scroller");return t?t.centerContent(e):this.transform.centerContent(e),this}centerCell(e,t){const r=this.getPlugin("scroller");return r?r.centerCell(e,t):this.transform.centerCell(e),this}positionPoint(e,t,r,i={}){const s=this.getPlugin("scroller");return s?s.positionPoint(e,t,r,i):this.transform.positionPoint(e,t,r),this}positionRect(e,t,r){const i=this.getPlugin("scroller");return i?i.positionRect(e,t,r):this.transform.positionRect(e,t),this}positionCell(e,t,r){const i=this.getPlugin("scroller");return i?i.positionCell(e,t,r):this.transform.positionCell(e,t),this}positionContent(e,t){const r=this.getPlugin("scroller");return r?r.positionContent(e,t):this.transform.positionContent(e,t),this}snapToGrid(e,t){return this.coord.snapToGrid(e,t)}pageToLocal(e,t,r,i){return P.isRectangleLike(e)?this.coord.pageToLocalRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof r&&"number"==typeof i?this.coord.pageToLocalRect(e,t,r,i):this.coord.pageToLocalPoint(e,t)}localToPage(e,t,r,i){return P.isRectangleLike(e)?this.coord.localToPageRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof r&&"number"==typeof i?this.coord.localToPageRect(e,t,r,i):this.coord.localToPagePoint(e,t)}clientToLocal(e,t,r,i){return P.isRectangleLike(e)?this.coord.clientToLocalRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof r&&"number"==typeof i?this.coord.clientToLocalRect(e,t,r,i):this.coord.clientToLocalPoint(e,t)}localToClient(e,t,r,i){return P.isRectangleLike(e)?this.coord.localToClientRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof r&&"number"==typeof i?this.coord.localToClientRect(e,t,r,i):this.coord.localToClientPoint(e,t)}localToGraph(e,t,r,i){return P.isRectangleLike(e)?this.coord.localToGraphRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof r&&"number"==typeof i?this.coord.localToGraphRect(e,t,r,i):this.coord.localToGraphPoint(e,t)}graphToLocal(e,t,r,i){return P.isRectangleLike(e)?this.coord.graphToLocalRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof r&&"number"==typeof i?this.coord.graphToLocalRect(e,t,r,i):this.coord.graphToLocalPoint(e,t)}clientToGraph(e,t,r,i){return P.isRectangleLike(e)?this.coord.clientToGraphRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof r&&"number"==typeof i?this.coord.clientToGraphRect(e,t,r,i):this.coord.clientToGraphPoint(e,t)}defineFilter(e){return this.defs.filter(e)}defineGradient(e){return this.defs.gradient(e)}defineMarker(e){return this.defs.marker(e)}getGridSize(){return this.grid.getGridSize()}setGridSize(e){return this.grid.setGridSize(e),this}showGrid(){return this.grid.show(),this}hideGrid(){return this.grid.hide(),this}clearGrid(){return this.grid.clear(),this}drawGrid(e){return this.grid.draw(e),this}updateBackground(){return this.background.update(),this}drawBackground(e,t){const r=this.getPlugin("scroller");return null==r||null!=this.options.background&&t?this.background.draw(e):r.drawBackground(e,t),this}clearBackground(e){const t=this.getPlugin("scroller");return null==t||null!=this.options.background&&e?this.background.clear():t.clearBackground(e),this}enableVirtualRender(){return this.virtualRender.enableVirtualRender(),this}disableVirtualRender(){return this.virtualRender.disableVirtualRender(),this}isMouseWheelEnabled(){return!this.mousewheel.disabled}enableMouseWheel(){return this.mousewheel.enable(),this}disableMouseWheel(){return this.mousewheel.disable(),this}toggleMouseWheel(e){return null==e?this.isMouseWheelEnabled()?this.disableMouseWheel():this.enableMouseWheel():e?this.enableMouseWheel():this.disableMouseWheel(),this}isPannable(){const e=this.getPlugin("scroller");return e?e.isPannable():this.panning.pannable}enablePanning(){const e=this.getPlugin("scroller");return e?e.enablePanning():this.panning.enablePanning(),this}disablePanning(){const e=this.getPlugin("scroller");return e?e.disablePanning():this.panning.disablePanning(),this}togglePanning(e){return null==e?this.isPannable()?this.disablePanning():this.enablePanning():e!==this.isPannable()&&(e?this.enablePanning():this.disablePanning()),this}use(e,...t){return this.installedPlugins.has(e)||(this.installedPlugins.add(e),e.init(this,...t)),this}getPlugin(e){return Array.from(this.installedPlugins).find(t=>t.name===e)}getPlugins(e){return Array.from(this.installedPlugins).filter(t=>e.includes(t.name))}disablePlugins(e){let t=e;return Array.isArray(t)||(t=[t]),this.getPlugins(t)?.forEach(i=>{var s;null===(s=i?.disable)||void 0===s||s.call(i)}),this}enablePlugins(e){let t=e;return Array.isArray(t)||(t=[t]),this.getPlugins(t)?.forEach(i=>{var s;null===(s=i?.enable)||void 0===s||s.call(i)}),this}disposePlugins(e){let t=e;return Array.isArray(t)||(t=[t]),this.getPlugins(t)?.forEach(i=>{i.dispose()}),this}isPluginEnabled(e){var t;const r=this.getPlugin(e);return null===(t=r?.isEnabled)||void 0===t?void 0:t.call(r)}dispose(){this.clearCells(),this.off(),this.css.dispose(),this.defs.dispose(),this.grid.dispose(),this.coord.dispose(),this.transform.dispose(),this.highlight.dispose(),this.background.dispose(),this.mousewheel.dispose(),this.panning.dispose(),this.view.dispose(),this.renderer.dispose(),this.installedPlugins.forEach(e=>{e.dispose()})}}(function(n,e,t,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)})([pn.dispose()],Pt.prototype,"dispose",null),function(n){n.View=er,n.Renderer=Zm,n.MouseWheel=Ym,n.DefsManager=DM,n.GridManager=qm,n.CoordManager=xM,n.TransformManager=vM,n.HighlightManager=_d,n.BackgroundManager=Wm}(Pt||(Pt={})),function(n){n.toStringTag=`X6.${n.name}`,n.isGraph=function e(t){if(null==t)return!1;if(t instanceof n)return!0;const r=t[Symbol.toStringTag];return null==r||r===n.toStringTag}}(Pt||(Pt={})),function(n){n.render=function e(t,r){const i=t instanceof HTMLElement?new n({container:t}):new n(t);return null!=r&&i.fromJSON(r),i}}(Pt||(Pt={})),function(n){n.registerNode=et.registry.register,n.registerEdge=We.registry.register,n.registerView=Tt.registry.register,n.registerAttr=Qn.registry.register,n.registerGrid=Qr.registry.register,n.registerFilter=mo.registry.register,n.registerNodeTool=wo.registry.register,n.registerEdgeTool=Co.registry.register,n.registerBackground=bl.registry.register,n.registerHighlighter=xr.registry.register,n.registerPortLayout=qi.registry.register,n.registerPortLabelLayout=vo.registry.register,n.registerMarker=ti.registry.register,n.registerRouter=oi.registry.register,n.registerConnector=Wi.registry.register,n.registerAnchor=Do.registry.register,n.registerEdgeAnchor=xo.registry.register,n.registerConnectionPoint=Eo.registry.register}(Pt||(Pt={})),function(n){n.unregisterNode=et.registry.unregister,n.unregisterEdge=We.registry.unregister,n.unregisterView=Tt.registry.unregister,n.unregisterAttr=Qn.registry.unregister,n.unregisterGrid=Qr.registry.unregister,n.unregisterFilter=mo.registry.unregister,n.unregisterNodeTool=wo.registry.unregister,n.unregisterEdgeTool=Co.registry.unregister,n.unregisterBackground=bl.registry.unregister,n.unregisterHighlighter=xr.registry.unregister,n.unregisterPortLayout=qi.registry.unregister,n.unregisterPortLabelLayout=vo.registry.unregister,n.unregisterMarker=ti.registry.unregister,n.unregisterRouter=oi.registry.unregister,n.unregisterConnector=Wi.registry.unregister,n.unregisterAnchor=Do.registry.unregister,n.unregisterEdgeAnchor=xo.registry.unregister,n.unregisterConnectionPoint=Eo.registry.unregister}(Pt||(Pt={}));class To extends et{}(function(n){class e extends nn{init(){super.init(),this.cell.on("change:*",({key:r})=>{const i=n.shapeMaps[this.cell.shape];if(i){const{effect:s}=i;(!s||s.includes(r))&&this.renderHTMLComponent()}})}confirmUpdate(r){const i=super.confirmUpdate(r);return this.handleAction(i,e.action,()=>this.renderHTMLComponent())}renderHTMLComponent(){const r=this.selectors&&this.selectors.foContent;if(r){ol(r);const i=n.shapeMaps[this.cell.shape];if(!i)return;let{html:s}=i;"function"==typeof s&&(s=s(this.cell)),s&&("string"==typeof s?r.innerHTML=s:al(r,s))}}}var t;n.View=e,(t=e=n.View||(n.View={})).action="html",t.config({bootstrap:[t.action],actions:{html:t.action}}),nn.registry.register("html-view",t,!0)})(To||(To={})),function(n){n.config({view:"html-view",markup:[{tagName:"rect",selector:"body"},Object.assign({},Ae.getForeignObjectMarkup()),{tagName:"text",selector:"label"}],attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}}}),et.registry.register("html",n,!0)}(To||(To={})),function(n){n.shapeMaps={},n.register=function e(t){const{shape:r,html:i,effect:s,inherit:o}=t,a=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(t,["shape","html","effect","inherit"]);if(!r)throw new Error("should specify shape in config");n.shapeMaps[r]={html:i,effect:s},Pt.registerNode(r,Object.assign({inherit:o||"html"},a),!0)}}(To||(To={}));var uX=Math.floor,dX=Math.random;const _M=function pX(n){return n?1/0===(n=zs(n))||-1/0===n?17976931348623157e292*(n<0?-1:1):n==n?n:0:0===n?n:0};var mX=parseFloat,yX=Math.min,vX=Math.random;const Ad=function bX(n,e,t){if(t&&"boolean"!=typeof t&&tl(n,e,t)&&(e=t=void 0),void 0===t&&("boolean"==typeof e?(t=e,e=void 0):"boolean"==typeof n&&(t=n,n=void 0)),void 0===n&&void 0===e?(n=0,e=1):(n=_M(n),void 0===e?(e=n,n=0):e=_M(e)),n>e){var r=n;n=e,e=r}if(t||n%1||e%1){var i=vX();return yX(n+i*(e-n+mX("1e-"+((i+"").length-1))),e)}return function hX(n,e){return n+uX(dX()*(e-n+1))}(n,e)};class Tl{constructor(e){this.cdr=e,this.transition=!1}ngAfterViewInit(){setTimeout(()=>{this.transition=!0,this.cdr.detectChanges()},100)}ngOnChanges(e){console.log(e)}}Tl.\u0275fac=function(e){return new(e||Tl)($(Yc))},Tl.\u0275cmp=Vo({type:Tl,selectors:[["app-node"]],inputs:{value:"value"},features:[Nr],decls:4,vars:3,consts:[[1,"component-container"],[1,"value"]],template:function(e,t){1&e&&(ut(0,"section",0),jt(1," component: "),ut(2,"span",1),jt(3),Ft()()),2&e&&(Wf("transition",t.transition),vf(3),Oc(t.value))},styles:[".component-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border:2px solid red;height:100%;width:100%;transition:all ease .5s;transform:scale(2)}.component-container.transition[_ngcontent-%COMP%]{border-color:#000;transform:scale(1)}.component-container[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:gray}"]});class AM extends et{}!function(n){function e(t){const r=[],i=Ae.getForeignObjectMarkup();return t?r.push({tagName:t,selector:"body"},i):r.push(i),r}n.config({view:"angular-shape-view",markup:e(),attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}},propHooks(t){if(null==t.markup){const r=t.primer;if(r){t.markup=e(r);let i={};switch(r){case"circle":i={refCx:"50%",refCy:"50%",refR:"50%"};break;case"ellipse":i={refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}}t.attrs=ze({},{body:{refWidth:null,refHeight:null,...i}},t.attrs||{})}}return t}}),et.registry.register("angular-shape",n,!0)}(AM||(AM={}));const MM=new Map;function TM(n){const{shape:e,injector:t,content:r,...i}=n;MM.set(e,{injector:t,content:r}),Pt.registerNode(e,{injector:t,content:r,inherit:"angular-shape",...i},!0)}class Md extends nn{getNodeContainer(){return this.selectors?.foContent}confirmUpdate(e){const t=super.confirmUpdate(e);return this.handleAction(t,Md.action,()=>this.renderAngularContent())}getNgArguments(){return this.cell.data?.ngArguments||{}}setInstanceInput(e,t){const r=this.getNgArguments();if(e instanceof Tn)t.context={ngArguments:r};else{const i=t;Object.keys(r).forEach(s=>i.setInput(s,r[s])),i.changeDetectorRef.detectChanges()}}renderAngularContent(){this.unmountAngularContent();const e=this.getNodeContainer();if(e){const t=this.cell,{injector:r,content:i}=MM.get(t.shape),s=r.get(un);if(i instanceof Tn){const o=this.getNgArguments(),a=s.createEmbeddedView(i,{ngArguments:o});a.rootNodes.forEach(l=>e.appendChild(l)),a.detectChanges(),t.on("change:data",()=>this.setInstanceInput(i,a))}else{const o=s.createComponent(i);e.appendChild(o.hostView.rootNodes[0]),this.setInstanceInput(i,o),t.on("change:data",()=>this.setInstanceInput(i,o))}}}unmountAngularContent(){const e=this.getNodeContainer();return e.innerHTML="",e}onMouseDown(e,t,r){const i=e.target;if("input"===i.tagName.toLowerCase()){const o=i.getAttribute("type");if(null==o||["text","password","number","email","search","tel","url"].includes(o))return}super.onMouseDown(e,t,r)}unmount(){return this.unmountAngularContent(),super.unmount(),this}}!function(n){n.action="angular",n.config({bootstrap:[n.action],actions:{component:n.action}}),nn.registry.register("angular-shape-view",n,!0)}(Md||(Md={}));const wX=["container"],CX=["template"];function DX(n,e){if(1&n&&(ut(0,"section",9),jt(1," template: "),ut(2,"span",10),jt(3),Ft()()),2&n){const t=e.ngArguments;vf(3),Oc(t.value)}}class Pl{addComponent(){if(!this.hasRegisterComponent)return void alert("\u8bf7\u5148\u6ce8\u518c Angular Component!");const e=Ad(0,1e3),t=Ad(0,600);this.graph.addNode({id:""+ ++this.idCount,shape:"custom-angular-component-node",x:e,y:t,data:{ngArguments:{value:`${this.idCount}`}}})}addTemplate(){if(!this.hasRegisterTemplate)return void alert("\u8bf7\u5148\u6ce8\u518c Angular Template!");const e=Ad(0,1e3),t=Ad(0,600);this.graph.addNode({id:""+ ++this.idCount,shape:"custom-angular-template-node",x:e,y:t,data:{ngArguments:{value:`${this.idCount}`}}})}doRegisterComponent(){this.hasRegisterComponent?alert("\u8bf7\u52ff\u91cd\u590d\u6ce8\u518c Angular Component!"):(TM({shape:"custom-angular-component-node",width:120,height:20,content:Tl,injector:this.injector}),this.hasRegisterComponent=!0)}doRegisterTemplate(){this.hasRegisterTemplate?alert("\u8bf7\u52ff\u91cd\u590d\u6ce8\u518c!"):(TM({shape:"custom-angular-template-node",width:120,height:20,content:this.template,injector:this.injector}),this.hasRegisterTemplate=!0)}updateComponentValue(e,t){if(!e)return void alert("\u8bf7\u8f93\u5165\u9700\u8981\u67e5\u627e\u7684\u8282\u70b9id!");if(!t)return void alert("\u8bf7\u8f93\u5165\u9700\u8981\u66ff\u6362\u7684\u65b0\u6587\u672c!");const r=this.graph.getCellById(e);r?r.setData({ngArguments:{value:t}}):alert("\u672a\u67e5\u8be2\u5230\u8be5\u8282\u70b9!")}constructor(e){this.injector=e,this.hasRegisterComponent=!1,this.hasRegisterTemplate=!1,this.idCount=0}ngAfterViewInit(){this.graph=new Pt({container:this.container.nativeElement,width:1e3,height:600,background:{color:"#F2F7FA"}})}}Pl.\u0275fac=function(e){return new(e||Pl)($(_n))},Pl.\u0275cmp=Vo({type:Pl,selectors:[["app-root"]],viewQuery:function(e,t){if(1&e&&(hg(wX,5),hg(CX,5)),2&e){let r;Bc(r=$c())&&(t.container=r.first),Bc(r=$c())&&(t.template=r.first)}},decls:38,vars:0,consts:[[1,"header"],["type","button",3,"click"],["type","text","placeholder","\u67e5\u627e\u7684\u8282\u70b9\u5e8f\u53f7"],["id",""],["type","text","placeholder","\u66ff\u6362\u7684\u65b0\u5185\u5bb9"],["text",""],["id","container"],["container",""],["template",""],[1,"template-container"],[1,"value"]],template:function(e,t){if(1&e){const r=function T0(){return _()}();ut(0,"section",0)(1,"table")(2,"tr")(3,"th"),jt(4,"\u4ecb\u7ecd"),Ft(),ut(5,"th"),jt(6,"\u64cd\u4f5c"),Ft()(),ut(7,"tr")(8,"td"),jt(9,"\u521d\u59cb\u5316\u6ce8\u518c"),Ft(),ut(10,"td")(11,"button",1),Fr("click",function(){return t.doRegisterComponent()}),jt(12,"\u6ce8\u518cAngular Component"),Ft(),ut(13,"button",1),Fr("click",function(){return t.doRegisterTemplate()}),jt(14,"\u6ce8\u518cAngular Template"),Ft()()(),ut(15,"tr")(16,"td"),jt(17,"\u6dfb\u52a0\u8282\u70b9"),Ft(),ut(18,"td")(19,"button",1),Fr("click",function(){return t.addComponent()}),jt(20,"\u6dfb\u52a0Angular Component"),Ft(),ut(21,"button",1),Fr("click",function(){return t.addTemplate()}),jt(22,"\u6dfb\u52a0Angular Template"),Ft()()(),ut(23,"tr")(24,"td"),jt(25,"\u66f4\u65b0\u8282\u70b9"),Ft(),ut(26,"td"),fa(27,"input",2,3)(29,"input",4,5)(31,"br"),ut(32,"button",1),Fr("click",function(){!function qy(n){return K.lFrame.contextLView=n,n[8]}(r);const s=Bf(28),o=Bf(30);return function Wy(n){return K.lFrame.contextLView=null,n}(t.updateComponentValue(s.value,o.value))}),jt(33,"\u66f4\u65b0\u7ec4\u4ef6Input\u503c"),Ft()()()()(),fa(34,"div",6,7),function _0(n,e,t,r,i,s,o,a){const l=_(),c=de(),u=n+22,d=c.firstCreatePass?function YO(n,e,t,r,i,s,o,a,l){const c=e.consts,u=ys(e,n,4,o||null,Rr(c,a));Tf(e,t,u,Rr(c,l)),Zl(e,u);const d=u.tViews=Mf(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,r,i,s,o):c.data[u];Vn(d,!1);const h=l[11].createComment("");cc(c,l,h,d),Et(h,l),Dc(l,l[u]=s0(h,l,h,d)),ql(d)&&_f(c,l,d),null!=o&&Af(l,d,a)}(36,DX,4,1,"ng-template",null,8,CC)}},styles:[".header[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border:1px solid #000}.header[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:8px;border:1px solid #000}.header[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:4px}.header[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-of-type, .header[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-of-type{margin-right:0}.template-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border:2px solid #000;height:100%;width:100%}.template-container[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:gray}"]});class Po{}Po.\u0275fac=function(e){return new(e||Po)},Po.\u0275mod=gi({type:Po,bootstrap:[Pl]}),Po.\u0275inj=Ir({imports:[nj,Us]}),tj().bootstrapModule(Po).catch(n=>console.error(n))}},Oo=>{Oo(Oo.s=390)}]);